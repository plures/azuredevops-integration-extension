{
  "version": 3,
  "sources": ["../src/logging.ts", "../src/logging/StandardizedAutomaticLogger.ts", "../src/logging/unifiedLogger.ts", "../src/services/connection/branchEnrichment.ts", "../src/provider.ts", "../src/provider.js", "../src/services/connection/providerFactory.ts", "../src/bridge/sharedContextBridge.ts", "../src/cache.ts", "../src/services/connection/connectionNormalization.ts", "../src/services/secrets/patMigration.ts", "../src/services/extensionHostBridge.ts", "../src/features/commands/types.ts", "../src/services/setupServiceHelpers.ts", "../src/services/setupService.ts", "../src/performance.ts", "../src/praxis/connection/types.ts", "../node_modules/@plures/praxis/dist/node/chunk-JQ64KMLN.js", "../node_modules/@plures/praxis/dist/node/chunk-S54337I5.js", "../node_modules/@plures/praxis/dist/node/chunk-SRM3OPPM.js", "../node_modules/@plures/praxis/dist/node/chunk-VOMLVI6V.js", "../node_modules/svelte/src/constants.js", "../node_modules/esm-env/browser-fallback.js", "../node_modules/esm-env/dev-fallback.js", "../node_modules/esm-env/true.js", "../node_modules/esm-env/index.js", "../node_modules/svelte/src/internal/shared/utils.js", "../node_modules/svelte/src/internal/client/constants.js", "../node_modules/svelte/src/internal/shared/errors.js", "../node_modules/svelte/src/internal/client/errors.js", "../node_modules/svelte/src/internal/client/warnings.js", "../node_modules/svelte/src/internal/client/dom/hydration.js", "../node_modules/svelte/src/internal/client/reactivity/equality.js", "../node_modules/svelte/src/internal/flags/index.js", "../node_modules/svelte/src/internal/shared/warnings.js", "../node_modules/svelte/src/internal/shared/clone.js", "../node_modules/svelte/src/internal/client/dev/tracing.js", "../node_modules/svelte/src/internal/shared/dev.js", "../node_modules/svelte/src/internal/client/context.js", "../node_modules/svelte/src/internal/client/dom/task.js", "../node_modules/svelte/src/internal/client/error-handling.js", "../node_modules/svelte/src/internal/client/reactivity/status.js", "../node_modules/svelte/src/internal/client/reactivity/utils.js", "../node_modules/svelte/src/internal/client/reactivity/batch.js", "../node_modules/svelte/src/reactivity/create-subscriber.js", "../node_modules/svelte/src/internal/client/dom/blocks/boundary.js", "../node_modules/svelte/src/internal/client/reactivity/async.js", "../node_modules/svelte/src/internal/client/reactivity/deriveds.js", "../node_modules/svelte/src/internal/client/reactivity/sources.js", "../node_modules/svelte/src/internal/client/proxy.js", "../node_modules/svelte/src/internal/client/dev/equality.js", "../node_modules/svelte/src/internal/client/dom/operations.js", "../node_modules/svelte/src/internal/client/dom/elements/misc.js", "../node_modules/svelte/src/internal/client/dom/elements/bindings/shared.js", "../node_modules/svelte/src/internal/client/reactivity/effects.js", "../node_modules/svelte/src/internal/client/legacy.js", "../node_modules/svelte/src/internal/client/runtime.js", "../node_modules/svelte/src/internal/client/hydratable.js", "../node_modules/svelte/src/internal/client/dom/elements/events.js", "../node_modules/svelte/src/internal/client/dom/reconciler.js", "../node_modules/svelte/src/internal/client/dom/template.js", "../node_modules/svelte/src/utils.js", "../node_modules/svelte/src/internal/client/render.js", "../node_modules/svelte/src/internal/shared/validate.js", "../node_modules/svelte/src/internal/client/dom/blocks/branches.js", "../node_modules/svelte/src/internal/client/dom/blocks/snippet.js", "../node_modules/svelte/src/index-client.js", "../node_modules/svelte/src/attachments/index.js", "../node_modules/svelte/src/internal/client/dev/assign.js", "../node_modules/svelte/src/internal/client/dev/css.js", "../node_modules/svelte/src/internal/client/dev/elements.js", "../node_modules/svelte/src/internal/client/dev/hmr.js", "../node_modules/svelte/src/internal/client/dev/ownership.js", "../node_modules/svelte/src/internal/client/dev/legacy.js", "../node_modules/svelte/src/internal/client/dev/inspect.js", "../node_modules/svelte/src/internal/client/dom/blocks/async.js", "../node_modules/svelte/src/internal/client/dev/validation.js", "../node_modules/svelte/src/internal/client/dom/blocks/await.js", "../node_modules/svelte/src/internal/client/dom/blocks/if.js", "../node_modules/svelte/src/internal/client/dom/blocks/key.js", "../node_modules/svelte/src/internal/client/dom/blocks/css-props.js", "../node_modules/svelte/src/internal/client/dom/blocks/each.js", "../node_modules/svelte/src/internal/client/dom/blocks/html.js", "../node_modules/svelte/src/internal/client/dom/blocks/slot.js", "../node_modules/svelte/src/internal/client/dom/blocks/svelte-component.js", "../node_modules/svelte/src/internal/client/timing.js", "../node_modules/svelte/src/internal/client/loop.js", "../node_modules/svelte/src/internal/client/dom/elements/transitions.js", "../node_modules/svelte/src/internal/client/dom/blocks/svelte-element.js", "../node_modules/svelte/src/internal/client/dom/blocks/svelte-head.js", "../node_modules/svelte/src/internal/client/dom/css.js", "../node_modules/svelte/src/internal/client/dom/elements/actions.js", "../node_modules/svelte/src/internal/client/dom/elements/attachments.js", "../node_modules/svelte/src/escaping.js", "../node_modules/clsx/dist/clsx.mjs", "../node_modules/svelte/src/internal/shared/attributes.js", "../node_modules/svelte/src/internal/client/dom/elements/class.js", "../node_modules/svelte/src/internal/client/dom/elements/style.js", "../node_modules/svelte/src/internal/client/dom/elements/bindings/select.js", "../node_modules/svelte/src/internal/client/dom/elements/attributes.js", "../node_modules/svelte/src/internal/client/dom/elements/customizable-select.js", "../node_modules/svelte/src/internal/client/dom/elements/bindings/document.js", "../node_modules/svelte/src/internal/client/dom/elements/bindings/input.js", "../node_modules/svelte/src/internal/client/dom/elements/bindings/media.js", "../node_modules/svelte/src/internal/client/dom/elements/bindings/navigator.js", "../node_modules/svelte/src/internal/client/dom/elements/bindings/props.js", "../node_modules/svelte/src/internal/client/dom/elements/bindings/size.js", "../node_modules/svelte/src/internal/client/dom/elements/bindings/this.js", "../node_modules/svelte/src/internal/client/dom/elements/bindings/universal.js", "../node_modules/svelte/src/internal/client/dom/elements/bindings/window.js", "../node_modules/svelte/src/internal/client/dom/legacy/event-modifiers.js", "../node_modules/svelte/src/internal/client/dom/legacy/lifecycle.js", "../node_modules/svelte/src/internal/client/dom/legacy/misc.js", "../node_modules/svelte/src/store/utils.js", "../node_modules/svelte/src/store/shared/index.js", "../node_modules/svelte/src/internal/client/reactivity/store.js", "../node_modules/svelte/src/internal/client/reactivity/props.js", "../node_modules/svelte/src/internal/client/validate.js", "../node_modules/svelte/src/legacy/legacy-client.js", "../node_modules/svelte/src/internal/client/dom/elements/custom-element.js", "../node_modules/svelte/src/internal/client/dev/console-log.js", "../node_modules/svelte/src/internal/client/index.js", "../node_modules/@plures/praxis/dist/node/chunk-LE2ZJYFC.js", "../node_modules/@plures/praxis/dist/node/chunk-N5Y37EUV.js", "../node_modules/@plures/praxis/dist/node/chunk-RJMWCNHR.js", "../node_modules/@plures/praxis/dist/node/chunk-UATVJBNV.js", "../node_modules/js-yaml/dist/js-yaml.mjs", "../node_modules/@plures/praxis/dist/node/chunk-UY7YEBE2.js", "../node_modules/@plures/praxis/dist/node/chunk-QGM4M3NI.js", "../node_modules/@plures/praxis/dist/node/index.js", "../src/praxis/connection/facts.ts", "../src/praxis/connection/rules.ts", "../src/praxis/connection/engine.ts", "../src/praxis/connection/manager.ts", "../src/logging/ComponentLogger.ts", "../node_modules/axios/lib/helpers/bind.js", "../node_modules/axios/lib/utils.js", "../node_modules/axios/lib/core/AxiosError.js", "../node_modules/delayed-stream/lib/delayed_stream.js", "../node_modules/combined-stream/lib/combined_stream.js", "../node_modules/mime-db/db.json", "../node_modules/mime-db/index.js", "../node_modules/mime-types/index.js", "../node_modules/asynckit/lib/defer.js", "../node_modules/asynckit/lib/async.js", "../node_modules/asynckit/lib/abort.js", "../node_modules/asynckit/lib/iterate.js", "../node_modules/asynckit/lib/state.js", "../node_modules/asynckit/lib/terminator.js", "../node_modules/asynckit/parallel.js", "../node_modules/asynckit/serialOrdered.js", "../node_modules/asynckit/serial.js", "../node_modules/asynckit/index.js", "../node_modules/es-object-atoms/index.js", "../node_modules/es-errors/index.js", "../node_modules/es-errors/eval.js", "../node_modules/es-errors/range.js", "../node_modules/es-errors/ref.js", "../node_modules/es-errors/syntax.js", "../node_modules/es-errors/type.js", "../node_modules/es-errors/uri.js", "../node_modules/math-intrinsics/abs.js", "../node_modules/math-intrinsics/floor.js", "../node_modules/math-intrinsics/max.js", "../node_modules/math-intrinsics/min.js", "../node_modules/math-intrinsics/pow.js", "../node_modules/math-intrinsics/round.js", "../node_modules/math-intrinsics/isNaN.js", "../node_modules/math-intrinsics/sign.js", "../node_modules/gopd/gOPD.js", "../node_modules/gopd/index.js", "../node_modules/es-define-property/index.js", "../node_modules/has-symbols/shams.js", "../node_modules/has-symbols/index.js", "../node_modules/get-proto/Reflect.getPrototypeOf.js", "../node_modules/get-proto/Object.getPrototypeOf.js", "../node_modules/function-bind/implementation.js", "../node_modules/function-bind/index.js", "../node_modules/call-bind-apply-helpers/functionCall.js", "../node_modules/call-bind-apply-helpers/functionApply.js", "../node_modules/call-bind-apply-helpers/reflectApply.js", "../node_modules/call-bind-apply-helpers/actualApply.js", "../node_modules/call-bind-apply-helpers/index.js", "../node_modules/dunder-proto/get.js", "../node_modules/get-proto/index.js", "../node_modules/hasown/index.js", "../node_modules/get-intrinsic/index.js", "../node_modules/has-tostringtag/shams.js", "../node_modules/es-set-tostringtag/index.js", "../node_modules/form-data/lib/populate.js", "../node_modules/form-data/lib/form_data.js", "../node_modules/axios/lib/platform/node/classes/FormData.js", "../node_modules/axios/lib/helpers/toFormData.js", "../node_modules/axios/lib/helpers/AxiosURLSearchParams.js", "../node_modules/axios/lib/helpers/buildURL.js", "../node_modules/axios/lib/core/InterceptorManager.js", "../node_modules/axios/lib/defaults/transitional.js", "../node_modules/axios/lib/platform/node/classes/URLSearchParams.js", "../node_modules/axios/lib/platform/node/index.js", "../node_modules/axios/lib/platform/common/utils.js", "../node_modules/axios/lib/platform/index.js", "../node_modules/axios/lib/helpers/toURLEncodedForm.js", "../node_modules/axios/lib/helpers/formDataToJSON.js", "../node_modules/axios/lib/defaults/index.js", "../node_modules/axios/lib/helpers/parseHeaders.js", "../node_modules/axios/lib/core/AxiosHeaders.js", "../node_modules/axios/lib/core/transformData.js", "../node_modules/axios/lib/cancel/isCancel.js", "../node_modules/axios/lib/cancel/CanceledError.js", "../node_modules/axios/lib/core/settle.js", "../node_modules/axios/lib/helpers/isAbsoluteURL.js", "../node_modules/axios/lib/helpers/combineURLs.js", "../node_modules/axios/lib/core/buildFullPath.js", "../node_modules/proxy-from-env/index.js", "../node_modules/ms/index.js", "../node_modules/debug/src/common.js", "../node_modules/debug/src/browser.js", "../node_modules/has-flag/index.js", "../node_modules/supports-color/index.js", "../node_modules/debug/src/node.js", "../node_modules/debug/src/index.js", "../node_modules/follow-redirects/debug.js", "../node_modules/follow-redirects/index.js", "../node_modules/axios/lib/env/data.js", "../node_modules/axios/lib/helpers/parseProtocol.js", "../node_modules/axios/lib/helpers/fromDataURI.js", "../node_modules/axios/lib/helpers/AxiosTransformStream.js", "../node_modules/axios/lib/helpers/readBlob.js", "../node_modules/axios/lib/helpers/formDataToStream.js", "../node_modules/axios/lib/helpers/ZlibHeaderTransformStream.js", "../node_modules/axios/lib/helpers/callbackify.js", "../node_modules/axios/lib/helpers/speedometer.js", "../node_modules/axios/lib/helpers/throttle.js", "../node_modules/axios/lib/helpers/progressEventReducer.js", "../node_modules/axios/lib/helpers/estimateDataURLDecodedBytes.js", "../node_modules/axios/lib/adapters/http.js", "../node_modules/axios/lib/helpers/isURLSameOrigin.js", "../node_modules/axios/lib/helpers/cookies.js", "../node_modules/axios/lib/core/mergeConfig.js", "../node_modules/axios/lib/helpers/resolveConfig.js", "../node_modules/axios/lib/adapters/xhr.js", "../node_modules/axios/lib/helpers/composeSignals.js", "../node_modules/axios/lib/helpers/trackStream.js", "../node_modules/axios/lib/adapters/fetch.js", "../node_modules/axios/lib/adapters/adapters.js", "../node_modules/axios/lib/core/dispatchRequest.js", "../node_modules/axios/lib/helpers/validator.js", "../node_modules/axios/lib/core/Axios.js", "../node_modules/axios/lib/cancel/CancelToken.js", "../node_modules/axios/lib/helpers/spread.js", "../node_modules/axios/lib/helpers/isAxiosError.js", "../node_modules/axios/lib/helpers/HttpStatusCode.js", "../node_modules/axios/lib/axios.js", "../node_modules/axios/index.js", "../src/rateLimiter.ts", "../src/azureClient.ts", "../src/azureClient.js", "../node_modules/@azure/msal-node/src/cache/serializer/Serializer.ts", "../node_modules/@azure/msal-common/src/utils/Constants.ts", "../node_modules/@azure/msal-common/src/error/AuthErrorCodes.ts", "../node_modules/@azure/msal-common/src/error/AuthError.ts", "../node_modules/@azure/msal-common/src/error/ClientAuthErrorCodes.ts", "../node_modules/@azure/msal-common/src/error/ClientAuthError.ts", "../node_modules/@azure/msal-common/src/crypto/ICrypto.ts", "../node_modules/@azure/msal-common/src/logger/Logger.ts", "../node_modules/@azure/msal-common/src/packageMetadata.ts", "../node_modules/@azure/msal-common/src/authority/AuthorityOptions.ts", "../node_modules/@azure/msal-common/src/error/ClientConfigurationErrorCodes.ts", "../node_modules/@azure/msal-common/src/error/ClientConfigurationError.ts", "../node_modules/@azure/msal-common/src/utils/StringUtils.ts", "../node_modules/@azure/msal-common/src/request/ScopeSet.ts", "../node_modules/@azure/msal-common/src/account/ClientInfo.ts", "../node_modules/@azure/msal-common/src/account/AccountInfo.ts", "../node_modules/@azure/msal-common/src/authority/AuthorityType.ts", "../node_modules/@azure/msal-common/src/account/TokenClaims.ts", "../node_modules/@azure/msal-common/src/authority/ProtocolMode.ts", "../node_modules/@azure/msal-common/src/cache/entities/AccountEntity.ts", "../node_modules/@azure/msal-common/src/account/AuthToken.ts", "../node_modules/@azure/msal-common/src/utils/UrlUtils.ts", "../node_modules/@azure/msal-common/src/url/UrlString.ts", "../node_modules/@azure/msal-common/src/authority/AuthorityMetadata.ts", "../node_modules/@azure/msal-common/src/error/CacheErrorCodes.ts", "../node_modules/@azure/msal-common/src/error/CacheError.ts", "../node_modules/@azure/msal-common/src/cache/CacheManager.ts", "../node_modules/@azure/msal-common/src/telemetry/performance/PerformanceEvent.ts", "../node_modules/@azure/msal-common/src/telemetry/performance/StubPerformanceClient.ts", "../node_modules/@azure/msal-common/src/config/ClientConfiguration.ts", "../node_modules/@azure/msal-common/src/account/CcsCredential.ts", "../node_modules/@azure/msal-common/src/constants/AADServerParamKeys.ts", "../node_modules/@azure/msal-common/src/request/RequestParameterBuilder.ts", "../node_modules/@azure/msal-common/src/authority/OpenIdConfigResponse.ts", "../node_modules/@azure/msal-common/src/authority/CloudInstanceDiscoveryResponse.ts", "../node_modules/@azure/msal-common/src/authority/CloudInstanceDiscoveryErrorResponse.ts", "../node_modules/@azure/msal-common/src/utils/FunctionWrappers.ts", "../node_modules/@azure/msal-common/src/authority/RegionDiscovery.ts", "../node_modules/@azure/msal-common/src/utils/TimeUtils.ts", "../node_modules/@azure/msal-common/src/cache/utils/CacheHelpers.ts", "../node_modules/@azure/msal-common/src/authority/Authority.ts", "../node_modules/@azure/msal-common/src/authority/AuthorityFactory.ts", "../node_modules/@azure/msal-common/src/error/ServerError.ts", "../node_modules/@azure/msal-common/src/network/RequestThumbprint.ts", "../node_modules/@azure/msal-common/src/network/ThrottlingUtils.ts", "../node_modules/@azure/msal-common/src/error/NetworkError.ts", "../node_modules/@azure/msal-common/src/client/BaseClient.ts", "../node_modules/@azure/msal-common/src/error/InteractionRequiredAuthErrorCodes.ts", "../node_modules/@azure/msal-common/src/error/InteractionRequiredAuthError.ts", "../node_modules/@azure/msal-common/src/utils/ProtocolUtils.ts", "../node_modules/@azure/msal-common/src/crypto/PopTokenGenerator.ts", "../node_modules/@azure/msal-common/src/cache/persistence/TokenCacheContext.ts", "../node_modules/@azure/msal-common/src/response/ResponseHandler.ts", "../node_modules/@azure/msal-common/src/utils/ClientAssertionUtils.ts", "../node_modules/@azure/msal-common/src/client/AuthorizationCodeClient.ts", "../node_modules/@azure/msal-common/src/client/RefreshTokenClient.ts", "../node_modules/@azure/msal-common/src/client/SilentFlowClient.ts", "../node_modules/@azure/msal-common/src/protocol/Authorize.ts", "../node_modules/@azure/msal-common/src/telemetry/server/ServerTelemetryManager.ts", "../node_modules/@azure/msal-common/dist/index-node.mjs", "../node_modules/@azure/msal-node/src/cache/serializer/Deserializer.ts", "../node_modules/@azure/msal-node/src/utils/Constants.ts", "../node_modules/@azure/msal-node/src/utils/NetworkUtils.ts", "../node_modules/@azure/msal-node/src/packageMetadata.ts", "../node_modules/@azure/msal-node/src/network/HttpClient.ts", "../node_modules/@azure/msal-node/src/error/ManagedIdentityErrorCodes.ts", "../node_modules/@azure/msal-node/src/error/ManagedIdentityError.ts", "../node_modules/@azure/msal-node/src/error/NodeAuthError.ts", "../node_modules/@azure/msal-node/src/config/Configuration.ts", "../node_modules/uuid/dist/esm-node/rng.js", "../node_modules/uuid/dist/esm-node/regex.js", "../node_modules/uuid/dist/esm-node/validate.js", "../node_modules/uuid/dist/esm-node/stringify.js", "../node_modules/uuid/dist/esm-node/v4.js", "../node_modules/uuid/dist/esm-node/index.js", "../node_modules/@azure/msal-node/src/crypto/GuidGenerator.ts", "../node_modules/@azure/msal-node/src/utils/EncodingUtils.ts", "../node_modules/@azure/msal-node/src/crypto/HashUtils.ts", "../node_modules/@azure/msal-node/src/crypto/PkceGenerator.ts", "../node_modules/@azure/msal-node/src/crypto/CryptoProvider.ts", "../node_modules/@azure/msal-common/dist/index.mjs", "../node_modules/@azure/msal-node/src/cache/CacheHelpers.ts", "../node_modules/@azure/msal-node/src/cache/NodeStorage.ts", "../node_modules/@azure/msal-node/src/cache/TokenCache.ts", "../node_modules/safe-buffer/index.js", "../node_modules/jws/lib/data-stream.js", "../node_modules/ecdsa-sig-formatter/src/param-bytes-for-alg.js", "../node_modules/ecdsa-sig-formatter/src/ecdsa-sig-formatter.js", "../node_modules/buffer-equal-constant-time/index.js", "../node_modules/jwa/index.js", "../node_modules/jws/lib/tostring.js", "../node_modules/jws/lib/sign-stream.js", "../node_modules/jws/lib/verify-stream.js", "../node_modules/jws/index.js", "../node_modules/jsonwebtoken/decode.js", "../node_modules/jsonwebtoken/lib/JsonWebTokenError.js", "../node_modules/jsonwebtoken/lib/NotBeforeError.js", "../node_modules/jsonwebtoken/lib/TokenExpiredError.js", "../node_modules/jsonwebtoken/lib/timespan.js", "../node_modules/semver/internal/constants.js", "../node_modules/semver/internal/debug.js", "../node_modules/semver/internal/re.js", "../node_modules/semver/internal/parse-options.js", "../node_modules/semver/internal/identifiers.js", "../node_modules/semver/classes/semver.js", "../node_modules/semver/functions/parse.js", "../node_modules/semver/functions/valid.js", "../node_modules/semver/functions/clean.js", "../node_modules/semver/functions/inc.js", "../node_modules/semver/functions/diff.js", "../node_modules/semver/functions/major.js", "../node_modules/semver/functions/minor.js", "../node_modules/semver/functions/patch.js", "../node_modules/semver/functions/prerelease.js", "../node_modules/semver/functions/compare.js", "../node_modules/semver/functions/rcompare.js", "../node_modules/semver/functions/compare-loose.js", "../node_modules/semver/functions/compare-build.js", "../node_modules/semver/functions/sort.js", "../node_modules/semver/functions/rsort.js", "../node_modules/semver/functions/gt.js", "../node_modules/semver/functions/lt.js", "../node_modules/semver/functions/eq.js", "../node_modules/semver/functions/neq.js", "../node_modules/semver/functions/gte.js", "../node_modules/semver/functions/lte.js", "../node_modules/semver/functions/cmp.js", "../node_modules/semver/functions/coerce.js", "../node_modules/semver/internal/lrucache.js", "../node_modules/semver/classes/range.js", "../node_modules/semver/classes/comparator.js", "../node_modules/semver/functions/satisfies.js", "../node_modules/semver/ranges/to-comparators.js", "../node_modules/semver/ranges/max-satisfying.js", "../node_modules/semver/ranges/min-satisfying.js", "../node_modules/semver/ranges/min-version.js", "../node_modules/semver/ranges/valid.js", "../node_modules/semver/ranges/outside.js", "../node_modules/semver/ranges/gtr.js", "../node_modules/semver/ranges/ltr.js", "../node_modules/semver/ranges/intersects.js", "../node_modules/semver/ranges/simplify.js", "../node_modules/semver/ranges/subset.js", "../node_modules/semver/index.js", "../node_modules/jsonwebtoken/lib/asymmetricKeyDetailsSupported.js", "../node_modules/jsonwebtoken/lib/rsaPssKeyDetailsSupported.js", "../node_modules/jsonwebtoken/lib/validateAsymmetricKey.js", "../node_modules/jsonwebtoken/lib/psSupported.js", "../node_modules/jsonwebtoken/verify.js", "../node_modules/lodash.includes/index.js", "../node_modules/lodash.isboolean/index.js", "../node_modules/lodash.isinteger/index.js", "../node_modules/lodash.isnumber/index.js", "../node_modules/lodash.isplainobject/index.js", "../node_modules/lodash.isstring/index.js", "../node_modules/lodash.once/index.js", "../node_modules/jsonwebtoken/sign.js", "../node_modules/jsonwebtoken/index.js", "../node_modules/@azure/msal-node/src/client/ClientAssertion.ts", "../node_modules/@azure/msal-node/src/client/UsernamePasswordClient.ts", "../node_modules/@azure/msal-node/src/protocol/Authorize.ts", "../node_modules/@azure/msal-node/src/client/ClientApplication.ts", "../node_modules/@azure/msal-node/src/network/LoopbackClient.ts", "../node_modules/@azure/msal-node/src/client/DeviceCodeClient.ts", "../node_modules/@azure/msal-node/src/client/PublicClientApplication.ts", "../node_modules/@azure/msal-node/src/utils/TimeUtils.ts", "../node_modules/@azure/msal-node/src/network/HttpClientWithRetries.ts", "../node_modules/@azure/msal-node/src/client/ManagedIdentitySources/BaseManagedIdentitySource.ts", "../node_modules/@azure/msal-node/src/retry/DefaultManagedIdentityRetryPolicy.ts", "../node_modules/@azure/msal-node/src/client/ManagedIdentitySources/AzureArc.ts", "../node_modules/@azure/msal-node/src/retry/ImdsRetryPolicy.ts", "../node_modules/@azure/msal-node/src/client/ManagedIdentitySources/Imds.ts", "../node_modules/@azure/msal-node/src/client/ManagedIdentitySources/MachineLearning.ts", "../node_modules/@azure/msal-node/src/client/ManagedIdentityApplication.ts", "../node_modules/@azure/msal-node/dist/index.mjs", "../src/services/auth/deviceCodeHelpers.ts", "../src/config/authConfig.ts", "../src/services/auth/pkceUtils.ts", "../src/services/auth/authorizationCodeProvider.ts", "../src/services/auth/authCodeFlowHelpers.ts", "../src/services/auth/authentication.ts", "../src/services/connection/authFlowHelpers.ts", "../src/services/connection/connectionManagerHelpers.ts", "../src/praxis/connection/driver.ts", "../src/praxis/connection/service.ts", "../src/features/commands/diagnosticHelpers.ts", "../src/features/commands/handlers.ts", "../src/features/commands/registration.ts", "../src/features/commands/index.ts", "../src/logging/TraceLogger.ts", "../src/commands/traceCommands.ts", "../src/commands/quickDebugCommands.ts", "../node_modules/@plures/praxis/dist/node/integrations/svelte.js", "../src/praxis/application/features/timer.ts", "../src/praxis/application/facts.ts", "../src/praxis/application/rules/lifecycleRules.ts", "../src/praxis/application/rules/connectionRules.ts", "../src/praxis/application/types.ts", "../src/praxis/application/tracing.ts", "../src/praxis/application/engine.ts", "../src/praxis/application/rules/workItemRules.ts", "../src/praxis/application/rules/miscRules.ts", "../src/praxis/application/rules/index.ts", "../src/webview/praxis/frontendEngine.ts", "../src/webview/praxis/store.ts", "../src/debugging/historyExport.ts", "../src/testing/historyTestRecorder.ts", "../src/debugging/eventReplayDebugger.ts", "../src/commands/historyDebugCommands.ts", "../src/testing/testGenerator.ts", "../src/commands/testGeneratorCommands.ts", "../src/logging/MessageInterceptor.ts", "../node_modules/svelte/src/store/index-server.js", "../src/praxis/application/eventBus.ts", "../src/praxis/timer/facts.ts", "../src/praxis/timer/types.ts", "../src/praxis/timer/rules.ts", "../src/praxis/timer/engine.ts", "../src/praxis/timer/manager.ts", "../src/praxis/auth/types.ts", "../src/praxis/auth/facts.ts", "../src/praxis/auth/rules.ts", "../src/praxis/auth/engine.ts", "../src/praxis/auth/manager.ts", "../src/praxis/application/manager.ts", "../src/stores/eventHandlers.ts", "../src/webview/selection.writer.internal.ts", "../src/stores/applicationStore.ts", "../src/commands/outputChannelReader.ts", "../node_modules/ws/lib/constants.js", "../node_modules/ws/lib/buffer-util.js", "../node_modules/ws/lib/limiter.js", "../node_modules/ws/lib/permessage-deflate.js", "../node_modules/ws/lib/validation.js", "../node_modules/ws/lib/receiver.js", "../node_modules/ws/lib/sender.js", "../node_modules/ws/lib/event-target.js", "../node_modules/ws/lib/extension.js", "../node_modules/ws/lib/websocket.js", "../node_modules/ws/lib/stream.js", "../node_modules/ws/lib/subprotocol.js", "../node_modules/ws/lib/websocket-server.js", "../node_modules/ws/wrapper.mjs", "../src/logging/LiveCanvasBridge.ts", "../src/services/router/stamp.ts", "../src/activation.ts"],
  "sourcesContent": ["/**\n * Module: src/logging.ts\n * Owner: application\n * Reads: (document)\n * Writes: (document)\n * Receives: (document)\n * Emits: (document)\n * Prohibitions: Do not mutate ApplicationContext directly; Do not define new *Context types\n * Rationale: (document)\n *\n * LLM-GUARD:\n * - Follow ownership boundaries; route events to Router; do not add UI logic here\n */\nimport * as vscode from 'vscode';\n\nconst LOG_BUFFER_MAX = 5000;\nlet outputChannel: vscode.OutputChannel | undefined;\nconst logBuffer: string[] = [];\n\ntype ScopedLogFunction = (message: string, meta?: unknown) => void;\n\nexport type ScopedLogger = {\n  debug: ScopedLogFunction;\n  info: ScopedLogFunction;\n  warn: ScopedLogFunction;\n  error: ScopedLogFunction;\n};\n\nexport function setOutputChannel(channel: vscode.OutputChannel | undefined) {\n  outputChannel = channel;\n}\n\nexport function getOutputChannel(): vscode.OutputChannel | undefined {\n  return outputChannel;\n}\n\nexport function clearOutputChannel() {\n  outputChannel = undefined;\n}\n\nexport function logLine(text: string) {\n  try {\n    outputChannel?.appendLine(text);\n  } catch {\n    /* ignore channel errors */\n  }\n  try {\n    logBuffer.push(text);\n    if (logBuffer.length > LOG_BUFFER_MAX) {\n      logBuffer.splice(0, logBuffer.length - LOG_BUFFER_MAX);\n    }\n  } catch {\n    /* ignore buffer errors */\n  }\n}\n\nfunction formatLogMeta(meta: unknown): string | undefined {\n  if (meta === undefined || meta === null) return undefined;\n  if (typeof meta === 'string') return meta;\n  try {\n    return JSON.stringify(meta);\n  } catch {\n    return '[unserializable meta]';\n  }\n}\n\nexport function createScopedLogger(\n  scope: string,\n  shouldLogDebug: () => boolean = () => false\n): ScopedLogger {\n  const write = (level: string, message: string, meta?: unknown) => {\n    const metaText = formatLogMeta(meta);\n    const suffix = metaText ? ` ${metaText}` : '';\n    // CRITICAL: Always include [AzureDevOpsInt] prefix for log filtering\n    const line = `${new Date().toISOString()} [AzureDevOpsInt] [${scope}] ${level} ${message}${suffix}`;\n    logLine(line);\n\n    // Also write to debug console\n    if (level === 'ERROR') {\n      console.error(line);\n    } else if (level === 'WARN') {\n      console.warn(line);\n    } else {\n      console.log(line);\n    }\n  };\n\n  return {\n    debug: (message, meta) => {\n      if (!shouldLogDebug()) return;\n      write('DEBUG', message, meta);\n    },\n    info: (message, meta) => {\n      if (!shouldLogDebug()) return;\n      write('INFO', message, meta);\n    },\n    warn: (message, meta) => {\n      write('WARN', message, meta);\n    },\n    error: (message, meta) => {\n      write('ERROR', message, meta);\n    },\n  };\n}\n\nexport function getLogBufferSnapshot(): string[] {\n  return [...logBuffer];\n}\n\nexport function getLogBufferLength(): number {\n  return logBuffer.length;\n}\n\nexport function clearLogBuffer() {\n  logBuffer.splice(0, logBuffer.length);\n}\n\n/**\n * Bridges console.log and console.error to the Output Channel\n * This ensures all console logging appears in the extension logs\n */\nexport function bridgeConsoleToOutputChannel() {\n  const originalConsoleLog = console.log;\n  const originalConsoleError = console.error;\n  const originalConsoleWarn = console.warn;\n\n  console.log = function (...args: any[]) {\n    try {\n      const message = args\n        .map((arg) => {\n          if (typeof arg === 'string') return arg;\n          try {\n            return JSON.stringify(arg);\n          } catch {\n            return String(arg);\n          }\n        })\n        .join(' ');\n      logLine(`[console.log] ${message}`);\n    } catch {\n      /* ignore */\n    }\n    return originalConsoleLog.apply(console, args);\n  };\n\n  console.error = function (...args: any[]) {\n    try {\n      const message = args\n        .map((arg) => {\n          if (typeof arg === 'string') return arg;\n          if (arg instanceof Error) return `${arg.message}\\n${arg.stack}`;\n          try {\n            return JSON.stringify(arg);\n          } catch {\n            return String(arg);\n          }\n        })\n        .join(' ');\n      logLine(`[console.error] ${message}`);\n    } catch {\n      /* ignore */\n    }\n    return originalConsoleError.apply(console, args);\n  };\n\n  console.warn = function (...args: any[]) {\n    try {\n      const message = args\n        .map((arg) => {\n          if (typeof arg === 'string') return arg;\n          try {\n            return JSON.stringify(arg);\n          } catch {\n            return String(arg);\n          }\n        })\n        .join(' ');\n      logLine(`[console.warn] ${message}`);\n    } catch {\n      /* ignore */\n    }\n    return originalConsoleWarn.apply(console, args);\n  };\n}\n", "/**\n * Standardized Automatic Logger\n *\n * Provides zero-instrumentation automatic logging with standardized format:\n * [azuredevops-integration-extension][{runtime}][{flowName}][{componentName}][{functionName}] {message}\n *\n * This is the ONLY logging mechanism. All other logging systems are deprecated.\n */\n\nimport { logLine } from '../logging.js';\n\ntype Runtime = 'ext' | 'webview';\ntype LogLevel = 'debug' | 'info' | 'warn' | 'error';\n\ninterface LogContext {\n  runtime: Runtime;\n  flowName: string;\n  componentName: string;\n  functionName?: string;\n}\n\ninterface LogEntry {\n  context: LogContext;\n  level: LogLevel;\n  message: string;\n  meta?: Record<string, unknown>;\n  timestamp: number;\n  sessionId: string;\n}\n\nclass StandardizedAutomaticLogger {\n  private static instance: StandardizedAutomaticLogger | undefined;\n  private sessionId: string;\n  private entries: LogEntry[] = [];\n  private maxEntries = 10000;\n\n  private constructor() {\n    this.sessionId = `session_${Date.now()}_${Math.random().toString(36).substring(7)}`;\n  }\n\n  public static getInstance(): StandardizedAutomaticLogger {\n    if (!StandardizedAutomaticLogger.instance) {\n      StandardizedAutomaticLogger.instance = new StandardizedAutomaticLogger();\n    }\n    return StandardizedAutomaticLogger.instance;\n  }\n\n  /**\n   * Format log message according to standard:\n   * [azuredevops-integration-extension][{runtime}][{flowName}][{componentName}][{functionName}] {message}\n   */\n  private formatMessage(context: LogContext, message: string): string {\n    const prefix = '[azuredevops-integration-extension]';\n    const runtime = `[${context.runtime}]`;\n    const flow = `[${context.flowName}]`;\n    const component = `[${context.componentName}]`;\n    const functionPart = context.functionName ? `[${context.functionName}]` : '';\n\n    return `${prefix}${runtime}${flow}${component}${functionPart} ${message}`;\n  }\n\n  /**\n   * Format metadata for logging\n   */\n  private formatMeta(meta?: Record<string, unknown>): string {\n    if (!meta || Object.keys(meta).length === 0) return '';\n\n    try {\n      return ` ${JSON.stringify(meta)}`;\n    } catch {\n      return ' [unserializable meta]';\n    }\n  }\n\n  /**\n   * Determine runtime context automatically\n   */\n  private detectRuntime(): Runtime {\n    // In webview context, window is available and acquireVsCodeApi exists\n    if (typeof window !== 'undefined' && typeof (window as any).acquireVsCodeApi === 'function') {\n      return 'webview';\n    }\n    // In extension host, process.versions.node exists\n    if (typeof process !== 'undefined' && process?.versions?.node) {\n      return 'ext';\n    }\n    // Default to ext if uncertain\n    return 'ext';\n  }\n\n  /**\n   * Core logging method\n   */\n  public log(\n    flowName: string,\n    componentName: string,\n    functionName: string | undefined,\n    level: LogLevel,\n    message: string,\n    meta?: Record<string, unknown>\n  ): void {\n    const runtime = this.detectRuntime();\n    const context: LogContext = {\n      runtime,\n      flowName,\n      componentName,\n      functionName,\n    };\n\n    const entry: LogEntry = {\n      context,\n      level,\n      message,\n      meta,\n      timestamp: Date.now(),\n      sessionId: this.sessionId,\n    };\n\n    // Store entry\n    this.entries.push(entry);\n    if (this.entries.length > this.maxEntries) {\n      this.entries = this.entries.slice(-this.maxEntries);\n    }\n\n    // Format and output\n    const formattedMessage = this.formatMessage(context, message);\n    const metaText = this.formatMeta(meta);\n    const fullMessage = `${formattedMessage}${metaText}`;\n\n    // Write to output channel (VS Code)\n    logLine(fullMessage);\n\n    // Write to console (for debug console)\n    // Note: We use console methods here because this IS the logging system\n    // ESLint rules allow console in logging.ts and this file\n    switch (level) {\n      case 'error':\n        console.error(fullMessage);\n        break;\n      case 'warn':\n        console.warn(fullMessage);\n        break;\n      case 'debug':\n        console.debug(fullMessage);\n        break;\n      default:\n        console.log(fullMessage);\n    }\n  }\n\n  /**\n   * Convenience methods for each log level\n   */\n  public debug(\n    flowName: string,\n    componentName: string,\n    functionName: string | undefined,\n    message: string,\n    meta?: Record<string, unknown>\n  ): void {\n    this.log(flowName, componentName, functionName, 'debug', message, meta);\n  }\n\n  public info(\n    flowName: string,\n    componentName: string,\n    functionName: string | undefined,\n    message: string,\n    meta?: Record<string, unknown>\n  ): void {\n    this.log(flowName, componentName, functionName, 'info', message, meta);\n  }\n\n  public warn(\n    flowName: string,\n    componentName: string,\n    functionName: string | undefined,\n    message: string,\n    meta?: Record<string, unknown>\n  ): void {\n    this.log(flowName, componentName, functionName, 'warn', message, meta);\n  }\n\n  public error(\n    flowName: string,\n    componentName: string,\n    functionName: string | undefined,\n    message: string,\n    meta?: Record<string, unknown>\n  ): void {\n    this.log(flowName, componentName, functionName, 'error', message, meta);\n  }\n\n  /**\n   * Get all log entries (for replay/export)\n   */\n  public getEntries(filter?: {\n    flowName?: string;\n    componentName?: string;\n    level?: LogLevel;\n  }): LogEntry[] {\n    let entries = [...this.entries];\n\n    if (filter?.flowName) {\n      entries = entries.filter((e) => e.context.flowName === filter.flowName);\n    }\n    if (filter?.componentName) {\n      entries = entries.filter((e) => e.context.componentName === filter.componentName);\n    }\n    if (filter?.level) {\n      entries = entries.filter((e) => e.level === filter.level);\n    }\n\n    return entries;\n  }\n\n  /**\n   * Export session for replay\n   */\n  public exportSession(): LogEntry[] {\n    return [...this.entries];\n  }\n\n  /**\n   * Clear all entries\n   */\n  public clear(): void {\n    this.entries = [];\n  }\n\n  /**\n   * Get session ID\n   */\n  public getSessionId(): string {\n    return this.sessionId;\n  }\n}\n\n// Singleton instance\nexport const standardizedLogger = StandardizedAutomaticLogger.getInstance();\n\n// Convenience function for automatic logging\nexport function autoLog(\n  flowName: string,\n  componentName: string,\n  functionName: string | undefined,\n  level: LogLevel,\n  message: string,\n  meta?: Record<string, unknown>\n): void {\n  standardizedLogger.log(flowName, componentName, functionName, level, message, meta);\n}\n", "/**\n * Module: src/logging/unifiedLogger.ts\n * Owner: application\n * Reads: (document)\n * Writes: (document)\n * Receives: (document)\n * Emits: (document)\n * Prohibitions: Do not mutate ApplicationContext directly; Do not define new *Context types\n * Rationale: (document)\n *\n * LLM-GUARD:\n * - Follow ownership boundaries; route events to Router; do not add UI logic here\n */\n/**\n * Unified Logger - Always includes [AzureDevOpsInt] prefix\n *\n * This logger ensures all logs are properly prefixed so they can be filtered.\n * Use this instead of console.log/error/warn directly.\n */\n\n// Optional vscode import (extension host only); dynamic to avoid bundler resolution errors in desktop app\nlet vscode: typeof import('vscode') | undefined;\nvoid (async () => {\n  try {\n    if (typeof process !== 'undefined' && process?.versions?.node) {\n      const vscodeModule = await import('vscode');\n      vscode = vscodeModule;\n    }\n  } catch {\n    vscode = undefined;\n  }\n})();\nimport { logLine } from '../logging.js';\nimport { standardizedLogger } from './StandardizedAutomaticLogger.js';\n\n// Use standardized logger format: [azuredevops-integration-extension][{runtime}][{flowName}][{componentName}][{functionName}]\n// This ensures all logs use the same format for consistency and filtering\n\ntype LogLevel = 'debug' | 'info' | 'warn' | 'error';\n\ninterface LogOptions {\n  /** Optional scope/category for the log (e.g., 'convert', 'activation') */\n  scope?: string;\n  /** Optional metadata object to include */\n  meta?: unknown;\n}\n\n/**\n * Unified logger that always includes [AzureDevOpsInt] prefix\n *\n * @example\n * ```typescript\n * import { log } from './logging/unifiedLogger.js';\n *\n * log.info('Connection established', { scope: 'connection', meta: { id: 'conn-123' } });\n * log.error('Failed to connect', { scope: 'connection', meta: error });\n * ```\n */\nexport const log = {\n  debug: (message: string, options?: LogOptions) => {\n    if (!shouldLogDebug()) return;\n    writeLog('debug', message, options);\n  },\n\n  info: (message: string, options?: LogOptions) => {\n    writeLog('info', message, options);\n  },\n\n  warn: (message: string, options?: LogOptions) => {\n    writeLog('warn', message, options);\n  },\n\n  error: (message: string, options?: LogOptions) => {\n    writeLog('error', message, options);\n  },\n};\n\nfunction shouldLogDebug(): boolean {\n  try {\n    if (vscode?.workspace?.getConfiguration) {\n      const config = vscode.workspace.getConfiguration('azureDevOpsIntegration');\n      return Boolean(config.get('debugLogging'));\n    }\n    // Fallback: environment flag for non-extension runtimes\n    if (typeof process !== 'undefined' && process?.env?.AZDO_INT_DEBUG === '1') return true;\n    return false;\n  } catch {\n    return false;\n  }\n}\n\nfunction writeLog(level: LogLevel, message: string, options?: LogOptions): void {\n  const scope = options?.scope || 'application';\n  const meta = options?.meta\n    ? typeof options.meta === 'object'\n      ? (options.meta as Record<string, unknown>)\n      : { meta: options.meta }\n    : undefined;\n\n  // Use standardized logger format: [azuredevops-integration-extension][{runtime}][{flowName}][{componentName}][{functionName}]\n  // Map scope to componentName, use 'application' as flowName\n  standardizedLogger.log('application', scope, undefined, level, message, meta);\n}\n\nfunction formatMeta(meta: unknown): string | undefined {\n  if (meta === undefined || meta === null) return undefined;\n  if (typeof meta === 'string') return meta;\n  if (meta instanceof Error) {\n    return `${meta.message}${meta.stack ? `\\n${meta.stack}` : ''}`;\n  }\n  try {\n    return JSON.stringify(meta);\n  } catch {\n    return '[unserializable meta]';\n  }\n}\n\n/**\n * Create a scoped logger for a specific component\n *\n * @example\n * ```typescript\n * const logger = createLogger('convert');\n * // Simple message (no meta):\n * logger.info('Starting conversion');\n * // Message with metadata:\n * logger.error('Conversion failed', { meta: error });\n * // Processing without metadata:\n * logger.debug('Processing item');\n * ```\n */\nexport function createLogger(scope: string) {\n  const wrap = (options?: any) => {\n    if (!options) return { scope };\n    if ('meta' in options) return { scope, ...options };\n    return { scope, meta: options };\n  };\n\n  return {\n    debug: (message: string, options?: any) => log.debug(message, wrap(options)),\n    info: (message: string, options?: any) => log.info(message, wrap(options)),\n    warn: (message: string, options?: any) => log.warn(message, wrap(options)),\n    error: (message: string, options?: any) => log.error(message, wrap(options)),\n  };\n}\n", "/* eslint-disable max-lines */\n/**\n * Module: src/fsm/functions/connection/branchEnrichment.ts\n * Owner: application\n * Reads: (document)\n * Writes: (document)\n * Receives: (document)\n * Emits: (document)\n * Prohibitions: Do not mutate ApplicationContext directly; Do not define new *Context types\n * Rationale: (document)\n *\n * LLM-GUARD:\n * - Follow ownership boundaries; route events to Router; do not add UI logic here\n */\nimport * as vscode from 'vscode';\nimport { createLogger } from '../../logging/unifiedLogger.js';\nimport type { AzureDevOpsIntClient } from '../../azureClient.js';\n\nconst logger = createLogger('branch-enrichment');\nimport type {\n  WorkItem,\n  WorkItemBranchLink,\n  WorkItemBranchMetadata,\n  WorkItemBuildSummary,\n} from '../../../types.js';\n\nexport type BranchContext = {\n  branchName?: string;\n  branchRef?: string;\n  repositoryId?: string;\n  repositoryName?: string;\n  remoteUrl?: string;\n  lastUpdated: number;\n};\n\nexport type BranchEnrichmentState = {\n  context: BranchContext | null;\n  hasActiveBuild: boolean;\n  lastUpdated: number;\n};\n\nexport type ConnectionBranchSource = {\n  id: string;\n  client?: AzureDevOpsIntClient;\n};\n\ntype RepositoryCacheEntry = {\n  fetchedAt: number;\n  repos: any[];\n};\n\ntype BuildCacheEntry = {\n  fetchedAt: number;\n  builds: WorkItemBuildSummary[];\n};\n\nconst branchStateByConnection = new Map<string, BranchEnrichmentState>();\nconst repositoryCacheByConnection = new Map<string, RepositoryCacheEntry>();\nconst buildCacheByKey = new Map<string, BuildCacheEntry>();\nconst buildRefreshTimers = new Map<string, NodeJS.Timeout>();\n\nlet cachedGitApi: any | undefined;\n\nexport const BRANCH_REFRESH_INTERVAL_MS = 30 * 1000;\nexport const REPOSITORY_CACHE_TTL_MS = 5 * 60 * 1000;\nexport const BUILD_CACHE_TTL_MS = 20 * 1000;\n\nfunction getGitCacheKey(connectionId: string, repositoryId?: string, branchRef?: string): string {\n  return `${connectionId}|${repositoryId ?? 'any'}|${branchRef ?? 'unknown'}`;\n}\n\nexport function getBranchContext(connectionId: string): BranchContext | null {\n  return branchStateByConnection.get(connectionId)?.context ?? null;\n}\n\nexport function getBranchEnrichmentState(connectionId: string): BranchEnrichmentState | undefined {\n  return branchStateByConnection.get(connectionId);\n}\n\nexport function clearConnectionCaches(connectionId: string): void {\n  branchStateByConnection.delete(connectionId);\n  repositoryCacheByConnection.delete(connectionId);\n\n  for (const key of Array.from(buildCacheByKey.keys())) {\n    if (key.startsWith(`${connectionId}|`)) {\n      buildCacheByKey.delete(key);\n    }\n  }\n\n  const timer = buildRefreshTimers.get(connectionId);\n  if (timer) {\n    try {\n      clearTimeout(timer);\n    } catch {\n      /* ignore */\n    }\n    buildRefreshTimers.delete(connectionId);\n  }\n}\n\nexport function updateBuildRefreshTimer(\n  connectionId: string,\n  provider: { refresh: (query?: string) => unknown } | undefined,\n  shouldPoll: boolean\n): void {\n  const existing = buildRefreshTimers.get(connectionId);\n\n  if (!shouldPoll) {\n    if (existing) {\n      try {\n        clearTimeout(existing);\n      } catch {\n        /* ignore */\n      }\n      buildRefreshTimers.delete(connectionId);\n    }\n    return;\n  }\n\n  if (existing || !provider) {\n    return;\n  }\n\n  const timer = setTimeout(() => {\n    buildRefreshTimers.delete(connectionId);\n    Promise.resolve(provider.refresh())\n      .catch((error) => {\n        logger.warn('Build polling refresh failed', { meta: error });\n      })\n      .then(() => {\n        /* noop */\n      });\n  }, BRANCH_REFRESH_INTERVAL_MS);\n\n  buildRefreshTimers.set(connectionId, timer);\n}\n\ntype ParsedRemote = {\n  organization?: string;\n  project?: string;\n  repositoryName?: string;\n};\n\ntype ParsedBranchLink = {\n  projectId?: string;\n  repositoryId?: string;\n  refName?: string;\n  shortName?: string;\n};\n\nasync function getGitApi(): Promise<any | undefined> {\n  if (cachedGitApi) {\n    return cachedGitApi;\n  }\n\n  try {\n    const gitExt = vscode.extensions.getExtension('vscode.git');\n    if (!gitExt) {\n      return undefined;\n    }\n\n    const exports = gitExt.isActive ? gitExt.exports : await gitExt.activate();\n    const api = exports?.getAPI?.(1);\n    cachedGitApi = api;\n    return api;\n  } catch (error) {\n    logger.warn('Failed to acquire git API', { meta: error });\n    return undefined;\n  }\n}\n\nfunction normalizeRepositoryName(name?: string | null): string | undefined {\n  if (!name) {\n    return undefined;\n  }\n\n  const trimmed = name.trim().replace(/\\.git$/i, '');\n  return trimmed.length > 0 ? trimmed : undefined;\n}\n\nfunction parseAzureRemote(remoteUrl?: string | null): ParsedRemote | undefined {\n  if (!remoteUrl) {\n    return undefined;\n  }\n\n  try {\n    if (/^https?:/i.test(remoteUrl)) {\n      const url = new URL(remoteUrl);\n      const segments = url.pathname.split('/').filter(Boolean);\n      const gitIndex = segments.findIndex((segment) => segment.toLowerCase() === '_git');\n\n      if (gitIndex >= 0 && segments.length > gitIndex + 1) {\n        return {\n          organization: segments[0],\n          project: segments[1],\n          repositoryName: normalizeRepositoryName(segments[gitIndex + 1]),\n        };\n      }\n\n      if (segments.length >= 3) {\n        return {\n          organization: segments[0],\n          project: segments[1],\n          repositoryName: normalizeRepositoryName(segments[segments.length - 1]),\n        };\n      }\n    } else if (remoteUrl.includes('ssh.dev.azure.com')) {\n      const marker = 'ssh.dev.azure.com:v3/';\n      const idx = remoteUrl.indexOf(marker);\n\n      if (idx >= 0) {\n        const parts = remoteUrl\n          .slice(idx + marker.length)\n          .split(/[\\\\/]/)\n          .filter(Boolean);\n\n        if (parts.length >= 3) {\n          return {\n            organization: parts[0],\n            project: parts[1],\n            repositoryName: normalizeRepositoryName(parts[2]),\n          };\n        }\n      }\n    } else if (remoteUrl.includes('vs-ssh.visualstudio.com')) {\n      const marker = 'vs-ssh.visualstudio.com:';\n      const idx = remoteUrl.indexOf(marker);\n\n      if (idx >= 0) {\n        const after = remoteUrl.slice(idx + marker.length).replace(/^v[23]\\//i, '');\n        const parts = after.split(/[\\\\/]/).filter(Boolean);\n\n        if (parts.length >= 3) {\n          return {\n            organization: parts[0],\n            project: parts[1],\n            repositoryName: normalizeRepositoryName(parts[2]),\n          };\n        }\n      }\n    }\n  } catch (error) {\n    logger.warn('Failed to parse Azure remote URL', { meta: { remoteUrl, error } });\n  }\n\n  return undefined;\n}\n\nfunction normalizeBranchRef(ref?: string | null): { full: string; short: string } | null {\n  if (!ref) {\n    return null;\n  }\n\n  const trimmed = String(ref).trim();\n  if (!trimmed) {\n    return null;\n  }\n\n  if (trimmed.startsWith('refs/')) {\n    const short = trimmed.startsWith('refs/heads/') ? trimmed.slice('refs/heads/'.length) : trimmed;\n    return { full: trimmed, short };\n  }\n\n  return { full: `refs/heads/${trimmed}`, short: trimmed };\n}\n\nfunction parseBranchArtifactLink(url?: string | null): ParsedBranchLink | null {\n  if (!url || typeof url !== 'string') {\n    return null;\n  }\n\n  const prefix = 'vstfs:///Git/Ref/';\n  if (!url.startsWith(prefix)) {\n    return null;\n  }\n\n  try {\n    const remainder = url.slice(prefix.length);\n    const parts = remainder.split('%2F');\n    if (parts.length < 3) {\n      return null;\n    }\n\n    const projectId = decodeURIComponent(parts[0]);\n    const repositoryId = decodeURIComponent(parts[1]);\n    const encodedRef = parts.slice(2).join('%2F');\n    const rawRef = decodeURIComponent(encodedRef);\n\n    let refName = rawRef;\n    let shortName: string | undefined;\n\n    if (refName.startsWith('GB')) {\n      shortName = refName.slice(2);\n      if (shortName.startsWith('refs/')) {\n        refName = shortName;\n        shortName = refName.replace(/^refs\\/heads\\//, '');\n      } else {\n        refName = `refs/heads/${shortName}`;\n      }\n    } else if (refName.startsWith('GT')) {\n      shortName = refName.slice(2);\n      refName = `refs/tags/${shortName}`;\n    } else if (refName.startsWith('refs/')) {\n      shortName = refName.replace(/^refs\\/heads\\//, '');\n    }\n\n    return { projectId, repositoryId, refName, shortName };\n  } catch (error) {\n    logger.warn('Failed to parse branch artifact link', { meta: { url, error } });\n    return null;\n  }\n}\n\nasync function getAzureRepositoryByName(\n  connectionId: string,\n  client: AzureDevOpsIntClient,\n  repoName?: string\n): Promise<any | null> {\n  if (!repoName) {\n    return null;\n  }\n\n  const normalized = repoName.trim().toLowerCase();\n  if (!normalized) {\n    return null;\n  }\n\n  const cached = repositoryCacheByConnection.get(connectionId);\n  const now = Date.now();\n  let repos: any[] | null = null;\n\n  if (cached && now - cached.fetchedAt < REPOSITORY_CACHE_TTL_MS) {\n    repos = cached.repos;\n  } else {\n    try {\n      const fetched = await client.getRepositories();\n      if (Array.isArray(fetched)) {\n        repos = fetched;\n        repositoryCacheByConnection.set(connectionId, { fetchedAt: now, repos: fetched });\n      }\n    } catch (error) {\n      logger.warn('Failed to fetch repositories', { meta: error });\n      return null;\n    }\n  }\n\n  if (!Array.isArray(repos)) {\n    return null;\n  }\n\n  return (\n    repos.find(\n      (r: any) => typeof r?.name === 'string' && r.name.trim().toLowerCase() === normalized\n    ) ||\n    repos.find((r: any) => typeof r?.id === 'string' && r.id.trim().toLowerCase() === normalized) ||\n    null\n  );\n}\n\nasync function resolveBranchContext(source: ConnectionBranchSource): Promise<BranchContext | null> {\n  const api = await getGitApi();\n  if (!api) {\n    return null;\n  }\n\n  const repo = Array.isArray(api.repositories) ? api.repositories[0] : undefined;\n  if (!repo) {\n    return null;\n  }\n\n  const head = repo.state?.HEAD;\n  const normalized = normalizeBranchRef(head?.name || head?.upstream?.name);\n  if (!normalized) {\n    return null;\n  }\n\n  const remotes: any[] = Array.isArray(repo.state?.remotes) ? repo.state.remotes : [];\n  const remote =\n    remotes.find((r: any) => !r?.isReadOnly && (r?.pushUrl || r?.fetchUrl)) || remotes[0];\n  const remoteUrl = remote?.pushUrl || remote?.fetchUrl;\n  const parsedRemote = parseAzureRemote(remoteUrl);\n\n  let repositoryId: string | undefined;\n  let repositoryName = parsedRemote?.repositoryName;\n\n  if (repositoryName && source.client) {\n    const repoMeta = await getAzureRepositoryByName(source.id, source.client, repositoryName);\n    if (repoMeta) {\n      if (typeof repoMeta.id === 'string') {\n        repositoryId = repoMeta.id;\n      }\n      if (typeof repoMeta.name === 'string' && repoMeta.name.trim().length > 0) {\n        repositoryName = repoMeta.name.trim();\n      }\n    }\n  }\n\n  return {\n    branchName: normalized.short,\n    branchRef: normalized.full,\n    repositoryId,\n    repositoryName,\n    remoteUrl,\n    lastUpdated: Date.now(),\n  };\n}\n\nasync function getBuildsForBranch(\n  connectionId: string,\n  client: AzureDevOpsIntClient,\n  branchRef: string,\n  repositoryId?: string\n): Promise<WorkItemBuildSummary[]> {\n  const key = getGitCacheKey(connectionId, repositoryId, branchRef);\n  const cached = buildCacheByKey.get(key);\n  const now = Date.now();\n\n  if (cached && now - cached.fetchedAt < BUILD_CACHE_TTL_MS) {\n    return cached.builds;\n  }\n\n  try {\n    const builds = await client.getRecentBuilds({\n      top: 5,\n      branchName: branchRef,\n      repositoryId,\n    });\n\n    if (Array.isArray(builds)) {\n      buildCacheByKey.set(key, { fetchedAt: now, builds });\n      return builds;\n    }\n  } catch (error) {\n    logger.warn('Failed to fetch builds for branch', { meta: error });\n  }\n\n  buildCacheByKey.set(key, { fetchedAt: now, builds: [] });\n  return [];\n}\n\nconst FINISHED_BUILD_STATUSES = new Set(['completed', 'postponed']);\nconst FINISHED_BUILD_RESULTS = new Set([\n  'succeeded',\n  'failed',\n  'canceled',\n  'cancelled',\n  'partiallysucceeded',\n]);\n\nfunction isBuildActive(summary?: WorkItemBuildSummary | null): boolean {\n  if (!summary) {\n    return false;\n  }\n\n  const status = typeof summary.status === 'string' ? summary.status.toLowerCase() : '';\n  if (status) {\n    return !FINISHED_BUILD_STATUSES.has(status);\n  }\n\n  const result = typeof summary.result === 'string' ? summary.result.toLowerCase() : '';\n  if (!result) {\n    return true;\n  }\n\n  return !FINISHED_BUILD_RESULTS.has(result);\n}\n\ntype BranchMatchResult = {\n  relation: WorkItemBranchLink;\n  parsed: ParsedBranchLink;\n  confidence: WorkItemBranchMetadata['matchConfidence'];\n};\n\nfunction findBestBranchMatch(\n  relations: WorkItemBranchLink[],\n  targetBranchRef: string,\n  targetBranchName: string,\n  targetRepositoryId?: string\n): BranchMatchResult | null {\n  if (!Array.isArray(relations) || relations.length === 0) {\n    return null;\n  }\n\n  let best: { score: number; result: BranchMatchResult } | null = null;\n\n  for (const relation of relations) {\n    const parsed = parseBranchArtifactLink(relation.url);\n    if (!parsed) {\n      continue;\n    }\n\n    const normalized = normalizeBranchRef(parsed.refName || relation.refName);\n    const relationRef = normalized?.full?.toLowerCase();\n    const relationShort = (normalized?.short || parsed.shortName || '').toLowerCase();\n    const desiredRef = targetBranchRef.toLowerCase();\n    const desiredShort = targetBranchName.toLowerCase();\n    const refMatches = !!relationRef && relationRef === desiredRef;\n    const nameMatches = relationShort === desiredShort && desiredShort.length > 0;\n\n    if (!refMatches && !nameMatches) {\n      continue;\n    }\n\n    const repoMatch =\n      targetRepositoryId && parsed.repositoryId\n        ? parsed.repositoryId.toLowerCase() === targetRepositoryId.toLowerCase()\n        : !targetRepositoryId;\n\n    let score = 0;\n    let confidence: WorkItemBranchMetadata['matchConfidence'] = 'name';\n\n    if (refMatches) {\n      score += 2;\n      confidence = repoMatch ? 'exact' : 'refOnly';\n    } else if (nameMatches) {\n      score += 1;\n      confidence = 'name';\n    }\n\n    if (repoMatch) {\n      score += 1;\n    }\n\n    if (!best || score > best.score) {\n      const result: BranchMatchResult = {\n        relation,\n        parsed: {\n          projectId: parsed.projectId,\n          repositoryId: parsed.repositoryId,\n          refName: normalized?.full || parsed.refName,\n          shortName: normalized?.short || parsed.shortName,\n        },\n        confidence,\n      };\n\n      best = { score, result };\n    }\n  }\n\n  return best?.result ?? null;\n}\n\n// eslint-disable-next-line max-lines-per-function, max-statements, complexity\nexport async function enrichWorkItemsForConnection(\n  source: ConnectionBranchSource,\n  payload: { items: WorkItem[]; connectionId: string }\n): Promise<WorkItem[]> {\n  const sourceItems = Array.isArray(payload.items) ? payload.items : [];\n  const client = source.client;\n\n  if (!client || sourceItems.length === 0) {\n    branchStateByConnection.set(source.id, {\n      context: null,\n      hasActiveBuild: false,\n      lastUpdated: Date.now(),\n    });\n    return [...sourceItems];\n  }\n\n  const branchContext = await resolveBranchContext(source);\n  if (!branchContext) {\n    branchStateByConnection.set(source.id, {\n      context: null,\n      hasActiveBuild: false,\n      lastUpdated: Date.now(),\n    });\n    return sourceItems.map((item) => {\n      const clone: WorkItem = { ...item };\n      if ((clone as any).branchMetadata) {\n        delete (clone as any).branchMetadata;\n      }\n      if (Array.isArray(item.relations)) {\n        clone.relations = item.relations.map((rel) => ({ ...rel }));\n      }\n      return clone;\n    });\n  }\n\n  const normalizedContext = normalizeBranchRef(branchContext.branchRef || branchContext.branchName);\n  if (!normalizedContext) {\n    branchStateByConnection.set(source.id, {\n      context: null,\n      hasActiveBuild: false,\n      lastUpdated: Date.now(),\n    });\n    return sourceItems;\n  }\n\n  const matchedItems: WorkItem[] = [];\n  const unmatchedItems: WorkItem[] = [];\n  const matches: Array<{ item: WorkItem; repositoryId?: string; parsed: ParsedBranchLink }> = [];\n\n  for (const original of sourceItems) {\n    const clone: WorkItem = { ...original };\n    const relations = Array.isArray(original.relations)\n      ? original.relations.map((rel) => {\n          const relClone: WorkItemBranchLink = { ...rel };\n          const parsed = parseBranchArtifactLink(rel.url);\n          if (parsed) {\n            relClone.repositoryId = parsed.repositoryId;\n            relClone.projectId = parsed.projectId;\n            relClone.refName = parsed.refName;\n          }\n          return relClone;\n        })\n      : [];\n\n    if (relations.length > 0) {\n      clone.relations = relations;\n    }\n\n    const match = findBestBranchMatch(\n      relations,\n      normalizedContext.full,\n      normalizedContext.short,\n      branchContext.repositoryId\n    );\n\n    if (match) {\n      const repositoryIdForMatch = match.parsed.repositoryId ?? branchContext.repositoryId;\n      const metadata: WorkItemBranchMetadata = {\n        isCurrentBranch: true,\n        branchName: normalizedContext.short,\n        refName: normalizedContext.full,\n        repositoryId: repositoryIdForMatch,\n        repositoryName: branchContext.repositoryName,\n        matchConfidence: match.confidence,\n        link: { ...match.relation },\n        hasActiveBuild: false,\n        lastUpdated: new Date().toISOString(),\n      };\n\n      clone.branchMetadata = metadata;\n      matches.push({ item: clone, repositoryId: repositoryIdForMatch, parsed: match.parsed });\n      matchedItems.push(clone);\n    } else {\n      if ((clone as any).branchMetadata) {\n        delete (clone as any).branchMetadata;\n      }\n      unmatchedItems.push(clone);\n    }\n  }\n\n  let hasActiveBuild = false;\n  let resolvedRepositoryId = branchContext.repositoryId ?? matches[0]?.repositoryId;\n\n  if (matches.length > 0) {\n    const buildInfoByRepo = new Map<string, { build?: WorkItemBuildSummary; hasActive: boolean }>();\n    const repoKeys = new Set<string>();\n\n    for (const entry of matches) {\n      repoKeys.add(entry.repositoryId ?? '__default__');\n    }\n\n    for (const repoKey of repoKeys) {\n      const resolvedRepoId = repoKey === '__default__' ? branchContext.repositoryId : repoKey;\n      const builds = await getBuildsForBranch(\n        source.id,\n        client,\n        normalizedContext.full,\n        resolvedRepoId\n      );\n      const latest = Array.isArray(builds) && builds.length > 0 ? builds[0] : undefined;\n      const active = isBuildActive(latest);\n\n      if (active) {\n        hasActiveBuild = true;\n      }\n\n      buildInfoByRepo.set(repoKey, { build: latest, hasActive: active });\n    }\n\n    for (const entry of matches) {\n      const info = buildInfoByRepo.get(entry.repositoryId ?? '__default__');\n      if (info && entry.item.branchMetadata) {\n        entry.item.branchMetadata.build = info.build;\n        entry.item.branchMetadata.hasActiveBuild = info.hasActive;\n        entry.item.branchMetadata.lastUpdated = new Date().toISOString();\n      }\n    }\n  }\n\n  let resolvedRepositoryName = branchContext.repositoryName;\n  if (!resolvedRepositoryName && resolvedRepositoryId && source.client) {\n    const repoMeta = await getAzureRepositoryByName(source.id, source.client, resolvedRepositoryId);\n    if (repoMeta?.name && typeof repoMeta.name === 'string') {\n      resolvedRepositoryName = repoMeta.name.trim();\n    }\n  }\n\n  if (resolvedRepositoryName) {\n    for (const entry of matches) {\n      if (entry.item.branchMetadata) {\n        entry.item.branchMetadata.repositoryName = resolvedRepositoryName;\n      }\n    }\n  }\n\n  if (resolvedRepositoryId) {\n    for (const entry of matches) {\n      if (entry.item.branchMetadata && !entry.item.branchMetadata.repositoryId) {\n        entry.item.branchMetadata.repositoryId = resolvedRepositoryId;\n      }\n    }\n  }\n\n  const sortedItems = [...matchedItems, ...unmatchedItems];\n\n  resolvedRepositoryId = branchContext.repositoryId ?? resolvedRepositoryId;\n  branchStateByConnection.set(source.id, {\n    context: {\n      ...branchContext,\n      branchName: normalizedContext.short,\n      branchRef: normalizedContext.full,\n      repositoryId: resolvedRepositoryId,\n      repositoryName: resolvedRepositoryName ?? branchContext.repositoryName,\n    },\n    hasActiveBuild,\n    lastUpdated: Date.now(),\n  });\n\n  return sortedItems;\n}\n", "/**\n * Module: WorkItemsProvider\n * Owner: connection\n * Reads: ApplicationContext via messages/selectors (read-only); connection configuration from FSM\n * Writes: none (posts provider messages; FSM reduces into context)\n * Receives: refresh/run query requests from connection machine\n * Emits: workItemsLoaded/workItemsError (tagged with connectionId by activation/bridge)\n * Prohibitions: Do not implement webview logic; Do not mutate ApplicationContext\n * Rationale: Connection-scoped provider for work item data flow\n *\n * LLM-GUARD:\n * - Include connectionId when posting provider messages\n * - Do not emit SELECT_CONNECTION or UI-specific events\n */\nimport { AzureDevOpsIntClient } from './azureClient.js';\nimport type { WorkItem } from './types.js';\n\nexport type PostMessageFn = (msg: any) => void;\n\nexport type ProviderLogger = {\n  debug?: (message: string, meta?: any) => void;\n  info?: (message: string, meta?: any) => void;\n  warn?: (message: string, meta?: any) => void;\n  error?: (message: string, meta?: any) => void;\n};\n\ntype WorkItemTransform = (params: {\n  items: WorkItem[];\n  connectionId: string;\n}) => Promise<WorkItem[]> | WorkItem[];\n\ntype ProviderOptions = {\n  kanbanView?: boolean;\n  currentFilters?: Record<string, any>;\n  logger?: ProviderLogger;\n  debounceMs?: number;\n  transformWorkItems?: WorkItemTransform;\n};\n\nfunction isProviderOptions(value: any): value is ProviderOptions {\n  return value && typeof value === 'object' && !Array.isArray(value);\n}\n\nconst DEFAULT_QUERY = 'My Activity';\n\nexport class WorkItemsProvider {\n  private connectionId: string;\n  private client: AzureDevOpsIntClient | undefined;\n  private postMessage: PostMessageFn;\n  private logger: ProviderLogger | undefined;\n  private debounceMs = 2000;\n  private _workItems: WorkItem[] = [];\n  private _selectedWorkItem: WorkItem | undefined;\n  private _kanbanView = false;\n  private _currentFilters: Record<string, any> = {};\n  private _refreshInFlight = false;\n  private _lastRefreshTs = 0;\n  private _workItemTypes: string[] = [];\n  private _currentQuery: string = DEFAULT_QUERY;\n  private transformWorkItemsFn: WorkItemTransform | undefined;\n  private _pendingRefreshTimer: NodeJS.Timeout | undefined;\n  private _pendingRefreshQuery: string | undefined;\n\n  constructor(\n    connectionOrClient: string | AzureDevOpsIntClient,\n    clientOrPostMessage: AzureDevOpsIntClient | PostMessageFn,\n    postMessageOrOptions?: PostMessageFn | ProviderOptions,\n    maybeOptions?: ProviderOptions\n  ) {\n    if (typeof connectionOrClient === 'string') {\n      this.connectionId = connectionOrClient;\n      this.client = clientOrPostMessage as AzureDevOpsIntClient;\n      this.postMessage =\n        (typeof postMessageOrOptions === 'function' ? postMessageOrOptions : undefined) ||\n        (() => {});\n      this.applyOptions(maybeOptions ?? {});\n    } else {\n      // Legacy signature: (client, postMessage, options)\n      this.connectionId = 'default';\n      this.client = connectionOrClient;\n      this.postMessage =\n        (typeof clientOrPostMessage === 'function' ? clientOrPostMessage : undefined) || (() => {});\n      this.applyOptions(isProviderOptions(postMessageOrOptions) ? postMessageOrOptions : {});\n    }\n  }\n\n  private applyOptions(options: ProviderOptions) {\n    this._kanbanView = options.kanbanView ?? this._kanbanView;\n    this._currentFilters = options.currentFilters ?? this._currentFilters;\n    this.logger = options.logger ?? this.logger;\n\n    if (typeof options.debounceMs === 'number' && options.debounceMs >= 0) {\n      this.debounceMs = options.debounceMs;\n    }\n    this.transformWorkItemsFn = options.transformWorkItems ?? this.transformWorkItemsFn;\n  }\n\n  updateClient(nextClient: AzureDevOpsIntClient | undefined) {\n    this.client = nextClient;\n    this._workItemTypes = [];\n  }\n\n  setPostMessage(nextPostMessage: PostMessageFn) {\n    this.postMessage = nextPostMessage || (() => {});\n  }\n\n  setLogger(nextLogger: ProviderLogger | undefined) {\n    this.logger = nextLogger;\n  }\n\n  setTransformWorkItems(nextTransform: WorkItemTransform | undefined) {\n    this.transformWorkItemsFn = nextTransform;\n  }\n\n  getConnectionId() {\n    return this.connectionId;\n  }\n\n  async refresh(query?: string) {\n    if (!this.client || typeof (this.client as any).getWorkItems !== 'function') {\n      this.log('warn', 'Cannot refresh work items; client missing getWorkItems');\n      return;\n    }\n    const now = Date.now();\n    // Compute normalized query first so we can queue a refresh if needed\n    const normalizedQuery =\n      typeof query === 'string' && query.trim().length > 0\n        ? query.trim()\n        : this._currentQuery || DEFAULT_QUERY;\n    this._currentQuery = normalizedQuery;\n\n    // If we recently refreshed or one is in-flight, schedule a deferred refresh instead of dropping it\n    const elapsed = now - this._lastRefreshTs;\n    if (elapsed < this.debounceMs || this._refreshInFlight) {\n      const delay = Math.max(this.debounceMs - elapsed, 0) || this.debounceMs;\n      this._pendingRefreshQuery = normalizedQuery;\n      if (this._pendingRefreshTimer) {\n        clearTimeout(this._pendingRefreshTimer);\n      }\n      this._pendingRefreshTimer = setTimeout(() => {\n        this._pendingRefreshTimer = undefined;\n        const pending = this._pendingRefreshQuery;\n        this._pendingRefreshQuery = undefined;\n        // Fire and forget; internal debounce will handle if another refresh just completed\n        void this.refresh(pending);\n      }, delay);\n      return;\n    }\n    this._refreshInFlight = true;\n    // Clear any queued refresh, we're executing now\n    if (this._pendingRefreshTimer) {\n      clearTimeout(this._pendingRefreshTimer);\n      this._pendingRefreshTimer = undefined;\n      this._pendingRefreshQuery = undefined;\n    }\n\n    // Notify webview that query is starting so it can show loading state\n    this._post({\n      type: 'workItemsLoading',\n      query: normalizedQuery,\n    });\n\n    try {\n      const shouldFetchTypes =\n        this._workItemTypes.length === 0 &&\n        typeof (this.client as any).getWorkItemTypes === 'function';\n      const typePromise: Promise<any[] | null> | null = shouldFetchTypes\n        ? Promise.resolve()\n            .then(() => (this.client as any).getWorkItemTypes())\n            .catch((err: any) => {\n              this.log('warn', 'Failed to fetch work item types', {\n                connectionId: this.connectionId,\n                error: err?.message || String(err),\n              });\n              return null;\n            })\n        : null;\n\n      this.log('debug', 'refresh(): starting fetch', {\n        connectionId: this.connectionId,\n        query: normalizedQuery,\n      });\n      const fetched = await this.client.getWorkItems(normalizedQuery);\n      const processed = await this._applyTransform(fetched);\n      this.log('info', 'refresh(): completed fetch', {\n        connectionId: this.connectionId,\n        count: Array.isArray(processed) ? processed.length : 'n/a',\n      });\n\n      if (typePromise) {\n        try {\n          const rawTypes = await typePromise;\n          if (Array.isArray(rawTypes) && rawTypes.length > 0) {\n            this._mergeWorkItemTypesFromNames(this._normalizeTypeNames(rawTypes));\n          }\n        } catch {\n          // Errors already logged in catch above; swallow here to avoid aborting refresh\n        }\n      }\n\n      // Always update the work items, even if empty\n      this._workItems = processed;\n      this._mergeWorkItemTypesFromItems(processed);\n      // FSM will handle posting work items via syncDataToWebview\n      this._notifyWorkItemsChanged();\n\n      if (processed.length === 0) {\n        this.log('debug', 'refresh(): no results for query', {\n          connectionId: this.connectionId,\n          query: normalizedQuery,\n        });\n      }\n    } catch (err: any) {\n      const errorMessage = err?.message || String(err);\n      this.log('error', 'Failed to refresh work items', {\n        connectionId: this.connectionId,\n        query: normalizedQuery,\n        error: errorMessage,\n        stack: err?.stack,\n      });\n\n      // Show error to user in webview\n      this._error(errorMessage);\n\n      // Error is logged via unified logger through error callback\n    } finally {\n      this._refreshInFlight = false;\n      this._lastRefreshTs = Date.now();\n    }\n  }\n\n  async getWorkItemById(id: number) {\n    if (!this.client) return null;\n    return this.client.getWorkItemById(id);\n  }\n\n  async createWorkItem(\n    type: string,\n    title: string,\n    description?: string,\n    assignedTo?: string,\n    extraFields?: Record<string, unknown>\n  ) {\n    if (!this.client || typeof (this.client as any).createWorkItem !== 'function') {\n      throw new Error('No client');\n    }\n    const created = await this.client.createWorkItem(\n      type,\n      title,\n      description,\n      assignedTo,\n      extraFields\n    );\n    await this.refresh();\n    return created;\n  }\n\n  async updateWorkItem(id: number, patchOps: any[]) {\n    if (!this.client || typeof (this.client as any).updateWorkItem !== 'function') {\n      throw new Error('No client');\n    }\n    const updated = await this.client.updateWorkItem(id, patchOps);\n    await this.refresh();\n    return updated;\n  }\n\n  async addWorkItemComment(id: number, text: string) {\n    if (!this.client || typeof (this.client as any).addWorkItemComment !== 'function') {\n      throw new Error('No client');\n    }\n    return this.client.addWorkItemComment(id, text);\n  }\n\n  async addTimeEntry(id: number, hours: number, note?: string) {\n    if (!this.client || typeof (this.client as any).addTimeEntry !== 'function') {\n      throw new Error('No client');\n    }\n    await this.client.addTimeEntry(id, hours, note);\n    await this.refresh();\n  }\n\n  async search(term: string) {\n    if (!this.client || typeof (this.client as any).searchWorkItems !== 'function') {\n      this.log('warn', 'search() skipped; client missing searchWorkItems');\n      return [];\n    }\n    const res = await this.client.searchWorkItems(term);\n    await this.showWorkItems(res);\n    return res;\n  }\n\n  async filter(filterObj: any) {\n    if (!this.client || typeof (this.client as any).filterWorkItems !== 'function') {\n      this.log('warn', 'filter() skipped; client missing filterWorkItems');\n      return [];\n    }\n    const res = await this.client.filterWorkItems(filterObj);\n    await this.showWorkItems(res);\n    return res;\n  }\n\n  async runWIQL(wiql: string) {\n    if (!this.client || typeof (this.client as any).runWIQL !== 'function') {\n      this.log('warn', 'runWIQL() skipped; client missing runWIQL');\n      return [];\n    }\n    return this.client.runWIQL(wiql);\n  }\n\n  async showWorkItems(items: WorkItem[]) {\n    if (!Array.isArray(items)) return;\n    const processed = await this._applyTransform(items);\n    const shouldIgnoreEmpty = processed.length === 0 && this._workItems.length > 0;\n    if (!shouldIgnoreEmpty) {\n      this._workItems = processed;\n    }\n    this._mergeWorkItemTypesFromItems(shouldIgnoreEmpty ? this._workItems : processed);\n    // FSM will handle posting work items via syncDataToWebview\n    this._notifyWorkItemsChanged();\n  }\n\n  selectWorkItem(item: WorkItem) {\n    this._selectedWorkItem = item;\n    this._post({ type: 'workItemSelected', workItem: item });\n  }\n\n  getSelectedWorkItem() {\n    return this._selectedWorkItem;\n  }\n  getWorkItems() {\n    return [...this._workItems];\n  }\n\n  dispose() {\n    this._workItems = [];\n    this._selectedWorkItem = undefined;\n    this._currentFilters = {};\n    this._workItemTypes = [];\n  }\n\n  private _notifyWorkItemsChanged() {\n    // Reactive Architecture: Send workItemsLoaded message to FSM via forwardProviderMessage.\n    // FSM will update context and syncState will send full state to webview reactively.\n    this._post({\n      type: 'workItemsLoaded',\n      workItems: [...this._workItems],\n      connectionId: this.connectionId,\n      query: this._currentQuery,\n      kanbanView: this._kanbanView,\n      types: [...this._workItemTypes],\n    });\n  }\n  private _post(msg: any) {\n    if (!this.postMessage) return;\n    if (msg && typeof msg === 'object' && !Array.isArray(msg)) {\n      this.postMessage({ connectionId: this.connectionId, ...msg });\n    } else {\n      this.postMessage(msg);\n    }\n  }\n  private _error(message: string) {\n    this._post({ type: 'workItemsError', error: message });\n  }\n\n  private log(level: 'debug' | 'info' | 'warn' | 'error', message: string, meta?: any) {\n    if (!this.logger) return;\n    const fn = this.logger[level];\n    if (typeof fn === 'function') {\n      try {\n        fn(message, meta);\n      } catch {\n        // ignore logger failures\n      }\n    }\n  }\n\n  getWorkItemTypeOptions() {\n    return [...this._workItemTypes];\n  }\n\n  private _normalizeTypeNames(rawTypes: any[]): string[] {\n    if (!Array.isArray(rawTypes)) return [];\n    return rawTypes\n      .map((entry: any) => {\n        if (!entry) return '';\n        if (typeof entry === 'string') return entry.trim();\n        if (typeof entry.name === 'string') return entry.name.trim();\n        if (typeof entry.text === 'string') return entry.text.trim();\n        if (typeof entry.referenceName === 'string') return entry.referenceName.trim();\n        return '';\n      })\n      .filter((name: string) => name.length > 0);\n  }\n\n  private _mergeWorkItemTypesFromNames(names: string[]) {\n    if (!Array.isArray(names) || names.length === 0) return;\n    const current = new Set(this._workItemTypes);\n    let changed = false;\n    for (const raw of names) {\n      const value = typeof raw === 'string' ? raw.trim() : '';\n      if (!value) continue;\n      if (!current.has(value)) {\n        current.add(value);\n        changed = true;\n      }\n    }\n    if (changed) {\n      this._workItemTypes = Array.from(current).sort((a, b) => a.localeCompare(b));\n    }\n  }\n\n  private _mergeWorkItemTypesFromItems(items: WorkItem[]) {\n    if (!Array.isArray(items) || items.length === 0) return;\n    const names = items\n      .map((item: any) => {\n        const fromFlattened = typeof item?.type === 'string' ? item.type : undefined;\n        const fromFields =\n          typeof item?.fields?.['System.WorkItemType'] === 'string'\n            ? item.fields['System.WorkItemType']\n            : undefined;\n        const value = fromFlattened || fromFields;\n        return typeof value === 'string' ? value.trim() : '';\n      })\n      .filter((name: string) => name.length > 0);\n    this._mergeWorkItemTypesFromNames(names);\n  }\n\n  private async _applyTransform(items: WorkItem[]): Promise<WorkItem[]> {\n    if (!Array.isArray(items)) return [];\n    if (!this.transformWorkItemsFn) return [...items];\n    try {\n      const result = await this.transformWorkItemsFn({\n        items: [...items],\n        connectionId: this.connectionId,\n      });\n      if (Array.isArray(result)) {\n        return result;\n      }\n    } catch (error: any) {\n      this.log('warn', 'transformWorkItems failed', {\n        connectionId: this.connectionId,\n        error: error?.message || String(error),\n      });\n    }\n    return [...items];\n  }\n}\n\nexport default WorkItemsProvider;\n", "/* STAGED FOR DELETION - snapshot preserved in .delete/src.provider.js.txt\n   Reason: Duplicate ESM re-export stub for TypeScript source (src/provider.ts).\n   Action: Normalize imports and remove duplicate after tests and import strategy decided.\n*/\n\nexport * from './provider.ts';\n", "/**\n * Module: src/fsm/functions/connection/providerFactory.ts\n * Owner: application\n * Reads: (document)\n * Writes: (document)\n * Receives: (document)\n * Emits: (document)\n * Prohibitions: Do not mutate ApplicationContext directly; Do not define new *Context types\n * Rationale: (document)\n *\n * LLM-GUARD:\n * - Follow ownership boundaries; route events to Router; do not add UI logic here\n */\nimport { WorkItemsProvider, type ProviderLogger } from '../../provider.js';\nimport type { AzureDevOpsIntClient } from '../../azureClient.js';\nimport type { WorkItem } from '../../types.js';\nimport { enrichWorkItemsForConnection, type ConnectionBranchSource } from './branchEnrichment.js';\n\ntype WorkItemsTransformPayload = {\n  items: WorkItem[];\n  connectionId: string;\n};\n\ntype ProviderFactoryOptions = {\n  connectionId: string;\n  client: AzureDevOpsIntClient;\n  postMessage: (message: unknown) => void;\n  logger?: ProviderLogger;\n  debounceMs?: number;\n};\n\nexport function createBranchAwareTransform(\n  source: ConnectionBranchSource\n): (payload: WorkItemsTransformPayload) => Promise<WorkItem[]> {\n  return async (payload: WorkItemsTransformPayload) => {\n    return enrichWorkItemsForConnection(source, payload);\n  };\n}\n\nexport function createConnectionProvider(options: ProviderFactoryOptions): WorkItemsProvider {\n  const { connectionId, client, postMessage, logger, debounceMs } = options;\n\n  const provider = new WorkItemsProvider(connectionId, client, postMessage, {\n    logger,\n    debounceMs,\n    transformWorkItems: createBranchAwareTransform({ id: connectionId, client }),\n  });\n\n  return provider;\n}\n", "/**\n * Module: SharedContextBridge\n * Owner: application\n * Reads: Application FSM state; transforms to webview-ready payloads\n * Writes: none to ApplicationContext (broadcasts to webview only)\n * Receives: webview messages (forwarded to FSM); actor reference\n * Emits: syncState messages to webview\n * Prohibitions: Do not implement webview logic; Do not mutate ApplicationContext\n * Rationale: Single bridge for serializing FSM context to webview payloads\n *\n * LLM-GUARD:\n * - Post only syncState (or typed) messages; do not send partial context mutations\n * - Do not define new context types here\n *\n * This module now uses Praxis logic engine instead of XState.\n */\nimport type { Disposable, Webview } from 'vscode';\nimport type { PraxisApplicationManager } from '../praxis/application/manager.js';\nimport type { ProjectConnection } from '../praxis/connection/types.js';\n\nexport type Logger = (message: string, meta?: Record<string, unknown>) => void;\n\n// Define ApplicationContext type for compatibility\ninterface ApplicationContext {\n  isActivated?: boolean;\n  isDeactivating?: boolean;\n  connections?: ProjectConnection[];\n  activeConnectionId?: string;\n  connectionStates?: Map<string, unknown>;\n  pendingAuthReminders?:\n    | Map<string, { connectionId: string; reason: string; status: string }>\n    | Array<{\n        connectionId: string;\n        reason?: string;\n        status?: string;\n        detail?: string;\n        message?: string;\n        label?: string;\n        authMethod?: 'pat' | 'entra';\n      }>;\n  lastError?: { message: string; name?: string; stack?: string };\n  pendingWorkItems?: { workItems?: unknown[]; connectionId?: string };\n}\n\nexport type SharedContextBridgeOptions = {\n  actor: PraxisApplicationManager | unknown;\n  logger?: Logger;\n  contextSelector?: (context: ApplicationContext) => SharedContextPayload;\n};\n\nexport interface SharedContextBridge extends Disposable {\n  attachWebview(webview: Webview): void;\n  detachWebview(): void;\n  handleWebviewMessage(message: unknown): boolean;\n  sync(): void;\n}\n\n// For Praxis-Svelte integration, the payload is the full ApplicationContext\nexport type SharedContextPayload = ApplicationContext;\n\nexport function createSharedContextBridge({\n  actor,\n  logger,\n  contextSelector,\n}: SharedContextBridgeOptions): SharedContextBridge {\n  const applicationManager = actor as PraxisApplicationManager;\n  let currentWebview: Webview | undefined;\n  let disposed = false;\n  let lastSignature = '';\n  let pollInterval: ReturnType<typeof setInterval> | undefined;\n\n  function log(message: string, meta?: Record<string, unknown>) {\n    try {\n      logger?.(message, meta);\n    } catch (error) {\n      // Logger failed - silently ignore to satisfy ESLint\n    }\n  }\n\n  // Poll for state changes since Praxis doesn't have built-in subscriptions\n  function startPolling() {\n    if (pollInterval) return;\n    pollInterval = setInterval(() => {\n      maybePostContext('poll');\n    }, 100);\n  }\n\n  function stopPolling() {\n    if (pollInterval) {\n      clearInterval(pollInterval);\n      pollInterval = undefined;\n    }\n  }\n\n  function getApplicationContext(): ApplicationContext {\n    try {\n      // Check if actor is a PraxisApplicationManager\n      if (applicationManager && typeof applicationManager.getContext === 'function') {\n        // Return the full context for Praxis sync\n        return applicationManager.getContext() as unknown as ApplicationContext;\n      }\n    } catch (error) {\n      log('getApplicationContextFailed', { error: serializeError(error) });\n    }\n    return {};\n  }\n\n  function buildPayload(context: ApplicationContext): SharedContextPayload {\n    // If we are using Praxis sync, we just return the context as is (casted to payload for now)\n    // The webview will handle the types.\n    // We still support the old selector for backward compatibility if needed,\n    // but for the new architecture, we want the raw context.\n\n    if (contextSelector) {\n      return contextSelector(context);\n    }\n\n    // For Praxis-Svelte integration, we send the raw context.\n    // The types in SharedContextPayload might not match exactly, but we'll fix the receiver side.\n    return context as unknown as SharedContextPayload;\n  }\n\n  function maybePostContext(reason: string) {\n    if (!currentWebview) {\n      return;\n    }\n\n    try {\n      const context = getApplicationContext();\n      const payload = buildPayload(context);\n      const signature = JSON.stringify(payload);\n      if (signature === lastSignature) {\n        return;\n      }\n      lastSignature = signature;\n\n      const state =\n        applicationManager && typeof applicationManager.getApplicationState === 'function'\n          ? applicationManager.getApplicationState()\n          : 'unknown';\n\n      const message = {\n        type: 'contextUpdate',\n        context: payload,\n        meta: {\n          reason,\n          state,\n        },\n      };\n\n      const maybeThenable = currentWebview.postMessage(message);\n      if (typeof (maybeThenable as Thenable<boolean> | undefined)?.then === 'function') {\n        (maybeThenable as Thenable<boolean>).then(undefined, (error) => {\n          log('postMessageFailed', { error: serializeError(error) });\n        });\n      }\n    } catch (error) {\n      log('contextSerializationFailed', { error: serializeError(error) });\n    }\n  }\n\n  function synchronizeImmediately(reason: string) {\n    maybePostContext(reason);\n  }\n\n  function handleWebviewMessage(message: unknown): boolean {\n    if (!message || typeof message !== 'object') {\n      return false;\n    }\n    const msg = message as { type?: unknown };\n    if (msg.type === 'getContext') {\n      synchronizeImmediately('explicit-request');\n      return true;\n    }\n    return false;\n  }\n\n  // Start polling when created\n  startPolling();\n\n  return {\n    attachWebview(webview: Webview) {\n      currentWebview = webview;\n      synchronizeImmediately('webview-attached');\n    },\n    detachWebview() {\n      currentWebview = undefined;\n    },\n    handleWebviewMessage,\n    sync() {\n      synchronizeImmediately('manual-sync');\n    },\n    dispose() {\n      if (disposed) {\n        return;\n      }\n      disposed = true;\n      stopPolling();\n      currentWebview = undefined;\n    },\n  };\n}\n\nfunction serializeError(error: unknown): Record<string, unknown> {\n  if (error instanceof Error) {\n    return {\n      message: error.message,\n      name: error.name,\n      stack: error.stack,\n    };\n  }\n  if (typeof error === 'object' && error) {\n    return { ...error } as Record<string, unknown>;\n  }\n  return { value: String(error) };\n}\n", "/**\n * Module: src/cache.ts\n * Owner: application\n * Reads: (document)\n * Writes: (document)\n * Receives: (document)\n * Emits: (document)\n * Prohibitions: Do not mutate ApplicationContext directly; Do not define new *Context types\n * Rationale: (document)\n *\n * LLM-GUARD:\n * - Follow ownership boundaries; route events to Router; do not add UI logic here\n */\n/**\n * Intelligent caching system for Azure DevOps Integration\n * Provides memory-efficient caching with TTL, LRU eviction, and performance metrics\n */\n\nexport interface CacheEntry<T> {\n  data: T;\n  timestamp: number;\n  ttl: number;\n  accessCount: number;\n  lastAccessed: number;\n}\n\nexport interface CacheMetrics {\n  hits: number;\n  misses: number;\n  evictions: number;\n  size: number;\n  maxSize: number;\n  hitRate: number;\n}\n\nexport interface CacheOptions {\n  maxSize?: number;\n  defaultTtl?: number;\n  enableMetrics?: boolean;\n  evictionPolicy?: 'lru' | 'ttl' | 'both';\n}\n\nexport class IntelligentCache<T = any> {\n  private cache = new Map<string, CacheEntry<T>>();\n  private accessOrder: string[] = [];\n  private metrics: CacheMetrics;\n  private options: Required<CacheOptions>;\n\n  constructor(options: CacheOptions = {}) {\n    this.options = {\n      maxSize: options.maxSize ?? 1000,\n      defaultTtl: options.defaultTtl ?? 300000, // 5 minutes\n      enableMetrics: options.enableMetrics ?? true,\n      evictionPolicy: options.evictionPolicy ?? 'both',\n    };\n\n    this.metrics = {\n      hits: 0,\n      misses: 0,\n      evictions: 0,\n      size: 0,\n      maxSize: this.options.maxSize,\n      hitRate: 0,\n    };\n  }\n\n  /**\n   * Get a value from the cache\n   */\n  get(key: string): T | null {\n    const entry = this.cache.get(key);\n\n    if (!entry) {\n      this.metrics.misses++;\n      this.updateHitRate();\n      return null;\n    }\n\n    // Check if expired\n    if (this.isExpired(entry)) {\n      this.delete(key);\n      this.metrics.misses++;\n      this.updateHitRate();\n      return null;\n    }\n\n    // Update access tracking\n    entry.accessCount++;\n    entry.lastAccessed = Date.now();\n    this.updateAccessOrder(key);\n\n    this.metrics.hits++;\n    this.updateHitRate();\n    return entry.data;\n  }\n\n  /**\n   * Set a value in the cache\n   */\n  set(key: string, value: T, ttl?: number): void {\n    const now = Date.now();\n    const entry: CacheEntry<T> = {\n      data: value,\n      timestamp: now,\n      ttl: ttl ?? this.options.defaultTtl,\n      accessCount: 0,\n      lastAccessed: now,\n    };\n\n    // Check if we need to evict\n    if (this.cache.size >= this.options.maxSize && !this.cache.has(key)) {\n      this.evict();\n    }\n\n    this.cache.set(key, entry);\n    this.updateAccessOrder(key);\n    this.metrics.size = this.cache.size;\n  }\n\n  /**\n   * Check if a key exists and is not expired\n   */\n  has(key: string): boolean {\n    const entry = this.cache.get(key);\n    if (!entry) return false;\n\n    if (this.isExpired(entry)) {\n      this.delete(key);\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Delete a key from the cache\n   */\n  delete(key: string): boolean {\n    const deleted = this.cache.delete(key);\n    if (deleted) {\n      const index = this.accessOrder.indexOf(key);\n      if (index > -1) {\n        this.accessOrder.splice(index, 1);\n      }\n      this.metrics.size = this.cache.size;\n    }\n    return deleted;\n  }\n\n  /**\n   * Clear all entries from the cache\n   */\n  clear(): void {\n    this.cache.clear();\n    this.accessOrder = [];\n    this.metrics.size = 0;\n  }\n\n  /**\n   * Get cache metrics\n   */\n  getMetrics(): CacheMetrics {\n    return { ...this.metrics };\n  }\n\n  /**\n   * Get cache size\n   */\n  size(): number {\n    return this.cache.size;\n  }\n\n  /**\n   * Clean up expired entries\n   */\n  cleanup(): number {\n    let cleaned = 0;\n\n    for (const [key, entry] of this.cache.entries()) {\n      if (this.isExpired(entry)) {\n        this.delete(key);\n        cleaned++;\n      }\n    }\n\n    return cleaned;\n  }\n\n  /**\n   * Get all keys in the cache\n   */\n  keys(): string[] {\n    return Array.from(this.cache.keys());\n  }\n\n  /**\n   * Get cache statistics for debugging\n   */\n  getStats(): {\n    metrics: CacheMetrics;\n    topKeys: Array<{ key: string; accessCount: number; lastAccessed: number }>;\n    memoryUsage: number;\n  } {\n    const topKeys = Array.from(this.cache.entries())\n      .map(([key, entry]) => ({\n        key,\n        accessCount: entry.accessCount,\n        lastAccessed: entry.lastAccessed,\n      }))\n      .sort((a, b) => b.accessCount - a.accessCount)\n      .slice(0, 10);\n\n    // Rough memory usage estimation\n    const memoryUsage = this.cache.size * 100; // Rough estimate\n\n    return {\n      metrics: this.getMetrics(),\n      topKeys,\n      memoryUsage,\n    };\n  }\n\n  private isExpired(entry: CacheEntry<T>): boolean {\n    return Date.now() - entry.timestamp > entry.ttl;\n  }\n\n  private updateAccessOrder(key: string): void {\n    // Remove from current position\n    const index = this.accessOrder.indexOf(key);\n    if (index > -1) {\n      this.accessOrder.splice(index, 1);\n    }\n\n    // Add to end (most recently accessed)\n    this.accessOrder.push(key);\n  }\n\n  private evict(): void {\n    if (this.cache.size === 0) return;\n\n    let keyToEvict: string | null = null;\n\n    switch (this.options.evictionPolicy) {\n      case 'lru':\n        keyToEvict = this.accessOrder[0]; // Least recently used\n        break;\n      case 'ttl': {\n        // Find the oldest entry\n        let oldestTime = Date.now();\n        for (const [key, entry] of this.cache.entries()) {\n          if (entry.timestamp < oldestTime) {\n            oldestTime = entry.timestamp;\n            keyToEvict = key;\n          }\n        }\n        break;\n      }\n      case 'both': {\n        // Use LRU for frequently accessed items, TTL for old items\n        const now = Date.now();\n        const oldThreshold = now - this.options.defaultTtl * 2;\n\n        // First try to evict old items\n        for (const [key, entry] of this.cache.entries()) {\n          if (entry.timestamp < oldThreshold) {\n            keyToEvict = key;\n            break;\n          }\n        }\n\n        // If no old items, use LRU\n        if (!keyToEvict) {\n          keyToEvict = this.accessOrder[0];\n        }\n        break;\n      }\n    }\n\n    if (keyToEvict) {\n      this.delete(keyToEvict);\n      this.metrics.evictions++;\n    }\n  }\n\n  private updateHitRate(): void {\n    const total = this.metrics.hits + this.metrics.misses;\n    this.metrics.hitRate = total > 0 ? this.metrics.hits / total : 0;\n  }\n}\n\n/**\n * Specialized cache for work items with optimized serialization\n */\nexport class WorkItemCache extends IntelligentCache<any> {\n  private static readonly WORK_ITEM_TTL = 300000; // 5 minutes\n  private static readonly QUERY_TTL = 600000; // 10 minutes\n  private static readonly METADATA_TTL = 1800000; // 30 minutes\n\n  constructor() {\n    super({\n      maxSize: 2000,\n      defaultTtl: WorkItemCache.WORK_ITEM_TTL,\n      enableMetrics: true,\n      evictionPolicy: 'both',\n    });\n  }\n\n  /**\n   * Cache work items with appropriate TTL\n   */\n  setWorkItems(key: string, workItems: any[]): void {\n    this.set(key, workItems, WorkItemCache.WORK_ITEM_TTL);\n  }\n\n  /**\n   * Cache query results with longer TTL\n   */\n  setQueryResult(key: string, result: any): void {\n    this.set(key, result, WorkItemCache.QUERY_TTL);\n  }\n\n  /**\n   * Cache metadata with longest TTL\n   */\n  setMetadata(key: string, metadata: any): void {\n    this.set(key, metadata, WorkItemCache.METADATA_TTL);\n  }\n\n  /**\n   * Generate cache key for work items query\n   */\n  static generateWorkItemsKey(connectionId: string, query: string, filters: any): string {\n    const filterStr = JSON.stringify(filters);\n    return `workitems:${connectionId}:${Buffer.from(query + filterStr).toString('base64')}`;\n  }\n\n  /**\n   * Generate cache key for query\n   */\n  static generateQueryKey(connectionId: string, query: string): string {\n    return `query:${connectionId}:${Buffer.from(query).toString('base64')}`;\n  }\n\n  /**\n   * Generate cache key for metadata\n   */\n  static generateMetadataKey(connectionId: string, type: string): string {\n    return `metadata:${connectionId}:${type}`;\n  }\n}\n\n/**\n * Global cache instances\n */\nexport const workItemCache = new WorkItemCache();\nexport const apiCache = new IntelligentCache({ maxSize: 500, defaultTtl: 300000 });\nexport const metadataCache = new IntelligentCache({ maxSize: 100, defaultTtl: 1800000 });\n\n/**\n * Cache cleanup interval (5 minutes)\n */\nlet cleanupInterval: NodeJS.Timeout | null = null;\n\nexport function startCacheCleanup(): void {\n  if (cleanupInterval) return;\n\n  cleanupInterval = setInterval(() => {\n    workItemCache.cleanup();\n    apiCache.cleanup();\n    metadataCache.cleanup();\n  }, 300000); // 5 minutes\n}\n\nexport function stopCacheCleanup(): void {\n  if (cleanupInterval) {\n    clearInterval(cleanupInterval);\n    cleanupInterval = null;\n  }\n}\n\n/**\n * Get comprehensive cache statistics\n */\nexport function getCacheStats(): {\n  workItems: ReturnType<WorkItemCache['getStats']>;\n  api: ReturnType<IntelligentCache['getStats']>;\n  metadata: ReturnType<IntelligentCache['getStats']>;\n  totalMemoryUsage: number;\n} {\n  const workItemsStats = workItemCache.getStats();\n  const apiStats = apiCache.getStats();\n  const metadataStats = metadataCache.getStats();\n\n  return {\n    workItems: workItemsStats,\n    api: apiStats,\n    metadata: metadataStats,\n    totalMemoryUsage: workItemsStats.memoryUsage + apiStats.memoryUsage + metadataStats.memoryUsage,\n  };\n}\n", "import type { ProjectConnection } from '../../types/application.js';\n\nexport interface NormalizeConnectionsResult {\n  connections: ProjectConnection[];\n  requiresSave: boolean;\n  summary: {\n    normalized: number;\n    added: number;\n    migrated: number;\n    deduplicated?: number; // Number of duplicate connections removed\n  };\n}\n\nexport interface LegacyFallback {\n  organization: string;\n  project: string;\n  team?: string;\n  label?: string;\n}\n\n/**\n * Normalize connections from config, handling legacy formats and migration\n */\nexport function normalizeConnections(\n  rawConnections: unknown[],\n  legacyFallback?: LegacyFallback\n): NormalizeConnectionsResult {\n  const normalized: ProjectConnection[] = [];\n  const seen = new Map<string, ProjectConnection>(); // Deduplication map: key = \"org|project|baseUrl\"\n  let requiresSave = false;\n  let added = 0;\n  let migrated = 0;\n  let deduplicated = 0;\n\n  // Process raw connections\n  for (const raw of rawConnections) {\n    if (!raw || typeof raw !== 'object') continue;\n\n    const conn = raw as any;\n\n    // Validate required fields\n    if (!conn.organization || !conn.project) {\n      continue; // Skip invalid connections\n    }\n\n    // Create deduplication key: (org, project, baseUrl)\n    // This prevents duplicate connections for the same org/project/baseUrl combination\n    const baseUrl = conn.baseUrl ? String(conn.baseUrl).trim() : '';\n    const dedupeKey = `${String(conn.organization).trim()}|${String(conn.project).trim()}|${baseUrl}`;\n    \n    // Check for duplicate\n    if (seen.has(dedupeKey)) {\n      const existing = seen.get(dedupeKey)!;\n      // Merge: prefer connection with ID, or merge fields from newer connection\n      if (!existing.id && conn.id) {\n        // Replace existing with one that has ID\n        const index = normalized.indexOf(existing);\n        if (index >= 0) {\n          normalized[index] = {\n            ...existing,\n            id: conn.id,\n            // Merge other fields, preferring newer values\n            tenantId: conn.tenantId || existing.tenantId,\n            authMethod: conn.authMethod || existing.authMethod,\n            apiBaseUrl: conn.apiBaseUrl || existing.apiBaseUrl,\n            label: conn.label || existing.label,\n          };\n          requiresSave = true;\n          deduplicated++;\n        }\n      } else {\n        // Skip duplicate - already have a connection for this org/project/baseUrl\n        deduplicated++;\n        continue;\n      }\n    }\n\n    // Normalize connection\n    const normalizedConn: ProjectConnection = {\n      id: conn.id || `${conn.organization}-${conn.project}-${Date.now()}`,\n      organization: String(conn.organization).trim(),\n      project: String(conn.project).trim(),\n      team: conn.team ? String(conn.team).trim() : undefined,\n      label: conn.label ? String(conn.label).trim() : undefined,\n      baseUrl: conn.baseUrl ? String(conn.baseUrl).trim() : undefined,\n      apiBaseUrl: conn.apiBaseUrl ? String(conn.apiBaseUrl).trim() : undefined,\n      authMethod: conn.authMethod === 'entra' ? 'entra' : 'pat',\n      patKey: conn.patKey ? String(conn.patKey).trim() : undefined,\n      tenantId: conn.tenantId ? String(conn.tenantId).trim() : undefined,\n      identityName: conn.identityName ? String(conn.identityName).trim() : undefined,\n    };\n\n    normalized.push(normalizedConn);\n    seen.set(dedupeKey, normalizedConn);\n\n    // Check if ID was generated (migration needed)\n    if (!conn.id) {\n      requiresSave = true;\n      added++;\n    }\n\n    // Check if other fields need normalization\n    if (\n      conn.organization !== normalizedConn.organization ||\n      conn.project !== normalizedConn.project ||\n      (conn.team || '') !== (normalizedConn.team || '') ||\n      (conn.label || '') !== (normalizedConn.label || '')\n    ) {\n      requiresSave = true;\n      migrated++;\n    }\n  }\n\n  // Add legacy fallback if no connections exist\n  if (normalized.length === 0 && legacyFallback) {\n    const legacyConn: ProjectConnection = {\n      id: `${legacyFallback.organization}-${legacyFallback.project}-${Date.now()}`,\n      organization: legacyFallback.organization,\n      project: legacyFallback.project,\n      team: legacyFallback.team,\n      label: legacyFallback.label,\n      authMethod: 'pat',\n    };\n    normalized.push(legacyConn);\n    requiresSave = true;\n    added++;\n    migrated++;\n  }\n\n  return {\n    connections: normalized,\n    requiresSave: requiresSave || deduplicated > 0,\n    summary: {\n      normalized: normalized.length,\n      added,\n      migrated,\n      deduplicated, // Track how many duplicates were removed\n    },\n  };\n}\n\nexport interface ResolveActiveConnectionIdResult {\n  activeConnectionId: string | undefined;\n  requiresPersistence: boolean;\n}\n\n/**\n * Resolve the active connection ID from persisted value and available connections\n */\nexport function resolveActiveConnectionId(\n  persistedActive: string | undefined,\n  connections: ProjectConnection[]\n): ResolveActiveConnectionIdResult {\n  // If no connections, return undefined\n  if (connections.length === 0) {\n    return {\n      activeConnectionId: undefined,\n      requiresPersistence: persistedActive !== undefined, // Clear if persisted but no connections\n    };\n  }\n\n  // If persisted value exists and is valid, use it\n  if (persistedActive) {\n    const found = connections.find((c) => c.id === persistedActive);\n    if (found) {\n      return {\n        activeConnectionId: persistedActive,\n        requiresPersistence: false, // Already persisted and valid\n      };\n    }\n  }\n\n  // Otherwise, use first connection\n  const firstConnectionId = connections[0]?.id;\n  return {\n    activeConnectionId: firstConnectionId,\n    requiresPersistence: persistedActive !== firstConnectionId, // Persist if different\n  };\n}\n", "import type { ExtensionContext } from 'vscode';\nimport type { ProjectConnection } from '../../types/application.js';\n\nconst LEGACY_PAT_KEY = 'azureDevOpsPersonalAccessToken';\n\n/**\n * Migrate global PAT to per-connection secret keys\n * This ensures credentials are always connection-scoped (no global PAT sharing)\n */\nexport async function migrateGlobalPATToConnections(\n  context: ExtensionContext,\n  connections: ProjectConnection[]\n): Promise<void> {\n  try {\n    // Get legacy global PAT if it exists\n    const globalPAT = await context.secrets.get(LEGACY_PAT_KEY);\n\n    if (!globalPAT) {\n      return; // No migration needed\n    }\n\n    // Migrate to each connection that uses PAT auth and doesn't have a PAT yet\n    let migratedCount = 0;\n    for (const connection of connections) {\n      if (connection.authMethod === 'pat' && connection.patKey) {\n        const existingPAT = await context.secrets.get(connection.patKey);\n\n        // Only migrate if connection doesn't have a PAT yet\n        if (!existingPAT) {\n          await context.secrets.store(connection.patKey, globalPAT);\n          migratedCount++;\n        }\n      }\n    }\n\n    // If we migrated to at least one connection, delete the global PAT\n    if (migratedCount > 0) {\n      await context.secrets.delete(LEGACY_PAT_KEY);\n    }\n  } catch (error) {\n    // Log but don't throw - migration failures shouldn't break activation\n\n    // Debug statement removed\n  }\n}\n", "/**\n * Module: src/fsm/services/extensionHostBridge.ts\n * Owner: application\n * Reads: (document)\n * Writes: (document)\n * Receives: (document)\n * Emits: (document)\n * Prohibitions: Do not mutate ApplicationContext directly; Do not define new *Context types\n * Rationale: (document)\n *\n * LLM-GUARD:\n * - Follow ownership boundaries; route events to Router; do not add UI logic here\n */\nimport type * as vscode from 'vscode';\nimport { createLogger } from '../logging/unifiedLogger.js';\n\nconst logger = createLogger('extension-host-bridge');\n\ntype RegisterAllCommandsFn = (context: vscode.ExtensionContext) => void | Promise<void>;\ntype ForwardProviderMessageFn = (connectionId: string, message: unknown) => void;\ntype GetSecretPATFn = (\n  context: vscode.ExtensionContext,\n  connectionId?: string\n) => Promise<string | undefined>;\ntype LoadedConnectionsReader = () => unknown[];\ntype ActiveConnectionIdReader = () => string | null | undefined;\ntype ApplicationActorAccessor = () => unknown;\ntype ApplicationEventDispatcher = (event: unknown) => void;\ntype WebviewMessageHandler = (message: unknown) => void | Promise<void>;\nexport type ActiveConnectionHandlerOptions = {\n  refresh?: boolean;\n  notify?: boolean;\n  interactive?: boolean;\n};\n\ntype ActiveConnectionHandler = (\n  connectionId: string,\n  options?: ActiveConnectionHandlerOptions\n) => unknown | Promise<unknown>;\n\nlet extensionContextRef: vscode.ExtensionContext | undefined;\nlet registerAllCommandsFn: RegisterAllCommandsFn | undefined;\nlet forwardProviderMessageFn: ForwardProviderMessageFn | undefined;\nlet getSecretPATFn: GetSecretPATFn | undefined;\nlet loadedConnectionsReader: LoadedConnectionsReader = () => [];\nlet activeConnectionIdReader: ActiveConnectionIdReader = () => null;\nlet applicationActorAccessor: ApplicationActorAccessor | undefined;\nlet applicationEventDispatcher: ApplicationEventDispatcher | undefined;\nlet webviewMessageHandler: WebviewMessageHandler | undefined;\nlet activeConnectionHandler: ActiveConnectionHandler | undefined;\n\nexport function setExtensionContextRef(context: vscode.ExtensionContext): void {\n  extensionContextRef = context;\n  // Preserve legacy global for existing helpers that access extension context via global scope\n  (globalThis as any).extensionContext = context;\n}\n\nexport function getExtensionContextRef(): vscode.ExtensionContext | undefined {\n  return extensionContextRef;\n}\n\nexport function setRegisterAllCommands(fn: RegisterAllCommandsFn): void {\n  registerAllCommandsFn = fn;\n}\n\nexport async function invokeRegisterAllCommands(context: vscode.ExtensionContext): Promise<void> {\n  if (!registerAllCommandsFn) {\n    return;\n  }\n  await registerAllCommandsFn(context);\n}\n\nexport function setForwardProviderMessage(fn: ForwardProviderMessageFn): void {\n  forwardProviderMessageFn = fn;\n}\n\nexport function forwardProviderMessage(connectionId: string, message: unknown): void {\n  if (!forwardProviderMessageFn) {\n    return;\n  }\n  forwardProviderMessageFn(connectionId, message);\n}\n\nexport function setGetSecretPAT(fn: GetSecretPATFn): void {\n  getSecretPATFn = fn;\n}\n\nexport async function getSecretPAT(\n  context: vscode.ExtensionContext,\n  connectionId?: string\n): Promise<string | undefined> {\n  if (!getSecretPATFn) {\n    return undefined;\n  }\n  return getSecretPATFn(context, connectionId);\n}\n\nexport function setLoadedConnectionsReader(fn: LoadedConnectionsReader): void {\n  loadedConnectionsReader = fn;\n}\n\nexport function getLoadedConnections(): unknown[] {\n  return loadedConnectionsReader();\n}\n\nexport function setActiveConnectionIdReader(fn: ActiveConnectionIdReader): void {\n  activeConnectionIdReader = fn;\n}\n\nexport function getActiveConnectionId(): string | null | undefined {\n  return activeConnectionIdReader();\n}\n\nexport function setWebviewMessageHandler(handler: WebviewMessageHandler | undefined): void {\n  webviewMessageHandler = handler;\n}\n\nexport async function invokeWebviewMessageHandler(message: unknown): Promise<void> {\n  if (!webviewMessageHandler) {\n    return;\n  }\n\n  try {\n    await webviewMessageHandler(message);\n  } catch (error) {\n    logger.error('Webview message handler failed', { meta: error });\n  }\n}\n\nexport function setActiveConnectionHandler(handler: ActiveConnectionHandler | undefined): void {\n  activeConnectionHandler = handler;\n}\n\nexport async function invokeActiveConnectionHandler(\n  connectionId: string,\n  options?: ActiveConnectionHandlerOptions\n): Promise<unknown> {\n  if (!activeConnectionHandler) {\n    return undefined;\n  }\n\n  try {\n    return await activeConnectionHandler(connectionId, options);\n  } catch (error) {\n    logger.error('Active connection handler failed', { meta: error });\n    return undefined;\n  }\n}\n\nexport function setApplicationStoreBridge(options: {\n  getActor: ApplicationActorAccessor;\n  send: ApplicationEventDispatcher;\n}): void {\n  applicationActorAccessor = options.getActor;\n  applicationEventDispatcher = options.send;\n}\n\nexport function clearApplicationStoreBridge(): void {\n  applicationActorAccessor = undefined;\n  applicationEventDispatcher = undefined;\n}\n\nexport function getApplicationStoreActor(): unknown {\n  return applicationActorAccessor ? applicationActorAccessor() : undefined;\n}\n\nexport function sendApplicationStoreEvent(event: unknown): boolean {\n  if (!applicationEventDispatcher) {\n    return false; // Bridge not initialized\n  }\n  applicationEventDispatcher(event);\n  return true; // Event sent via bridge\n}\n", "/**\n * Module: src/features/commands/types.ts\n * Owner: application\n * Reads: (document)\n * Writes: (document)\n * Receives: (document)\n * Emits: (document)\n * Prohibitions: Do not mutate ApplicationContext directly; Do not define new *Context types\n * Rationale: (document)\n *\n * LLM-GUARD:\n * - Follow ownership boundaries; route events to Router; do not add UI logic here\n */\nimport * as vscode from 'vscode';\nimport type { WorkItemsProvider } from '../../provider.js';\nimport type { ProjectConnection as _ProjectConnection } from '../../types/application.js';\nimport type { BranchContext } from '../../services/connection/branchEnrichment.js';\nimport type { WorkItemTimer } from '../../timer.js';\n\nexport interface CommandContext {\n  context: vscode.ExtensionContext;\n  panel?: vscode.WebviewView;\n  provider?: WorkItemsProvider;\n  sessionTelemetry?: any; // SessionTelemetryManager type\n  client?: any; // AzureDevOpsIntClient type\n  statusBarItem?: vscode.StatusBarItem;\n  authStatusBarItem?: vscode.StatusBarItem;\n  timer?: WorkItemTimer;\n}\n\nexport interface CommandHandler {\n  (context: CommandContext, ...args: any[]): Promise<void> | void;\n}\n\nexport interface CommandRegistration {\n  command: string;\n  handler: CommandHandler;\n}\n\nexport interface LogCommandParams {\n  logger?: (message: string, meta?: any) => void;\n  connectionId?: string;\n  items?: any[];\n  kanbanView?: boolean;\n  provider?: WorkItemsProvider;\n  types?: string[];\n  query?: string;\n  branchContext?: BranchContext | null;\n}\n\nexport interface TimerCommandParams {\n  workItemId?: string;\n  workItemTitle?: string;\n  connectionId?: string;\n}\n\nexport interface AuthCommandParams {\n  target?: unknown;\n  connectionId?: string;\n}\n\nexport interface WorkItemCommandParams {\n  connectionId?: string;\n  workItemId?: string;\n  workItemTitle?: string;\n  teamId?: string;\n  projectId?: string;\n}\n\nexport interface BranchCommandParams {\n  connectionId?: string;\n  branchName?: string;\n  repositoryId?: string;\n  projectId?: string;\n}\n\nexport interface PullRequestCommandParams {\n  connectionId?: string;\n  sourceBranch?: string;\n  targetBranch?: string;\n  repositoryId?: string;\n  projectId?: string;\n  title?: string;\n  description?: string;\n}\n\nexport interface BuildCommandParams {\n  connectionId?: string;\n  buildId?: string;\n  projectId?: string;\n}\n\nexport interface TeamCommandParams {\n  connectionId?: string;\n  teamId?: string;\n  projectId?: string;\n}\n\nexport interface RepositoryCommandParams {\n  connectionId?: string;\n  repositoryId?: string;\n  projectId?: string;\n}\n\nexport interface DebugCommandParams {\n  connectionId?: string;\n  debugMode?: boolean;\n}\n\nexport interface PerformanceCommandParams {\n  clearData?: boolean;\n  forceGC?: boolean;\n}\n\nexport interface OpenAICommandParams {\n  apiKey?: string;\n  prompt?: string;\n}\n\nexport interface BulkActionCommandParams {\n  connectionId?: string;\n  workItemIds?: string[];\n  action?: string;\n  value?: any;\n}\n", "/**\n * Helper functions for setup service\n */\n\nimport * as vscode from 'vscode';\nimport type { ProjectConnection } from '../types/application.js';\nimport type { ExtensionContext } from 'vscode';\n\nexport interface ConnectionInfo {\n  organization: string;\n  project: string;\n  baseUrl: string;\n}\n\n/**\n * Parse work item URL to extract connection info\n */\nexport function parseWorkItemUrl(url: string): ConnectionInfo | null {\n  try {\n    const parsed = new URL(url);\n    const pathParts = parsed.pathname.split('/').filter(Boolean);\n\n    // Handle dev.azure.com/org/project pattern\n    if (parsed.hostname === 'dev.azure.com') {\n      if (pathParts.length >= 2) {\n        return {\n          organization: pathParts[0],\n          project: pathParts[1],\n          baseUrl: `https://dev.azure.com/${pathParts[0]}`,\n        };\n      }\n    }\n\n    // Handle org.visualstudio.com/project pattern\n    const vsMatch = parsed.hostname.match(/^(.+)\\.visualstudio\\.com$/);\n    if (vsMatch && pathParts.length >= 1) {\n      return {\n        organization: vsMatch[1],\n        project: pathParts[0],\n        baseUrl: `https://${vsMatch[1]}.visualstudio.com`,\n      };\n    }\n\n    return null;\n  } catch {\n    return null;\n  }\n}\n\n/**\n * Show URL input dialog\n */\nexport async function showUrlInput(): Promise<string | undefined> {\n  return await vscode.window.showInputBox({\n    prompt: 'Enter an Azure DevOps work item URL to auto-configure your connection',\n    placeHolder: 'https://dev.azure.com/myorg/myproject/_workitems/edit/123',\n    validateInput: (value) => {\n      if (!value) return 'URL is required';\n      if (!value.includes('_workitems')) return 'Please provide a work item URL';\n      return null;\n    },\n  });\n}\n\n/**\n * Create new connection from connection info and credentials\n */\nexport function createConnectionFromInfo(\n  connectionInfo: ConnectionInfo,\n  authMethod: 'pat' | 'entra',\n  credentials: { token?: string; tenantId?: string; clientId?: string }\n): ProjectConnection {\n  const connectionId = `${connectionInfo.organization}-${connectionInfo.project}-${Date.now()}`;\n  return {\n    id: connectionId,\n    organization: connectionInfo.organization,\n    project: connectionInfo.project,\n    baseUrl: connectionInfo.baseUrl,\n    authMethod,\n    ...(authMethod === 'pat' && credentials.token ? { patKey: `pat-${connectionId}` } : {}),\n    ...(authMethod === 'entra' && credentials.tenantId ? { tenantId: credentials.tenantId } : {}),\n    ...(authMethod === 'entra' && credentials.clientId ? { clientId: credentials.clientId } : {}),\n  };\n}\n\n/**\n * Save connection and update bridge reader\n */\nexport async function saveConnection(\n  context: ExtensionContext,\n  connection: ProjectConnection,\n  existingConnections: ProjectConnection[],\n  credentials?: { token?: string }\n): Promise<void> {\n  // Save PAT if using PAT auth\n  if (connection.authMethod === 'pat' && credentials?.token) {\n    await context.secrets.store(`pat-${connection.id}`, credentials.token);\n  }\n\n  // Save connection\n  const settings = vscode.workspace.getConfiguration('azureDevOpsIntegration');\n  const updatedConnections = [...existingConnections, connection];\n  await settings.update('connections', updatedConnections, vscode.ConfigurationTarget.Global);\n\n  // Update bridge reader\n  try {\n    const { setLoadedConnectionsReader } = await import('../services/extensionHostBridge.js');\n    setLoadedConnectionsReader(() => updatedConnections);\n  } catch {\n    // Swallow errors updating bridge reader\n  }\n}\n", "/**\n * Module: src/fsm/services/fsmSetupService.ts\n * Owner: application\n * Reads: (document)\n * Writes: (document)\n * Receives: (document)\n * Emits: (document)\n * Prohibitions: Do not mutate ApplicationContext directly; Do not define new *Context types\n * Rationale: (document)\n *\n * LLM-GUARD:\n * - Follow ownership boundaries; route events to Router; do not add UI logic here\n *\n * This module now uses a simplified Praxis-compatible approach instead of XState.\n */\n/**\n * FSM-based Setup UI Integration\n * Handles VS Code UI interactions for the setup flow\n *\n * Note: This has been simplified to work without XState.\n * The setup flow is now implemented directly without a state machine.\n */\n\nimport * as vscode from 'vscode';\nimport { createLogger } from '../logging/unifiedLogger.js';\n\nconst logger = createLogger('fsm-setup-service');\nconst DEFAULT_ENTRA_TENANT_ID = 'organizations';\nconst DEFAULT_ENTRA_CLIENT_ID = 'c6c01810-2fff-45f0-861b-2ba02ae00ddc';\n\n// Define the connection type locally since it's defined in activation.ts\ntype ProjectConnection = {\n  id: string;\n  organization: string;\n  project: string;\n  label?: string;\n  team?: string;\n  authMethod?: 'pat' | 'entra';\n  patKey?: string;\n  baseUrl?: string;\n  identityName?: string;\n  tenantId?: string;\n  clientId?: string;\n  apiBaseUrl?: string;\n};\n\ninterface StartSetupOptions {\n  /**\n   * Target connection to reconfigure. When provided with startAtAuthChoice,\n   * skips URL parsing and jumps directly to auth selection.\n   */\n  connectionId?: string;\n  /**\n   * When true, start the flow at the auth method selection step for the target connection.\n   */\n  startAtAuthChoice?: boolean;\n}\n\n// Result type for setup flow\nexport interface FSMSetupResult {\n  status: 'success' | 'cancelled' | 'removed';\n  connectionId?: string;\n  removedConnectionId?: string;\n}\n\nexport class FSMSetupService {\n  private context: vscode.ExtensionContext;\n\n  constructor(context: vscode.ExtensionContext) {\n    this.context = context;\n  }\n\n  async startSetup(options?: StartSetupOptions): Promise<FSMSetupResult> {\n    // Load connections from workspace configuration (not globalState!)\n    const settings = vscode.workspace.getConfiguration('azureDevOpsIntegration');\n    const existingConnections = settings.get<ProjectConnection[]>('connections', []);\n    const activeConnectionId = this.context.globalState.get<string>(\n      'azureDevOpsInt.activeConnectionId'\n    );\n\n    const startAtAuthChoice = options?.startAtAuthChoice ?? false;\n    const targetConnectionId = options?.connectionId ?? activeConnectionId;\n    const targetConnection = targetConnectionId\n      ? existingConnections.find((c) => c.id === targetConnectionId)\n      : undefined;\n\n    logger.debug('Starting setup', {\n      connectionsCount: existingConnections.length,\n      activeConnectionId,\n      connectionAuthMethods: existingConnections.map((c) => ({\n        id: c.id,\n        authMethod: c.authMethod,\n      })),\n      startAtAuthChoice,\n      targetConnectionId,\n    });\n\n    try {\n      if (startAtAuthChoice && targetConnection) {\n        return await this.reconfigureAuth(targetConnection, existingConnections, settings);\n      }\n\n      // Simplified setup flow without XState\n      const { showUrlInput, parseWorkItemUrl, createConnectionFromInfo, saveConnection } =\n        await import('./setupServiceHelpers.js');\n\n      const url = await showUrlInput();\n      if (!url) {\n        // Check if user wants to manage existing connections\n        const manageExisting = await vscode.window.showQuickPick(\n          ['Cancel', 'Manage Existing Connections'],\n          { placeHolder: 'What would you like to do?' }\n        );\n\n        if (manageExisting === 'Manage Existing Connections') {\n          return await this.manageExistingConnections(existingConnections);\n        }\n        return { status: 'cancelled' };\n      }\n\n      // Parse URL to extract connection info\n      const connectionInfo = parseWorkItemUrl(url);\n      if (!connectionInfo) {\n        await vscode.window.showErrorMessage(\n          'Invalid work item URL. Please provide a valid Azure DevOps work item URL.'\n        );\n        return { status: 'cancelled' };\n      }\n\n      // Select auth method\n      const authMethod = await this.showAuthMethodSelection();\n      if (!authMethod) {\n        return { status: 'cancelled' };\n      }\n\n      // Get credentials\n      let credentials: { token?: string; tenantId?: string; clientId?: string } | null = null;\n      if (authMethod === 'pat') {\n        const token = await this.showPATInput();\n        if (!token) {\n          return { status: 'cancelled' };\n        }\n        credentials = { token };\n      } else {\n        credentials = await this.showEntraConfig();\n        if (!credentials) {\n          return { status: 'cancelled' };\n        }\n      }\n\n      // Create and save connection\n      const newConnection = createConnectionFromInfo(connectionInfo, authMethod, credentials);\n      await saveConnection(this.context, newConnection, existingConnections, credentials);\n\n      logger.info('\u2705 Connection saved successfully', { connectionId: newConnection.id });\n      vscode.window.showInformationMessage('Connection saved successfully!');\n\n      return { status: 'success', connectionId: newConnection.id };\n    } catch (error) {\n      logger.error('Setup failed', {\n        error: error instanceof Error ? error.message : String(error),\n      });\n      await vscode.window.showErrorMessage(\n        `Setup failed: ${error instanceof Error ? error.message : String(error)}`\n      );\n      return { status: 'cancelled' };\n    }\n  }\n\n  private async showAuthMethodSelection(\n    currentMethod?: 'pat' | 'entra'\n  ): Promise<'pat' | 'entra' | undefined> {\n    const items = [\n      {\n        label: 'Personal Access Token (PAT)',\n        description: 'Use a Personal Access Token for authentication',\n        detail: 'Recommended for most users. Generate a PAT from Azure DevOps settings.',\n        value: 'pat' as const,\n      },\n      {\n        label: 'Microsoft Entra ID (OAuth)',\n        description: 'Use your Microsoft account to sign in',\n        detail: 'Enterprise authentication using your organizational account.',\n        value: 'entra' as const,\n      },\n    ];\n\n    const authMethod = await vscode.window.showQuickPick(items, {\n      placeHolder: 'Choose authentication method',\n      matchOnDescription: true,\n      matchOnDetail: true,\n      activeItem: currentMethod ? items.find((item) => item.value === currentMethod) : undefined,\n    });\n\n    return authMethod?.value;\n  }\n\n  private async showPATInput(): Promise<string | undefined> {\n    return await vscode.window.showInputBox({\n      prompt: 'Enter your Personal Access Token',\n      password: true,\n      placeHolder: 'Your PAT from Azure DevOps',\n      validateInput: (value) => {\n        if (!value) return 'PAT is required';\n        if (value.length < 20) return 'PAT seems too short';\n        return null;\n      },\n    });\n  }\n\n  private async showEntraConfig(): Promise<{ tenantId: string; clientId: string } | null> {\n    // Defaults are handled automatically; keep method for potential future advanced configuration\n    return { tenantId: DEFAULT_ENTRA_TENANT_ID, clientId: DEFAULT_ENTRA_CLIENT_ID };\n  }\n\n  private async reconfigureAuth(\n    targetConnection: ProjectConnection,\n    existingConnections: ProjectConnection[],\n    settings: vscode.WorkspaceConfiguration\n  ): Promise<FSMSetupResult> {\n    logger.debug('Reconfiguring authentication for connection', {\n      connectionId: targetConnection.id,\n      authMethod: targetConnection.authMethod,\n    });\n\n    const authMethod = await this.showAuthMethodSelection(targetConnection.authMethod);\n    if (!authMethod) {\n      return { status: 'cancelled' };\n    }\n\n    let patToken: string | undefined;\n    let tenantId: string | undefined;\n    let clientId: string | undefined;\n\n    if (authMethod === 'pat') {\n      patToken = await this.showPATInput();\n      if (!patToken) {\n        return { status: 'cancelled' };\n      }\n    } else {\n      // Device code flow uses the built-in multi-tenant app; do not prompt for tenant/client IDs\n      tenantId = targetConnection.tenantId || DEFAULT_ENTRA_TENANT_ID;\n      clientId = targetConnection.clientId || DEFAULT_ENTRA_CLIENT_ID;\n    }\n\n    if (authMethod !== 'pat' && targetConnection.patKey) {\n      await this.context.secrets.delete(targetConnection.patKey);\n    }\n\n    const patKey =\n      authMethod === 'pat' ? (targetConnection.patKey ?? `pat-${targetConnection.id}`) : undefined;\n\n    if (authMethod === 'pat' && patKey && patToken) {\n      await this.context.secrets.store(patKey, patToken);\n    }\n\n    const updatedConnection: ProjectConnection = {\n      ...targetConnection,\n      authMethod,\n      patKey,\n      tenantId: authMethod === 'entra' ? tenantId : undefined,\n      clientId: authMethod === 'entra' ? clientId : undefined,\n    };\n\n    const updatedConnections = existingConnections.map((connection) =>\n      connection.id === targetConnection.id ? updatedConnection : connection\n    );\n\n    await settings.update('connections', updatedConnections, vscode.ConfigurationTarget.Global);\n\n    try {\n      const { setLoadedConnectionsReader } = await import('../services/extensionHostBridge.js');\n      setLoadedConnectionsReader(() => updatedConnections);\n    } catch (error) {\n      logger.warn('Failed to update bridge reader after auth reset', {\n        error: error instanceof Error ? error.message : String(error),\n      });\n    }\n\n    if (authMethod === 'entra') {\n      vscode.window.showInformationMessage(\n        'Authentication method updated. Starting Entra sign-in \u2014 complete the device code prompt to finish.'\n      );\n    } else {\n      vscode.window.showInformationMessage('Authentication updated successfully.');\n    }\n    return { status: 'success', connectionId: targetConnection.id };\n  }\n\n  private async manageExistingConnections(\n    connections: ProjectConnection[]\n  ): Promise<FSMSetupResult> {\n    if (connections.length === 0) {\n      vscode.window.showInformationMessage('No existing connections found.');\n      return { status: 'cancelled' };\n    }\n\n    const items = connections.map((conn) => ({\n      label: conn.label || `${conn.organization}/${conn.project}`,\n      description: conn.authMethod === 'pat' ? 'Personal Access Token' : 'Microsoft Entra ID',\n      detail: conn.baseUrl,\n      connection: conn,\n    }));\n\n    const selected = await vscode.window.showQuickPick(items, {\n      placeHolder: 'Select a connection to manage',\n      matchOnDescription: true,\n      matchOnDetail: true,\n    });\n\n    if (!selected) {\n      return { status: 'cancelled' };\n    }\n\n    const action = await vscode.window.showQuickPick(\n      [\n        { label: 'Remove Connection', value: 'remove', description: 'Delete this connection' },\n        {\n          label: 'Test Connection',\n          value: 'test',\n          description: 'Test if this connection is working',\n        },\n      ],\n      {\n        placeHolder: `Manage connection: ${selected.label}`,\n      }\n    );\n\n    if (action?.value === 'remove') {\n      const confirm = await vscode.window.showWarningMessage(\n        `Are you sure you want to remove the connection \"${selected.label}\"?`,\n        { modal: true },\n        'Yes, Remove'\n      );\n\n      if (confirm === 'Yes, Remove') {\n        const settings = vscode.workspace.getConfiguration('azureDevOpsIntegration');\n        const updatedConnections = connections.filter((c) => c.id !== selected.connection.id);\n        await settings.update('connections', updatedConnections, vscode.ConfigurationTarget.Global);\n\n        // Remove PAT if it exists\n        if (selected.connection.patKey) {\n          await this.context.secrets.delete(selected.connection.patKey);\n        }\n\n        vscode.window.showInformationMessage(`Connection \"${selected.label}\" removed.`);\n        return { status: 'removed', removedConnectionId: selected.connection.id };\n      }\n    } else if (action?.value === 'test') {\n      vscode.window.showInformationMessage('Connection test not yet implemented.');\n    }\n\n    return { status: 'cancelled' };\n  }\n}\n", "/**\n * Module: src/performance.ts\n * Owner: application\n * Reads: (document)\n * Writes: (document)\n * Receives: (document)\n * Emits: (document)\n * Prohibitions: Do not mutate ApplicationContext directly; Do not define new *Context types\n * Rationale: (document)\n *\n * LLM-GUARD:\n * - Follow ownership boundaries; route events to Router; do not add UI logic here\n */\n/**\n * Performance monitoring and optimization utilities\n * Tracks metrics, provides performance insights, and optimizes operations\n */\n\nimport { getCacheStats } from './cache.js';\n\n// Optional Node perf_hooks; fallback to browser performance\nlet performanceImpl: { now: () => number } = { now: () => Date.now() };\nvoid (async () => {\n  try {\n    if (typeof process !== 'undefined' && process?.versions?.node) {\n      const { performance } = await import('perf_hooks');\n      if (performance?.now) {\n        performanceImpl = performance;\n      }\n      return;\n    }\n  } catch {\n    // fall through to browser\n  }\n\n  if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n    performanceImpl = performance;\n  }\n})();\n\nexport interface PerformanceMetrics {\n  operation: string;\n  duration: number;\n  timestamp: number;\n  memoryUsage?: number;\n  cacheHit?: boolean;\n  error?: string;\n}\n\nexport interface PerformanceStats {\n  totalOperations: number;\n  averageDuration: number;\n  minDuration: number;\n  maxDuration: number;\n  errorRate: number;\n  cacheHitRate: number;\n  memoryUsage: {\n    current: number;\n    peak: number;\n    average: number;\n  };\n}\n\nexport interface MemoryUsage {\n  rss: number;\n  heapTotal: number;\n  heapUsed: number;\n  external: number;\n  arrayBuffers: number;\n}\n\nclass PerformanceMonitor {\n  private metrics: PerformanceMetrics[] = [];\n  private maxMetrics = 1000;\n  private memoryPeak = 0;\n  private isEnabled = true;\n\n  /**\n   * Start timing an operation\n   */\n  startTiming(operation: string): (error?: string, cacheHit?: boolean) => PerformanceMetrics {\n    const startTime = performanceImpl.now();\n    const startMemory = this.getMemoryUsage();\n\n    return (error?: string, cacheHit?: boolean): PerformanceMetrics => {\n      const endTime = performanceImpl.now();\n      const endMemory = this.getMemoryUsage();\n\n      const metric: PerformanceMetrics = {\n        operation,\n        duration: endTime - startTime,\n        timestamp: Date.now(),\n        memoryUsage: endMemory.heapUsed - startMemory.heapUsed,\n        cacheHit,\n        error,\n      };\n\n      this.recordMetric(metric);\n      return metric;\n    };\n  }\n\n  /**\n   * Record a performance metric\n   */\n  recordMetric(metric: PerformanceMetrics): void {\n    if (!this.isEnabled) return;\n\n    this.metrics.push(metric);\n\n    // Keep only the most recent metrics\n    if (this.metrics.length > this.maxMetrics) {\n      this.metrics = this.metrics.slice(-this.maxMetrics);\n    }\n\n    // Update memory peak\n    if (metric.memoryUsage && metric.memoryUsage > this.memoryPeak) {\n      this.memoryPeak = metric.memoryUsage;\n    }\n  }\n\n  /**\n   * Get performance statistics\n   */\n  getStats(): PerformanceStats {\n    if (this.metrics.length === 0) {\n      return {\n        totalOperations: 0,\n        averageDuration: 0,\n        minDuration: 0,\n        maxDuration: 0,\n        errorRate: 0,\n        cacheHitRate: 0,\n        memoryUsage: {\n          current: this.getMemoryUsage().heapUsed,\n          peak: this.memoryPeak,\n          average: 0,\n        },\n      };\n    }\n\n    const durations = this.metrics.map((m) => m.duration);\n    const errors = this.metrics.filter((m) => m.error).length;\n    const cacheHits = this.metrics.filter((m) => m.cacheHit === true).length;\n    const memoryUsages = this.metrics\n      .filter((m) => m.memoryUsage !== undefined)\n      .map((m) => m.memoryUsage!);\n\n    return {\n      totalOperations: this.metrics.length,\n      averageDuration: durations.reduce((a, b) => a + b, 0) / durations.length,\n      minDuration: Math.min(...durations),\n      maxDuration: Math.max(...durations),\n      errorRate: errors / this.metrics.length,\n      cacheHitRate: cacheHits / this.metrics.length,\n      memoryUsage: {\n        current: this.getMemoryUsage().heapUsed,\n        peak: this.memoryPeak,\n        average:\n          memoryUsages.length > 0\n            ? memoryUsages.reduce((a, b) => a + b, 0) / memoryUsages.length\n            : 0,\n      },\n    };\n  }\n\n  /**\n   * Get metrics for a specific operation\n   */\n  getOperationStats(operation: string): PerformanceStats {\n    const operationMetrics = this.metrics.filter((m) => m.operation === operation);\n\n    if (operationMetrics.length === 0) {\n      return this.getStats();\n    }\n\n    const durations = operationMetrics.map((m) => m.duration);\n    const errors = operationMetrics.filter((m) => m.error).length;\n    const cacheHits = operationMetrics.filter((m) => m.cacheHit === true).length;\n\n    return {\n      totalOperations: operationMetrics.length,\n      averageDuration: durations.reduce((a, b) => a + b, 0) / durations.length,\n      minDuration: Math.min(...durations),\n      maxDuration: Math.max(...durations),\n      errorRate: errors / operationMetrics.length,\n      cacheHitRate: cacheHits / operationMetrics.length,\n      memoryUsage: {\n        current: this.getMemoryUsage().heapUsed,\n        peak: this.memoryPeak,\n        average: 0,\n      },\n    };\n  }\n\n  /**\n   * Get recent metrics\n   */\n  getRecentMetrics(count: number = 50): PerformanceMetrics[] {\n    return this.metrics.slice(-count);\n  }\n\n  /**\n   * Clear all metrics\n   */\n  clear(): void {\n    this.metrics = [];\n    this.memoryPeak = 0;\n  }\n\n  /**\n   * Enable or disable monitoring\n   */\n  setEnabled(enabled: boolean): void {\n    this.isEnabled = enabled;\n  }\n\n  /**\n   * Get current memory usage\n   */\n  getMemoryUsage(): MemoryUsage {\n    return process.memoryUsage();\n  }\n\n  /**\n   * Get comprehensive performance report\n   */\n  getPerformanceReport(): {\n    stats: PerformanceStats;\n    cacheStats: ReturnType<typeof getCacheStats>;\n    memoryUsage: MemoryUsage;\n    recommendations: string[];\n  } {\n    const stats = this.getStats();\n    const cacheStats = getCacheStats();\n    const memoryUsage = this.getMemoryUsage();\n    const recommendations: string[] = [];\n\n    // Performance recommendations\n    if (stats.averageDuration > 1000) {\n      recommendations.push('Consider optimizing slow operations (>1s average)');\n    }\n\n    if (stats.errorRate > 0.1) {\n      recommendations.push('High error rate detected - investigate error handling');\n    }\n\n    if (stats.cacheHitRate < 0.5) {\n      recommendations.push('Low cache hit rate - consider improving caching strategy');\n    }\n\n    if (memoryUsage.heapUsed > 100 * 1024 * 1024) {\n      // 100MB\n      recommendations.push('High memory usage - consider memory optimization');\n    }\n\n    if (cacheStats.totalMemoryUsage > 50 * 1024 * 1024) {\n      // 50MB\n      recommendations.push('Cache memory usage is high - consider reducing cache size');\n    }\n\n    return {\n      stats,\n      cacheStats,\n      memoryUsage,\n      recommendations,\n    };\n  }\n}\n\n/**\n * Global performance monitor instance\n */\nexport const performanceMonitor = new PerformanceMonitor();\n\n/**\n * Performance decorator for methods\n */\nexport function measurePerformance(operationName: string) {\n  return function (_target: any, propertyName: string, descriptor: PropertyDescriptor) {\n    const method = descriptor.value;\n\n    descriptor.value = async function (...args: any[]) {\n      const endTiming = performanceMonitor.startTiming(`${operationName}.${propertyName}`);\n\n      try {\n        const result = await method.apply(this, args);\n        endTiming();\n        return result;\n      } catch (error) {\n        endTiming(error instanceof Error ? error.message : 'Unknown error');\n        throw error;\n      }\n    };\n  };\n}\n\n/**\n * Utility function to measure async operations\n */\nexport async function measureAsync<T>(\n  operation: string,\n  fn: () => Promise<T>,\n  cacheHit?: boolean\n): Promise<T> {\n  const endTiming = performanceMonitor.startTiming(operation);\n\n  try {\n    const result = await fn();\n    endTiming(undefined, cacheHit);\n    return result;\n  } catch (error) {\n    endTiming(error instanceof Error ? error.message : 'Unknown error', cacheHit);\n    throw error;\n  }\n}\n\n/**\n * Utility function to measure sync operations\n */\nexport function measureSync<T>(operation: string, fn: () => T, cacheHit?: boolean): T {\n  const endTiming = performanceMonitor.startTiming(operation);\n\n  try {\n    const result = fn();\n    endTiming(undefined, cacheHit);\n    return result;\n  } catch (error) {\n    endTiming(error instanceof Error ? error.message : 'Unknown error', cacheHit);\n    throw error;\n  }\n}\n\n/**\n * Debounce function with performance tracking\n */\nexport function debounce<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number,\n  operation: string = 'debounced'\n): (...args: Parameters<T>) => void {\n  let timeout: NodeJS.Timeout;\n\n  return (...args: Parameters<T>) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      measureSync(operation, () => func(...args));\n    }, wait);\n  };\n}\n\n/**\n * Throttle function with performance tracking\n */\nexport function throttle<T extends (...args: any[]) => any>(\n  func: T,\n  limit: number,\n  operation: string = 'throttled'\n): (...args: Parameters<T>) => void {\n  let inThrottle: boolean;\n\n  return (...args: Parameters<T>) => {\n    if (!inThrottle) {\n      measureSync(operation, () => func(...args));\n      inThrottle = true;\n      setTimeout(() => (inThrottle = false), limit);\n    }\n  };\n}\n\n/**\n * Memory usage utilities\n */\nexport class MemoryOptimizer {\n  private static readonly GC_THRESHOLD = 50 * 1024 * 1024; // 50MB\n  private static lastGC = 0;\n  private static readonly GC_INTERVAL = 30000; // 30 seconds\n\n  /**\n   * Force garbage collection if needed\n   */\n  static forceGCIfNeeded(): boolean {\n    const memoryUsage = performanceMonitor.getMemoryUsage();\n    const now = Date.now();\n\n    if (memoryUsage.heapUsed > this.GC_THRESHOLD && now - this.lastGC > this.GC_INTERVAL) {\n      if (global.gc) {\n        global.gc();\n        this.lastGC = now;\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Get memory usage summary\n   */\n  static getMemorySummary(): {\n    current: MemoryUsage;\n    peak: number;\n    recommendations: string[];\n  } {\n    const current = performanceMonitor.getMemoryUsage();\n    const peak = performanceMonitor.getStats().memoryUsage.peak;\n    const recommendations: string[] = [];\n\n    if (current.heapUsed > 100 * 1024 * 1024) {\n      // 100MB\n      recommendations.push('Consider reducing memory usage');\n    }\n\n    if (current.external > 50 * 1024 * 1024) {\n      // 50MB\n      recommendations.push('High external memory usage - check for memory leaks');\n    }\n\n    return {\n      current,\n      peak,\n      recommendations,\n    };\n  }\n}\n\n/**\n * Performance optimization utilities\n */\nexport class PerformanceOptimizer {\n  /**\n   * Optimize work item loading with batching\n   */\n  static async batchWorkItems<T>(\n    items: T[],\n    batchSize: number = 50,\n    processor: (batch: T[]) => Promise<any[]>\n  ): Promise<any[]> {\n    const results: any[] = [];\n\n    for (let i = 0; i < items.length; i += batchSize) {\n      const batch = items.slice(i, i + batchSize);\n      const batchResults = await measureAsync(`batchWorkItems.${batchSize}`, () =>\n        processor(batch)\n      );\n      results.push(...batchResults);\n    }\n\n    return results;\n  }\n\n  /**\n   * Optimize API calls with request batching\n   */\n  static async batchApiCalls<T>(\n    calls: (() => Promise<T>)[],\n    concurrency: number = 5\n  ): Promise<T[]> {\n    const results: T[] = [];\n\n    for (let i = 0; i < calls.length; i += concurrency) {\n      const batch = calls.slice(i, i + concurrency);\n      const batchResults = await Promise.all(\n        batch.map((call) => measureAsync('batchApiCall', call))\n      );\n      results.push(...batchResults);\n    }\n\n    return results;\n  }\n\n  /**\n   * Optimize data processing with chunking\n   */\n  static processInChunks<T, R>(\n    data: T[],\n    chunkSize: number = 1000,\n    processor: (chunk: T[]) => R[]\n  ): R[] {\n    const results: R[] = [];\n\n    for (let i = 0; i < data.length; i += chunkSize) {\n      const chunk = data.slice(i, i + chunkSize);\n      const chunkResults = measureSync(`processInChunks.${chunkSize}`, () => processor(chunk));\n      results.push(...chunkResults);\n    }\n\n    return results;\n  }\n}\n", "/**\n * Praxis Connection Types\n *\n * Type definitions for the Praxis-based connection implementation.\n * These types mirror the XState connection context and events for seamless migration.\n */\n\nimport type { AuthMethod } from '../auth/types.js';\n\n/**\n * Connection state values\n */\nexport type PraxisConnectionState =\n  | 'disconnected'\n  | 'authenticating'\n  | 'creating_client'\n  | 'creating_provider'\n  | 'connected'\n  | 'auth_failed'\n  | 'client_failed'\n  | 'provider_failed'\n  | 'connection_error'\n  | 'token_refresh';\n\n/**\n * Project connection configuration\n */\nexport interface ProjectConnection {\n  id: string;\n  organization: string;\n  project: string;\n  label?: string;\n  team?: string;\n  authMethod?: AuthMethod;\n  patKey?: string;\n  tenantId?: string;\n  baseUrl?: string;\n  apiBaseUrl?: string;\n  identityName?: string;\n  clientId?: string;\n}\n\n/**\n * Connection context - the source of truth for connection state\n */\nexport interface PraxisConnectionContext {\n  connectionId: string;\n  config: ProjectConnection;\n  authMethod: AuthMethod;\n  isConnected: boolean;\n  retryCount: number;\n  refreshFailureCount: number;\n  reauthInProgress: boolean;\n  forceInteractive: boolean;\n\n  // Authentication data\n  credential?: string;\n  pat?: string;\n  accessToken?: string;\n  accessTokenExpiresAt?: number;\n\n  // Client and provider references (opaque in Praxis)\n  client?: unknown;\n  provider?: unknown;\n\n  // Error tracking\n  lastError?: string;\n  lastRefreshFailure?: Date;\n  refreshBackoffUntil?: Date;\n}\n\n/**\n * Connection result - returned after connection operations\n */\nexport interface PraxisConnectionResult {\n  success: boolean;\n  connectionId: string;\n  isConnected: boolean;\n  error?: string;\n}\n\n/**\n * Connection snapshot for external consumption\n */\nexport interface PraxisConnectionSnapshot {\n  state: PraxisConnectionState;\n  connectionId: string;\n  isConnected: boolean;\n  authMethod: AuthMethod;\n  hasClient: boolean;\n  hasProvider: boolean;\n  error?: string;\n  retryCount: number;\n}\n\n/**\n * Default connection configuration\n */\nexport const DEFAULT_CONNECTION_CONFIG = {\n  maxRetryCount: 3,\n  retryDelayMs: 1000,\n  refreshBackoffMinutes: 5,\n  maxRefreshBackoffMinutes: 60,\n} as const;\n", "// src/core/pluresdb/adapter.ts\nvar InMemoryPraxisDB = class {\n  store = /* @__PURE__ */ new Map();\n  watchers = /* @__PURE__ */ new Map();\n  async get(key) {\n    return this.store.get(key);\n  }\n  async set(key, value) {\n    this.store.set(key, value);\n    const keyWatchers = this.watchers.get(key);\n    if (keyWatchers) {\n      for (const callback of keyWatchers) {\n        callback(value);\n      }\n    }\n  }\n  watch(key, callback) {\n    if (!this.watchers.has(key)) {\n      this.watchers.set(key, /* @__PURE__ */ new Set());\n    }\n    const watchers = this.watchers.get(key);\n    const wrappedCallback = (val) => callback(val);\n    watchers.add(wrappedCallback);\n    return () => {\n      watchers.delete(wrappedCallback);\n      if (watchers.size === 0) {\n        this.watchers.delete(key);\n      }\n    };\n  }\n  /**\n   * Get all keys (for testing/debugging)\n   */\n  keys() {\n    return Array.from(this.store.keys());\n  }\n  /**\n   * Clear all data (for testing)\n   */\n  clear() {\n    this.store.clear();\n    this.watchers.clear();\n  }\n};\nfunction createInMemoryDB() {\n  return new InMemoryPraxisDB();\n}\nvar PluresDBPraxisAdapter = class {\n  db;\n  watchers = /* @__PURE__ */ new Map();\n  pollIntervals = /* @__PURE__ */ new Map();\n  lastValues = /* @__PURE__ */ new Map();\n  pollInterval;\n  constructor(config) {\n    if (\"get\" in config && \"put\" in config) {\n      this.db = config;\n      this.pollInterval = 1e3;\n    } else {\n      this.db = config.db;\n      this.pollInterval = config.pollInterval ?? 1e3;\n    }\n  }\n  async get(key) {\n    try {\n      const value = await this.db.get(key);\n      return value;\n    } catch (error) {\n      return void 0;\n    }\n  }\n  async set(key, value) {\n    await this.db.put(key, value);\n    this.lastValues.set(key, value);\n    const keyWatchers = this.watchers.get(key);\n    if (keyWatchers) {\n      for (const callback of keyWatchers) {\n        callback(value);\n      }\n    }\n  }\n  watch(key, callback) {\n    if (!this.watchers.has(key)) {\n      this.watchers.set(key, /* @__PURE__ */ new Set());\n    }\n    const watchers = this.watchers.get(key);\n    const wrappedCallback = (val) => callback(val);\n    watchers.add(wrappedCallback);\n    if (!this.pollIntervals.has(key)) {\n      const interval = setInterval(async () => {\n        try {\n          const value = await this.db.get(key);\n          const lastValue = this.lastValues.get(key);\n          if (JSON.stringify(value) !== JSON.stringify(lastValue)) {\n            this.lastValues.set(key, value);\n            const currentWatchers = this.watchers.get(key);\n            if (currentWatchers) {\n              for (const cb of currentWatchers) {\n                cb(value);\n              }\n            }\n          }\n        } catch (error) {\n        }\n      }, this.pollInterval);\n      this.pollIntervals.set(key, interval);\n    }\n    return () => {\n      watchers.delete(wrappedCallback);\n      if (watchers.size === 0) {\n        this.watchers.delete(key);\n        const interval = this.pollIntervals.get(key);\n        if (interval) {\n          clearInterval(interval);\n          this.pollIntervals.delete(key);\n        }\n        this.lastValues.delete(key);\n      }\n    };\n  }\n  /**\n   * Clean up all resources\n   */\n  dispose() {\n    for (const interval of this.pollIntervals.values()) {\n      clearInterval(interval);\n    }\n    this.pollIntervals.clear();\n    this.watchers.clear();\n    this.lastValues.clear();\n  }\n};\nfunction createPluresDB(config) {\n  return new PluresDBPraxisAdapter(config);\n}\n\nexport {\n  InMemoryPraxisDB,\n  createInMemoryDB,\n  PluresDBPraxisAdapter,\n  createPluresDB\n};\n", "// src/integrations/state-docs.ts\nvar StateDocsGenerator = class {\n  config;\n  constructor(config) {\n    this.config = {\n      target: \"./docs\",\n      globs: [\"**/*.ts\", \"**/*.js\"],\n      visualization: {\n        format: \"mermaid\",\n        exportPng: false,\n        theme: \"default\"\n      },\n      template: {\n        toc: true,\n        timestamp: true\n      },\n      ...config\n    };\n  }\n  /**\n   * Generate documentation from a Praxis schema\n   */\n  generateFromSchema(schema) {\n    const docs = [];\n    docs.push(this.generateSchemaReadme(schema));\n    if (schema.models && schema.models.length > 0) {\n      docs.push(this.generateModelsDoc(schema));\n    }\n    if (schema.components && schema.components.length > 0) {\n      docs.push(this.generateComponentsDoc(schema));\n    }\n    if (schema.logic && schema.logic.length > 0) {\n      for (const logic of schema.logic) {\n        docs.push(this.generateLogicDoc(logic));\n        docs.push(this.generateLogicDiagram(logic));\n      }\n    }\n    return docs;\n  }\n  /**\n   * Generate documentation from a Praxis registry\n   */\n  generateFromModule(module) {\n    const docs = [];\n    const rules = module.rules;\n    const constraints = module.constraints;\n    docs.push(this.generateRulesDoc(rules));\n    docs.push(this.generateConstraintsDoc(constraints));\n    docs.push(this.generateRegistryDiagram(rules, constraints));\n    return docs;\n  }\n  /**\n   * Generate the main schema README\n   */\n  generateSchemaReadme(schema) {\n    const lines = [];\n    if (this.config.template?.header) {\n      lines.push(this.config.template.header);\n      lines.push(\"\");\n    }\n    lines.push(`# ${schema.name || this.config.projectTitle}`);\n    lines.push(\"\");\n    if (schema.description) {\n      lines.push(schema.description);\n      lines.push(\"\");\n    }\n    if (this.config.template?.toc) {\n      lines.push(\"## Table of Contents\");\n      lines.push(\"\");\n      lines.push(\"- [Overview](#overview)\");\n      if (schema.models && schema.models.length > 0) {\n        lines.push(\"- [Models](#models)\");\n      }\n      if (schema.components && schema.components.length > 0) {\n        lines.push(\"- [Components](#components)\");\n      }\n      if (schema.logic && schema.logic.length > 0) {\n        lines.push(\"- [Logic](#logic)\");\n      }\n      lines.push(\"\");\n    }\n    lines.push(\"## Overview\");\n    lines.push(\"\");\n    lines.push(`**Version:** ${schema.version}`);\n    lines.push(\"\");\n    lines.push(\"### Statistics\");\n    lines.push(\"\");\n    lines.push(\"| Category | Count |\");\n    lines.push(\"|----------|-------|\");\n    lines.push(`| Models | ${schema.models?.length || 0} |`);\n    lines.push(`| Components | ${schema.components?.length || 0} |`);\n    lines.push(`| Logic Modules | ${schema.logic?.length || 0} |`);\n    lines.push(\"\");\n    if (schema.models && schema.models.length > 0) {\n      lines.push(\"## Models\");\n      lines.push(\"\");\n      for (const model of schema.models) {\n        lines.push(`### ${model.name}`);\n        lines.push(\"\");\n        if (model.description) {\n          lines.push(model.description);\n          lines.push(\"\");\n        }\n        lines.push(\"**Fields:**\");\n        lines.push(\"\");\n        lines.push(\"| Name | Type | Required |\");\n        lines.push(\"|------|------|----------|\");\n        for (const field of model.fields) {\n          const required = field.optional ? \"No\" : \"Yes\";\n          lines.push(`| ${field.name} | ${field.type} | ${required} |`);\n        }\n        lines.push(\"\");\n      }\n    }\n    if (schema.components && schema.components.length > 0) {\n      lines.push(\"## Components\");\n      lines.push(\"\");\n      for (const component of schema.components) {\n        lines.push(`### ${component.name}`);\n        lines.push(\"\");\n        lines.push(`**Type:** ${component.type}`);\n        lines.push(\"\");\n        if (component.description) {\n          lines.push(component.description);\n          lines.push(\"\");\n        }\n        if (component.model) {\n          lines.push(`**Model:** ${component.model}`);\n          lines.push(\"\");\n        }\n      }\n    }\n    if (schema.logic && schema.logic.length > 0) {\n      lines.push(\"## Logic\");\n      lines.push(\"\");\n      for (const logic of schema.logic) {\n        lines.push(`### ${logic.id}`);\n        lines.push(\"\");\n        if (logic.description) {\n          lines.push(logic.description);\n          lines.push(\"\");\n        }\n        if (logic.events && logic.events.length > 0) {\n          lines.push(\"**Events:**\");\n          lines.push(\"\");\n          for (const event of logic.events) {\n            lines.push(`- \\`${event.tag}\\`: ${event.description || \"\"}`);\n          }\n          lines.push(\"\");\n        }\n        if (logic.facts && logic.facts.length > 0) {\n          lines.push(\"**Facts:**\");\n          lines.push(\"\");\n          for (const fact of logic.facts) {\n            lines.push(`- \\`${fact.tag}\\`: ${fact.description || \"\"}`);\n          }\n          lines.push(\"\");\n        }\n        if (logic.rules && logic.rules.length > 0) {\n          lines.push(\"**Rules:**\");\n          lines.push(\"\");\n          for (const rule of logic.rules) {\n            lines.push(`- \\`${rule.id}\\`: ${rule.description || \"\"}`);\n          }\n          lines.push(\"\");\n        }\n      }\n    }\n    if (this.config.template?.timestamp) {\n      lines.push(\"---\");\n      lines.push(\"\");\n      lines.push(`*Generated on ${(/* @__PURE__ */ new Date()).toISOString()} by State-Docs*`);\n    }\n    if (this.config.template?.footer) {\n      lines.push(\"\");\n      lines.push(this.config.template.footer);\n    }\n    return {\n      path: `${this.config.target}/README.md`,\n      content: lines.join(\"\\n\"),\n      type: \"markdown\"\n    };\n  }\n  /**\n   * Generate models documentation\n   */\n  generateModelsDoc(schema) {\n    const lines = [\n      \"# Models\",\n      \"\",\n      \"This document describes all data models defined in the schema.\",\n      \"\"\n    ];\n    if (schema.models) {\n      for (const model of schema.models) {\n        lines.push(`## ${model.name}`);\n        lines.push(\"\");\n        if (model.description) {\n          lines.push(model.description);\n          lines.push(\"\");\n        }\n        lines.push(\"### Fields\");\n        lines.push(\"\");\n        lines.push(\"| Name | Type | Required | Description |\");\n        lines.push(\"|------|------|----------|-------------|\");\n        for (const field of model.fields) {\n          const required = field.optional ? \"No\" : \"Yes\";\n          const description = field.description || \"-\";\n          lines.push(`| ${field.name} | \\`${field.type}\\` | ${required} | ${description} |`);\n        }\n        lines.push(\"\");\n        if (model.indexes && model.indexes.length > 0) {\n          lines.push(\"### Indexes\");\n          lines.push(\"\");\n          for (const index of model.indexes) {\n            lines.push(`- **${index.name}**: \\`${index.fields.join(\", \")}\\``);\n          }\n          lines.push(\"\");\n        }\n      }\n    }\n    return {\n      path: `${this.config.target}/models.md`,\n      content: lines.join(\"\\n\"),\n      type: \"markdown\"\n    };\n  }\n  /**\n   * Generate components documentation\n   */\n  generateComponentsDoc(schema) {\n    const lines = [\n      \"# Components\",\n      \"\",\n      \"This document describes all UI components defined in the schema.\",\n      \"\"\n    ];\n    if (schema.components) {\n      for (const component of schema.components) {\n        lines.push(`## ${component.name}`);\n        lines.push(\"\");\n        lines.push(`**Type:** ${component.type}`);\n        lines.push(\"\");\n        if (component.description) {\n          lines.push(component.description);\n          lines.push(\"\");\n        }\n        if (component.model) {\n          lines.push(\n            `**Associated Model:** [${component.model}](./models.md#${component.model.toLowerCase()})`\n          );\n          lines.push(\"\");\n        }\n      }\n    }\n    return {\n      path: `${this.config.target}/components.md`,\n      content: lines.join(\"\\n\"),\n      type: \"markdown\"\n    };\n  }\n  /**\n   * Generate logic documentation\n   */\n  generateLogicDoc(logic) {\n    const lines = [`# ${logic.id}`, \"\"];\n    if (logic.description) {\n      lines.push(logic.description);\n      lines.push(\"\");\n    }\n    if (logic.events && logic.events.length > 0) {\n      lines.push(\"## Events\");\n      lines.push(\"\");\n      lines.push(\"| Event | Description | Payload |\");\n      lines.push(\"|-------|-------------|---------|\");\n      for (const event of logic.events) {\n        const payload = event.payload ? Object.entries(event.payload).map(([k, v]) => `${k}: ${v}`).join(\", \") : \"-\";\n        lines.push(`| \\`${event.tag}\\` | ${event.description || \"-\"} | ${payload} |`);\n      }\n      lines.push(\"\");\n    }\n    if (logic.facts && logic.facts.length > 0) {\n      lines.push(\"## Facts\");\n      lines.push(\"\");\n      lines.push(\"| Fact | Description | Payload |\");\n      lines.push(\"|------|-------------|---------|\");\n      for (const fact of logic.facts) {\n        const payload = fact.payload ? Object.entries(fact.payload).map(([k, v]) => `${k}: ${v}`).join(\", \") : \"-\";\n        lines.push(`| \\`${fact.tag}\\` | ${fact.description || \"-\"} | ${payload} |`);\n      }\n      lines.push(\"\");\n    }\n    if (logic.rules && logic.rules.length > 0) {\n      lines.push(\"## Rules\");\n      lines.push(\"\");\n      for (const rule of logic.rules) {\n        lines.push(`### ${rule.id}`);\n        lines.push(\"\");\n        if (rule.description) {\n          lines.push(rule.description);\n          lines.push(\"\");\n        }\n        if (rule.priority !== void 0) {\n          lines.push(`**Priority:** ${rule.priority}`);\n          lines.push(\"\");\n        }\n      }\n    }\n    if (logic.constraints && logic.constraints.length > 0) {\n      lines.push(\"## Constraints\");\n      lines.push(\"\");\n      for (const constraint of logic.constraints) {\n        lines.push(`### ${constraint.id}`);\n        lines.push(\"\");\n        if (constraint.description) {\n          lines.push(constraint.description);\n          lines.push(\"\");\n        }\n        if (constraint.message) {\n          lines.push(`**Error Message:** ${constraint.message}`);\n          lines.push(\"\");\n        }\n      }\n    }\n    return {\n      path: `${this.config.target}/logic/${logic.id}.md`,\n      content: lines.join(\"\\n\"),\n      type: \"markdown\"\n    };\n  }\n  /**\n   * Generate Mermaid diagram for logic\n   */\n  generateLogicDiagram(logic) {\n    const lines = [\"stateDiagram-v2\"];\n    if (logic.events && logic.facts) {\n      lines.push(\"    [*] --> Processing\");\n      for (const event of logic.events) {\n        lines.push(`    Processing --> ${event.tag.replace(/[^a-zA-Z0-9]/g, \"\")}: ${event.tag}`);\n      }\n      for (const fact of logic.facts) {\n        lines.push(`    ${fact.tag.replace(/[^a-zA-Z0-9]/g, \"\")} --> [*]`);\n      }\n    }\n    return {\n      path: `${this.config.target}/logic/${logic.id}.mmd`,\n      content: lines.join(\"\\n\"),\n      type: \"mermaid\"\n    };\n  }\n  /**\n   * Generate rules documentation\n   */\n  generateRulesDoc(rules) {\n    const lines = [\n      \"# Rules\",\n      \"\",\n      \"This document describes all rules registered in the Praxis engine.\",\n      \"\"\n    ];\n    for (const rule of rules) {\n      lines.push(`## ${rule.id}`);\n      lines.push(\"\");\n      if (rule.description) {\n        lines.push(rule.description);\n        lines.push(\"\");\n      }\n      if (rule.meta?.eventType) {\n        lines.push(`**Triggers on:** \\`${rule.meta.eventType}\\``);\n        lines.push(\"\");\n      }\n      if (rule.meta?.priority !== void 0) {\n        lines.push(`**Priority:** ${rule.meta.priority}`);\n        lines.push(\"\");\n      }\n    }\n    return {\n      path: `${this.config.target}/rules.md`,\n      content: lines.join(\"\\n\"),\n      type: \"markdown\"\n    };\n  }\n  /**\n   * Generate constraints documentation\n   */\n  generateConstraintsDoc(constraints) {\n    const lines = [\n      \"# Constraints\",\n      \"\",\n      \"This document describes all constraints (invariants) registered in the Praxis engine.\",\n      \"\"\n    ];\n    for (const constraint of constraints) {\n      lines.push(`## ${constraint.id}`);\n      lines.push(\"\");\n      if (constraint.description) {\n        lines.push(constraint.description);\n        lines.push(\"\");\n      }\n      if (constraint.meta?.errorMessage) {\n        lines.push(`**Error Message:** ${constraint.meta.errorMessage}`);\n        lines.push(\"\");\n      }\n    }\n    return {\n      path: `${this.config.target}/constraints.md`,\n      content: lines.join(\"\\n\"),\n      type: \"markdown\"\n    };\n  }\n  /**\n   * Generate state diagram from registry\n   */\n  generateRegistryDiagram(rules, constraints) {\n    const lines = [\"graph TD\", \"    subgraph Rules\"];\n    for (const rule of rules) {\n      const id = rule.id.replace(/[^a-zA-Z0-9]/g, \"_\");\n      lines.push(`        ${id}[\"${rule.id}\"]`);\n    }\n    lines.push(\"    end\");\n    lines.push(\"    subgraph Constraints\");\n    for (const constraint of constraints) {\n      const id = constraint.id.replace(/[^a-zA-Z0-9]/g, \"_\");\n      lines.push(`        ${id}[\"${constraint.id}\"]`);\n    }\n    lines.push(\"    end\");\n    return {\n      path: `${this.config.target}/state-diagram.mmd`,\n      content: lines.join(\"\\n\"),\n      type: \"mermaid\"\n    };\n  }\n};\nfunction createStateDocsGenerator(config) {\n  return new StateDocsGenerator(config);\n}\nfunction generateDocs(schema, config) {\n  const generator = createStateDocsGenerator(config);\n  return generator.generateFromSchema(schema);\n}\n\nexport {\n  StateDocsGenerator,\n  createStateDocsGenerator,\n  generateDocs\n};\n", "// src/integrations/code-canvas.ts\nfunction schemaToCanvas(schema, _options = {}) {\n  const nodes = [];\n  const edges = [];\n  let nodeId = 0;\n  let yOffset = 0;\n  const xSpacing = 200;\n  const ySpacing = 100;\n  if (schema.models) {\n    schema.models.forEach((model, index) => {\n      const pos = model.position && (model.position.x !== 0 || model.position.y !== 0) ? model.position : { x: 50, y: yOffset + index * ySpacing };\n      const node = {\n        id: model.id || `model-${nodeId++}`,\n        type: \"model\",\n        label: model.name,\n        x: pos.x,\n        y: pos.y,\n        width: 150,\n        height: 60,\n        data: model,\n        style: {\n          backgroundColor: \"#e3f2fd\",\n          borderColor: \"#1976d2\"\n        }\n      };\n      nodes.push(node);\n    });\n    yOffset += schema.models.length * ySpacing + 50;\n  }\n  if (schema.components) {\n    schema.components.forEach((component, index) => {\n      const pos = component.position && (component.position.x !== 0 || component.position.y !== 0) ? component.position : { x: 50 + xSpacing, y: yOffset + index * ySpacing };\n      const node = {\n        id: component.id || `component-${nodeId++}`,\n        type: \"component\",\n        label: component.name,\n        x: pos.x,\n        y: pos.y,\n        width: 150,\n        height: 60,\n        data: component,\n        style: {\n          backgroundColor: \"#e8f5e9\",\n          borderColor: \"#388e3c\"\n        }\n      };\n      nodes.push(node);\n      if (component.model) {\n        const modelNode = nodes.find((n) => n.type === \"model\" && n.label === component.model);\n        if (modelNode) {\n          edges.push({\n            id: `edge-${edges.length}`,\n            source: node.id,\n            target: modelNode.id,\n            type: \"reference\",\n            label: \"uses\"\n          });\n        }\n      }\n    });\n    yOffset += schema.components.length * ySpacing + 50;\n  }\n  if (schema.events) {\n    schema.events.forEach((event, index) => {\n      const pos = event.position && (event.position.x !== 0 || event.position.y !== 0) ? event.position : { x: 50 + xSpacing * 2, y: yOffset + index * ySpacing };\n      const node = {\n        id: event.id || `event-${nodeId++}`,\n        type: \"event\",\n        label: event.tag,\n        x: pos.x,\n        y: pos.y,\n        width: 150,\n        height: 50,\n        data: event,\n        style: {\n          backgroundColor: \"#fff3e0\",\n          borderColor: \"#f57c00\"\n        }\n      };\n      nodes.push(node);\n    });\n    yOffset += schema.events.length * ySpacing + 30;\n  }\n  if (schema.facts) {\n    schema.facts.forEach((fact, index) => {\n      const pos = fact.position && (fact.position.x !== 0 || fact.position.y !== 0) ? fact.position : { x: 50 + xSpacing * 3, y: yOffset + index * ySpacing };\n      const node = {\n        id: fact.id || `fact-${nodeId++}`,\n        type: \"fact\",\n        label: fact.tag,\n        x: pos.x,\n        y: pos.y,\n        width: 150,\n        height: 50,\n        data: fact,\n        style: {\n          backgroundColor: \"#fce4ec\",\n          borderColor: \"#c2185b\"\n        }\n      };\n      nodes.push(node);\n    });\n    yOffset += schema.facts.length * ySpacing + 30;\n  }\n  if (schema.rules) {\n    schema.rules.forEach((rule, index) => {\n      const pos = rule.position && (rule.position.x !== 0 || rule.position.y !== 0) ? rule.position : { x: 50 + xSpacing * 4, y: yOffset + index * ySpacing };\n      const node = {\n        id: rule.id || `rule-${nodeId++}`,\n        type: \"rule\",\n        label: rule.id,\n        x: pos.x,\n        y: pos.y,\n        width: 150,\n        height: 50,\n        data: rule,\n        style: {\n          backgroundColor: \"#e1f5fe\",\n          borderColor: \"#0288d1\"\n        }\n      };\n      nodes.push(node);\n      if (rule.triggers) {\n        rule.triggers.forEach((trigger) => {\n          const eventNode = nodes.find((n) => n.type === \"event\" && n.label === trigger);\n          if (eventNode) {\n            edges.push({\n              id: `edge-${edges.length}`,\n              source: eventNode.id,\n              target: node.id,\n              type: \"event\",\n              label: \"triggers\"\n            });\n          }\n        });\n      }\n    });\n    yOffset += schema.rules.length * ySpacing + 30;\n  }\n  if (schema.constraints) {\n    schema.constraints.forEach((constraint, index) => {\n      const pos = constraint.position && (constraint.position.x !== 0 || constraint.position.y !== 0) ? constraint.position : { x: 50 + xSpacing * 5, y: yOffset + index * ySpacing };\n      const node = {\n        id: constraint.id || `constraint-${nodeId++}`,\n        type: \"constraint\",\n        label: constraint.id,\n        x: pos.x,\n        y: pos.y,\n        width: 150,\n        height: 50,\n        data: constraint,\n        style: {\n          backgroundColor: \"#ffebee\",\n          borderColor: \"#c62828\"\n        }\n      };\n      nodes.push(node);\n    });\n  }\n  return {\n    id: `canvas-${Date.now()}`,\n    name: schema.name || \"Praxis Schema\",\n    version: schema.$version || \"1.0.0\",\n    nodes,\n    edges,\n    flows: schema.flows || [],\n    metadata: {\n      created: Date.now(),\n      modified: Date.now(),\n      description: schema.description\n    },\n    viewport: { x: 0, y: 0, zoom: 1 }\n  };\n}\nfunction canvasToSchema(canvas) {\n  const models = [];\n  const components = [];\n  const events = [];\n  const facts = [];\n  const rules = [];\n  const constraints = [];\n  for (const node of canvas.nodes) {\n    const position = { x: node.x, y: node.y };\n    switch (node.type) {\n      case \"model\":\n        if (node.data) {\n          models.push({ ...node.data, position });\n        }\n        break;\n      case \"component\":\n        if (node.data) {\n          components.push({ ...node.data, position });\n        }\n        break;\n      case \"event\":\n        if (node.data) {\n          events.push({ ...node.data, position });\n        }\n        break;\n      case \"fact\":\n        if (node.data) {\n          facts.push({ ...node.data, position });\n        }\n        break;\n      case \"rule\":\n        if (node.data) {\n          rules.push({ ...node.data, position });\n        }\n        break;\n      case \"constraint\":\n        if (node.data) {\n          constraints.push({ ...node.data, position });\n        }\n        break;\n    }\n  }\n  return {\n    $version: \"1.0.0\",\n    id: canvas.id,\n    name: canvas.name,\n    description: canvas.metadata?.description,\n    models,\n    components,\n    events,\n    facts,\n    rules,\n    constraints,\n    flows: canvas.flows || [],\n    metadata: canvas.metadata\n  };\n}\nfunction canvasToYaml(canvas) {\n  const lines = [\n    `# ${canvas.name}`,\n    `# Generated by Praxis CodeCanvas Integration`,\n    `# Version: ${canvas.version}`,\n    \"\",\n    \"nodes:\"\n  ];\n  for (const node of canvas.nodes) {\n    lines.push(`  - id: \"${node.id}\"`);\n    lines.push(`    type: \"${node.type}\"`);\n    lines.push(`    label: \"${node.label}\"`);\n    lines.push(`    x: ${node.x}`);\n    lines.push(`    y: ${node.y}`);\n    lines.push(`    width: ${node.width}`);\n    lines.push(`    height: ${node.height}`);\n    if (node.fsmState) {\n      lines.push(`    fsmState: \"${node.fsmState}\"`);\n    }\n    lines.push(\"\");\n  }\n  lines.push(\"edges:\");\n  for (const edge of canvas.edges) {\n    lines.push(`  - id: \"${edge.id}\"`);\n    lines.push(`    source: \"${edge.source}\"`);\n    lines.push(`    target: \"${edge.target}\"`);\n    if (edge.label) {\n      lines.push(`    label: \"${edge.label}\"`);\n    }\n    if (edge.type) {\n      lines.push(`    type: \"${edge.type}\"`);\n    }\n    lines.push(\"\");\n  }\n  return lines.join(\"\\n\");\n}\nfunction canvasToMermaid(canvas) {\n  const lines = [\"graph TD\"];\n  for (const node of canvas.nodes) {\n    let shape;\n    switch (node.type) {\n      case \"model\":\n        shape = `[${node.label}]`;\n        break;\n      case \"component\":\n        shape = `(${node.label})`;\n        break;\n      case \"event\":\n        shape = `{{${node.label}}}`;\n        break;\n      case \"fact\":\n        shape = `((${node.label}))`;\n        break;\n      case \"rule\":\n        shape = `[/${node.label}/]`;\n        break;\n      case \"constraint\":\n        shape = `[\\\\${node.label}\\\\]`;\n        break;\n      default:\n        shape = `[${node.label}]`;\n    }\n    lines.push(`    ${node.id}${shape}`);\n  }\n  lines.push(\"\");\n  for (const edge of canvas.edges) {\n    const label = edge.label ? `|${edge.label}|` : \"\";\n    lines.push(`    ${edge.source} -->${label} ${edge.target}`);\n  }\n  return lines.join(\"\\n\");\n}\nfunction validateWithGuardian(files, activity, lifecycle) {\n  const errors = [];\n  const warnings = [];\n  const currentState = lifecycle.find((s) => s.id === activity.activity);\n  if (!currentState) {\n    errors.push({\n      code: \"INVALID_ACTIVITY\",\n      message: `Activity \"${activity.activity}\" is not a valid lifecycle state`,\n      rule: \"lifecycle-state\"\n    });\n  }\n  if (activity.allowedPaths) {\n    for (const file of files) {\n      const allowed = activity.allowedPaths.some((pattern) => {\n        const regex = new RegExp(\"^\" + pattern.replace(/\\*/g, \".*\") + \"$\");\n        return regex.test(file);\n      });\n      if (!allowed) {\n        errors.push({\n          code: \"PATH_NOT_ALLOWED\",\n          message: `File \"${file}\" is not allowed during \"${activity.activity}\" activity`,\n          file,\n          rule: \"allowed-paths\"\n        });\n      }\n    }\n  }\n  return {\n    valid: errors.length === 0,\n    errors,\n    warnings,\n    filesChecked: files,\n    activity\n  };\n}\nfunction createCanvasEditor(config) {\n  const document = config.document || (config.schema ? schemaToCanvas(config.schema, { layout: config.layout }) : {\n    id: `canvas-${Date.now()}`,\n    name: \"New Canvas\",\n    version: \"1.0.0\",\n    nodes: [],\n    edges: [],\n    metadata: { created: Date.now(), modified: Date.now() },\n    viewport: { x: 0, y: 0, zoom: 1 }\n  });\n  let nodeIdCounter = document.nodes.length;\n  let edgeIdCounter = document.edges.length;\n  return {\n    document,\n    addNode(node) {\n      const fullNode = {\n        ...node,\n        id: `node-${nodeIdCounter++}`\n      };\n      document.nodes.push(fullNode);\n      document.metadata.modified = Date.now();\n      return fullNode;\n    },\n    removeNode(id) {\n      const index = document.nodes.findIndex((n) => n.id === id);\n      if (index !== -1) {\n        document.nodes.splice(index, 1);\n        document.edges = document.edges.filter((e) => e.source !== id && e.target !== id);\n        document.metadata.modified = Date.now();\n      }\n    },\n    addEdge(edge) {\n      const fullEdge = {\n        ...edge,\n        id: `edge-${edgeIdCounter++}`\n      };\n      document.edges.push(fullEdge);\n      document.metadata.modified = Date.now();\n      return fullEdge;\n    },\n    removeEdge(id) {\n      const index = document.edges.findIndex((e) => e.id === id);\n      if (index !== -1) {\n        document.edges.splice(index, 1);\n        document.metadata.modified = Date.now();\n      }\n    },\n    toSchema() {\n      return canvasToSchema(document);\n    },\n    toYaml() {\n      return canvasToYaml(document);\n    },\n    toMermaid() {\n      return canvasToMermaid(document);\n    }\n  };\n}\n\nexport {\n  schemaToCanvas,\n  canvasToSchema,\n  canvasToYaml,\n  canvasToMermaid,\n  validateWithGuardian,\n  createCanvasEditor\n};\n", "// src/core/protocol.ts\nvar PRAXIS_PROTOCOL_VERSION = \"1.0.0\";\n\n// src/core/engine.ts\nfunction safeClone(value) {\n  if (value === null || typeof value !== \"object\") {\n    return value;\n  }\n  if (typeof globalThis.structuredClone === \"function\") {\n    try {\n      return globalThis.structuredClone(value);\n    } catch {\n    }\n  }\n  if (Array.isArray(value)) {\n    return [...value];\n  }\n  return { ...value };\n}\nvar LogicEngine = class {\n  state;\n  registry;\n  constructor(options) {\n    this.registry = options.registry;\n    this.state = {\n      context: options.initialContext,\n      facts: options.initialFacts ?? [],\n      meta: options.initialMeta ?? {},\n      protocolVersion: PRAXIS_PROTOCOL_VERSION\n    };\n  }\n  /**\n   * Get the current state (immutable copy)\n   */\n  getState() {\n    return {\n      context: safeClone(this.state.context),\n      facts: [...this.state.facts],\n      meta: this.state.meta ? safeClone(this.state.meta) : void 0,\n      protocolVersion: this.state.protocolVersion\n    };\n  }\n  /**\n   * Get the current context\n   */\n  getContext() {\n    return safeClone(this.state.context);\n  }\n  /**\n   * Get current facts\n   */\n  getFacts() {\n    return [...this.state.facts];\n  }\n  /**\n   * Process events through the engine.\n   * Applies all registered rules and checks all registered constraints.\n   *\n   * @param events Events to process\n   * @returns Result with new state and diagnostics\n   */\n  step(events) {\n    const config = {\n      ruleIds: this.registry.getRuleIds(),\n      constraintIds: this.registry.getConstraintIds()\n    };\n    return this.stepWithConfig(events, config);\n  }\n  /**\n   * Process events with specific rule and constraint configuration.\n   *\n   * @param events Events to process\n   * @param config Step configuration\n   * @returns Result with new state and diagnostics\n   */\n  stepWithConfig(events, config) {\n    const diagnostics = [];\n    let newState = { ...this.state };\n    const newFacts = [];\n    for (const ruleId of config.ruleIds) {\n      const rule = this.registry.getRule(ruleId);\n      if (!rule) {\n        diagnostics.push({\n          kind: \"rule-error\",\n          message: `Rule \"${ruleId}\" not found in registry`,\n          data: { ruleId }\n        });\n        continue;\n      }\n      try {\n        const ruleFacts = rule.impl(newState, events);\n        newFacts.push(...ruleFacts);\n      } catch (error) {\n        diagnostics.push({\n          kind: \"rule-error\",\n          message: `Error executing rule \"${ruleId}\": ${error instanceof Error ? error.message : String(error)}`,\n          data: { ruleId, error }\n        });\n      }\n    }\n    newState = {\n      ...newState,\n      facts: [...newState.facts, ...newFacts]\n    };\n    for (const constraintId of config.constraintIds) {\n      const constraint = this.registry.getConstraint(constraintId);\n      if (!constraint) {\n        diagnostics.push({\n          kind: \"constraint-violation\",\n          message: `Constraint \"${constraintId}\" not found in registry`,\n          data: { constraintId }\n        });\n        continue;\n      }\n      try {\n        const result = constraint.impl(newState);\n        if (result === false) {\n          diagnostics.push({\n            kind: \"constraint-violation\",\n            message: `Constraint \"${constraintId}\" violated`,\n            data: { constraintId, description: constraint.description }\n          });\n        } else if (typeof result === \"string\") {\n          diagnostics.push({\n            kind: \"constraint-violation\",\n            message: result,\n            data: { constraintId, description: constraint.description }\n          });\n        }\n      } catch (error) {\n        diagnostics.push({\n          kind: \"constraint-violation\",\n          message: `Error checking constraint \"${constraintId}\": ${error instanceof Error ? error.message : String(error)}`,\n          data: { constraintId, error }\n        });\n      }\n    }\n    this.state = newState;\n    return {\n      state: newState,\n      diagnostics\n    };\n  }\n  /**\n   * Update the context directly (for exceptional cases).\n   * Generally, context should be updated through rules.\n   *\n   * @param updater Function that produces new context from old context\n   */\n  updateContext(updater) {\n    this.state = {\n      ...this.state,\n      context: updater(this.state.context)\n    };\n  }\n  /**\n   * Add facts directly (for exceptional cases).\n   * Generally, facts should be added through rules.\n   *\n   * @param facts Facts to add\n   */\n  addFacts(facts) {\n    this.state = {\n      ...this.state,\n      facts: [...this.state.facts, ...facts]\n    };\n  }\n  /**\n   * Clear all facts\n   */\n  clearFacts() {\n    this.state = {\n      ...this.state,\n      facts: []\n    };\n  }\n  /**\n   * Reset the engine to initial state\n   */\n  reset(options) {\n    this.state = {\n      context: options.initialContext,\n      facts: options.initialFacts ?? [],\n      meta: options.initialMeta ?? {},\n      protocolVersion: PRAXIS_PROTOCOL_VERSION\n    };\n  }\n};\nfunction createPraxisEngine(options) {\n  return new LogicEngine(options);\n}\n\nexport {\n  PRAXIS_PROTOCOL_VERSION,\n  LogicEngine,\n  createPraxisEngine\n};\n", "export const EACH_ITEM_REACTIVE = 1;\nexport const EACH_INDEX_REACTIVE = 1 << 1;\n/** See EachBlock interface metadata.is_controlled for an explanation what this is */\nexport const EACH_IS_CONTROLLED = 1 << 2;\nexport const EACH_IS_ANIMATED = 1 << 3;\nexport const EACH_ITEM_IMMUTABLE = 1 << 4;\n\nexport const PROPS_IS_IMMUTABLE = 1;\nexport const PROPS_IS_RUNES = 1 << 1;\nexport const PROPS_IS_UPDATED = 1 << 2;\nexport const PROPS_IS_BINDABLE = 1 << 3;\nexport const PROPS_IS_LAZY_INITIAL = 1 << 4;\n\nexport const TRANSITION_IN = 1;\nexport const TRANSITION_OUT = 1 << 1;\nexport const TRANSITION_GLOBAL = 1 << 2;\n\nexport const TEMPLATE_FRAGMENT = 1;\nexport const TEMPLATE_USE_IMPORT_NODE = 1 << 1;\nexport const TEMPLATE_USE_SVG = 1 << 2;\nexport const TEMPLATE_USE_MATHML = 1 << 3;\n\nexport const HYDRATION_START = '[';\n/** used to indicate that an `{:else}...` block was rendered */\nexport const HYDRATION_START_ELSE = '[!';\nexport const HYDRATION_END = ']';\nexport const HYDRATION_ERROR = {};\n\nexport const ELEMENT_IS_NAMESPACED = 1;\nexport const ELEMENT_PRESERVE_ATTRIBUTE_CASE = 1 << 1;\nexport const ELEMENT_IS_INPUT = 1 << 2;\n\nexport const UNINITIALIZED = Symbol();\n\n// Dev-time component properties\nexport const FILENAME = Symbol('filename');\nexport const HMR = Symbol('hmr');\n\nexport const NAMESPACE_HTML = 'http://www.w3.org/1999/xhtml';\nexport const NAMESPACE_SVG = 'http://www.w3.org/2000/svg';\nexport const NAMESPACE_MATHML = 'http://www.w3.org/1998/Math/MathML';\n\n// we use a list of ignorable runtime warnings because not every runtime warning\n// can be ignored and we want to keep the validation for svelte-ignore in place\nexport const IGNORABLE_RUNTIME_WARNINGS = /** @type {const} */ ([\n\t'await_waterfall',\n\t'await_reactivity_loss',\n\t'state_snapshot_uncloneable',\n\t'binding_property_non_reactive',\n\t'hydration_attribute_changed',\n\t'hydration_html_changed',\n\t'ownership_invalid_binding',\n\t'ownership_invalid_mutation'\n]);\n\n/**\n * Whitespace inside one of these elements will not result in\n * a whitespace node being created in any circumstances. (This\n * list is almost certainly very incomplete)\n * TODO this is currently unused\n */\nexport const ELEMENTS_WITHOUT_TEXT = ['audio', 'datalist', 'dl', 'optgroup', 'select', 'video'];\n\nexport const ATTACHMENT_KEY = '@attach';\n", "export default typeof window !== 'undefined';\n", "const node_env = globalThis.process?.env?.NODE_ENV;\nexport default node_env && !node_env.toLowerCase().startsWith('prod');\n", "export default true;\n", "export { default as BROWSER } from 'esm-env/browser';\nexport { default as DEV } from 'esm-env/development';\nexport { default as NODE } from 'esm-env/node';\n", "// Store the references to globals in case someone tries to monkey patch these, causing the below\n// to de-opt (this occurs often when using popular extensions).\nexport var is_array = Array.isArray;\nexport var index_of = Array.prototype.indexOf;\nexport var array_from = Array.from;\nexport var object_keys = Object.keys;\nexport var define_property = Object.defineProperty;\nexport var get_descriptor = Object.getOwnPropertyDescriptor;\nexport var get_descriptors = Object.getOwnPropertyDescriptors;\nexport var object_prototype = Object.prototype;\nexport var array_prototype = Array.prototype;\nexport var get_prototype_of = Object.getPrototypeOf;\nexport var is_extensible = Object.isExtensible;\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\nexport const noop = () => {};\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n\n/**\n * @template [T=any]\n * @param {any} value\n * @returns {value is PromiseLike<T>}\n */\nexport function is_promise(value) {\n\treturn typeof value?.then === 'function';\n}\n\n/** @param {Function} fn */\nexport function run(fn) {\n\treturn fn();\n}\n\n/** @param {Array<() => void>} arr */\nexport function run_all(arr) {\n\tfor (var i = 0; i < arr.length; i++) {\n\t\tarr[i]();\n\t}\n}\n\n/**\n * TODO replace with Promise.withResolvers once supported widely enough\n * @template [T=void]\n */\nexport function deferred() {\n\t/** @type {(value: T) => void} */\n\tvar resolve;\n\n\t/** @type {(reason: any) => void} */\n\tvar reject;\n\n\t/** @type {Promise<T>} */\n\tvar promise = new Promise((res, rej) => {\n\t\tresolve = res;\n\t\treject = rej;\n\t});\n\n\t// @ts-expect-error\n\treturn { promise, resolve, reject };\n}\n\n/**\n * @template V\n * @param {V} value\n * @param {V | (() => V)} fallback\n * @param {boolean} [lazy]\n * @returns {V}\n */\nexport function fallback(value, fallback, lazy = false) {\n\treturn value === undefined\n\t\t? lazy\n\t\t\t? /** @type {() => V} */ (fallback)()\n\t\t\t: /** @type {V} */ (fallback)\n\t\t: value;\n}\n\n/**\n * When encountering a situation like `let [a, b, c] = $derived(blah())`,\n * we need to stash an intermediate value that `a`, `b`, and `c` derive\n * from, in case it's an iterable\n * @template T\n * @param {ArrayLike<T> | Iterable<T>} value\n * @param {number} [n]\n * @returns {Array<T>}\n */\nexport function to_array(value, n) {\n\t// return arrays unchanged\n\tif (Array.isArray(value)) {\n\t\treturn value;\n\t}\n\n\t// if value is not iterable, or `n` is unspecified (indicates a rest\n\t// element, which means we're not concerned about unbounded iterables)\n\t// convert to an array with `Array.from`\n\tif (n === undefined || !(Symbol.iterator in value)) {\n\t\treturn Array.from(value);\n\t}\n\n\t// otherwise, populate an array with `n` values\n\n\t/** @type {T[]} */\n\tconst array = [];\n\n\tfor (const element of value) {\n\t\tarray.push(element);\n\t\tif (array.length === n) break;\n\t}\n\n\treturn array;\n}\n", "// General flags\nexport const DERIVED = 1 << 1;\nexport const EFFECT = 1 << 2;\nexport const RENDER_EFFECT = 1 << 3;\n/**\n * An effect that does not destroy its child effects when it reruns.\n * Runs as part of render effects, i.e. not eagerly as part of tree traversal or effect flushing.\n */\nexport const MANAGED_EFFECT = 1 << 24;\n/**\n * An effect that does not destroy its child effects when it reruns (like MANAGED_EFFECT).\n * Runs eagerly as part of tree traversal or effect flushing.\n */\nexport const BLOCK_EFFECT = 1 << 4;\nexport const BRANCH_EFFECT = 1 << 5;\nexport const ROOT_EFFECT = 1 << 6;\nexport const BOUNDARY_EFFECT = 1 << 7;\n/**\n * Indicates that a reaction is connected to an effect root \u2014 either it is an effect,\n * or it is a derived that is depended on by at least one effect. If a derived has\n * no dependents, we can disconnect it from the graph, allowing it to either be\n * GC'd or reconnected later if an effect comes to depend on it again\n */\nexport const CONNECTED = 1 << 9;\nexport const CLEAN = 1 << 10;\nexport const DIRTY = 1 << 11;\nexport const MAYBE_DIRTY = 1 << 12;\nexport const INERT = 1 << 13;\nexport const DESTROYED = 1 << 14;\n\n// Flags exclusive to effects\n/** Set once an effect that should run synchronously has run */\nexport const EFFECT_RAN = 1 << 15;\n/**\n * 'Transparent' effects do not create a transition boundary.\n * This is on a block effect 99% of the time but may also be on a branch effect if its parent block effect was pruned\n */\nexport const EFFECT_TRANSPARENT = 1 << 16;\nexport const EAGER_EFFECT = 1 << 17;\nexport const HEAD_EFFECT = 1 << 18;\nexport const EFFECT_PRESERVED = 1 << 19;\nexport const USER_EFFECT = 1 << 20;\nexport const EFFECT_OFFSCREEN = 1 << 25;\n\n// Flags exclusive to deriveds\n/**\n * Tells that we marked this derived and its reactions as visited during the \"mark as (maybe) dirty\"-phase.\n * Will be lifted during execution of the derived and during checking its dirty state (both are necessary\n * because a derived might be checked but not executed).\n */\nexport const WAS_MARKED = 1 << 15;\n\n// Flags used for async\nexport const REACTION_IS_UPDATING = 1 << 21;\nexport const ASYNC = 1 << 22;\n\nexport const ERROR_VALUE = 1 << 23;\n\nexport const STATE_SYMBOL = Symbol('$state');\nexport const LEGACY_PROPS = Symbol('legacy props');\nexport const LOADING_ATTR_SYMBOL = Symbol('');\nexport const PROXY_PATH_SYMBOL = Symbol('proxy path');\n\n/** allow users to ignore aborted signal errors if `reason.name === 'StaleReactionError` */\nexport const STALE_REACTION = new (class StaleReactionError extends Error {\n\tname = 'StaleReactionError';\n\tmessage = 'The reaction that called `getAbortSignal()` was re-run or destroyed';\n})();\n\nexport const ELEMENT_NODE = 1;\nexport const TEXT_NODE = 3;\nexport const COMMENT_NODE = 8;\nexport const DOCUMENT_FRAGMENT_NODE = 11;\n", "/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\n/**\n * Cannot use `%name%(...)` unless the `experimental.async` compiler option is `true`\n * @param {string} name\n * @returns {never}\n */\nexport function experimental_async_required(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`experimental_async_required\\nCannot use \\`${name}(...)\\` unless the \\`experimental.async\\` compiler option is \\`true\\`\\nhttps://svelte.dev/e/experimental_async_required`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/experimental_async_required`);\n\t}\n}\n\n/**\n * Cannot use `{@render children(...)}` if the parent component uses `let:` directives. Consider using a named snippet instead\n * @returns {never}\n */\nexport function invalid_default_snippet() {\n\tif (DEV) {\n\t\tconst error = new Error(`invalid_default_snippet\\nCannot use \\`{@render children(...)}\\` if the parent component uses \\`let:\\` directives. Consider using a named snippet instead\\nhttps://svelte.dev/e/invalid_default_snippet`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/invalid_default_snippet`);\n\t}\n}\n\n/**\n * A snippet function was passed invalid arguments. Snippets should only be instantiated via `{@render ...}`\n * @returns {never}\n */\nexport function invalid_snippet_arguments() {\n\tif (DEV) {\n\t\tconst error = new Error(`invalid_snippet_arguments\\nA snippet function was passed invalid arguments. Snippets should only be instantiated via \\`{@render ...}\\`\\nhttps://svelte.dev/e/invalid_snippet_arguments`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/invalid_snippet_arguments`);\n\t}\n}\n\n/**\n * `%name%(...)` can only be used during component initialisation\n * @param {string} name\n * @returns {never}\n */\nexport function lifecycle_outside_component(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`lifecycle_outside_component\\n\\`${name}(...)\\` can only be used during component initialisation\\nhttps://svelte.dev/e/lifecycle_outside_component`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/lifecycle_outside_component`);\n\t}\n}\n\n/**\n * Context was not set in a parent component\n * @returns {never}\n */\nexport function missing_context() {\n\tif (DEV) {\n\t\tconst error = new Error(`missing_context\\nContext was not set in a parent component\\nhttps://svelte.dev/e/missing_context`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/missing_context`);\n\t}\n}\n\n/**\n * Attempted to render a snippet without a `{@render}` block. This would cause the snippet code to be stringified instead of its content being rendered to the DOM. To fix this, change `{snippet}` to `{@render snippet()}`.\n * @returns {never}\n */\nexport function snippet_without_render_tag() {\n\tif (DEV) {\n\t\tconst error = new Error(`snippet_without_render_tag\\nAttempted to render a snippet without a \\`{@render}\\` block. This would cause the snippet code to be stringified instead of its content being rendered to the DOM. To fix this, change \\`{snippet}\\` to \\`{@render snippet()}\\`.\\nhttps://svelte.dev/e/snippet_without_render_tag`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/snippet_without_render_tag`);\n\t}\n}\n\n/**\n * `%name%` is not a store with a `subscribe` method\n * @param {string} name\n * @returns {never}\n */\nexport function store_invalid_shape(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`store_invalid_shape\\n\\`${name}\\` is not a store with a \\`subscribe\\` method\\nhttps://svelte.dev/e/store_invalid_shape`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/store_invalid_shape`);\n\t}\n}\n\n/**\n * The `this` prop on `<svelte:element>` must be a string, if defined\n * @returns {never}\n */\nexport function svelte_element_invalid_this_value() {\n\tif (DEV) {\n\t\tconst error = new Error(`svelte_element_invalid_this_value\\nThe \\`this\\` prop on \\`<svelte:element>\\` must be a string, if defined\\nhttps://svelte.dev/e/svelte_element_invalid_this_value`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/svelte_element_invalid_this_value`);\n\t}\n}", "/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\nexport *  from '../shared/errors.js';\n\n/**\n * Cannot create a `$derived(...)` with an `await` expression outside of an effect tree\n * @returns {never}\n */\nexport function async_derived_orphan() {\n\tif (DEV) {\n\t\tconst error = new Error(`async_derived_orphan\\nCannot create a \\`$derived(...)\\` with an \\`await\\` expression outside of an effect tree\\nhttps://svelte.dev/e/async_derived_orphan`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/async_derived_orphan`);\n\t}\n}\n\n/**\n * Using `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\n * @returns {never}\n */\nexport function bind_invalid_checkbox_value() {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_invalid_checkbox_value\\nUsing \\`bind:value\\` together with a checkbox input is not allowed. Use \\`bind:checked\\` instead\\nhttps://svelte.dev/e/bind_invalid_checkbox_value`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_invalid_checkbox_value`);\n\t}\n}\n\n/**\n * Component %component% has an export named `%key%` that a consumer component is trying to access using `bind:%key%`, which is disallowed. Instead, use `bind:this` (e.g. `<%name% bind:this={component} />`) and then access the property on the bound component instance (e.g. `component.%key%`)\n * @param {string} component\n * @param {string} key\n * @param {string} name\n * @returns {never}\n */\nexport function bind_invalid_export(component, key, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_invalid_export\\nComponent ${component} has an export named \\`${key}\\` that a consumer component is trying to access using \\`bind:${key}\\`, which is disallowed. Instead, use \\`bind:this\\` (e.g. \\`<${name} bind:this={component} />\\`) and then access the property on the bound component instance (e.g. \\`component.${key}\\`)\\nhttps://svelte.dev/e/bind_invalid_export`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_invalid_export`);\n\t}\n}\n\n/**\n * A component is attempting to bind to a non-bindable property `%key%` belonging to %component% (i.e. `<%name% bind:%key%={...}>`). To mark a property as bindable: `let { %key% = $bindable() } = $props()`\n * @param {string} key\n * @param {string} component\n * @param {string} name\n * @returns {never}\n */\nexport function bind_not_bindable(key, component, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_not_bindable\\nA component is attempting to bind to a non-bindable property \\`${key}\\` belonging to ${component} (i.e. \\`<${name} bind:${key}={...}>\\`). To mark a property as bindable: \\`let { ${key} = $bindable() } = $props()\\`\\nhttps://svelte.dev/e/bind_not_bindable`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_not_bindable`);\n\t}\n}\n\n/**\n * Calling `%method%` on a component instance (of %component%) is no longer valid in Svelte 5\n * @param {string} method\n * @param {string} component\n * @returns {never}\n */\nexport function component_api_changed(method, component) {\n\tif (DEV) {\n\t\tconst error = new Error(`component_api_changed\\nCalling \\`${method}\\` on a component instance (of ${component}) is no longer valid in Svelte 5\\nhttps://svelte.dev/e/component_api_changed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/component_api_changed`);\n\t}\n}\n\n/**\n * Attempted to instantiate %component% with `new %name%`, which is no longer valid in Svelte 5. If this component is not under your control, set the `compatibility.componentApi` compiler option to `4` to keep it working.\n * @param {string} component\n * @param {string} name\n * @returns {never}\n */\nexport function component_api_invalid_new(component, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`component_api_invalid_new\\nAttempted to instantiate ${component} with \\`new ${name}\\`, which is no longer valid in Svelte 5. If this component is not under your control, set the \\`compatibility.componentApi\\` compiler option to \\`4\\` to keep it working.\\nhttps://svelte.dev/e/component_api_invalid_new`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/component_api_invalid_new`);\n\t}\n}\n\n/**\n * A derived value cannot reference itself recursively\n * @returns {never}\n */\nexport function derived_references_self() {\n\tif (DEV) {\n\t\tconst error = new Error(`derived_references_self\\nA derived value cannot reference itself recursively\\nhttps://svelte.dev/e/derived_references_self`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/derived_references_self`);\n\t}\n}\n\n/**\n * Keyed each block has duplicate key `%value%` at indexes %a% and %b%\n * @param {string} a\n * @param {string} b\n * @param {string | undefined | null} [value]\n * @returns {never}\n */\nexport function each_key_duplicate(a, b, value) {\n\tif (DEV) {\n\t\tconst error = new Error(`each_key_duplicate\\n${value\n\t\t\t? `Keyed each block has duplicate key \\`${value}\\` at indexes ${a} and ${b}`\n\t\t\t: `Keyed each block has duplicate key at indexes ${a} and ${b}`}\\nhttps://svelte.dev/e/each_key_duplicate`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/each_key_duplicate`);\n\t}\n}\n\n/**\n * `%rune%` cannot be used inside an effect cleanup function\n * @param {string} rune\n * @returns {never}\n */\nexport function effect_in_teardown(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_in_teardown\\n\\`${rune}\\` cannot be used inside an effect cleanup function\\nhttps://svelte.dev/e/effect_in_teardown`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_in_teardown`);\n\t}\n}\n\n/**\n * Effect cannot be created inside a `$derived` value that was not itself created inside an effect\n * @returns {never}\n */\nexport function effect_in_unowned_derived() {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_in_unowned_derived\\nEffect cannot be created inside a \\`$derived\\` value that was not itself created inside an effect\\nhttps://svelte.dev/e/effect_in_unowned_derived`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_in_unowned_derived`);\n\t}\n}\n\n/**\n * `%rune%` can only be used inside an effect (e.g. during component initialisation)\n * @param {string} rune\n * @returns {never}\n */\nexport function effect_orphan(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_orphan\\n\\`${rune}\\` can only be used inside an effect (e.g. during component initialisation)\\nhttps://svelte.dev/e/effect_orphan`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_orphan`);\n\t}\n}\n\n/**\n * `$effect.pending()` can only be called inside an effect or derived\n * @returns {never}\n */\nexport function effect_pending_outside_reaction() {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_pending_outside_reaction\\n\\`$effect.pending()\\` can only be called inside an effect or derived\\nhttps://svelte.dev/e/effect_pending_outside_reaction`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_pending_outside_reaction`);\n\t}\n}\n\n/**\n * Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state\n * @returns {never}\n */\nexport function effect_update_depth_exceeded() {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_update_depth_exceeded\\nMaximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state\\nhttps://svelte.dev/e/effect_update_depth_exceeded`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_update_depth_exceeded`);\n\t}\n}\n\n/**\n * Cannot use `flushSync` inside an effect\n * @returns {never}\n */\nexport function flush_sync_in_effect() {\n\tif (DEV) {\n\t\tconst error = new Error(`flush_sync_in_effect\\nCannot use \\`flushSync\\` inside an effect\\nhttps://svelte.dev/e/flush_sync_in_effect`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/flush_sync_in_effect`);\n\t}\n}\n\n/**\n * Cannot commit a fork that was already discarded\n * @returns {never}\n */\nexport function fork_discarded() {\n\tif (DEV) {\n\t\tconst error = new Error(`fork_discarded\\nCannot commit a fork that was already discarded\\nhttps://svelte.dev/e/fork_discarded`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/fork_discarded`);\n\t}\n}\n\n/**\n * Cannot create a fork inside an effect or when state changes are pending\n * @returns {never}\n */\nexport function fork_timing() {\n\tif (DEV) {\n\t\tconst error = new Error(`fork_timing\\nCannot create a fork inside an effect or when state changes are pending\\nhttps://svelte.dev/e/fork_timing`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/fork_timing`);\n\t}\n}\n\n/**\n * `getAbortSignal()` can only be called inside an effect or derived\n * @returns {never}\n */\nexport function get_abort_signal_outside_reaction() {\n\tif (DEV) {\n\t\tconst error = new Error(`get_abort_signal_outside_reaction\\n\\`getAbortSignal()\\` can only be called inside an effect or derived\\nhttps://svelte.dev/e/get_abort_signal_outside_reaction`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/get_abort_signal_outside_reaction`);\n\t}\n}\n\n/**\n * Expected to find a hydratable with key `%key%` during hydration, but did not.\n * @param {string} key\n * @returns {never}\n */\nexport function hydratable_missing_but_required(key) {\n\tif (DEV) {\n\t\tconst error = new Error(`hydratable_missing_but_required\\nExpected to find a hydratable with key \\`${key}\\` during hydration, but did not.\\nhttps://svelte.dev/e/hydratable_missing_but_required`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/hydratable_missing_but_required`);\n\t}\n}\n\n/**\n * Failed to hydrate the application\n * @returns {never}\n */\nexport function hydration_failed() {\n\tif (DEV) {\n\t\tconst error = new Error(`hydration_failed\\nFailed to hydrate the application\\nhttps://svelte.dev/e/hydration_failed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/hydration_failed`);\n\t}\n}\n\n/**\n * Could not `{@render}` snippet due to the expression being `null` or `undefined`. Consider using optional chaining `{@render snippet?.()}`\n * @returns {never}\n */\nexport function invalid_snippet() {\n\tif (DEV) {\n\t\tconst error = new Error(`invalid_snippet\\nCould not \\`{@render}\\` snippet due to the expression being \\`null\\` or \\`undefined\\`. Consider using optional chaining \\`{@render snippet?.()}\\`\\nhttps://svelte.dev/e/invalid_snippet`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/invalid_snippet`);\n\t}\n}\n\n/**\n * `%name%(...)` cannot be used in runes mode\n * @param {string} name\n * @returns {never}\n */\nexport function lifecycle_legacy_only(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`lifecycle_legacy_only\\n\\`${name}(...)\\` cannot be used in runes mode\\nhttps://svelte.dev/e/lifecycle_legacy_only`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/lifecycle_legacy_only`);\n\t}\n}\n\n/**\n * Cannot do `bind:%key%={undefined}` when `%key%` has a fallback value\n * @param {string} key\n * @returns {never}\n */\nexport function props_invalid_value(key) {\n\tif (DEV) {\n\t\tconst error = new Error(`props_invalid_value\\nCannot do \\`bind:${key}={undefined}\\` when \\`${key}\\` has a fallback value\\nhttps://svelte.dev/e/props_invalid_value`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/props_invalid_value`);\n\t}\n}\n\n/**\n * Rest element properties of `$props()` such as `%property%` are readonly\n * @param {string} property\n * @returns {never}\n */\nexport function props_rest_readonly(property) {\n\tif (DEV) {\n\t\tconst error = new Error(`props_rest_readonly\\nRest element properties of \\`$props()\\` such as \\`${property}\\` are readonly\\nhttps://svelte.dev/e/props_rest_readonly`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/props_rest_readonly`);\n\t}\n}\n\n/**\n * The `%rune%` rune is only available inside `.svelte` and `.svelte.js/ts` files\n * @param {string} rune\n * @returns {never}\n */\nexport function rune_outside_svelte(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`rune_outside_svelte\\nThe \\`${rune}\\` rune is only available inside \\`.svelte\\` and \\`.svelte.js/ts\\` files\\nhttps://svelte.dev/e/rune_outside_svelte`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/rune_outside_svelte`);\n\t}\n}\n\n/**\n * `setContext` must be called when a component first initializes, not in a subsequent effect or after an `await` expression\n * @returns {never}\n */\nexport function set_context_after_init() {\n\tif (DEV) {\n\t\tconst error = new Error(`set_context_after_init\\n\\`setContext\\` must be called when a component first initializes, not in a subsequent effect or after an \\`await\\` expression\\nhttps://svelte.dev/e/set_context_after_init`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/set_context_after_init`);\n\t}\n}\n\n/**\n * Property descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\n * @returns {never}\n */\nexport function state_descriptors_fixed() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_descriptors_fixed\\nProperty descriptors defined on \\`$state\\` objects must contain \\`value\\` and always be \\`enumerable\\`, \\`configurable\\` and \\`writable\\`.\\nhttps://svelte.dev/e/state_descriptors_fixed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_descriptors_fixed`);\n\t}\n}\n\n/**\n * Cannot set prototype of `$state` object\n * @returns {never}\n */\nexport function state_prototype_fixed() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_prototype_fixed\\nCannot set prototype of \\`$state\\` object\\nhttps://svelte.dev/e/state_prototype_fixed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_prototype_fixed`);\n\t}\n}\n\n/**\n * Updating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\n * @returns {never}\n */\nexport function state_unsafe_mutation() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_unsafe_mutation\\nUpdating state inside \\`$derived(...)\\`, \\`$inspect(...)\\` or a template expression is forbidden. If the value should not be reactive, declare it without \\`$state\\`\\nhttps://svelte.dev/e/state_unsafe_mutation`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_unsafe_mutation`);\n\t}\n}\n\n/**\n * A `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\n * @returns {never}\n */\nexport function svelte_boundary_reset_onerror() {\n\tif (DEV) {\n\t\tconst error = new Error(`svelte_boundary_reset_onerror\\nA \\`<svelte:boundary>\\` \\`reset\\` function cannot be called while an error is still being handled\\nhttps://svelte.dev/e/svelte_boundary_reset_onerror`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/svelte_boundary_reset_onerror`);\n\t}\n}", "/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\nvar bold = 'font-weight: bold';\nvar normal = 'font-weight: normal';\n\n/**\n * Assignment to `%property%` property (%location%) will evaluate to the right-hand side, not the value of `%property%` following the assignment. This may result in unexpected behaviour.\n * @param {string} property\n * @param {string} location\n */\nexport function assignment_value_stale(property, location) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] assignment_value_stale\\n%cAssignment to \\`${property}\\` property (${location}) will evaluate to the right-hand side, not the value of \\`${property}\\` following the assignment. This may result in unexpected behaviour.\\nhttps://svelte.dev/e/assignment_value_stale`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/assignment_value_stale`);\n\t}\n}\n\n/**\n * Detected reactivity loss when reading `%name%`. This happens when state is read in an async function after an earlier `await`\n * @param {string} name\n */\nexport function await_reactivity_loss(name) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] await_reactivity_loss\\n%cDetected reactivity loss when reading \\`${name}\\`. This happens when state is read in an async function after an earlier \\`await\\`\\nhttps://svelte.dev/e/await_reactivity_loss`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/await_reactivity_loss`);\n\t}\n}\n\n/**\n * An async derived, `%name%` (%location%) was not read immediately after it resolved. This often indicates an unnecessary waterfall, which can slow down your app\n * @param {string} name\n * @param {string} location\n */\nexport function await_waterfall(name, location) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] await_waterfall\\n%cAn async derived, \\`${name}\\` (${location}) was not read immediately after it resolved. This often indicates an unnecessary waterfall, which can slow down your app\\nhttps://svelte.dev/e/await_waterfall`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/await_waterfall`);\n\t}\n}\n\n/**\n * `%binding%` (%location%) is binding to a non-reactive property\n * @param {string} binding\n * @param {string | undefined | null} [location]\n */\nexport function binding_property_non_reactive(binding, location) {\n\tif (DEV) {\n\t\tconsole.warn(\n\t\t\t`%c[svelte] binding_property_non_reactive\\n%c${location\n\t\t\t\t? `\\`${binding}\\` (${location}) is binding to a non-reactive property`\n\t\t\t\t: `\\`${binding}\\` is binding to a non-reactive property`}\\nhttps://svelte.dev/e/binding_property_non_reactive`,\n\t\t\tbold,\n\t\t\tnormal\n\t\t);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/binding_property_non_reactive`);\n\t}\n}\n\n/**\n * Your `console.%method%` contained `$state` proxies. Consider using `$inspect(...)` or `$state.snapshot(...)` instead\n * @param {string} method\n */\nexport function console_log_state(method) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] console_log_state\\n%cYour \\`console.${method}\\` contained \\`$state\\` proxies. Consider using \\`$inspect(...)\\` or \\`$state.snapshot(...)\\` instead\\nhttps://svelte.dev/e/console_log_state`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/console_log_state`);\n\t}\n}\n\n/**\n * %handler% should be a function. Did you mean to %suggestion%?\n * @param {string} handler\n * @param {string} suggestion\n */\nexport function event_handler_invalid(handler, suggestion) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] event_handler_invalid\\n%c${handler} should be a function. Did you mean to ${suggestion}?\\nhttps://svelte.dev/e/event_handler_invalid`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/event_handler_invalid`);\n\t}\n}\n\n/**\n * Expected to find a hydratable with key `%key%` during hydration, but did not.\n * @param {string} key\n */\nexport function hydratable_missing_but_expected(key) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] hydratable_missing_but_expected\\n%cExpected to find a hydratable with key \\`${key}\\` during hydration, but did not.\\nhttps://svelte.dev/e/hydratable_missing_but_expected`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/hydratable_missing_but_expected`);\n\t}\n}\n\n/**\n * The `%attribute%` attribute on `%html%` changed its value between server and client renders. The client value, `%value%`, will be ignored in favour of the server value\n * @param {string} attribute\n * @param {string} html\n * @param {string} value\n */\nexport function hydration_attribute_changed(attribute, html, value) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] hydration_attribute_changed\\n%cThe \\`${attribute}\\` attribute on \\`${html}\\` changed its value between server and client renders. The client value, \\`${value}\\`, will be ignored in favour of the server value\\nhttps://svelte.dev/e/hydration_attribute_changed`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/hydration_attribute_changed`);\n\t}\n}\n\n/**\n * The value of an `{@html ...}` block %location% changed between server and client renders. The client value will be ignored in favour of the server value\n * @param {string | undefined | null} [location]\n */\nexport function hydration_html_changed(location) {\n\tif (DEV) {\n\t\tconsole.warn(\n\t\t\t`%c[svelte] hydration_html_changed\\n%c${location\n\t\t\t\t? `The value of an \\`{@html ...}\\` block ${location} changed between server and client renders. The client value will be ignored in favour of the server value`\n\t\t\t\t: 'The value of an `{@html ...}` block changed between server and client renders. The client value will be ignored in favour of the server value'}\\nhttps://svelte.dev/e/hydration_html_changed`,\n\t\t\tbold,\n\t\t\tnormal\n\t\t);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/hydration_html_changed`);\n\t}\n}\n\n/**\n * Hydration failed because the initial UI does not match what was rendered on the server. The error occurred near %location%\n * @param {string | undefined | null} [location]\n */\nexport function hydration_mismatch(location) {\n\tif (DEV) {\n\t\tconsole.warn(\n\t\t\t`%c[svelte] hydration_mismatch\\n%c${location\n\t\t\t\t? `Hydration failed because the initial UI does not match what was rendered on the server. The error occurred near ${location}`\n\t\t\t\t: 'Hydration failed because the initial UI does not match what was rendered on the server'}\\nhttps://svelte.dev/e/hydration_mismatch`,\n\t\t\tbold,\n\t\t\tnormal\n\t\t);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/hydration_mismatch`);\n\t}\n}\n\n/**\n * The `render` function passed to `createRawSnippet` should return HTML for a single element\n */\nexport function invalid_raw_snippet_render() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] invalid_raw_snippet_render\\n%cThe \\`render\\` function passed to \\`createRawSnippet\\` should return HTML for a single element\\nhttps://svelte.dev/e/invalid_raw_snippet_render`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/invalid_raw_snippet_render`);\n\t}\n}\n\n/**\n * Detected a migrated `$:` reactive block in `%filename%` that both accesses and updates the same reactive value. This may cause recursive updates when converted to an `$effect`.\n * @param {string} filename\n */\nexport function legacy_recursive_reactive_block(filename) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] legacy_recursive_reactive_block\\n%cDetected a migrated \\`$:\\` reactive block in \\`${filename}\\` that both accesses and updates the same reactive value. This may cause recursive updates when converted to an \\`$effect\\`.\\nhttps://svelte.dev/e/legacy_recursive_reactive_block`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/legacy_recursive_reactive_block`);\n\t}\n}\n\n/**\n * Tried to unmount a component that was not mounted\n */\nexport function lifecycle_double_unmount() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] lifecycle_double_unmount\\n%cTried to unmount a component that was not mounted\\nhttps://svelte.dev/e/lifecycle_double_unmount`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/lifecycle_double_unmount`);\n\t}\n}\n\n/**\n * %parent% passed property `%prop%` to %child% with `bind:`, but its parent component %owner% did not declare `%prop%` as a binding. Consider creating a binding between %owner% and %parent% (e.g. `bind:%prop%={...}` instead of `%prop%={...}`)\n * @param {string} parent\n * @param {string} prop\n * @param {string} child\n * @param {string} owner\n */\nexport function ownership_invalid_binding(parent, prop, child, owner) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] ownership_invalid_binding\\n%c${parent} passed property \\`${prop}\\` to ${child} with \\`bind:\\`, but its parent component ${owner} did not declare \\`${prop}\\` as a binding. Consider creating a binding between ${owner} and ${parent} (e.g. \\`bind:${prop}={...}\\` instead of \\`${prop}={...}\\`)\\nhttps://svelte.dev/e/ownership_invalid_binding`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/ownership_invalid_binding`);\n\t}\n}\n\n/**\n * Mutating unbound props (`%name%`, at %location%) is strongly discouraged. Consider using `bind:%prop%={...}` in %parent% (or using a callback) instead\n * @param {string} name\n * @param {string} location\n * @param {string} prop\n * @param {string} parent\n */\nexport function ownership_invalid_mutation(name, location, prop, parent) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] ownership_invalid_mutation\\n%cMutating unbound props (\\`${name}\\`, at ${location}) is strongly discouraged. Consider using \\`bind:${prop}={...}\\` in ${parent} (or using a callback) instead\\nhttps://svelte.dev/e/ownership_invalid_mutation`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/ownership_invalid_mutation`);\n\t}\n}\n\n/**\n * The `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\n */\nexport function select_multiple_invalid_value() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] select_multiple_invalid_value\\n%cThe \\`value\\` property of a \\`<select multiple>\\` element should be an array, but it received a non-array value. The selection will be kept as is.\\nhttps://svelte.dev/e/select_multiple_invalid_value`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/select_multiple_invalid_value`);\n\t}\n}\n\n/**\n * Reactive `$state(...)` proxies and the values they proxy have different identities. Because of this, comparisons with `%operator%` will produce unexpected results\n * @param {string} operator\n */\nexport function state_proxy_equality_mismatch(operator) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] state_proxy_equality_mismatch\\n%cReactive \\`$state(...)\\` proxies and the values they proxy have different identities. Because of this, comparisons with \\`${operator}\\` will produce unexpected results\\nhttps://svelte.dev/e/state_proxy_equality_mismatch`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/state_proxy_equality_mismatch`);\n\t}\n}\n\n/**\n * Tried to unmount a state proxy, rather than a component\n */\nexport function state_proxy_unmount() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] state_proxy_unmount\\n%cTried to unmount a state proxy, rather than a component\\nhttps://svelte.dev/e/state_proxy_unmount`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/state_proxy_unmount`);\n\t}\n}\n\n/**\n * A `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\n */\nexport function svelte_boundary_reset_noop() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] svelte_boundary_reset_noop\\n%cA \\`<svelte:boundary>\\` \\`reset\\` function only resets the boundary the first time it is called\\nhttps://svelte.dev/e/svelte_boundary_reset_noop`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/svelte_boundary_reset_noop`);\n\t}\n}\n\n/**\n * The `slide` transition does not work correctly for elements with `display: %value%`\n * @param {string} value\n */\nexport function transition_slide_display(value) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] transition_slide_display\\n%cThe \\`slide\\` transition does not work correctly for elements with \\`display: ${value}\\`\\nhttps://svelte.dev/e/transition_slide_display`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/transition_slide_display`);\n\t}\n}", "/** @import { TemplateNode } from '#client' */\n\nimport { COMMENT_NODE } from '#client/constants';\nimport {\n\tHYDRATION_END,\n\tHYDRATION_ERROR,\n\tHYDRATION_START,\n\tHYDRATION_START_ELSE\n} from '../../../constants.js';\nimport * as w from '../warnings.js';\nimport { get_next_sibling } from './operations.js';\n\n/**\n * Use this variable to guard everything related to hydration code so it can be treeshaken out\n * if the user doesn't use the `hydrate` method and these code paths are therefore not needed.\n */\nexport let hydrating = false;\n\n/** @param {boolean} value */\nexport function set_hydrating(value) {\n\thydrating = value;\n}\n\n/**\n * The node that is currently being hydrated. This starts out as the first node inside the opening\n * <!--[--> comment, and updates each time a component calls `$.child(...)` or `$.sibling(...)`.\n * When entering a block (e.g. `{#if ...}`), `hydrate_node` is the block opening comment; by the\n * time we leave the block it is the closing comment, which serves as the block's anchor.\n * @type {TemplateNode}\n */\nexport let hydrate_node;\n\n/** @param {TemplateNode | null} node */\nexport function set_hydrate_node(node) {\n\tif (node === null) {\n\t\tw.hydration_mismatch();\n\t\tthrow HYDRATION_ERROR;\n\t}\n\n\treturn (hydrate_node = node);\n}\n\nexport function hydrate_next() {\n\treturn set_hydrate_node(get_next_sibling(hydrate_node));\n}\n\n/** @param {TemplateNode} node */\nexport function reset(node) {\n\tif (!hydrating) return;\n\n\t// If the node has remaining siblings, something has gone wrong\n\tif (get_next_sibling(hydrate_node) !== null) {\n\t\tw.hydration_mismatch();\n\t\tthrow HYDRATION_ERROR;\n\t}\n\n\thydrate_node = node;\n}\n\n/**\n * @param {HTMLTemplateElement} template\n */\nexport function hydrate_template(template) {\n\tif (hydrating) {\n\t\t// @ts-expect-error TemplateNode doesn't include DocumentFragment, but it's actually fine\n\t\thydrate_node = template.content;\n\t}\n}\n\nexport function next(count = 1) {\n\tif (hydrating) {\n\t\tvar i = count;\n\t\tvar node = hydrate_node;\n\n\t\twhile (i--) {\n\t\t\tnode = /** @type {TemplateNode} */ (get_next_sibling(node));\n\t\t}\n\n\t\thydrate_node = node;\n\t}\n}\n\n/**\n * Skips or removes (depending on {@link remove}) all nodes starting at `hydrate_node` up until the next hydration end comment\n * @param {boolean} remove\n */\nexport function skip_nodes(remove = true) {\n\tvar depth = 0;\n\tvar node = hydrate_node;\n\n\twhile (true) {\n\t\tif (node.nodeType === COMMENT_NODE) {\n\t\t\tvar data = /** @type {Comment} */ (node).data;\n\n\t\t\tif (data === HYDRATION_END) {\n\t\t\t\tif (depth === 0) return node;\n\t\t\t\tdepth -= 1;\n\t\t\t} else if (data === HYDRATION_START || data === HYDRATION_START_ELSE) {\n\t\t\t\tdepth += 1;\n\t\t\t}\n\t\t}\n\n\t\tvar next = /** @type {TemplateNode} */ (get_next_sibling(node));\n\t\tif (remove) node.remove();\n\t\tnode = next;\n\t}\n}\n\n/**\n *\n * @param {TemplateNode} node\n */\nexport function read_hydration_instruction(node) {\n\tif (!node || node.nodeType !== COMMENT_NODE) {\n\t\tw.hydration_mismatch();\n\t\tthrow HYDRATION_ERROR;\n\t}\n\n\treturn /** @type {Comment} */ (node).data;\n}\n", "/** @import { Equals } from '#client' */\n\n/** @type {Equals} */\nexport function equals(value) {\n\treturn value === this.v;\n}\n\n/**\n * @param {unknown} a\n * @param {unknown} b\n * @returns {boolean}\n */\nexport function safe_not_equal(a, b) {\n\treturn a != a\n\t\t? b == b\n\t\t: a !== b || (a !== null && typeof a === 'object') || typeof a === 'function';\n}\n\n/**\n * @param {unknown} a\n * @param {unknown} b\n * @returns {boolean}\n */\nexport function not_equal(a, b) {\n\treturn a !== b;\n}\n\n/** @type {Equals} */\nexport function safe_equals(value) {\n\treturn !safe_not_equal(value, this.v);\n}\n", "/** True if experimental.async=true */\nexport let async_mode_flag = false;\n/** True if we're not certain that we only have Svelte 5 code in the compilation */\nexport let legacy_mode_flag = false;\n/** True if $inspect.trace is used */\nexport let tracing_mode_flag = false;\n\nexport function enable_async_mode_flag() {\n\tasync_mode_flag = true;\n}\n\n/** ONLY USE THIS DURING TESTING */\nexport function disable_async_mode_flag() {\n\tasync_mode_flag = false;\n}\n\nexport function enable_legacy_mode_flag() {\n\tlegacy_mode_flag = true;\n}\n\nexport function enable_tracing_mode_flag() {\n\ttracing_mode_flag = true;\n}\n", "/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\nvar bold = 'font-weight: bold';\nvar normal = 'font-weight: normal';\n\n/**\n * `<svelte:element this=\"%tag%\">` is a void element \u2014 it cannot have content\n * @param {string} tag\n */\nexport function dynamic_void_element_content(tag) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] dynamic_void_element_content\\n%c\\`<svelte:element this=\"${tag}\">\\` is a void element \u2014 it cannot have content\\nhttps://svelte.dev/e/dynamic_void_element_content`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/dynamic_void_element_content`);\n\t}\n}\n\n/**\n * The following properties cannot be cloned with `$state.snapshot` \u2014 the return value contains the originals:\n * \n * %properties%\n * @param {string | undefined | null} [properties]\n */\nexport function state_snapshot_uncloneable(properties) {\n\tif (DEV) {\n\t\tconsole.warn(\n\t\t\t`%c[svelte] state_snapshot_uncloneable\\n%c${properties\n\t\t\t\t? `The following properties cannot be cloned with \\`$state.snapshot\\` \u2014 the return value contains the originals:\n\n${properties}`\n\t\t\t\t: 'Value cannot be cloned with `$state.snapshot` \u2014 the original value was returned'}\\nhttps://svelte.dev/e/state_snapshot_uncloneable`,\n\t\t\tbold,\n\t\t\tnormal\n\t\t);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/state_snapshot_uncloneable`);\n\t}\n}", "/** @import { Snapshot } from './types' */\nimport { DEV } from 'esm-env';\nimport * as w from './warnings.js';\nimport { get_prototype_of, is_array, object_prototype } from './utils.js';\n\n/**\n * In dev, we keep track of which properties could not be cloned. In prod\n * we don't bother, but we keep a dummy array around so that the\n * signature stays the same\n * @type {string[]}\n */\nconst empty = [];\n\n/**\n * @template T\n * @param {T} value\n * @param {boolean} [skip_warning]\n * @param {boolean} [no_tojson]\n * @returns {Snapshot<T>}\n */\nexport function snapshot(value, skip_warning = false, no_tojson = false) {\n\tif (DEV && !skip_warning) {\n\t\t/** @type {string[]} */\n\t\tconst paths = [];\n\n\t\tconst copy = clone(value, new Map(), '', paths, null, no_tojson);\n\t\tif (paths.length === 1 && paths[0] === '') {\n\t\t\t// value could not be cloned\n\t\t\tw.state_snapshot_uncloneable();\n\t\t} else if (paths.length > 0) {\n\t\t\t// some properties could not be cloned\n\t\t\tconst slice = paths.length > 10 ? paths.slice(0, 7) : paths.slice(0, 10);\n\t\t\tconst excess = paths.length - slice.length;\n\n\t\t\tlet uncloned = slice.map((path) => `- <value>${path}`).join('\\n');\n\t\t\tif (excess > 0) uncloned += `\\n- ...and ${excess} more`;\n\n\t\t\tw.state_snapshot_uncloneable(uncloned);\n\t\t}\n\n\t\treturn copy;\n\t}\n\n\treturn clone(value, new Map(), '', empty, null, no_tojson);\n}\n\n/**\n * @template T\n * @param {T} value\n * @param {Map<T, Snapshot<T>>} cloned\n * @param {string} path\n * @param {string[]} paths\n * @param {null | T} [original] The original value, if `value` was produced from a `toJSON` call\n * @param {boolean} [no_tojson]\n * @returns {Snapshot<T>}\n */\nfunction clone(value, cloned, path, paths, original = null, no_tojson = false) {\n\tif (typeof value === 'object' && value !== null) {\n\t\tvar unwrapped = cloned.get(value);\n\t\tif (unwrapped !== undefined) return unwrapped;\n\n\t\tif (value instanceof Map) return /** @type {Snapshot<T>} */ (new Map(value));\n\t\tif (value instanceof Set) return /** @type {Snapshot<T>} */ (new Set(value));\n\n\t\tif (is_array(value)) {\n\t\t\tvar copy = /** @type {Snapshot<any>} */ (Array(value.length));\n\t\t\tcloned.set(value, copy);\n\n\t\t\tif (original !== null) {\n\t\t\t\tcloned.set(original, copy);\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < value.length; i += 1) {\n\t\t\t\tvar element = value[i];\n\t\t\t\tif (i in value) {\n\t\t\t\t\tcopy[i] = clone(element, cloned, DEV ? `${path}[${i}]` : path, paths, null, no_tojson);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn copy;\n\t\t}\n\n\t\tif (get_prototype_of(value) === object_prototype) {\n\t\t\t/** @type {Snapshot<any>} */\n\t\t\tcopy = {};\n\t\t\tcloned.set(value, copy);\n\n\t\t\tif (original !== null) {\n\t\t\t\tcloned.set(original, copy);\n\t\t\t}\n\n\t\t\tfor (var key in value) {\n\t\t\t\tcopy[key] = clone(\n\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\tvalue[key],\n\t\t\t\t\tcloned,\n\t\t\t\t\tDEV ? `${path}.${key}` : path,\n\t\t\t\t\tpaths,\n\t\t\t\t\tnull,\n\t\t\t\t\tno_tojson\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn copy;\n\t\t}\n\n\t\tif (value instanceof Date) {\n\t\t\treturn /** @type {Snapshot<T>} */ (structuredClone(value));\n\t\t}\n\n\t\tif (typeof (/** @type {T & { toJSON?: any } } */ (value).toJSON) === 'function' && !no_tojson) {\n\t\t\treturn clone(\n\t\t\t\t/** @type {T & { toJSON(): any } } */ (value).toJSON(),\n\t\t\t\tcloned,\n\t\t\t\tDEV ? `${path}.toJSON()` : path,\n\t\t\t\tpaths,\n\t\t\t\t// Associate the instance with the toJSON clone\n\t\t\t\tvalue\n\t\t\t);\n\t\t}\n\t}\n\n\tif (value instanceof EventTarget) {\n\t\t// can't be cloned\n\t\treturn /** @type {Snapshot<T>} */ (value);\n\t}\n\n\ttry {\n\t\treturn /** @type {Snapshot<T>} */ (structuredClone(value));\n\t} catch (e) {\n\t\tif (DEV) {\n\t\t\tpaths.push(path);\n\t\t}\n\n\t\treturn /** @type {Snapshot<T>} */ (value);\n\t}\n}\n", "/** @import { Derived, Reaction, Value } from '#client' */\nimport { UNINITIALIZED } from '../../../constants.js';\nimport { snapshot } from '../../shared/clone.js';\nimport { DERIVED, ASYNC, PROXY_PATH_SYMBOL, STATE_SYMBOL } from '#client/constants';\nimport { effect_tracking } from '../reactivity/effects.js';\nimport { active_reaction, untrack } from '../runtime.js';\n\n/**\n * @typedef {{\n *   traces: Error[];\n * }} TraceEntry\n */\n\n/** @type {{ reaction: Reaction | null, entries: Map<Value, TraceEntry> } | null} */\nexport let tracing_expressions = null;\n\n/**\n * @param {Value} signal\n * @param {TraceEntry} [entry]\n */\nfunction log_entry(signal, entry) {\n\tconst value = signal.v;\n\n\tif (value === UNINITIALIZED) {\n\t\treturn;\n\t}\n\n\tconst type = get_type(signal);\n\tconst current_reaction = /** @type {Reaction} */ (active_reaction);\n\tconst dirty = signal.wv > current_reaction.wv || current_reaction.wv === 0;\n\tconst style = dirty\n\t\t? 'color: CornflowerBlue; font-weight: bold'\n\t\t: 'color: grey; font-weight: normal';\n\n\t// eslint-disable-next-line no-console\n\tconsole.groupCollapsed(\n\t\tsignal.label ? `%c${type}%c ${signal.label}` : `%c${type}%c`,\n\t\tstyle,\n\t\tdirty ? 'font-weight: normal' : style,\n\t\ttypeof value === 'object' && value !== null && STATE_SYMBOL in value\n\t\t\t? snapshot(value, true)\n\t\t\t: value\n\t);\n\n\tif (type === '$derived') {\n\t\tconst deps = new Set(/** @type {Derived} */ (signal).deps);\n\t\tfor (const dep of deps) {\n\t\t\tlog_entry(dep);\n\t\t}\n\t}\n\n\tif (signal.created) {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.log(signal.created);\n\t}\n\n\tif (dirty && signal.updated) {\n\t\tfor (const updated of signal.updated.values()) {\n\t\t\tif (updated.error) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.log(updated.error);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (entry) {\n\t\tfor (var trace of entry.traces) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log(trace);\n\t\t}\n\t}\n\n\t// eslint-disable-next-line no-console\n\tconsole.groupEnd();\n}\n\n/**\n * @param {Value} signal\n * @returns {'$state' | '$derived' | 'store'}\n */\nfunction get_type(signal) {\n\tif ((signal.f & (DERIVED | ASYNC)) !== 0) return '$derived';\n\treturn signal.label?.startsWith('$') ? 'store' : '$state';\n}\n\n/**\n * @template T\n * @param {() => string} label\n * @param {() => T} fn\n */\nexport function trace(label, fn) {\n\tvar previously_tracing_expressions = tracing_expressions;\n\n\ttry {\n\t\ttracing_expressions = { entries: new Map(), reaction: active_reaction };\n\n\t\tvar start = performance.now();\n\t\tvar value = fn();\n\t\tvar time = (performance.now() - start).toFixed(2);\n\n\t\tvar prefix = untrack(label);\n\n\t\tif (!effect_tracking()) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log(`${prefix} %cran outside of an effect (${time}ms)`, 'color: grey');\n\t\t} else if (tracing_expressions.entries.size === 0) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log(`${prefix} %cno reactive dependencies (${time}ms)`, 'color: grey');\n\t\t} else {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.group(`${prefix} %c(${time}ms)`, 'color: grey');\n\n\t\t\tvar entries = tracing_expressions.entries;\n\n\t\t\tuntrack(() => {\n\t\t\t\tfor (const [signal, traces] of entries) {\n\t\t\t\t\tlog_entry(signal, traces);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\ttracing_expressions = null;\n\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.groupEnd();\n\t\t}\n\n\t\treturn value;\n\t} finally {\n\t\ttracing_expressions = previously_tracing_expressions;\n\t}\n}\n\n/**\n * @param {Value} source\n * @param {string} label\n */\nexport function tag(source, label) {\n\tsource.label = label;\n\ttag_proxy(source.v, label);\n\n\treturn source;\n}\n\n/**\n * @param {unknown} value\n * @param {string} label\n */\nexport function tag_proxy(value, label) {\n\t// @ts-expect-error\n\tvalue?.[PROXY_PATH_SYMBOL]?.(label);\n\treturn value;\n}\n\n/**\n * @param {unknown} value\n */\nexport function label(value) {\n\tif (typeof value === 'symbol') return `Symbol(${value.description})`;\n\tif (typeof value === 'function') return '<function>';\n\tif (typeof value === 'object' && value) return '<object>';\n\treturn String(value);\n}\n", "import { define_property } from './utils.js';\n\n/**\n * @param {string} label\n * @returns {Error & { stack: string } | null}\n */\nexport function get_error(label) {\n\tconst error = new Error();\n\tconst stack = get_stack();\n\n\tif (stack.length === 0) {\n\t\treturn null;\n\t}\n\n\tstack.unshift('\\n');\n\n\tdefine_property(error, 'stack', {\n\t\tvalue: stack.join('\\n')\n\t});\n\n\tdefine_property(error, 'name', {\n\t\tvalue: label\n\t});\n\n\treturn /** @type {Error & { stack: string }} */ (error);\n}\n\n/**\n * @returns {string[]}\n */\nexport function get_stack() {\n\t// @ts-ignore - doesn't exist everywhere\n\tconst limit = Error.stackTraceLimit;\n\t// @ts-ignore - doesn't exist everywhere\n\tError.stackTraceLimit = Infinity;\n\tconst stack = new Error().stack;\n\t// @ts-ignore - doesn't exist everywhere\n\tError.stackTraceLimit = limit;\n\n\tif (!stack) return [];\n\n\tconst lines = stack.split('\\n');\n\tconst new_lines = [];\n\n\tfor (let i = 0; i < lines.length; i++) {\n\t\tconst line = lines[i];\n\t\tconst posixified = line.replaceAll('\\\\', '/');\n\n\t\tif (line.trim() === 'Error') {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (line.includes('validate_each_keys')) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif (posixified.includes('svelte/src/internal') || posixified.includes('node_modules/.vite')) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tnew_lines.push(line);\n\t}\n\n\treturn new_lines;\n}\n", "/** @import { ComponentContext, DevStackEntry, Effect } from '#client' */\nimport { DEV } from 'esm-env';\nimport * as e from './errors.js';\nimport { active_effect, active_reaction } from './runtime.js';\nimport { create_user_effect } from './reactivity/effects.js';\nimport { async_mode_flag, legacy_mode_flag } from '../flags/index.js';\nimport { FILENAME } from '../../constants.js';\nimport { BRANCH_EFFECT, EFFECT_RAN } from './constants.js';\n\n/** @type {ComponentContext | null} */\nexport let component_context = null;\n\n/** @param {ComponentContext | null} context */\nexport function set_component_context(context) {\n\tcomponent_context = context;\n}\n\n/** @type {DevStackEntry | null} */\nexport let dev_stack = null;\n\n/** @param {DevStackEntry | null} stack */\nexport function set_dev_stack(stack) {\n\tdev_stack = stack;\n}\n\n/**\n * Execute a callback with a new dev stack entry\n * @param {() => any} callback - Function to execute\n * @param {DevStackEntry['type']} type - Type of block/component\n * @param {any} component - Component function\n * @param {number} line - Line number\n * @param {number} column - Column number\n * @param {Record<string, any>} [additional] - Any additional properties to add to the dev stack entry\n * @returns {any}\n */\nexport function add_svelte_meta(callback, type, component, line, column, additional) {\n\tconst parent = dev_stack;\n\n\tdev_stack = {\n\t\ttype,\n\t\tfile: component[FILENAME],\n\t\tline,\n\t\tcolumn,\n\t\tparent,\n\t\t...additional\n\t};\n\n\ttry {\n\t\treturn callback();\n\t} finally {\n\t\tdev_stack = parent;\n\t}\n}\n\n/**\n * The current component function. Different from current component context:\n * ```html\n * <!-- App.svelte -->\n * <Foo>\n *   <Bar /> <!-- context == Foo.svelte, function == App.svelte -->\n * </Foo>\n * ```\n * @type {ComponentContext['function']}\n */\nexport let dev_current_component_function = null;\n\n/** @param {ComponentContext['function']} fn */\nexport function set_dev_current_component_function(fn) {\n\tdev_current_component_function = fn;\n}\n\n/**\n * Returns a `[get, set]` pair of functions for working with context in a type-safe way.\n *\n * `get` will throw an error if no parent component called `set`.\n *\n * @template T\n * @returns {[() => T, (context: T) => T]}\n * @since 5.40.0\n */\nexport function createContext() {\n\tconst key = {};\n\n\treturn [\n\t\t() => {\n\t\t\tif (!hasContext(key)) {\n\t\t\t\te.missing_context();\n\t\t\t}\n\n\t\t\treturn getContext(key);\n\t\t},\n\t\t(context) => setContext(key, context)\n\t];\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * [`createContext`](https://svelte.dev/docs/svelte/svelte#createContext) is a type-safe alternative.\n *\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\tconst context_map = get_or_init_context_map('getContext');\n\tconst result = /** @type {T} */ (context_map.get(key));\n\treturn result;\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * [`createContext`](https://svelte.dev/docs/svelte/svelte#createContext) is a type-safe alternative.\n *\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tconst context_map = get_or_init_context_map('setContext');\n\n\tif (async_mode_flag) {\n\t\tvar flags = /** @type {Effect} */ (active_effect).f;\n\t\tvar valid =\n\t\t\t!active_reaction &&\n\t\t\t(flags & BRANCH_EFFECT) !== 0 &&\n\t\t\t// pop() runs synchronously, so this indicates we're setting context after an await\n\t\t\t!(/** @type {ComponentContext} */ (component_context).i);\n\n\t\tif (!valid) {\n\t\t\te.set_context_after_init();\n\t\t}\n\t}\n\n\tcontext_map.set(key, context);\n\treturn context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\tconst context_map = get_or_init_context_map('hasContext');\n\treturn context_map.has(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\tconst context_map = get_or_init_context_map('getAllContexts');\n\treturn /** @type {T} */ (context_map);\n}\n\n/**\n * @param {Record<string, unknown>} props\n * @param {any} runes\n * @param {Function} [fn]\n * @returns {void}\n */\nexport function push(props, runes = false, fn) {\n\tcomponent_context = {\n\t\tp: component_context,\n\t\ti: false,\n\t\tc: null,\n\t\te: null,\n\t\ts: props,\n\t\tx: null,\n\t\tl: legacy_mode_flag && !runes ? { s: null, u: null, $: [] } : null\n\t};\n\n\tif (DEV) {\n\t\t// component function\n\t\tcomponent_context.function = fn;\n\t\tdev_current_component_function = fn;\n\t}\n}\n\n/**\n * @template {Record<string, any>} T\n * @param {T} [component]\n * @returns {T}\n */\nexport function pop(component) {\n\tvar context = /** @type {ComponentContext} */ (component_context);\n\tvar effects = context.e;\n\n\tif (effects !== null) {\n\t\tcontext.e = null;\n\n\t\tfor (var fn of effects) {\n\t\t\tcreate_user_effect(fn);\n\t\t}\n\t}\n\n\tif (component !== undefined) {\n\t\tcontext.x = component;\n\t}\n\n\tcontext.i = true;\n\n\tcomponent_context = context.p;\n\n\tif (DEV) {\n\t\tdev_current_component_function = component_context?.function ?? null;\n\t}\n\n\treturn component ?? /** @type {T} */ ({});\n}\n\n/** @returns {boolean} */\nexport function is_runes() {\n\treturn !legacy_mode_flag || (component_context !== null && component_context.l === null);\n}\n\n/**\n * @param {string} name\n * @returns {Map<unknown, unknown>}\n */\nfunction get_or_init_context_map(name) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component(name);\n\t}\n\n\treturn (component_context.c ??= new Map(get_parent_context(component_context) || undefined));\n}\n\n/**\n * @param {ComponentContext} component_context\n * @returns {Map<unknown, unknown> | null}\n */\nfunction get_parent_context(component_context) {\n\tlet parent = component_context.p;\n\twhile (parent !== null) {\n\t\tconst context_map = parent.c;\n\t\tif (context_map !== null) {\n\t\t\treturn context_map;\n\t\t}\n\t\tparent = parent.p;\n\t}\n\treturn null;\n}\n", "import { run_all } from '../../shared/utils.js';\nimport { is_flushing_sync } from '../reactivity/batch.js';\n\n/** @type {Array<() => void>} */\nlet micro_tasks = [];\n\nfunction run_micro_tasks() {\n\tvar tasks = micro_tasks;\n\tmicro_tasks = [];\n\trun_all(tasks);\n}\n\n/**\n * @param {() => void} fn\n */\nexport function queue_micro_task(fn) {\n\tif (micro_tasks.length === 0 && !is_flushing_sync) {\n\t\tvar tasks = micro_tasks;\n\t\tqueueMicrotask(() => {\n\t\t\t// If this is false, a flushSync happened in the meantime. Do _not_ run new scheduled microtasks in that case\n\t\t\t// as the ordering of microtasks would be broken at that point - consider this case:\n\t\t\t// - queue_micro_task schedules microtask A to flush task X\n\t\t\t// - synchronously after, flushSync runs, processing task X\n\t\t\t// - synchronously after, some other microtask B is scheduled, but not through queue_micro_task but for example a Promise.resolve() in user code\n\t\t\t// - synchronously after, queue_micro_task schedules microtask C to flush task Y\n\t\t\t// - one tick later, microtask A now resolves, flushing task Y before microtask B, which is incorrect\n\t\t\t// This if check prevents that race condition (that realistically will only happen in tests)\n\t\t\tif (tasks === micro_tasks) run_micro_tasks();\n\t\t});\n\t}\n\n\tmicro_tasks.push(fn);\n}\n\n/**\n * Synchronously run any queued tasks.\n */\nexport function flush_tasks() {\n\twhile (micro_tasks.length > 0) {\n\t\trun_micro_tasks();\n\t}\n}\n", "/** @import { Derived, Effect } from '#client' */\n/** @import { Boundary } from './dom/blocks/boundary.js' */\nimport { DEV } from 'esm-env';\nimport { FILENAME } from '../../constants.js';\nimport { is_firefox } from './dom/operations.js';\nimport { ERROR_VALUE, BOUNDARY_EFFECT, EFFECT_RAN } from './constants.js';\nimport { define_property, get_descriptor } from '../shared/utils.js';\nimport { active_effect, active_reaction } from './runtime.js';\n\nconst adjustments = new WeakMap();\n\n/**\n * @param {unknown} error\n */\nexport function handle_error(error) {\n\tvar effect = active_effect;\n\n\t// for unowned deriveds, don't throw until we read the value\n\tif (effect === null) {\n\t\t/** @type {Derived} */ (active_reaction).f |= ERROR_VALUE;\n\t\treturn error;\n\t}\n\n\tif (DEV && error instanceof Error && !adjustments.has(error)) {\n\t\tadjustments.set(error, get_adjustments(error, effect));\n\t}\n\n\tif ((effect.f & EFFECT_RAN) === 0) {\n\t\t// if the error occurred while creating this subtree, we let it\n\t\t// bubble up until it hits a boundary that can handle it\n\t\tif ((effect.f & BOUNDARY_EFFECT) === 0) {\n\t\t\tif (DEV && !effect.parent && error instanceof Error) {\n\t\t\t\tapply_adjustments(error);\n\t\t\t}\n\n\t\t\tthrow error;\n\t\t}\n\n\t\t/** @type {Boundary} */ (effect.b).error(error);\n\t} else {\n\t\t// otherwise we bubble up the effect tree ourselves\n\t\tinvoke_error_boundary(error, effect);\n\t}\n}\n\n/**\n * @param {unknown} error\n * @param {Effect | null} effect\n */\nexport function invoke_error_boundary(error, effect) {\n\twhile (effect !== null) {\n\t\tif ((effect.f & BOUNDARY_EFFECT) !== 0) {\n\t\t\ttry {\n\t\t\t\t/** @type {Boundary} */ (effect.b).error(error);\n\t\t\t\treturn;\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\n\t\teffect = effect.parent;\n\t}\n\n\tif (DEV && error instanceof Error) {\n\t\tapply_adjustments(error);\n\t}\n\n\tthrow error;\n}\n\n/**\n * Add useful information to the error message/stack in development\n * @param {Error} error\n * @param {Effect} effect\n */\nfunction get_adjustments(error, effect) {\n\tconst message_descriptor = get_descriptor(error, 'message');\n\n\t// if the message was already changed and it's not configurable we can't change it\n\t// or it will throw a different error swallowing the original error\n\tif (message_descriptor && !message_descriptor.configurable) return;\n\n\tvar indent = is_firefox ? '  ' : '\\t';\n\tvar component_stack = `\\n${indent}in ${effect.fn?.name || '<unknown>'}`;\n\tvar context = effect.ctx;\n\n\twhile (context !== null) {\n\t\tcomponent_stack += `\\n${indent}in ${context.function?.[FILENAME].split('/').pop()}`;\n\t\tcontext = context.p;\n\t}\n\n\treturn {\n\t\tmessage: error.message + `\\n${component_stack}\\n`,\n\t\tstack: error.stack\n\t\t\t?.split('\\n')\n\t\t\t.filter((line) => !line.includes('svelte/src/internal'))\n\t\t\t.join('\\n')\n\t};\n}\n\n/**\n * @param {Error} error\n */\nfunction apply_adjustments(error) {\n\tconst adjusted = adjustments.get(error);\n\n\tif (adjusted) {\n\t\tdefine_property(error, 'message', {\n\t\t\tvalue: adjusted.message\n\t\t});\n\n\t\tdefine_property(error, 'stack', {\n\t\t\tvalue: adjusted.stack\n\t\t});\n\t}\n}\n", "/** @import { Derived, Signal } from '#client' */\nimport { CLEAN, CONNECTED, DIRTY, MAYBE_DIRTY } from '#client/constants';\n\nconst STATUS_MASK = ~(DIRTY | MAYBE_DIRTY | CLEAN);\n\n/**\n * @param {Signal} signal\n * @param {number} status\n */\nexport function set_signal_status(signal, status) {\n\tsignal.f = (signal.f & STATUS_MASK) | status;\n}\n\n/**\n * Set a derived's status to CLEAN or MAYBE_DIRTY based on its connection state.\n * @param {Derived} derived\n */\nexport function update_derived_status(derived) {\n\t// Only mark as MAYBE_DIRTY if disconnected and has dependencies.\n\tif ((derived.f & CONNECTED) !== 0 || derived.deps === null) {\n\t\tset_signal_status(derived, CLEAN);\n\t} else {\n\t\tset_signal_status(derived, MAYBE_DIRTY);\n\t}\n}\n", "/** @import { Derived, Effect, Value } from '#client' */\nimport { CLEAN, DERIVED, DIRTY, MAYBE_DIRTY, WAS_MARKED } from '#client/constants';\nimport { set_signal_status } from './status.js';\n\n/**\n * @param {Value[] | null} deps\n */\nfunction clear_marked(deps) {\n\tif (deps === null) return;\n\n\tfor (const dep of deps) {\n\t\tif ((dep.f & DERIVED) === 0 || (dep.f & WAS_MARKED) === 0) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tdep.f ^= WAS_MARKED;\n\n\t\tclear_marked(/** @type {Derived} */ (dep).deps);\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {Set<Effect>} dirty_effects\n * @param {Set<Effect>} maybe_dirty_effects\n */\nexport function defer_effect(effect, dirty_effects, maybe_dirty_effects) {\n\tif ((effect.f & DIRTY) !== 0) {\n\t\tdirty_effects.add(effect);\n\t} else if ((effect.f & MAYBE_DIRTY) !== 0) {\n\t\tmaybe_dirty_effects.add(effect);\n\t}\n\n\t// Since we're not executing these effects now, we need to clear any WAS_MARKED flags\n\t// so that other batches can correctly reach these effects during their own traversal\n\tclear_marked(effect.deps);\n\n\t// mark as clean so they get scheduled if they depend on pending async state\n\tset_signal_status(effect, CLEAN);\n}\n", "/** @import { Fork } from 'svelte' */\n/** @import { Derived, Effect, Reaction, Source, Value } from '#client' */\n/** @import { Boundary } from '../dom/blocks/boundary' */\nimport {\n\tBLOCK_EFFECT,\n\tBRANCH_EFFECT,\n\tCLEAN,\n\tDESTROYED,\n\tDIRTY,\n\tEFFECT,\n\tASYNC,\n\tINERT,\n\tRENDER_EFFECT,\n\tROOT_EFFECT,\n\tMAYBE_DIRTY,\n\tDERIVED,\n\tBOUNDARY_EFFECT,\n\tEAGER_EFFECT,\n\tHEAD_EFFECT,\n\tERROR_VALUE,\n\tMANAGED_EFFECT\n} from '#client/constants';\nimport { async_mode_flag } from '../../flags/index.js';\nimport { deferred, define_property } from '../../shared/utils.js';\nimport {\n\tactive_effect,\n\tget,\n\tincrement_write_version,\n\tis_dirty,\n\tupdate_effect\n} from '../runtime.js';\nimport * as e from '../errors.js';\nimport { flush_tasks, queue_micro_task } from '../dom/task.js';\nimport { DEV } from 'esm-env';\nimport { invoke_error_boundary } from '../error-handling.js';\nimport { flush_eager_effects, old_values, set_eager_effects, source, update } from './sources.js';\nimport { eager_effect, unlink_effect } from './effects.js';\nimport { defer_effect } from './utils.js';\nimport { UNINITIALIZED } from '../../../constants.js';\nimport { set_signal_status } from './status.js';\n\n/** @type {Set<Batch>} */\nconst batches = new Set();\n\n/** @type {Batch | null} */\nexport let current_batch = null;\n\n/**\n * This is needed to avoid overwriting inputs in non-async mode\n * TODO 6.0 remove this, as non-async mode will go away\n * @type {Batch | null}\n */\nexport let previous_batch = null;\n\n/**\n * When time travelling (i.e. working in one batch, while other batches\n * still have ongoing work), we ignore the real values of affected\n * signals in favour of their values within the batch\n * @type {Map<Value, any> | null}\n */\nexport let batch_values = null;\n\n// TODO this should really be a property of `batch`\n/** @type {Effect[]} */\nlet queued_root_effects = [];\n\n/** @type {Effect | null} */\nlet last_scheduled_effect = null;\n\nlet is_flushing = false;\nexport let is_flushing_sync = false;\n\nexport class Batch {\n\tcommitted = false;\n\n\t/**\n\t * The current values of any sources that are updated in this batch\n\t * They keys of this map are identical to `this.#previous`\n\t * @type {Map<Source, any>}\n\t */\n\tcurrent = new Map();\n\n\t/**\n\t * The values of any sources that are updated in this batch _before_ those updates took place.\n\t * They keys of this map are identical to `this.#current`\n\t * @type {Map<Source, any>}\n\t */\n\tprevious = new Map();\n\n\t/**\n\t * When the batch is committed (and the DOM is updated), we need to remove old branches\n\t * and append new ones by calling the functions added inside (if/each/key/etc) blocks\n\t * @type {Set<() => void>}\n\t */\n\t#commit_callbacks = new Set();\n\n\t/**\n\t * If a fork is discarded, we need to destroy any effects that are no longer needed\n\t * @type {Set<(batch: Batch) => void>}\n\t */\n\t#discard_callbacks = new Set();\n\n\t/**\n\t * The number of async effects that are currently in flight\n\t */\n\t#pending = 0;\n\n\t/**\n\t * The number of async effects that are currently in flight, _not_ inside a pending boundary\n\t */\n\t#blocking_pending = 0;\n\n\t/**\n\t * A deferred that resolves when the batch is committed, used with `settled()`\n\t * TODO replace with Promise.withResolvers once supported widely enough\n\t * @type {{ promise: Promise<void>, resolve: (value?: any) => void, reject: (reason: unknown) => void } | null}\n\t */\n\t#deferred = null;\n\n\t/**\n\t * Deferred effects (which run after async work has completed) that are DIRTY\n\t * @type {Set<Effect>}\n\t */\n\t#dirty_effects = new Set();\n\n\t/**\n\t * Deferred effects that are MAYBE_DIRTY\n\t * @type {Set<Effect>}\n\t */\n\t#maybe_dirty_effects = new Set();\n\n\t/**\n\t * A set of branches that still exist, but will be destroyed when this batch\n\t * is committed \u2014 we skip over these during `process`\n\t * @type {Set<Effect>}\n\t */\n\tskipped_effects = new Set();\n\n\tis_fork = false;\n\n\t#decrement_queued = false;\n\n\tis_deferred() {\n\t\treturn this.is_fork || this.#blocking_pending > 0;\n\t}\n\n\t/**\n\t *\n\t * @param {Effect[]} root_effects\n\t */\n\tprocess(root_effects) {\n\t\tqueued_root_effects = [];\n\n\t\tthis.apply();\n\n\t\t/** @type {Effect[]} */\n\t\tvar effects = [];\n\n\t\t/** @type {Effect[]} */\n\t\tvar render_effects = [];\n\n\t\tfor (const root of root_effects) {\n\t\t\tthis.#traverse_effect_tree(root, effects, render_effects);\n\t\t\t// Note: #traverse_effect_tree runs block effects eagerly, which can schedule effects,\n\t\t\t// which means queued_root_effects now may be filled again.\n\n\t\t\t// Helpful for debugging reactivity loss that has to do with branches being skipped:\n\t\t\t// log_inconsistent_branches(root);\n\t\t}\n\n\t\tif (this.is_deferred()) {\n\t\t\tthis.#defer_effects(render_effects);\n\t\t\tthis.#defer_effects(effects);\n\t\t} else {\n\t\t\t// append/remove branches\n\t\t\tfor (const fn of this.#commit_callbacks) fn();\n\t\t\tthis.#commit_callbacks.clear();\n\n\t\t\tif (this.#pending === 0) {\n\t\t\t\tthis.#commit();\n\t\t\t}\n\n\t\t\t// If sources are written to, then work needs to happen in a separate batch, else prior sources would be mixed with\n\t\t\t// newly updated sources, which could lead to infinite loops when effects run over and over again.\n\t\t\tprevious_batch = this;\n\t\t\tcurrent_batch = null;\n\n\t\t\tflush_queued_effects(render_effects);\n\t\t\tflush_queued_effects(effects);\n\n\t\t\tprevious_batch = null;\n\n\t\t\tthis.#deferred?.resolve();\n\t\t}\n\n\t\tbatch_values = null;\n\t}\n\n\t/**\n\t * Traverse the effect tree, executing effects or stashing\n\t * them for later execution as appropriate\n\t * @param {Effect} root\n\t * @param {Effect[]} effects\n\t * @param {Effect[]} render_effects\n\t */\n\t#traverse_effect_tree(root, effects, render_effects) {\n\t\troot.f ^= CLEAN;\n\n\t\tvar effect = root.first;\n\n\t\t/** @type {Effect | null} */\n\t\tvar pending_boundary = null;\n\n\t\twhile (effect !== null) {\n\t\t\tvar flags = effect.f;\n\t\t\tvar is_branch = (flags & (BRANCH_EFFECT | ROOT_EFFECT)) !== 0;\n\t\t\tvar is_skippable_branch = is_branch && (flags & CLEAN) !== 0;\n\n\t\t\tvar skip = is_skippable_branch || (flags & INERT) !== 0 || this.skipped_effects.has(effect);\n\n\t\t\t// Inside a `<svelte:boundary>` with a pending snippet,\n\t\t\t// all effects are deferred until the boundary resolves\n\t\t\t// (except block/async effects, which run immediately)\n\t\t\tif (\n\t\t\t\tasync_mode_flag &&\n\t\t\t\tpending_boundary === null &&\n\t\t\t\t(flags & BOUNDARY_EFFECT) !== 0 &&\n\t\t\t\teffect.b?.is_pending\n\t\t\t) {\n\t\t\t\tpending_boundary = effect;\n\t\t\t}\n\n\t\t\tif (!skip && effect.fn !== null) {\n\t\t\t\tif (is_branch) {\n\t\t\t\t\teffect.f ^= CLEAN;\n\t\t\t\t} else if (\n\t\t\t\t\tpending_boundary !== null &&\n\t\t\t\t\t(flags & (EFFECT | RENDER_EFFECT | MANAGED_EFFECT)) !== 0\n\t\t\t\t) {\n\t\t\t\t\t/** @type {Boundary} */ (pending_boundary.b).defer_effect(effect);\n\t\t\t\t} else if ((flags & EFFECT) !== 0) {\n\t\t\t\t\teffects.push(effect);\n\t\t\t\t} else if (async_mode_flag && (flags & (RENDER_EFFECT | MANAGED_EFFECT)) !== 0) {\n\t\t\t\t\trender_effects.push(effect);\n\t\t\t\t} else if (is_dirty(effect)) {\n\t\t\t\t\tif ((flags & BLOCK_EFFECT) !== 0) this.#dirty_effects.add(effect);\n\t\t\t\t\tupdate_effect(effect);\n\t\t\t\t}\n\n\t\t\t\tvar child = effect.first;\n\n\t\t\t\tif (child !== null) {\n\t\t\t\t\teffect = child;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar parent = effect.parent;\n\t\t\teffect = effect.next;\n\n\t\t\twhile (effect === null && parent !== null) {\n\t\t\t\tif (parent === pending_boundary) {\n\t\t\t\t\tpending_boundary = null;\n\t\t\t\t}\n\n\t\t\t\teffect = parent.next;\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {Effect[]} effects\n\t */\n\t#defer_effects(effects) {\n\t\tfor (var i = 0; i < effects.length; i += 1) {\n\t\t\tdefer_effect(effects[i], this.#dirty_effects, this.#maybe_dirty_effects);\n\t\t}\n\t}\n\n\t/**\n\t * Associate a change to a given source with the current\n\t * batch, noting its previous and current values\n\t * @param {Source} source\n\t * @param {any} value\n\t */\n\tcapture(source, value) {\n\t\tif (value !== UNINITIALIZED && !this.previous.has(source)) {\n\t\t\tthis.previous.set(source, value);\n\t\t}\n\n\t\t// Don't save errors in `batch_values`, or they won't be thrown in `runtime.js#get`\n\t\tif ((source.f & ERROR_VALUE) === 0) {\n\t\t\tthis.current.set(source, source.v);\n\t\t\tbatch_values?.set(source, source.v);\n\t\t}\n\t}\n\n\tactivate() {\n\t\tcurrent_batch = this;\n\t\tthis.apply();\n\t}\n\n\tdeactivate() {\n\t\t// If we're not the current batch, don't deactivate,\n\t\t// else we could create zombie batches that are never flushed\n\t\tif (current_batch !== this) return;\n\n\t\tcurrent_batch = null;\n\t\tbatch_values = null;\n\t}\n\n\tflush() {\n\t\tthis.activate();\n\n\t\tif (queued_root_effects.length > 0) {\n\t\t\tflush_effects();\n\n\t\t\tif (current_batch !== null && current_batch !== this) {\n\t\t\t\t// this can happen if a new batch was created during `flush_effects()`\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else if (this.#pending === 0) {\n\t\t\tthis.process([]); // TODO this feels awkward\n\t\t}\n\n\t\tthis.deactivate();\n\t}\n\n\tdiscard() {\n\t\tfor (const fn of this.#discard_callbacks) fn(this);\n\t\tthis.#discard_callbacks.clear();\n\t}\n\n\t#commit() {\n\t\t// If there are other pending batches, they now need to be 'rebased' \u2014\n\t\t// in other words, we re-run block/async effects with the newly\n\t\t// committed state, unless the batch in question has a more\n\t\t// recent value for a given source\n\t\tif (batches.size > 1) {\n\t\t\tthis.previous.clear();\n\n\t\t\tvar previous_batch_values = batch_values;\n\t\t\tvar is_earlier = true;\n\n\t\t\tfor (const batch of batches) {\n\t\t\t\tif (batch === this) {\n\t\t\t\t\tis_earlier = false;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t/** @type {Source[]} */\n\t\t\t\tconst sources = [];\n\n\t\t\t\tfor (const [source, value] of this.current) {\n\t\t\t\t\tif (batch.current.has(source)) {\n\t\t\t\t\t\tif (is_earlier && value !== batch.current.get(source)) {\n\t\t\t\t\t\t\t// bring the value up to date\n\t\t\t\t\t\t\tbatch.current.set(source, value);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// same value or later batch has more recent value,\n\t\t\t\t\t\t\t// no need to re-run these effects\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tsources.push(source);\n\t\t\t\t}\n\n\t\t\t\tif (sources.length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Re-run async/block effects that depend on distinct values changed in both batches\n\t\t\t\tconst others = [...batch.current.keys()].filter((s) => !this.current.has(s));\n\t\t\t\tif (others.length > 0) {\n\t\t\t\t\t// Avoid running queued root effects on the wrong branch\n\t\t\t\t\tvar prev_queued_root_effects = queued_root_effects;\n\t\t\t\t\tqueued_root_effects = [];\n\n\t\t\t\t\t/** @type {Set<Value>} */\n\t\t\t\t\tconst marked = new Set();\n\t\t\t\t\t/** @type {Map<Reaction, boolean>} */\n\t\t\t\t\tconst checked = new Map();\n\t\t\t\t\tfor (const source of sources) {\n\t\t\t\t\t\tmark_effects(source, others, marked, checked);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (queued_root_effects.length > 0) {\n\t\t\t\t\t\tcurrent_batch = batch;\n\t\t\t\t\t\tbatch.apply();\n\n\t\t\t\t\t\tfor (const root of queued_root_effects) {\n\t\t\t\t\t\t\tbatch.#traverse_effect_tree(root, [], []);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// TODO do we need to do anything with the dummy effect arrays?\n\n\t\t\t\t\t\tbatch.deactivate();\n\t\t\t\t\t}\n\n\t\t\t\t\tqueued_root_effects = prev_queued_root_effects;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcurrent_batch = null;\n\t\t\tbatch_values = previous_batch_values;\n\t\t}\n\n\t\tthis.committed = true;\n\t\tbatches.delete(this);\n\t}\n\n\t/**\n\t *\n\t * @param {boolean} blocking\n\t */\n\tincrement(blocking) {\n\t\tthis.#pending += 1;\n\t\tif (blocking) this.#blocking_pending += 1;\n\t}\n\n\t/**\n\t *\n\t * @param {boolean} blocking\n\t */\n\tdecrement(blocking) {\n\t\tthis.#pending -= 1;\n\t\tif (blocking) this.#blocking_pending -= 1;\n\n\t\tif (this.#decrement_queued) return;\n\t\tthis.#decrement_queued = true;\n\n\t\tqueue_micro_task(() => {\n\t\t\tthis.#decrement_queued = false;\n\n\t\t\tif (!this.is_deferred()) {\n\t\t\t\t// we only reschedule previously-deferred effects if we expect\n\t\t\t\t// to be able to run them after processing the batch\n\t\t\t\tthis.revive();\n\t\t\t} else if (queued_root_effects.length > 0) {\n\t\t\t\t// if other effects are scheduled, process the batch _without_\n\t\t\t\t// rescheduling the previously-deferred effects\n\t\t\t\tthis.flush();\n\t\t\t}\n\t\t});\n\t}\n\n\trevive() {\n\t\tfor (const e of this.#dirty_effects) {\n\t\t\tthis.#maybe_dirty_effects.delete(e);\n\t\t\tset_signal_status(e, DIRTY);\n\t\t\tschedule_effect(e);\n\t\t}\n\n\t\tfor (const e of this.#maybe_dirty_effects) {\n\t\t\tset_signal_status(e, MAYBE_DIRTY);\n\t\t\tschedule_effect(e);\n\t\t}\n\n\t\tthis.flush();\n\t}\n\n\t/** @param {() => void} fn */\n\toncommit(fn) {\n\t\tthis.#commit_callbacks.add(fn);\n\t}\n\n\t/** @param {(batch: Batch) => void} fn */\n\tondiscard(fn) {\n\t\tthis.#discard_callbacks.add(fn);\n\t}\n\n\tsettled() {\n\t\treturn (this.#deferred ??= deferred()).promise;\n\t}\n\n\tstatic ensure() {\n\t\tif (current_batch === null) {\n\t\t\tconst batch = (current_batch = new Batch());\n\t\t\tbatches.add(current_batch);\n\n\t\t\tif (!is_flushing_sync) {\n\t\t\t\tqueue_micro_task(() => {\n\t\t\t\t\tif (current_batch !== batch) {\n\t\t\t\t\t\t// a flushSync happened in the meantime\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tbatch.flush();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn current_batch;\n\t}\n\n\tapply() {\n\t\tif (!async_mode_flag || (!this.is_fork && batches.size === 1)) return;\n\n\t\t// if there are multiple batches, we are 'time travelling' \u2014\n\t\t// we need to override values with the ones in this batch...\n\t\tbatch_values = new Map(this.current);\n\n\t\t// ...and undo changes belonging to other batches\n\t\tfor (const batch of batches) {\n\t\t\tif (batch === this) continue;\n\n\t\t\tfor (const [source, previous] of batch.previous) {\n\t\t\t\tif (!batch_values.has(source)) {\n\t\t\t\t\tbatch_values.set(source, previous);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Synchronously flush any pending updates.\n * Returns void if no callback is provided, otherwise returns the result of calling the callback.\n * @template [T=void]\n * @param {(() => T) | undefined} [fn]\n * @returns {T}\n */\nexport function flushSync(fn) {\n\tvar was_flushing_sync = is_flushing_sync;\n\tis_flushing_sync = true;\n\n\ttry {\n\t\tvar result;\n\n\t\tif (fn) {\n\t\t\tif (current_batch !== null) {\n\t\t\t\tflush_effects();\n\t\t\t}\n\n\t\t\tresult = fn();\n\t\t}\n\n\t\twhile (true) {\n\t\t\tflush_tasks();\n\n\t\t\tif (queued_root_effects.length === 0) {\n\t\t\t\tcurrent_batch?.flush();\n\n\t\t\t\t// we need to check again, in case we just updated an `$effect.pending()`\n\t\t\t\tif (queued_root_effects.length === 0) {\n\t\t\t\t\t// this would be reset in `flush_effects()` but since we are early returning here,\n\t\t\t\t\t// we need to reset it here as well in case the first time there's 0 queued root effects\n\t\t\t\t\tlast_scheduled_effect = null;\n\n\t\t\t\t\treturn /** @type {T} */ (result);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tflush_effects();\n\t\t}\n\t} finally {\n\t\tis_flushing_sync = was_flushing_sync;\n\t}\n}\n\nfunction flush_effects() {\n\tis_flushing = true;\n\n\tvar source_stacks = DEV ? new Set() : null;\n\n\ttry {\n\t\tvar flush_count = 0;\n\n\t\twhile (queued_root_effects.length > 0) {\n\t\t\tvar batch = Batch.ensure();\n\n\t\t\tif (flush_count++ > 1000) {\n\t\t\t\tif (DEV) {\n\t\t\t\t\tvar updates = new Map();\n\n\t\t\t\t\tfor (const source of batch.current.keys()) {\n\t\t\t\t\t\tfor (const [stack, update] of source.updated ?? []) {\n\t\t\t\t\t\t\tvar entry = updates.get(stack);\n\n\t\t\t\t\t\t\tif (!entry) {\n\t\t\t\t\t\t\t\tentry = { error: update.error, count: 0 };\n\t\t\t\t\t\t\t\tupdates.set(stack, entry);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tentry.count += update.count;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (const update of updates.values()) {\n\t\t\t\t\t\tif (update.error) {\n\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\tconsole.error(update.error);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tinfinite_loop_guard();\n\t\t\t}\n\n\t\t\tbatch.process(queued_root_effects);\n\t\t\told_values.clear();\n\n\t\t\tif (DEV) {\n\t\t\t\tfor (const source of batch.current.keys()) {\n\t\t\t\t\t/** @type {Set<Source>} */ (source_stacks).add(source);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} finally {\n\t\tis_flushing = false;\n\n\t\tlast_scheduled_effect = null;\n\n\t\tif (DEV) {\n\t\t\tfor (const source of /** @type {Set<Source>} */ (source_stacks)) {\n\t\t\t\tsource.updated = null;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction infinite_loop_guard() {\n\ttry {\n\t\te.effect_update_depth_exceeded();\n\t} catch (error) {\n\t\tif (DEV) {\n\t\t\t// stack contains no useful information, replace it\n\t\t\tdefine_property(error, 'stack', { value: '' });\n\t\t}\n\n\t\t// Best effort: invoke the boundary nearest the most recent\n\t\t// effect and hope that it's relevant to the infinite loop\n\t\tinvoke_error_boundary(error, last_scheduled_effect);\n\t}\n}\n\n/** @type {Set<Effect> | null} */\nexport let eager_block_effects = null;\n\n/**\n * @param {Array<Effect>} effects\n * @returns {void}\n */\nfunction flush_queued_effects(effects) {\n\tvar length = effects.length;\n\tif (length === 0) return;\n\n\tvar i = 0;\n\n\twhile (i < length) {\n\t\tvar effect = effects[i++];\n\n\t\tif ((effect.f & (DESTROYED | INERT)) === 0 && is_dirty(effect)) {\n\t\t\teager_block_effects = new Set();\n\n\t\t\tupdate_effect(effect);\n\n\t\t\t// Effects with no dependencies or teardown do not get added to the effect tree.\n\t\t\t// Deferred effects (e.g. `$effect(...)`) _are_ added to the tree because we\n\t\t\t// don't know if we need to keep them until they are executed. Doing the check\n\t\t\t// here (rather than in `update_effect`) allows us to skip the work for\n\t\t\t// immediate effects.\n\t\t\tif (effect.deps === null && effect.first === null && effect.nodes === null) {\n\t\t\t\t// if there's no teardown or abort controller we completely unlink\n\t\t\t\t// the effect from the graph\n\t\t\t\tif (effect.teardown === null && effect.ac === null) {\n\t\t\t\t\t// remove this effect from the graph\n\t\t\t\t\tunlink_effect(effect);\n\t\t\t\t} else {\n\t\t\t\t\t// keep the effect in the graph, but free up some memory\n\t\t\t\t\teffect.fn = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If update_effect() has a flushSync() in it, we may have flushed another flush_queued_effects(),\n\t\t\t// which already handled this logic and did set eager_block_effects to null.\n\t\t\tif (eager_block_effects?.size > 0) {\n\t\t\t\told_values.clear();\n\n\t\t\t\tfor (const e of eager_block_effects) {\n\t\t\t\t\t// Skip eager effects that have already been unmounted\n\t\t\t\t\tif ((e.f & (DESTROYED | INERT)) !== 0) continue;\n\n\t\t\t\t\t// Run effects in order from ancestor to descendant, else we could run into nullpointers\n\t\t\t\t\t/** @type {Effect[]} */\n\t\t\t\t\tconst ordered_effects = [e];\n\t\t\t\t\tlet ancestor = e.parent;\n\t\t\t\t\twhile (ancestor !== null) {\n\t\t\t\t\t\tif (eager_block_effects.has(ancestor)) {\n\t\t\t\t\t\t\teager_block_effects.delete(ancestor);\n\t\t\t\t\t\t\tordered_effects.push(ancestor);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tancestor = ancestor.parent;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let j = ordered_effects.length - 1; j >= 0; j--) {\n\t\t\t\t\t\tconst e = ordered_effects[j];\n\t\t\t\t\t\t// Skip eager effects that have already been unmounted\n\t\t\t\t\t\tif ((e.f & (DESTROYED | INERT)) !== 0) continue;\n\t\t\t\t\t\tupdate_effect(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\teager_block_effects.clear();\n\t\t\t}\n\t\t}\n\t}\n\n\teager_block_effects = null;\n}\n\n/**\n * This is similar to `mark_reactions`, but it only marks async/block effects\n * depending on `value` and at least one of the other `sources`, so that\n * these effects can re-run after another batch has been committed\n * @param {Value} value\n * @param {Source[]} sources\n * @param {Set<Value>} marked\n * @param {Map<Reaction, boolean>} checked\n */\nfunction mark_effects(value, sources, marked, checked) {\n\tif (marked.has(value)) return;\n\tmarked.add(value);\n\n\tif (value.reactions !== null) {\n\t\tfor (const reaction of value.reactions) {\n\t\t\tconst flags = reaction.f;\n\n\t\t\tif ((flags & DERIVED) !== 0) {\n\t\t\t\tmark_effects(/** @type {Derived} */ (reaction), sources, marked, checked);\n\t\t\t} else if (\n\t\t\t\t(flags & (ASYNC | BLOCK_EFFECT)) !== 0 &&\n\t\t\t\t(flags & DIRTY) === 0 &&\n\t\t\t\tdepends_on(reaction, sources, checked)\n\t\t\t) {\n\t\t\t\tset_signal_status(reaction, DIRTY);\n\t\t\t\tschedule_effect(/** @type {Effect} */ (reaction));\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * When committing a fork, we need to trigger eager effects so that\n * any `$state.eager(...)` expressions update immediately. This\n * function allows us to discover them\n * @param {Value} value\n * @param {Set<Effect>} effects\n */\nfunction mark_eager_effects(value, effects) {\n\tif (value.reactions === null) return;\n\n\tfor (const reaction of value.reactions) {\n\t\tconst flags = reaction.f;\n\n\t\tif ((flags & DERIVED) !== 0) {\n\t\t\tmark_eager_effects(/** @type {Derived} */ (reaction), effects);\n\t\t} else if ((flags & EAGER_EFFECT) !== 0) {\n\t\t\tset_signal_status(reaction, DIRTY);\n\t\t\teffects.add(/** @type {Effect} */ (reaction));\n\t\t}\n\t}\n}\n\n/**\n * @param {Reaction} reaction\n * @param {Source[]} sources\n * @param {Map<Reaction, boolean>} checked\n */\nfunction depends_on(reaction, sources, checked) {\n\tconst depends = checked.get(reaction);\n\tif (depends !== undefined) return depends;\n\n\tif (reaction.deps !== null) {\n\t\tfor (const dep of reaction.deps) {\n\t\t\tif (sources.includes(dep)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ((dep.f & DERIVED) !== 0 && depends_on(/** @type {Derived} */ (dep), sources, checked)) {\n\t\t\t\tchecked.set(/** @type {Derived} */ (dep), true);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\tchecked.set(reaction, false);\n\n\treturn false;\n}\n\n/**\n * @param {Effect} signal\n * @returns {void}\n */\nexport function schedule_effect(signal) {\n\tvar effect = (last_scheduled_effect = signal);\n\n\twhile (effect.parent !== null) {\n\t\teffect = effect.parent;\n\t\tvar flags = effect.f;\n\n\t\t// if the effect is being scheduled because a parent (each/await/etc) block\n\t\t// updated an internal source, bail out or we'll cause a second flush\n\t\tif (\n\t\t\tis_flushing &&\n\t\t\teffect === active_effect &&\n\t\t\t(flags & BLOCK_EFFECT) !== 0 &&\n\t\t\t(flags & HEAD_EFFECT) === 0\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ((flags & (ROOT_EFFECT | BRANCH_EFFECT)) !== 0) {\n\t\t\tif ((flags & CLEAN) === 0) return;\n\t\t\teffect.f ^= CLEAN;\n\t\t}\n\t}\n\n\tqueued_root_effects.push(effect);\n}\n\n/** @type {Source<number>[]} */\nlet eager_versions = [];\n\nfunction eager_flush() {\n\ttry {\n\t\tflushSync(() => {\n\t\t\tfor (const version of eager_versions) {\n\t\t\t\tupdate(version);\n\t\t\t}\n\t\t});\n\t} finally {\n\t\teager_versions = [];\n\t}\n}\n\n/**\n * Implementation of `$state.eager(fn())`\n * @template T\n * @param {() => T} fn\n * @returns {T}\n */\nexport function eager(fn) {\n\tvar version = source(0);\n\tvar initial = true;\n\tvar value = /** @type {T} */ (undefined);\n\n\tget(version);\n\n\teager_effect(() => {\n\t\tif (initial) {\n\t\t\t// the first time this runs, we create an eager effect\n\t\t\t// that will run eagerly whenever the expression changes\n\t\t\tvar previous_batch_values = batch_values;\n\n\t\t\ttry {\n\t\t\t\tbatch_values = null;\n\t\t\t\tvalue = fn();\n\t\t\t} finally {\n\t\t\t\tbatch_values = previous_batch_values;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// the second time this effect runs, it's to schedule a\n\t\t// `version` update. since this will recreate the effect,\n\t\t// we don't need to evaluate the expression here\n\t\tif (eager_versions.length === 0) {\n\t\t\tqueue_micro_task(eager_flush);\n\t\t}\n\n\t\teager_versions.push(version);\n\t});\n\n\tinitial = false;\n\n\treturn value;\n}\n\n/**\n * Creates a 'fork', in which state changes are evaluated but not applied to the DOM.\n * This is useful for speculatively loading data (for example) when you suspect that\n * the user is about to take some action.\n *\n * Frameworks like SvelteKit can use this to preload data when the user touches or\n * hovers over a link, making any subsequent navigation feel instantaneous.\n *\n * The `fn` parameter is a synchronous function that modifies some state. The\n * state changes will be reverted after the fork is initialised, then reapplied\n * if and when the fork is eventually committed.\n *\n * When it becomes clear that a fork will _not_ be committed (e.g. because the\n * user navigated elsewhere), it must be discarded to avoid leaking memory.\n *\n * @param {() => void} fn\n * @returns {Fork}\n * @since 5.42\n */\nexport function fork(fn) {\n\tif (!async_mode_flag) {\n\t\te.experimental_async_required('fork');\n\t}\n\n\tif (current_batch !== null) {\n\t\te.fork_timing();\n\t}\n\n\tvar batch = Batch.ensure();\n\tbatch.is_fork = true;\n\tbatch_values = new Map();\n\n\tvar committed = false;\n\tvar settled = batch.settled();\n\n\tflushSync(fn);\n\n\t// revert state changes\n\tfor (var [source, value] of batch.previous) {\n\t\tsource.v = value;\n\t}\n\n\t// make writable deriveds dirty, so they recalculate correctly\n\tfor (source of batch.current.keys()) {\n\t\tif ((source.f & DERIVED) !== 0) {\n\t\t\tset_signal_status(source, DIRTY);\n\t\t}\n\t}\n\n\treturn {\n\t\tcommit: async () => {\n\t\t\tif (committed) {\n\t\t\t\tawait settled;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!batches.has(batch)) {\n\t\t\t\te.fork_discarded();\n\t\t\t}\n\n\t\t\tcommitted = true;\n\n\t\t\tbatch.is_fork = false;\n\n\t\t\t// apply changes and update write versions so deriveds see the change\n\t\t\tfor (var [source, value] of batch.current) {\n\t\t\t\tsource.v = value;\n\t\t\t\tsource.wv = increment_write_version();\n\t\t\t}\n\n\t\t\t// trigger any `$state.eager(...)` expressions with the new state.\n\t\t\t// eager effects don't get scheduled like other effects, so we\n\t\t\t// can't just encounter them during traversal, we need to\n\t\t\t// proactively flush them\n\t\t\t// TODO maybe there's a better implementation?\n\t\t\tflushSync(() => {\n\t\t\t\t/** @type {Set<Effect>} */\n\t\t\t\tvar eager_effects = new Set();\n\n\t\t\t\tfor (var source of batch.current.keys()) {\n\t\t\t\t\tmark_eager_effects(source, eager_effects);\n\t\t\t\t}\n\n\t\t\t\tset_eager_effects(eager_effects);\n\t\t\t\tflush_eager_effects();\n\t\t\t});\n\n\t\t\tbatch.revive();\n\t\t\tawait settled;\n\t\t},\n\t\tdiscard: () => {\n\t\t\tif (!committed && batches.has(batch)) {\n\t\t\t\tbatches.delete(batch);\n\t\t\t\tbatch.discard();\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * Forcibly remove all current batches, to prevent cross-talk between tests\n */\nexport function clear() {\n\tbatches.clear();\n}\n", "import { get, tick, untrack } from '../internal/client/runtime.js';\nimport { effect_tracking, render_effect } from '../internal/client/reactivity/effects.js';\nimport { source, increment } from '../internal/client/reactivity/sources.js';\nimport { tag } from '../internal/client/dev/tracing.js';\nimport { DEV } from 'esm-env';\nimport { queue_micro_task } from '../internal/client/dom/task.js';\n\n/**\n * Returns a `subscribe` function that integrates external event-based systems with Svelte's reactivity.\n * It's particularly useful for integrating with web APIs like `MediaQuery`, `IntersectionObserver`, or `WebSocket`.\n *\n * If `subscribe` is called inside an effect (including indirectly, for example inside a getter),\n * the `start` callback will be called with an `update` function. Whenever `update` is called, the effect re-runs.\n *\n * If `start` returns a cleanup function, it will be called when the effect is destroyed.\n *\n * If `subscribe` is called in multiple effects, `start` will only be called once as long as the effects\n * are active, and the returned teardown function will only be called when all effects are destroyed.\n *\n * It's best understood with an example. Here's an implementation of [`MediaQuery`](https://svelte.dev/docs/svelte/svelte-reactivity#MediaQuery):\n *\n * ```js\n * import { createSubscriber } from 'svelte/reactivity';\n * import { on } from 'svelte/events';\n *\n * export class MediaQuery {\n * \t#query;\n * \t#subscribe;\n *\n * \tconstructor(query) {\n * \t\tthis.#query = window.matchMedia(`(${query})`);\n *\n * \t\tthis.#subscribe = createSubscriber((update) => {\n * \t\t\t// when the `change` event occurs, re-run any effects that read `this.current`\n * \t\t\tconst off = on(this.#query, 'change', update);\n *\n * \t\t\t// stop listening when all the effects are destroyed\n * \t\t\treturn () => off();\n * \t\t});\n * \t}\n *\n * \tget current() {\n * \t\t// This makes the getter reactive, if read in an effect\n * \t\tthis.#subscribe();\n *\n * \t\t// Return the current state of the query, whether or not we're in an effect\n * \t\treturn this.#query.matches;\n * \t}\n * }\n * ```\n * @param {(update: () => void) => (() => void) | void} start\n * @since 5.7.0\n */\nexport function createSubscriber(start) {\n\tlet subscribers = 0;\n\tlet version = source(0);\n\t/** @type {(() => void) | void} */\n\tlet stop;\n\n\tif (DEV) {\n\t\ttag(version, 'createSubscriber version');\n\t}\n\n\treturn () => {\n\t\tif (effect_tracking()) {\n\t\t\tget(version);\n\n\t\t\trender_effect(() => {\n\t\t\t\tif (subscribers === 0) {\n\t\t\t\t\tstop = untrack(() => start(() => increment(version)));\n\t\t\t\t}\n\n\t\t\t\tsubscribers += 1;\n\n\t\t\t\treturn () => {\n\t\t\t\t\tqueue_micro_task(() => {\n\t\t\t\t\t\t// Only count down after a microtask, else we would reach 0 before our own render effect reruns,\n\t\t\t\t\t\t// but reach 1 again when the tick callback of the prior teardown runs. That would mean we\n\t\t\t\t\t\t// re-subcribe unnecessarily and create a memory leak because the old subscription is never cleaned up.\n\t\t\t\t\t\tsubscribers -= 1;\n\n\t\t\t\t\t\tif (subscribers === 0) {\n\t\t\t\t\t\t\tstop?.();\n\t\t\t\t\t\t\tstop = undefined;\n\t\t\t\t\t\t\t// Increment the version to ensure any dependent deriveds are marked dirty when the subscription is picked up again later.\n\t\t\t\t\t\t\t// If we didn't do this then the comparison of write versions would determine that the derived has a later version than\n\t\t\t\t\t\t\t// the subscriber, and it would not be re-run.\n\t\t\t\t\t\t\tincrement(version);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n}\n", "/** @import { Effect, Source, TemplateNode, } from '#client' */\nimport {\n\tBOUNDARY_EFFECT,\n\tCOMMENT_NODE,\n\tDIRTY,\n\tEFFECT_PRESERVED,\n\tEFFECT_TRANSPARENT,\n\tMAYBE_DIRTY\n} from '#client/constants';\nimport { HYDRATION_START_ELSE } from '../../../../constants.js';\nimport { component_context, set_component_context } from '../../context.js';\nimport { handle_error, invoke_error_boundary } from '../../error-handling.js';\nimport {\n\tblock,\n\tbranch,\n\tdestroy_effect,\n\tmove_effect,\n\tpause_effect\n} from '../../reactivity/effects.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tget,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../runtime.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tnext,\n\tskip_nodes,\n\tset_hydrate_node\n} from '../hydration.js';\nimport { queue_micro_task } from '../task.js';\nimport * as e from '../../errors.js';\nimport * as w from '../../warnings.js';\nimport { DEV } from 'esm-env';\nimport { Batch, schedule_effect } from '../../reactivity/batch.js';\nimport { internal_set, source } from '../../reactivity/sources.js';\nimport { tag } from '../../dev/tracing.js';\nimport { createSubscriber } from '../../../../reactivity/create-subscriber.js';\nimport { create_text } from '../operations.js';\nimport { defer_effect } from '../../reactivity/utils.js';\nimport { set_signal_status } from '../../reactivity/status.js';\n\n/**\n * @typedef {{\n * \t onerror?: (error: unknown, reset: () => void) => void;\n *   failed?: (anchor: Node, error: () => unknown, reset: () => () => void) => void;\n *   pending?: (anchor: Node) => void;\n * }} BoundaryProps\n */\n\nvar flags = EFFECT_TRANSPARENT | EFFECT_PRESERVED | BOUNDARY_EFFECT;\n\n/**\n * @param {TemplateNode} node\n * @param {BoundaryProps} props\n * @param {((anchor: Node) => void)} children\n * @returns {void}\n */\nexport function boundary(node, props, children) {\n\tnew Boundary(node, props, children);\n}\n\nexport class Boundary {\n\t/** @type {Boundary | null} */\n\tparent;\n\n\tis_pending = false;\n\n\t/** @type {TemplateNode} */\n\t#anchor;\n\n\t/** @type {TemplateNode | null} */\n\t#hydrate_open = hydrating ? hydrate_node : null;\n\n\t/** @type {BoundaryProps} */\n\t#props;\n\n\t/** @type {((anchor: Node) => void)} */\n\t#children;\n\n\t/** @type {Effect} */\n\t#effect;\n\n\t/** @type {Effect | null} */\n\t#main_effect = null;\n\n\t/** @type {Effect | null} */\n\t#pending_effect = null;\n\n\t/** @type {Effect | null} */\n\t#failed_effect = null;\n\n\t/** @type {DocumentFragment | null} */\n\t#offscreen_fragment = null;\n\n\t/** @type {TemplateNode | null} */\n\t#pending_anchor = null;\n\n\t#local_pending_count = 0;\n\t#pending_count = 0;\n\t#pending_count_update_queued = false;\n\n\t#is_creating_fallback = false;\n\n\t/** @type {Set<Effect>} */\n\t#dirty_effects = new Set();\n\n\t/** @type {Set<Effect>} */\n\t#maybe_dirty_effects = new Set();\n\n\t/**\n\t * A source containing the number of pending async deriveds/expressions.\n\t * Only created if `$effect.pending()` is used inside the boundary,\n\t * otherwise updating the source results in needless `Batch.ensure()`\n\t * calls followed by no-op flushes\n\t * @type {Source<number> | null}\n\t */\n\t#effect_pending = null;\n\n\t#effect_pending_subscriber = createSubscriber(() => {\n\t\tthis.#effect_pending = source(this.#local_pending_count);\n\n\t\tif (DEV) {\n\t\t\ttag(this.#effect_pending, '$effect.pending()');\n\t\t}\n\n\t\treturn () => {\n\t\t\tthis.#effect_pending = null;\n\t\t};\n\t});\n\n\t/**\n\t * @param {TemplateNode} node\n\t * @param {BoundaryProps} props\n\t * @param {((anchor: Node) => void)} children\n\t */\n\tconstructor(node, props, children) {\n\t\tthis.#anchor = node;\n\t\tthis.#props = props;\n\t\tthis.#children = children;\n\n\t\tthis.parent = /** @type {Effect} */ (active_effect).b;\n\n\t\tthis.is_pending = !!this.#props.pending;\n\n\t\tthis.#effect = block(() => {\n\t\t\t/** @type {Effect} */ (active_effect).b = this;\n\n\t\t\tif (hydrating) {\n\t\t\t\tconst comment = this.#hydrate_open;\n\t\t\t\thydrate_next();\n\n\t\t\t\tconst server_rendered_pending =\n\t\t\t\t\t/** @type {Comment} */ (comment).nodeType === COMMENT_NODE &&\n\t\t\t\t\t/** @type {Comment} */ (comment).data === HYDRATION_START_ELSE;\n\n\t\t\t\tif (server_rendered_pending) {\n\t\t\t\t\tthis.#hydrate_pending_content();\n\t\t\t\t} else {\n\t\t\t\t\tthis.#hydrate_resolved_content();\n\n\t\t\t\t\tif (this.#pending_count === 0) {\n\t\t\t\t\t\tthis.is_pending = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar anchor = this.#get_anchor();\n\n\t\t\t\ttry {\n\t\t\t\t\tthis.#main_effect = branch(() => children(anchor));\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthis.error(error);\n\t\t\t\t}\n\n\t\t\t\tif (this.#pending_count > 0) {\n\t\t\t\t\tthis.#show_pending_snippet();\n\t\t\t\t} else {\n\t\t\t\t\tthis.is_pending = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn () => {\n\t\t\t\tthis.#pending_anchor?.remove();\n\t\t\t};\n\t\t}, flags);\n\n\t\tif (hydrating) {\n\t\t\tthis.#anchor = hydrate_node;\n\t\t}\n\t}\n\n\t#hydrate_resolved_content() {\n\t\ttry {\n\t\t\tthis.#main_effect = branch(() => this.#children(this.#anchor));\n\t\t} catch (error) {\n\t\t\tthis.error(error);\n\t\t}\n\t}\n\n\t#hydrate_pending_content() {\n\t\tconst pending = this.#props.pending;\n\t\tif (!pending) return;\n\n\t\tthis.#pending_effect = branch(() => pending(this.#anchor));\n\n\t\tqueue_micro_task(() => {\n\t\t\tvar anchor = this.#get_anchor();\n\n\t\t\tthis.#main_effect = this.#run(() => {\n\t\t\t\tBatch.ensure();\n\t\t\t\treturn branch(() => this.#children(anchor));\n\t\t\t});\n\n\t\t\tif (this.#pending_count > 0) {\n\t\t\t\tthis.#show_pending_snippet();\n\t\t\t} else {\n\t\t\t\tpause_effect(/** @type {Effect} */ (this.#pending_effect), () => {\n\t\t\t\t\tthis.#pending_effect = null;\n\t\t\t\t});\n\n\t\t\t\tthis.is_pending = false;\n\t\t\t}\n\t\t});\n\t}\n\n\t#get_anchor() {\n\t\tvar anchor = this.#anchor;\n\n\t\tif (this.is_pending) {\n\t\t\tthis.#pending_anchor = create_text();\n\t\t\tthis.#anchor.before(this.#pending_anchor);\n\n\t\t\tanchor = this.#pending_anchor;\n\t\t}\n\n\t\treturn anchor;\n\t}\n\n\t/**\n\t * Defer an effect inside a pending boundary until the boundary resolves\n\t * @param {Effect} effect\n\t */\n\tdefer_effect(effect) {\n\t\tdefer_effect(effect, this.#dirty_effects, this.#maybe_dirty_effects);\n\t}\n\n\t/**\n\t * Returns `false` if the effect exists inside a boundary whose pending snippet is shown\n\t * @returns {boolean}\n\t */\n\tis_rendered() {\n\t\treturn !this.is_pending && (!this.parent || this.parent.is_rendered());\n\t}\n\n\thas_pending_snippet() {\n\t\treturn !!this.#props.pending;\n\t}\n\n\t/**\n\t * @param {() => Effect | null} fn\n\t */\n\t#run(fn) {\n\t\tvar previous_effect = active_effect;\n\t\tvar previous_reaction = active_reaction;\n\t\tvar previous_ctx = component_context;\n\n\t\tset_active_effect(this.#effect);\n\t\tset_active_reaction(this.#effect);\n\t\tset_component_context(this.#effect.ctx);\n\n\t\ttry {\n\t\t\treturn fn();\n\t\t} catch (e) {\n\t\t\thandle_error(e);\n\t\t\treturn null;\n\t\t} finally {\n\t\t\tset_active_effect(previous_effect);\n\t\t\tset_active_reaction(previous_reaction);\n\t\t\tset_component_context(previous_ctx);\n\t\t}\n\t}\n\n\t#show_pending_snippet() {\n\t\tconst pending = /** @type {(anchor: Node) => void} */ (this.#props.pending);\n\n\t\tif (this.#main_effect !== null) {\n\t\t\tthis.#offscreen_fragment = document.createDocumentFragment();\n\t\t\tthis.#offscreen_fragment.append(/** @type {TemplateNode} */ (this.#pending_anchor));\n\t\t\tmove_effect(this.#main_effect, this.#offscreen_fragment);\n\t\t}\n\n\t\tif (this.#pending_effect === null) {\n\t\t\tthis.#pending_effect = branch(() => pending(this.#anchor));\n\t\t}\n\t}\n\n\t/**\n\t * Updates the pending count associated with the currently visible pending snippet,\n\t * if any, such that we can replace the snippet with content once work is done\n\t * @param {1 | -1} d\n\t */\n\t#update_pending_count(d) {\n\t\tif (!this.has_pending_snippet()) {\n\t\t\tif (this.parent) {\n\t\t\t\tthis.parent.#update_pending_count(d);\n\t\t\t}\n\n\t\t\t// if there's no parent, we're in a scope with no pending snippet\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#pending_count += d;\n\n\t\tif (this.#pending_count === 0) {\n\t\t\tthis.is_pending = false;\n\n\t\t\t// any effects that were encountered and deferred during traversal\n\t\t\t// should be rescheduled \u2014 after the next traversal (which will happen\n\t\t\t// immediately, due to the same update that brought us here)\n\t\t\t// the effects will be flushed\n\t\t\tfor (const e of this.#dirty_effects) {\n\t\t\t\tset_signal_status(e, DIRTY);\n\t\t\t\tschedule_effect(e);\n\t\t\t}\n\n\t\t\tfor (const e of this.#maybe_dirty_effects) {\n\t\t\t\tset_signal_status(e, MAYBE_DIRTY);\n\t\t\t\tschedule_effect(e);\n\t\t\t}\n\n\t\t\tthis.#dirty_effects.clear();\n\t\t\tthis.#maybe_dirty_effects.clear();\n\n\t\t\tif (this.#pending_effect) {\n\t\t\t\tpause_effect(this.#pending_effect, () => {\n\t\t\t\t\tthis.#pending_effect = null;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this.#offscreen_fragment) {\n\t\t\t\tthis.#anchor.before(this.#offscreen_fragment);\n\t\t\t\tthis.#offscreen_fragment = null;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Update the source that powers `$effect.pending()` inside this boundary,\n\t * and controls when the current `pending` snippet (if any) is removed.\n\t * Do not call from inside the class\n\t * @param {1 | -1} d\n\t */\n\tupdate_pending_count(d) {\n\t\tthis.#update_pending_count(d);\n\n\t\tthis.#local_pending_count += d;\n\n\t\tif (!this.#effect_pending || this.#pending_count_update_queued) return;\n\t\tthis.#pending_count_update_queued = true;\n\n\t\tqueue_micro_task(() => {\n\t\t\tthis.#pending_count_update_queued = false;\n\t\t\tif (this.#effect_pending) {\n\t\t\t\tinternal_set(this.#effect_pending, this.#local_pending_count);\n\t\t\t}\n\t\t});\n\t}\n\n\tget_effect_pending() {\n\t\tthis.#effect_pending_subscriber();\n\t\treturn get(/** @type {Source<number>} */ (this.#effect_pending));\n\t}\n\n\t/** @param {unknown} error */\n\terror(error) {\n\t\tvar onerror = this.#props.onerror;\n\t\tlet failed = this.#props.failed;\n\n\t\t// If we have nothing to capture the error, or if we hit an error while\n\t\t// rendering the fallback, re-throw for another boundary to handle\n\t\tif (this.#is_creating_fallback || (!onerror && !failed)) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (this.#main_effect) {\n\t\t\tdestroy_effect(this.#main_effect);\n\t\t\tthis.#main_effect = null;\n\t\t}\n\n\t\tif (this.#pending_effect) {\n\t\t\tdestroy_effect(this.#pending_effect);\n\t\t\tthis.#pending_effect = null;\n\t\t}\n\n\t\tif (this.#failed_effect) {\n\t\t\tdestroy_effect(this.#failed_effect);\n\t\t\tthis.#failed_effect = null;\n\t\t}\n\n\t\tif (hydrating) {\n\t\t\tset_hydrate_node(/** @type {TemplateNode} */ (this.#hydrate_open));\n\t\t\tnext();\n\t\t\tset_hydrate_node(skip_nodes());\n\t\t}\n\n\t\tvar did_reset = false;\n\t\tvar calling_on_error = false;\n\n\t\tconst reset = () => {\n\t\t\tif (did_reset) {\n\t\t\t\tw.svelte_boundary_reset_noop();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdid_reset = true;\n\n\t\t\tif (calling_on_error) {\n\t\t\t\te.svelte_boundary_reset_onerror();\n\t\t\t}\n\n\t\t\t// If the failure happened while flushing effects, current_batch can be null\n\t\t\tBatch.ensure();\n\n\t\t\tthis.#local_pending_count = 0;\n\n\t\t\tif (this.#failed_effect !== null) {\n\t\t\t\tpause_effect(this.#failed_effect, () => {\n\t\t\t\t\tthis.#failed_effect = null;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// we intentionally do not try to find the nearest pending boundary. If this boundary has one, we'll render it on reset\n\t\t\t// but it would be really weird to show the parent's boundary on a child reset.\n\t\t\tthis.is_pending = this.has_pending_snippet();\n\n\t\t\tthis.#main_effect = this.#run(() => {\n\t\t\t\tthis.#is_creating_fallback = false;\n\t\t\t\treturn branch(() => this.#children(this.#anchor));\n\t\t\t});\n\n\t\t\tif (this.#pending_count > 0) {\n\t\t\t\tthis.#show_pending_snippet();\n\t\t\t} else {\n\t\t\t\tthis.is_pending = false;\n\t\t\t}\n\t\t};\n\n\t\tvar previous_reaction = active_reaction;\n\n\t\ttry {\n\t\t\tset_active_reaction(null);\n\t\t\tcalling_on_error = true;\n\t\t\tonerror?.(error, reset);\n\t\t\tcalling_on_error = false;\n\t\t} catch (error) {\n\t\t\tinvoke_error_boundary(error, this.#effect && this.#effect.parent);\n\t\t} finally {\n\t\t\tset_active_reaction(previous_reaction);\n\t\t}\n\n\t\tif (failed) {\n\t\t\tqueue_micro_task(() => {\n\t\t\t\tthis.#failed_effect = this.#run(() => {\n\t\t\t\t\tBatch.ensure();\n\t\t\t\t\tthis.#is_creating_fallback = true;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn branch(() => {\n\t\t\t\t\t\t\tfailed(\n\t\t\t\t\t\t\t\tthis.#anchor,\n\t\t\t\t\t\t\t\t() => error,\n\t\t\t\t\t\t\t\t() => reset\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tinvoke_error_boundary(error, /** @type {Effect} */ (this.#effect.parent));\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.#is_creating_fallback = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport function get_boundary() {\n\treturn /** @type {Boundary} */ (/** @type {Effect} */ (active_effect).b);\n}\n\nexport function pending() {\n\tif (active_effect === null) {\n\t\te.effect_pending_outside_reaction();\n\t}\n\n\tvar boundary = active_effect.b;\n\n\tif (boundary === null) {\n\t\treturn 0; // TODO eventually we will need this to be global\n\t}\n\n\treturn boundary.get_effect_pending();\n}\n", "/** @import { Blocker, Effect, Value } from '#client' */\nimport { DESTROYED, STALE_REACTION } from '#client/constants';\nimport { DEV } from 'esm-env';\nimport {\n\tcomponent_context,\n\tdev_stack,\n\tis_runes,\n\tset_component_context,\n\tset_dev_stack\n} from '../context.js';\nimport { get_boundary } from '../dom/blocks/boundary.js';\nimport { invoke_error_boundary } from '../error-handling.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction\n} from '../runtime.js';\nimport { Batch, current_batch } from './batch.js';\nimport {\n\tasync_derived,\n\tcurrent_async_effect,\n\tderived,\n\tderived_safe_equal,\n\tset_from_async_derived\n} from './deriveds.js';\nimport { aborted } from './effects.js';\n\n/**\n * @param {Blocker[]} blockers\n * @param {Array<() => any>} sync\n * @param {Array<() => Promise<any>>} async\n * @param {(values: Value[]) => any} fn\n */\nexport function flatten(blockers, sync, async, fn) {\n\tconst d = is_runes() ? derived : derived_safe_equal;\n\n\t// Filter out already-settled blockers - no need to wait for them\n\tvar pending = blockers.filter((b) => !b.settled);\n\n\tif (async.length === 0 && pending.length === 0) {\n\t\tfn(sync.map(d));\n\t\treturn;\n\t}\n\n\tvar batch = current_batch;\n\tvar parent = /** @type {Effect} */ (active_effect);\n\n\tvar restore = capture();\n\tvar blocker_promise =\n\t\tpending.length === 1\n\t\t\t? pending[0].promise\n\t\t\t: pending.length > 1\n\t\t\t\t? Promise.all(pending.map((b) => b.promise))\n\t\t\t\t: null;\n\n\t/** @param {Value[]} values */\n\tfunction finish(values) {\n\t\trestore();\n\n\t\ttry {\n\t\t\tfn(values);\n\t\t} catch (error) {\n\t\t\tif ((parent.f & DESTROYED) === 0) {\n\t\t\t\tinvoke_error_boundary(error, parent);\n\t\t\t}\n\t\t}\n\n\t\tbatch?.deactivate();\n\t\tunset_context();\n\t}\n\n\t// Fast path: blockers but no async expressions\n\tif (async.length === 0) {\n\t\t/** @type {Promise<any>} */ (blocker_promise).then(() => finish(sync.map(d)));\n\t\treturn;\n\t}\n\n\t// Full path: has async expressions\n\tfunction run() {\n\t\trestore();\n\t\tPromise.all(async.map((expression) => async_derived(expression)))\n\t\t\t.then((result) => finish([...sync.map(d), ...result]))\n\t\t\t.catch((error) => invoke_error_boundary(error, parent));\n\t}\n\n\tif (blocker_promise) {\n\t\tblocker_promise.then(run);\n\t} else {\n\t\trun();\n\t}\n}\n\n/**\n * @param {Blocker[]} blockers\n * @param {(values: Value[]) => any} fn\n */\nexport function run_after_blockers(blockers, fn) {\n\tflatten(blockers, [], [], fn);\n}\n\n/**\n * Captures the current effect context so that we can restore it after\n * some asynchronous work has happened (so that e.g. `await a + b`\n * causes `b` to be registered as a dependency).\n */\nexport function capture() {\n\tvar previous_effect = active_effect;\n\tvar previous_reaction = active_reaction;\n\tvar previous_component_context = component_context;\n\tvar previous_batch = current_batch;\n\n\tif (DEV) {\n\t\tvar previous_dev_stack = dev_stack;\n\t}\n\n\treturn function restore(activate_batch = true) {\n\t\tset_active_effect(previous_effect);\n\t\tset_active_reaction(previous_reaction);\n\t\tset_component_context(previous_component_context);\n\t\tif (activate_batch) previous_batch?.activate();\n\n\t\tif (DEV) {\n\t\t\tset_from_async_derived(null);\n\t\t\tset_dev_stack(previous_dev_stack);\n\t\t}\n\t};\n}\n\n/**\n * Wraps an `await` expression in such a way that the effect context that was\n * active before the expression evaluated can be reapplied afterwards \u2014\n * `await a + b` becomes `(await $.save(a))() + b`\n * @template T\n * @param {Promise<T>} promise\n * @returns {Promise<() => T>}\n */\nexport async function save(promise) {\n\tvar restore = capture();\n\tvar value = await promise;\n\n\treturn () => {\n\t\trestore();\n\t\treturn value;\n\t};\n}\n\n/**\n * Reset `current_async_effect` after the `promise` resolves, so\n * that we can emit `await_reactivity_loss` warnings\n * @template T\n * @param {Promise<T>} promise\n * @returns {Promise<() => T>}\n */\nexport async function track_reactivity_loss(promise) {\n\tvar previous_async_effect = current_async_effect;\n\tvar value = await promise;\n\n\treturn () => {\n\t\tset_from_async_derived(previous_async_effect);\n\t\treturn value;\n\t};\n}\n\n/**\n * Used in `for await` loops in DEV, so\n * that we can emit `await_reactivity_loss` warnings\n * after each `async_iterator` result resolves and\n * after the `async_iterator` return resolves (if it runs)\n * @template T\n * @template TReturn\n * @param {Iterable<T> | AsyncIterable<T>} iterable\n * @returns {AsyncGenerator<T, TReturn | undefined>}\n */\nexport async function* for_await_track_reactivity_loss(iterable) {\n\t// This is based on the algorithms described in ECMA-262:\n\t// ForIn/OfBodyEvaluation\n\t// https://tc39.es/ecma262/multipage/ecmascript-language-statements-and-declarations.html#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset\n\t// AsyncIteratorClose\n\t// https://tc39.es/ecma262/multipage/abstract-operations.html#sec-asynciteratorclose\n\n\t/** @type {AsyncIterator<T, TReturn>} */\n\t// @ts-ignore\n\tconst iterator = iterable[Symbol.asyncIterator]?.() ?? iterable[Symbol.iterator]?.();\n\n\tif (iterator === undefined) {\n\t\tthrow new TypeError('value is not async iterable');\n\t}\n\n\t/** Whether the completion of the iterator was \"normal\", meaning it wasn't ended via `break` or a similar method */\n\tlet normal_completion = false;\n\ttry {\n\t\twhile (true) {\n\t\t\tconst { done, value } = (await track_reactivity_loss(iterator.next()))();\n\t\t\tif (done) {\n\t\t\t\tnormal_completion = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tyield value;\n\t\t}\n\t} finally {\n\t\t// If the iterator had a normal completion and `return` is defined on the iterator, call it and return the value\n\t\tif (normal_completion && iterator.return !== undefined) {\n\t\t\t// eslint-disable-next-line no-unsafe-finally\n\t\t\treturn /** @type {TReturn} */ ((await track_reactivity_loss(iterator.return()))().value);\n\t\t}\n\t}\n}\n\nexport function unset_context() {\n\tset_active_effect(null);\n\tset_active_reaction(null);\n\tset_component_context(null);\n\n\tif (DEV) {\n\t\tset_from_async_derived(null);\n\t\tset_dev_stack(null);\n\t}\n}\n\n/**\n * @param {Array<() => void | Promise<void>>} thunks\n */\nexport function run(thunks) {\n\tconst restore = capture();\n\n\tvar boundary = get_boundary();\n\tvar batch = /** @type {Batch} */ (current_batch);\n\tvar blocking = boundary.is_rendered();\n\n\tboundary.update_pending_count(1);\n\tbatch.increment(blocking);\n\n\tvar active = /** @type {Effect} */ (active_effect);\n\n\t/** @type {null | { error: any }} */\n\tvar errored = null;\n\n\t/** @param {any} error */\n\tconst handle_error = (error) => {\n\t\terrored = { error }; // wrap in object in case a promise rejects with a falsy value\n\n\t\tif (!aborted(active)) {\n\t\t\tinvoke_error_boundary(error, active);\n\t\t}\n\t};\n\n\tvar promise = Promise.resolve(thunks[0]()).catch(handle_error);\n\n\t/** @type {Blocker} */\n\tvar blocker = { promise, settled: false };\n\tvar blockers = [blocker];\n\n\tpromise.finally(() => {\n\t\tblocker.settled = true;\n\t});\n\n\tfor (const fn of thunks.slice(1)) {\n\t\tpromise = promise\n\t\t\t.then(() => {\n\t\t\t\tif (errored) {\n\t\t\t\t\tthrow errored.error;\n\t\t\t\t}\n\n\t\t\t\tif (aborted(active)) {\n\t\t\t\t\tthrow STALE_REACTION;\n\t\t\t\t}\n\n\t\t\t\trestore();\n\t\t\t\treturn fn();\n\t\t\t})\n\t\t\t.catch(handle_error);\n\n\t\tconst blocker = { promise, settled: false };\n\t\tblockers.push(blocker);\n\n\t\tpromise.finally(() => {\n\t\t\tblocker.settled = true;\n\n\t\t\tunset_context();\n\t\t\tcurrent_batch?.deactivate();\n\t\t});\n\t}\n\n\tpromise\n\t\t// wait one more tick, so that template effects are\n\t\t// guaranteed to run before `$effect(...)`\n\t\t.then(() => Promise.resolve())\n\t\t.finally(() => {\n\t\t\tboundary.update_pending_count(-1);\n\t\t\tbatch.decrement(blocking);\n\t\t});\n\n\treturn blockers;\n}\n\n/**\n * @param {Blocker[]} blockers\n */\nexport function wait(blockers) {\n\treturn Promise.all(blockers.map((b) => b.promise));\n}\n", "/** @import { Derived, Effect, Source } from '#client' */\n/** @import { Batch } from './batch.js'; */\nimport { DEV } from 'esm-env';\nimport {\n\tERROR_VALUE,\n\tDERIVED,\n\tDIRTY,\n\tEFFECT_PRESERVED,\n\tSTALE_REACTION,\n\tASYNC,\n\tWAS_MARKED,\n\tDESTROYED,\n\tCLEAN\n} from '#client/constants';\nimport {\n\tactive_reaction,\n\tactive_effect,\n\tupdate_reaction,\n\tincrement_write_version,\n\tset_active_effect,\n\tpush_reaction_value,\n\tis_destroying_effect\n} from '../runtime.js';\nimport { equals, safe_equals } from './equality.js';\nimport * as e from '../errors.js';\nimport * as w from '../warnings.js';\nimport { async_effect, destroy_effect, effect_tracking, teardown } from './effects.js';\nimport { eager_effects, internal_set, set_eager_effects, source } from './sources.js';\nimport { get_error } from '../../shared/dev.js';\nimport { async_mode_flag, tracing_mode_flag } from '../../flags/index.js';\nimport { Boundary } from '../dom/blocks/boundary.js';\nimport { component_context } from '../context.js';\nimport { UNINITIALIZED } from '../../../constants.js';\nimport { batch_values, current_batch } from './batch.js';\nimport { unset_context } from './async.js';\nimport { deferred } from '../../shared/utils.js';\nimport { set_signal_status, update_derived_status } from './status.js';\n\n/** @type {Effect | null} */\nexport let current_async_effect = null;\n\n/** @param {Effect | null} v */\nexport function set_from_async_derived(v) {\n\tcurrent_async_effect = v;\n}\n\nexport const recent_async_deriveds = new Set();\n\n/**\n * @template V\n * @param {() => V} fn\n * @returns {Derived<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function derived(fn) {\n\tvar flags = DERIVED | DIRTY;\n\tvar parent_derived =\n\t\tactive_reaction !== null && (active_reaction.f & DERIVED) !== 0\n\t\t\t? /** @type {Derived} */ (active_reaction)\n\t\t\t: null;\n\n\tif (active_effect !== null) {\n\t\t// Since deriveds are evaluated lazily, any effects created inside them are\n\t\t// created too late to ensure that the parent effect is added to the tree\n\t\tactive_effect.f |= EFFECT_PRESERVED;\n\t}\n\n\t/** @type {Derived<V>} */\n\tconst signal = {\n\t\tctx: component_context,\n\t\tdeps: null,\n\t\teffects: null,\n\t\tequals,\n\t\tf: flags,\n\t\tfn,\n\t\treactions: null,\n\t\trv: 0,\n\t\tv: /** @type {V} */ (UNINITIALIZED),\n\t\twv: 0,\n\t\tparent: parent_derived ?? active_effect,\n\t\tac: null\n\t};\n\n\tif (DEV && tracing_mode_flag) {\n\t\tsignal.created = get_error('created at');\n\t}\n\n\treturn signal;\n}\n\n/**\n * @template V\n * @param {() => V | Promise<V>} fn\n * @param {string} [label]\n * @param {string} [location] If provided, print a warning if the value is not read immediately after update\n * @returns {Promise<Source<V>>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function async_derived(fn, label, location) {\n\tlet parent = /** @type {Effect | null} */ (active_effect);\n\n\tif (parent === null) {\n\t\te.async_derived_orphan();\n\t}\n\n\tvar boundary = /** @type {Boundary} */ (parent.b);\n\n\tvar promise = /** @type {Promise<V>} */ (/** @type {unknown} */ (undefined));\n\tvar signal = source(/** @type {V} */ (UNINITIALIZED));\n\n\tif (DEV) signal.label = label;\n\n\t// only suspend in async deriveds created on initialisation\n\tvar should_suspend = !active_reaction;\n\n\t/** @type {Map<Batch, ReturnType<typeof deferred<V>>>} */\n\tvar deferreds = new Map();\n\n\tasync_effect(() => {\n\t\tif (DEV) current_async_effect = active_effect;\n\n\t\t/** @type {ReturnType<typeof deferred<V>>} */\n\t\tvar d = deferred();\n\t\tpromise = d.promise;\n\n\t\ttry {\n\t\t\t// If this code is changed at some point, make sure to still access the then property\n\t\t\t// of fn() to read any signals it might access, so that we track them as dependencies.\n\t\t\t// We call `unset_context` to undo any `save` calls that happen inside `fn()`\n\t\t\tPromise.resolve(fn())\n\t\t\t\t.then(d.resolve, d.reject)\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (batch === current_batch && batch.committed) {\n\t\t\t\t\t\t// if the batch was rejected as stale, we need to cleanup\n\t\t\t\t\t\t// after any `$.save(...)` calls inside `fn()`\n\t\t\t\t\t\tbatch.deactivate();\n\t\t\t\t\t}\n\n\t\t\t\t\tunset_context();\n\t\t\t\t});\n\t\t} catch (error) {\n\t\t\td.reject(error);\n\t\t\tunset_context();\n\t\t}\n\n\t\tif (DEV) current_async_effect = null;\n\n\t\tvar batch = /** @type {Batch} */ (current_batch);\n\n\t\tif (should_suspend) {\n\t\t\tvar blocking = boundary.is_rendered();\n\n\t\t\tboundary.update_pending_count(1);\n\t\t\tbatch.increment(blocking);\n\n\t\t\tdeferreds.get(batch)?.reject(STALE_REACTION);\n\t\t\tdeferreds.delete(batch); // delete to ensure correct order in Map iteration below\n\t\t\tdeferreds.set(batch, d);\n\t\t}\n\n\t\t/**\n\t\t * @param {any} value\n\t\t * @param {unknown} error\n\t\t */\n\t\tconst handler = (value, error = undefined) => {\n\t\t\tcurrent_async_effect = null;\n\n\t\t\tbatch.activate();\n\n\t\t\tif (error) {\n\t\t\t\tif (error !== STALE_REACTION) {\n\t\t\t\t\tsignal.f |= ERROR_VALUE;\n\n\t\t\t\t\t// @ts-expect-error the error is the wrong type, but we don't care\n\t\t\t\t\tinternal_set(signal, error);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ((signal.f & ERROR_VALUE) !== 0) {\n\t\t\t\t\tsignal.f ^= ERROR_VALUE;\n\t\t\t\t}\n\n\t\t\t\tinternal_set(signal, value);\n\n\t\t\t\t// All prior async derived runs are now stale\n\t\t\t\tfor (const [b, d] of deferreds) {\n\t\t\t\t\tdeferreds.delete(b);\n\t\t\t\t\tif (b === batch) break;\n\t\t\t\t\td.reject(STALE_REACTION);\n\t\t\t\t}\n\n\t\t\t\tif (DEV && location !== undefined) {\n\t\t\t\t\trecent_async_deriveds.add(signal);\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tif (recent_async_deriveds.has(signal)) {\n\t\t\t\t\t\t\tw.await_waterfall(/** @type {string} */ (signal.label), location);\n\t\t\t\t\t\t\trecent_async_deriveds.delete(signal);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (should_suspend) {\n\t\t\t\tboundary.update_pending_count(-1);\n\t\t\t\tbatch.decrement(blocking);\n\t\t\t}\n\t\t};\n\n\t\td.promise.then(handler, (e) => handler(null, e || 'unknown'));\n\t});\n\n\tteardown(() => {\n\t\tfor (const d of deferreds.values()) {\n\t\t\td.reject(STALE_REACTION);\n\t\t}\n\t});\n\n\tif (DEV) {\n\t\t// add a flag that lets this be printed as a derived\n\t\t// when using `$inspect.trace()`\n\t\tsignal.f |= ASYNC;\n\t}\n\n\treturn new Promise((fulfil) => {\n\t\t/** @param {Promise<V>} p */\n\t\tfunction next(p) {\n\t\t\tfunction go() {\n\t\t\t\tif (p === promise) {\n\t\t\t\t\tfulfil(signal);\n\t\t\t\t} else {\n\t\t\t\t\t// if the effect re-runs before the initial promise\n\t\t\t\t\t// resolves, delay resolution until we have a value\n\t\t\t\t\tnext(promise);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tp.then(go, go);\n\t\t}\n\n\t\tnext(promise);\n\t});\n}\n\n/**\n * @template V\n * @param {() => V} fn\n * @returns {Derived<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function user_derived(fn) {\n\tconst d = derived(fn);\n\n\tif (!async_mode_flag) push_reaction_value(d);\n\n\treturn d;\n}\n\n/**\n * @template V\n * @param {() => V} fn\n * @returns {Derived<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function derived_safe_equal(fn) {\n\tconst signal = derived(fn);\n\tsignal.equals = safe_equals;\n\treturn signal;\n}\n\n/**\n * @param {Derived} derived\n * @returns {void}\n */\nexport function destroy_derived_effects(derived) {\n\tvar effects = derived.effects;\n\n\tif (effects !== null) {\n\t\tderived.effects = null;\n\n\t\tfor (var i = 0; i < effects.length; i += 1) {\n\t\t\tdestroy_effect(/** @type {Effect} */ (effects[i]));\n\t\t}\n\t}\n}\n\n/**\n * The currently updating deriveds, used to detect infinite recursion\n * in dev mode and provide a nicer error than 'too much recursion'\n * @type {Derived[]}\n */\nlet stack = [];\n\n/**\n * @param {Derived} derived\n * @returns {Effect | null}\n */\nfunction get_derived_parent_effect(derived) {\n\tvar parent = derived.parent;\n\twhile (parent !== null) {\n\t\tif ((parent.f & DERIVED) === 0) {\n\t\t\t// The original parent effect might've been destroyed but the derived\n\t\t\t// is used elsewhere now - do not return the destroyed effect in that case\n\t\t\treturn (parent.f & DESTROYED) === 0 ? /** @type {Effect} */ (parent) : null;\n\t\t}\n\t\tparent = parent.parent;\n\t}\n\treturn null;\n}\n\n/**\n * @template T\n * @param {Derived} derived\n * @returns {T}\n */\nexport function execute_derived(derived) {\n\tvar value;\n\tvar prev_active_effect = active_effect;\n\n\tset_active_effect(get_derived_parent_effect(derived));\n\n\tif (DEV) {\n\t\tlet prev_eager_effects = eager_effects;\n\t\tset_eager_effects(new Set());\n\t\ttry {\n\t\t\tif (stack.includes(derived)) {\n\t\t\t\te.derived_references_self();\n\t\t\t}\n\n\t\t\tstack.push(derived);\n\n\t\t\tderived.f &= ~WAS_MARKED;\n\t\t\tdestroy_derived_effects(derived);\n\t\t\tvalue = update_reaction(derived);\n\t\t} finally {\n\t\t\tset_active_effect(prev_active_effect);\n\t\t\tset_eager_effects(prev_eager_effects);\n\t\t\tstack.pop();\n\t\t}\n\t} else {\n\t\ttry {\n\t\t\tderived.f &= ~WAS_MARKED;\n\t\t\tdestroy_derived_effects(derived);\n\t\t\tvalue = update_reaction(derived);\n\t\t} finally {\n\t\t\tset_active_effect(prev_active_effect);\n\t\t}\n\t}\n\n\treturn value;\n}\n\n/**\n * @param {Derived} derived\n * @returns {void}\n */\nexport function update_derived(derived) {\n\tvar value = execute_derived(derived);\n\n\tif (!derived.equals(value)) {\n\t\tderived.wv = increment_write_version();\n\n\t\t// in a fork, we don't update the underlying value, just `batch_values`.\n\t\t// the underlying value will be updated when the fork is committed.\n\t\t// otherwise, the next time we get here after a 'real world' state\n\t\t// change, `derived.equals` may incorrectly return `true`\n\t\tif (!current_batch?.is_fork || derived.deps === null) {\n\t\t\tderived.v = value;\n\n\t\t\t// deriveds without dependencies should never be recomputed\n\t\t\tif (derived.deps === null) {\n\t\t\t\tset_signal_status(derived, CLEAN);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\t// don't mark derived clean if we're reading it inside a\n\t// cleanup function, or it will cache a stale value\n\tif (is_destroying_effect) {\n\t\treturn;\n\t}\n\n\t// During time traveling we don't want to reset the status so that\n\t// traversal of the graph in the other batches still happens\n\tif (batch_values !== null) {\n\t\t// only cache the value if we're in a tracking context, otherwise we won't\n\t\t// clear the cache in `mark_reactions` when dependencies are updated\n\t\tif (effect_tracking() || current_batch?.is_fork) {\n\t\t\tbatch_values.set(derived, value);\n\t\t}\n\t} else {\n\t\tupdate_derived_status(derived);\n\t}\n}\n", "/** @import { Derived, Effect, Source, Value } from '#client' */\nimport { DEV } from 'esm-env';\nimport {\n\tactive_reaction,\n\tactive_effect,\n\tuntracked_writes,\n\tget,\n\tset_untracked_writes,\n\tuntrack,\n\tincrement_write_version,\n\tupdate_effect,\n\tcurrent_sources,\n\tis_dirty,\n\tuntracking,\n\tis_destroying_effect,\n\tpush_reaction_value\n} from '../runtime.js';\nimport { equals, safe_equals } from './equality.js';\nimport {\n\tCLEAN,\n\tDERIVED,\n\tDIRTY,\n\tBRANCH_EFFECT,\n\tEAGER_EFFECT,\n\tMAYBE_DIRTY,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT,\n\tASYNC,\n\tWAS_MARKED,\n\tCONNECTED\n} from '#client/constants';\nimport * as e from '../errors.js';\nimport { legacy_mode_flag, tracing_mode_flag } from '../../flags/index.js';\nimport { tag_proxy } from '../dev/tracing.js';\nimport { get_error } from '../../shared/dev.js';\nimport { component_context, is_runes } from '../context.js';\nimport { Batch, batch_values, eager_block_effects, schedule_effect } from './batch.js';\nimport { proxy } from '../proxy.js';\nimport { execute_derived } from './deriveds.js';\nimport { set_signal_status, update_derived_status } from './status.js';\n\n/** @type {Set<any>} */\nexport let eager_effects = new Set();\n\n/** @type {Map<Source, any>} */\nexport const old_values = new Map();\n\n/**\n * @param {Set<any>} v\n */\nexport function set_eager_effects(v) {\n\teager_effects = v;\n}\n\nlet eager_effects_deferred = false;\n\nexport function set_eager_effects_deferred() {\n\teager_effects_deferred = true;\n}\n\n/**\n * @template V\n * @param {V} v\n * @param {Error | null} [stack]\n * @returns {Source<V>}\n */\n// TODO rename this to `state` throughout the codebase\nexport function source(v, stack) {\n\t/** @type {Value} */\n\tvar signal = {\n\t\tf: 0, // TODO ideally we could skip this altogether, but it causes type errors\n\t\tv,\n\t\treactions: null,\n\t\tequals,\n\t\trv: 0,\n\t\twv: 0\n\t};\n\n\tif (DEV && tracing_mode_flag) {\n\t\tsignal.created = stack ?? get_error('created at');\n\t\tsignal.updated = null;\n\t\tsignal.set_during_effect = false;\n\t\tsignal.trace = null;\n\t}\n\n\treturn signal;\n}\n\n/**\n * @template V\n * @param {V} v\n * @param {Error | null} [stack]\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function state(v, stack) {\n\tconst s = source(v, stack);\n\n\tpush_reaction_value(s);\n\n\treturn s;\n}\n\n/**\n * @template V\n * @param {V} initial_value\n * @param {boolean} [immutable]\n * @returns {Source<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function mutable_source(initial_value, immutable = false, trackable = true) {\n\tconst s = source(initial_value);\n\tif (!immutable) {\n\t\ts.equals = safe_equals;\n\t}\n\n\t// bind the signal to the component context, in case we need to\n\t// track updates to trigger beforeUpdate/afterUpdate callbacks\n\tif (legacy_mode_flag && trackable && component_context !== null && component_context.l !== null) {\n\t\t(component_context.l.s ??= []).push(s);\n\t}\n\n\treturn s;\n}\n\n/**\n * @template V\n * @param {Value<V>} source\n * @param {V} value\n */\nexport function mutate(source, value) {\n\tset(\n\t\tsource,\n\t\tuntrack(() => get(source))\n\t);\n\treturn value;\n}\n\n/**\n * @template V\n * @param {Source<V>} source\n * @param {V} value\n * @param {boolean} [should_proxy]\n * @returns {V}\n */\nexport function set(source, value, should_proxy = false) {\n\tif (\n\t\tactive_reaction !== null &&\n\t\t// since we are untracking the function inside `$inspect.with` we need to add this check\n\t\t// to ensure we error if state is set inside an inspect effect\n\t\t(!untracking || (active_reaction.f & EAGER_EFFECT) !== 0) &&\n\t\tis_runes() &&\n\t\t(active_reaction.f & (DERIVED | BLOCK_EFFECT | ASYNC | EAGER_EFFECT)) !== 0 &&\n\t\t!current_sources?.includes(source)\n\t) {\n\t\te.state_unsafe_mutation();\n\t}\n\n\tlet new_value = should_proxy ? proxy(value) : value;\n\n\tif (DEV) {\n\t\ttag_proxy(new_value, /** @type {string} */ (source.label));\n\t}\n\n\treturn internal_set(source, new_value);\n}\n\n/**\n * @template V\n * @param {Source<V>} source\n * @param {V} value\n * @returns {V}\n */\nexport function internal_set(source, value) {\n\tif (!source.equals(value)) {\n\t\tvar old_value = source.v;\n\n\t\tif (is_destroying_effect) {\n\t\t\told_values.set(source, value);\n\t\t} else {\n\t\t\told_values.set(source, old_value);\n\t\t}\n\n\t\tsource.v = value;\n\n\t\tvar batch = Batch.ensure();\n\t\tbatch.capture(source, old_value);\n\n\t\tif (DEV) {\n\t\t\tif (tracing_mode_flag || active_effect !== null) {\n\t\t\t\tsource.updated ??= new Map();\n\n\t\t\t\t// For performance reasons, when not using $inspect.trace, we only start collecting stack traces\n\t\t\t\t// after the same source has been updated more than 5 times in the same flush cycle.\n\t\t\t\tconst count = (source.updated.get('')?.count ?? 0) + 1;\n\t\t\t\tsource.updated.set('', { error: /** @type {any} */ (null), count });\n\n\t\t\t\tif (tracing_mode_flag || count > 5) {\n\t\t\t\t\tconst error = get_error('updated at');\n\n\t\t\t\t\tif (error !== null) {\n\t\t\t\t\t\tlet entry = source.updated.get(error.stack);\n\n\t\t\t\t\t\tif (!entry) {\n\t\t\t\t\t\t\tentry = { error, count: 0 };\n\t\t\t\t\t\t\tsource.updated.set(error.stack, entry);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tentry.count++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (active_effect !== null) {\n\t\t\t\tsource.set_during_effect = true;\n\t\t\t}\n\t\t}\n\n\t\tif ((source.f & DERIVED) !== 0) {\n\t\t\tconst derived = /** @type {Derived} */ (source);\n\n\t\t\t// if we are assigning to a dirty derived we set it to clean/maybe dirty but we also eagerly execute it to track the dependencies\n\t\t\tif ((source.f & DIRTY) !== 0) {\n\t\t\t\texecute_derived(derived);\n\t\t\t}\n\n\t\t\tupdate_derived_status(derived);\n\t\t}\n\n\t\tsource.wv = increment_write_version();\n\n\t\t// For debugging, in case you want to know which reactions are being scheduled:\n\t\t// log_reactions(source);\n\t\tmark_reactions(source, DIRTY);\n\n\t\t// It's possible that the current reaction might not have up-to-date dependencies\n\t\t// whilst it's actively running. So in the case of ensuring it registers the reaction\n\t\t// properly for itself, we need to ensure the current effect actually gets\n\t\t// scheduled. i.e: `$effect(() => x++)`\n\t\tif (\n\t\t\tis_runes() &&\n\t\t\tactive_effect !== null &&\n\t\t\t(active_effect.f & CLEAN) !== 0 &&\n\t\t\t(active_effect.f & (BRANCH_EFFECT | ROOT_EFFECT)) === 0\n\t\t) {\n\t\t\tif (untracked_writes === null) {\n\t\t\t\tset_untracked_writes([source]);\n\t\t\t} else {\n\t\t\t\tuntracked_writes.push(source);\n\t\t\t}\n\t\t}\n\n\t\tif (!batch.is_fork && eager_effects.size > 0 && !eager_effects_deferred) {\n\t\t\tflush_eager_effects();\n\t\t}\n\t}\n\n\treturn value;\n}\n\nexport function flush_eager_effects() {\n\teager_effects_deferred = false;\n\n\tfor (const effect of eager_effects) {\n\t\t// Mark clean inspect-effects as maybe dirty and then check their dirtiness\n\t\t// instead of just updating the effects - this way we avoid overfiring.\n\t\tif ((effect.f & CLEAN) !== 0) {\n\t\t\tset_signal_status(effect, MAYBE_DIRTY);\n\t\t}\n\n\t\tif (is_dirty(effect)) {\n\t\t\tupdate_effect(effect);\n\t\t}\n\t}\n\n\teager_effects.clear();\n}\n\n/**\n * @template {number | bigint} T\n * @param {Source<T>} source\n * @param {1 | -1} [d]\n * @returns {T}\n */\nexport function update(source, d = 1) {\n\tvar value = get(source);\n\tvar result = d === 1 ? value++ : value--;\n\n\tset(source, value);\n\n\t// @ts-expect-error\n\treturn result;\n}\n\n/**\n * @template {number | bigint} T\n * @param {Source<T>} source\n * @param {1 | -1} [d]\n * @returns {T}\n */\nexport function update_pre(source, d = 1) {\n\tvar value = get(source);\n\n\t// @ts-expect-error\n\treturn set(source, d === 1 ? ++value : --value);\n}\n\n/**\n * Silently (without using `get`) increment a source\n * @param {Source<number>} source\n */\nexport function increment(source) {\n\tset(source, source.v + 1);\n}\n\n/**\n * @param {Value} signal\n * @param {number} status should be DIRTY or MAYBE_DIRTY\n * @returns {void}\n */\nfunction mark_reactions(signal, status) {\n\tvar reactions = signal.reactions;\n\tif (reactions === null) return;\n\n\tvar runes = is_runes();\n\tvar length = reactions.length;\n\n\tfor (var i = 0; i < length; i++) {\n\t\tvar reaction = reactions[i];\n\t\tvar flags = reaction.f;\n\n\t\t// In legacy mode, skip the current effect to prevent infinite loops\n\t\tif (!runes && reaction === active_effect) continue;\n\n\t\t// Inspect effects need to run immediately, so that the stack trace makes sense\n\t\tif (DEV && (flags & EAGER_EFFECT) !== 0) {\n\t\t\teager_effects.add(reaction);\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar not_dirty = (flags & DIRTY) === 0;\n\n\t\t// don't set a DIRTY reaction to MAYBE_DIRTY\n\t\tif (not_dirty) {\n\t\t\tset_signal_status(reaction, status);\n\t\t}\n\n\t\tif ((flags & DERIVED) !== 0) {\n\t\t\tvar derived = /** @type {Derived} */ (reaction);\n\n\t\t\tbatch_values?.delete(derived);\n\n\t\t\tif ((flags & WAS_MARKED) === 0) {\n\t\t\t\t// Only connected deriveds can be reliably unmarked right away\n\t\t\t\tif (flags & CONNECTED) {\n\t\t\t\t\treaction.f |= WAS_MARKED;\n\t\t\t\t}\n\n\t\t\t\tmark_reactions(derived, MAYBE_DIRTY);\n\t\t\t}\n\t\t} else if (not_dirty) {\n\t\t\tif ((flags & BLOCK_EFFECT) !== 0 && eager_block_effects !== null) {\n\t\t\t\teager_block_effects.add(/** @type {Effect} */ (reaction));\n\t\t\t}\n\n\t\t\tschedule_effect(/** @type {Effect} */ (reaction));\n\t\t}\n\t}\n}\n", "/** @import { Source } from '#client' */\nimport { DEV } from 'esm-env';\nimport {\n\tget,\n\tactive_effect,\n\tupdate_version,\n\tactive_reaction,\n\tset_update_version,\n\tset_active_reaction\n} from './runtime.js';\nimport {\n\tarray_prototype,\n\tget_descriptor,\n\tget_prototype_of,\n\tis_array,\n\tobject_prototype\n} from '../shared/utils.js';\nimport {\n\tstate as source,\n\tset,\n\tincrement,\n\tflush_eager_effects,\n\tset_eager_effects_deferred\n} from './reactivity/sources.js';\nimport { PROXY_PATH_SYMBOL, STATE_SYMBOL } from '#client/constants';\nimport { UNINITIALIZED } from '../../constants.js';\nimport * as e from './errors.js';\nimport { tag } from './dev/tracing.js';\nimport { get_error } from '../shared/dev.js';\nimport { tracing_mode_flag } from '../flags/index.js';\n\n// TODO move all regexes into shared module?\nconst regex_is_valid_identifier = /^[a-zA-Z_$][a-zA-Z_$0-9]*$/;\n\n/**\n * @template T\n * @param {T} value\n * @returns {T}\n */\nexport function proxy(value) {\n\t// if non-proxyable, or is already a proxy, return `value`\n\tif (typeof value !== 'object' || value === null || STATE_SYMBOL in value) {\n\t\treturn value;\n\t}\n\n\tconst prototype = get_prototype_of(value);\n\n\tif (prototype !== object_prototype && prototype !== array_prototype) {\n\t\treturn value;\n\t}\n\n\t/** @type {Map<any, Source<any>>} */\n\tvar sources = new Map();\n\tvar is_proxied_array = is_array(value);\n\tvar version = source(0);\n\n\tvar stack = DEV && tracing_mode_flag ? get_error('created at') : null;\n\tvar parent_version = update_version;\n\n\t/**\n\t * Executes the proxy in the context of the reaction it was originally created in, if any\n\t * @template T\n\t * @param {() => T} fn\n\t */\n\tvar with_parent = (fn) => {\n\t\tif (update_version === parent_version) {\n\t\t\treturn fn();\n\t\t}\n\n\t\t// child source is being created after the initial proxy \u2014\n\t\t// prevent it from being associated with the current reaction\n\t\tvar reaction = active_reaction;\n\t\tvar version = update_version;\n\n\t\tset_active_reaction(null);\n\t\tset_update_version(parent_version);\n\n\t\tvar result = fn();\n\n\t\tset_active_reaction(reaction);\n\t\tset_update_version(version);\n\n\t\treturn result;\n\t};\n\n\tif (is_proxied_array) {\n\t\t// We need to create the length source eagerly to ensure that\n\t\t// mutations to the array are properly synced with our proxy\n\t\tsources.set('length', source(/** @type {any[]} */ (value).length, stack));\n\t\tif (DEV) {\n\t\t\tvalue = /** @type {any} */ (inspectable_array(/** @type {any[]} */ (value)));\n\t\t}\n\t}\n\n\t/** Used in dev for $inspect.trace() */\n\tvar path = '';\n\tlet updating = false;\n\t/** @param {string} new_path */\n\tfunction update_path(new_path) {\n\t\tif (updating) return;\n\t\tupdating = true;\n\t\tpath = new_path;\n\n\t\ttag(version, `${path} version`);\n\n\t\t// rename all child sources and child proxies\n\t\tfor (const [prop, source] of sources) {\n\t\t\ttag(source, get_label(path, prop));\n\t\t}\n\t\tupdating = false;\n\t}\n\n\treturn new Proxy(/** @type {any} */ (value), {\n\t\tdefineProperty(_, prop, descriptor) {\n\t\t\tif (\n\t\t\t\t!('value' in descriptor) ||\n\t\t\t\tdescriptor.configurable === false ||\n\t\t\t\tdescriptor.enumerable === false ||\n\t\t\t\tdescriptor.writable === false\n\t\t\t) {\n\t\t\t\t// we disallow non-basic descriptors, because unless they are applied to the\n\t\t\t\t// target object \u2014 which we avoid, so that state can be forked \u2014 we will run\n\t\t\t\t// afoul of the various invariants\n\t\t\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/getOwnPropertyDescriptor#invariants\n\t\t\t\te.state_descriptors_fixed();\n\t\t\t}\n\t\t\tvar s = sources.get(prop);\n\t\t\tif (s === undefined) {\n\t\t\t\ts = with_parent(() => {\n\t\t\t\t\tvar s = source(descriptor.value, stack);\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t\tif (DEV && typeof prop === 'string') {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\t\t\t\t\treturn s;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tset(s, descriptor.value, true);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tdeleteProperty(target, prop) {\n\t\t\tvar s = sources.get(prop);\n\n\t\t\tif (s === undefined) {\n\t\t\t\tif (prop in target) {\n\t\t\t\t\tconst s = with_parent(() => source(UNINITIALIZED, stack));\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t\tincrement(version);\n\n\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tset(s, UNINITIALIZED);\n\t\t\t\tincrement(version);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tget(target, prop, receiver) {\n\t\t\tif (prop === STATE_SYMBOL) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (DEV && prop === PROXY_PATH_SYMBOL) {\n\t\t\t\treturn update_path;\n\t\t\t}\n\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar exists = prop in target;\n\n\t\t\t// create a source, but only if it's an own property and not a prototype property\n\t\t\tif (s === undefined && (!exists || get_descriptor(target, prop)?.writable)) {\n\t\t\t\ts = with_parent(() => {\n\t\t\t\t\tvar p = proxy(exists ? target[prop] : UNINITIALIZED);\n\t\t\t\t\tvar s = source(p, stack);\n\n\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn s;\n\t\t\t\t});\n\n\t\t\t\tsources.set(prop, s);\n\t\t\t}\n\n\t\t\tif (s !== undefined) {\n\t\t\t\tvar v = get(s);\n\t\t\t\treturn v === UNINITIALIZED ? undefined : v;\n\t\t\t}\n\n\t\t\treturn Reflect.get(target, prop, receiver);\n\t\t},\n\n\t\tgetOwnPropertyDescriptor(target, prop) {\n\t\t\tvar descriptor = Reflect.getOwnPropertyDescriptor(target, prop);\n\n\t\t\tif (descriptor && 'value' in descriptor) {\n\t\t\t\tvar s = sources.get(prop);\n\t\t\t\tif (s) descriptor.value = get(s);\n\t\t\t} else if (descriptor === undefined) {\n\t\t\t\tvar source = sources.get(prop);\n\t\t\t\tvar value = source?.v;\n\n\t\t\t\tif (source !== undefined && value !== UNINITIALIZED) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\tconfigurable: true,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\twritable: true\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn descriptor;\n\t\t},\n\n\t\thas(target, prop) {\n\t\t\tif (prop === STATE_SYMBOL) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar has = (s !== undefined && s.v !== UNINITIALIZED) || Reflect.has(target, prop);\n\n\t\t\tif (\n\t\t\t\ts !== undefined ||\n\t\t\t\t(active_effect !== null && (!has || get_descriptor(target, prop)?.writable))\n\t\t\t) {\n\t\t\t\tif (s === undefined) {\n\t\t\t\t\ts = with_parent(() => {\n\t\t\t\t\t\tvar p = has ? proxy(target[prop]) : UNINITIALIZED;\n\t\t\t\t\t\tvar s = source(p, stack);\n\n\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn s;\n\t\t\t\t\t});\n\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t}\n\n\t\t\t\tvar value = get(s);\n\t\t\t\tif (value === UNINITIALIZED) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn has;\n\t\t},\n\n\t\tset(target, prop, value, receiver) {\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar has = prop in target;\n\n\t\t\t// variable.length = value -> clear all signals with index >= value\n\t\t\tif (is_proxied_array && prop === 'length') {\n\t\t\t\tfor (var i = value; i < /** @type {Source<number>} */ (s).v; i += 1) {\n\t\t\t\t\tvar other_s = sources.get(i + '');\n\t\t\t\t\tif (other_s !== undefined) {\n\t\t\t\t\t\tset(other_s, UNINITIALIZED);\n\t\t\t\t\t} else if (i in target) {\n\t\t\t\t\t\t// If the item exists in the original, we need to create an uninitialized source,\n\t\t\t\t\t\t// else a later read of the property would result in a source being created with\n\t\t\t\t\t\t// the value of the original item at that index.\n\t\t\t\t\t\tother_s = with_parent(() => source(UNINITIALIZED, stack));\n\t\t\t\t\t\tsources.set(i + '', other_s);\n\n\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\ttag(other_s, get_label(path, i));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we haven't yet created a source for this property, we need to ensure\n\t\t\t// we do so otherwise if we read it later, then the write won't be tracked and\n\t\t\t// the heuristics of effects will be different vs if we had read the proxied\n\t\t\t// object property before writing to that property.\n\t\t\tif (s === undefined) {\n\t\t\t\tif (!has || get_descriptor(target, prop)?.writable) {\n\t\t\t\t\ts = with_parent(() => source(undefined, stack));\n\n\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\t\t\t\t\tset(s, proxy(value));\n\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\thas = s.v !== UNINITIALIZED;\n\n\t\t\t\tvar p = with_parent(() => proxy(value));\n\t\t\t\tset(s, p);\n\t\t\t}\n\n\t\t\tvar descriptor = Reflect.getOwnPropertyDescriptor(target, prop);\n\n\t\t\t// Set the new value before updating any signals so that any listeners get the new value\n\t\t\tif (descriptor?.set) {\n\t\t\t\tdescriptor.set.call(receiver, value);\n\t\t\t}\n\n\t\t\tif (!has) {\n\t\t\t\t// If we have mutated an array directly, we might need to\n\t\t\t\t// signal that length has also changed. Do it before updating metadata\n\t\t\t\t// to ensure that iterating over the array as a result of a metadata update\n\t\t\t\t// will not cause the length to be out of sync.\n\t\t\t\tif (is_proxied_array && typeof prop === 'string') {\n\t\t\t\t\tvar ls = /** @type {Source<number>} */ (sources.get('length'));\n\t\t\t\t\tvar n = Number(prop);\n\n\t\t\t\t\tif (Number.isInteger(n) && n >= ls.v) {\n\t\t\t\t\t\tset(ls, n + 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tincrement(version);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\townKeys(target) {\n\t\t\tget(version);\n\n\t\t\tvar own_keys = Reflect.ownKeys(target).filter((key) => {\n\t\t\t\tvar source = sources.get(key);\n\t\t\t\treturn source === undefined || source.v !== UNINITIALIZED;\n\t\t\t});\n\n\t\t\tfor (var [key, source] of sources) {\n\t\t\t\tif (source.v !== UNINITIALIZED && !(key in target)) {\n\t\t\t\t\town_keys.push(key);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn own_keys;\n\t\t},\n\n\t\tsetPrototypeOf() {\n\t\t\te.state_prototype_fixed();\n\t\t}\n\t});\n}\n\n/**\n * @param {string} path\n * @param {string | symbol} prop\n */\nfunction get_label(path, prop) {\n\tif (typeof prop === 'symbol') return `${path}[Symbol(${prop.description ?? ''})]`;\n\tif (regex_is_valid_identifier.test(prop)) return `${path}.${prop}`;\n\treturn /^\\d+$/.test(prop) ? `${path}[${prop}]` : `${path}['${prop}']`;\n}\n\n/**\n * @param {any} value\n */\nexport function get_proxied_value(value) {\n\ttry {\n\t\tif (value !== null && typeof value === 'object' && STATE_SYMBOL in value) {\n\t\t\treturn value[STATE_SYMBOL];\n\t\t}\n\t} catch {\n\t\t// the above if check can throw an error if the value in question\n\t\t// is the contentWindow of an iframe on another domain, in which\n\t\t// case we want to just return the value (because it's definitely\n\t\t// not a proxied value) so we don't break any JavaScript interacting\n\t\t// with that iframe (such as various payment companies client side\n\t\t// JavaScript libraries interacting with their iframes on the same\n\t\t// domain)\n\t}\n\n\treturn value;\n}\n\n/**\n * @param {any} a\n * @param {any} b\n */\nexport function is(a, b) {\n\treturn Object.is(get_proxied_value(a), get_proxied_value(b));\n}\n\nconst ARRAY_MUTATING_METHODS = new Set([\n\t'copyWithin',\n\t'fill',\n\t'pop',\n\t'push',\n\t'reverse',\n\t'shift',\n\t'sort',\n\t'splice',\n\t'unshift'\n]);\n\n/**\n * Wrap array mutating methods so $inspect is triggered only once and\n * to prevent logging an array in intermediate state (e.g. with an empty slot)\n * @param {any[]} array\n */\nfunction inspectable_array(array) {\n\treturn new Proxy(array, {\n\t\tget(target, prop, receiver) {\n\t\t\tvar value = Reflect.get(target, prop, receiver);\n\t\t\tif (!ARRAY_MUTATING_METHODS.has(/** @type {string} */ (prop))) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * @this {any[]}\n\t\t\t * @param {any[]} args\n\t\t\t */\n\t\t\treturn function (...args) {\n\t\t\t\tset_eager_effects_deferred();\n\t\t\t\tvar result = value.apply(this, args);\n\t\t\t\tflush_eager_effects();\n\t\t\t\treturn result;\n\t\t\t};\n\t\t}\n\t});\n}\n", "import * as w from '../warnings.js';\nimport { get_proxied_value } from '../proxy.js';\n\nexport function init_array_prototype_warnings() {\n\tconst array_prototype = Array.prototype;\n\t// The REPL ends up here over and over, and this prevents it from adding more and more patches\n\t// of the same kind to the prototype, which would slow down everything over time.\n\t// @ts-expect-error\n\tconst cleanup = Array.__svelte_cleanup;\n\tif (cleanup) {\n\t\tcleanup();\n\t}\n\n\tconst { indexOf, lastIndexOf, includes } = array_prototype;\n\n\tarray_prototype.indexOf = function (item, from_index) {\n\t\tconst index = indexOf.call(this, item, from_index);\n\n\t\tif (index === -1) {\n\t\t\tfor (let i = from_index ?? 0; i < this.length; i += 1) {\n\t\t\t\tif (get_proxied_value(this[i]) === item) {\n\t\t\t\t\tw.state_proxy_equality_mismatch('array.indexOf(...)');\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t};\n\n\tarray_prototype.lastIndexOf = function (item, from_index) {\n\t\t// we need to specify this.length - 1 because it's probably using something like\n\t\t// `arguments` inside so passing undefined is different from not passing anything\n\t\tconst index = lastIndexOf.call(this, item, from_index ?? this.length - 1);\n\n\t\tif (index === -1) {\n\t\t\tfor (let i = 0; i <= (from_index ?? this.length - 1); i += 1) {\n\t\t\t\tif (get_proxied_value(this[i]) === item) {\n\t\t\t\t\tw.state_proxy_equality_mismatch('array.lastIndexOf(...)');\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t};\n\n\tarray_prototype.includes = function (item, from_index) {\n\t\tconst has = includes.call(this, item, from_index);\n\n\t\tif (!has) {\n\t\t\tfor (let i = 0; i < this.length; i += 1) {\n\t\t\t\tif (get_proxied_value(this[i]) === item) {\n\t\t\t\t\tw.state_proxy_equality_mismatch('array.includes(...)');\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn has;\n\t};\n\n\t// @ts-expect-error\n\tArray.__svelte_cleanup = () => {\n\t\tarray_prototype.indexOf = indexOf;\n\t\tarray_prototype.lastIndexOf = lastIndexOf;\n\t\tarray_prototype.includes = includes;\n\t};\n}\n\n/**\n * @param {any} a\n * @param {any} b\n * @param {boolean} equal\n * @returns {boolean}\n */\nexport function strict_equals(a, b, equal = true) {\n\t// try-catch needed because this tries to read properties of `a` and `b`,\n\t// which could be disallowed for example in a secure context\n\ttry {\n\t\tif ((a === b) !== (get_proxied_value(a) === get_proxied_value(b))) {\n\t\t\tw.state_proxy_equality_mismatch(equal ? '===' : '!==');\n\t\t}\n\t} catch {}\n\n\treturn (a === b) === equal;\n}\n\n/**\n * @param {any} a\n * @param {any} b\n * @param {boolean} equal\n * @returns {boolean}\n */\nexport function equals(a, b, equal = true) {\n\tif ((a == b) !== (get_proxied_value(a) == get_proxied_value(b))) {\n\t\tw.state_proxy_equality_mismatch(equal ? '==' : '!=');\n\t}\n\n\treturn (a == b) === equal;\n}\n", "/** @import { Effect, TemplateNode } from '#client' */\nimport { hydrate_node, hydrating, set_hydrate_node } from './hydration.js';\nimport { DEV } from 'esm-env';\nimport { init_array_prototype_warnings } from '../dev/equality.js';\nimport { get_descriptor, is_extensible } from '../../shared/utils.js';\nimport { active_effect } from '../runtime.js';\nimport { async_mode_flag } from '../../flags/index.js';\nimport { TEXT_NODE, EFFECT_RAN } from '#client/constants';\nimport { eager_block_effects } from '../reactivity/batch.js';\n\n// export these for reference in the compiled code, making global name deduplication unnecessary\n/** @type {Window} */\nexport var $window;\n\n/** @type {Document} */\nexport var $document;\n\n/** @type {boolean} */\nexport var is_firefox;\n\n/** @type {() => Node | null} */\nvar first_child_getter;\n/** @type {() => Node | null} */\nvar next_sibling_getter;\n\n/**\n * Initialize these lazily to avoid issues when using the runtime in a server context\n * where these globals are not available while avoiding a separate server entry point\n */\nexport function init_operations() {\n\tif ($window !== undefined) {\n\t\treturn;\n\t}\n\n\t$window = window;\n\t$document = document;\n\tis_firefox = /Firefox/.test(navigator.userAgent);\n\n\tvar element_prototype = Element.prototype;\n\tvar node_prototype = Node.prototype;\n\tvar text_prototype = Text.prototype;\n\n\t// @ts-ignore\n\tfirst_child_getter = get_descriptor(node_prototype, 'firstChild').get;\n\t// @ts-ignore\n\tnext_sibling_getter = get_descriptor(node_prototype, 'nextSibling').get;\n\n\tif (is_extensible(element_prototype)) {\n\t\t// the following assignments improve perf of lookups on DOM nodes\n\t\t// @ts-expect-error\n\t\telement_prototype.__click = undefined;\n\t\t// @ts-expect-error\n\t\telement_prototype.__className = undefined;\n\t\t// @ts-expect-error\n\t\telement_prototype.__attributes = null;\n\t\t// @ts-expect-error\n\t\telement_prototype.__style = undefined;\n\t\t// @ts-expect-error\n\t\telement_prototype.__e = undefined;\n\t}\n\n\tif (is_extensible(text_prototype)) {\n\t\t// @ts-expect-error\n\t\ttext_prototype.__t = undefined;\n\t}\n\n\tif (DEV) {\n\t\t// @ts-expect-error\n\t\telement_prototype.__svelte_meta = null;\n\n\t\tinit_array_prototype_warnings();\n\t}\n}\n\n/**\n * @param {string} value\n * @returns {Text}\n */\nexport function create_text(value = '') {\n\treturn document.createTextNode(value);\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function get_first_child(node) {\n\treturn /** @type {TemplateNode | null} */ (first_child_getter.call(node));\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function get_next_sibling(node) {\n\treturn /** @type {TemplateNode | null} */ (next_sibling_getter.call(node));\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @template {Node} N\n * @param {N} node\n * @param {boolean} is_text\n * @returns {TemplateNode | null}\n */\nexport function child(node, is_text) {\n\tif (!hydrating) {\n\t\treturn get_first_child(node);\n\t}\n\n\tvar child = get_first_child(hydrate_node);\n\n\t// Child can be null if we have an element with a single child, like `<p>{text}</p>`, where `text` is empty\n\tif (child === null) {\n\t\tchild = hydrate_node.appendChild(create_text());\n\t} else if (is_text && child.nodeType !== TEXT_NODE) {\n\t\tvar text = create_text();\n\t\tchild?.before(text);\n\t\tset_hydrate_node(text);\n\t\treturn text;\n\t}\n\n\tset_hydrate_node(child);\n\treturn child;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {TemplateNode} node\n * @param {boolean} [is_text]\n * @returns {TemplateNode | null}\n */\nexport function first_child(node, is_text = false) {\n\tif (!hydrating) {\n\t\tvar first = get_first_child(node);\n\n\t\t// TODO prevent user comments with the empty string when preserveComments is true\n\t\tif (first instanceof Comment && first.data === '') return get_next_sibling(first);\n\n\t\treturn first;\n\t}\n\n\t// if an {expression} is empty during SSR, there might be no\n\t// text node to hydrate \u2014 we must therefore create one\n\tif (is_text && hydrate_node?.nodeType !== TEXT_NODE) {\n\t\tvar text = create_text();\n\n\t\thydrate_node?.before(text);\n\t\tset_hydrate_node(text);\n\t\treturn text;\n\t}\n\n\treturn hydrate_node;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {TemplateNode} node\n * @param {number} count\n * @param {boolean} is_text\n * @returns {TemplateNode | null}\n */\nexport function sibling(node, count = 1, is_text = false) {\n\tlet next_sibling = hydrating ? hydrate_node : node;\n\tvar last_sibling;\n\n\twhile (count--) {\n\t\tlast_sibling = next_sibling;\n\t\tnext_sibling = /** @type {TemplateNode} */ (get_next_sibling(next_sibling));\n\t}\n\n\tif (!hydrating) {\n\t\treturn next_sibling;\n\t}\n\n\t// if a sibling {expression} is empty during SSR, there might be no\n\t// text node to hydrate \u2014 we must therefore create one\n\tif (is_text && next_sibling?.nodeType !== TEXT_NODE) {\n\t\tvar text = create_text();\n\t\t// If the next sibling is `null` and we're handling text then it's because\n\t\t// the SSR content was empty for the text, so we need to generate a new text\n\t\t// node and insert it after the last sibling\n\t\tif (next_sibling === null) {\n\t\t\tlast_sibling?.after(text);\n\t\t} else {\n\t\t\tnext_sibling.before(text);\n\t\t}\n\t\tset_hydrate_node(text);\n\t\treturn text;\n\t}\n\n\tset_hydrate_node(next_sibling);\n\treturn next_sibling;\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n * @returns {void}\n */\nexport function clear_text_content(node) {\n\tnode.textContent = '';\n}\n\n/**\n * Returns `true` if we're updating the current block, for example `condition` in\n * an `{#if condition}` block just changed. In this case, the branch should be\n * appended (or removed) at the same time as other updates within the\n * current `<svelte:boundary>`\n */\nexport function should_defer_append() {\n\tif (!async_mode_flag) return false;\n\tif (eager_block_effects !== null) return false;\n\n\tvar flags = /** @type {Effect} */ (active_effect).f;\n\treturn (flags & EFFECT_RAN) !== 0;\n}\n\n/**\n *\n * @param {string} tag\n * @param {string} [namespace]\n * @param {string} [is]\n * @returns\n */\nexport function create_element(tag, namespace, is) {\n\tlet options = is ? { is } : undefined;\n\tif (namespace) {\n\t\treturn document.createElementNS(namespace, tag, options);\n\t}\n\treturn document.createElement(tag, options);\n}\n\nexport function create_fragment() {\n\treturn document.createDocumentFragment();\n}\n\n/**\n * @param {string} data\n * @returns\n */\nexport function create_comment(data = '') {\n\treturn document.createComment(data);\n}\n\n/**\n * @param {Element} element\n * @param {string} key\n * @param {string} value\n * @returns\n */\nexport function set_attribute(element, key, value = '') {\n\tif (key.startsWith('xlink:')) {\n\t\telement.setAttributeNS('http://www.w3.org/1999/xlink', key, value);\n\t\treturn;\n\t}\n\treturn element.setAttribute(key, value);\n}\n", "import { hydrating } from '../hydration.js';\nimport { clear_text_content, get_first_child } from '../operations.js';\nimport { queue_micro_task } from '../task.js';\n\n/**\n * @param {HTMLElement} dom\n * @param {boolean} value\n * @returns {void}\n */\nexport function autofocus(dom, value) {\n\tif (value) {\n\t\tconst body = document.body;\n\t\tdom.autofocus = true;\n\n\t\tqueue_micro_task(() => {\n\t\t\tif (document.activeElement === body) {\n\t\t\t\tdom.focus();\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * The child of a textarea actually corresponds to the defaultValue property, so we need\n * to remove it upon hydration to avoid a bug when someone resets the form value.\n * @param {HTMLTextAreaElement} dom\n * @returns {void}\n */\nexport function remove_textarea_child(dom) {\n\tif (hydrating && get_first_child(dom) !== null) {\n\t\tclear_text_content(dom);\n\t}\n}\n\nlet listening_to_form_reset = false;\n\nexport function add_form_reset_listener() {\n\tif (!listening_to_form_reset) {\n\t\tlistening_to_form_reset = true;\n\t\tdocument.addEventListener(\n\t\t\t'reset',\n\t\t\t(evt) => {\n\t\t\t\t// Needs to happen one tick later or else the dom properties of the form\n\t\t\t\t// elements have not updated to their reset values yet\n\t\t\t\tPromise.resolve().then(() => {\n\t\t\t\t\tif (!evt.defaultPrevented) {\n\t\t\t\t\t\tfor (const e of /**@type {HTMLFormElement} */ (evt.target).elements) {\n\t\t\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\t\t\te.__on_r?.();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// In the capture phase to guarantee we get noticed of it (no possibility of stopPropagation)\n\t\t\t{ capture: true }\n\t\t);\n\t}\n}\n", "import { teardown } from '../../../reactivity/effects.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../../runtime.js';\nimport { add_form_reset_listener } from '../misc.js';\n\n/**\n * Fires the handler once immediately (unless corresponding arg is set to `false`),\n * then listens to the given events until the render effect context is destroyed\n * @param {EventTarget} target\n * @param {Array<string>} events\n * @param {(event?: Event) => void} handler\n * @param {any} call_handler_immediately\n */\nexport function listen(target, events, handler, call_handler_immediately = true) {\n\tif (call_handler_immediately) {\n\t\thandler();\n\t}\n\n\tfor (var name of events) {\n\t\ttarget.addEventListener(name, handler);\n\t}\n\n\tteardown(() => {\n\t\tfor (var name of events) {\n\t\t\ttarget.removeEventListener(name, handler);\n\t\t}\n\t});\n}\n\n/**\n * @template T\n * @param {() => T} fn\n */\nexport function without_reactive_context(fn) {\n\tvar previous_reaction = active_reaction;\n\tvar previous_effect = active_effect;\n\tset_active_reaction(null);\n\tset_active_effect(null);\n\ttry {\n\t\treturn fn();\n\t} finally {\n\t\tset_active_reaction(previous_reaction);\n\t\tset_active_effect(previous_effect);\n\t}\n}\n\n/**\n * Listen to the given event, and then instantiate a global form reset listener if not already done,\n * to notify all bindings when the form is reset\n * @param {HTMLElement} element\n * @param {string} event\n * @param {(is_reset?: true) => void} handler\n * @param {(is_reset?: true) => void} [on_reset]\n */\nexport function listen_to_event_and_reset_event(element, event, handler, on_reset = handler) {\n\telement.addEventListener(event, () => without_reactive_context(handler));\n\t// @ts-expect-error\n\tconst prev = element.__on_r;\n\tif (prev) {\n\t\t// special case for checkbox that can have multiple binds (group & checked)\n\t\t// @ts-expect-error\n\t\telement.__on_r = () => {\n\t\t\tprev();\n\t\t\ton_reset(true);\n\t\t};\n\t} else {\n\t\t// @ts-expect-error\n\t\telement.__on_r = () => on_reset(true);\n\t}\n\n\tadd_form_reset_listener();\n}\n", "/** @import { Blocker, ComponentContext, ComponentContextLegacy, Derived, Effect, TemplateNode, TransitionManager } from '#client' */\nimport {\n\tis_dirty,\n\tactive_effect,\n\tactive_reaction,\n\tupdate_effect,\n\tget,\n\tis_destroying_effect,\n\tremove_reactions,\n\tset_active_reaction,\n\tset_is_destroying_effect,\n\tuntrack,\n\tuntracking\n} from '../runtime.js';\nimport {\n\tDIRTY,\n\tBRANCH_EFFECT,\n\tRENDER_EFFECT,\n\tEFFECT,\n\tDESTROYED,\n\tINERT,\n\tEFFECT_RAN,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT,\n\tEFFECT_TRANSPARENT,\n\tDERIVED,\n\tCLEAN,\n\tEAGER_EFFECT,\n\tHEAD_EFFECT,\n\tMAYBE_DIRTY,\n\tEFFECT_PRESERVED,\n\tSTALE_REACTION,\n\tUSER_EFFECT,\n\tASYNC,\n\tCONNECTED,\n\tMANAGED_EFFECT\n} from '#client/constants';\nimport * as e from '../errors.js';\nimport { DEV } from 'esm-env';\nimport { define_property } from '../../shared/utils.js';\nimport { get_next_sibling } from '../dom/operations.js';\nimport { component_context, dev_current_component_function, dev_stack } from '../context.js';\nimport { Batch, current_batch, schedule_effect } from './batch.js';\nimport { flatten } from './async.js';\nimport { without_reactive_context } from '../dom/elements/bindings/shared.js';\nimport { set_signal_status } from './status.js';\n\n/**\n * @param {'$effect' | '$effect.pre' | '$inspect'} rune\n */\nexport function validate_effect(rune) {\n\tif (active_effect === null) {\n\t\tif (active_reaction === null) {\n\t\t\te.effect_orphan(rune);\n\t\t}\n\n\t\te.effect_in_unowned_derived();\n\t}\n\n\tif (is_destroying_effect) {\n\t\te.effect_in_teardown(rune);\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {Effect} parent_effect\n */\nfunction push_effect(effect, parent_effect) {\n\tvar parent_last = parent_effect.last;\n\tif (parent_last === null) {\n\t\tparent_effect.last = parent_effect.first = effect;\n\t} else {\n\t\tparent_last.next = effect;\n\t\teffect.prev = parent_last;\n\t\tparent_effect.last = effect;\n\t}\n}\n\n/**\n * @param {number} type\n * @param {null | (() => void | (() => void))} fn\n * @param {boolean} sync\n * @returns {Effect}\n */\nfunction create_effect(type, fn, sync) {\n\tvar parent = active_effect;\n\n\tif (DEV) {\n\t\t// Ensure the parent is never an inspect effect\n\t\twhile (parent !== null && (parent.f & EAGER_EFFECT) !== 0) {\n\t\t\tparent = parent.parent;\n\t\t}\n\t}\n\n\tif (parent !== null && (parent.f & INERT) !== 0) {\n\t\ttype |= INERT;\n\t}\n\n\t/** @type {Effect} */\n\tvar effect = {\n\t\tctx: component_context,\n\t\tdeps: null,\n\t\tnodes: null,\n\t\tf: type | DIRTY | CONNECTED,\n\t\tfirst: null,\n\t\tfn,\n\t\tlast: null,\n\t\tnext: null,\n\t\tparent,\n\t\tb: parent && parent.b,\n\t\tprev: null,\n\t\tteardown: null,\n\t\twv: 0,\n\t\tac: null\n\t};\n\n\tif (DEV) {\n\t\teffect.component_function = dev_current_component_function;\n\t}\n\n\tif (sync) {\n\t\ttry {\n\t\t\tupdate_effect(effect);\n\t\t\teffect.f |= EFFECT_RAN;\n\t\t} catch (e) {\n\t\t\tdestroy_effect(effect);\n\t\t\tthrow e;\n\t\t}\n\t} else if (fn !== null) {\n\t\tschedule_effect(effect);\n\t}\n\n\t/** @type {Effect | null} */\n\tvar e = effect;\n\n\t// if an effect has already ran and doesn't need to be kept in the tree\n\t// (because it won't re-run, has no DOM, and has no teardown etc)\n\t// then we skip it and go to its child (if any)\n\tif (\n\t\tsync &&\n\t\te.deps === null &&\n\t\te.teardown === null &&\n\t\te.nodes === null &&\n\t\te.first === e.last && // either `null`, or a singular child\n\t\t(e.f & EFFECT_PRESERVED) === 0\n\t) {\n\t\te = e.first;\n\t\tif ((type & BLOCK_EFFECT) !== 0 && (type & EFFECT_TRANSPARENT) !== 0 && e !== null) {\n\t\t\te.f |= EFFECT_TRANSPARENT;\n\t\t}\n\t}\n\n\tif (e !== null) {\n\t\te.parent = parent;\n\n\t\tif (parent !== null) {\n\t\t\tpush_effect(e, parent);\n\t\t}\n\n\t\t// if we're in a derived, add the effect there too\n\t\tif (\n\t\t\tactive_reaction !== null &&\n\t\t\t(active_reaction.f & DERIVED) !== 0 &&\n\t\t\t(type & ROOT_EFFECT) === 0\n\t\t) {\n\t\t\tvar derived = /** @type {Derived} */ (active_reaction);\n\t\t\t(derived.effects ??= []).push(e);\n\t\t}\n\t}\n\n\treturn effect;\n}\n\n/**\n * Internal representation of `$effect.tracking()`\n * @returns {boolean}\n */\nexport function effect_tracking() {\n\treturn active_reaction !== null && !untracking;\n}\n\n/**\n * @param {() => void} fn\n */\nexport function teardown(fn) {\n\tconst effect = create_effect(RENDER_EFFECT, null, false);\n\tset_signal_status(effect, CLEAN);\n\teffect.teardown = fn;\n\treturn effect;\n}\n\n/**\n * Internal representation of `$effect(...)`\n * @param {() => void | (() => void)} fn\n */\nexport function user_effect(fn) {\n\tvalidate_effect('$effect');\n\n\tif (DEV) {\n\t\tdefine_property(fn, 'name', {\n\t\t\tvalue: '$effect'\n\t\t});\n\t}\n\n\t// Non-nested `$effect(...)` in a component should be deferred\n\t// until the component is mounted\n\tvar flags = /** @type {Effect} */ (active_effect).f;\n\tvar defer = !active_reaction && (flags & BRANCH_EFFECT) !== 0 && (flags & EFFECT_RAN) === 0;\n\n\tif (defer) {\n\t\t// Top-level `$effect(...)` in an unmounted component \u2014 defer until mount\n\t\tvar context = /** @type {ComponentContext} */ (component_context);\n\t\t(context.e ??= []).push(fn);\n\t} else {\n\t\t// Everything else \u2014 create immediately\n\t\treturn create_user_effect(fn);\n\t}\n}\n\n/**\n * @param {() => void | (() => void)} fn\n */\nexport function create_user_effect(fn) {\n\treturn create_effect(EFFECT | USER_EFFECT, fn, false);\n}\n\n/**\n * Internal representation of `$effect.pre(...)`\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function user_pre_effect(fn) {\n\tvalidate_effect('$effect.pre');\n\tif (DEV) {\n\t\tdefine_property(fn, 'name', {\n\t\t\tvalue: '$effect.pre'\n\t\t});\n\t}\n\treturn create_effect(RENDER_EFFECT | USER_EFFECT, fn, true);\n}\n\n/** @param {() => void | (() => void)} fn */\nexport function eager_effect(fn) {\n\treturn create_effect(EAGER_EFFECT, fn, true);\n}\n\n/**\n * Internal representation of `$effect.root(...)`\n * @param {() => void | (() => void)} fn\n * @returns {() => void}\n */\nexport function effect_root(fn) {\n\tBatch.ensure();\n\tconst effect = create_effect(ROOT_EFFECT | EFFECT_PRESERVED, fn, true);\n\n\treturn () => {\n\t\tdestroy_effect(effect);\n\t};\n}\n\n/**\n * An effect root whose children can transition out\n * @param {() => void} fn\n * @returns {(options?: { outro?: boolean }) => Promise<void>}\n */\nexport function component_root(fn) {\n\tBatch.ensure();\n\tconst effect = create_effect(ROOT_EFFECT | EFFECT_PRESERVED, fn, true);\n\n\treturn (options = {}) => {\n\t\treturn new Promise((fulfil) => {\n\t\t\tif (options.outro) {\n\t\t\t\tpause_effect(effect, () => {\n\t\t\t\t\tdestroy_effect(effect);\n\t\t\t\t\tfulfil(undefined);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdestroy_effect(effect);\n\t\t\t\tfulfil(undefined);\n\t\t\t}\n\t\t});\n\t};\n}\n\n/**\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function effect(fn) {\n\treturn create_effect(EFFECT, fn, false);\n}\n\n/**\n * Internal representation of `$: ..`\n * @param {() => any} deps\n * @param {() => void | (() => void)} fn\n */\nexport function legacy_pre_effect(deps, fn) {\n\tvar context = /** @type {ComponentContextLegacy} */ (component_context);\n\n\t/** @type {{ effect: null | Effect, ran: boolean, deps: () => any }} */\n\tvar token = { effect: null, ran: false, deps };\n\n\tcontext.l.$.push(token);\n\n\ttoken.effect = render_effect(() => {\n\t\tdeps();\n\n\t\t// If this legacy pre effect has already run before the end of the reset, then\n\t\t// bail out to emulate the same behavior.\n\t\tif (token.ran) return;\n\n\t\ttoken.ran = true;\n\t\tuntrack(fn);\n\t});\n}\n\nexport function legacy_pre_effect_reset() {\n\tvar context = /** @type {ComponentContextLegacy} */ (component_context);\n\n\trender_effect(() => {\n\t\t// Run dirty `$:` statements\n\t\tfor (var token of context.l.$) {\n\t\t\ttoken.deps();\n\n\t\t\tvar effect = token.effect;\n\n\t\t\t// If the effect is CLEAN, then make it MAYBE_DIRTY. This ensures we traverse through\n\t\t\t// the effects dependencies and correctly ensure each dependency is up-to-date.\n\t\t\tif ((effect.f & CLEAN) !== 0 && effect.deps !== null) {\n\t\t\t\tset_signal_status(effect, MAYBE_DIRTY);\n\t\t\t}\n\n\t\t\tif (is_dirty(effect)) {\n\t\t\t\tupdate_effect(effect);\n\t\t\t}\n\n\t\t\ttoken.ran = false;\n\t\t}\n\t});\n}\n\n/**\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function async_effect(fn) {\n\treturn create_effect(ASYNC | EFFECT_PRESERVED, fn, true);\n}\n\n/**\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function render_effect(fn, flags = 0) {\n\treturn create_effect(RENDER_EFFECT | flags, fn, true);\n}\n\n/**\n * @param {(...expressions: any) => void | (() => void)} fn\n * @param {Array<() => any>} sync\n * @param {Array<() => Promise<any>>} async\n * @param {Blocker[]} blockers\n */\nexport function template_effect(fn, sync = [], async = [], blockers = []) {\n\tflatten(blockers, sync, async, (values) => {\n\t\tcreate_effect(RENDER_EFFECT, () => fn(...values.map(get)), true);\n\t});\n}\n\n/**\n * Like `template_effect`, but with an effect which is deferred until the batch commits\n * @param {(...expressions: any) => void | (() => void)} fn\n * @param {Array<() => any>} sync\n * @param {Array<() => Promise<any>>} async\n * @param {Blocker[]} blockers\n */\nexport function deferred_template_effect(fn, sync = [], async = [], blockers = []) {\n\tvar batch = /** @type {Batch} */ (current_batch);\n\tvar is_async = async.length > 0 || blockers.length > 0;\n\n\tif (is_async) batch.increment(true);\n\n\tflatten(blockers, sync, async, (values) => {\n\t\tcreate_effect(EFFECT, () => fn(...values.map(get)), false);\n\t\tif (is_async) batch.decrement(true);\n\t});\n}\n\n/**\n * @param {(() => void)} fn\n * @param {number} flags\n */\nexport function block(fn, flags = 0) {\n\tvar effect = create_effect(BLOCK_EFFECT | flags, fn, true);\n\tif (DEV) {\n\t\teffect.dev_stack = dev_stack;\n\t}\n\treturn effect;\n}\n\n/**\n * @param {(() => void)} fn\n * @param {number} flags\n */\nexport function managed(fn, flags = 0) {\n\tvar effect = create_effect(MANAGED_EFFECT | flags, fn, true);\n\tif (DEV) {\n\t\teffect.dev_stack = dev_stack;\n\t}\n\treturn effect;\n}\n\n/**\n * @param {(() => void)} fn\n */\nexport function branch(fn) {\n\treturn create_effect(BRANCH_EFFECT | EFFECT_PRESERVED, fn, true);\n}\n\n/**\n * @param {Effect} effect\n */\nexport function execute_effect_teardown(effect) {\n\tvar teardown = effect.teardown;\n\tif (teardown !== null) {\n\t\tconst previously_destroying_effect = is_destroying_effect;\n\t\tconst previous_reaction = active_reaction;\n\t\tset_is_destroying_effect(true);\n\t\tset_active_reaction(null);\n\t\ttry {\n\t\t\tteardown.call(null);\n\t\t} finally {\n\t\t\tset_is_destroying_effect(previously_destroying_effect);\n\t\t\tset_active_reaction(previous_reaction);\n\t\t}\n\t}\n}\n\n/**\n * @param {Effect} signal\n * @param {boolean} remove_dom\n * @returns {void}\n */\nexport function destroy_effect_children(signal, remove_dom = false) {\n\tvar effect = signal.first;\n\tsignal.first = signal.last = null;\n\n\twhile (effect !== null) {\n\t\tconst controller = effect.ac;\n\n\t\tif (controller !== null) {\n\t\t\twithout_reactive_context(() => {\n\t\t\t\tcontroller.abort(STALE_REACTION);\n\t\t\t});\n\t\t}\n\n\t\tvar next = effect.next;\n\n\t\tif ((effect.f & ROOT_EFFECT) !== 0) {\n\t\t\t// this is now an independent root\n\t\t\teffect.parent = null;\n\t\t} else {\n\t\t\tdestroy_effect(effect, remove_dom);\n\t\t}\n\n\t\teffect = next;\n\t}\n}\n\n/**\n * @param {Effect} signal\n * @returns {void}\n */\nexport function destroy_block_effect_children(signal) {\n\tvar effect = signal.first;\n\n\twhile (effect !== null) {\n\t\tvar next = effect.next;\n\t\tif ((effect.f & BRANCH_EFFECT) === 0) {\n\t\t\tdestroy_effect(effect);\n\t\t}\n\t\teffect = next;\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {boolean} [remove_dom]\n * @returns {void}\n */\nexport function destroy_effect(effect, remove_dom = true) {\n\tvar removed = false;\n\n\tif (\n\t\t(remove_dom || (effect.f & HEAD_EFFECT) !== 0) &&\n\t\teffect.nodes !== null &&\n\t\teffect.nodes.end !== null\n\t) {\n\t\tremove_effect_dom(effect.nodes.start, /** @type {TemplateNode} */ (effect.nodes.end));\n\t\tremoved = true;\n\t}\n\n\tdestroy_effect_children(effect, remove_dom && !removed);\n\tremove_reactions(effect, 0);\n\tset_signal_status(effect, DESTROYED);\n\n\tvar transitions = effect.nodes && effect.nodes.t;\n\n\tif (transitions !== null) {\n\t\tfor (const transition of transitions) {\n\t\t\ttransition.stop();\n\t\t}\n\t}\n\n\texecute_effect_teardown(effect);\n\n\tvar parent = effect.parent;\n\n\t// If the parent doesn't have any children, then skip this work altogether\n\tif (parent !== null && parent.first !== null) {\n\t\tunlink_effect(effect);\n\t}\n\n\tif (DEV) {\n\t\teffect.component_function = null;\n\t}\n\n\t// `first` and `child` are nulled out in destroy_effect_children\n\t// we don't null out `parent` so that error propagation can work correctly\n\teffect.next =\n\t\teffect.prev =\n\t\teffect.teardown =\n\t\teffect.ctx =\n\t\teffect.deps =\n\t\teffect.fn =\n\t\teffect.nodes =\n\t\teffect.ac =\n\t\t\tnull;\n}\n\n/**\n *\n * @param {TemplateNode | null} node\n * @param {TemplateNode} end\n */\nexport function remove_effect_dom(node, end) {\n\twhile (node !== null) {\n\t\t/** @type {TemplateNode | null} */\n\t\tvar next = node === end ? null : get_next_sibling(node);\n\n\t\tnode.remove();\n\t\tnode = next;\n\t}\n}\n\n/**\n * Detach an effect from the effect tree, freeing up memory and\n * reducing the amount of work that happens on subsequent traversals\n * @param {Effect} effect\n */\nexport function unlink_effect(effect) {\n\tvar parent = effect.parent;\n\tvar prev = effect.prev;\n\tvar next = effect.next;\n\n\tif (prev !== null) prev.next = next;\n\tif (next !== null) next.prev = prev;\n\n\tif (parent !== null) {\n\t\tif (parent.first === effect) parent.first = next;\n\t\tif (parent.last === effect) parent.last = prev;\n\t}\n}\n\n/**\n * When a block effect is removed, we don't immediately destroy it or yank it\n * out of the DOM, because it might have transitions. Instead, we 'pause' it.\n * It stays around (in memory, and in the DOM) until outro transitions have\n * completed, and if the state change is reversed then we _resume_ it.\n * A paused effect does not update, and the DOM subtree becomes inert.\n * @param {Effect} effect\n * @param {() => void} [callback]\n * @param {boolean} [destroy]\n */\nexport function pause_effect(effect, callback, destroy = true) {\n\t/** @type {TransitionManager[]} */\n\tvar transitions = [];\n\n\tpause_children(effect, transitions, true);\n\n\tvar fn = () => {\n\t\tif (destroy) destroy_effect(effect);\n\t\tif (callback) callback();\n\t};\n\n\tvar remaining = transitions.length;\n\tif (remaining > 0) {\n\t\tvar check = () => --remaining || fn();\n\t\tfor (var transition of transitions) {\n\t\t\ttransition.out(check);\n\t\t}\n\t} else {\n\t\tfn();\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {TransitionManager[]} transitions\n * @param {boolean} local\n */\nfunction pause_children(effect, transitions, local) {\n\tif ((effect.f & INERT) !== 0) return;\n\teffect.f ^= INERT;\n\n\tvar t = effect.nodes && effect.nodes.t;\n\n\tif (t !== null) {\n\t\tfor (const transition of t) {\n\t\t\tif (transition.is_global || local) {\n\t\t\t\ttransitions.push(transition);\n\t\t\t}\n\t\t}\n\t}\n\n\tvar child = effect.first;\n\n\twhile (child !== null) {\n\t\tvar sibling = child.next;\n\t\tvar transparent =\n\t\t\t(child.f & EFFECT_TRANSPARENT) !== 0 ||\n\t\t\t// If this is a branch effect without a block effect parent,\n\t\t\t// it means the parent block effect was pruned. In that case,\n\t\t\t// transparency information was transferred to the branch effect.\n\t\t\t((child.f & BRANCH_EFFECT) !== 0 && (effect.f & BLOCK_EFFECT) !== 0);\n\t\t// TODO we don't need to call pause_children recursively with a linked list in place\n\t\t// it's slightly more involved though as we have to account for `transparent` changing\n\t\t// through the tree.\n\t\tpause_children(child, transitions, transparent ? local : false);\n\t\tchild = sibling;\n\t}\n}\n\n/**\n * The opposite of `pause_effect`. We call this if (for example)\n * `x` becomes falsy then truthy: `{#if x}...{/if}`\n * @param {Effect} effect\n */\nexport function resume_effect(effect) {\n\tresume_children(effect, true);\n}\n\n/**\n * @param {Effect} effect\n * @param {boolean} local\n */\nfunction resume_children(effect, local) {\n\tif ((effect.f & INERT) === 0) return;\n\teffect.f ^= INERT;\n\n\t// If a dependency of this effect changed while it was paused,\n\t// schedule the effect to update. we don't use `is_dirty`\n\t// here because we don't want to eagerly recompute a derived like\n\t// `{#if foo}{foo.bar()}{/if}` if `foo` is now `undefined\n\tif ((effect.f & CLEAN) === 0) {\n\t\tset_signal_status(effect, DIRTY);\n\t\tschedule_effect(effect);\n\t}\n\n\tvar child = effect.first;\n\n\twhile (child !== null) {\n\t\tvar sibling = child.next;\n\t\tvar transparent = (child.f & EFFECT_TRANSPARENT) !== 0 || (child.f & BRANCH_EFFECT) !== 0;\n\t\t// TODO we don't need to call resume_children recursively with a linked list in place\n\t\t// it's slightly more involved though as we have to account for `transparent` changing\n\t\t// through the tree.\n\t\tresume_children(child, transparent ? local : false);\n\t\tchild = sibling;\n\t}\n\n\tvar t = effect.nodes && effect.nodes.t;\n\n\tif (t !== null) {\n\t\tfor (const transition of t) {\n\t\t\tif (transition.is_global || local) {\n\t\t\t\ttransition.in();\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function aborted(effect = /** @type {Effect} */ (active_effect)) {\n\treturn (effect.f & DESTROYED) !== 0;\n}\n\n/**\n * @param {Effect} effect\n * @param {DocumentFragment} fragment\n */\nexport function move_effect(effect, fragment) {\n\tif (!effect.nodes) return;\n\n\t/** @type {TemplateNode | null} */\n\tvar node = effect.nodes.start;\n\tvar end = effect.nodes.end;\n\n\twhile (node !== null) {\n\t\t/** @type {TemplateNode | null} */\n\t\tvar next = node === end ? null : get_next_sibling(node);\n\n\t\tfragment.append(node);\n\t\tnode = next;\n\t}\n}\n", "/** @import { Value } from '#client' */\nimport { internal_set } from './reactivity/sources.js';\nimport { untrack } from './runtime.js';\n\n/**\n * @type {Set<Value> | null}\n * @deprecated\n */\nexport let captured_signals = null;\n\n/**\n * Capture an array of all the signals that are read when `fn` is called\n * @template T\n * @param {() => T} fn\n */\nfunction capture_signals(fn) {\n\tvar previous_captured_signals = captured_signals;\n\n\ttry {\n\t\tcaptured_signals = new Set();\n\n\t\tuntrack(fn);\n\n\t\tif (previous_captured_signals !== null) {\n\t\t\tfor (var signal of captured_signals) {\n\t\t\t\tprevious_captured_signals.add(signal);\n\t\t\t}\n\t\t}\n\n\t\treturn captured_signals;\n\t} finally {\n\t\tcaptured_signals = previous_captured_signals;\n\t}\n}\n\n/**\n * Invokes a function and captures all signals that are read during the invocation,\n * then invalidates them.\n * @param {() => any} fn\n * @deprecated\n */\nexport function invalidate_inner_signals(fn) {\n\tfor (var signal of capture_signals(fn)) {\n\t\tinternal_set(signal, signal.v);\n\t}\n}\n", "/** @import { Derived, Effect, Reaction, Source, Value } from '#client' */\nimport { DEV } from 'esm-env';\nimport { get_descriptors, get_prototype_of, index_of } from '../shared/utils.js';\nimport {\n\tdestroy_block_effect_children,\n\tdestroy_effect_children,\n\teffect_tracking,\n\texecute_effect_teardown\n} from './reactivity/effects.js';\nimport {\n\tDIRTY,\n\tMAYBE_DIRTY,\n\tCLEAN,\n\tDERIVED,\n\tDESTROYED,\n\tBRANCH_EFFECT,\n\tSTATE_SYMBOL,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT,\n\tCONNECTED,\n\tREACTION_IS_UPDATING,\n\tSTALE_REACTION,\n\tERROR_VALUE,\n\tWAS_MARKED,\n\tMANAGED_EFFECT\n} from './constants.js';\nimport { old_values } from './reactivity/sources.js';\nimport {\n\tdestroy_derived_effects,\n\texecute_derived,\n\trecent_async_deriveds,\n\tupdate_derived\n} from './reactivity/deriveds.js';\nimport { async_mode_flag, tracing_mode_flag } from '../flags/index.js';\nimport { tracing_expressions } from './dev/tracing.js';\nimport { get_error } from '../shared/dev.js';\nimport {\n\tcomponent_context,\n\tdev_current_component_function,\n\tdev_stack,\n\tis_runes,\n\tset_component_context,\n\tset_dev_current_component_function,\n\tset_dev_stack\n} from './context.js';\nimport { Batch, batch_values, flushSync, schedule_effect } from './reactivity/batch.js';\nimport { handle_error } from './error-handling.js';\nimport { UNINITIALIZED } from '../../constants.js';\nimport { captured_signals } from './legacy.js';\nimport { without_reactive_context } from './dom/elements/bindings/shared.js';\nimport { set_signal_status, update_derived_status } from './reactivity/status.js';\n\nlet is_updating_effect = false;\n\nexport let is_destroying_effect = false;\n\n/** @param {boolean} value */\nexport function set_is_destroying_effect(value) {\n\tis_destroying_effect = value;\n}\n\n/** @type {null | Reaction} */\nexport let active_reaction = null;\n\nexport let untracking = false;\n\n/** @param {null | Reaction} reaction */\nexport function set_active_reaction(reaction) {\n\tactive_reaction = reaction;\n}\n\n/** @type {null | Effect} */\nexport let active_effect = null;\n\n/** @param {null | Effect} effect */\nexport function set_active_effect(effect) {\n\tactive_effect = effect;\n}\n\n/**\n * When sources are created within a reaction, reading and writing\n * them within that reaction should not cause a re-run\n * @type {null | Source[]}\n */\nexport let current_sources = null;\n\n/** @param {Value} value */\nexport function push_reaction_value(value) {\n\tif (active_reaction !== null && (!async_mode_flag || (active_reaction.f & DERIVED) !== 0)) {\n\t\tif (current_sources === null) {\n\t\t\tcurrent_sources = [value];\n\t\t} else {\n\t\t\tcurrent_sources.push(value);\n\t\t}\n\t}\n}\n\n/**\n * The dependencies of the reaction that is currently being executed. In many cases,\n * the dependencies are unchanged between runs, and so this will be `null` unless\n * and until a new dependency is accessed \u2014 we track this via `skipped_deps`\n * @type {null | Value[]}\n */\nlet new_deps = null;\n\nlet skipped_deps = 0;\n\n/**\n * Tracks writes that the effect it's executed in doesn't listen to yet,\n * so that the dependency can be added to the effect later on if it then reads it\n * @type {null | Source[]}\n */\nexport let untracked_writes = null;\n\n/** @param {null | Source[]} value */\nexport function set_untracked_writes(value) {\n\tuntracked_writes = value;\n}\n\n/**\n * @type {number} Used by sources and deriveds for handling updates.\n * Version starts from 1 so that unowned deriveds differentiate between a created effect and a run one for tracing\n **/\nexport let write_version = 1;\n\n/** @type {number} Used to version each read of a source of derived to avoid duplicating depedencies inside a reaction */\nlet read_version = 0;\n\nexport let update_version = read_version;\n\n/** @param {number} value */\nexport function set_update_version(value) {\n\tupdate_version = value;\n}\n\nexport function increment_write_version() {\n\treturn ++write_version;\n}\n\n/**\n * Determines whether a derived or effect is dirty.\n * If it is MAYBE_DIRTY, will set the status to CLEAN\n * @param {Reaction} reaction\n * @returns {boolean}\n */\nexport function is_dirty(reaction) {\n\tvar flags = reaction.f;\n\n\tif ((flags & DIRTY) !== 0) {\n\t\treturn true;\n\t}\n\n\tif (flags & DERIVED) {\n\t\treaction.f &= ~WAS_MARKED;\n\t}\n\n\tif ((flags & MAYBE_DIRTY) !== 0) {\n\t\tvar dependencies = /** @type {Value[]} */ (reaction.deps);\n\t\tvar length = dependencies.length;\n\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tvar dependency = dependencies[i];\n\n\t\t\tif (is_dirty(/** @type {Derived} */ (dependency))) {\n\t\t\t\tupdate_derived(/** @type {Derived} */ (dependency));\n\t\t\t}\n\n\t\t\tif (dependency.wv > reaction.wv) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\t(flags & CONNECTED) !== 0 &&\n\t\t\t// During time traveling we don't want to reset the status so that\n\t\t\t// traversal of the graph in the other batches still happens\n\t\t\tbatch_values === null\n\t\t) {\n\t\t\tset_signal_status(reaction, CLEAN);\n\t\t}\n\t}\n\n\treturn false;\n}\n\n/**\n * @param {Value} signal\n * @param {Effect} effect\n * @param {boolean} [root]\n */\nfunction schedule_possible_effect_self_invalidation(signal, effect, root = true) {\n\tvar reactions = signal.reactions;\n\tif (reactions === null) return;\n\n\tif (!async_mode_flag && current_sources?.includes(signal)) {\n\t\treturn;\n\t}\n\n\tfor (var i = 0; i < reactions.length; i++) {\n\t\tvar reaction = reactions[i];\n\n\t\tif ((reaction.f & DERIVED) !== 0) {\n\t\t\tschedule_possible_effect_self_invalidation(/** @type {Derived} */ (reaction), effect, false);\n\t\t} else if (effect === reaction) {\n\t\t\tif (root) {\n\t\t\t\tset_signal_status(reaction, DIRTY);\n\t\t\t} else if ((reaction.f & CLEAN) !== 0) {\n\t\t\t\tset_signal_status(reaction, MAYBE_DIRTY);\n\t\t\t}\n\t\t\tschedule_effect(/** @type {Effect} */ (reaction));\n\t\t}\n\t}\n}\n\n/** @param {Reaction} reaction */\nexport function update_reaction(reaction) {\n\tvar previous_deps = new_deps;\n\tvar previous_skipped_deps = skipped_deps;\n\tvar previous_untracked_writes = untracked_writes;\n\tvar previous_reaction = active_reaction;\n\tvar previous_sources = current_sources;\n\tvar previous_component_context = component_context;\n\tvar previous_untracking = untracking;\n\tvar previous_update_version = update_version;\n\n\tvar flags = reaction.f;\n\n\tnew_deps = /** @type {null | Value[]} */ (null);\n\tskipped_deps = 0;\n\tuntracked_writes = null;\n\tactive_reaction = (flags & (BRANCH_EFFECT | ROOT_EFFECT)) === 0 ? reaction : null;\n\n\tcurrent_sources = null;\n\tset_component_context(reaction.ctx);\n\tuntracking = false;\n\tupdate_version = ++read_version;\n\n\tif (reaction.ac !== null) {\n\t\twithout_reactive_context(() => {\n\t\t\t/** @type {AbortController} */ (reaction.ac).abort(STALE_REACTION);\n\t\t});\n\n\t\treaction.ac = null;\n\t}\n\n\ttry {\n\t\treaction.f |= REACTION_IS_UPDATING;\n\t\tvar fn = /** @type {Function} */ (reaction.fn);\n\t\tvar result = fn();\n\t\tvar deps = reaction.deps;\n\n\t\tif (new_deps !== null) {\n\t\t\tvar i;\n\n\t\t\tremove_reactions(reaction, skipped_deps);\n\n\t\t\tif (deps !== null && skipped_deps > 0) {\n\t\t\t\tdeps.length = skipped_deps + new_deps.length;\n\t\t\t\tfor (i = 0; i < new_deps.length; i++) {\n\t\t\t\t\tdeps[skipped_deps + i] = new_deps[i];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treaction.deps = deps = new_deps;\n\t\t\t}\n\n\t\t\tif (effect_tracking() && (reaction.f & CONNECTED) !== 0) {\n\t\t\t\tfor (i = skipped_deps; i < deps.length; i++) {\n\t\t\t\t\t(deps[i].reactions ??= []).push(reaction);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (deps !== null && skipped_deps < deps.length) {\n\t\t\tremove_reactions(reaction, skipped_deps);\n\t\t\tdeps.length = skipped_deps;\n\t\t}\n\n\t\t// If we're inside an effect and we have untracked writes, then we need to\n\t\t// ensure that if any of those untracked writes result in re-invalidation\n\t\t// of the current effect, then that happens accordingly\n\t\tif (\n\t\t\tis_runes() &&\n\t\t\tuntracked_writes !== null &&\n\t\t\t!untracking &&\n\t\t\tdeps !== null &&\n\t\t\t(reaction.f & (DERIVED | MAYBE_DIRTY | DIRTY)) === 0\n\t\t) {\n\t\t\tfor (i = 0; i < /** @type {Source[]} */ (untracked_writes).length; i++) {\n\t\t\t\tschedule_possible_effect_self_invalidation(\n\t\t\t\t\tuntracked_writes[i],\n\t\t\t\t\t/** @type {Effect} */ (reaction)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// If we are returning to an previous reaction then\n\t\t// we need to increment the read version to ensure that\n\t\t// any dependencies in this reaction aren't marked with\n\t\t// the same version\n\t\tif (previous_reaction !== null && previous_reaction !== reaction) {\n\t\t\tread_version++;\n\n\t\t\t// update the `rv` of the previous reaction's deps \u2014 both existing and new \u2014\n\t\t\t// so that they are not added again\n\t\t\tif (previous_reaction.deps !== null) {\n\t\t\t\tfor (let i = 0; i < previous_skipped_deps; i += 1) {\n\t\t\t\t\tprevious_reaction.deps[i].rv = read_version;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (previous_deps !== null) {\n\t\t\t\tfor (const dep of previous_deps) {\n\t\t\t\t\tdep.rv = read_version;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (untracked_writes !== null) {\n\t\t\t\tif (previous_untracked_writes === null) {\n\t\t\t\t\tprevious_untracked_writes = untracked_writes;\n\t\t\t\t} else {\n\t\t\t\t\tprevious_untracked_writes.push(.../** @type {Source[]} */ (untracked_writes));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ((reaction.f & ERROR_VALUE) !== 0) {\n\t\t\treaction.f ^= ERROR_VALUE;\n\t\t}\n\n\t\treturn result;\n\t} catch (error) {\n\t\treturn handle_error(error);\n\t} finally {\n\t\treaction.f ^= REACTION_IS_UPDATING;\n\t\tnew_deps = previous_deps;\n\t\tskipped_deps = previous_skipped_deps;\n\t\tuntracked_writes = previous_untracked_writes;\n\t\tactive_reaction = previous_reaction;\n\t\tcurrent_sources = previous_sources;\n\t\tset_component_context(previous_component_context);\n\t\tuntracking = previous_untracking;\n\t\tupdate_version = previous_update_version;\n\t}\n}\n\n/**\n * @template V\n * @param {Reaction} signal\n * @param {Value<V>} dependency\n * @returns {void}\n */\nfunction remove_reaction(signal, dependency) {\n\tlet reactions = dependency.reactions;\n\tif (reactions !== null) {\n\t\tvar index = index_of.call(reactions, signal);\n\t\tif (index !== -1) {\n\t\t\tvar new_length = reactions.length - 1;\n\t\t\tif (new_length === 0) {\n\t\t\t\treactions = dependency.reactions = null;\n\t\t\t} else {\n\t\t\t\t// Swap with last element and then remove.\n\t\t\t\treactions[index] = reactions[new_length];\n\t\t\t\treactions.pop();\n\t\t\t}\n\t\t}\n\t}\n\n\t// If the derived has no reactions, then we can disconnect it from the graph,\n\t// allowing it to either reconnect in the future, or be GC'd by the VM.\n\tif (\n\t\treactions === null &&\n\t\t(dependency.f & DERIVED) !== 0 &&\n\t\t// Destroying a child effect while updating a parent effect can cause a dependency to appear\n\t\t// to be unused, when in fact it is used by the currently-updating parent. Checking `new_deps`\n\t\t// allows us to skip the expensive work of disconnecting and immediately reconnecting it\n\t\t(new_deps === null || !new_deps.includes(dependency))\n\t) {\n\t\tvar derived = /** @type {Derived} */ (dependency);\n\n\t\t// If we are working with a derived that is owned by an effect, then mark it as being\n\t\t// disconnected and remove the mark flag, as it cannot be reliably removed otherwise\n\t\tif ((derived.f & CONNECTED) !== 0) {\n\t\t\tderived.f ^= CONNECTED;\n\t\t\tderived.f &= ~WAS_MARKED;\n\t\t}\n\n\t\tupdate_derived_status(derived);\n\n\t\t// Disconnect any reactions owned by this reaction\n\t\tdestroy_derived_effects(derived);\n\t\tremove_reactions(derived, 0);\n\t}\n}\n\n/**\n * @param {Reaction} signal\n * @param {number} start_index\n * @returns {void}\n */\nexport function remove_reactions(signal, start_index) {\n\tvar dependencies = signal.deps;\n\tif (dependencies === null) return;\n\n\tfor (var i = start_index; i < dependencies.length; i++) {\n\t\tremove_reaction(signal, dependencies[i]);\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @returns {void}\n */\nexport function update_effect(effect) {\n\tvar flags = effect.f;\n\n\tif ((flags & DESTROYED) !== 0) {\n\t\treturn;\n\t}\n\n\tset_signal_status(effect, CLEAN);\n\n\tvar previous_effect = active_effect;\n\tvar was_updating_effect = is_updating_effect;\n\n\tactive_effect = effect;\n\tis_updating_effect = true;\n\n\tif (DEV) {\n\t\tvar previous_component_fn = dev_current_component_function;\n\t\tset_dev_current_component_function(effect.component_function);\n\t\tvar previous_stack = /** @type {any} */ (dev_stack);\n\t\t// only block effects have a dev stack, keep the current one otherwise\n\t\tset_dev_stack(effect.dev_stack ?? dev_stack);\n\t}\n\n\ttry {\n\t\tif ((flags & (BLOCK_EFFECT | MANAGED_EFFECT)) !== 0) {\n\t\t\tdestroy_block_effect_children(effect);\n\t\t} else {\n\t\t\tdestroy_effect_children(effect);\n\t\t}\n\n\t\texecute_effect_teardown(effect);\n\t\tvar teardown = update_reaction(effect);\n\t\teffect.teardown = typeof teardown === 'function' ? teardown : null;\n\t\teffect.wv = write_version;\n\n\t\t// In DEV, increment versions of any sources that were written to during the effect,\n\t\t// so that they are correctly marked as dirty when the effect re-runs\n\t\tif (DEV && tracing_mode_flag && (effect.f & DIRTY) !== 0 && effect.deps !== null) {\n\t\t\tfor (var dep of effect.deps) {\n\t\t\t\tif (dep.set_during_effect) {\n\t\t\t\t\tdep.wv = increment_write_version();\n\t\t\t\t\tdep.set_during_effect = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} finally {\n\t\tis_updating_effect = was_updating_effect;\n\t\tactive_effect = previous_effect;\n\n\t\tif (DEV) {\n\t\t\tset_dev_current_component_function(previous_component_fn);\n\t\t\tset_dev_stack(previous_stack);\n\t\t}\n\t}\n}\n\n/**\n * Returns a promise that resolves once any pending state changes have been applied.\n * @returns {Promise<void>}\n */\nexport async function tick() {\n\tif (async_mode_flag) {\n\t\treturn new Promise((f) => {\n\t\t\t// Race them against each other - in almost all cases requestAnimationFrame will fire first,\n\t\t\t// but e.g. in case the window is not focused or a view transition happens, requestAnimationFrame\n\t\t\t// will be delayed and setTimeout helps us resolve fast enough in that case\n\t\t\trequestAnimationFrame(() => f());\n\t\t\tsetTimeout(() => f());\n\t\t});\n\t}\n\n\tawait Promise.resolve();\n\n\t// By calling flushSync we guarantee that any pending state changes are applied after one tick.\n\t// TODO look into whether we can make flushing subsequent updates synchronously in the future.\n\tflushSync();\n}\n\n/**\n * Returns a promise that resolves once any state changes, and asynchronous work resulting from them,\n * have resolved and the DOM has been updated\n * @returns {Promise<void>}\n * @since 5.36\n */\nexport function settled() {\n\treturn Batch.ensure().settled();\n}\n\n/**\n * @template V\n * @param {Value<V>} signal\n * @returns {V}\n */\nexport function get(signal) {\n\tvar flags = signal.f;\n\tvar is_derived = (flags & DERIVED) !== 0;\n\n\tcaptured_signals?.add(signal);\n\n\t// Register the dependency on the current reaction signal.\n\tif (active_reaction !== null && !untracking) {\n\t\t// if we're in a derived that is being read inside an _async_ derived,\n\t\t// it's possible that the effect was already destroyed. In this case,\n\t\t// we don't add the dependency, because that would create a memory leak\n\t\tvar destroyed = active_effect !== null && (active_effect.f & DESTROYED) !== 0;\n\n\t\tif (!destroyed && !current_sources?.includes(signal)) {\n\t\t\tvar deps = active_reaction.deps;\n\n\t\t\tif ((active_reaction.f & REACTION_IS_UPDATING) !== 0) {\n\t\t\t\t// we're in the effect init/update cycle\n\t\t\t\tif (signal.rv < read_version) {\n\t\t\t\t\tsignal.rv = read_version;\n\n\t\t\t\t\t// If the signal is accessing the same dependencies in the same\n\t\t\t\t\t// order as it did last time, increment `skipped_deps`\n\t\t\t\t\t// rather than updating `new_deps`, which creates GC cost\n\t\t\t\t\tif (new_deps === null && deps !== null && deps[skipped_deps] === signal) {\n\t\t\t\t\t\tskipped_deps++;\n\t\t\t\t\t} else if (new_deps === null) {\n\t\t\t\t\t\tnew_deps = [signal];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnew_deps.push(signal);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// we're adding a dependency outside the init/update cycle\n\t\t\t\t// (i.e. after an `await`)\n\t\t\t\t(active_reaction.deps ??= []).push(signal);\n\n\t\t\t\tvar reactions = signal.reactions;\n\n\t\t\t\tif (reactions === null) {\n\t\t\t\t\tsignal.reactions = [active_reaction];\n\t\t\t\t} else if (!reactions.includes(active_reaction)) {\n\t\t\t\t\treactions.push(active_reaction);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (DEV) {\n\t\t// TODO reinstate this, but make it actually work\n\t\t// if (current_async_effect) {\n\t\t// \tvar tracking = (current_async_effect.f & REACTION_IS_UPDATING) !== 0;\n\t\t// \tvar was_read = current_async_effect.deps?.includes(signal);\n\n\t\t// \tif (!tracking && !untracking && !was_read) {\n\t\t// \t\tw.await_reactivity_loss(/** @type {string} */ (signal.label));\n\n\t\t// \t\tvar trace = get_error('traced at');\n\t\t// \t\t// eslint-disable-next-line no-console\n\t\t// \t\tif (trace) console.warn(trace);\n\t\t// \t}\n\t\t// }\n\n\t\trecent_async_deriveds.delete(signal);\n\n\t\tif (\n\t\t\ttracing_mode_flag &&\n\t\t\t!untracking &&\n\t\t\ttracing_expressions !== null &&\n\t\t\tactive_reaction !== null &&\n\t\t\ttracing_expressions.reaction === active_reaction\n\t\t) {\n\t\t\t// Used when mapping state between special blocks like `each`\n\t\t\tif (signal.trace) {\n\t\t\t\tsignal.trace();\n\t\t\t} else {\n\t\t\t\tvar trace = get_error('traced at');\n\n\t\t\t\tif (trace) {\n\t\t\t\t\tvar entry = tracing_expressions.entries.get(signal);\n\n\t\t\t\t\tif (entry === undefined) {\n\t\t\t\t\t\tentry = { traces: [] };\n\t\t\t\t\t\ttracing_expressions.entries.set(signal, entry);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar last = entry.traces[entry.traces.length - 1];\n\n\t\t\t\t\t// traces can be duplicated, e.g. by `snapshot` invoking both\n\t\t\t\t\t// both `getOwnPropertyDescriptor` and `get` traps at once\n\t\t\t\t\tif (trace.stack !== last?.stack) {\n\t\t\t\t\t\tentry.traces.push(trace);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (is_destroying_effect && old_values.has(signal)) {\n\t\treturn old_values.get(signal);\n\t}\n\n\tif (is_derived) {\n\t\tvar derived = /** @type {Derived} */ (signal);\n\n\t\tif (is_destroying_effect) {\n\t\t\tvar value = derived.v;\n\n\t\t\t// if the derived is dirty and has reactions, or depends on the values that just changed, re-execute\n\t\t\t// (a derived can be maybe_dirty due to the effect destroy removing its last reaction)\n\t\t\tif (\n\t\t\t\t((derived.f & CLEAN) === 0 && derived.reactions !== null) ||\n\t\t\t\tdepends_on_old_values(derived)\n\t\t\t) {\n\t\t\t\tvalue = execute_derived(derived);\n\t\t\t}\n\n\t\t\told_values.set(derived, value);\n\n\t\t\treturn value;\n\t\t}\n\n\t\t// connect disconnected deriveds if we are reading them inside an effect,\n\t\t// or inside another derived that is already connected\n\t\tvar should_connect =\n\t\t\t(derived.f & CONNECTED) === 0 &&\n\t\t\t!untracking &&\n\t\t\tactive_reaction !== null &&\n\t\t\t(is_updating_effect || (active_reaction.f & CONNECTED) !== 0);\n\n\t\tvar is_new = derived.deps === null;\n\n\t\tif (is_dirty(derived)) {\n\t\t\tif (should_connect) {\n\t\t\t\t// set the flag before `update_derived`, so that the derived\n\t\t\t\t// is added as a reaction to its dependencies\n\t\t\t\tderived.f |= CONNECTED;\n\t\t\t}\n\n\t\t\tupdate_derived(derived);\n\t\t}\n\n\t\tif (should_connect && !is_new) {\n\t\t\treconnect(derived);\n\t\t}\n\t}\n\n\tif (batch_values?.has(signal)) {\n\t\treturn batch_values.get(signal);\n\t}\n\n\tif ((signal.f & ERROR_VALUE) !== 0) {\n\t\tthrow signal.v;\n\t}\n\n\treturn signal.v;\n}\n\n/**\n * (Re)connect a disconnected derived, so that it is notified\n * of changes in `mark_reactions`\n * @param {Derived} derived\n */\nfunction reconnect(derived) {\n\tif (derived.deps === null) return;\n\n\tderived.f |= CONNECTED;\n\n\tfor (const dep of derived.deps) {\n\t\t(dep.reactions ??= []).push(derived);\n\n\t\tif ((dep.f & DERIVED) !== 0 && (dep.f & CONNECTED) === 0) {\n\t\t\treconnect(/** @type {Derived} */ (dep));\n\t\t}\n\t}\n}\n\n/** @param {Derived} derived */\nfunction depends_on_old_values(derived) {\n\tif (derived.v === UNINITIALIZED) return true; // we don't know, so assume the worst\n\tif (derived.deps === null) return false;\n\n\tfor (const dep of derived.deps) {\n\t\tif (old_values.has(dep)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ((dep.f & DERIVED) !== 0 && depends_on_old_values(/** @type {Derived} */ (dep))) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\n/**\n * Like `get`, but checks for `undefined`. Used for `var` declarations because they can be accessed before being declared\n * @template V\n * @param {Value<V> | undefined} signal\n * @returns {V | undefined}\n */\nexport function safe_get(signal) {\n\treturn signal && get(signal);\n}\n\n/**\n * When used inside a [`$derived`](https://svelte.dev/docs/svelte/$derived) or [`$effect`](https://svelte.dev/docs/svelte/$effect),\n * any state read inside `fn` will not be treated as a dependency.\n *\n * ```ts\n * $effect(() => {\n *   // this will run when `data` changes, but not when `time` changes\n *   save(data, {\n *     timestamp: untrack(() => time)\n *   });\n * });\n * ```\n * @template T\n * @param {() => T} fn\n * @returns {T}\n */\nexport function untrack(fn) {\n\tvar previous_untracking = untracking;\n\ttry {\n\t\tuntracking = true;\n\t\treturn fn();\n\t} finally {\n\t\tuntracking = previous_untracking;\n\t}\n}\n\n/**\n * @param {Record<string | symbol, unknown>} obj\n * @param {Array<string | symbol>} keys\n * @returns {Record<string | symbol, unknown>}\n */\nexport function exclude_from_object(obj, keys) {\n\t/** @type {Record<string | symbol, unknown>} */\n\tvar result = {};\n\n\tfor (var key in obj) {\n\t\tif (!keys.includes(key)) {\n\t\t\tresult[key] = obj[key];\n\t\t}\n\t}\n\n\tfor (var symbol of Object.getOwnPropertySymbols(obj)) {\n\t\tif (Object.propertyIsEnumerable.call(obj, symbol) && !keys.includes(symbol)) {\n\t\t\tresult[symbol] = obj[symbol];\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Possibly traverse an object and read all its properties so that they're all reactive in case this is `$state`.\n * Does only check first level of an object for performance reasons (heuristic should be good for 99% of all cases).\n * @param {any} value\n * @returns {void}\n */\nexport function deep_read_state(value) {\n\tif (typeof value !== 'object' || !value || value instanceof EventTarget) {\n\t\treturn;\n\t}\n\n\tif (STATE_SYMBOL in value) {\n\t\tdeep_read(value);\n\t} else if (!Array.isArray(value)) {\n\t\tfor (let key in value) {\n\t\t\tconst prop = value[key];\n\t\t\tif (typeof prop === 'object' && prop && STATE_SYMBOL in prop) {\n\t\t\t\tdeep_read(prop);\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Deeply traverse an object and read all its properties\n * so that they're all reactive in case this is `$state`\n * @param {any} value\n * @param {Set<any>} visited\n * @returns {void}\n */\nexport function deep_read(value, visited = new Set()) {\n\tif (\n\t\ttypeof value === 'object' &&\n\t\tvalue !== null &&\n\t\t// We don't want to traverse DOM elements\n\t\t!(value instanceof EventTarget) &&\n\t\t!visited.has(value)\n\t) {\n\t\tvisited.add(value);\n\t\t// When working with a possible SvelteDate, this\n\t\t// will ensure we capture changes to it.\n\t\tif (value instanceof Date) {\n\t\t\tvalue.getTime();\n\t\t}\n\t\tfor (let key in value) {\n\t\t\ttry {\n\t\t\t\tdeep_read(value[key], visited);\n\t\t\t} catch (e) {\n\t\t\t\t// continue\n\t\t\t}\n\t\t}\n\t\tconst proto = get_prototype_of(value);\n\t\tif (\n\t\t\tproto !== Object.prototype &&\n\t\t\tproto !== Array.prototype &&\n\t\t\tproto !== Map.prototype &&\n\t\t\tproto !== Set.prototype &&\n\t\t\tproto !== Date.prototype\n\t\t) {\n\t\t\tconst descriptors = get_descriptors(proto);\n\t\t\tfor (let key in descriptors) {\n\t\t\t\tconst get = descriptors[key].get;\n\t\t\t\tif (get) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tget.call(value);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// continue\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n", "import { async_mode_flag } from '../flags/index.js';\nimport { hydrating } from './dom/hydration.js';\nimport * as w from './warnings.js';\nimport * as e from './errors.js';\nimport { DEV } from 'esm-env';\n\n/**\n * @template T\n * @param {string} key\n * @param {() => T} fn\n * @returns {T}\n */\nexport function hydratable(key, fn) {\n\tif (!async_mode_flag) {\n\t\te.experimental_async_required('hydratable');\n\t}\n\n\tif (hydrating) {\n\t\tconst store = window.__svelte?.h;\n\n\t\tif (store?.has(key)) {\n\t\t\treturn /** @type {T} */ (store.get(key));\n\t\t}\n\n\t\tif (DEV) {\n\t\t\te.hydratable_missing_but_required(key);\n\t\t} else {\n\t\t\tw.hydratable_missing_but_expected(key);\n\t\t}\n\t}\n\n\treturn fn();\n}\n", "import { teardown } from '../../reactivity/effects.js';\nimport { define_property } from '../../../shared/utils.js';\nimport { hydrating } from '../hydration.js';\nimport { queue_micro_task } from '../task.js';\nimport { FILENAME } from '../../../../constants.js';\nimport * as w from '../../warnings.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../runtime.js';\nimport { without_reactive_context } from './bindings/shared.js';\n\n/** @type {Set<string>} */\nexport const all_registered_events = new Set();\n\n/** @type {Set<(events: Array<string>) => void>} */\nexport const root_event_handles = new Set();\n\n/**\n * SSR adds onload and onerror attributes to catch those events before the hydration.\n * This function detects those cases, removes the attributes and replays the events.\n * @param {HTMLElement} dom\n */\nexport function replay_events(dom) {\n\tif (!hydrating) return;\n\n\tdom.removeAttribute('onload');\n\tdom.removeAttribute('onerror');\n\t// @ts-expect-error\n\tconst event = dom.__e;\n\tif (event !== undefined) {\n\t\t// @ts-expect-error\n\t\tdom.__e = undefined;\n\t\tqueueMicrotask(() => {\n\t\t\tif (dom.isConnected) {\n\t\t\t\tdom.dispatchEvent(event);\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * @param {string} event_name\n * @param {EventTarget} dom\n * @param {EventListener} [handler]\n * @param {AddEventListenerOptions} [options]\n */\nexport function create_event(event_name, dom, handler, options = {}) {\n\t/**\n\t * @this {EventTarget}\n\t */\n\tfunction target_handler(/** @type {Event} */ event) {\n\t\tif (!options.capture) {\n\t\t\t// Only call in the bubble phase, else delegated events would be called before the capturing events\n\t\t\thandle_event_propagation.call(dom, event);\n\t\t}\n\t\tif (!event.cancelBubble) {\n\t\t\treturn without_reactive_context(() => {\n\t\t\t\treturn handler?.call(this, event);\n\t\t\t});\n\t\t}\n\t}\n\n\t// Chrome has a bug where pointer events don't work when attached to a DOM element that has been cloned\n\t// with cloneNode() and the DOM element is disconnected from the document. To ensure the event works, we\n\t// defer the attachment till after it's been appended to the document. TODO: remove this once Chrome fixes\n\t// this bug. The same applies to wheel events and touch events.\n\tif (\n\t\tevent_name.startsWith('pointer') ||\n\t\tevent_name.startsWith('touch') ||\n\t\tevent_name === 'wheel'\n\t) {\n\t\tqueue_micro_task(() => {\n\t\t\tdom.addEventListener(event_name, target_handler, options);\n\t\t});\n\t} else {\n\t\tdom.addEventListener(event_name, target_handler, options);\n\t}\n\n\treturn target_handler;\n}\n\n/**\n * Attaches an event handler to an element and returns a function that removes the handler. Using this\n * rather than `addEventListener` will preserve the correct order relative to handlers added declaratively\n * (with attributes like `onclick`), which use event delegation for performance reasons\n *\n * @param {EventTarget} element\n * @param {string} type\n * @param {EventListener} handler\n * @param {AddEventListenerOptions} [options]\n */\nexport function on(element, type, handler, options = {}) {\n\tvar target_handler = create_event(type, element, handler, options);\n\n\treturn () => {\n\t\telement.removeEventListener(type, target_handler, options);\n\t};\n}\n\n/**\n * @param {string} event_name\n * @param {Element} dom\n * @param {EventListener} [handler]\n * @param {boolean} [capture]\n * @param {boolean} [passive]\n * @returns {void}\n */\nexport function event(event_name, dom, handler, capture, passive) {\n\tvar options = { capture, passive };\n\tvar target_handler = create_event(event_name, dom, handler, options);\n\n\tif (\n\t\tdom === document.body ||\n\t\t// @ts-ignore\n\t\tdom === window ||\n\t\t// @ts-ignore\n\t\tdom === document ||\n\t\t// Firefox has quirky behavior, it can happen that we still get \"canplay\" events when the element is already removed\n\t\tdom instanceof HTMLMediaElement\n\t) {\n\t\tteardown(() => {\n\t\t\tdom.removeEventListener(event_name, target_handler, options);\n\t\t});\n\t}\n}\n\n/**\n * @param {Array<string>} events\n * @returns {void}\n */\nexport function delegate(events) {\n\tfor (var i = 0; i < events.length; i++) {\n\t\tall_registered_events.add(events[i]);\n\t}\n\n\tfor (var fn of root_event_handles) {\n\t\tfn(events);\n\t}\n}\n\n// used to store the reference to the currently propagated event\n// to prevent garbage collection between microtasks in Firefox\n// If the event object is GCed too early, the expando __root property\n// set on the event object is lost, causing the event delegation\n// to process the event twice\nlet last_propagated_event = null;\n\n/**\n * @this {EventTarget}\n * @param {Event} event\n * @returns {void}\n */\nexport function handle_event_propagation(event) {\n\tvar handler_element = this;\n\tvar owner_document = /** @type {Node} */ (handler_element).ownerDocument;\n\tvar event_name = event.type;\n\tvar path = event.composedPath?.() || [];\n\tvar current_target = /** @type {null | Element} */ (path[0] || event.target);\n\n\tlast_propagated_event = event;\n\n\t// composedPath contains list of nodes the event has propagated through.\n\t// We check __root to skip all nodes below it in case this is a\n\t// parent of the __root node, which indicates that there's nested\n\t// mounted apps. In this case we don't want to trigger events multiple times.\n\tvar path_idx = 0;\n\n\t// the `last_propagated_event === event` check is redundant, but\n\t// without it the variable will be DCE'd and things will\n\t// fail mysteriously in Firefox\n\t// @ts-expect-error is added below\n\tvar handled_at = last_propagated_event === event && event.__root;\n\n\tif (handled_at) {\n\t\tvar at_idx = path.indexOf(handled_at);\n\t\tif (\n\t\t\tat_idx !== -1 &&\n\t\t\t(handler_element === document || handler_element === /** @type {any} */ (window))\n\t\t) {\n\t\t\t// This is the fallback document listener or a window listener, but the event was already handled\n\t\t\t// -> ignore, but set handle_at to document/window so that we're resetting the event\n\t\t\t// chain in case someone manually dispatches the same event object again.\n\t\t\t// @ts-expect-error\n\t\t\tevent.__root = handler_element;\n\t\t\treturn;\n\t\t}\n\n\t\t// We're deliberately not skipping if the index is higher, because\n\t\t// someone could create an event programmatically and emit it multiple times,\n\t\t// in which case we want to handle the whole propagation chain properly each time.\n\t\t// (this will only be a false negative if the event is dispatched multiple times and\n\t\t// the fallback document listener isn't reached in between, but that's super rare)\n\t\tvar handler_idx = path.indexOf(handler_element);\n\t\tif (handler_idx === -1) {\n\t\t\t// handle_idx can theoretically be -1 (happened in some JSDOM testing scenarios with an event listener on the window object)\n\t\t\t// so guard against that, too, and assume that everything was handled at this point.\n\t\t\treturn;\n\t\t}\n\n\t\tif (at_idx <= handler_idx) {\n\t\t\tpath_idx = at_idx;\n\t\t}\n\t}\n\n\tcurrent_target = /** @type {Element} */ (path[path_idx] || event.target);\n\t// there can only be one delegated event per element, and we either already handled the current target,\n\t// or this is the very first target in the chain which has a non-delegated listener, in which case it's safe\n\t// to handle a possible delegated event on it later (through the root delegation listener for example).\n\tif (current_target === handler_element) return;\n\n\t// Proxy currentTarget to correct target\n\tdefine_property(event, 'currentTarget', {\n\t\tconfigurable: true,\n\t\tget() {\n\t\t\treturn current_target || owner_document;\n\t\t}\n\t});\n\n\t// This started because of Chromium issue https://chromestatus.com/feature/5128696823545856,\n\t// where removal or moving of of the DOM can cause sync `blur` events to fire, which can cause logic\n\t// to run inside the current `active_reaction`, which isn't what we want at all. However, on reflection,\n\t// it's probably best that all event handled by Svelte have this behaviour, as we don't really want\n\t// an event handler to run in the context of another reaction or effect.\n\tvar previous_reaction = active_reaction;\n\tvar previous_effect = active_effect;\n\tset_active_reaction(null);\n\tset_active_effect(null);\n\n\ttry {\n\t\t/**\n\t\t * @type {unknown}\n\t\t */\n\t\tvar throw_error;\n\t\t/**\n\t\t * @type {unknown[]}\n\t\t */\n\t\tvar other_errors = [];\n\n\t\twhile (current_target !== null) {\n\t\t\t/** @type {null | Element} */\n\t\t\tvar parent_element =\n\t\t\t\tcurrent_target.assignedSlot ||\n\t\t\t\tcurrent_target.parentNode ||\n\t\t\t\t/** @type {any} */ (current_target).host ||\n\t\t\t\tnull;\n\n\t\t\ttry {\n\t\t\t\t// @ts-expect-error\n\t\t\t\tvar delegated = current_target['__' + event_name];\n\n\t\t\t\tif (\n\t\t\t\t\tdelegated != null &&\n\t\t\t\t\t(!(/** @type {any} */ (current_target).disabled) ||\n\t\t\t\t\t\t// DOM could've been updated already by the time this is reached, so we check this as well\n\t\t\t\t\t\t// -> the target could not have been disabled because it emits the event in the first place\n\t\t\t\t\t\tevent.target === current_target)\n\t\t\t\t) {\n\t\t\t\t\tdelegated.call(current_target, event);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tif (throw_error) {\n\t\t\t\t\tother_errors.push(error);\n\t\t\t\t} else {\n\t\t\t\t\tthrow_error = error;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (event.cancelBubble || parent_element === handler_element || parent_element === null) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcurrent_target = parent_element;\n\t\t}\n\n\t\tif (throw_error) {\n\t\t\tfor (let error of other_errors) {\n\t\t\t\t// Throw the rest of the errors, one-by-one on a microtask\n\t\t\t\tqueueMicrotask(() => {\n\t\t\t\t\tthrow error;\n\t\t\t\t});\n\t\t\t}\n\t\t\tthrow throw_error;\n\t\t}\n\t} finally {\n\t\t// @ts-expect-error is used above\n\t\tevent.__root = handler_element;\n\t\t// @ts-ignore remove proxy on currentTarget\n\t\tdelete event.currentTarget;\n\t\tset_active_reaction(previous_reaction);\n\t\tset_active_effect(previous_effect);\n\t}\n}\n\n/**\n * In dev, warn if an event handler is not a function, as it means the\n * user probably called the handler or forgot to add a `() =>`\n * @param {() => (event: Event, ...args: any) => void} thunk\n * @param {EventTarget} element\n * @param {[Event, ...any]} args\n * @param {any} component\n * @param {[number, number]} [loc]\n * @param {boolean} [remove_parens]\n */\nexport function apply(\n\tthunk,\n\telement,\n\targs,\n\tcomponent,\n\tloc,\n\thas_side_effects = false,\n\tremove_parens = false\n) {\n\tlet handler;\n\tlet error;\n\n\ttry {\n\t\thandler = thunk();\n\t} catch (e) {\n\t\terror = e;\n\t}\n\n\tif (typeof handler !== 'function' && (has_side_effects || handler != null || error)) {\n\t\tconst filename = component?.[FILENAME];\n\t\tconst location = loc ? ` at ${filename}:${loc[0]}:${loc[1]}` : ` in ${filename}`;\n\t\tconst phase = args[0]?.eventPhase < Event.BUBBLING_PHASE ? 'capture' : '';\n\t\tconst event_name = args[0]?.type + phase;\n\t\tconst description = `\\`${event_name}\\` handler${location}`;\n\t\tconst suggestion = remove_parens ? 'remove the trailing `()`' : 'add a leading `() =>`';\n\n\t\tw.event_handler_invalid(description, suggestion);\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\t}\n\thandler?.apply(element, args);\n}\n", "/** @param {string} html */\nexport function create_fragment_from_html(html) {\n\tvar elem = document.createElement('template');\n\telem.innerHTML = html.replaceAll('<!>', '<!---->'); // XHTML compliance\n\treturn elem.content;\n}\n", "/** @import { Effect, EffectNodes, TemplateNode } from '#client' */\n/** @import { TemplateStructure } from './types' */\nimport { hydrate_next, hydrate_node, hydrating, set_hydrate_node } from './hydration.js';\nimport {\n\tcreate_text,\n\tget_first_child,\n\tis_firefox,\n\tcreate_element,\n\tcreate_fragment,\n\tcreate_comment,\n\tset_attribute\n} from './operations.js';\nimport { create_fragment_from_html } from './reconciler.js';\nimport { active_effect } from '../runtime.js';\nimport {\n\tNAMESPACE_MATHML,\n\tNAMESPACE_SVG,\n\tTEMPLATE_FRAGMENT,\n\tTEMPLATE_USE_IMPORT_NODE,\n\tTEMPLATE_USE_MATHML,\n\tTEMPLATE_USE_SVG\n} from '../../../constants.js';\nimport { COMMENT_NODE, DOCUMENT_FRAGMENT_NODE, EFFECT_RAN, TEXT_NODE } from '#client/constants';\n\n/**\n * @param {TemplateNode} start\n * @param {TemplateNode | null} end\n */\nexport function assign_nodes(start, end) {\n\tvar effect = /** @type {Effect} */ (active_effect);\n\tif (effect.nodes === null) {\n\t\teffect.nodes = { start, end, a: null, t: null };\n\t}\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_html(content, flags) {\n\tvar is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;\n\tvar use_import_node = (flags & TEMPLATE_USE_IMPORT_NODE) !== 0;\n\n\t/** @type {Node} */\n\tvar node;\n\n\t/**\n\t * Whether or not the first item is a text/element node. If not, we need to\n\t * create an additional comment node to act as `effect.nodes.start`\n\t */\n\tvar has_start = !content.startsWith('<!>');\n\n\treturn () => {\n\t\tif (hydrating) {\n\t\t\tassign_nodes(hydrate_node, null);\n\t\t\treturn hydrate_node;\n\t\t}\n\n\t\tif (node === undefined) {\n\t\t\tnode = create_fragment_from_html(has_start ? content : '<!>' + content);\n\t\t\tif (!is_fragment) node = /** @type {TemplateNode} */ (get_first_child(node));\n\t\t}\n\n\t\tvar clone = /** @type {TemplateNode} */ (\n\t\t\tuse_import_node || is_firefox ? document.importNode(node, true) : node.cloneNode(true)\n\t\t);\n\n\t\tif (is_fragment) {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_first_child(clone));\n\t\t\tvar end = /** @type {TemplateNode} */ (clone.lastChild);\n\n\t\t\tassign_nodes(start, end);\n\t\t} else {\n\t\t\tassign_nodes(clone, clone);\n\t\t}\n\n\t\treturn clone;\n\t};\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n * @param {'svg' | 'math'} ns\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nfunction from_namespace(content, flags, ns = 'svg') {\n\t/**\n\t * Whether or not the first item is a text/element node. If not, we need to\n\t * create an additional comment node to act as `effect.nodes.start`\n\t */\n\tvar has_start = !content.startsWith('<!>');\n\n\tvar is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;\n\tvar wrapped = `<${ns}>${has_start ? content : '<!>' + content}</${ns}>`;\n\n\t/** @type {Element | DocumentFragment} */\n\tvar node;\n\n\treturn () => {\n\t\tif (hydrating) {\n\t\t\tassign_nodes(hydrate_node, null);\n\t\t\treturn hydrate_node;\n\t\t}\n\n\t\tif (!node) {\n\t\t\tvar fragment = /** @type {DocumentFragment} */ (create_fragment_from_html(wrapped));\n\t\t\tvar root = /** @type {Element} */ (get_first_child(fragment));\n\n\t\t\tif (is_fragment) {\n\t\t\t\tnode = document.createDocumentFragment();\n\t\t\t\twhile (get_first_child(root)) {\n\t\t\t\t\tnode.appendChild(/** @type {TemplateNode} */ (get_first_child(root)));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode = /** @type {Element} */ (get_first_child(root));\n\t\t\t}\n\t\t}\n\n\t\tvar clone = /** @type {TemplateNode} */ (node.cloneNode(true));\n\n\t\tif (is_fragment) {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_first_child(clone));\n\t\t\tvar end = /** @type {TemplateNode} */ (clone.lastChild);\n\n\t\t\tassign_nodes(start, end);\n\t\t} else {\n\t\t\tassign_nodes(clone, clone);\n\t\t}\n\n\t\treturn clone;\n\t};\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_svg(content, flags) {\n\treturn from_namespace(content, flags, 'svg');\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_mathml(content, flags) {\n\treturn from_namespace(content, flags, 'math');\n}\n\n/**\n * @param {TemplateStructure[]} structure\n * @param {typeof NAMESPACE_SVG | typeof NAMESPACE_MATHML | undefined} [ns]\n */\nfunction fragment_from_tree(structure, ns) {\n\tvar fragment = create_fragment();\n\n\tfor (var item of structure) {\n\t\tif (typeof item === 'string') {\n\t\t\tfragment.append(create_text(item));\n\t\t\tcontinue;\n\t\t}\n\n\t\t// if `preserveComments === true`, comments are represented as `['// <data>']`\n\t\tif (item === undefined || item[0][0] === '/') {\n\t\t\tfragment.append(create_comment(item ? item[0].slice(3) : ''));\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst [name, attributes, ...children] = item;\n\n\t\tconst namespace = name === 'svg' ? NAMESPACE_SVG : name === 'math' ? NAMESPACE_MATHML : ns;\n\n\t\tvar element = create_element(name, namespace, attributes?.is);\n\n\t\tfor (var key in attributes) {\n\t\t\tset_attribute(element, key, attributes[key]);\n\t\t}\n\n\t\tif (children.length > 0) {\n\t\t\tvar target =\n\t\t\t\telement.tagName === 'TEMPLATE'\n\t\t\t\t\t? /** @type {HTMLTemplateElement} */ (element).content\n\t\t\t\t\t: element;\n\n\t\t\ttarget.append(\n\t\t\t\tfragment_from_tree(children, element.tagName === 'foreignObject' ? undefined : namespace)\n\t\t\t);\n\t\t}\n\n\t\tfragment.append(element);\n\t}\n\n\treturn fragment;\n}\n\n/**\n * @param {TemplateStructure[]} structure\n * @param {number} flags\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_tree(structure, flags) {\n\tvar is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;\n\tvar use_import_node = (flags & TEMPLATE_USE_IMPORT_NODE) !== 0;\n\n\t/** @type {Node} */\n\tvar node;\n\n\treturn () => {\n\t\tif (hydrating) {\n\t\t\tassign_nodes(hydrate_node, null);\n\t\t\treturn hydrate_node;\n\t\t}\n\n\t\tif (node === undefined) {\n\t\t\tconst ns =\n\t\t\t\t(flags & TEMPLATE_USE_SVG) !== 0\n\t\t\t\t\t? NAMESPACE_SVG\n\t\t\t\t\t: (flags & TEMPLATE_USE_MATHML) !== 0\n\t\t\t\t\t\t? NAMESPACE_MATHML\n\t\t\t\t\t\t: undefined;\n\n\t\t\tnode = fragment_from_tree(structure, ns);\n\t\t\tif (!is_fragment) node = /** @type {TemplateNode} */ (get_first_child(node));\n\t\t}\n\n\t\tvar clone = /** @type {TemplateNode} */ (\n\t\t\tuse_import_node || is_firefox ? document.importNode(node, true) : node.cloneNode(true)\n\t\t);\n\n\t\tif (is_fragment) {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_first_child(clone));\n\t\t\tvar end = /** @type {TemplateNode} */ (clone.lastChild);\n\n\t\t\tassign_nodes(start, end);\n\t\t} else {\n\t\t\tassign_nodes(clone, clone);\n\t\t}\n\n\t\treturn clone;\n\t};\n}\n\n/**\n * @param {() => Element | DocumentFragment} fn\n */\nexport function with_script(fn) {\n\treturn () => run_scripts(fn());\n}\n\n/**\n * Creating a document fragment from HTML that contains script tags will not execute\n * the scripts. We need to replace the script tags with new ones so that they are executed.\n * @param {Element | DocumentFragment} node\n * @returns {Node | Node[]}\n */\nfunction run_scripts(node) {\n\t// scripts were SSR'd, in which case they will run\n\tif (hydrating) return node;\n\n\tconst is_fragment = node.nodeType === DOCUMENT_FRAGMENT_NODE;\n\tconst scripts =\n\t\t/** @type {HTMLElement} */ (node).tagName === 'SCRIPT'\n\t\t\t? [/** @type {HTMLScriptElement} */ (node)]\n\t\t\t: node.querySelectorAll('script');\n\n\tconst effect = /** @type {Effect & { nodes: EffectNodes }} */ (active_effect);\n\n\tfor (const script of scripts) {\n\t\tconst clone = document.createElement('script');\n\t\tfor (var attribute of script.attributes) {\n\t\t\tclone.setAttribute(attribute.name, attribute.value);\n\t\t}\n\n\t\tclone.textContent = script.textContent;\n\n\t\t// The script has changed - if it's at the edges, the effect now points at dead nodes\n\t\tif (is_fragment ? node.firstChild === script : node === script) {\n\t\t\teffect.nodes.start = clone;\n\t\t}\n\t\tif (is_fragment ? node.lastChild === script : node === script) {\n\t\t\teffect.nodes.end = clone;\n\t\t}\n\n\t\tscript.replaceWith(clone);\n\t}\n\treturn node;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {any} value\n */\nexport function text(value = '') {\n\tif (!hydrating) {\n\t\tvar t = create_text(value + '');\n\t\tassign_nodes(t, t);\n\t\treturn t;\n\t}\n\n\tvar node = hydrate_node;\n\n\tif (node.nodeType !== TEXT_NODE) {\n\t\t// if an {expression} is empty during SSR, we need to insert an empty text node\n\t\tnode.before((node = create_text()));\n\t\tset_hydrate_node(node);\n\t}\n\n\tassign_nodes(node, node);\n\treturn node;\n}\n\n/**\n * @returns {TemplateNode | DocumentFragment}\n */\nexport function comment() {\n\t// we're not delegating to `template` here for performance reasons\n\tif (hydrating) {\n\t\tassign_nodes(hydrate_node, null);\n\t\treturn hydrate_node;\n\t}\n\n\tvar frag = document.createDocumentFragment();\n\tvar start = document.createComment('');\n\tvar anchor = create_text();\n\tfrag.append(start, anchor);\n\n\tassign_nodes(start, anchor);\n\n\treturn frag;\n}\n\n/**\n * Assign the created (or in hydration mode, traversed) dom elements to the current block\n * and insert the elements into the dom (in client mode).\n * @param {Text | Comment | Element} anchor\n * @param {DocumentFragment | Element} dom\n */\nexport function append(anchor, dom) {\n\tif (hydrating) {\n\t\tvar effect = /** @type {Effect & { nodes: EffectNodes }} */ (active_effect);\n\n\t\t// When hydrating and outer component and an inner component is async, i.e. blocked on a promise,\n\t\t// then by the time the inner resolves we have already advanced to the end of the hydrated nodes\n\t\t// of the parent component. Check for defined for that reason to avoid rewinding the parent's end marker.\n\t\tif ((effect.f & EFFECT_RAN) === 0 || effect.nodes.end === null) {\n\t\t\teffect.nodes.end = hydrate_node;\n\t\t}\n\n\t\thydrate_next();\n\t\treturn;\n\t}\n\n\tif (anchor === null) {\n\t\t// edge case \u2014 void `<svelte:element>` with content\n\t\treturn;\n\t}\n\n\tanchor.before(/** @type {Node} */ (dom));\n}\n\n/**\n * Create (or hydrate) an unique UID for the component instance.\n */\nexport function props_id() {\n\tif (\n\t\thydrating &&\n\t\thydrate_node &&\n\t\thydrate_node.nodeType === COMMENT_NODE &&\n\t\thydrate_node.textContent?.startsWith(`$`)\n\t) {\n\t\tconst id = hydrate_node.textContent.substring(1);\n\t\thydrate_next();\n\t\treturn id;\n\t}\n\n\t// @ts-expect-error This way we ensure the id is unique even across Svelte runtimes\n\t(window.__svelte ??= {}).uid ??= 1;\n\n\t// @ts-expect-error\n\treturn `c${window.__svelte.uid++}`;\n}\n", "const regex_return_characters = /\\r/g;\n\n/**\n * @param {string} str\n * @returns {string}\n */\nexport function hash(str) {\n\tstr = str.replace(regex_return_characters, '');\n\tlet hash = 5381;\n\tlet i = str.length;\n\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn (hash >>> 0).toString(36);\n}\n\nconst VOID_ELEMENT_NAMES = [\n\t'area',\n\t'base',\n\t'br',\n\t'col',\n\t'command',\n\t'embed',\n\t'hr',\n\t'img',\n\t'input',\n\t'keygen',\n\t'link',\n\t'meta',\n\t'param',\n\t'source',\n\t'track',\n\t'wbr'\n];\n\n/**\n * Returns `true` if `name` is of a void element\n * @param {string} name\n */\nexport function is_void(name) {\n\treturn VOID_ELEMENT_NAMES.includes(name) || name.toLowerCase() === '!doctype';\n}\n\nconst RESERVED_WORDS = [\n\t'arguments',\n\t'await',\n\t'break',\n\t'case',\n\t'catch',\n\t'class',\n\t'const',\n\t'continue',\n\t'debugger',\n\t'default',\n\t'delete',\n\t'do',\n\t'else',\n\t'enum',\n\t'eval',\n\t'export',\n\t'extends',\n\t'false',\n\t'finally',\n\t'for',\n\t'function',\n\t'if',\n\t'implements',\n\t'import',\n\t'in',\n\t'instanceof',\n\t'interface',\n\t'let',\n\t'new',\n\t'null',\n\t'package',\n\t'private',\n\t'protected',\n\t'public',\n\t'return',\n\t'static',\n\t'super',\n\t'switch',\n\t'this',\n\t'throw',\n\t'true',\n\t'try',\n\t'typeof',\n\t'var',\n\t'void',\n\t'while',\n\t'with',\n\t'yield'\n];\n\n/**\n * Returns `true` if `word` is a reserved JavaScript keyword\n * @param {string} word\n */\nexport function is_reserved(word) {\n\treturn RESERVED_WORDS.includes(word);\n}\n\n/**\n * @param {string} name\n */\nexport function is_capture_event(name) {\n\treturn name.endsWith('capture') && name !== 'gotpointercapture' && name !== 'lostpointercapture';\n}\n\n/** List of Element events that will be delegated */\nconst DELEGATED_EVENTS = [\n\t'beforeinput',\n\t'click',\n\t'change',\n\t'dblclick',\n\t'contextmenu',\n\t'focusin',\n\t'focusout',\n\t'input',\n\t'keydown',\n\t'keyup',\n\t'mousedown',\n\t'mousemove',\n\t'mouseout',\n\t'mouseover',\n\t'mouseup',\n\t'pointerdown',\n\t'pointermove',\n\t'pointerout',\n\t'pointerover',\n\t'pointerup',\n\t'touchend',\n\t'touchmove',\n\t'touchstart'\n];\n\n/**\n * Returns `true` if `event_name` is a delegated event\n * @param {string} event_name\n */\nexport function can_delegate_event(event_name) {\n\treturn DELEGATED_EVENTS.includes(event_name);\n}\n\n/**\n * Attributes that are boolean, i.e. they are present or not present.\n */\nconst DOM_BOOLEAN_ATTRIBUTES = [\n\t'allowfullscreen',\n\t'async',\n\t'autofocus',\n\t'autoplay',\n\t'checked',\n\t'controls',\n\t'default',\n\t'disabled',\n\t'formnovalidate',\n\t'indeterminate',\n\t'inert',\n\t'ismap',\n\t'loop',\n\t'multiple',\n\t'muted',\n\t'nomodule',\n\t'novalidate',\n\t'open',\n\t'playsinline',\n\t'readonly',\n\t'required',\n\t'reversed',\n\t'seamless',\n\t'selected',\n\t'webkitdirectory',\n\t'defer',\n\t'disablepictureinpicture',\n\t'disableremoteplayback'\n];\n\n/**\n * Returns `true` if `name` is a boolean attribute\n * @param {string} name\n */\nexport function is_boolean_attribute(name) {\n\treturn DOM_BOOLEAN_ATTRIBUTES.includes(name);\n}\n\n/**\n * @type {Record<string, string>}\n * List of attribute names that should be aliased to their property names\n * because they behave differently between setting them as an attribute and\n * setting them as a property.\n */\nconst ATTRIBUTE_ALIASES = {\n\t// no `class: 'className'` because we handle that separately\n\tformnovalidate: 'formNoValidate',\n\tismap: 'isMap',\n\tnomodule: 'noModule',\n\tplaysinline: 'playsInline',\n\treadonly: 'readOnly',\n\tdefaultvalue: 'defaultValue',\n\tdefaultchecked: 'defaultChecked',\n\tsrcobject: 'srcObject',\n\tnovalidate: 'noValidate',\n\tallowfullscreen: 'allowFullscreen',\n\tdisablepictureinpicture: 'disablePictureInPicture',\n\tdisableremoteplayback: 'disableRemotePlayback'\n};\n\n/**\n * @param {string} name\n */\nexport function normalize_attribute(name) {\n\tname = name.toLowerCase();\n\treturn ATTRIBUTE_ALIASES[name] ?? name;\n}\n\nconst DOM_PROPERTIES = [\n\t...DOM_BOOLEAN_ATTRIBUTES,\n\t'formNoValidate',\n\t'isMap',\n\t'noModule',\n\t'playsInline',\n\t'readOnly',\n\t'value',\n\t'volume',\n\t'defaultValue',\n\t'defaultChecked',\n\t'srcObject',\n\t'noValidate',\n\t'allowFullscreen',\n\t'disablePictureInPicture',\n\t'disableRemotePlayback'\n];\n\n/**\n * @param {string} name\n */\nexport function is_dom_property(name) {\n\treturn DOM_PROPERTIES.includes(name);\n}\n\nconst NON_STATIC_PROPERTIES = ['autofocus', 'muted', 'defaultValue', 'defaultChecked'];\n\n/**\n * Returns `true` if the given attribute cannot be set through the template\n * string, i.e. needs some kind of JavaScript handling to work.\n * @param {string} name\n */\nexport function cannot_be_set_statically(name) {\n\treturn NON_STATIC_PROPERTIES.includes(name);\n}\n\n/**\n * Subset of delegated events which should be passive by default.\n * These two are already passive via browser defaults on window, document and body.\n * But since\n * - we're delegating them\n * - they happen often\n * - they apply to mobile which is generally less performant\n * we're marking them as passive by default for other elements, too.\n */\nconst PASSIVE_EVENTS = ['touchstart', 'touchmove'];\n\n/**\n * Returns `true` if `name` is a passive event\n * @param {string} name\n */\nexport function is_passive_event(name) {\n\treturn PASSIVE_EVENTS.includes(name);\n}\n\nconst CONTENT_EDITABLE_BINDINGS = ['textContent', 'innerHTML', 'innerText'];\n\n/** @param {string} name */\nexport function is_content_editable_binding(name) {\n\treturn CONTENT_EDITABLE_BINDINGS.includes(name);\n}\n\nconst LOAD_ERROR_ELEMENTS = [\n\t'body',\n\t'embed',\n\t'iframe',\n\t'img',\n\t'link',\n\t'object',\n\t'script',\n\t'style',\n\t'track'\n];\n\n/**\n * Returns `true` if the element emits `load` and `error` events\n * @param {string} name\n */\nexport function is_load_error_element(name) {\n\treturn LOAD_ERROR_ELEMENTS.includes(name);\n}\n\nconst SVG_ELEMENTS = [\n\t'altGlyph',\n\t'altGlyphDef',\n\t'altGlyphItem',\n\t'animate',\n\t'animateColor',\n\t'animateMotion',\n\t'animateTransform',\n\t'circle',\n\t'clipPath',\n\t'color-profile',\n\t'cursor',\n\t'defs',\n\t'desc',\n\t'discard',\n\t'ellipse',\n\t'feBlend',\n\t'feColorMatrix',\n\t'feComponentTransfer',\n\t'feComposite',\n\t'feConvolveMatrix',\n\t'feDiffuseLighting',\n\t'feDisplacementMap',\n\t'feDistantLight',\n\t'feDropShadow',\n\t'feFlood',\n\t'feFuncA',\n\t'feFuncB',\n\t'feFuncG',\n\t'feFuncR',\n\t'feGaussianBlur',\n\t'feImage',\n\t'feMerge',\n\t'feMergeNode',\n\t'feMorphology',\n\t'feOffset',\n\t'fePointLight',\n\t'feSpecularLighting',\n\t'feSpotLight',\n\t'feTile',\n\t'feTurbulence',\n\t'filter',\n\t'font',\n\t'font-face',\n\t'font-face-format',\n\t'font-face-name',\n\t'font-face-src',\n\t'font-face-uri',\n\t'foreignObject',\n\t'g',\n\t'glyph',\n\t'glyphRef',\n\t'hatch',\n\t'hatchpath',\n\t'hkern',\n\t'image',\n\t'line',\n\t'linearGradient',\n\t'marker',\n\t'mask',\n\t'mesh',\n\t'meshgradient',\n\t'meshpatch',\n\t'meshrow',\n\t'metadata',\n\t'missing-glyph',\n\t'mpath',\n\t'path',\n\t'pattern',\n\t'polygon',\n\t'polyline',\n\t'radialGradient',\n\t'rect',\n\t'set',\n\t'solidcolor',\n\t'stop',\n\t'svg',\n\t'switch',\n\t'symbol',\n\t'text',\n\t'textPath',\n\t'tref',\n\t'tspan',\n\t'unknown',\n\t'use',\n\t'view',\n\t'vkern'\n];\n\n/** @param {string} name */\nexport function is_svg(name) {\n\treturn SVG_ELEMENTS.includes(name);\n}\n\nconst MATHML_ELEMENTS = [\n\t'annotation',\n\t'annotation-xml',\n\t'maction',\n\t'math',\n\t'merror',\n\t'mfrac',\n\t'mi',\n\t'mmultiscripts',\n\t'mn',\n\t'mo',\n\t'mover',\n\t'mpadded',\n\t'mphantom',\n\t'mprescripts',\n\t'mroot',\n\t'mrow',\n\t'ms',\n\t'mspace',\n\t'msqrt',\n\t'mstyle',\n\t'msub',\n\t'msubsup',\n\t'msup',\n\t'mtable',\n\t'mtd',\n\t'mtext',\n\t'mtr',\n\t'munder',\n\t'munderover',\n\t'semantics'\n];\n\n/** @param {string} name */\nexport function is_mathml(name) {\n\treturn MATHML_ELEMENTS.includes(name);\n}\n\nconst STATE_CREATION_RUNES = /** @type {const} */ ([\n\t'$state',\n\t'$state.raw',\n\t'$derived',\n\t'$derived.by'\n]);\n\nconst RUNES = /** @type {const} */ ([\n\t...STATE_CREATION_RUNES,\n\t'$state.eager',\n\t'$state.snapshot',\n\t'$props',\n\t'$props.id',\n\t'$bindable',\n\t'$effect',\n\t'$effect.pre',\n\t'$effect.tracking',\n\t'$effect.root',\n\t'$effect.pending',\n\t'$inspect',\n\t'$inspect().with',\n\t'$inspect.trace',\n\t'$host'\n]);\n\n/** @typedef {typeof RUNES[number]} RuneName */\n\n/**\n * @param {string} name\n * @returns {name is RuneName}\n */\nexport function is_rune(name) {\n\treturn RUNES.includes(/** @type {RuneName} */ (name));\n}\n\n/** @typedef {typeof STATE_CREATION_RUNES[number]} StateCreationRuneName */\n\n/**\n * @param {string} name\n * @returns {name is StateCreationRuneName}\n */\nexport function is_state_creation_rune(name) {\n\treturn STATE_CREATION_RUNES.includes(/** @type {StateCreationRuneName} */ (name));\n}\n\n/** List of elements that require raw contents and should not have SSR comments put in them */\nconst RAW_TEXT_ELEMENTS = /** @type {const} */ (['textarea', 'script', 'style', 'title']);\n\n/** @param {string} name */\nexport function is_raw_text_element(name) {\n\treturn RAW_TEXT_ELEMENTS.includes(/** @type {typeof RAW_TEXT_ELEMENTS[number]} */ (name));\n}\n\n/**\n * Prevent devtools trying to make `location` a clickable link by inserting a zero-width space\n * @template {string | undefined} T\n * @param {T} location\n * @returns {T};\n */\nexport function sanitize_location(location) {\n\treturn /** @type {T} */ (location?.replace(/\\//g, '/\\u200b'));\n}\n", "/** @import { ComponentContext, Effect, EffectNodes, TemplateNode } from '#client' */\n/** @import { Component, ComponentType, SvelteComponent, MountOptions } from '../../index.js' */\nimport { DEV } from 'esm-env';\nimport {\n\tclear_text_content,\n\tcreate_text,\n\tget_first_child,\n\tget_next_sibling,\n\tinit_operations\n} from './dom/operations.js';\nimport { HYDRATION_END, HYDRATION_ERROR, HYDRATION_START } from '../../constants.js';\nimport { active_effect } from './runtime.js';\nimport { push, pop, component_context } from './context.js';\nimport { component_root } from './reactivity/effects.js';\nimport { hydrate_node, hydrating, set_hydrate_node, set_hydrating } from './dom/hydration.js';\nimport { array_from } from '../shared/utils.js';\nimport {\n\tall_registered_events,\n\thandle_event_propagation,\n\troot_event_handles\n} from './dom/elements/events.js';\nimport * as w from './warnings.js';\nimport * as e from './errors.js';\nimport { assign_nodes } from './dom/template.js';\nimport { is_passive_event } from '../../utils.js';\nimport { COMMENT_NODE, STATE_SYMBOL } from './constants.js';\nimport { boundary } from './dom/blocks/boundary.js';\n\n/**\n * This is normally true \u2014 block effects should run their intro transitions \u2014\n * but is false during hydration (unless `options.intro` is `true`) and\n * when creating the children of a `<svelte:element>` that just changed tag\n */\nexport let should_intro = true;\n\n/** @param {boolean} value */\nexport function set_should_intro(value) {\n\tshould_intro = value;\n}\n\n/**\n * @param {Element} text\n * @param {string} value\n * @returns {void}\n */\nexport function set_text(text, value) {\n\t// For objects, we apply string coercion (which might make things like $state array references in the template reactive) before diffing\n\tvar str = value == null ? '' : typeof value === 'object' ? value + '' : value;\n\t// @ts-expect-error\n\tif (str !== (text.__t ??= text.nodeValue)) {\n\t\t// @ts-expect-error\n\t\ttext.__t = str;\n\t\ttext.nodeValue = str + '';\n\t}\n}\n\n/**\n * Mounts a component to the given target and returns the exports and potentially the props (if compiled with `accessors: true`) of the component.\n * Transitions will play during the initial render unless the `intro` option is set to `false`.\n *\n * @template {Record<string, any>} Props\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<Props>> | Component<Props, Exports, any>} component\n * @param {MountOptions<Props>} options\n * @returns {Exports}\n */\nexport function mount(component, options) {\n\treturn _mount(component, options);\n}\n\n/**\n * Hydrates a component on the given target and returns the exports and potentially the props (if compiled with `accessors: true`) of the component\n *\n * @template {Record<string, any>} Props\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<Props>> | Component<Props, Exports, any>} component\n * @param {{} extends Props ? {\n * \t\ttarget: Document | Element | ShadowRoot;\n * \t\tprops?: Props;\n * \t\tevents?: Record<string, (e: any) => any>;\n *  \tcontext?: Map<any, any>;\n * \t\tintro?: boolean;\n * \t\trecover?: boolean;\n * \t} : {\n * \t\ttarget: Document | Element | ShadowRoot;\n * \t\tprops: Props;\n * \t\tevents?: Record<string, (e: any) => any>;\n *  \tcontext?: Map<any, any>;\n * \t\tintro?: boolean;\n * \t\trecover?: boolean;\n * \t}} options\n * @returns {Exports}\n */\nexport function hydrate(component, options) {\n\tinit_operations();\n\toptions.intro = options.intro ?? false;\n\tconst target = options.target;\n\tconst was_hydrating = hydrating;\n\tconst previous_hydrate_node = hydrate_node;\n\n\ttry {\n\t\tvar anchor = get_first_child(target);\n\n\t\twhile (\n\t\t\tanchor &&\n\t\t\t(anchor.nodeType !== COMMENT_NODE || /** @type {Comment} */ (anchor).data !== HYDRATION_START)\n\t\t) {\n\t\t\tanchor = get_next_sibling(anchor);\n\t\t}\n\n\t\tif (!anchor) {\n\t\t\tthrow HYDRATION_ERROR;\n\t\t}\n\n\t\tset_hydrating(true);\n\t\tset_hydrate_node(/** @type {Comment} */ (anchor));\n\n\t\tconst instance = _mount(component, { ...options, anchor });\n\n\t\tset_hydrating(false);\n\n\t\treturn /**  @type {Exports} */ (instance);\n\t} catch (error) {\n\t\t// re-throw Svelte errors - they are certainly not related to hydration\n\t\tif (\n\t\t\terror instanceof Error &&\n\t\t\terror.message.split('\\n').some((line) => line.startsWith('https://svelte.dev/e/'))\n\t\t) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error !== HYDRATION_ERROR) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn('Failed to hydrate: ', error);\n\t\t}\n\n\t\tif (options.recover === false) {\n\t\t\te.hydration_failed();\n\t\t}\n\n\t\t// If an error occurred above, the operations might not yet have been initialised.\n\t\tinit_operations();\n\t\tclear_text_content(target);\n\n\t\tset_hydrating(false);\n\t\treturn mount(component, options);\n\t} finally {\n\t\tset_hydrating(was_hydrating);\n\t\tset_hydrate_node(previous_hydrate_node);\n\t}\n}\n\n/** @type {Map<string, number>} */\nconst document_listeners = new Map();\n\n/**\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<any>> | Component<any>} Component\n * @param {MountOptions} options\n * @returns {Exports}\n */\nfunction _mount(Component, { target, anchor, props = {}, events, context, intro = true }) {\n\tinit_operations();\n\n\t/** @type {Set<string>} */\n\tvar registered_events = new Set();\n\n\t/** @param {Array<string>} events */\n\tvar event_handle = (events) => {\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\tvar event_name = events[i];\n\n\t\t\tif (registered_events.has(event_name)) continue;\n\t\t\tregistered_events.add(event_name);\n\n\t\t\tvar passive = is_passive_event(event_name);\n\n\t\t\t// Add the event listener to both the container and the document.\n\t\t\t// The container listener ensures we catch events from within in case\n\t\t\t// the outer content stops propagation of the event.\n\t\t\ttarget.addEventListener(event_name, handle_event_propagation, { passive });\n\n\t\t\tvar n = document_listeners.get(event_name);\n\n\t\t\tif (n === undefined) {\n\t\t\t\t// The document listener ensures we catch events that originate from elements that were\n\t\t\t\t// manually moved outside of the container (e.g. via manual portals).\n\t\t\t\tdocument.addEventListener(event_name, handle_event_propagation, { passive });\n\t\t\t\tdocument_listeners.set(event_name, 1);\n\t\t\t} else {\n\t\t\t\tdocument_listeners.set(event_name, n + 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tevent_handle(array_from(all_registered_events));\n\troot_event_handles.add(event_handle);\n\n\t/** @type {Exports} */\n\t// @ts-expect-error will be defined because the render effect runs synchronously\n\tvar component = undefined;\n\n\tvar unmount = component_root(() => {\n\t\tvar anchor_node = anchor ?? target.appendChild(create_text());\n\n\t\tboundary(\n\t\t\t/** @type {TemplateNode} */ (anchor_node),\n\t\t\t{\n\t\t\t\tpending: () => {}\n\t\t\t},\n\t\t\t(anchor_node) => {\n\t\t\t\tif (context) {\n\t\t\t\t\tpush({});\n\t\t\t\t\tvar ctx = /** @type {ComponentContext} */ (component_context);\n\t\t\t\t\tctx.c = context;\n\t\t\t\t}\n\n\t\t\t\tif (events) {\n\t\t\t\t\t// We can't spread the object or else we'd lose the state proxy stuff, if it is one\n\t\t\t\t\t/** @type {any} */ (props).$$events = events;\n\t\t\t\t}\n\n\t\t\t\tif (hydrating) {\n\t\t\t\t\tassign_nodes(/** @type {TemplateNode} */ (anchor_node), null);\n\t\t\t\t}\n\n\t\t\t\tshould_intro = intro;\n\t\t\t\t// @ts-expect-error the public typings are not what the actual function looks like\n\t\t\t\tcomponent = Component(anchor_node, props) || {};\n\t\t\t\tshould_intro = true;\n\n\t\t\t\tif (hydrating) {\n\t\t\t\t\t/** @type {Effect & { nodes: EffectNodes }} */ (active_effect).nodes.end = hydrate_node;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\thydrate_node === null ||\n\t\t\t\t\t\thydrate_node.nodeType !== COMMENT_NODE ||\n\t\t\t\t\t\t/** @type {Comment} */ (hydrate_node).data !== HYDRATION_END\n\t\t\t\t\t) {\n\t\t\t\t\t\tw.hydration_mismatch();\n\t\t\t\t\t\tthrow HYDRATION_ERROR;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (context) {\n\t\t\t\t\tpop();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\treturn () => {\n\t\t\tfor (var event_name of registered_events) {\n\t\t\t\ttarget.removeEventListener(event_name, handle_event_propagation);\n\n\t\t\t\tvar n = /** @type {number} */ (document_listeners.get(event_name));\n\n\t\t\t\tif (--n === 0) {\n\t\t\t\t\tdocument.removeEventListener(event_name, handle_event_propagation);\n\t\t\t\t\tdocument_listeners.delete(event_name);\n\t\t\t\t} else {\n\t\t\t\t\tdocument_listeners.set(event_name, n);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\troot_event_handles.delete(event_handle);\n\n\t\t\tif (anchor_node !== anchor) {\n\t\t\t\tanchor_node.parentNode?.removeChild(anchor_node);\n\t\t\t}\n\t\t};\n\t});\n\n\tmounted_components.set(component, unmount);\n\treturn component;\n}\n\n/**\n * References of the components that were mounted or hydrated.\n * Uses a `WeakMap` to avoid memory leaks.\n */\nlet mounted_components = new WeakMap();\n\n/**\n * Unmounts a component that was previously mounted using `mount` or `hydrate`.\n *\n * Since 5.13.0, if `options.outro` is `true`, [transitions](https://svelte.dev/docs/svelte/transition) will play before the component is removed from the DOM.\n *\n * Returns a `Promise` that resolves after transitions have completed if `options.outro` is true, or immediately otherwise (prior to 5.13.0, returns `void`).\n *\n * ```js\n * import { mount, unmount } from 'svelte';\n * import App from './App.svelte';\n *\n * const app = mount(App, { target: document.body });\n *\n * // later...\n * unmount(app, { outro: true });\n * ```\n * @param {Record<string, any>} component\n * @param {{ outro?: boolean }} [options]\n * @returns {Promise<void>}\n */\nexport function unmount(component, options) {\n\tconst fn = mounted_components.get(component);\n\n\tif (fn) {\n\t\tmounted_components.delete(component);\n\t\treturn fn(options);\n\t}\n\n\tif (DEV) {\n\t\tif (STATE_SYMBOL in component) {\n\t\t\tw.state_proxy_unmount();\n\t\t} else {\n\t\t\tw.lifecycle_double_unmount();\n\t\t}\n\t}\n\n\treturn Promise.resolve();\n}\n", "import { is_void } from '../../utils.js';\nimport * as w from './warnings.js';\nimport * as e from './errors.js';\n\nexport { invalid_default_snippet } from './errors.js';\n\n/**\n * @param {() => string} tag_fn\n * @returns {void}\n */\nexport function validate_void_dynamic_element(tag_fn) {\n\tconst tag = tag_fn();\n\tif (tag && is_void(tag)) {\n\t\tw.dynamic_void_element_content(tag);\n\t}\n}\n\n/** @param {() => unknown} tag_fn */\nexport function validate_dynamic_element_tag(tag_fn) {\n\tconst tag = tag_fn();\n\tconst is_string = typeof tag === 'string';\n\tif (tag && !is_string) {\n\t\te.svelte_element_invalid_this_value();\n\t}\n}\n\n/**\n * @param {any} store\n * @param {string} name\n */\nexport function validate_store(store, name) {\n\tif (store != null && typeof store.subscribe !== 'function') {\n\t\te.store_invalid_shape(name);\n\t}\n}\n\n/**\n * @template {(...args: any[]) => unknown} T\n * @param {T} fn\n */\nexport function prevent_snippet_stringification(fn) {\n\tfn.toString = () => {\n\t\te.snippet_without_render_tag();\n\t\treturn '';\n\t};\n\treturn fn;\n}\n", "/** @import { Effect, TemplateNode } from '#client' */\nimport { Batch, current_batch } from '../../reactivity/batch.js';\nimport {\n\tbranch,\n\tdestroy_effect,\n\tmove_effect,\n\tpause_effect,\n\tresume_effect\n} from '../../reactivity/effects.js';\nimport { hydrate_node, hydrating } from '../hydration.js';\nimport { create_text, should_defer_append } from '../operations.js';\n\n/**\n * @typedef {{ effect: Effect, fragment: DocumentFragment }} Branch\n */\n\n/**\n * @template Key\n */\nexport class BranchManager {\n\t/** @type {TemplateNode} */\n\tanchor;\n\n\t/** @type {Map<Batch, Key>} */\n\t#batches = new Map();\n\n\t/**\n\t * Map of keys to effects that are currently rendered in the DOM.\n\t * These effects are visible and actively part of the document tree.\n\t * Example:\n\t * ```\n\t * {#if condition}\n\t * \tfoo\n\t * {:else}\n\t * \tbar\n\t * {/if}\n\t * ```\n\t * Can result in the entries `true->Effect` and `false->Effect`\n\t * @type {Map<Key, Effect>}\n\t */\n\t#onscreen = new Map();\n\n\t/**\n\t * Similar to #onscreen with respect to the keys, but contains branches that are not yet\n\t * in the DOM, because their insertion is deferred.\n\t * @type {Map<Key, Branch>}\n\t */\n\t#offscreen = new Map();\n\n\t/**\n\t * Keys of effects that are currently outroing\n\t * @type {Set<Key>}\n\t */\n\t#outroing = new Set();\n\n\t/**\n\t * Whether to pause (i.e. outro) on change, or destroy immediately.\n\t * This is necessary for `<svelte:element>`\n\t */\n\t#transition = true;\n\n\t/**\n\t * @param {TemplateNode} anchor\n\t * @param {boolean} transition\n\t */\n\tconstructor(anchor, transition = true) {\n\t\tthis.anchor = anchor;\n\t\tthis.#transition = transition;\n\t}\n\n\t#commit = () => {\n\t\tvar batch = /** @type {Batch} */ (current_batch);\n\n\t\t// if this batch was made obsolete, bail\n\t\tif (!this.#batches.has(batch)) return;\n\n\t\tvar key = /** @type {Key} */ (this.#batches.get(batch));\n\n\t\tvar onscreen = this.#onscreen.get(key);\n\n\t\tif (onscreen) {\n\t\t\t// effect is already in the DOM \u2014 abort any current outro\n\t\t\tresume_effect(onscreen);\n\t\t\tthis.#outroing.delete(key);\n\t\t} else {\n\t\t\t// effect is currently offscreen. put it in the DOM\n\t\t\tvar offscreen = this.#offscreen.get(key);\n\n\t\t\tif (offscreen) {\n\t\t\t\tthis.#onscreen.set(key, offscreen.effect);\n\t\t\t\tthis.#offscreen.delete(key);\n\n\t\t\t\t// remove the anchor...\n\t\t\t\t/** @type {TemplateNode} */ (offscreen.fragment.lastChild).remove();\n\n\t\t\t\t// ...and append the fragment\n\t\t\t\tthis.anchor.before(offscreen.fragment);\n\t\t\t\tonscreen = offscreen.effect;\n\t\t\t}\n\t\t}\n\n\t\tfor (const [b, k] of this.#batches) {\n\t\t\tthis.#batches.delete(b);\n\n\t\t\tif (b === batch) {\n\t\t\t\t// keep values for newer batches\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst offscreen = this.#offscreen.get(k);\n\n\t\t\tif (offscreen) {\n\t\t\t\t// for older batches, destroy offscreen effects\n\t\t\t\t// as they will never be committed\n\t\t\t\tdestroy_effect(offscreen.effect);\n\t\t\t\tthis.#offscreen.delete(k);\n\t\t\t}\n\t\t}\n\n\t\t// outro/destroy all onscreen effects...\n\t\tfor (const [k, effect] of this.#onscreen) {\n\t\t\t// ...except the one that was just committed\n\t\t\t//    or those that are already outroing (else the transition is aborted and the effect destroyed right away)\n\t\t\tif (k === key || this.#outroing.has(k)) continue;\n\n\t\t\tconst on_destroy = () => {\n\t\t\t\tconst keys = Array.from(this.#batches.values());\n\n\t\t\t\tif (keys.includes(k)) {\n\t\t\t\t\t// keep the effect offscreen, as another batch will need it\n\t\t\t\t\tvar fragment = document.createDocumentFragment();\n\t\t\t\t\tmove_effect(effect, fragment);\n\n\t\t\t\t\tfragment.append(create_text()); // TODO can we avoid this?\n\n\t\t\t\t\tthis.#offscreen.set(k, { effect, fragment });\n\t\t\t\t} else {\n\t\t\t\t\tdestroy_effect(effect);\n\t\t\t\t}\n\n\t\t\t\tthis.#outroing.delete(k);\n\t\t\t\tthis.#onscreen.delete(k);\n\t\t\t};\n\n\t\t\tif (this.#transition || !onscreen) {\n\t\t\t\tthis.#outroing.add(k);\n\t\t\t\tpause_effect(effect, on_destroy, false);\n\t\t\t} else {\n\t\t\t\ton_destroy();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @param {Batch} batch\n\t */\n\t#discard = (batch) => {\n\t\tthis.#batches.delete(batch);\n\n\t\tconst keys = Array.from(this.#batches.values());\n\n\t\tfor (const [k, branch] of this.#offscreen) {\n\t\t\tif (!keys.includes(k)) {\n\t\t\t\tdestroy_effect(branch.effect);\n\t\t\t\tthis.#offscreen.delete(k);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t *\n\t * @param {any} key\n\t * @param {null | ((target: TemplateNode) => void)} fn\n\t */\n\tensure(key, fn) {\n\t\tvar batch = /** @type {Batch} */ (current_batch);\n\t\tvar defer = should_defer_append();\n\n\t\tif (fn && !this.#onscreen.has(key) && !this.#offscreen.has(key)) {\n\t\t\tif (defer) {\n\t\t\t\tvar fragment = document.createDocumentFragment();\n\t\t\t\tvar target = create_text();\n\n\t\t\t\tfragment.append(target);\n\n\t\t\t\tthis.#offscreen.set(key, {\n\t\t\t\t\teffect: branch(() => fn(target)),\n\t\t\t\t\tfragment\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.#onscreen.set(\n\t\t\t\t\tkey,\n\t\t\t\t\tbranch(() => fn(this.anchor))\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.#batches.set(batch, key);\n\n\t\tif (defer) {\n\t\t\tfor (const [k, effect] of this.#onscreen) {\n\t\t\t\tif (k === key) {\n\t\t\t\t\tbatch.skipped_effects.delete(effect);\n\t\t\t\t} else {\n\t\t\t\t\tbatch.skipped_effects.add(effect);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const [k, branch] of this.#offscreen) {\n\t\t\t\tif (k === key) {\n\t\t\t\t\tbatch.skipped_effects.delete(branch.effect);\n\t\t\t\t} else {\n\t\t\t\t\tbatch.skipped_effects.add(branch.effect);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tbatch.oncommit(this.#commit);\n\t\t\tbatch.ondiscard(this.#discard);\n\t\t} else {\n\t\t\tif (hydrating) {\n\t\t\t\tthis.anchor = hydrate_node;\n\t\t\t}\n\n\t\t\tthis.#commit();\n\t\t}\n\t}\n}\n", "/** @import { Snippet } from 'svelte' */\n/** @import { TemplateNode } from '#client' */\n/** @import { Getters } from '#shared' */\nimport { EFFECT_TRANSPARENT, ELEMENT_NODE } from '#client/constants';\nimport { block, teardown } from '../../reactivity/effects.js';\nimport {\n\tdev_current_component_function,\n\tset_dev_current_component_function\n} from '../../context.js';\nimport { hydrate_next, hydrate_node, hydrating } from '../hydration.js';\nimport { create_fragment_from_html } from '../reconciler.js';\nimport { assign_nodes } from '../template.js';\nimport * as w from '../../warnings.js';\nimport * as e from '../../errors.js';\nimport { DEV } from 'esm-env';\nimport { get_first_child, get_next_sibling } from '../operations.js';\nimport { prevent_snippet_stringification } from '../../../shared/validate.js';\nimport { BranchManager } from './branches.js';\n\n/**\n * @template {(node: TemplateNode, ...args: any[]) => void} SnippetFn\n * @param {TemplateNode} node\n * @param {() => SnippetFn | null | undefined} get_snippet\n * @param {(() => any)[]} args\n * @returns {void}\n */\nexport function snippet(node, get_snippet, ...args) {\n\tvar branches = new BranchManager(node);\n\n\tblock(() => {\n\t\tconst snippet = get_snippet() ?? null;\n\n\t\tif (DEV && snippet == null) {\n\t\t\te.invalid_snippet();\n\t\t}\n\n\t\tbranches.ensure(snippet, snippet && ((anchor) => snippet(anchor, ...args)));\n\t}, EFFECT_TRANSPARENT);\n}\n\n/**\n * In development, wrap the snippet function so that it passes validation, and so that the\n * correct component context is set for ownership checks\n * @param {any} component\n * @param {(node: TemplateNode, ...args: any[]) => void} fn\n */\nexport function wrap_snippet(component, fn) {\n\tconst snippet = (/** @type {TemplateNode} */ node, /** @type {any[]} */ ...args) => {\n\t\tvar previous_component_function = dev_current_component_function;\n\t\tset_dev_current_component_function(component);\n\n\t\ttry {\n\t\t\treturn fn(node, ...args);\n\t\t} finally {\n\t\t\tset_dev_current_component_function(previous_component_function);\n\t\t}\n\t};\n\n\tprevent_snippet_stringification(snippet);\n\n\treturn snippet;\n}\n\n/**\n * Create a snippet programmatically\n * @template {unknown[]} Params\n * @param {(...params: Getters<Params>) => {\n *   render: () => string\n *   setup?: (element: Element) => void | (() => void)\n * }} fn\n * @returns {Snippet<Params>}\n */\nexport function createRawSnippet(fn) {\n\t// @ts-expect-error the types are a lie\n\treturn (/** @type {TemplateNode} */ anchor, /** @type {Getters<Params>} */ ...params) => {\n\t\tvar snippet = fn(...params);\n\n\t\t/** @type {Element} */\n\t\tvar element;\n\n\t\tif (hydrating) {\n\t\t\telement = /** @type {Element} */ (hydrate_node);\n\t\t\thydrate_next();\n\t\t} else {\n\t\t\tvar html = snippet.render().trim();\n\t\t\tvar fragment = create_fragment_from_html(html);\n\t\t\telement = /** @type {Element} */ (get_first_child(fragment));\n\n\t\t\tif (DEV && (get_next_sibling(element) !== null || element.nodeType !== ELEMENT_NODE)) {\n\t\t\t\tw.invalid_raw_snippet_render();\n\t\t\t}\n\n\t\t\tanchor.before(element);\n\t\t}\n\n\t\tconst result = snippet.setup?.(element);\n\t\tassign_nodes(element, element);\n\n\t\tif (typeof result === 'function') {\n\t\t\tteardown(result);\n\t\t}\n\t};\n}\n", "/** @import { ComponentContext, ComponentContextLegacy } from '#client' */\n/** @import { EventDispatcher } from './index.js' */\n/** @import { NotFunction } from './internal/types.js' */\nimport { active_reaction, untrack } from './internal/client/runtime.js';\nimport { is_array } from './internal/shared/utils.js';\nimport { user_effect } from './internal/client/index.js';\nimport * as e from './internal/client/errors.js';\nimport { legacy_mode_flag } from './internal/flags/index.js';\nimport { component_context } from './internal/client/context.js';\nimport { DEV } from 'esm-env';\n\nif (DEV) {\n\t/**\n\t * @param {string} rune\n\t */\n\tfunction throw_rune_error(rune) {\n\t\tif (!(rune in globalThis)) {\n\t\t\t// TODO if people start adjusting the \"this can contain runes\" config through v-p-s more, adjust this message\n\t\t\t/** @type {any} */\n\t\t\tlet value; // let's hope noone modifies this global, but belts and braces\n\t\t\tObject.defineProperty(globalThis, rune, {\n\t\t\t\tconfigurable: true,\n\t\t\t\t// eslint-disable-next-line getter-return\n\t\t\t\tget: () => {\n\t\t\t\t\tif (value !== undefined) {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\n\t\t\t\t\te.rune_outside_svelte(rune);\n\t\t\t\t},\n\t\t\t\tset: (v) => {\n\t\t\t\t\tvalue = v;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tthrow_rune_error('$state');\n\tthrow_rune_error('$effect');\n\tthrow_rune_error('$derived');\n\tthrow_rune_error('$inspect');\n\tthrow_rune_error('$props');\n\tthrow_rune_error('$bindable');\n}\n\n/**\n * Returns an [`AbortSignal`](https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal) that aborts when the current [derived](https://svelte.dev/docs/svelte/$derived) or [effect](https://svelte.dev/docs/svelte/$effect) re-runs or is destroyed.\n *\n * Must be called while a derived or effect is running.\n *\n * ```svelte\n * <script>\n * \timport { getAbortSignal } from 'svelte';\n *\n * \tlet { id } = $props();\n *\n * \tasync function getData(id) {\n * \t\tconst response = await fetch(`/items/${id}`, {\n * \t\t\tsignal: getAbortSignal()\n * \t\t});\n *\n * \t\treturn await response.json();\n * \t}\n *\n * \tconst data = $derived(await getData(id));\n * </script>\n * ```\n */\nexport function getAbortSignal() {\n\tif (active_reaction === null) {\n\t\te.get_abort_signal_outside_reaction();\n\t}\n\n\treturn (active_reaction.ac ??= new AbortController()).signal;\n}\n\n/**\n * `onMount`, like [`$effect`](https://svelte.dev/docs/svelte/$effect), schedules a function to run as soon as the component has been mounted to the DOM.\n * Unlike `$effect`, the provided function only runs once.\n *\n * It must be called during the component's initialisation (but doesn't need to live _inside_ the component;\n * it can be called from an external module). If a function is returned _synchronously_ from `onMount`,\n * it will be called when the component is unmounted.\n *\n * `onMount` functions do not run during [server-side rendering](https://svelte.dev/docs/svelte/svelte-server#render).\n *\n * @template T\n * @param {() => NotFunction<T> | Promise<NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component('onMount');\n\t}\n\n\tif (legacy_mode_flag && component_context.l !== null) {\n\t\tinit_update_callbacks(component_context).m.push(fn);\n\t} else {\n\t\tuser_effect(() => {\n\t\t\tconst cleanup = untrack(fn);\n\t\t\tif (typeof cleanup === 'function') return /** @type {() => void} */ (cleanup);\n\t\t});\n\t}\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component('onDestroy');\n\t}\n\n\tonMount(() => () => untrack(fn));\n}\n\n/**\n * @template [T=any]\n * @param {string} type\n * @param {T} [detail]\n * @param {any}params_0\n * @returns {CustomEvent<T>}\n */\nfunction create_custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](https://svelte.dev/docs/svelte/legacy-on#Component-events).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: null; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * @deprecated Use callback props and/or the `$host()` rune instead \u2014 see [migration guide](https://svelte.dev/docs/svelte/v5-migration-guide#Event-changes-Component-events)\n * @template {Record<string, any>} [EventMap = any]\n * @returns {EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst active_component_context = component_context;\n\tif (active_component_context === null) {\n\t\te.lifecycle_outside_component('createEventDispatcher');\n\t}\n\n\t/**\n\t * @param [detail]\n\t * @param [options]\n\t */\n\treturn (type, detail, options) => {\n\t\tconst events = /** @type {Record<string, Function | Function[]>} */ (\n\t\t\tactive_component_context.s.$$events\n\t\t)?.[/** @type {string} */ (type)];\n\n\t\tif (events) {\n\t\t\tconst callbacks = is_array(events) ? events.slice() : [events];\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = create_custom_event(/** @type {string} */ (type), detail, options);\n\t\t\tfor (const fn of callbacks) {\n\t\t\t\tfn.call(active_component_context.x, event);\n\t\t\t}\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\n\t\treturn true;\n\t};\n}\n\n// TODO mark beforeUpdate and afterUpdate as deprecated in Svelte 6\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`.\n *\n * In runes mode use `$effect.pre` instead.\n *\n * @deprecated Use [`$effect.pre`](https://svelte.dev/docs/svelte/$effect#$effect.pre) instead\n * @param {() => void} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component('beforeUpdate');\n\t}\n\n\tif (component_context.l === null) {\n\t\te.lifecycle_legacy_only('beforeUpdate');\n\t}\n\n\tinit_update_callbacks(component_context).b.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`.\n *\n * In runes mode use `$effect` instead.\n *\n * @deprecated Use [`$effect`](https://svelte.dev/docs/svelte/$effect) instead\n * @param {() => void} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component('afterUpdate');\n\t}\n\n\tif (component_context.l === null) {\n\t\te.lifecycle_legacy_only('afterUpdate');\n\t}\n\n\tinit_update_callbacks(component_context).a.push(fn);\n}\n\n/**\n * Legacy-mode: Init callbacks object for onMount/beforeUpdate/afterUpdate\n * @param {ComponentContext} context\n */\nfunction init_update_callbacks(context) {\n\tvar l = /** @type {ComponentContextLegacy} */ (context).l;\n\treturn (l.u ??= { a: [], b: [], m: [] });\n}\n\nexport { flushSync, fork } from './internal/client/reactivity/batch.js';\nexport {\n\tcreateContext,\n\tgetContext,\n\tgetAllContexts,\n\thasContext,\n\tsetContext\n} from './internal/client/context.js';\nexport { hydratable } from './internal/client/hydratable.js';\nexport { hydrate, mount, unmount } from './internal/client/render.js';\nexport { tick, untrack, settled } from './internal/client/runtime.js';\nexport { createRawSnippet } from './internal/client/dom/blocks/snippet.js';\n", "/** @import { Action, ActionReturn } from '../action/public' */\n/** @import { Attachment } from './public' */\nimport { noop, render_effect } from 'svelte/internal/client';\nimport { ATTACHMENT_KEY } from '../constants.js';\nimport { untrack } from '../index-client.js';\nimport { teardown } from '../internal/client/reactivity/effects.js';\n\n/**\n * Creates an object key that will be recognised as an attachment when the object is spread onto an element,\n * as a programmatic alternative to using `{@attach ...}`. This can be useful for library authors, though\n * is generally not needed when building an app.\n *\n * ```svelte\n * <script>\n * \timport { createAttachmentKey } from 'svelte/attachments';\n *\n * \tconst props = {\n * \t\tclass: 'cool',\n * \t\tonclick: () => alert('clicked'),\n * \t\t[createAttachmentKey()]: (node) => {\n * \t\t\tnode.textContent = 'attached!';\n * \t\t}\n * \t};\n * </script>\n *\n * <button {...props}>click me</button>\n * ```\n * @since 5.29\n */\nexport function createAttachmentKey() {\n\treturn Symbol(ATTACHMENT_KEY);\n}\n\n/**\n * Converts an [action](https://svelte.dev/docs/svelte/use) into an [attachment](https://svelte.dev/docs/svelte/@attach) keeping the same behavior.\n * It's useful if you want to start using attachments on components but you have actions provided by a library.\n *\n * Note that the second argument, if provided, must be a function that _returns_ the argument to the\n * action function, not the argument itself.\n *\n * ```svelte\n * <!-- with an action -->\n * <div use:foo={bar}>...</div>\n *\n * <!-- with an attachment -->\n * <div {@attach fromAction(foo, () => bar)}>...</div>\n * ```\n * @template {EventTarget} E\n * @template {unknown} T\n * @overload\n * @param {Action<E, T> | ((element: E, arg: T) => void | ActionReturn<T>)} action The action function\n * @param {() => T} fn A function that returns the argument for the action\n * @returns {Attachment<E>}\n */\n/**\n * Converts an [action](https://svelte.dev/docs/svelte/use) into an [attachment](https://svelte.dev/docs/svelte/@attach) keeping the same behavior.\n * It's useful if you want to start using attachments on components but you have actions provided by a library.\n *\n * Note that the second argument, if provided, must be a function that _returns_ the argument to the\n * action function, not the argument itself.\n *\n * ```svelte\n * <!-- with an action -->\n * <div use:foo={bar}>...</div>\n *\n * <!-- with an attachment -->\n * <div {@attach fromAction(foo, () => bar)}>...</div>\n * ```\n * @template {EventTarget} E\n * @overload\n * @param {Action<E, void> | ((element: E) => void | ActionReturn<void>)} action The action function\n * @returns {Attachment<E>}\n */\n/**\n * Converts an [action](https://svelte.dev/docs/svelte/use) into an [attachment](https://svelte.dev/docs/svelte/@attach) keeping the same behavior.\n * It's useful if you want to start using attachments on components but you have actions provided by a library.\n *\n * Note that the second argument, if provided, must be a function that _returns_ the argument to the\n * action function, not the argument itself.\n *\n * ```svelte\n * <!-- with an action -->\n * <div use:foo={bar}>...</div>\n *\n * <!-- with an attachment -->\n * <div {@attach fromAction(foo, () => bar)}>...</div>\n * ```\n *\n * @template {EventTarget} E\n * @template {unknown} T\n * @param {Action<E, T> | ((element: E, arg: T) => void | ActionReturn<T>)} action The action function\n * @param {() => T} fn A function that returns the argument for the action\n * @returns {Attachment<E>}\n * @since 5.32\n */\nexport function fromAction(action, fn = /** @type {() => T} */ (noop)) {\n\treturn (element) => {\n\t\tconst { update, destroy } = untrack(() => action(element, fn()) ?? {});\n\n\t\tif (update) {\n\t\t\tvar ran = false;\n\t\t\trender_effect(() => {\n\t\t\t\tconst arg = fn();\n\t\t\t\tif (ran) update(arg);\n\t\t\t});\n\t\t\tran = true;\n\t\t}\n\n\t\tif (destroy) {\n\t\t\tteardown(destroy);\n\t\t}\n\t};\n}\n", "import { sanitize_location } from '../../../utils.js';\nimport { untrack } from '../runtime.js';\nimport * as w from '../warnings.js';\n\n/**\n *\n * @param {any} a\n * @param {any} b\n * @param {string} property\n * @param {string} location\n */\nfunction compare(a, b, property, location) {\n\tif (a !== b) {\n\t\tw.assignment_value_stale(property, /** @type {string} */ (sanitize_location(location)));\n\t}\n\n\treturn a;\n}\n\n/**\n * @param {any} object\n * @param {string} property\n * @param {any} value\n * @param {string} location\n */\nexport function assign(object, property, value, location) {\n\treturn compare(\n\t\t(object[property] = value),\n\t\tuntrack(() => object[property]),\n\t\tproperty,\n\t\tlocation\n\t);\n}\n\n/**\n * @param {any} object\n * @param {string} property\n * @param {any} value\n * @param {string} location\n */\nexport function assign_and(object, property, value, location) {\n\treturn compare(\n\t\t(object[property] &&= value),\n\t\tuntrack(() => object[property]),\n\t\tproperty,\n\t\tlocation\n\t);\n}\n\n/**\n * @param {any} object\n * @param {string} property\n * @param {any} value\n * @param {string} location\n */\nexport function assign_or(object, property, value, location) {\n\treturn compare(\n\t\t(object[property] ||= value),\n\t\tuntrack(() => object[property]),\n\t\tproperty,\n\t\tlocation\n\t);\n}\n\n/**\n * @param {any} object\n * @param {string} property\n * @param {any} value\n * @param {string} location\n */\nexport function assign_nullish(object, property, value, location) {\n\treturn compare(\n\t\t(object[property] ??= value),\n\t\tuntrack(() => object[property]),\n\t\tproperty,\n\t\tlocation\n\t);\n}\n", "/** @type {Map<String, Set<HTMLStyleElement>>} */\nvar all_styles = new Map();\n\n/**\n * @param {String} hash\n * @param {HTMLStyleElement} style\n */\nexport function register_style(hash, style) {\n\tvar styles = all_styles.get(hash);\n\n\tif (!styles) {\n\t\tstyles = new Set();\n\t\tall_styles.set(hash, styles);\n\t}\n\n\tstyles.add(style);\n}\n\n/**\n * @param {String} hash\n */\nexport function cleanup_styles(hash) {\n\tvar styles = all_styles.get(hash);\n\tif (!styles) return;\n\n\tfor (const style of styles) {\n\t\tstyle.remove();\n\t}\n\n\tall_styles.delete(hash);\n}\n", "/** @import { SourceLocation } from '#client' */\nimport { COMMENT_NODE, DOCUMENT_FRAGMENT_NODE, ELEMENT_NODE } from '#client/constants';\nimport { HYDRATION_END, HYDRATION_START, HYDRATION_START_ELSE } from '../../../constants.js';\nimport { hydrating } from '../dom/hydration.js';\nimport { dev_stack } from '../context.js';\n\n/**\n * @param {any} fn\n * @param {string} filename\n * @param {SourceLocation[]} locations\n * @returns {any}\n */\nexport function add_locations(fn, filename, locations) {\n\treturn (/** @type {any[]} */ ...args) => {\n\t\tconst dom = fn(...args);\n\n\t\tvar node = hydrating ? dom : dom.nodeType === DOCUMENT_FRAGMENT_NODE ? dom.firstChild : dom;\n\t\tassign_locations(node, filename, locations);\n\n\t\treturn dom;\n\t};\n}\n\n/**\n * @param {Element} element\n * @param {string} filename\n * @param {SourceLocation} location\n */\nfunction assign_location(element, filename, location) {\n\t// @ts-expect-error\n\telement.__svelte_meta = {\n\t\tparent: dev_stack,\n\t\tloc: { file: filename, line: location[0], column: location[1] }\n\t};\n\n\tif (location[2]) {\n\t\tassign_locations(element.firstChild, filename, location[2]);\n\t}\n}\n\n/**\n * @param {Node | null} node\n * @param {string} filename\n * @param {SourceLocation[]} locations\n */\nfunction assign_locations(node, filename, locations) {\n\tvar i = 0;\n\tvar depth = 0;\n\n\twhile (node && i < locations.length) {\n\t\tif (hydrating && node.nodeType === COMMENT_NODE) {\n\t\t\tvar comment = /** @type {Comment} */ (node);\n\t\t\tif (comment.data === HYDRATION_START || comment.data === HYDRATION_START_ELSE) depth += 1;\n\t\t\telse if (comment.data[0] === HYDRATION_END) depth -= 1;\n\t\t}\n\n\t\tif (depth === 0 && node.nodeType === ELEMENT_NODE) {\n\t\t\tassign_location(/** @type {Element} */ (node), filename, locations[i++]);\n\t\t}\n\n\t\tnode = node.nextSibling;\n\t}\n}\n", "/** @import { Effect, TemplateNode } from '#client' */\nimport { FILENAME, HMR } from '../../../constants.js';\nimport { EFFECT_TRANSPARENT } from '#client/constants';\nimport { hydrate_node, hydrating } from '../dom/hydration.js';\nimport { block, branch, destroy_effect } from '../reactivity/effects.js';\nimport { set, source } from '../reactivity/sources.js';\nimport { set_should_intro } from '../render.js';\nimport { get } from '../runtime.js';\n\n/**\n * @template {(anchor: Comment, props: any) => any} Component\n * @param {Component} fn\n */\nexport function hmr(fn) {\n\tconst current = source(fn);\n\n\t/**\n\t * @param {TemplateNode} anchor\n\t * @param {any} props\n\t */\n\tfunction wrapper(anchor, props) {\n\t\tlet component = {};\n\t\tlet instance = {};\n\n\t\t/** @type {Effect} */\n\t\tlet effect;\n\n\t\tlet ran = false;\n\n\t\tblock(() => {\n\t\t\tif (component === (component = get(current))) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (effect) {\n\t\t\t\t// @ts-ignore\n\t\t\t\tfor (var k in instance) delete instance[k];\n\t\t\t\tdestroy_effect(effect);\n\t\t\t}\n\n\t\t\teffect = branch(() => {\n\t\t\t\t// when the component is invalidated, replace it without transitions\n\t\t\t\tif (ran) set_should_intro(false);\n\n\t\t\t\t// preserve getters/setters\n\t\t\t\tObject.defineProperties(\n\t\t\t\t\tinstance,\n\t\t\t\t\tObject.getOwnPropertyDescriptors(\n\t\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\t\tnew.target ? new component(anchor, props) : component(anchor, props)\n\t\t\t\t\t)\n\t\t\t\t);\n\n\t\t\t\tif (ran) set_should_intro(true);\n\t\t\t});\n\t\t}, EFFECT_TRANSPARENT);\n\n\t\tran = true;\n\n\t\tif (hydrating) {\n\t\t\tanchor = hydrate_node;\n\t\t}\n\n\t\treturn instance;\n\t}\n\n\t// @ts-expect-error\n\twrapper[FILENAME] = fn[FILENAME];\n\n\t// @ts-ignore\n\twrapper[HMR] = {\n\t\tfn,\n\t\tcurrent,\n\t\tupdate: (/** @type {any} */ incoming) => {\n\t\t\t// This logic ensures that the first version of the component is the one\n\t\t\t// whose update function and therefore block effect is preserved across updates.\n\t\t\t// If we don't do this dance and instead just use `incoming` as the new component\n\t\t\t// and then update, we'll create an ever-growing stack of block effects.\n\n\t\t\t// Trigger the original block effect\n\t\t\tset(wrapper[HMR].current, incoming[HMR].fn);\n\n\t\t\t// Replace the incoming source with the original one\n\t\t\tincoming[HMR].current = wrapper[HMR].current;\n\t\t}\n\t};\n\n\treturn wrapper;\n}\n", "/** @typedef {{ file: string, line: number, column: number }} Location */\n\nimport { get_descriptor } from '../../shared/utils.js';\nimport { LEGACY_PROPS, STATE_SYMBOL } from '#client/constants';\nimport { FILENAME } from '../../../constants.js';\nimport { component_context } from '../context.js';\nimport * as w from '../warnings.js';\nimport { sanitize_location } from '../../../utils.js';\n\n/**\n * Sets up a validator that\n * - traverses the path of a prop to find out if it is allowed to be mutated\n * - checks that the binding chain is not interrupted\n * @param {Record<string, any>} props\n */\nexport function create_ownership_validator(props) {\n\tconst component = component_context?.function;\n\tconst parent = component_context?.p?.function;\n\n\treturn {\n\t\t/**\n\t\t * @param {string} prop\n\t\t * @param {any[]} path\n\t\t * @param {any} result\n\t\t * @param {number} line\n\t\t * @param {number} column\n\t\t */\n\t\tmutation: (prop, path, result, line, column) => {\n\t\t\tconst name = path[0];\n\t\t\tif (is_bound_or_unset(props, name) || !parent) {\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\t/** @type {any} */\n\t\t\tlet value = props;\n\n\t\t\tfor (let i = 0; i < path.length - 1; i++) {\n\t\t\t\tvalue = value[path[i]];\n\t\t\t\tif (!value?.[STATE_SYMBOL]) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst location = sanitize_location(`${component[FILENAME]}:${line}:${column}`);\n\n\t\t\tw.ownership_invalid_mutation(name, location, prop, parent[FILENAME]);\n\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * @param {any} key\n\t\t * @param {any} child_component\n\t\t * @param {() => any} value\n\t\t */\n\t\tbinding: (key, child_component, value) => {\n\t\t\tif (!is_bound_or_unset(props, key) && parent && value()?.[STATE_SYMBOL]) {\n\t\t\t\tw.ownership_invalid_binding(\n\t\t\t\t\tcomponent[FILENAME],\n\t\t\t\t\tkey,\n\t\t\t\t\tchild_component[FILENAME],\n\t\t\t\t\tparent[FILENAME]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Record<string, any>} props\n * @param {string} prop_name\n */\nfunction is_bound_or_unset(props, prop_name) {\n\t// Can be the case when someone does `mount(Component, props)` with `let props = $state({...})`\n\t// or `createClassComponent(Component, props)`\n\tconst is_entry_props = STATE_SYMBOL in props || LEGACY_PROPS in props;\n\treturn (\n\t\t!!get_descriptor(props, prop_name)?.set ||\n\t\t(is_entry_props && prop_name in props) ||\n\t\t!(prop_name in props)\n\t);\n}\n", "import * as e from '../errors.js';\nimport { component_context } from '../context.js';\nimport { FILENAME } from '../../../constants.js';\n\n/** @param {Function & { [FILENAME]: string }} target */\nexport function check_target(target) {\n\tif (target) {\n\t\te.component_api_invalid_new(target[FILENAME] ?? 'a component', target.name);\n\t}\n}\n\nexport function legacy_api() {\n\tconst component = component_context?.function;\n\n\t/** @param {string} method */\n\tfunction error(method) {\n\t\te.component_api_changed(method, component[FILENAME]);\n\t}\n\n\treturn {\n\t\t$destroy: () => error('$destroy()'),\n\t\t$on: () => error('$on(...)'),\n\t\t$set: () => error('$set(...)')\n\t};\n}\n", "import { UNINITIALIZED } from '../../../constants.js';\nimport { snapshot } from '../../shared/clone.js';\nimport { eager_effect, render_effect, validate_effect } from '../reactivity/effects.js';\nimport { untrack } from '../runtime.js';\nimport { get_error } from '../../shared/dev.js';\n\n/**\n * @param {() => any[]} get_value\n * @param {Function} inspector\n * @param {boolean} show_stack\n */\nexport function inspect(get_value, inspector, show_stack = false) {\n\tvalidate_effect('$inspect');\n\n\tlet initial = true;\n\tlet error = /** @type {any} */ (UNINITIALIZED);\n\n\t// Inspect effects runs synchronously so that we can capture useful\n\t// stack traces. As a consequence, reading the value might result\n\t// in an error (an `$inspect(object.property)` will run before the\n\t// `{#if object}...{/if}` that contains it)\n\teager_effect(() => {\n\t\ttry {\n\t\t\tvar value = get_value();\n\t\t} catch (e) {\n\t\t\terror = e;\n\t\t\treturn;\n\t\t}\n\n\t\tvar snap = snapshot(value, true, true);\n\t\tuntrack(() => {\n\t\t\tif (show_stack) {\n\t\t\t\tinspector(...snap);\n\n\t\t\t\tif (!initial) {\n\t\t\t\t\tconst stack = get_error('$inspect(...)');\n\t\t\t\t\tif (stack) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.groupCollapsed('stack trace');\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.log(stack);\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.groupEnd();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tinspector(initial ? 'init' : 'update', ...snap);\n\t\t\t}\n\t\t});\n\n\t\tinitial = false;\n\t});\n\n\t// If an error occurs, we store it (along with its stack trace).\n\t// If the render effect subsequently runs, we log the error,\n\t// but if it doesn't run it's because the `$inspect` was\n\t// destroyed, meaning we don't need to bother\n\trender_effect(() => {\n\t\ttry {\n\t\t\t// call `get_value` so that this runs alongside the inspect effect\n\t\t\tget_value();\n\t\t} catch {\n\t\t\t// ignore\n\t\t}\n\n\t\tif (error !== UNINITIALIZED) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error(error);\n\t\t\terror = UNINITIALIZED;\n\t\t}\n\t});\n}\n", "/** @import { Blocker, TemplateNode, Value } from '#client' */\nimport { flatten } from '../../reactivity/async.js';\nimport { Batch, current_batch } from '../../reactivity/batch.js';\nimport { get } from '../../runtime.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tset_hydrate_node,\n\tset_hydrating,\n\tskip_nodes\n} from '../hydration.js';\nimport { get_boundary } from './boundary.js';\n\n/**\n * @param {TemplateNode} node\n * @param {Blocker[]} blockers\n * @param {Array<() => Promise<any>>} expressions\n * @param {(anchor: TemplateNode, ...deriveds: Value[]) => void} fn\n */\nexport function async(node, blockers = [], expressions = [], fn) {\n\tif (expressions.length === 0 && blockers.every((b) => b.settled)) {\n\t\tfn(node);\n\t\treturn;\n\t}\n\n\tvar boundary = get_boundary();\n\tvar batch = /** @type {Batch} */ (current_batch);\n\tvar blocking = boundary.is_rendered();\n\n\tboundary.update_pending_count(1);\n\tbatch.increment(blocking);\n\n\tvar was_hydrating = hydrating;\n\n\tif (was_hydrating) {\n\t\thydrate_next();\n\n\t\tvar previous_hydrate_node = hydrate_node;\n\t\tvar end = skip_nodes(false);\n\t\tset_hydrate_node(end);\n\t}\n\n\tflatten(blockers, [], expressions, (values) => {\n\t\tif (was_hydrating) {\n\t\t\tset_hydrating(true);\n\t\t\tset_hydrate_node(previous_hydrate_node);\n\t\t}\n\n\t\ttry {\n\t\t\t// get values eagerly to avoid creating blocks if they reject\n\t\t\tfor (const d of values) get(d);\n\n\t\t\tfn(node, ...values);\n\t\t} finally {\n\t\t\tif (was_hydrating) {\n\t\t\t\tset_hydrating(false);\n\t\t\t}\n\n\t\t\tboundary.update_pending_count(-1);\n\t\t\tbatch.decrement(blocking);\n\t\t}\n\t});\n}\n", "import * as e from '../errors.js';\n/**\n * @param {Node} anchor\n * @param {...(()=>any)[]} args\n */\nexport function validate_snippet_args(anchor, ...args) {\n\tif (typeof anchor !== 'object' || !(anchor instanceof Node)) {\n\t\te.invalid_snippet_arguments();\n\t}\n\n\tfor (let arg of args) {\n\t\tif (typeof arg !== 'function') {\n\t\t\te.invalid_snippet_arguments();\n\t\t}\n\t}\n}\n", "/** @import { Source, TemplateNode } from '#client' */\nimport { is_promise } from '../../../shared/utils.js';\nimport { block } from '../../reactivity/effects.js';\nimport { internal_set, mutable_source, source } from '../../reactivity/sources.js';\nimport {\n\thydrate_next,\n\thydrating,\n\tskip_nodes,\n\tset_hydrate_node,\n\tset_hydrating\n} from '../hydration.js';\nimport { queue_micro_task } from '../task.js';\nimport { HYDRATION_START_ELSE, UNINITIALIZED } from '../../../../constants.js';\nimport { is_runes } from '../../context.js';\nimport { Batch, flushSync, is_flushing_sync } from '../../reactivity/batch.js';\nimport { BranchManager } from './branches.js';\nimport { capture, unset_context } from '../../reactivity/async.js';\n\nconst PENDING = 0;\nconst THEN = 1;\nconst CATCH = 2;\n\n/** @typedef {typeof PENDING | typeof THEN | typeof CATCH} AwaitState */\n\n/**\n * @template V\n * @param {TemplateNode} node\n * @param {(() => any)} get_input\n * @param {null | ((anchor: Node) => void)} pending_fn\n * @param {null | ((anchor: Node, value: Source<V>) => void)} then_fn\n * @param {null | ((anchor: Node, error: unknown) => void)} catch_fn\n * @returns {void}\n */\nexport function await_block(node, get_input, pending_fn, then_fn, catch_fn) {\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\tvar runes = is_runes();\n\n\tvar v = /** @type {V} */ (UNINITIALIZED);\n\tvar value = runes ? source(v) : mutable_source(v, false, false);\n\tvar error = runes ? source(v) : mutable_source(v, false, false);\n\n\tvar branches = new BranchManager(node);\n\n\tblock(() => {\n\t\tvar input = get_input();\n\t\tvar destroyed = false;\n\n\t\t/** Whether or not there was a hydration mismatch. Needs to be a `let` or else it isn't treeshaken out */\n\t\t// @ts-ignore coercing `node` to a `Comment` causes TypeScript and Prettier to fight\n\t\tlet mismatch = hydrating && is_promise(input) === (node.data === HYDRATION_START_ELSE);\n\n\t\tif (mismatch) {\n\t\t\t// Hydration mismatch: remove everything inside the anchor and start fresh\n\t\t\tset_hydrate_node(skip_nodes());\n\t\t\tset_hydrating(false);\n\t\t}\n\n\t\tif (is_promise(input)) {\n\t\t\tvar restore = capture();\n\t\t\tvar resolved = false;\n\n\t\t\t/**\n\t\t\t * @param {() => void} fn\n\t\t\t */\n\t\t\tconst resolve = (fn) => {\n\t\t\t\tif (destroyed) return;\n\n\t\t\t\tresolved = true;\n\t\t\t\t// We don't want to restore the previous batch here; {#await} blocks don't follow the async logic\n\t\t\t\t// we have elsewhere, instead pending/resolve/fail states are each their own batch so to speak.\n\t\t\t\trestore(false);\n\t\t\t\t// Make sure we have a batch, since the branch manager expects one to exist\n\t\t\t\tBatch.ensure();\n\n\t\t\t\tif (hydrating) {\n\t\t\t\t\t// `restore()` could set `hydrating` to `true`, which we very much\n\t\t\t\t\t// don't want \u2014 we want to restore everything _except_ this\n\t\t\t\t\tset_hydrating(false);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tfn();\n\t\t\t\t} finally {\n\t\t\t\t\tunset_context();\n\n\t\t\t\t\t// without this, the DOM does not update until two ticks after the promise\n\t\t\t\t\t// resolves, which is unexpected behaviour (and somewhat irksome to test)\n\t\t\t\t\tif (!is_flushing_sync) flushSync();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tinput.then(\n\t\t\t\t(v) => {\n\t\t\t\t\tresolve(() => {\n\t\t\t\t\t\tinternal_set(value, v);\n\t\t\t\t\t\tbranches.ensure(THEN, then_fn && ((target) => then_fn(target, value)));\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t(e) => {\n\t\t\t\t\tresolve(() => {\n\t\t\t\t\t\tinternal_set(error, e);\n\t\t\t\t\t\tbranches.ensure(THEN, catch_fn && ((target) => catch_fn(target, error)));\n\n\t\t\t\t\t\tif (!catch_fn) {\n\t\t\t\t\t\t\t// Rethrow the error if no catch block exists\n\t\t\t\t\t\t\tthrow error.v;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tif (hydrating) {\n\t\t\t\tbranches.ensure(PENDING, pending_fn);\n\t\t\t} else {\n\t\t\t\t// Wait a microtask before checking if we should show the pending state as\n\t\t\t\t// the promise might have resolved by then\n\t\t\t\tqueue_micro_task(() => {\n\t\t\t\t\tif (!resolved) {\n\t\t\t\t\t\tresolve(() => {\n\t\t\t\t\t\t\tbranches.ensure(PENDING, pending_fn);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tinternal_set(value, input);\n\t\t\tbranches.ensure(THEN, then_fn && ((target) => then_fn(target, value)));\n\t\t}\n\n\t\tif (mismatch) {\n\t\t\t// continue in hydration mode\n\t\t\tset_hydrating(true);\n\t\t}\n\n\t\treturn () => {\n\t\t\tdestroyed = true;\n\t\t};\n\t});\n}\n", "/** @import { TemplateNode } from '#client' */\nimport { EFFECT_TRANSPARENT } from '#client/constants';\nimport {\n\thydrate_next,\n\thydrating,\n\tread_hydration_instruction,\n\tskip_nodes,\n\tset_hydrate_node,\n\tset_hydrating\n} from '../hydration.js';\nimport { block } from '../../reactivity/effects.js';\nimport { HYDRATION_START_ELSE } from '../../../../constants.js';\nimport { BranchManager } from './branches.js';\n\n// TODO reinstate https://github.com/sveltejs/svelte/pull/15250\n\n/**\n * @param {TemplateNode} node\n * @param {(branch: (fn: (anchor: Node) => void, flag?: boolean) => void) => void} fn\n * @param {boolean} [elseif] True if this is an `{:else if ...}` block rather than an `{#if ...}`, as that affects which transitions are considered 'local'\n * @returns {void}\n */\nexport function if_block(node, fn, elseif = false) {\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\tvar branches = new BranchManager(node);\n\tvar flags = elseif ? EFFECT_TRANSPARENT : 0;\n\n\t/**\n\t * @param {boolean} condition,\n\t * @param {null | ((anchor: Node) => void)} fn\n\t */\n\tfunction update_branch(condition, fn) {\n\t\tif (hydrating) {\n\t\t\tconst is_else = read_hydration_instruction(node) === HYDRATION_START_ELSE;\n\n\t\t\tif (condition === is_else) {\n\t\t\t\t// Hydration mismatch: remove everything inside the anchor and start fresh.\n\t\t\t\t// This could happen with `{#if browser}...{/if}`, for example\n\t\t\t\tvar anchor = skip_nodes();\n\n\t\t\t\tset_hydrate_node(anchor);\n\t\t\t\tbranches.anchor = anchor;\n\n\t\t\t\tset_hydrating(false);\n\t\t\t\tbranches.ensure(condition, fn);\n\t\t\t\tset_hydrating(true);\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tbranches.ensure(condition, fn);\n\t}\n\n\tblock(() => {\n\t\tvar has_branch = false;\n\n\t\tfn((fn, flag = true) => {\n\t\t\thas_branch = true;\n\t\t\tupdate_branch(flag, fn);\n\t\t});\n\n\t\tif (!has_branch) {\n\t\t\tupdate_branch(false, null);\n\t\t}\n\t}, flags);\n}\n", "/** @import { TemplateNode } from '#client' */\nimport { is_runes } from '../../context.js';\nimport { block } from '../../reactivity/effects.js';\nimport { hydrate_next, hydrating } from '../hydration.js';\nimport { BranchManager } from './branches.js';\n\n/**\n * @template V\n * @param {TemplateNode} node\n * @param {() => V} get_key\n * @param {(anchor: Node) => TemplateNode | void} render_fn\n * @returns {void}\n */\nexport function key(node, get_key, render_fn) {\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\tvar branches = new BranchManager(node);\n\n\tvar legacy = !is_runes();\n\n\tblock(() => {\n\t\tvar key = get_key();\n\n\t\t// key blocks in Svelte <5 had stupid semantics\n\t\tif (legacy && key !== null && typeof key === 'object') {\n\t\t\tkey = /** @type {V} */ ({});\n\t\t}\n\n\t\tbranches.ensure(key, render_fn);\n\t});\n}\n", "import { render_effect } from '../../reactivity/effects.js';\nimport { hydrating, set_hydrate_node } from '../hydration.js';\nimport { get_first_child } from '../operations.js';\n\n/**\n * @param {HTMLDivElement | SVGGElement} element\n * @param {() => Record<string, string>} get_styles\n * @returns {void}\n */\nexport function css_props(element, get_styles) {\n\tif (hydrating) {\n\t\tset_hydrate_node(get_first_child(element));\n\t}\n\n\trender_effect(() => {\n\t\tvar styles = get_styles();\n\n\t\tfor (var key in styles) {\n\t\t\tvar value = styles[key];\n\n\t\t\tif (value) {\n\t\t\t\telement.style.setProperty(key, value);\n\t\t\t} else {\n\t\t\t\telement.style.removeProperty(key);\n\t\t\t}\n\t\t}\n\t});\n}\n", "/** @import { EachItem, EachOutroGroup, EachState, Effect, EffectNodes, MaybeSource, Source, TemplateNode, TransitionManager, Value } from '#client' */\n/** @import { Batch } from '../../reactivity/batch.js'; */\nimport {\n\tEACH_INDEX_REACTIVE,\n\tEACH_IS_ANIMATED,\n\tEACH_IS_CONTROLLED,\n\tEACH_ITEM_IMMUTABLE,\n\tEACH_ITEM_REACTIVE,\n\tHYDRATION_END,\n\tHYDRATION_START_ELSE\n} from '../../../../constants.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tread_hydration_instruction,\n\tskip_nodes,\n\tset_hydrate_node,\n\tset_hydrating\n} from '../hydration.js';\nimport {\n\tclear_text_content,\n\tcreate_text,\n\tget_first_child,\n\tget_next_sibling,\n\tshould_defer_append\n} from '../operations.js';\nimport {\n\tblock,\n\tbranch,\n\tdestroy_effect,\n\tpause_effect,\n\tresume_effect\n} from '../../reactivity/effects.js';\nimport { source, mutable_source, internal_set } from '../../reactivity/sources.js';\nimport { array_from, is_array } from '../../../shared/utils.js';\nimport { COMMENT_NODE, EFFECT_OFFSCREEN, INERT } from '#client/constants';\nimport { queue_micro_task } from '../task.js';\nimport { get } from '../../runtime.js';\nimport { DEV } from 'esm-env';\nimport { derived_safe_equal } from '../../reactivity/deriveds.js';\nimport { current_batch } from '../../reactivity/batch.js';\n\n// When making substantive changes to this file, validate them with the each block stress test:\n// https://svelte.dev/playground/1972b2cf46564476ad8c8c6405b23b7b\n// This test also exists in this repo, as `packages/svelte/tests/manual/each-stress-test`\n\n/**\n * @param {any} _\n * @param {number} i\n */\nexport function index(_, i) {\n\treturn i;\n}\n\n/**\n * Pause multiple effects simultaneously, and coordinate their\n * subsequent destruction. Used in each blocks\n * @param {EachState} state\n * @param {Effect[]} to_destroy\n * @param {null | Node} controlled_anchor\n */\nfunction pause_effects(state, to_destroy, controlled_anchor) {\n\t/** @type {TransitionManager[]} */\n\tvar transitions = [];\n\tvar length = to_destroy.length;\n\n\t/** @type {EachOutroGroup} */\n\tvar group;\n\tvar remaining = to_destroy.length;\n\n\tfor (var i = 0; i < length; i++) {\n\t\tlet effect = to_destroy[i];\n\n\t\tpause_effect(\n\t\t\teffect,\n\t\t\t() => {\n\t\t\t\tif (group) {\n\t\t\t\t\tgroup.pending.delete(effect);\n\t\t\t\t\tgroup.done.add(effect);\n\n\t\t\t\t\tif (group.pending.size === 0) {\n\t\t\t\t\t\tvar groups = /** @type {Set<EachOutroGroup>} */ (state.outrogroups);\n\n\t\t\t\t\t\tdestroy_effects(array_from(group.done));\n\t\t\t\t\t\tgroups.delete(group);\n\n\t\t\t\t\t\tif (groups.size === 0) {\n\t\t\t\t\t\t\tstate.outrogroups = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tremaining -= 1;\n\t\t\t\t}\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\t}\n\n\tif (remaining === 0) {\n\t\t// If we're in a controlled each block (i.e. the block is the only child of an\n\t\t// element), and we are removing all items, _and_ there are no out transitions,\n\t\t// we can use the fast path \u2014 emptying the element and replacing the anchor\n\t\tvar fast_path = transitions.length === 0 && controlled_anchor !== null;\n\n\t\tif (fast_path) {\n\t\t\tvar anchor = /** @type {Element} */ (controlled_anchor);\n\t\t\tvar parent_node = /** @type {Element} */ (anchor.parentNode);\n\n\t\t\tclear_text_content(parent_node);\n\t\t\tparent_node.append(anchor);\n\n\t\t\tstate.items.clear();\n\t\t}\n\n\t\tdestroy_effects(to_destroy, !fast_path);\n\t} else {\n\t\tgroup = {\n\t\t\tpending: new Set(to_destroy),\n\t\t\tdone: new Set()\n\t\t};\n\n\t\t(state.outrogroups ??= new Set()).add(group);\n\t}\n}\n\n/**\n * @param {Effect[]} to_destroy\n * @param {boolean} remove_dom\n */\nfunction destroy_effects(to_destroy, remove_dom = true) {\n\t// TODO only destroy effects if no pending batch needs them. otherwise,\n\t// just re-add the `EFFECT_OFFSCREEN` flag\n\tfor (var i = 0; i < to_destroy.length; i++) {\n\t\tdestroy_effect(to_destroy[i], remove_dom);\n\t}\n}\n\n/** @type {TemplateNode} */\nvar offscreen_anchor;\n\n/**\n * @template V\n * @param {Element | Comment} node The next sibling node, or the parent node if this is a 'controlled' block\n * @param {number} flags\n * @param {() => V[]} get_collection\n * @param {(value: V, index: number) => any} get_key\n * @param {(anchor: Node, item: MaybeSource<V>, index: MaybeSource<number>) => void} render_fn\n * @param {null | ((anchor: Node) => void)} fallback_fn\n * @returns {void}\n */\nexport function each(node, flags, get_collection, get_key, render_fn, fallback_fn = null) {\n\tvar anchor = node;\n\n\t/** @type {Map<any, EachItem>} */\n\tvar items = new Map();\n\n\tvar is_controlled = (flags & EACH_IS_CONTROLLED) !== 0;\n\n\tif (is_controlled) {\n\t\tvar parent_node = /** @type {Element} */ (node);\n\n\t\tanchor = hydrating\n\t\t\t? set_hydrate_node(get_first_child(parent_node))\n\t\t\t: parent_node.appendChild(create_text());\n\t}\n\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\t/** @type {Effect | null} */\n\tvar fallback = null;\n\n\t// TODO: ideally we could use derived for runes mode but because of the ability\n\t// to use a store which can be mutated, we can't do that here as mutating a store\n\t// will still result in the collection array being the same from the store\n\tvar each_array = derived_safe_equal(() => {\n\t\tvar collection = get_collection();\n\n\t\treturn is_array(collection) ? collection : collection == null ? [] : array_from(collection);\n\t});\n\n\t/** @type {V[]} */\n\tvar array;\n\n\tvar first_run = true;\n\n\tfunction commit() {\n\t\tstate.fallback = fallback;\n\t\treconcile(state, array, anchor, flags, get_key);\n\n\t\tif (fallback !== null) {\n\t\t\tif (array.length === 0) {\n\t\t\t\tif ((fallback.f & EFFECT_OFFSCREEN) === 0) {\n\t\t\t\t\tresume_effect(fallback);\n\t\t\t\t} else {\n\t\t\t\t\tfallback.f ^= EFFECT_OFFSCREEN;\n\t\t\t\t\tmove(fallback, null, anchor);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tpause_effect(fallback, () => {\n\t\t\t\t\t// TODO only null out if no pending batch needs it,\n\t\t\t\t\t// otherwise re-add `fallback.fragment` and move the\n\t\t\t\t\t// effect into it\n\t\t\t\t\tfallback = null;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tvar effect = block(() => {\n\t\tarray = /** @type {V[]} */ (get(each_array));\n\t\tvar length = array.length;\n\n\t\t/** `true` if there was a hydration mismatch. Needs to be a `let` or else it isn't treeshaken out */\n\t\tlet mismatch = false;\n\n\t\tif (hydrating) {\n\t\t\tvar is_else = read_hydration_instruction(anchor) === HYDRATION_START_ELSE;\n\n\t\t\tif (is_else !== (length === 0)) {\n\t\t\t\t// hydration mismatch \u2014 remove the server-rendered DOM and start over\n\t\t\t\tanchor = skip_nodes();\n\n\t\t\t\tset_hydrate_node(anchor);\n\t\t\t\tset_hydrating(false);\n\t\t\t\tmismatch = true;\n\t\t\t}\n\t\t}\n\n\t\tvar keys = new Set();\n\t\tvar batch = /** @type {Batch} */ (current_batch);\n\t\tvar defer = should_defer_append();\n\n\t\tfor (var index = 0; index < length; index += 1) {\n\t\t\tif (\n\t\t\t\thydrating &&\n\t\t\t\thydrate_node.nodeType === COMMENT_NODE &&\n\t\t\t\t/** @type {Comment} */ (hydrate_node).data === HYDRATION_END\n\t\t\t) {\n\t\t\t\t// The server rendered fewer items than expected,\n\t\t\t\t// so break out and continue appending non-hydrated items\n\t\t\t\tanchor = /** @type {Comment} */ (hydrate_node);\n\t\t\t\tmismatch = true;\n\t\t\t\tset_hydrating(false);\n\t\t\t}\n\n\t\t\tvar value = array[index];\n\t\t\tvar key = get_key(value, index);\n\n\t\t\tvar item = first_run ? null : items.get(key);\n\n\t\t\tif (item) {\n\t\t\t\t// update before reconciliation, to trigger any async updates\n\t\t\t\tif (item.v) internal_set(item.v, value);\n\t\t\t\tif (item.i) internal_set(item.i, index);\n\n\t\t\t\tif (defer) {\n\t\t\t\t\tbatch.skipped_effects.delete(item.e);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\titem = create_item(\n\t\t\t\t\titems,\n\t\t\t\t\tfirst_run ? anchor : (offscreen_anchor ??= create_text()),\n\t\t\t\t\tvalue,\n\t\t\t\t\tkey,\n\t\t\t\t\tindex,\n\t\t\t\t\trender_fn,\n\t\t\t\t\tflags,\n\t\t\t\t\tget_collection\n\t\t\t\t);\n\n\t\t\t\tif (!first_run) {\n\t\t\t\t\titem.e.f |= EFFECT_OFFSCREEN;\n\t\t\t\t}\n\n\t\t\t\titems.set(key, item);\n\t\t\t}\n\n\t\t\tkeys.add(key);\n\t\t}\n\n\t\tif (length === 0 && fallback_fn && !fallback) {\n\t\t\tif (first_run) {\n\t\t\t\tfallback = branch(() => fallback_fn(anchor));\n\t\t\t} else {\n\t\t\t\tfallback = branch(() => fallback_fn((offscreen_anchor ??= create_text())));\n\t\t\t\tfallback.f |= EFFECT_OFFSCREEN;\n\t\t\t}\n\t\t}\n\n\t\t// remove excess nodes\n\t\tif (hydrating && length > 0) {\n\t\t\tset_hydrate_node(skip_nodes());\n\t\t}\n\n\t\tif (!first_run) {\n\t\t\tif (defer) {\n\t\t\t\tfor (const [key, item] of items) {\n\t\t\t\t\tif (!keys.has(key)) {\n\t\t\t\t\t\tbatch.skipped_effects.add(item.e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbatch.oncommit(commit);\n\t\t\t\tbatch.ondiscard(() => {\n\t\t\t\t\t// TODO presumably we need to do something here?\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcommit();\n\t\t\t}\n\t\t}\n\n\t\tif (mismatch) {\n\t\t\t// continue in hydration mode\n\t\t\tset_hydrating(true);\n\t\t}\n\n\t\t// When we mount the each block for the first time, the collection won't be\n\t\t// connected to this effect as the effect hasn't finished running yet and its deps\n\t\t// won't be assigned. However, it's possible that when reconciling the each block\n\t\t// that a mutation occurred and it's made the collection MAYBE_DIRTY, so reading the\n\t\t// collection again can provide consistency to the reactive graph again as the deriveds\n\t\t// will now be `CLEAN`.\n\t\tget(each_array);\n\t});\n\n\t/** @type {EachState} */\n\tvar state = { effect, flags, items, outrogroups: null, fallback };\n\n\tfirst_run = false;\n\n\tif (hydrating) {\n\t\tanchor = hydrate_node;\n\t}\n}\n\n/**\n * Add, remove, or reorder items output by an each block as its input changes\n * @template V\n * @param {EachState} state\n * @param {Array<V>} array\n * @param {Element | Comment | Text} anchor\n * @param {number} flags\n * @param {(value: V, index: number) => any} get_key\n * @returns {void}\n */\nfunction reconcile(state, array, anchor, flags, get_key) {\n\tvar is_animated = (flags & EACH_IS_ANIMATED) !== 0;\n\n\tvar length = array.length;\n\tvar items = state.items;\n\tvar current = state.effect.first;\n\n\t/** @type {undefined | Set<Effect>} */\n\tvar seen;\n\n\t/** @type {Effect | null} */\n\tvar prev = null;\n\n\t/** @type {undefined | Set<Effect>} */\n\tvar to_animate;\n\n\t/** @type {Effect[]} */\n\tvar matched = [];\n\n\t/** @type {Effect[]} */\n\tvar stashed = [];\n\n\t/** @type {V} */\n\tvar value;\n\n\t/** @type {any} */\n\tvar key;\n\n\t/** @type {Effect | undefined} */\n\tvar effect;\n\n\t/** @type {number} */\n\tvar i;\n\n\tif (is_animated) {\n\t\tfor (i = 0; i < length; i += 1) {\n\t\t\tvalue = array[i];\n\t\t\tkey = get_key(value, i);\n\t\t\teffect = /** @type {EachItem} */ (items.get(key)).e;\n\n\t\t\t// offscreen == coming in now, no animation in that case,\n\t\t\t// else this would happen https://github.com/sveltejs/svelte/issues/17181\n\t\t\tif ((effect.f & EFFECT_OFFSCREEN) === 0) {\n\t\t\t\teffect.nodes?.a?.measure();\n\t\t\t\t(to_animate ??= new Set()).add(effect);\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (i = 0; i < length; i += 1) {\n\t\tvalue = array[i];\n\t\tkey = get_key(value, i);\n\n\t\teffect = /** @type {EachItem} */ (items.get(key)).e;\n\n\t\tif (state.outrogroups !== null) {\n\t\t\tfor (const group of state.outrogroups) {\n\t\t\t\tgroup.pending.delete(effect);\n\t\t\t\tgroup.done.delete(effect);\n\t\t\t}\n\t\t}\n\n\t\tif ((effect.f & EFFECT_OFFSCREEN) !== 0) {\n\t\t\teffect.f ^= EFFECT_OFFSCREEN;\n\n\t\t\tif (effect === current) {\n\t\t\t\tmove(effect, null, anchor);\n\t\t\t} else {\n\t\t\t\tvar next = prev ? prev.next : current;\n\n\t\t\t\tif (effect === state.effect.last) {\n\t\t\t\t\tstate.effect.last = effect.prev;\n\t\t\t\t}\n\n\t\t\t\tif (effect.prev) effect.prev.next = effect.next;\n\t\t\t\tif (effect.next) effect.next.prev = effect.prev;\n\t\t\t\tlink(state, prev, effect);\n\t\t\t\tlink(state, effect, next);\n\n\t\t\t\tmove(effect, next, anchor);\n\t\t\t\tprev = effect;\n\n\t\t\t\tmatched = [];\n\t\t\t\tstashed = [];\n\n\t\t\t\tcurrent = prev.next;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\n\t\tif ((effect.f & INERT) !== 0) {\n\t\t\tresume_effect(effect);\n\t\t\tif (is_animated) {\n\t\t\t\teffect.nodes?.a?.unfix();\n\t\t\t\t(to_animate ??= new Set()).delete(effect);\n\t\t\t}\n\t\t}\n\n\t\tif (effect !== current) {\n\t\t\tif (seen !== undefined && seen.has(effect)) {\n\t\t\t\tif (matched.length < stashed.length) {\n\t\t\t\t\t// more efficient to move later items to the front\n\t\t\t\t\tvar start = stashed[0];\n\t\t\t\t\tvar j;\n\n\t\t\t\t\tprev = start.prev;\n\n\t\t\t\t\tvar a = matched[0];\n\t\t\t\t\tvar b = matched[matched.length - 1];\n\n\t\t\t\t\tfor (j = 0; j < matched.length; j += 1) {\n\t\t\t\t\t\tmove(matched[j], start, anchor);\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (j = 0; j < stashed.length; j += 1) {\n\t\t\t\t\t\tseen.delete(stashed[j]);\n\t\t\t\t\t}\n\n\t\t\t\t\tlink(state, a.prev, b.next);\n\t\t\t\t\tlink(state, prev, a);\n\t\t\t\t\tlink(state, b, start);\n\n\t\t\t\t\tcurrent = start;\n\t\t\t\t\tprev = b;\n\t\t\t\t\ti -= 1;\n\n\t\t\t\t\tmatched = [];\n\t\t\t\t\tstashed = [];\n\t\t\t\t} else {\n\t\t\t\t\t// more efficient to move earlier items to the back\n\t\t\t\t\tseen.delete(effect);\n\t\t\t\t\tmove(effect, current, anchor);\n\n\t\t\t\t\tlink(state, effect.prev, effect.next);\n\t\t\t\t\tlink(state, effect, prev === null ? state.effect.first : prev.next);\n\t\t\t\t\tlink(state, prev, effect);\n\n\t\t\t\t\tprev = effect;\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tmatched = [];\n\t\t\tstashed = [];\n\n\t\t\twhile (current !== null && current !== effect) {\n\t\t\t\t(seen ??= new Set()).add(current);\n\t\t\t\tstashed.push(current);\n\t\t\t\tcurrent = current.next;\n\t\t\t}\n\n\t\t\tif (current === null) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\n\t\tif ((effect.f & EFFECT_OFFSCREEN) === 0) {\n\t\t\tmatched.push(effect);\n\t\t}\n\n\t\tprev = effect;\n\t\tcurrent = effect.next;\n\t}\n\n\tif (state.outrogroups !== null) {\n\t\tfor (const group of state.outrogroups) {\n\t\t\tif (group.pending.size === 0) {\n\t\t\t\tdestroy_effects(array_from(group.done));\n\t\t\t\tstate.outrogroups?.delete(group);\n\t\t\t}\n\t\t}\n\n\t\tif (state.outrogroups.size === 0) {\n\t\t\tstate.outrogroups = null;\n\t\t}\n\t}\n\n\tif (current !== null || seen !== undefined) {\n\t\t/** @type {Effect[]} */\n\t\tvar to_destroy = [];\n\n\t\tif (seen !== undefined) {\n\t\t\tfor (effect of seen) {\n\t\t\t\tif ((effect.f & INERT) === 0) {\n\t\t\t\t\tto_destroy.push(effect);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\twhile (current !== null) {\n\t\t\t// If the each block isn't inert, then inert effects are currently outroing and will be removed once the transition is finished\n\t\t\tif ((current.f & INERT) === 0 && current !== state.fallback) {\n\t\t\t\tto_destroy.push(current);\n\t\t\t}\n\n\t\t\tcurrent = current.next;\n\t\t}\n\n\t\tvar destroy_length = to_destroy.length;\n\n\t\tif (destroy_length > 0) {\n\t\t\tvar controlled_anchor = (flags & EACH_IS_CONTROLLED) !== 0 && length === 0 ? anchor : null;\n\n\t\t\tif (is_animated) {\n\t\t\t\tfor (i = 0; i < destroy_length; i += 1) {\n\t\t\t\t\tto_destroy[i].nodes?.a?.measure();\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < destroy_length; i += 1) {\n\t\t\t\t\tto_destroy[i].nodes?.a?.fix();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tpause_effects(state, to_destroy, controlled_anchor);\n\t\t}\n\t}\n\n\tif (is_animated) {\n\t\tqueue_micro_task(() => {\n\t\t\tif (to_animate === undefined) return;\n\t\t\tfor (effect of to_animate) {\n\t\t\t\teffect.nodes?.a?.apply();\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * @template V\n * @param {Map<any, EachItem>} items\n * @param {Node} anchor\n * @param {V} value\n * @param {unknown} key\n * @param {number} index\n * @param {(anchor: Node, item: V | Source<V>, index: number | Value<number>, collection: () => V[]) => void} render_fn\n * @param {number} flags\n * @param {() => V[]} get_collection\n * @returns {EachItem}\n */\nfunction create_item(items, anchor, value, key, index, render_fn, flags, get_collection) {\n\tvar v =\n\t\t(flags & EACH_ITEM_REACTIVE) !== 0\n\t\t\t? (flags & EACH_ITEM_IMMUTABLE) === 0\n\t\t\t\t? mutable_source(value, false, false)\n\t\t\t\t: source(value)\n\t\t\t: null;\n\n\tvar i = (flags & EACH_INDEX_REACTIVE) !== 0 ? source(index) : null;\n\n\tif (DEV && v) {\n\t\t// For tracing purposes, we need to link the source signal we create with the\n\t\t// collection + index so that tracing works as intended\n\t\tv.trace = () => {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unused-expressions\n\t\t\tget_collection()[i?.v ?? index];\n\t\t};\n\t}\n\n\treturn {\n\t\tv,\n\t\ti,\n\t\te: branch(() => {\n\t\t\trender_fn(anchor, v ?? value, i ?? index, get_collection);\n\n\t\t\treturn () => {\n\t\t\t\titems.delete(key);\n\t\t\t};\n\t\t})\n\t};\n}\n\n/**\n * @param {Effect} effect\n * @param {Effect | null} next\n * @param {Text | Element | Comment} anchor\n */\nfunction move(effect, next, anchor) {\n\tif (!effect.nodes) return;\n\n\tvar node = effect.nodes.start;\n\tvar end = effect.nodes.end;\n\n\tvar dest =\n\t\tnext && (next.f & EFFECT_OFFSCREEN) === 0\n\t\t\t? /** @type {EffectNodes} */ (next.nodes).start\n\t\t\t: anchor;\n\n\twhile (node !== null) {\n\t\tvar next_node = /** @type {TemplateNode} */ (get_next_sibling(node));\n\t\tdest.before(node);\n\n\t\tif (node === end) {\n\t\t\treturn;\n\t\t}\n\n\t\tnode = next_node;\n\t}\n}\n\n/**\n * @param {EachState} state\n * @param {Effect | null} prev\n * @param {Effect | null} next\n */\nfunction link(state, prev, next) {\n\tif (prev === null) {\n\t\tstate.effect.first = next;\n\t} else {\n\t\tprev.next = next;\n\t}\n\n\tif (next === null) {\n\t\tstate.effect.last = prev;\n\t} else {\n\t\tnext.prev = prev;\n\t}\n}\n", "/** @import { Effect, TemplateNode } from '#client' */\nimport { FILENAME, HYDRATION_ERROR } from '../../../../constants.js';\nimport { remove_effect_dom, template_effect } from '../../reactivity/effects.js';\nimport { hydrate_next, hydrate_node, hydrating, set_hydrate_node } from '../hydration.js';\nimport { create_fragment_from_html } from '../reconciler.js';\nimport { assign_nodes } from '../template.js';\nimport * as w from '../../warnings.js';\nimport { hash, sanitize_location } from '../../../../utils.js';\nimport { DEV } from 'esm-env';\nimport { dev_current_component_function } from '../../context.js';\nimport { get_first_child, get_next_sibling } from '../operations.js';\nimport { active_effect } from '../../runtime.js';\nimport { COMMENT_NODE } from '#client/constants';\n\n/**\n * @param {Element} element\n * @param {string | null} server_hash\n * @param {string} value\n */\nfunction check_hash(element, server_hash, value) {\n\tif (!server_hash || server_hash === hash(String(value ?? ''))) return;\n\n\tlet location;\n\n\t// @ts-expect-error\n\tconst loc = element.__svelte_meta?.loc;\n\tif (loc) {\n\t\tlocation = `near ${loc.file}:${loc.line}:${loc.column}`;\n\t} else if (dev_current_component_function?.[FILENAME]) {\n\t\tlocation = `in ${dev_current_component_function[FILENAME]}`;\n\t}\n\n\tw.hydration_html_changed(sanitize_location(location));\n}\n\n/**\n * @param {Element | Text | Comment} node\n * @param {() => string} get_value\n * @param {boolean} [svg]\n * @param {boolean} [mathml]\n * @param {boolean} [skip_warning]\n * @returns {void}\n */\nexport function html(node, get_value, svg = false, mathml = false, skip_warning = false) {\n\tvar anchor = node;\n\n\tvar value = '';\n\n\ttemplate_effect(() => {\n\t\tvar effect = /** @type {Effect} */ (active_effect);\n\n\t\tif (value === (value = get_value() ?? '')) {\n\t\t\tif (hydrating) hydrate_next();\n\t\t\treturn;\n\t\t}\n\n\t\tif (effect.nodes !== null) {\n\t\t\tremove_effect_dom(effect.nodes.start, /** @type {TemplateNode} */ (effect.nodes.end));\n\t\t\teffect.nodes = null;\n\t\t}\n\n\t\tif (value === '') return;\n\n\t\tif (hydrating) {\n\t\t\t// We're deliberately not trying to repair mismatches between server and client,\n\t\t\t// as it's costly and error-prone (and it's an edge case to have a mismatch anyway)\n\t\t\tvar hash = /** @type {Comment} */ (hydrate_node).data;\n\n\t\t\t/** @type {TemplateNode | null} */\n\t\t\tvar next = hydrate_next();\n\t\t\tvar last = next;\n\n\t\t\twhile (\n\t\t\t\tnext !== null &&\n\t\t\t\t(next.nodeType !== COMMENT_NODE || /** @type {Comment} */ (next).data !== '')\n\t\t\t) {\n\t\t\t\tlast = next;\n\t\t\t\tnext = get_next_sibling(next);\n\t\t\t}\n\n\t\t\tif (next === null) {\n\t\t\t\tw.hydration_mismatch();\n\t\t\t\tthrow HYDRATION_ERROR;\n\t\t\t}\n\n\t\t\tif (DEV && !skip_warning) {\n\t\t\t\tcheck_hash(/** @type {Element} */ (next.parentNode), hash, value);\n\t\t\t}\n\n\t\t\tassign_nodes(hydrate_node, last);\n\t\t\tanchor = set_hydrate_node(next);\n\t\t\treturn;\n\t\t}\n\n\t\tvar html = value + '';\n\t\tif (svg) html = `<svg>${html}</svg>`;\n\t\telse if (mathml) html = `<math>${html}</math>`;\n\n\t\t// Don't use create_fragment_with_script_from_html here because that would mean script tags are executed.\n\t\t// @html is basically `.innerHTML = ...` and that doesn't execute scripts either due to security reasons.\n\t\t/** @type {DocumentFragment | Element} */\n\t\tvar node = create_fragment_from_html(html);\n\n\t\tif (svg || mathml) {\n\t\t\tnode = /** @type {Element} */ (get_first_child(node));\n\t\t}\n\n\t\tassign_nodes(\n\t\t\t/** @type {TemplateNode} */ (get_first_child(node)),\n\t\t\t/** @type {TemplateNode} */ (node.lastChild)\n\t\t);\n\n\t\tif (svg || mathml) {\n\t\t\twhile (get_first_child(node)) {\n\t\t\t\tanchor.before(/** @type {TemplateNode} */ (get_first_child(node)));\n\t\t\t}\n\t\t} else {\n\t\t\tanchor.before(node);\n\t\t}\n\t});\n}\n", "import { hydrate_next, hydrating } from '../hydration.js';\n\n/**\n * @param {Comment} anchor\n * @param {Record<string, any>} $$props\n * @param {string} name\n * @param {Record<string, unknown>} slot_props\n * @param {null | ((anchor: Comment) => void)} fallback_fn\n */\nexport function slot(anchor, $$props, name, slot_props, fallback_fn) {\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\tvar slot_fn = $$props.$$slots?.[name];\n\t// Interop: Can use snippets to fill slots\n\tvar is_interop = false;\n\tif (slot_fn === true) {\n\t\tslot_fn = $$props[name === 'default' ? 'children' : name];\n\t\tis_interop = true;\n\t}\n\n\tif (slot_fn === undefined) {\n\t\tif (fallback_fn !== null) {\n\t\t\tfallback_fn(anchor);\n\t\t}\n\t} else {\n\t\tslot_fn(anchor, is_interop ? () => slot_props : slot_props);\n\t}\n}\n\n/**\n * @param {Record<string, any>} props\n * @returns {Record<string, boolean>}\n */\nexport function sanitize_slots(props) {\n\t/** @type {Record<string, boolean>} */\n\tconst sanitized = {};\n\tif (props.children) sanitized.default = true;\n\tfor (const key in props.$$slots) {\n\t\tsanitized[key] = true;\n\t}\n\treturn sanitized;\n}\n", "/** @import { TemplateNode, Dom } from '#client' */\nimport { EFFECT_TRANSPARENT } from '#client/constants';\nimport { block } from '../../reactivity/effects.js';\nimport { hydrate_next, hydrating } from '../hydration.js';\nimport { BranchManager } from './branches.js';\n\n/**\n * @template P\n * @template {(props: P) => void} C\n * @param {TemplateNode} node\n * @param {() => C} get_component\n * @param {(anchor: TemplateNode, component: C) => Dom | void} render_fn\n * @returns {void}\n */\nexport function component(node, get_component, render_fn) {\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\tvar branches = new BranchManager(node);\n\n\tblock(() => {\n\t\tvar component = get_component() ?? null;\n\t\tbranches.ensure(component, component && ((target) => render_fn(target, component)));\n\t}, EFFECT_TRANSPARENT);\n}\n", "/** @import { Raf } from '#client' */\nimport { noop } from '../shared/utils.js';\n\nimport { BROWSER } from 'esm-env';\n\nconst now = BROWSER ? () => performance.now() : () => Date.now();\n\n/** @type {Raf} */\nexport const raf = {\n\t// don't access requestAnimationFrame eagerly outside method\n\t// this allows basic testing of user code without JSDOM\n\t// bunder will eval and remove ternary when the user's app is built\n\ttick: /** @param {any} _ */ (_) => (BROWSER ? requestAnimationFrame : noop)(_),\n\tnow: () => now(),\n\ttasks: new Set()\n};\n", "/** @import { TaskCallback, Task, TaskEntry } from '#client' */\nimport { raf } from './timing.js';\n\n// TODO move this into timing.js where it probably belongs\n\n/**\n * @returns {void}\n */\nfunction run_tasks() {\n\t// use `raf.now()` instead of the `requestAnimationFrame` callback argument, because\n\t// otherwise things can get wonky https://github.com/sveltejs/svelte/pull/14541\n\tconst now = raf.now();\n\n\traf.tasks.forEach((task) => {\n\t\tif (!task.c(now)) {\n\t\t\traf.tasks.delete(task);\n\t\t\ttask.f();\n\t\t}\n\t});\n\n\tif (raf.tasks.size !== 0) {\n\t\traf.tick(run_tasks);\n\t}\n}\n\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n * @param {TaskCallback} callback\n * @returns {Task}\n */\nexport function loop(callback) {\n\t/** @type {TaskEntry} */\n\tlet task;\n\n\tif (raf.tasks.size === 0) {\n\t\traf.tick(run_tasks);\n\t}\n\n\treturn {\n\t\tpromise: new Promise((fulfill) => {\n\t\t\traf.tasks.add((task = { c: callback, f: fulfill }));\n\t\t}),\n\t\tabort() {\n\t\t\traf.tasks.delete(task);\n\t\t}\n\t};\n}\n", "/** @import { AnimateFn, Animation, AnimationConfig, EachItem, Effect, EffectNodes, TransitionFn, TransitionManager } from '#client' */\nimport { noop, is_function } from '../../../shared/utils.js';\nimport { effect } from '../../reactivity/effects.js';\nimport { active_effect, untrack } from '../../runtime.js';\nimport { loop } from '../../loop.js';\nimport { should_intro } from '../../render.js';\nimport { TRANSITION_GLOBAL, TRANSITION_IN, TRANSITION_OUT } from '../../../../constants.js';\nimport { BLOCK_EFFECT, EFFECT_RAN, EFFECT_TRANSPARENT } from '#client/constants';\nimport { queue_micro_task } from '../task.js';\nimport { without_reactive_context } from './bindings/shared.js';\n\n/**\n * @param {Element} element\n * @param {'introstart' | 'introend' | 'outrostart' | 'outroend'} type\n * @returns {void}\n */\nfunction dispatch_event(element, type) {\n\twithout_reactive_context(() => {\n\t\telement.dispatchEvent(new CustomEvent(type));\n\t});\n}\n\n/**\n * Converts a property to the camel-case format expected by Element.animate(), KeyframeEffect(), and KeyframeEffect.setKeyframes().\n * @param {string} style\n * @returns {string}\n */\nfunction css_property_to_camelcase(style) {\n\t// in compliance with spec\n\tif (style === 'float') return 'cssFloat';\n\tif (style === 'offset') return 'cssOffset';\n\n\t// do not rename custom @properties\n\tif (style.startsWith('--')) return style;\n\n\tconst parts = style.split('-');\n\tif (parts.length === 1) return parts[0];\n\treturn (\n\t\tparts[0] +\n\t\tparts\n\t\t\t.slice(1)\n\t\t\t.map(/** @param {any} word */ (word) => word[0].toUpperCase() + word.slice(1))\n\t\t\t.join('')\n\t);\n}\n\n/**\n * @param {string} css\n * @returns {Keyframe}\n */\nfunction css_to_keyframe(css) {\n\t/** @type {Keyframe} */\n\tconst keyframe = {};\n\tconst parts = css.split(';');\n\tfor (const part of parts) {\n\t\tconst [property, value] = part.split(':');\n\t\tif (!property || value === undefined) break;\n\n\t\tconst formatted_property = css_property_to_camelcase(property.trim());\n\t\tkeyframe[formatted_property] = value.trim();\n\t}\n\treturn keyframe;\n}\n\n/** @param {number} t */\nconst linear = (t) => t;\n\n/** @type {Effect | null} */\nlet animation_effect_override = null;\n\n/** @param {Effect | null} v */\nexport function set_animation_effect_override(v) {\n\tanimation_effect_override = v;\n}\n\n/**\n * Called inside keyed `{#each ...}` blocks (as `$.animation(...)`). This creates an animation manager\n * and attaches it to the block, so that moves can be animated following reconciliation.\n * @template P\n * @param {Element} element\n * @param {() => AnimateFn<P | undefined>} get_fn\n * @param {(() => P) | null} get_params\n */\nexport function animation(element, get_fn, get_params) {\n\tvar effect = animation_effect_override ?? /** @type {Effect} */ (active_effect);\n\tvar nodes = /** @type {EffectNodes} */ (effect.nodes);\n\n\t/** @type {DOMRect} */\n\tvar from;\n\n\t/** @type {DOMRect} */\n\tvar to;\n\n\t/** @type {Animation | undefined} */\n\tvar animation;\n\n\t/** @type {null | { position: string, width: string, height: string, transform: string }} */\n\tvar original_styles = null;\n\n\tnodes.a ??= {\n\t\telement,\n\t\tmeasure() {\n\t\t\tfrom = this.element.getBoundingClientRect();\n\t\t},\n\t\tapply() {\n\t\t\tanimation?.abort();\n\n\t\t\tto = this.element.getBoundingClientRect();\n\n\t\t\tif (\n\t\t\t\tfrom.left !== to.left ||\n\t\t\t\tfrom.right !== to.right ||\n\t\t\t\tfrom.top !== to.top ||\n\t\t\t\tfrom.bottom !== to.bottom\n\t\t\t) {\n\t\t\t\tconst options = get_fn()(this.element, { from, to }, get_params?.());\n\n\t\t\t\tanimation = animate(this.element, options, undefined, 1, () => {\n\t\t\t\t\tanimation?.abort();\n\t\t\t\t\tanimation = undefined;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tfix() {\n\t\t\t// If an animation is already running, transforming the element is likely to fail,\n\t\t\t// because the styles applied by the animation take precedence. In the case of crossfade,\n\t\t\t// that means the `translate(...)` of the crossfade transition overrules the `translate(...)`\n\t\t\t// we would apply below, leading to the element jumping somewhere to the top left.\n\t\t\tif (element.getAnimations().length) return;\n\n\t\t\t// It's important to destructure these to get fixed values - the object itself has getters,\n\t\t\t// and changing the style to 'absolute' can for example influence the width.\n\t\t\tvar { position, width, height } = getComputedStyle(element);\n\n\t\t\tif (position !== 'absolute' && position !== 'fixed') {\n\t\t\t\tvar style = /** @type {HTMLElement | SVGElement} */ (element).style;\n\n\t\t\t\toriginal_styles = {\n\t\t\t\t\tposition: style.position,\n\t\t\t\t\twidth: style.width,\n\t\t\t\t\theight: style.height,\n\t\t\t\t\ttransform: style.transform\n\t\t\t\t};\n\n\t\t\t\tstyle.position = 'absolute';\n\t\t\t\tstyle.width = width;\n\t\t\t\tstyle.height = height;\n\t\t\t\tvar to = element.getBoundingClientRect();\n\n\t\t\t\tif (from.left !== to.left || from.top !== to.top) {\n\t\t\t\t\tvar transform = `translate(${from.left - to.left}px, ${from.top - to.top}px)`;\n\t\t\t\t\tstyle.transform = style.transform ? `${style.transform} ${transform}` : transform;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tunfix() {\n\t\t\tif (original_styles) {\n\t\t\t\tvar style = /** @type {HTMLElement | SVGElement} */ (element).style;\n\n\t\t\t\tstyle.position = original_styles.position;\n\t\t\t\tstyle.width = original_styles.width;\n\t\t\t\tstyle.height = original_styles.height;\n\t\t\t\tstyle.transform = original_styles.transform;\n\t\t\t}\n\t\t}\n\t};\n\n\t// in the case of a `<svelte:element>`, it's possible for `$.animation(...)` to be called\n\t// when an animation manager already exists, if the tag changes. in that case, we need to\n\t// swap out the element rather than creating a new manager, in case it happened at the same\n\t// moment as a reconciliation\n\tnodes.a.element = element;\n}\n\n/**\n * Called inside block effects as `$.transition(...)`. This creates a transition manager and\n * attaches it to the current effect \u2014 later, inside `pause_effect` and `resume_effect`, we\n * use this to create `intro` and `outro` transitions.\n * @template P\n * @param {number} flags\n * @param {HTMLElement} element\n * @param {() => TransitionFn<P | undefined>} get_fn\n * @param {(() => P) | null} get_params\n * @returns {void}\n */\nexport function transition(flags, element, get_fn, get_params) {\n\tvar is_intro = (flags & TRANSITION_IN) !== 0;\n\tvar is_outro = (flags & TRANSITION_OUT) !== 0;\n\tvar is_both = is_intro && is_outro;\n\tvar is_global = (flags & TRANSITION_GLOBAL) !== 0;\n\n\t/** @type {'in' | 'out' | 'both'} */\n\tvar direction = is_both ? 'both' : is_intro ? 'in' : 'out';\n\n\t/** @type {AnimationConfig | ((opts: { direction: 'in' | 'out' }) => AnimationConfig) | undefined} */\n\tvar current_options;\n\n\tvar inert = element.inert;\n\n\t/**\n\t * The default overflow style, stashed so we can revert changes during the transition\n\t * that are necessary to work around a Safari <18 bug\n\t * TODO 6.0 remove this, if older versions of Safari have died out enough\n\t */\n\tvar overflow = element.style.overflow;\n\n\t/** @type {Animation | undefined} */\n\tvar intro;\n\n\t/** @type {Animation | undefined} */\n\tvar outro;\n\n\tfunction get_options() {\n\t\treturn without_reactive_context(() => {\n\t\t\t// If a transition is still ongoing, we use the existing options rather than generating\n\t\t\t// new ones. This ensures that reversible transitions reverse smoothly, rather than\n\t\t\t// jumping to a new spot because (for example) a different `duration` was used\n\t\t\treturn (current_options ??= get_fn()(element, get_params?.() ?? /** @type {P} */ ({}), {\n\t\t\t\tdirection\n\t\t\t}));\n\t\t});\n\t}\n\n\t/** @type {TransitionManager} */\n\tvar transition = {\n\t\tis_global,\n\t\tin() {\n\t\t\telement.inert = inert;\n\n\t\t\tif (!is_intro) {\n\t\t\t\toutro?.abort();\n\t\t\t\toutro?.reset?.();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!is_outro) {\n\t\t\t\t// if we intro then outro then intro again, we want to abort the first intro,\n\t\t\t\t// if it's not a bidirectional transition\n\t\t\t\tintro?.abort();\n\t\t\t}\n\n\t\t\tdispatch_event(element, 'introstart');\n\n\t\t\tintro = animate(element, get_options(), outro, 1, () => {\n\t\t\t\tdispatch_event(element, 'introend');\n\n\t\t\t\t// Ensure we cancel the animation to prevent leaking\n\t\t\t\tintro?.abort();\n\t\t\t\tintro = current_options = undefined;\n\n\t\t\t\telement.style.overflow = overflow;\n\t\t\t});\n\t\t},\n\t\tout(fn) {\n\t\t\tif (!is_outro) {\n\t\t\t\tfn?.();\n\t\t\t\tcurrent_options = undefined;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\telement.inert = true;\n\n\t\t\tdispatch_event(element, 'outrostart');\n\n\t\t\toutro = animate(element, get_options(), intro, 0, () => {\n\t\t\t\tdispatch_event(element, 'outroend');\n\t\t\t\tfn?.();\n\t\t\t});\n\t\t},\n\t\tstop: () => {\n\t\t\tintro?.abort();\n\t\t\toutro?.abort();\n\t\t}\n\t};\n\n\tvar e = /** @type {Effect & { nodes: EffectNodes }} */ (active_effect);\n\n\t(e.nodes.t ??= []).push(transition);\n\n\t// if this is a local transition, we only want to run it if the parent (branch) effect's\n\t// parent (block) effect is where the state change happened. we can determine that by\n\t// looking at whether the block effect is currently initializing\n\tif (is_intro && should_intro) {\n\t\tvar run = is_global;\n\n\t\tif (!run) {\n\t\t\tvar block = /** @type {Effect | null} */ (e.parent);\n\n\t\t\t// skip over transparent blocks (e.g. snippets, else-if blocks)\n\t\t\twhile (block && (block.f & EFFECT_TRANSPARENT) !== 0) {\n\t\t\t\twhile ((block = block.parent)) {\n\t\t\t\t\tif ((block.f & BLOCK_EFFECT) !== 0) break;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trun = !block || (block.f & EFFECT_RAN) !== 0;\n\t\t}\n\n\t\tif (run) {\n\t\t\teffect(() => {\n\t\t\t\tuntrack(() => transition.in());\n\t\t\t});\n\t\t}\n\t}\n}\n\n/**\n * Animates an element, according to the provided configuration\n * @param {Element} element\n * @param {AnimationConfig | ((opts: { direction: 'in' | 'out' }) => AnimationConfig)} options\n * @param {Animation | undefined} counterpart The corresponding intro/outro to this outro/intro\n * @param {number} t2 The target `t` value \u2014 `1` for intro, `0` for outro\n * @param {(() => void)} on_finish Called after successfully completing the animation\n * @returns {Animation}\n */\nfunction animate(element, options, counterpart, t2, on_finish) {\n\tvar is_intro = t2 === 1;\n\n\tif (is_function(options)) {\n\t\t// In the case of a deferred transition (such as `crossfade`), `option` will be\n\t\t// a function rather than an `AnimationConfig`. We need to call this function\n\t\t// once the DOM has been updated...\n\t\t/** @type {Animation} */\n\t\tvar a;\n\t\tvar aborted = false;\n\n\t\tqueue_micro_task(() => {\n\t\t\tif (aborted) return;\n\t\t\tvar o = options({ direction: is_intro ? 'in' : 'out' });\n\t\t\ta = animate(element, o, counterpart, t2, on_finish);\n\t\t});\n\n\t\t// ...but we want to do so without using `async`/`await` everywhere, so\n\t\t// we return a facade that allows everything to remain synchronous\n\t\treturn {\n\t\t\tabort: () => {\n\t\t\t\taborted = true;\n\t\t\t\ta?.abort();\n\t\t\t},\n\t\t\tdeactivate: () => a.deactivate(),\n\t\t\treset: () => a.reset(),\n\t\t\tt: () => a.t()\n\t\t};\n\t}\n\n\tcounterpart?.deactivate();\n\n\tif (!options?.duration) {\n\t\ton_finish();\n\n\t\treturn {\n\t\t\tabort: noop,\n\t\t\tdeactivate: noop,\n\t\t\treset: noop,\n\t\t\tt: () => t2\n\t\t};\n\t}\n\n\tconst { delay = 0, css, tick, easing = linear } = options;\n\n\tvar keyframes = [];\n\n\tif (is_intro && counterpart === undefined) {\n\t\tif (tick) {\n\t\t\ttick(0, 1); // TODO put in nested effect, to avoid interleaved reads/writes?\n\t\t}\n\n\t\tif (css) {\n\t\t\tvar styles = css_to_keyframe(css(0, 1));\n\t\t\tkeyframes.push(styles, styles);\n\t\t}\n\t}\n\n\tvar get_t = () => 1 - t2;\n\n\t// create a dummy animation that lasts as long as the delay (but with whatever devtools\n\t// multiplier is in effect). in the common case that it is `0`, we keep it anyway so that\n\t// the CSS keyframes aren't created until the DOM is updated\n\t//\n\t// fill forwards to prevent the element from rendering without styles applied\n\t// see https://github.com/sveltejs/svelte/issues/14732\n\tvar animation = element.animate(keyframes, { duration: delay, fill: 'forwards' });\n\n\tanimation.onfinish = () => {\n\t\t// remove dummy animation from the stack to prevent conflict with main animation\n\t\tanimation.cancel();\n\n\t\t// for bidirectional transitions, we start from the current position,\n\t\t// rather than doing a full intro/outro\n\t\tvar t1 = counterpart?.t() ?? 1 - t2;\n\t\tcounterpart?.abort();\n\n\t\tvar delta = t2 - t1;\n\t\tvar duration = /** @type {number} */ (options.duration) * Math.abs(delta);\n\t\tvar keyframes = [];\n\n\t\tif (duration > 0) {\n\t\t\t/**\n\t\t\t * Whether or not the CSS includes `overflow: hidden`, in which case we need to\n\t\t\t * add it as an inline style to work around a Safari <18 bug\n\t\t\t * TODO 6.0 remove this, if possible\n\t\t\t */\n\t\t\tvar needs_overflow_hidden = false;\n\n\t\t\tif (css) {\n\t\t\t\tvar n = Math.ceil(duration / (1000 / 60)); // `n` must be an integer, or we risk missing the `t2` value\n\n\t\t\t\tfor (var i = 0; i <= n; i += 1) {\n\t\t\t\t\tvar t = t1 + delta * easing(i / n);\n\t\t\t\t\tvar styles = css_to_keyframe(css(t, 1 - t));\n\t\t\t\t\tkeyframes.push(styles);\n\n\t\t\t\t\tneeds_overflow_hidden ||= styles.overflow === 'hidden';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (needs_overflow_hidden) {\n\t\t\t\t/** @type {HTMLElement} */ (element).style.overflow = 'hidden';\n\t\t\t}\n\n\t\t\tget_t = () => {\n\t\t\t\tvar time = /** @type {number} */ (\n\t\t\t\t\t/** @type {globalThis.Animation} */ (animation).currentTime\n\t\t\t\t);\n\n\t\t\t\treturn t1 + delta * easing(time / duration);\n\t\t\t};\n\n\t\t\tif (tick) {\n\t\t\t\tloop(() => {\n\t\t\t\t\tif (animation.playState !== 'running') return false;\n\n\t\t\t\t\tvar t = get_t();\n\t\t\t\t\ttick(t, 1 - t);\n\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tanimation = element.animate(keyframes, { duration, fill: 'forwards' });\n\n\t\tanimation.onfinish = () => {\n\t\t\tget_t = () => t2;\n\t\t\ttick?.(t2, 1 - t2);\n\t\t\ton_finish();\n\t\t};\n\t};\n\n\treturn {\n\t\tabort: () => {\n\t\t\tif (animation) {\n\t\t\t\tanimation.cancel();\n\t\t\t\t// This prevents memory leaks in Chromium\n\t\t\t\tanimation.effect = null;\n\t\t\t\t// This prevents onfinish to be launched after cancel(),\n\t\t\t\t// which can happen in some rare cases\n\t\t\t\t// see https://github.com/sveltejs/svelte/issues/13681\n\t\t\t\tanimation.onfinish = noop;\n\t\t\t}\n\t\t},\n\t\tdeactivate: () => {\n\t\t\ton_finish = noop;\n\t\t},\n\t\treset: () => {\n\t\t\tif (t2 === 0) {\n\t\t\t\ttick?.(1, 0);\n\t\t\t}\n\t\t},\n\t\tt: () => get_t()\n\t};\n}\n", "/** @import { Effect, EffectNodes, TemplateNode } from '#client' */\nimport { FILENAME, NAMESPACE_SVG } from '../../../../constants.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tset_hydrate_node,\n\tset_hydrating\n} from '../hydration.js';\nimport { create_text, get_first_child } from '../operations.js';\nimport { block, teardown } from '../../reactivity/effects.js';\nimport { set_should_intro } from '../../render.js';\nimport { active_effect } from '../../runtime.js';\nimport { component_context, dev_stack } from '../../context.js';\nimport { DEV } from 'esm-env';\nimport { EFFECT_TRANSPARENT, ELEMENT_NODE } from '#client/constants';\nimport { assign_nodes } from '../template.js';\nimport { is_raw_text_element } from '../../../../utils.js';\nimport { BranchManager } from './branches.js';\nimport { set_animation_effect_override } from '../elements/transitions.js';\n\n/**\n * @param {Comment | Element} node\n * @param {() => string} get_tag\n * @param {boolean} is_svg\n * @param {undefined | ((element: Element, anchor: Node | null) => void)} render_fn,\n * @param {undefined | (() => string)} get_namespace\n * @param {undefined | [number, number]} location\n * @returns {void}\n */\nexport function element(node, get_tag, is_svg, render_fn, get_namespace, location) {\n\tlet was_hydrating = hydrating;\n\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\tvar filename = DEV && location && component_context?.function[FILENAME];\n\n\t/** @type {null | Element} */\n\tvar element = null;\n\n\tif (hydrating && hydrate_node.nodeType === ELEMENT_NODE) {\n\t\telement = /** @type {Element} */ (hydrate_node);\n\t\thydrate_next();\n\t}\n\n\tvar anchor = /** @type {TemplateNode} */ (hydrating ? hydrate_node : node);\n\n\t/**\n\t * We track this so we can set it when changing the element, allowing any\n\t * `animate:` directive to bind itself to the correct block\n\t */\n\tvar parent_effect = /** @type {Effect} */ (active_effect);\n\n\tvar branches = new BranchManager(anchor, false);\n\n\tblock(() => {\n\t\tconst next_tag = get_tag() || null;\n\t\tvar ns = get_namespace ? get_namespace() : is_svg || next_tag === 'svg' ? NAMESPACE_SVG : null;\n\n\t\tif (next_tag === null) {\n\t\t\tbranches.ensure(null, null);\n\t\t\tset_should_intro(true);\n\t\t\treturn;\n\t\t}\n\n\t\tbranches.ensure(next_tag, (anchor) => {\n\t\t\tif (next_tag) {\n\t\t\t\telement = hydrating\n\t\t\t\t\t? /** @type {Element} */ (element)\n\t\t\t\t\t: ns\n\t\t\t\t\t\t? document.createElementNS(ns, next_tag)\n\t\t\t\t\t\t: document.createElement(next_tag);\n\n\t\t\t\tif (DEV && location) {\n\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\telement.__svelte_meta = {\n\t\t\t\t\t\tparent: dev_stack,\n\t\t\t\t\t\tloc: {\n\t\t\t\t\t\t\tfile: filename,\n\t\t\t\t\t\t\tline: location[0],\n\t\t\t\t\t\t\tcolumn: location[1]\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tassign_nodes(element, element);\n\n\t\t\t\tif (render_fn) {\n\t\t\t\t\tif (hydrating && is_raw_text_element(next_tag)) {\n\t\t\t\t\t\t// prevent hydration glitches\n\t\t\t\t\t\telement.append(document.createComment(''));\n\t\t\t\t\t}\n\n\t\t\t\t\t// If hydrating, use the existing ssr comment as the anchor so that the\n\t\t\t\t\t// inner open and close methods can pick up the existing nodes correctly\n\t\t\t\t\tvar child_anchor = hydrating\n\t\t\t\t\t\t? get_first_child(element)\n\t\t\t\t\t\t: element.appendChild(create_text());\n\n\t\t\t\t\tif (hydrating) {\n\t\t\t\t\t\tif (child_anchor === null) {\n\t\t\t\t\t\t\tset_hydrating(false);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tset_hydrate_node(child_anchor);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tset_animation_effect_override(parent_effect);\n\n\t\t\t\t\t// `child_anchor` is undefined if this is a void element, but we still\n\t\t\t\t\t// need to call `render_fn` in order to run actions etc. If the element\n\t\t\t\t\t// contains children, it's a user error (which is warned on elsewhere)\n\t\t\t\t\t// and the DOM will be silently discarded\n\t\t\t\t\trender_fn(element, child_anchor);\n\n\t\t\t\t\tset_animation_effect_override(null);\n\t\t\t\t}\n\n\t\t\t\t// we do this after calling `render_fn` so that child effects don't override `nodes.end`\n\t\t\t\t/** @type {Effect & { nodes: EffectNodes }} */ (active_effect).nodes.end = element;\n\n\t\t\t\tanchor.before(element);\n\t\t\t}\n\n\t\t\tif (hydrating) {\n\t\t\t\tset_hydrate_node(anchor);\n\t\t\t}\n\t\t});\n\n\t\t// revert to the default state after the effect has been created\n\t\tset_should_intro(true);\n\n\t\treturn () => {\n\t\t\tif (next_tag) {\n\t\t\t\t// if we're in this callback because we're re-running the effect,\n\t\t\t\t// disable intros (unless no element is currently displayed)\n\t\t\t\tset_should_intro(false);\n\t\t\t}\n\t\t};\n\t}, EFFECT_TRANSPARENT);\n\n\tteardown(() => {\n\t\tset_should_intro(true);\n\t});\n\n\tif (was_hydrating) {\n\t\tset_hydrating(true);\n\t\tset_hydrate_node(anchor);\n\t}\n}\n", "/** @import { TemplateNode } from '#client' */\nimport { hydrate_node, hydrating, set_hydrate_node, set_hydrating } from '../hydration.js';\nimport { create_text, get_first_child, get_next_sibling } from '../operations.js';\nimport { block } from '../../reactivity/effects.js';\nimport { COMMENT_NODE, HEAD_EFFECT } from '#client/constants';\n\n/**\n * @param {string} hash\n * @param {(anchor: Node) => void} render_fn\n * @returns {void}\n */\nexport function head(hash, render_fn) {\n\t// The head function may be called after the first hydration pass and ssr comment nodes may still be present,\n\t// therefore we need to skip that when we detect that we're not in hydration mode.\n\tlet previous_hydrate_node = null;\n\tlet was_hydrating = hydrating;\n\n\t/** @type {Comment | Text} */\n\tvar anchor;\n\n\tif (hydrating) {\n\t\tprevious_hydrate_node = hydrate_node;\n\n\t\tvar head_anchor = get_first_child(document.head);\n\n\t\t// There might be multiple head blocks in our app, and they could have been\n\t\t// rendered in an arbitrary order \u2014 find one corresponding to this component\n\t\twhile (\n\t\t\thead_anchor !== null &&\n\t\t\t(head_anchor.nodeType !== COMMENT_NODE || /** @type {Comment} */ (head_anchor).data !== hash)\n\t\t) {\n\t\t\thead_anchor = get_next_sibling(head_anchor);\n\t\t}\n\n\t\t// If we can't find an opening hydration marker, skip hydration (this can happen\n\t\t// if a framework rendered body but not head content)\n\t\tif (head_anchor === null) {\n\t\t\tset_hydrating(false);\n\t\t} else {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_next_sibling(head_anchor));\n\t\t\thead_anchor.remove(); // in case this component is repeated\n\n\t\t\tset_hydrate_node(start);\n\t\t}\n\t}\n\n\tif (!hydrating) {\n\t\tanchor = document.head.appendChild(create_text());\n\t}\n\n\ttry {\n\t\tblock(() => render_fn(anchor), HEAD_EFFECT);\n\t} finally {\n\t\tif (was_hydrating) {\n\t\t\tset_hydrating(true);\n\t\t\tset_hydrate_node(/** @type {TemplateNode} */ (previous_hydrate_node));\n\t\t}\n\t}\n}\n", "import { DEV } from 'esm-env';\nimport { register_style } from '../dev/css.js';\nimport { effect } from '../reactivity/effects.js';\n\n/**\n * @param {Node} anchor\n * @param {{ hash: string, code: string }} css\n */\nexport function append_styles(anchor, css) {\n\t// Use `queue_micro_task` to ensure `anchor` is in the DOM, otherwise getRootNode() will yield wrong results\n\teffect(() => {\n\t\tvar root = anchor.getRootNode();\n\n\t\tvar target = /** @type {ShadowRoot} */ (root).host\n\t\t\t? /** @type {ShadowRoot} */ (root)\n\t\t\t: /** @type {Document} */ (root).head ?? /** @type {Document} */ (root.ownerDocument).head;\n\n\t\t// Always querying the DOM is roughly the same perf as additionally checking for presence in a map first assuming\n\t\t// that you'll get cache hits half of the time, so we just always query the dom for simplicity and code savings.\n\t\tif (!target.querySelector('#' + css.hash)) {\n\t\t\tconst style = document.createElement('style');\n\t\t\tstyle.id = css.hash;\n\t\t\tstyle.textContent = css.code;\n\n\t\t\ttarget.appendChild(style);\n\n\t\t\tif (DEV) {\n\t\t\t\tregister_style(css.hash, style);\n\t\t\t}\n\t\t}\n\t});\n}\n", "/** @import { ActionPayload } from '#client' */\nimport { effect, render_effect } from '../../reactivity/effects.js';\nimport { safe_not_equal } from '../../reactivity/equality.js';\nimport { deep_read_state, untrack } from '../../runtime.js';\n\n/**\n * @template P\n * @param {Element} dom\n * @param {(dom: Element, value?: P) => ActionPayload<P>} action\n * @param {() => P} [get_value]\n * @returns {void}\n */\nexport function action(dom, action, get_value) {\n\teffect(() => {\n\t\tvar payload = untrack(() => action(dom, get_value?.()) || {});\n\n\t\tif (get_value && payload?.update) {\n\t\t\tvar inited = false;\n\t\t\t/** @type {P} */\n\t\t\tvar prev = /** @type {any} */ ({}); // initialize with something so it's never equal on first run\n\n\t\t\trender_effect(() => {\n\t\t\t\tvar value = get_value();\n\n\t\t\t\t// Action's update method is coarse-grained, i.e. when anything in the passed value changes, update.\n\t\t\t\t// This works in legacy mode because of mutable_source being updated as a whole, but when using $state\n\t\t\t\t// together with actions and mutation, it wouldn't notice the change without a deep read.\n\t\t\t\tdeep_read_state(value);\n\n\t\t\t\tif (inited && safe_not_equal(prev, value)) {\n\t\t\t\t\tprev = value;\n\t\t\t\t\t/** @type {Function} */ (payload.update)(value);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tinited = true;\n\t\t}\n\n\t\tif (payload?.destroy) {\n\t\t\treturn () => /** @type {Function} */ (payload.destroy)();\n\t\t}\n\t});\n}\n", "/** @import { Effect } from '#client' */\nimport { branch, effect, destroy_effect, managed } from '../../reactivity/effects.js';\n\n// TODO in 6.0 or 7.0, when we remove legacy mode, we can simplify this by\n// getting rid of the block/branch stuff and just letting the effect rip.\n// see https://github.com/sveltejs/svelte/pull/15962\n\n/**\n * @param {Element} node\n * @param {() => (node: Element) => void} get_fn\n */\nexport function attach(node, get_fn) {\n\t/** @type {false | undefined | ((node: Element) => void)} */\n\tvar fn = undefined;\n\n\t/** @type {Effect | null} */\n\tvar e;\n\n\tmanaged(() => {\n\t\tif (fn !== (fn = get_fn())) {\n\t\t\tif (e) {\n\t\t\t\tdestroy_effect(e);\n\t\t\t\te = null;\n\t\t\t}\n\n\t\t\tif (fn) {\n\t\t\t\te = branch(() => {\n\t\t\t\t\teffect(() => /** @type {(node: Element) => void} */ (fn)(node));\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n}\n", "const ATTR_REGEX = /[&\"<]/g;\nconst CONTENT_REGEX = /[&<]/g;\n\n/**\n * @template V\n * @param {V} value\n * @param {boolean} [is_attr]\n */\nexport function escape_html(value, is_attr) {\n\tconst str = String(value ?? '');\n\n\tconst pattern = is_attr ? ATTR_REGEX : CONTENT_REGEX;\n\tpattern.lastIndex = 0;\n\n\tlet escaped = '';\n\tlet last = 0;\n\n\twhile (pattern.test(str)) {\n\t\tconst i = pattern.lastIndex - 1;\n\t\tconst ch = str[i];\n\t\tescaped += str.substring(last, i) + (ch === '&' ? '&amp;' : ch === '\"' ? '&quot;' : '&lt;');\n\t\tlast = i + 1;\n\t}\n\n\treturn escaped + str.substring(last);\n}\n", "function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;", "import { escape_html } from '../../escaping.js';\nimport { clsx as _clsx } from 'clsx';\n\n/**\n * `<div translate={false}>` should be rendered as `<div translate=\"no\">` and _not_\n * `<div translate=\"false\">`, which is equivalent to `<div translate=\"yes\">`. There\n * may be other odd cases that need to be added to this list in future\n * @type {Record<string, Map<any, string>>}\n */\nconst replacements = {\n\ttranslate: new Map([\n\t\t[true, 'yes'],\n\t\t[false, 'no']\n\t])\n};\n\n/**\n * @template V\n * @param {string} name\n * @param {V} value\n * @param {boolean} [is_boolean]\n * @returns {string}\n */\nexport function attr(name, value, is_boolean = false) {\n\t// attribute hidden for values other than \"until-found\" behaves like a boolean attribute\n\tif (name === 'hidden' && value !== 'until-found') {\n\t\tis_boolean = true;\n\t}\n\tif (value == null || (!value && is_boolean)) return '';\n\tconst normalized = (name in replacements && replacements[name].get(value)) || value;\n\tconst assignment = is_boolean ? '' : `=\"${escape_html(normalized, true)}\"`;\n\treturn ` ${name}${assignment}`;\n}\n\n/**\n * Small wrapper around clsx to preserve Svelte's (weird) handling of falsy values.\n * TODO Svelte 6 revisit this, and likely turn all falsy values into the empty string (what clsx also does)\n * @param  {any} value\n */\nexport function clsx(value) {\n\tif (typeof value === 'object') {\n\t\treturn _clsx(value);\n\t} else {\n\t\treturn value ?? '';\n\t}\n}\n\nconst whitespace = [...' \\t\\n\\r\\f\\u00a0\\u000b\\ufeff'];\n\n/**\n * @param {any} value\n * @param {string | null} [hash]\n * @param {Record<string, boolean>} [directives]\n * @returns {string | null}\n */\nexport function to_class(value, hash, directives) {\n\tvar classname = value == null ? '' : '' + value;\n\n\tif (hash) {\n\t\tclassname = classname ? classname + ' ' + hash : hash;\n\t}\n\n\tif (directives) {\n\t\tfor (var key in directives) {\n\t\t\tif (directives[key]) {\n\t\t\t\tclassname = classname ? classname + ' ' + key : key;\n\t\t\t} else if (classname.length) {\n\t\t\t\tvar len = key.length;\n\t\t\t\tvar a = 0;\n\n\t\t\t\twhile ((a = classname.indexOf(key, a)) >= 0) {\n\t\t\t\t\tvar b = a + len;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t(a === 0 || whitespace.includes(classname[a - 1])) &&\n\t\t\t\t\t\t(b === classname.length || whitespace.includes(classname[b]))\n\t\t\t\t\t) {\n\t\t\t\t\t\tclassname = (a === 0 ? '' : classname.substring(0, a)) + classname.substring(b + 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ta = b;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn classname === '' ? null : classname;\n}\n\n/**\n *\n * @param {Record<string,any>} styles\n * @param {boolean} important\n */\nfunction append_styles(styles, important = false) {\n\tvar separator = important ? ' !important;' : ';';\n\tvar css = '';\n\n\tfor (var key in styles) {\n\t\tvar value = styles[key];\n\t\tif (value != null && value !== '') {\n\t\t\tcss += ' ' + key + ': ' + value + separator;\n\t\t}\n\t}\n\n\treturn css;\n}\n\n/**\n * @param {string} name\n * @returns {string}\n */\nfunction to_css_name(name) {\n\tif (name[0] !== '-' || name[1] !== '-') {\n\t\treturn name.toLowerCase();\n\t}\n\treturn name;\n}\n\n/**\n * @param {any} value\n * @param {Record<string, any> | [Record<string, any>, Record<string, any>]} [styles]\n * @returns {string | null}\n */\nexport function to_style(value, styles) {\n\tif (styles) {\n\t\tvar new_style = '';\n\n\t\t/** @type {Record<string,any> | undefined} */\n\t\tvar normal_styles;\n\n\t\t/** @type {Record<string,any> | undefined} */\n\t\tvar important_styles;\n\n\t\tif (Array.isArray(styles)) {\n\t\t\tnormal_styles = styles[0];\n\t\t\timportant_styles = styles[1];\n\t\t} else {\n\t\t\tnormal_styles = styles;\n\t\t}\n\n\t\tif (value) {\n\t\t\tvalue = String(value)\n\t\t\t\t.replaceAll(/\\s*\\/\\*.*?\\*\\/\\s*/g, '')\n\t\t\t\t.trim();\n\n\t\t\t/** @type {boolean | '\"' | \"'\"} */\n\t\t\tvar in_str = false;\n\t\t\tvar in_apo = 0;\n\t\t\tvar in_comment = false;\n\n\t\t\tvar reserved_names = [];\n\n\t\t\tif (normal_styles) {\n\t\t\t\treserved_names.push(...Object.keys(normal_styles).map(to_css_name));\n\t\t\t}\n\t\t\tif (important_styles) {\n\t\t\t\treserved_names.push(...Object.keys(important_styles).map(to_css_name));\n\t\t\t}\n\n\t\t\tvar start_index = 0;\n\t\t\tvar name_index = -1;\n\n\t\t\tconst len = value.length;\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tvar c = value[i];\n\n\t\t\t\tif (in_comment) {\n\t\t\t\t\tif (c === '/' && value[i - 1] === '*') {\n\t\t\t\t\t\tin_comment = false;\n\t\t\t\t\t}\n\t\t\t\t} else if (in_str) {\n\t\t\t\t\tif (in_str === c) {\n\t\t\t\t\t\tin_str = false;\n\t\t\t\t\t}\n\t\t\t\t} else if (c === '/' && value[i + 1] === '*') {\n\t\t\t\t\tin_comment = true;\n\t\t\t\t} else if (c === '\"' || c === \"'\") {\n\t\t\t\t\tin_str = c;\n\t\t\t\t} else if (c === '(') {\n\t\t\t\t\tin_apo++;\n\t\t\t\t} else if (c === ')') {\n\t\t\t\t\tin_apo--;\n\t\t\t\t}\n\n\t\t\t\tif (!in_comment && in_str === false && in_apo === 0) {\n\t\t\t\t\tif (c === ':' && name_index === -1) {\n\t\t\t\t\t\tname_index = i;\n\t\t\t\t\t} else if (c === ';' || i === len - 1) {\n\t\t\t\t\t\tif (name_index !== -1) {\n\t\t\t\t\t\t\tvar name = to_css_name(value.substring(start_index, name_index).trim());\n\n\t\t\t\t\t\t\tif (!reserved_names.includes(name)) {\n\t\t\t\t\t\t\t\tif (c !== ';') {\n\t\t\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar property = value.substring(start_index, i).trim();\n\t\t\t\t\t\t\t\tnew_style += ' ' + property + ';';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart_index = i + 1;\n\t\t\t\t\t\tname_index = -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (normal_styles) {\n\t\t\tnew_style += append_styles(normal_styles);\n\t\t}\n\n\t\tif (important_styles) {\n\t\t\tnew_style += append_styles(important_styles, true);\n\t\t}\n\n\t\tnew_style = new_style.trim();\n\t\treturn new_style === '' ? null : new_style;\n\t}\n\n\treturn value == null ? null : String(value);\n}\n", "import { to_class } from '../../../shared/attributes.js';\nimport { hydrating } from '../hydration.js';\n\n/**\n * @param {Element} dom\n * @param {boolean | number} is_html\n * @param {string | null} value\n * @param {string} [hash]\n * @param {Record<string, any>} [prev_classes]\n * @param {Record<string, any>} [next_classes]\n * @returns {Record<string, boolean> | undefined}\n */\nexport function set_class(dom, is_html, value, hash, prev_classes, next_classes) {\n\t// @ts-expect-error need to add __className to patched prototype\n\tvar prev = dom.__className;\n\n\tif (\n\t\thydrating ||\n\t\tprev !== value ||\n\t\tprev === undefined // for edge case of `class={undefined}`\n\t) {\n\t\tvar next_class_name = to_class(value, hash, next_classes);\n\n\t\tif (!hydrating || next_class_name !== dom.getAttribute('class')) {\n\t\t\t// Removing the attribute when the value is only an empty string causes\n\t\t\t// performance issues vs simply making the className an empty string. So\n\t\t\t// we should only remove the class if the value is nullish\n\t\t\t// and there no hash/directives :\n\t\t\tif (next_class_name == null) {\n\t\t\t\tdom.removeAttribute('class');\n\t\t\t} else if (is_html) {\n\t\t\t\tdom.className = next_class_name;\n\t\t\t} else {\n\t\t\t\tdom.setAttribute('class', next_class_name);\n\t\t\t}\n\t\t}\n\n\t\t// @ts-expect-error need to add __className to patched prototype\n\t\tdom.__className = value;\n\t} else if (next_classes && prev_classes !== next_classes) {\n\t\tfor (var key in next_classes) {\n\t\t\tvar is_present = !!next_classes[key];\n\n\t\t\tif (prev_classes == null || is_present !== !!prev_classes[key]) {\n\t\t\t\tdom.classList.toggle(key, is_present);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn next_classes;\n}\n", "import { to_style } from '../../../shared/attributes.js';\nimport { hydrating } from '../hydration.js';\n\n/**\n * @param {Element & ElementCSSInlineStyle} dom\n * @param {Record<string, any>} prev\n * @param {Record<string, any>} next\n * @param {string} [priority]\n */\nfunction update_styles(dom, prev = {}, next, priority) {\n\tfor (var key in next) {\n\t\tvar value = next[key];\n\n\t\tif (prev[key] !== value) {\n\t\t\tif (next[key] == null) {\n\t\t\t\tdom.style.removeProperty(key);\n\t\t\t} else {\n\t\t\t\tdom.style.setProperty(key, value, priority);\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} dom\n * @param {string | null} value\n * @param {Record<string, any> | [Record<string, any>, Record<string, any>]} [prev_styles]\n * @param {Record<string, any> | [Record<string, any>, Record<string, any>]} [next_styles]\n */\nexport function set_style(dom, value, prev_styles, next_styles) {\n\t// @ts-expect-error\n\tvar prev = dom.__style;\n\n\tif (hydrating || prev !== value) {\n\t\tvar next_style_attr = to_style(value, next_styles);\n\n\t\tif (!hydrating || next_style_attr !== dom.getAttribute('style')) {\n\t\t\tif (next_style_attr == null) {\n\t\t\t\tdom.removeAttribute('style');\n\t\t\t} else {\n\t\t\t\tdom.style.cssText = next_style_attr;\n\t\t\t}\n\t\t}\n\n\t\t// @ts-expect-error\n\t\tdom.__style = value;\n\t} else if (next_styles) {\n\t\tif (Array.isArray(next_styles)) {\n\t\t\tupdate_styles(dom, prev_styles?.[0], next_styles[0]);\n\t\t\tupdate_styles(dom, prev_styles?.[1], next_styles[1], 'important');\n\t\t} else {\n\t\t\tupdate_styles(dom, prev_styles, next_styles);\n\t\t}\n\t}\n\n\treturn next_styles;\n}\n", "import { effect, teardown } from '../../../reactivity/effects.js';\nimport { listen_to_event_and_reset_event } from './shared.js';\nimport { is } from '../../../proxy.js';\nimport { is_array } from '../../../../shared/utils.js';\nimport * as w from '../../../warnings.js';\nimport { Batch, current_batch, previous_batch } from '../../../reactivity/batch.js';\n\n/**\n * Selects the correct option(s) (depending on whether this is a multiple select)\n * @template V\n * @param {HTMLSelectElement} select\n * @param {V} value\n * @param {boolean} mounting\n */\nexport function select_option(select, value, mounting = false) {\n\tif (select.multiple) {\n\t\t// If value is null or undefined, keep the selection as is\n\t\tif (value == undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If not an array, warn and keep the selection as is\n\t\tif (!is_array(value)) {\n\t\t\treturn w.select_multiple_invalid_value();\n\t\t}\n\n\t\t// Otherwise, update the selection\n\t\tfor (var option of select.options) {\n\t\t\toption.selected = value.includes(get_option_value(option));\n\t\t}\n\n\t\treturn;\n\t}\n\n\tfor (option of select.options) {\n\t\tvar option_value = get_option_value(option);\n\t\tif (is(option_value, value)) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (!mounting || value !== undefined) {\n\t\tselect.selectedIndex = -1; // no option should be selected\n\t}\n}\n\n/**\n * Selects the correct option(s) if `value` is given,\n * and then sets up a mutation observer to sync the\n * current selection to the dom when it changes. Such\n * changes could for example occur when options are\n * inside an `#each` block.\n * @param {HTMLSelectElement} select\n */\nexport function init_select(select) {\n\tvar observer = new MutationObserver(() => {\n\t\t// @ts-ignore\n\t\tselect_option(select, select.__value);\n\t\t// Deliberately don't update the potential binding value,\n\t\t// the model should be preserved unless explicitly changed\n\t});\n\n\tobserver.observe(select, {\n\t\t// Listen to option element changes\n\t\tchildList: true,\n\t\tsubtree: true, // because of <optgroup>\n\t\t// Listen to option element value attribute changes\n\t\t// (doesn't get notified of select value changes,\n\t\t// because that property is not reflected as an attribute)\n\t\tattributes: true,\n\t\tattributeFilter: ['value']\n\t});\n\n\tteardown(() => {\n\t\tobserver.disconnect();\n\t});\n}\n\n/**\n * @param {HTMLSelectElement} select\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_select_value(select, get, set = get) {\n\tvar batches = new WeakSet();\n\tvar mounting = true;\n\n\tlisten_to_event_and_reset_event(select, 'change', (is_reset) => {\n\t\tvar query = is_reset ? '[selected]' : ':checked';\n\t\t/** @type {unknown} */\n\t\tvar value;\n\n\t\tif (select.multiple) {\n\t\t\tvalue = [].map.call(select.querySelectorAll(query), get_option_value);\n\t\t} else {\n\t\t\t/** @type {HTMLOptionElement | null} */\n\t\t\tvar selected_option =\n\t\t\t\tselect.querySelector(query) ??\n\t\t\t\t// will fall back to first non-disabled option if no option is selected\n\t\t\t\tselect.querySelector('option:not([disabled])');\n\t\t\tvalue = selected_option && get_option_value(selected_option);\n\t\t}\n\n\t\tset(value);\n\n\t\tif (current_batch !== null) {\n\t\t\tbatches.add(current_batch);\n\t\t}\n\t});\n\n\t// Needs to be an effect, not a render_effect, so that in case of each loops the logic runs after the each block has updated\n\teffect(() => {\n\t\tvar value = get();\n\n\t\tif (select === document.activeElement) {\n\t\t\t// we need both, because in non-async mode, render effects run before previous_batch is set\n\t\t\tvar batch = /** @type {Batch} */ (previous_batch ?? current_batch);\n\n\t\t\t// Don't update the <select> if it is focused. We can get here if, for example,\n\t\t\t// an update is deferred because of async work depending on the select:\n\t\t\t//\n\t\t\t// <select bind:value={selected}>...</select>\n\t\t\t// <p>{await find(selected)}</p>\n\t\t\tif (batches.has(batch)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tselect_option(select, value, mounting);\n\n\t\t// Mounting and value undefined -> take selection from dom\n\t\tif (mounting && value === undefined) {\n\t\t\t/** @type {HTMLOptionElement | null} */\n\t\t\tvar selected_option = select.querySelector(':checked');\n\t\t\tif (selected_option !== null) {\n\t\t\t\tvalue = get_option_value(selected_option);\n\t\t\t\tset(value);\n\t\t\t}\n\t\t}\n\n\t\t// @ts-ignore\n\t\tselect.__value = value;\n\t\tmounting = false;\n\t});\n\n\tinit_select(select);\n}\n\n/** @param {HTMLOptionElement} option */\nfunction get_option_value(option) {\n\t// __value only exists if the <option> has a value attribute\n\tif ('__value' in option) {\n\t\treturn option.__value;\n\t} else {\n\t\treturn option.value;\n\t}\n}\n", "/** @import { Blocker, Effect } from '#client' */\nimport { DEV } from 'esm-env';\nimport { hydrating, set_hydrating } from '../hydration.js';\nimport { get_descriptors, get_prototype_of } from '../../../shared/utils.js';\nimport { create_event, delegate } from './events.js';\nimport { add_form_reset_listener, autofocus } from './misc.js';\nimport * as w from '../../warnings.js';\nimport { LOADING_ATTR_SYMBOL } from '#client/constants';\nimport { queue_micro_task } from '../task.js';\nimport { is_capture_event, can_delegate_event, normalize_attribute } from '../../../../utils.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tget,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../runtime.js';\nimport { attach } from './attachments.js';\nimport { clsx } from '../../../shared/attributes.js';\nimport { set_class } from './class.js';\nimport { set_style } from './style.js';\nimport { ATTACHMENT_KEY, NAMESPACE_HTML, UNINITIALIZED } from '../../../../constants.js';\nimport { branch, destroy_effect, effect, managed } from '../../reactivity/effects.js';\nimport { init_select, select_option } from './bindings/select.js';\nimport { flatten } from '../../reactivity/async.js';\n\nexport const CLASS = Symbol('class');\nexport const STYLE = Symbol('style');\n\nconst IS_CUSTOM_ELEMENT = Symbol('is custom element');\nconst IS_HTML = Symbol('is html');\n\n/**\n * The value/checked attribute in the template actually corresponds to the defaultValue property, so we need\n * to remove it upon hydration to avoid a bug when someone resets the form value.\n * @param {HTMLInputElement} input\n * @returns {void}\n */\nexport function remove_input_defaults(input) {\n\tif (!hydrating) return;\n\n\tvar already_removed = false;\n\n\t// We try and remove the default attributes later, rather than sync during hydration.\n\t// Doing it sync during hydration has a negative impact on performance, but deferring the\n\t// work in an idle task alleviates this greatly. If a form reset event comes in before\n\t// the idle callback, then we ensure the input defaults are cleared just before.\n\tvar remove_defaults = () => {\n\t\tif (already_removed) return;\n\t\talready_removed = true;\n\n\t\t// Remove the attributes but preserve the values\n\t\tif (input.hasAttribute('value')) {\n\t\t\tvar value = input.value;\n\t\t\tset_attribute(input, 'value', null);\n\t\t\tinput.value = value;\n\t\t}\n\n\t\tif (input.hasAttribute('checked')) {\n\t\t\tvar checked = input.checked;\n\t\t\tset_attribute(input, 'checked', null);\n\t\t\tinput.checked = checked;\n\t\t}\n\t};\n\n\t// @ts-expect-error\n\tinput.__on_r = remove_defaults;\n\tqueue_micro_task(remove_defaults);\n\tadd_form_reset_listener();\n}\n\n/**\n * @param {Element} element\n * @param {any} value\n */\nexport function set_value(element, value) {\n\tvar attributes = get_attributes(element);\n\n\tif (\n\t\tattributes.value ===\n\t\t\t(attributes.value =\n\t\t\t\t// treat null and undefined the same for the initial value\n\t\t\t\tvalue ?? undefined) ||\n\t\t// @ts-expect-error\n\t\t// `progress` elements always need their value set when it's `0`\n\t\t(element.value === value && (value !== 0 || element.nodeName !== 'PROGRESS'))\n\t) {\n\t\treturn;\n\t}\n\n\t// @ts-expect-error\n\telement.value = value ?? '';\n}\n\n/**\n * @param {Element} element\n * @param {boolean} checked\n */\nexport function set_checked(element, checked) {\n\tvar attributes = get_attributes(element);\n\n\tif (\n\t\tattributes.checked ===\n\t\t(attributes.checked =\n\t\t\t// treat null and undefined the same for the initial value\n\t\t\tchecked ?? undefined)\n\t) {\n\t\treturn;\n\t}\n\n\t// @ts-expect-error\n\telement.checked = checked;\n}\n\n/**\n * Sets the `selected` attribute on an `option` element.\n * Not set through the property because that doesn't reflect to the DOM,\n * which means it wouldn't be taken into account when a form is reset.\n * @param {HTMLOptionElement} element\n * @param {boolean} selected\n */\nexport function set_selected(element, selected) {\n\tif (selected) {\n\t\t// The selected option could've changed via user selection, and\n\t\t// setting the value without this check would set it back.\n\t\tif (!element.hasAttribute('selected')) {\n\t\t\telement.setAttribute('selected', '');\n\t\t}\n\t} else {\n\t\telement.removeAttribute('selected');\n\t}\n}\n\n/**\n * Applies the default checked property without influencing the current checked property.\n * @param {HTMLInputElement} element\n * @param {boolean} checked\n */\nexport function set_default_checked(element, checked) {\n\tconst existing_value = element.checked;\n\telement.defaultChecked = checked;\n\telement.checked = existing_value;\n}\n\n/**\n * Applies the default value property without influencing the current value property.\n * @param {HTMLInputElement | HTMLTextAreaElement} element\n * @param {string} value\n */\nexport function set_default_value(element, value) {\n\tconst existing_value = element.value;\n\telement.defaultValue = value;\n\telement.value = existing_value;\n}\n\n/**\n * @param {Element} element\n * @param {string} attribute\n * @param {string | null} value\n * @param {boolean} [skip_warning]\n */\nexport function set_attribute(element, attribute, value, skip_warning) {\n\tvar attributes = get_attributes(element);\n\n\tif (hydrating) {\n\t\tattributes[attribute] = element.getAttribute(attribute);\n\n\t\tif (\n\t\t\tattribute === 'src' ||\n\t\t\tattribute === 'srcset' ||\n\t\t\t(attribute === 'href' && element.nodeName === 'LINK')\n\t\t) {\n\t\t\tif (!skip_warning) {\n\t\t\t\tcheck_src_in_dev_hydration(element, attribute, value ?? '');\n\t\t\t}\n\n\t\t\t// If we reset these attributes, they would result in another network request, which we want to avoid.\n\t\t\t// We assume they are the same between client and server as checking if they are equal is expensive\n\t\t\t// (we can't just compare the strings as they can be different between client and server but result in the\n\t\t\t// same url, so we would need to create hidden anchor elements to compare them)\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (attributes[attribute] === (attributes[attribute] = value)) return;\n\n\tif (attribute === 'loading') {\n\t\t// @ts-expect-error\n\t\telement[LOADING_ATTR_SYMBOL] = value;\n\t}\n\n\tif (value == null) {\n\t\telement.removeAttribute(attribute);\n\t} else if (typeof value !== 'string' && get_setters(element).includes(attribute)) {\n\t\t// @ts-ignore\n\t\telement[attribute] = value;\n\t} else {\n\t\telement.setAttribute(attribute, value);\n\t}\n}\n\n/**\n * @param {Element} dom\n * @param {string} attribute\n * @param {string} value\n */\nexport function set_xlink_attribute(dom, attribute, value) {\n\tdom.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @param {string} prop\n * @param {any} value\n */\nexport function set_custom_element_data(node, prop, value) {\n\t// We need to ensure that setting custom element props, which can\n\t// invoke lifecycle methods on other custom elements, does not also\n\t// associate those lifecycle methods with the current active reaction\n\t// or effect\n\tvar previous_reaction = active_reaction;\n\tvar previous_effect = active_effect;\n\n\t// If we're hydrating but the custom element is from Svelte, and it already scaffolded,\n\t// then it might run block logic in hydration mode, which we have to prevent.\n\tlet was_hydrating = hydrating;\n\tif (hydrating) {\n\t\tset_hydrating(false);\n\t}\n\n\tset_active_reaction(null);\n\tset_active_effect(null);\n\n\ttry {\n\t\tif (\n\t\t\t// `style` should use `set_attribute` rather than the setter\n\t\t\tprop !== 'style' &&\n\t\t\t// Don't compute setters for custom elements while they aren't registered yet,\n\t\t\t// because during their upgrade/instantiation they might add more setters.\n\t\t\t// Instead, fall back to a simple \"an object, then set as property\" heuristic.\n\t\t\t(setters_cache.has(node.getAttribute('is') || node.nodeName) ||\n\t\t\t// customElements may not be available in browser extension contexts\n\t\t\t!customElements ||\n\t\t\tcustomElements.get(node.getAttribute('is') || node.tagName.toLowerCase())\n\t\t\t\t? get_setters(node).includes(prop)\n\t\t\t\t: value && typeof value === 'object')\n\t\t) {\n\t\t\t// @ts-expect-error\n\t\t\tnode[prop] = value;\n\t\t} else {\n\t\t\t// We did getters etc checks already, stringify before passing to set_attribute\n\t\t\t// to ensure it doesn't invoke the same logic again, and potentially populating\n\t\t\t// the setters cache too early.\n\t\t\tset_attribute(node, prop, value == null ? value : String(value));\n\t\t}\n\t} finally {\n\t\tset_active_reaction(previous_reaction);\n\t\tset_active_effect(previous_effect);\n\t\tif (was_hydrating) {\n\t\t\tset_hydrating(true);\n\t\t}\n\t}\n}\n\n/**\n * Spreads attributes onto a DOM element, taking into account the currently set attributes\n * @param {Element & ElementCSSInlineStyle} element\n * @param {Record<string | symbol, any> | undefined} prev\n * @param {Record<string | symbol, any>} next New attributes - this function mutates this object\n * @param {string} [css_hash]\n * @param {boolean} [should_remove_defaults]\n * @param {boolean} [skip_warning]\n * @returns {Record<string, any>}\n */\nfunction set_attributes(\n\telement,\n\tprev,\n\tnext,\n\tcss_hash,\n\tshould_remove_defaults = false,\n\tskip_warning = false\n) {\n\tif (hydrating && should_remove_defaults && element.tagName === 'INPUT') {\n\t\tvar input = /** @type {HTMLInputElement} */ (element);\n\t\tvar attribute = input.type === 'checkbox' ? 'defaultChecked' : 'defaultValue';\n\n\t\tif (!(attribute in next)) {\n\t\t\tremove_input_defaults(input);\n\t\t}\n\t}\n\n\tvar attributes = get_attributes(element);\n\n\tvar is_custom_element = attributes[IS_CUSTOM_ELEMENT];\n\tvar preserve_attribute_case = !attributes[IS_HTML];\n\n\t// If we're hydrating but the custom element is from Svelte, and it already scaffolded,\n\t// then it might run block logic in hydration mode, which we have to prevent.\n\tlet is_hydrating_custom_element = hydrating && is_custom_element;\n\tif (is_hydrating_custom_element) {\n\t\tset_hydrating(false);\n\t}\n\n\tvar current = prev || {};\n\tvar is_option_element = element.tagName === 'OPTION';\n\n\tfor (var key in prev) {\n\t\tif (!(key in next)) {\n\t\t\tnext[key] = null;\n\t\t}\n\t}\n\n\tif (next.class) {\n\t\tnext.class = clsx(next.class);\n\t} else if (css_hash || next[CLASS]) {\n\t\tnext.class = null; /* force call to set_class() */\n\t}\n\n\tif (next[STYLE]) {\n\t\tnext.style ??= null; /* force call to set_style() */\n\t}\n\n\tvar setters = get_setters(element);\n\n\t// since key is captured we use const\n\tfor (const key in next) {\n\t\t// let instead of var because referenced in a closure\n\t\tlet value = next[key];\n\n\t\t// Up here because we want to do this for the initial value, too, even if it's undefined,\n\t\t// and this wouldn't be reached in case of undefined because of the equality check below\n\t\tif (is_option_element && key === 'value' && value == null) {\n\t\t\t// The <option> element is a special case because removing the value attribute means\n\t\t\t// the value is set to the text content of the option element, and setting the value\n\t\t\t// to null or undefined means the value is set to the string \"null\" or \"undefined\".\n\t\t\t// To align with how we handle this case in non-spread-scenarios, this logic is needed.\n\t\t\t// There's a super-edge-case bug here that is left in in favor of smaller code size:\n\t\t\t// Because of the \"set missing props to null\" logic above, we can't differentiate\n\t\t\t// between a missing value and an explicitly set value of null or undefined. That means\n\t\t\t// that once set, the value attribute of an <option> element can't be removed. This is\n\t\t\t// a very rare edge case, and removing the attribute altogether isn't possible either\n\t\t\t// for the <option value={undefined}> case, so we're not losing any functionality here.\n\t\t\t// @ts-ignore\n\t\t\telement.value = element.__value = '';\n\t\t\tcurrent[key] = value;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (key === 'class') {\n\t\t\tvar is_html = element.namespaceURI === 'http://www.w3.org/1999/xhtml';\n\t\t\tset_class(element, is_html, value, css_hash, prev?.[CLASS], next[CLASS]);\n\t\t\tcurrent[key] = value;\n\t\t\tcurrent[CLASS] = next[CLASS];\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (key === 'style') {\n\t\t\tset_style(element, value, prev?.[STYLE], next[STYLE]);\n\t\t\tcurrent[key] = value;\n\t\t\tcurrent[STYLE] = next[STYLE];\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar prev_value = current[key];\n\n\t\t// Skip if value is unchanged, unless it's `undefined` and the element still has the attribute\n\t\tif (value === prev_value && !(value === undefined && element.hasAttribute(key))) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tcurrent[key] = value;\n\n\t\tvar prefix = key[0] + key[1]; // this is faster than key.slice(0, 2)\n\t\tif (prefix === '$$') continue;\n\n\t\tif (prefix === 'on') {\n\t\t\t/** @type {{ capture?: true }} */\n\t\t\tconst opts = {};\n\t\t\tconst event_handle_key = '$$' + key;\n\t\t\tlet event_name = key.slice(2);\n\t\t\tvar delegated = can_delegate_event(event_name);\n\n\t\t\tif (is_capture_event(event_name)) {\n\t\t\t\tevent_name = event_name.slice(0, -7);\n\t\t\t\topts.capture = true;\n\t\t\t}\n\n\t\t\tif (!delegated && prev_value) {\n\t\t\t\t// Listening to same event but different handler -> our handle function below takes care of this\n\t\t\t\t// If we were to remove and add listeners in this case, it could happen that the event is \"swallowed\"\n\t\t\t\t// (the browser seems to not know yet that a new one exists now) and doesn't reach the handler\n\t\t\t\t// https://github.com/sveltejs/svelte/issues/11903\n\t\t\t\tif (value != null) continue;\n\n\t\t\t\telement.removeEventListener(event_name, current[event_handle_key], opts);\n\t\t\t\tcurrent[event_handle_key] = null;\n\t\t\t}\n\n\t\t\tif (value != null) {\n\t\t\t\tif (!delegated) {\n\t\t\t\t\t/**\n\t\t\t\t\t * @this {any}\n\t\t\t\t\t * @param {Event} evt\n\t\t\t\t\t */\n\t\t\t\t\tfunction handle(evt) {\n\t\t\t\t\t\tcurrent[key].call(this, evt);\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrent[event_handle_key] = create_event(event_name, element, handle, opts);\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\telement[`__${event_name}`] = value;\n\t\t\t\t\tdelegate([event_name]);\n\t\t\t\t}\n\t\t\t} else if (delegated) {\n\t\t\t\t// @ts-ignore\n\t\t\t\telement[`__${event_name}`] = undefined;\n\t\t\t}\n\t\t} else if (key === 'style') {\n\t\t\t// avoid using the setter\n\t\t\tset_attribute(element, key, value);\n\t\t} else if (key === 'autofocus') {\n\t\t\tautofocus(/** @type {HTMLElement} */ (element), Boolean(value));\n\t\t} else if (!is_custom_element && (key === '__value' || (key === 'value' && value != null))) {\n\t\t\t// @ts-ignore We're not running this for custom elements because __value is actually\n\t\t\t// how Lit stores the current value on the element, and messing with that would break things.\n\t\t\telement.value = element.__value = value;\n\t\t} else if (key === 'selected' && is_option_element) {\n\t\t\tset_selected(/** @type {HTMLOptionElement} */ (element), value);\n\t\t} else {\n\t\t\tvar name = key;\n\t\t\tif (!preserve_attribute_case) {\n\t\t\t\tname = normalize_attribute(name);\n\t\t\t}\n\n\t\t\tvar is_default = name === 'defaultValue' || name === 'defaultChecked';\n\n\t\t\tif (value == null && !is_custom_element && !is_default) {\n\t\t\t\tattributes[key] = null;\n\n\t\t\t\tif (name === 'value' || name === 'checked') {\n\t\t\t\t\t// removing value/checked also removes defaultValue/defaultChecked \u2014 preserve\n\t\t\t\t\tlet input = /** @type {HTMLInputElement} */ (element);\n\t\t\t\t\tconst use_default = prev === undefined;\n\t\t\t\t\tif (name === 'value') {\n\t\t\t\t\t\tlet previous = input.defaultValue;\n\t\t\t\t\t\tinput.removeAttribute(name);\n\t\t\t\t\t\tinput.defaultValue = previous;\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tinput.value = input.__value = use_default ? previous : null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet previous = input.defaultChecked;\n\t\t\t\t\t\tinput.removeAttribute(name);\n\t\t\t\t\t\tinput.defaultChecked = previous;\n\t\t\t\t\t\tinput.checked = use_default ? previous : false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\telement.removeAttribute(key);\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tis_default ||\n\t\t\t\t(setters.includes(name) && (is_custom_element || typeof value !== 'string'))\n\t\t\t) {\n\t\t\t\t// @ts-ignore\n\t\t\t\telement[name] = value;\n\t\t\t\t// remove it from attributes's cache\n\t\t\t\tif (name in attributes) attributes[name] = UNINITIALIZED;\n\t\t\t} else if (typeof value !== 'function') {\n\t\t\t\tset_attribute(element, name, value, skip_warning);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (is_hydrating_custom_element) {\n\t\tset_hydrating(true);\n\t}\n\n\treturn current;\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} element\n * @param {(...expressions: any) => Record<string | symbol, any>} fn\n * @param {Array<() => any>} sync\n * @param {Array<() => Promise<any>>} async\n * @param {Blocker[]} blockers\n * @param {string} [css_hash]\n * @param {boolean} [should_remove_defaults]\n * @param {boolean} [skip_warning]\n */\nexport function attribute_effect(\n\telement,\n\tfn,\n\tsync = [],\n\tasync = [],\n\tblockers = [],\n\tcss_hash,\n\tshould_remove_defaults = false,\n\tskip_warning = false\n) {\n\tflatten(blockers, sync, async, (values) => {\n\t\t/** @type {Record<string | symbol, any> | undefined} */\n\t\tvar prev = undefined;\n\n\t\t/** @type {Record<symbol, Effect>} */\n\t\tvar effects = {};\n\n\t\tvar is_select = element.nodeName === 'SELECT';\n\t\tvar inited = false;\n\n\t\tmanaged(() => {\n\t\t\tvar next = fn(...values.map(get));\n\t\t\t/** @type {Record<string | symbol, any>} */\n\t\t\tvar current = set_attributes(\n\t\t\t\telement,\n\t\t\t\tprev,\n\t\t\t\tnext,\n\t\t\t\tcss_hash,\n\t\t\t\tshould_remove_defaults,\n\t\t\t\tskip_warning\n\t\t\t);\n\n\t\t\tif (inited && is_select && 'value' in next) {\n\t\t\t\tselect_option(/** @type {HTMLSelectElement} */ (element), next.value);\n\t\t\t}\n\n\t\t\tfor (let symbol of Object.getOwnPropertySymbols(effects)) {\n\t\t\t\tif (!next[symbol]) destroy_effect(effects[symbol]);\n\t\t\t}\n\n\t\t\tfor (let symbol of Object.getOwnPropertySymbols(next)) {\n\t\t\t\tvar n = next[symbol];\n\n\t\t\t\tif (symbol.description === ATTACHMENT_KEY && (!prev || n !== prev[symbol])) {\n\t\t\t\t\tif (effects[symbol]) destroy_effect(effects[symbol]);\n\t\t\t\t\teffects[symbol] = branch(() => attach(element, () => n));\n\t\t\t\t}\n\n\t\t\t\tcurrent[symbol] = n;\n\t\t\t}\n\n\t\t\tprev = current;\n\t\t});\n\n\t\tif (is_select) {\n\t\t\tvar select = /** @type {HTMLSelectElement} */ (element);\n\n\t\t\teffect(() => {\n\t\t\t\tselect_option(select, /** @type {Record<string | symbol, any>} */ (prev).value, true);\n\t\t\t\tinit_select(select);\n\t\t\t});\n\t\t}\n\n\t\tinited = true;\n\t});\n}\n\n/**\n *\n * @param {Element} element\n */\nfunction get_attributes(element) {\n\treturn /** @type {Record<string | symbol, unknown>} **/ (\n\t\t// @ts-expect-error\n\t\telement.__attributes ??= {\n\t\t\t[IS_CUSTOM_ELEMENT]: element.nodeName.includes('-'),\n\t\t\t[IS_HTML]: element.namespaceURI === NAMESPACE_HTML\n\t\t}\n\t);\n}\n\n/** @type {Map<string, string[]>} */\nvar setters_cache = new Map();\n\n/** @param {Element} element */\nfunction get_setters(element) {\n\tvar cache_key = element.getAttribute('is') || element.nodeName;\n\tvar setters = setters_cache.get(cache_key);\n\tif (setters) return setters;\n\tsetters_cache.set(cache_key, (setters = []));\n\n\tvar descriptors;\n\tvar proto = element; // In the case of custom elements there might be setters on the instance\n\tvar element_proto = Element.prototype;\n\n\t// Stop at Element, from there on there's only unnecessary setters we're not interested in\n\t// Do not use contructor.name here as that's unreliable in some browser environments\n\twhile (element_proto !== proto) {\n\t\tdescriptors = get_descriptors(proto);\n\n\t\tfor (var key in descriptors) {\n\t\t\tif (descriptors[key].set) {\n\t\t\t\tsetters.push(key);\n\t\t\t}\n\t\t}\n\n\t\tproto = get_prototype_of(proto);\n\t}\n\n\treturn setters;\n}\n\n/**\n * @param {any} element\n * @param {string} attribute\n * @param {string} value\n */\nfunction check_src_in_dev_hydration(element, attribute, value) {\n\tif (!DEV) return;\n\tif (attribute === 'srcset' && srcset_url_equal(element, value)) return;\n\tif (src_url_equal(element.getAttribute(attribute) ?? '', value)) return;\n\n\tw.hydration_attribute_changed(\n\t\tattribute,\n\t\telement.outerHTML.replace(element.innerHTML, element.innerHTML && '...'),\n\t\tString(value)\n\t);\n}\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nfunction src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\treturn new URL(element_src, document.baseURI).href === new URL(url, document.baseURI).href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element\n * @param {string} srcset\n * @returns {boolean}\n */\nfunction srcset_url_equal(element, srcset) {\n\tvar element_urls = split_srcset(element.srcset);\n\tvar urls = split_srcset(srcset);\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n", "import { hydrating, reset, set_hydrate_node, set_hydrating } from '../hydration.js';\nimport { create_comment } from '../operations.js';\nimport { attach } from './attachments.js';\n\n/** @type {boolean | null} */\nlet supported = null;\n\n/**\n * Checks if the browser supports rich HTML content inside `<option>` elements.\n * Modern browsers preserve HTML elements inside options, while older browsers\n * strip them during parsing, leaving only text content.\n * @returns {boolean}\n */\nfunction is_supported() {\n\tif (supported === null) {\n\t\tvar select = document.createElement('select');\n\t\tselect.innerHTML = '<option><span>t</span></option>';\n\t\tsupported = /** @type {Element} */ (select.firstChild)?.firstChild?.nodeType === 1;\n\t}\n\n\treturn supported;\n}\n\n/**\n *\n * @param {HTMLElement} element\n * @param {(new_element: HTMLElement) => void} update_element\n */\nexport function selectedcontent(element, update_element) {\n\t// if it's not supported no need for special logic\n\tif (!is_supported()) return;\n\n\t// we use the attach function directly just to make sure is executed when is mounted to the dom\n\tattach(element, () => () => {\n\t\tconst select = element.closest('select');\n\t\tif (!select) return;\n\n\t\tconst observer = new MutationObserver((entries) => {\n\t\t\tvar selected = false;\n\n\t\t\tfor (const entry of entries) {\n\t\t\t\tif (entry.target === element) {\n\t\t\t\t\t// the `<selectedcontent>` already changed, no need to replace it\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// if the changes doesn't include the selected `<option>` we don't need to do anything\n\t\t\t\tselected ||= !!entry.target.parentElement?.closest('option')?.selected;\n\t\t\t}\n\n\t\t\tif (selected) {\n\t\t\t\t// replace the `<selectedcontent>` with a clone\n\t\t\t\telement.replaceWith((element = /** @type {HTMLElement} */ (element.cloneNode(true))));\n\t\t\t\tupdate_element(element);\n\t\t\t}\n\t\t});\n\n\t\tobserver.observe(select, {\n\t\t\tchildList: true,\n\t\t\tcharacterData: true,\n\t\t\tsubtree: true\n\t\t});\n\n\t\treturn () => {\n\t\t\tobserver.disconnect();\n\t\t};\n\t});\n}\n\n/**\n * Handles rich HTML content inside `<option>`, `<optgroup>`, or `<select>` elements with browser-specific branching.\n * Modern browsers preserve HTML inside options, while older browsers strip it to text only.\n *\n * @param {HTMLOptionElement | HTMLOptGroupElement | HTMLSelectElement} element The element to process\n * @param {() => void} rich_fn Function to process rich HTML content (modern browsers)\n */\nexport function customizable_select(element, rich_fn) {\n\tvar was_hydrating = hydrating;\n\n\tif (!is_supported()) {\n\t\tset_hydrating(false);\n\t\telement.textContent = '';\n\t\telement.append(create_comment(''));\n\t}\n\n\ttry {\n\t\trich_fn();\n\t} finally {\n\t\tif (was_hydrating) {\n\t\t\tif (hydrating) {\n\t\t\t\treset(element);\n\t\t\t} else {\n\t\t\t\tset_hydrating(true);\n\t\t\t\tset_hydrate_node(element);\n\t\t\t}\n\t\t}\n\t}\n}\n", "import { listen } from './shared.js';\n\n/**\n * @param {(activeElement: Element | null) => void} update\n * @returns {void}\n */\nexport function bind_active_element(update) {\n\tlisten(document, ['focusin', 'focusout'], (event) => {\n\t\tif (event && event.type === 'focusout' && /** @type {FocusEvent} */ (event).relatedTarget) {\n\t\t\t// The tests still pass if we remove this, because of JSDOM limitations, but it is necessary\n\t\t\t// to avoid temporarily resetting to `document.body`\n\t\t\treturn;\n\t\t}\n\n\t\tupdate(document.activeElement);\n\t});\n}\n", "/** @import { Batch } from '../../../reactivity/batch.js' */\nimport { DEV } from 'esm-env';\nimport { render_effect, teardown } from '../../../reactivity/effects.js';\nimport { listen_to_event_and_reset_event } from './shared.js';\nimport * as e from '../../../errors.js';\nimport { is } from '../../../proxy.js';\nimport { queue_micro_task } from '../../task.js';\nimport { hydrating } from '../../hydration.js';\nimport { tick, untrack } from '../../../runtime.js';\nimport { is_runes } from '../../../context.js';\nimport { current_batch, previous_batch } from '../../../reactivity/batch.js';\n\n/**\n * @param {HTMLInputElement} input\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_value(input, get, set = get) {\n\tvar batches = new WeakSet();\n\n\tlisten_to_event_and_reset_event(input, 'input', async (is_reset) => {\n\t\tif (DEV && input.type === 'checkbox') {\n\t\t\t// TODO should this happen in prod too?\n\t\t\te.bind_invalid_checkbox_value();\n\t\t}\n\n\t\t/** @type {any} */\n\t\tvar value = is_reset ? input.defaultValue : input.value;\n\t\tvalue = is_numberlike_input(input) ? to_number(value) : value;\n\t\tset(value);\n\n\t\tif (current_batch !== null) {\n\t\t\tbatches.add(current_batch);\n\t\t}\n\n\t\t// Because `{#each ...}` blocks work by updating sources inside the flush,\n\t\t// we need to wait a tick before checking to see if we should forcibly\n\t\t// update the input and reset the selection state\n\t\tawait tick();\n\n\t\t// Respect any validation in accessors\n\t\tif (value !== (value = get())) {\n\t\t\tvar start = input.selectionStart;\n\t\t\tvar end = input.selectionEnd;\n\t\t\tvar length = input.value.length;\n\n\t\t\t// the value is coerced on assignment\n\t\t\tinput.value = value ?? '';\n\n\t\t\t// Restore selection\n\t\t\tif (end !== null) {\n\t\t\t\tvar new_length = input.value.length;\n\t\t\t\t// If cursor was at end and new input is longer, move cursor to new end\n\t\t\t\tif (start === end && end === length && new_length > length) {\n\t\t\t\t\tinput.selectionStart = new_length;\n\t\t\t\t\tinput.selectionEnd = new_length;\n\t\t\t\t} else {\n\t\t\t\t\tinput.selectionStart = start;\n\t\t\t\t\tinput.selectionEnd = Math.min(end, new_length);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tif (\n\t\t// If we are hydrating and the value has since changed,\n\t\t// then use the updated value from the input instead.\n\t\t(hydrating && input.defaultValue !== input.value) ||\n\t\t// If defaultValue is set, then value == defaultValue\n\t\t// TODO Svelte 6: remove input.value check and set to empty string?\n\t\t(untrack(get) == null && input.value)\n\t) {\n\t\tset(is_numberlike_input(input) ? to_number(input.value) : input.value);\n\n\t\tif (current_batch !== null) {\n\t\t\tbatches.add(current_batch);\n\t\t}\n\t}\n\n\trender_effect(() => {\n\t\tif (DEV && input.type === 'checkbox') {\n\t\t\t// TODO should this happen in prod too?\n\t\t\te.bind_invalid_checkbox_value();\n\t\t}\n\n\t\tvar value = get();\n\n\t\tif (input === document.activeElement) {\n\t\t\t// we need both, because in non-async mode, render effects run before previous_batch is set\n\t\t\tvar batch = /** @type {Batch} */ (previous_batch ?? current_batch);\n\n\t\t\t// Never rewrite the contents of a focused input. We can get here if, for example,\n\t\t\t// an update is deferred because of async work depending on the input:\n\t\t\t//\n\t\t\t// <input bind:value={query}>\n\t\t\t// <p>{await find(query)}</p>\n\t\t\tif (batches.has(batch)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (is_numberlike_input(input) && value === to_number(input.value)) {\n\t\t\t// handles 0 vs 00 case (see https://github.com/sveltejs/svelte/issues/9959)\n\t\t\treturn;\n\t\t}\n\n\t\tif (input.type === 'date' && !value && !input.value) {\n\t\t\t// Handles the case where a temporarily invalid date is set (while typing, for example with a leading 0 for the day)\n\t\t\t// and prevents this state from clearing the other parts of the date input (see https://github.com/sveltejs/svelte/issues/7897)\n\t\t\treturn;\n\t\t}\n\n\t\t// don't set the value of the input if it's the same to allow\n\t\t// minlength to work properly\n\t\tif (value !== input.value) {\n\t\t\t// @ts-expect-error the value is coerced on assignment\n\t\t\tinput.value = value ?? '';\n\t\t}\n\t});\n}\n\n/** @type {Set<HTMLInputElement[]>} */\nconst pending = new Set();\n\n/**\n * @param {HTMLInputElement[]} inputs\n * @param {null | [number]} group_index\n * @param {HTMLInputElement} input\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_group(inputs, group_index, input, get, set = get) {\n\tvar is_checkbox = input.getAttribute('type') === 'checkbox';\n\tvar binding_group = inputs;\n\n\t// needs to be let or related code isn't treeshaken out if it's always false\n\tlet hydration_mismatch = false;\n\n\tif (group_index !== null) {\n\t\tfor (var index of group_index) {\n\t\t\t// @ts-expect-error\n\t\t\tbinding_group = binding_group[index] ??= [];\n\t\t}\n\t}\n\n\tbinding_group.push(input);\n\n\tlisten_to_event_and_reset_event(\n\t\tinput,\n\t\t'change',\n\t\t() => {\n\t\t\t// @ts-ignore\n\t\t\tvar value = input.__value;\n\n\t\t\tif (is_checkbox) {\n\t\t\t\tvalue = get_binding_group_value(binding_group, value, input.checked);\n\t\t\t}\n\n\t\t\tset(value);\n\t\t},\n\t\t// TODO better default value handling\n\t\t() => set(is_checkbox ? [] : null)\n\t);\n\n\trender_effect(() => {\n\t\tvar value = get();\n\n\t\t// If we are hydrating and the value has since changed, then use the update value\n\t\t// from the input instead.\n\t\tif (hydrating && input.defaultChecked !== input.checked) {\n\t\t\thydration_mismatch = true;\n\t\t\treturn;\n\t\t}\n\n\t\tif (is_checkbox) {\n\t\t\tvalue = value || [];\n\t\t\t// @ts-ignore\n\t\t\tinput.checked = value.includes(input.__value);\n\t\t} else {\n\t\t\t// @ts-ignore\n\t\t\tinput.checked = is(input.__value, value);\n\t\t}\n\t});\n\n\tteardown(() => {\n\t\tvar index = binding_group.indexOf(input);\n\n\t\tif (index !== -1) {\n\t\t\tbinding_group.splice(index, 1);\n\t\t}\n\t});\n\n\tif (!pending.has(binding_group)) {\n\t\tpending.add(binding_group);\n\n\t\tqueue_micro_task(() => {\n\t\t\t// necessary to maintain binding group order in all insertion scenarios\n\t\t\tbinding_group.sort((a, b) => (a.compareDocumentPosition(b) === 4 ? -1 : 1));\n\t\t\tpending.delete(binding_group);\n\t\t});\n\t}\n\n\tqueue_micro_task(() => {\n\t\tif (hydration_mismatch) {\n\t\t\tvar value;\n\n\t\t\tif (is_checkbox) {\n\t\t\t\tvalue = get_binding_group_value(binding_group, value, input.checked);\n\t\t\t} else {\n\t\t\t\tvar hydration_input = binding_group.find((input) => input.checked);\n\t\t\t\t// @ts-ignore\n\t\t\t\tvalue = hydration_input?.__value;\n\t\t\t}\n\n\t\t\tset(value);\n\t\t}\n\t});\n}\n\n/**\n * @param {HTMLInputElement} input\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_checked(input, get, set = get) {\n\tlisten_to_event_and_reset_event(input, 'change', (is_reset) => {\n\t\tvar value = is_reset ? input.defaultChecked : input.checked;\n\t\tset(value);\n\t});\n\n\tif (\n\t\t// If we are hydrating and the value has since changed,\n\t\t// then use the update value from the input instead.\n\t\t(hydrating && input.defaultChecked !== input.checked) ||\n\t\t// If defaultChecked is set, then checked == defaultChecked\n\t\tuntrack(get) == null\n\t) {\n\t\tset(input.checked);\n\t}\n\n\trender_effect(() => {\n\t\tvar value = get();\n\t\tinput.checked = Boolean(value);\n\t});\n}\n\n/**\n * @template V\n * @param {Array<HTMLInputElement>} group\n * @param {V} __value\n * @param {boolean} checked\n * @returns {V[]}\n */\nfunction get_binding_group_value(group, __value, checked) {\n\t/** @type {Set<V>} */\n\tvar value = new Set();\n\n\tfor (var i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) {\n\t\t\t// @ts-ignore\n\t\t\tvalue.add(group[i].__value);\n\t\t}\n\t}\n\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement} input\n */\nfunction is_numberlike_input(input) {\n\tvar type = input.type;\n\treturn type === 'number' || type === 'range';\n}\n\n/**\n * @param {string} value\n */\nfunction to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/**\n * @param {HTMLInputElement} input\n * @param {() => FileList | null} get\n * @param {(value: FileList | null) => void} set\n */\nexport function bind_files(input, get, set = get) {\n\tlisten_to_event_and_reset_event(input, 'change', () => {\n\t\tset(input.files);\n\t});\n\n\tif (\n\t\t// If we are hydrating and the value has since changed,\n\t\t// then use the updated value from the input instead.\n\t\thydrating &&\n\t\tinput.files\n\t) {\n\t\tset(input.files);\n\t}\n\n\trender_effect(() => {\n\t\tinput.files = get();\n\t});\n}\n", "import { render_effect, effect, teardown } from '../../../reactivity/effects.js';\nimport { listen } from './shared.js';\n\n/** @param {TimeRanges} ranges */\nfunction time_ranges_to_array(ranges) {\n\tvar array = [];\n\n\tfor (var i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\n\treturn array;\n}\n\n/**\n * @param {HTMLVideoElement | HTMLAudioElement} media\n * @param {() => number | undefined} get\n * @param {(value: number) => void} set\n * @returns {void}\n */\nexport function bind_current_time(media, get, set = get) {\n\t/** @type {number} */\n\tvar raf_id;\n\t/** @type {number} */\n\tvar value;\n\n\t// Ideally, listening to timeupdate would be enough, but it fires too infrequently for the currentTime\n\t// binding, which is why we use a raf loop, too. We additionally still listen to timeupdate because\n\t// the user could be scrubbing through the video using the native controls when the media is paused.\n\tvar callback = () => {\n\t\tcancelAnimationFrame(raf_id);\n\n\t\tif (!media.paused) {\n\t\t\traf_id = requestAnimationFrame(callback);\n\t\t}\n\n\t\tvar next_value = media.currentTime;\n\t\tif (value !== next_value) {\n\t\t\tset((value = next_value));\n\t\t}\n\t};\n\n\traf_id = requestAnimationFrame(callback);\n\tmedia.addEventListener('timeupdate', callback);\n\n\trender_effect(() => {\n\t\tvar next_value = Number(get());\n\n\t\tif (value !== next_value && !isNaN(/** @type {any} */ (next_value))) {\n\t\t\tmedia.currentTime = value = next_value;\n\t\t}\n\t});\n\n\tteardown(() => {\n\t\tcancelAnimationFrame(raf_id);\n\t\tmedia.removeEventListener('timeupdate', callback);\n\t});\n}\n\n/**\n * @param {HTMLVideoElement | HTMLAudioElement} media\n * @param {(array: Array<{ start: number; end: number }>) => void} set\n */\nexport function bind_buffered(media, set) {\n\t/** @type {{ start: number; end: number; }[]} */\n\tvar current;\n\n\t// `buffered` can update without emitting any event, so we check it on various events.\n\t// By specs, `buffered` always returns a new object, so we have to compare deeply.\n\tlisten(media, ['loadedmetadata', 'progress', 'timeupdate', 'seeking'], () => {\n\t\tvar ranges = media.buffered;\n\n\t\tif (\n\t\t\t!current ||\n\t\t\tcurrent.length !== ranges.length ||\n\t\t\tcurrent.some((range, i) => ranges.start(i) !== range.start || ranges.end(i) !== range.end)\n\t\t) {\n\t\t\tcurrent = time_ranges_to_array(ranges);\n\t\t\tset(current);\n\t\t}\n\t});\n}\n\n/**\n * @param {HTMLVideoElement | HTMLAudioElement} media\n * @param {(array: Array<{ start: number; end: number }>) => void} set\n */\nexport function bind_seekable(media, set) {\n\tlisten(media, ['loadedmetadata'], () => set(time_ranges_to_array(media.seekable)));\n}\n\n/**\n * @param {HTMLVideoElement | HTMLAudioElement} media\n * @param {(array: Array<{ start: number; end: number }>) => void} set\n */\nexport function bind_played(media, set) {\n\tlisten(media, ['timeupdate'], () => set(time_ranges_to_array(media.played)));\n}\n\n/**\n * @param {HTMLVideoElement | HTMLAudioElement} media\n * @param {(seeking: boolean) => void} set\n */\nexport function bind_seeking(media, set) {\n\tlisten(media, ['seeking', 'seeked'], () => set(media.seeking));\n}\n\n/**\n * @param {HTMLVideoElement | HTMLAudioElement} media\n * @param {(seeking: boolean) => void} set\n */\nexport function bind_ended(media, set) {\n\tlisten(media, ['timeupdate', 'ended'], () => set(media.ended));\n}\n\n/**\n * @param {HTMLVideoElement | HTMLAudioElement} media\n * @param {(ready_state: number) => void} set\n */\nexport function bind_ready_state(media, set) {\n\tlisten(\n\t\tmedia,\n\t\t['loadedmetadata', 'loadeddata', 'canplay', 'canplaythrough', 'playing', 'waiting', 'emptied'],\n\t\t() => set(media.readyState)\n\t);\n}\n\n/**\n * @param {HTMLVideoElement | HTMLAudioElement} media\n * @param {() => number | undefined} get\n * @param {(playback_rate: number) => void} set\n */\nexport function bind_playback_rate(media, get, set = get) {\n\t// Needs to happen after element is inserted into the dom (which is guaranteed by using effect),\n\t// else playback will be set back to 1 by the browser\n\teffect(() => {\n\t\tvar value = Number(get());\n\n\t\tif (value !== media.playbackRate && !isNaN(value)) {\n\t\t\tmedia.playbackRate = value;\n\t\t}\n\t});\n\n\t// Start listening to ratechange events after the element is inserted into the dom,\n\t// else playback will be set to 1 by the browser\n\teffect(() => {\n\t\tlisten(media, ['ratechange'], () => {\n\t\t\tset(media.playbackRate);\n\t\t});\n\t});\n}\n\n/**\n * @param {HTMLVideoElement | HTMLAudioElement} media\n * @param {() => boolean | undefined} get\n * @param {(paused: boolean) => void} set\n */\nexport function bind_paused(media, get, set = get) {\n\tvar paused = get();\n\n\tvar update = () => {\n\t\tif (paused !== media.paused) {\n\t\t\tset((paused = media.paused));\n\t\t}\n\t};\n\n\t// If someone switches the src while media is playing, the player will pause.\n\t// Listen to the canplay event to get notified of this situation.\n\tlisten(media, ['play', 'pause', 'canplay'], update, paused == null);\n\n\t// Needs to be an effect to ensure media element is mounted: else, if paused is `false` (i.e. should play right away)\n\t// a \"The play() request was interrupted by a new load request\" error would be thrown because the resource isn't loaded yet.\n\teffect(() => {\n\t\tif ((paused = !!get()) !== media.paused) {\n\t\t\tif (paused) {\n\t\t\t\tmedia.pause();\n\t\t\t} else {\n\t\t\t\tmedia.play().catch(() => {\n\t\t\t\t\tset((paused = true));\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n}\n\n/**\n * @param {HTMLVideoElement | HTMLAudioElement} media\n * @param {() => number | undefined} get\n * @param {(volume: number) => void} set\n */\nexport function bind_volume(media, get, set = get) {\n\tvar callback = () => {\n\t\tset(media.volume);\n\t};\n\n\tif (get() == null) {\n\t\tcallback();\n\t}\n\n\tlisten(media, ['volumechange'], callback, false);\n\n\trender_effect(() => {\n\t\tvar value = Number(get());\n\n\t\tif (value !== media.volume && !isNaN(value)) {\n\t\t\tmedia.volume = value;\n\t\t}\n\t});\n}\n\n/**\n * @param {HTMLVideoElement | HTMLAudioElement} media\n * @param {() => boolean | undefined} get\n * @param {(muted: boolean) => void} set\n */\nexport function bind_muted(media, get, set = get) {\n\tvar callback = () => {\n\t\tset(media.muted);\n\t};\n\n\tif (get() == null) {\n\t\tcallback();\n\t}\n\n\tlisten(media, ['volumechange'], callback, false);\n\n\trender_effect(() => {\n\t\tvar value = !!get();\n\n\t\tif (media.muted !== value) media.muted = value;\n\t});\n}\n", "import { listen } from './shared.js';\n\n/**\n * @param {(online: boolean) => void} update\n * @returns {void}\n */\nexport function bind_online(update) {\n\tlisten(window, ['online', 'offline'], () => {\n\t\tupdate(navigator.onLine);\n\t});\n}\n", "import { teardown } from '../../../reactivity/effects.js';\nimport { get_descriptor } from '../../../../shared/utils.js';\n\n/**\n * Makes an `export`ed (non-prop) variable available on the `$$props` object\n * so that consumers can do `bind:x` on the component.\n * @template V\n * @param {Record<string, unknown>} props\n * @param {string} prop\n * @param {V} value\n * @returns {void}\n */\nexport function bind_prop(props, prop, value) {\n\tvar desc = get_descriptor(props, prop);\n\n\tif (desc && desc.set) {\n\t\tprops[prop] = value;\n\t\tteardown(() => {\n\t\t\tprops[prop] = null;\n\t\t});\n\t}\n}\n", "import { effect, teardown } from '../../../reactivity/effects.js';\nimport { untrack } from '../../../runtime.js';\n\n/**\n * Resize observer singleton.\n * One listener per element only!\n * https://groups.google.com/a/chromium.org/g/blink-dev/c/z6ienONUb5A/m/F5-VcUZtBAAJ\n */\nclass ResizeObserverSingleton {\n\t/** */\n\t#listeners = new WeakMap();\n\n\t/** @type {ResizeObserver | undefined} */\n\t#observer;\n\n\t/** @type {ResizeObserverOptions} */\n\t#options;\n\n\t/** @static */\n\tstatic entries = new WeakMap();\n\n\t/** @param {ResizeObserverOptions} options */\n\tconstructor(options) {\n\t\tthis.#options = options;\n\t}\n\n\t/**\n\t * @param {Element} element\n\t * @param {(entry: ResizeObserverEntry) => any} listener\n\t */\n\tobserve(element, listener) {\n\t\tvar listeners = this.#listeners.get(element) || new Set();\n\t\tlisteners.add(listener);\n\n\t\tthis.#listeners.set(element, listeners);\n\t\tthis.#getObserver().observe(element, this.#options);\n\n\t\treturn () => {\n\t\t\tvar listeners = this.#listeners.get(element);\n\t\t\tlisteners.delete(listener);\n\n\t\t\tif (listeners.size === 0) {\n\t\t\t\tthis.#listeners.delete(element);\n\t\t\t\t/** @type {ResizeObserver} */ (this.#observer).unobserve(element);\n\t\t\t}\n\t\t};\n\t}\n\n\t#getObserver() {\n\t\treturn (\n\t\t\tthis.#observer ??\n\t\t\t(this.#observer = new ResizeObserver(\n\t\t\t\t/** @param {any} entries */ (entries) => {\n\t\t\t\t\tfor (var entry of entries) {\n\t\t\t\t\t\tResizeObserverSingleton.entries.set(entry.target, entry);\n\t\t\t\t\t\tfor (var listener of this.#listeners.get(entry.target) || []) {\n\t\t\t\t\t\t\tlistener(entry);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t))\n\t\t);\n\t}\n}\n\nvar resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'content-box'\n});\n\nvar resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'border-box'\n});\n\nvar resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'device-pixel-content-box'\n});\n\n/**\n * @param {Element} element\n * @param {'contentRect' | 'contentBoxSize' | 'borderBoxSize' | 'devicePixelContentBoxSize'} type\n * @param {(entry: keyof ResizeObserverEntry) => void} set\n */\nexport function bind_resize_observer(element, type, set) {\n\tvar observer =\n\t\ttype === 'contentRect' || type === 'contentBoxSize'\n\t\t\t? resize_observer_content_box\n\t\t\t: type === 'borderBoxSize'\n\t\t\t\t? resize_observer_border_box\n\t\t\t\t: resize_observer_device_pixel_content_box;\n\n\tvar unsub = observer.observe(element, /** @param {any} entry */ (entry) => set(entry[type]));\n\tteardown(unsub);\n}\n\n/**\n * @param {HTMLElement} element\n * @param {'clientWidth' | 'clientHeight' | 'offsetWidth' | 'offsetHeight'} type\n * @param {(size: number) => void} set\n */\nexport function bind_element_size(element, type, set) {\n\tvar unsub = resize_observer_border_box.observe(element, () => set(element[type]));\n\n\teffect(() => {\n\t\t// The update could contain reads which should be ignored\n\t\tuntrack(() => set(element[type]));\n\t\treturn unsub;\n\t});\n}\n", "import { STATE_SYMBOL } from '#client/constants';\nimport { effect, render_effect } from '../../../reactivity/effects.js';\nimport { untrack } from '../../../runtime.js';\nimport { queue_micro_task } from '../../task.js';\n\n/**\n * @param {any} bound_value\n * @param {Element} element_or_component\n * @returns {boolean}\n */\nfunction is_bound_this(bound_value, element_or_component) {\n\treturn (\n\t\tbound_value === element_or_component || bound_value?.[STATE_SYMBOL] === element_or_component\n\t);\n}\n\n/**\n * @param {any} element_or_component\n * @param {(value: unknown, ...parts: unknown[]) => void} update\n * @param {(...parts: unknown[]) => unknown} get_value\n * @param {() => unknown[]} [get_parts] Set if the this binding is used inside an each block,\n * \t\t\t\t\t\t\t\t\t\treturns all the parts of the each block context that are used in the expression\n * @returns {void}\n */\nexport function bind_this(element_or_component = {}, update, get_value, get_parts) {\n\teffect(() => {\n\t\t/** @type {unknown[]} */\n\t\tvar old_parts;\n\n\t\t/** @type {unknown[]} */\n\t\tvar parts;\n\n\t\trender_effect(() => {\n\t\t\told_parts = parts;\n\t\t\t// We only track changes to the parts, not the value itself to avoid unnecessary reruns.\n\t\t\tparts = get_parts?.() || [];\n\n\t\t\tuntrack(() => {\n\t\t\t\tif (element_or_component !== get_value(...parts)) {\n\t\t\t\t\tupdate(element_or_component, ...parts);\n\t\t\t\t\t// If this is an effect rerun (cause: each block context changes), then nullify the binding at\n\t\t\t\t\t// the previous position if it isn't already taken over by a different effect.\n\t\t\t\t\tif (old_parts && is_bound_this(get_value(...old_parts), element_or_component)) {\n\t\t\t\t\t\tupdate(null, ...old_parts);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\treturn () => {\n\t\t\t// We cannot use effects in the teardown phase, we we use a microtask instead.\n\t\t\tqueue_micro_task(() => {\n\t\t\t\tif (parts && is_bound_this(get_value(...parts), element_or_component)) {\n\t\t\t\t\tupdate(null, ...parts);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t});\n\n\treturn element_or_component;\n}\n", "import { render_effect, teardown } from '../../../reactivity/effects.js';\nimport { listen } from './shared.js';\n\n/**\n * @param {'innerHTML' | 'textContent' | 'innerText'} property\n * @param {HTMLElement} element\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_content_editable(property, element, get, set = get) {\n\telement.addEventListener('input', () => {\n\t\t// @ts-ignore\n\t\tset(element[property]);\n\t});\n\n\trender_effect(() => {\n\t\tvar value = get();\n\n\t\tif (element[property] !== value) {\n\t\t\tif (value == null) {\n\t\t\t\t// @ts-ignore\n\t\t\t\tvar non_null_value = element[property];\n\t\t\t\tset(non_null_value);\n\t\t\t} else {\n\t\t\t\t// @ts-ignore\n\t\t\t\telement[property] = value + '';\n\t\t\t}\n\t\t}\n\t});\n}\n\n/**\n * @param {string} property\n * @param {string} event_name\n * @param {Element} element\n * @param {(value: unknown) => void} set\n * @param {() => unknown} [get]\n * @returns {void}\n */\nexport function bind_property(property, event_name, element, set, get) {\n\tvar handler = () => {\n\t\t// @ts-ignore\n\t\tset(element[property]);\n\t};\n\n\telement.addEventListener(event_name, handler);\n\n\tif (get) {\n\t\trender_effect(() => {\n\t\t\t// @ts-ignore\n\t\t\telement[property] = get();\n\t\t});\n\t} else {\n\t\thandler();\n\t}\n\n\t// @ts-ignore\n\tif (element === document.body || element === window || element === document) {\n\t\tteardown(() => {\n\t\t\telement.removeEventListener(event_name, handler);\n\t\t});\n\t}\n}\n\n/**\n * @param {HTMLElement} element\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_focused(element, set) {\n\tlisten(element, ['focus', 'blur'], () => {\n\t\tset(element === document.activeElement);\n\t});\n}\n", "import { effect, render_effect, teardown } from '../../../reactivity/effects.js';\nimport { listen, without_reactive_context } from './shared.js';\n\n/**\n * @param {'x' | 'y'} type\n * @param {() => number} get\n * @param {(value: number) => void} set\n * @returns {void}\n */\nexport function bind_window_scroll(type, get, set = get) {\n\tvar is_scrolling_x = type === 'x';\n\n\tvar target_handler = () =>\n\t\twithout_reactive_context(() => {\n\t\t\tscrolling = true;\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(clear, 100); // TODO use scrollend event if supported (or when supported everywhere?)\n\n\t\t\tset(window[is_scrolling_x ? 'scrollX' : 'scrollY']);\n\t\t});\n\n\taddEventListener('scroll', target_handler, {\n\t\tpassive: true\n\t});\n\n\tvar scrolling = false;\n\n\t/** @type {ReturnType<typeof setTimeout>} */\n\tvar timeout;\n\tvar clear = () => {\n\t\tscrolling = false;\n\t};\n\tvar first = true;\n\n\trender_effect(() => {\n\t\tvar latest_value = get();\n\t\t// Don't scroll to the initial value for accessibility reasons\n\t\tif (first) {\n\t\t\tfirst = false;\n\t\t} else if (!scrolling && latest_value != null) {\n\t\t\tscrolling = true;\n\t\t\tclearTimeout(timeout);\n\t\t\tif (is_scrolling_x) {\n\t\t\t\tscrollTo(latest_value, window.scrollY);\n\t\t\t} else {\n\t\t\t\tscrollTo(window.scrollX, latest_value);\n\t\t\t}\n\t\t\ttimeout = setTimeout(clear, 100);\n\t\t}\n\t});\n\n\t// Browsers don't fire the scroll event for the initial scroll position when scroll style isn't set to smooth\n\teffect(target_handler);\n\n\tteardown(() => {\n\t\tremoveEventListener('scroll', target_handler);\n\t});\n}\n\n/**\n * @param {'innerWidth' | 'innerHeight' | 'outerWidth' | 'outerHeight'} type\n * @param {(size: number) => void} set\n */\nexport function bind_window_size(type, set) {\n\tlisten(window, ['resize'], () => without_reactive_context(() => set(window[type])));\n}\n", "import { noop } from '../../../shared/utils.js';\nimport { user_pre_effect } from '../../reactivity/effects.js';\nimport { on } from '../elements/events.js';\n\n/**\n * Substitute for the `trusted` event modifier\n * @deprecated\n * @param {(event: Event, ...args: Array<unknown>) => void} fn\n * @returns {(event: Event, ...args: unknown[]) => void}\n */\nexport function trusted(fn) {\n\treturn function (...args) {\n\t\tvar event = /** @type {Event} */ (args[0]);\n\t\tif (event.isTrusted) {\n\t\t\t// @ts-ignore\n\t\t\tfn?.apply(this, args);\n\t\t}\n\t};\n}\n\n/**\n * Substitute for the `self` event modifier\n * @deprecated\n * @param {(event: Event, ...args: Array<unknown>) => void} fn\n * @returns {(event: Event, ...args: unknown[]) => void}\n */\nexport function self(fn) {\n\treturn function (...args) {\n\t\tvar event = /** @type {Event} */ (args[0]);\n\t\t// @ts-ignore\n\t\tif (event.target === this) {\n\t\t\t// @ts-ignore\n\t\t\tfn?.apply(this, args);\n\t\t}\n\t};\n}\n\n/**\n * Substitute for the `stopPropagation` event modifier\n * @deprecated\n * @param {(event: Event, ...args: Array<unknown>) => void} fn\n * @returns {(event: Event, ...args: unknown[]) => void}\n */\nexport function stopPropagation(fn) {\n\treturn function (...args) {\n\t\tvar event = /** @type {Event} */ (args[0]);\n\t\tevent.stopPropagation();\n\t\t// @ts-ignore\n\t\treturn fn?.apply(this, args);\n\t};\n}\n\n/**\n * Substitute for the `once` event modifier\n * @deprecated\n * @param {(event: Event, ...args: Array<unknown>) => void} fn\n * @returns {(event: Event, ...args: unknown[]) => void}\n */\nexport function once(fn) {\n\tvar ran = false;\n\n\treturn function (...args) {\n\t\tif (ran) return;\n\t\tran = true;\n\n\t\t// @ts-ignore\n\t\treturn fn?.apply(this, args);\n\t};\n}\n\n/**\n * Substitute for the `stopImmediatePropagation` event modifier\n * @deprecated\n * @param {(event: Event, ...args: Array<unknown>) => void} fn\n * @returns {(event: Event, ...args: unknown[]) => void}\n */\nexport function stopImmediatePropagation(fn) {\n\treturn function (...args) {\n\t\tvar event = /** @type {Event} */ (args[0]);\n\t\tevent.stopImmediatePropagation();\n\t\t// @ts-ignore\n\t\treturn fn?.apply(this, args);\n\t};\n}\n\n/**\n * Substitute for the `preventDefault` event modifier\n * @deprecated\n * @param {(event: Event, ...args: Array<unknown>) => void} fn\n * @returns {(event: Event, ...args: unknown[]) => void}\n */\nexport function preventDefault(fn) {\n\treturn function (...args) {\n\t\tvar event = /** @type {Event} */ (args[0]);\n\t\tevent.preventDefault();\n\t\t// @ts-ignore\n\t\treturn fn?.apply(this, args);\n\t};\n}\n\n/**\n * Substitute for the `passive` event modifier, implemented as an action\n * @deprecated\n * @param {HTMLElement} node\n * @param {[event: string, handler: () => EventListener]} options\n */\nexport function passive(node, [event, handler]) {\n\tuser_pre_effect(() => {\n\t\treturn on(node, event, handler() ?? noop, {\n\t\t\tpassive: true\n\t\t});\n\t});\n}\n\n/**\n * Substitute for the `nonpassive` event modifier, implemented as an action\n * @deprecated\n * @param {HTMLElement} node\n * @param {[event: string, handler: () => EventListener]} options\n */\nexport function nonpassive(node, [event, handler]) {\n\tuser_pre_effect(() => {\n\t\treturn on(node, event, handler() ?? noop, {\n\t\t\tpassive: false\n\t\t});\n\t});\n}\n", "/** @import { ComponentContextLegacy } from '#client' */\nimport { run, run_all } from '../../../shared/utils.js';\nimport { component_context } from '../../context.js';\nimport { derived } from '../../reactivity/deriveds.js';\nimport { user_pre_effect, user_effect } from '../../reactivity/effects.js';\nimport { deep_read_state, get, untrack } from '../../runtime.js';\n\n/**\n * Legacy-mode only: Call `onMount` callbacks and set up `beforeUpdate`/`afterUpdate` effects\n * @param {boolean} [immutable]\n */\nexport function init(immutable = false) {\n\tconst context = /** @type {ComponentContextLegacy} */ (component_context);\n\n\tconst callbacks = context.l.u;\n\tif (!callbacks) return;\n\n\tlet props = () => deep_read_state(context.s);\n\n\tif (immutable) {\n\t\tlet version = 0;\n\t\tlet prev = /** @type {Record<string, any>} */ ({});\n\n\t\t// In legacy immutable mode, before/afterUpdate only fire if the object identity of a prop changes\n\t\tconst d = derived(() => {\n\t\t\tlet changed = false;\n\t\t\tconst props = context.s;\n\t\t\tfor (const key in props) {\n\t\t\t\tif (props[key] !== prev[key]) {\n\t\t\t\t\tprev[key] = props[key];\n\t\t\t\t\tchanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (changed) version++;\n\t\t\treturn version;\n\t\t});\n\n\t\tprops = () => get(d);\n\t}\n\n\t// beforeUpdate\n\tif (callbacks.b.length) {\n\t\tuser_pre_effect(() => {\n\t\t\tobserve_all(context, props);\n\t\t\trun_all(callbacks.b);\n\t\t});\n\t}\n\n\t// onMount (must run before afterUpdate)\n\tuser_effect(() => {\n\t\tconst fns = untrack(() => callbacks.m.map(run));\n\t\treturn () => {\n\t\t\tfor (const fn of fns) {\n\t\t\t\tif (typeof fn === 'function') {\n\t\t\t\t\tfn();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t});\n\n\t// afterUpdate\n\tif (callbacks.a.length) {\n\t\tuser_effect(() => {\n\t\t\tobserve_all(context, props);\n\t\t\trun_all(callbacks.a);\n\t\t});\n\t}\n}\n\n/**\n * Invoke the getter of all signals associated with a component\n * so they can be registered to the effect this function is called in.\n * @param {ComponentContextLegacy} context\n * @param {(() => void)} props\n */\nfunction observe_all(context, props) {\n\tif (context.l.s) {\n\t\tfor (const signal of context.l.s) get(signal);\n\t}\n\n\tprops();\n}\n", "import { set, source } from '../../reactivity/sources.js';\nimport { get } from '../../runtime.js';\nimport { is_array } from '../../../shared/utils.js';\n\n/**\n * Under some circumstances, imports may be reactive in legacy mode. In that case,\n * they should be using `reactive_import` as part of the transformation\n * @param {() => any} fn\n */\nexport function reactive_import(fn) {\n\tvar s = source(0);\n\n\treturn function () {\n\t\tif (arguments.length === 1) {\n\t\t\tset(s, get(s) + 1);\n\t\t\treturn arguments[0];\n\t\t} else {\n\t\t\tget(s);\n\t\t\treturn fn();\n\t\t}\n\t};\n}\n\n/**\n * @this {any}\n * @param {Record<string, unknown>} $$props\n * @param {Event} event\n * @returns {void}\n */\nexport function bubble_event($$props, event) {\n\tvar events = /** @type {Record<string, Function[] | Function>} */ ($$props.$$events)?.[\n\t\tevent.type\n\t];\n\n\tvar callbacks = is_array(events) ? events.slice() : events == null ? [] : [events];\n\n\tfor (var fn of callbacks) {\n\t\t// Preserve \"this\" context\n\t\tfn.call(this, event);\n\t}\n}\n\n/**\n * Used to simulate `$on` on a component instance when `compatibility.componentApi === 4`\n * @param {Record<string, any>} $$props\n * @param {string} event_name\n * @param {Function} event_callback\n */\nexport function add_legacy_event_listener($$props, event_name, event_callback) {\n\t$$props.$$events ||= {};\n\t$$props.$$events[event_name] ||= [];\n\t$$props.$$events[event_name].push(event_callback);\n}\n\n/**\n * Used to simulate `$set` on a component instance when `compatibility.componentApi === 4`.\n * Needs component accessors so that it can call the setter of the prop. Therefore doesn't\n * work for updating props in `$$props` or `$$restProps`.\n * @this {Record<string, any>}\n * @param {Record<string, any>} $$new_props\n */\nexport function update_legacy_props($$new_props) {\n\tfor (var key in $$new_props) {\n\t\tif (key in this) {\n\t\t\tthis[key] = $$new_props[key];\n\t\t}\n\t}\n}\n", "/** @import { Readable } from './public' */\nimport { untrack } from '../index-client.js';\nimport { noop } from '../internal/shared/utils.js';\n\n/**\n * @template T\n * @param {Readable<T> | null | undefined} store\n * @param {(value: T) => void} run\n * @param {(value: T) => void} [invalidate]\n * @returns {() => void}\n */\nexport function subscribe_to_store(store, run, invalidate) {\n\tif (store == null) {\n\t\t// @ts-expect-error\n\t\trun(undefined);\n\n\t\t// @ts-expect-error\n\t\tif (invalidate) invalidate(undefined);\n\n\t\treturn noop;\n\t}\n\n\t// Svelte store takes a private second argument\n\t// StartStopNotifier could mutate state, and we want to silence the corresponding validation error\n\tconst unsub = untrack(() =>\n\t\tstore.subscribe(\n\t\t\trun,\n\t\t\t// @ts-expect-error\n\t\t\tinvalidate\n\t\t)\n\t);\n\n\t// Also support RxJS\n\t// @ts-expect-error TODO fix this in the types?\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n", "/** @import { Readable, StartStopNotifier, Subscriber, Unsubscriber, Updater, Writable } from '../public.js' */\n/** @import { Stores, StoresValues, SubscribeInvalidateTuple } from '../private.js' */\nimport { noop, run_all } from '../../internal/shared/utils.js';\nimport { safe_not_equal } from '../../internal/client/reactivity/equality.js';\nimport { subscribe_to_store } from '../utils.js';\n\n/**\n * @type {Array<SubscribeInvalidateTuple<any> | any>}\n */\nconst subscriber_queue = [];\n\n/**\n * Creates a `Readable` store that allows reading by subscription.\n *\n * @template T\n * @param {T} [value] initial value\n * @param {StartStopNotifier<T>} [start]\n * @returns {Readable<T>}\n */\nexport function readable(value, start) {\n\treturn {\n\t\tsubscribe: writable(value, start).subscribe\n\t};\n}\n\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n *\n * @template T\n * @param {T} [value] initial value\n * @param {StartStopNotifier<T>} [start]\n * @returns {Writable<T>}\n */\nexport function writable(value, start = noop) {\n\t/** @type {Unsubscriber | null} */\n\tlet stop = null;\n\n\t/** @type {Set<SubscribeInvalidateTuple<T>>} */\n\tconst subscribers = new Set();\n\n\t/**\n\t * @param {T} new_value\n\t * @returns {void}\n\t */\n\tfunction set(new_value) {\n\t\tif (safe_not_equal(value, new_value)) {\n\t\t\tvalue = new_value;\n\t\t\tif (stop) {\n\t\t\t\t// store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (const subscriber of subscribers) {\n\t\t\t\t\tsubscriber[1]();\n\t\t\t\t\tsubscriber_queue.push(subscriber, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {Updater<T>} fn\n\t * @returns {void}\n\t */\n\tfunction update(fn) {\n\t\tset(fn(/** @type {T} */ (value)));\n\t}\n\n\t/**\n\t * @param {Subscriber<T>} run\n\t * @param {() => void} [invalidate]\n\t * @returns {Unsubscriber}\n\t */\n\tfunction subscribe(run, invalidate = noop) {\n\t\t/** @type {SubscribeInvalidateTuple<T>} */\n\t\tconst subscriber = [run, invalidate];\n\t\tsubscribers.add(subscriber);\n\t\tif (subscribers.size === 1) {\n\t\t\tstop = start(set, update) || noop;\n\t\t}\n\t\trun(/** @type {T} */ (value));\n\t\treturn () => {\n\t\t\tsubscribers.delete(subscriber);\n\t\t\tif (subscribers.size === 0 && stop) {\n\t\t\t\tstop();\n\t\t\t\tstop = null;\n\t\t\t}\n\t\t};\n\t}\n\treturn { set, update, subscribe };\n}\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * @template {Stores} S\n * @template T\n * @overload\n * @param {S} stores\n * @param {(values: StoresValues<S>, set: (value: T) => void, update: (fn: Updater<T>) => void) => Unsubscriber | void} fn\n * @param {T} [initial_value]\n * @returns {Readable<T>}\n */\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * @template {Stores} S\n * @template T\n * @overload\n * @param {S} stores\n * @param {(values: StoresValues<S>) => T} fn\n * @param {T} [initial_value]\n * @returns {Readable<T>}\n */\n/**\n * @template {Stores} S\n * @template T\n * @param {S} stores\n * @param {Function} fn\n * @param {T} [initial_value]\n * @returns {Readable<T>}\n */\nexport function derived(stores, fn, initial_value) {\n\tconst single = !Array.isArray(stores);\n\t/** @type {Array<Readable<any>>} */\n\tconst stores_array = single ? [stores] : stores;\n\tif (!stores_array.every(Boolean)) {\n\t\tthrow new Error('derived() expects stores as input, got a falsy value');\n\t}\n\tconst auto = fn.length < 2;\n\treturn readable(initial_value, (set, update) => {\n\t\tlet started = false;\n\t\t/** @type {T[]} */\n\t\tconst values = [];\n\t\tlet pending = 0;\n\t\tlet cleanup = noop;\n\t\tconst sync = () => {\n\t\t\tif (pending) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcleanup();\n\t\t\tconst result = fn(single ? values[0] : values, set, update);\n\t\t\tif (auto) {\n\t\t\t\tset(result);\n\t\t\t} else {\n\t\t\t\tcleanup = typeof result === 'function' ? result : noop;\n\t\t\t}\n\t\t};\n\t\tconst unsubscribers = stores_array.map((store, i) =>\n\t\t\tsubscribe_to_store(\n\t\t\t\tstore,\n\t\t\t\t(value) => {\n\t\t\t\t\tvalues[i] = value;\n\t\t\t\t\tpending &= ~(1 << i);\n\t\t\t\t\tif (started) {\n\t\t\t\t\t\tsync();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tpending |= 1 << i;\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tstarted = true;\n\t\tsync();\n\t\treturn function stop() {\n\t\t\trun_all(unsubscribers);\n\t\t\tcleanup();\n\t\t\t// We need to set this to false because callbacks can still happen despite having unsubscribed:\n\t\t\t// Callbacks might already be placed in the queue which doesn't know it should no longer\n\t\t\t// invoke this derived store.\n\t\t\tstarted = false;\n\t\t};\n\t});\n}\n\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * @template T\n * @param {Readable<T>} store  - store to make readonly\n * @returns {Readable<T>}\n */\nexport function readonly(store) {\n\treturn {\n\t\t// @ts-expect-error TODO i suspect the bind is unnecessary\n\t\tsubscribe: store.subscribe.bind(store)\n\t};\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * @template T\n * @param {Readable<T>} store\n * @returns {T}\n */\nexport function get(store) {\n\tlet value;\n\tsubscribe_to_store(store, (_) => (value = _))();\n\t// @ts-expect-error\n\treturn value;\n}\n", "/** @import { StoreReferencesContainer } from '#client' */\n/** @import { Store } from '#shared' */\nimport { subscribe_to_store } from '../../../store/utils.js';\nimport { get as get_store } from '../../../store/shared/index.js';\nimport { define_property, noop } from '../../shared/utils.js';\nimport { get } from '../runtime.js';\nimport { teardown } from './effects.js';\nimport { mutable_source, set } from './sources.js';\nimport { DEV } from 'esm-env';\n\n/**\n * Whether or not the prop currently being read is a store binding, as in\n * `<Child bind:x={$y} />`. If it is, we treat the prop as mutable even in\n * runes mode, and skip `binding_property_non_reactive` validation\n */\nlet is_store_binding = false;\n\nlet IS_UNMOUNTED = Symbol();\n\n/**\n * Gets the current value of a store. If the store isn't subscribed to yet, it will create a proxy\n * signal that will be updated when the store is. The store references container is needed to\n * track reassignments to stores and to track the correct component context.\n * @template V\n * @param {Store<V> | null | undefined} store\n * @param {string} store_name\n * @param {StoreReferencesContainer} stores\n * @returns {V}\n */\nexport function store_get(store, store_name, stores) {\n\tconst entry = (stores[store_name] ??= {\n\t\tstore: null,\n\t\tsource: mutable_source(undefined),\n\t\tunsubscribe: noop\n\t});\n\n\tif (DEV) {\n\t\tentry.source.label = store_name;\n\t}\n\n\t// if the component that setup this is already unmounted we don't want to register a subscription\n\tif (entry.store !== store && !(IS_UNMOUNTED in stores)) {\n\t\tentry.unsubscribe();\n\t\tentry.store = store ?? null;\n\n\t\tif (store == null) {\n\t\t\tentry.source.v = undefined; // see synchronous callback comment below\n\t\t\tentry.unsubscribe = noop;\n\t\t} else {\n\t\t\tvar is_synchronous_callback = true;\n\n\t\t\tentry.unsubscribe = subscribe_to_store(store, (v) => {\n\t\t\t\tif (is_synchronous_callback) {\n\t\t\t\t\t// If the first updates to the store value (possibly multiple of them) are synchronously\n\t\t\t\t\t// inside a derived, we will hit the `state_unsafe_mutation` error if we `set` the value\n\t\t\t\t\tentry.source.v = v;\n\t\t\t\t} else {\n\t\t\t\t\tset(entry.source, v);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tis_synchronous_callback = false;\n\t\t}\n\t}\n\n\t// if the component that setup this stores is already unmounted the source will be out of sync\n\t// so we just use the `get` for the stores, less performant but it avoids to create a memory leak\n\t// and it will keep the value consistent\n\tif (store && IS_UNMOUNTED in stores) {\n\t\treturn get_store(store);\n\t}\n\n\treturn get(entry.source);\n}\n\n/**\n * Unsubscribe from a store if it's not the same as the one in the store references container.\n * We need this in addition to `store_get` because someone could unsubscribe from a store but\n * then never subscribe to the new one (if any), causing the subscription to stay open wrongfully.\n * @param {Store<any> | null | undefined} store\n * @param {string} store_name\n * @param {StoreReferencesContainer} stores\n */\nexport function store_unsub(store, store_name, stores) {\n\t/** @type {StoreReferencesContainer[''] | undefined} */\n\tlet entry = stores[store_name];\n\n\tif (entry && entry.store !== store) {\n\t\t// Don't reset store yet, so that store_get above can resubscribe to new store if necessary\n\t\tentry.unsubscribe();\n\t\tentry.unsubscribe = noop;\n\t}\n\n\treturn store;\n}\n\n/**\n * Sets the new value of a store and returns that value.\n * @template V\n * @param {Store<V>} store\n * @param {V} value\n * @returns {V}\n */\nexport function store_set(store, value) {\n\tstore.set(value);\n\treturn value;\n}\n\n/**\n * @param {StoreReferencesContainer} stores\n * @param {string} store_name\n */\nexport function invalidate_store(stores, store_name) {\n\tvar entry = stores[store_name];\n\tif (entry.store !== null) {\n\t\tstore_set(entry.store, entry.source.v);\n\t}\n}\n\n/**\n * Unsubscribes from all auto-subscribed stores on destroy\n * @returns {[StoreReferencesContainer, ()=>void]}\n */\nexport function setup_stores() {\n\t/** @type {StoreReferencesContainer} */\n\tconst stores = {};\n\n\tfunction cleanup() {\n\t\tteardown(() => {\n\t\t\tfor (var store_name in stores) {\n\t\t\t\tconst ref = stores[store_name];\n\t\t\t\tref.unsubscribe();\n\t\t\t}\n\t\t\tdefine_property(stores, IS_UNMOUNTED, {\n\t\t\t\tenumerable: false,\n\t\t\t\tvalue: true\n\t\t\t});\n\t\t});\n\t}\n\n\treturn [stores, cleanup];\n}\n\n/**\n * Updates a store with a new value.\n * @param {Store<V>} store  the store to update\n * @param {any} expression  the expression that mutates the store\n * @param {V} new_value  the new store value\n * @template V\n */\nexport function store_mutate(store, expression, new_value) {\n\tstore.set(new_value);\n\treturn expression;\n}\n\n/**\n * @param {Store<number>} store\n * @param {number} store_value\n * @param {1 | -1} [d]\n * @returns {number}\n */\nexport function update_store(store, store_value, d = 1) {\n\tstore.set(store_value + d);\n\treturn store_value;\n}\n\n/**\n * @param {Store<number>} store\n * @param {number} store_value\n * @param {1 | -1} [d]\n * @returns {number}\n */\nexport function update_pre_store(store, store_value, d = 1) {\n\tconst value = store_value + d;\n\tstore.set(value);\n\treturn value;\n}\n\n/**\n * Called inside prop getters to communicate that the prop is a store binding\n */\nexport function mark_store_binding() {\n\tis_store_binding = true;\n}\n\n/**\n * Returns a tuple that indicates whether `fn()` reads a prop that is a store binding.\n * Used to prevent `binding_property_non_reactive` validation false positives and\n * ensure that these props are treated as mutable even in runes mode\n * @template T\n * @param {() => T} fn\n * @returns {[T, boolean]}\n */\nexport function capture_store_binding(fn) {\n\tvar previous_is_store_binding = is_store_binding;\n\n\ttry {\n\t\tis_store_binding = false;\n\t\treturn [fn(), is_store_binding];\n\t} finally {\n\t\tis_store_binding = previous_is_store_binding;\n\t}\n}\n", "/** @import { Effect, Source } from './types.js' */\nimport { DEV } from 'esm-env';\nimport {\n\tPROPS_IS_BINDABLE,\n\tPROPS_IS_IMMUTABLE,\n\tPROPS_IS_LAZY_INITIAL,\n\tPROPS_IS_RUNES,\n\tPROPS_IS_UPDATED\n} from '../../../constants.js';\nimport { get_descriptor, is_function } from '../../shared/utils.js';\nimport { set, source, update } from './sources.js';\nimport { derived, derived_safe_equal } from './deriveds.js';\nimport {\n\tactive_effect,\n\tget,\n\tis_destroying_effect,\n\tset_active_effect,\n\tuntrack\n} from '../runtime.js';\nimport * as e from '../errors.js';\nimport { DESTROYED, LEGACY_PROPS, STATE_SYMBOL } from '#client/constants';\nimport { proxy } from '../proxy.js';\nimport { capture_store_binding } from './store.js';\nimport { legacy_mode_flag } from '../../flags/index.js';\n\n/**\n * @param {((value?: number) => number)} fn\n * @param {1 | -1} [d]\n * @returns {number}\n */\nexport function update_prop(fn, d = 1) {\n\tconst value = fn();\n\tfn(value + d);\n\treturn value;\n}\n\n/**\n * @param {((value?: number) => number)} fn\n * @param {1 | -1} [d]\n * @returns {number}\n */\nexport function update_pre_prop(fn, d = 1) {\n\tconst value = fn() + d;\n\tfn(value);\n\treturn value;\n}\n\n/**\n * The proxy handler for rest props (i.e. `const { x, ...rest } = $props()`).\n * Is passed the full `$$props` object and excludes the named props.\n * @type {ProxyHandler<{ props: Record<string | symbol, unknown>, exclude: Array<string | symbol>, name?: string }>}}\n */\nconst rest_props_handler = {\n\tget(target, key) {\n\t\tif (target.exclude.includes(key)) return;\n\t\treturn target.props[key];\n\t},\n\tset(target, key) {\n\t\tif (DEV) {\n\t\t\t// TODO should this happen in prod too?\n\t\t\te.props_rest_readonly(`${target.name}.${String(key)}`);\n\t\t}\n\n\t\treturn false;\n\t},\n\tgetOwnPropertyDescriptor(target, key) {\n\t\tif (target.exclude.includes(key)) return;\n\t\tif (key in target.props) {\n\t\t\treturn {\n\t\t\t\tenumerable: true,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: target.props[key]\n\t\t\t};\n\t\t}\n\t},\n\thas(target, key) {\n\t\tif (target.exclude.includes(key)) return false;\n\t\treturn key in target.props;\n\t},\n\townKeys(target) {\n\t\treturn Reflect.ownKeys(target.props).filter((key) => !target.exclude.includes(key));\n\t}\n};\n\n/**\n * @param {Record<string, unknown>} props\n * @param {string[]} exclude\n * @param {string} [name]\n * @returns {Record<string, unknown>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function rest_props(props, exclude, name) {\n\treturn new Proxy(\n\t\tDEV ? { props, exclude, name, other: {}, to_proxy: [] } : { props, exclude },\n\t\trest_props_handler\n\t);\n}\n\n/**\n * The proxy handler for legacy $$restProps and $$props\n * @type {ProxyHandler<{ props: Record<string | symbol, unknown>, exclude: Array<string | symbol>, special: Record<string | symbol, (v?: unknown) => unknown>, version: Source<number>, parent_effect: Effect }>}}\n */\nconst legacy_rest_props_handler = {\n\tget(target, key) {\n\t\tif (target.exclude.includes(key)) return;\n\t\tget(target.version);\n\t\treturn key in target.special ? target.special[key]() : target.props[key];\n\t},\n\tset(target, key, value) {\n\t\tif (!(key in target.special)) {\n\t\t\tvar previous_effect = active_effect;\n\n\t\t\ttry {\n\t\t\t\tset_active_effect(target.parent_effect);\n\n\t\t\t\t// Handle props that can temporarily get out of sync with the parent\n\t\t\t\t/** @type {Record<string, (v?: unknown) => unknown>} */\n\t\t\t\ttarget.special[key] = prop(\n\t\t\t\t\t{\n\t\t\t\t\t\tget [key]() {\n\t\t\t\t\t\t\treturn target.props[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t/** @type {string} */ (key),\n\t\t\t\t\tPROPS_IS_UPDATED\n\t\t\t\t);\n\t\t\t} finally {\n\t\t\t\tset_active_effect(previous_effect);\n\t\t\t}\n\t\t}\n\n\t\ttarget.special[key](value);\n\t\tupdate(target.version); // $$props is coarse-grained: when $$props.x is updated, usages of $$props.y etc are also rerun\n\t\treturn true;\n\t},\n\tgetOwnPropertyDescriptor(target, key) {\n\t\tif (target.exclude.includes(key)) return;\n\t\tif (key in target.props) {\n\t\t\treturn {\n\t\t\t\tenumerable: true,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: target.props[key]\n\t\t\t};\n\t\t}\n\t},\n\tdeleteProperty(target, key) {\n\t\t// Svelte 4 allowed for deletions on $$restProps\n\t\tif (target.exclude.includes(key)) return true;\n\t\ttarget.exclude.push(key);\n\t\tupdate(target.version);\n\t\treturn true;\n\t},\n\thas(target, key) {\n\t\tif (target.exclude.includes(key)) return false;\n\t\treturn key in target.props;\n\t},\n\townKeys(target) {\n\t\treturn Reflect.ownKeys(target.props).filter((key) => !target.exclude.includes(key));\n\t}\n};\n\n/**\n * @param {Record<string, unknown>} props\n * @param {string[]} exclude\n * @returns {Record<string, unknown>}\n */\nexport function legacy_rest_props(props, exclude) {\n\treturn new Proxy(\n\t\t{\n\t\t\tprops,\n\t\t\texclude,\n\t\t\tspecial: {},\n\t\t\tversion: source(0),\n\t\t\t// TODO this is only necessary because we need to track component\n\t\t\t// destruction inside `prop`, because of `bind:this`, but it\n\t\t\t// seems likely that we can simplify `bind:this` instead\n\t\t\tparent_effect: /** @type {Effect} */ (active_effect)\n\t\t},\n\t\tlegacy_rest_props_handler\n\t);\n}\n\n/**\n * The proxy handler for spread props. Handles the incoming array of props\n * that looks like `() => { dynamic: props }, { static: prop }, ..` and wraps\n * them so that the whole thing is passed to the component as the `$$props` argument.\n * @type {ProxyHandler<{ props: Array<Record<string | symbol, unknown> | (() => Record<string | symbol, unknown>)> }>}}\n */\nconst spread_props_handler = {\n\tget(target, key) {\n\t\tlet i = target.props.length;\n\t\twhile (i--) {\n\t\t\tlet p = target.props[i];\n\t\t\tif (is_function(p)) p = p();\n\t\t\tif (typeof p === 'object' && p !== null && key in p) return p[key];\n\t\t}\n\t},\n\tset(target, key, value) {\n\t\tlet i = target.props.length;\n\t\twhile (i--) {\n\t\t\tlet p = target.props[i];\n\t\t\tif (is_function(p)) p = p();\n\t\t\tconst desc = get_descriptor(p, key);\n\t\t\tif (desc && desc.set) {\n\t\t\t\tdesc.set(value);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\tgetOwnPropertyDescriptor(target, key) {\n\t\tlet i = target.props.length;\n\t\twhile (i--) {\n\t\t\tlet p = target.props[i];\n\t\t\tif (is_function(p)) p = p();\n\t\t\tif (typeof p === 'object' && p !== null && key in p) {\n\t\t\t\tconst descriptor = get_descriptor(p, key);\n\t\t\t\tif (descriptor && !descriptor.configurable) {\n\t\t\t\t\t// Prevent a \"Non-configurability Report Error\": The target is an array, it does\n\t\t\t\t\t// not actually contain this property. If it is now described as non-configurable,\n\t\t\t\t\t// the proxy throws a validation error. Setting it to true avoids that.\n\t\t\t\t\tdescriptor.configurable = true;\n\t\t\t\t}\n\t\t\t\treturn descriptor;\n\t\t\t}\n\t\t}\n\t},\n\thas(target, key) {\n\t\t// To prevent a false positive `is_entry_props` in the `prop` function\n\t\tif (key === STATE_SYMBOL || key === LEGACY_PROPS) return false;\n\n\t\tfor (let p of target.props) {\n\t\t\tif (is_function(p)) p = p();\n\t\t\tif (p != null && key in p) return true;\n\t\t}\n\n\t\treturn false;\n\t},\n\townKeys(target) {\n\t\t/** @type {Array<string | symbol>} */\n\t\tconst keys = [];\n\n\t\tfor (let p of target.props) {\n\t\t\tif (is_function(p)) p = p();\n\t\t\tif (!p) continue;\n\n\t\t\tfor (const key in p) {\n\t\t\t\tif (!keys.includes(key)) keys.push(key);\n\t\t\t}\n\n\t\t\tfor (const key of Object.getOwnPropertySymbols(p)) {\n\t\t\t\tif (!keys.includes(key)) keys.push(key);\n\t\t\t}\n\t\t}\n\n\t\treturn keys;\n\t}\n};\n\n/**\n * @param {Array<Record<string, unknown> | (() => Record<string, unknown>)>} props\n * @returns {any}\n */\nexport function spread_props(...props) {\n\treturn new Proxy({ props }, spread_props_handler);\n}\n\n/**\n * This function is responsible for synchronizing a possibly bound prop with the inner component state.\n * It is used whenever the compiler sees that the component writes to the prop, or when it has a default prop_value.\n * @template V\n * @param {Record<string, unknown>} props\n * @param {string} key\n * @param {number} flags\n * @param {V | (() => V)} [fallback]\n * @returns {(() => V | ((arg: V) => V) | ((arg: V, mutation: boolean) => V))}\n */\nexport function prop(props, key, flags, fallback) {\n\tvar runes = !legacy_mode_flag || (flags & PROPS_IS_RUNES) !== 0;\n\tvar bindable = (flags & PROPS_IS_BINDABLE) !== 0;\n\tvar lazy = (flags & PROPS_IS_LAZY_INITIAL) !== 0;\n\n\tvar fallback_value = /** @type {V} */ (fallback);\n\tvar fallback_dirty = true;\n\n\tvar get_fallback = () => {\n\t\tif (fallback_dirty) {\n\t\t\tfallback_dirty = false;\n\n\t\t\tfallback_value = lazy\n\t\t\t\t? untrack(/** @type {() => V} */ (fallback))\n\t\t\t\t: /** @type {V} */ (fallback);\n\t\t}\n\n\t\treturn fallback_value;\n\t};\n\n\t/** @type {((v: V) => void) | undefined} */\n\tvar setter;\n\n\tif (bindable) {\n\t\t// Can be the case when someone does `mount(Component, props)` with `let props = $state({...})`\n\t\t// or `createClassComponent(Component, props)`\n\t\tvar is_entry_props = STATE_SYMBOL in props || LEGACY_PROPS in props;\n\n\t\tsetter =\n\t\t\tget_descriptor(props, key)?.set ??\n\t\t\t(is_entry_props && key in props ? (v) => (props[key] = v) : undefined);\n\t}\n\n\tvar initial_value;\n\tvar is_store_sub = false;\n\n\tif (bindable) {\n\t\t[initial_value, is_store_sub] = capture_store_binding(() => /** @type {V} */ (props[key]));\n\t} else {\n\t\tinitial_value = /** @type {V} */ (props[key]);\n\t}\n\n\tif (initial_value === undefined && fallback !== undefined) {\n\t\tinitial_value = get_fallback();\n\n\t\tif (setter) {\n\t\t\tif (runes) e.props_invalid_value(key);\n\t\t\tsetter(initial_value);\n\t\t}\n\t}\n\n\t/** @type {() => V} */\n\tvar getter;\n\n\tif (runes) {\n\t\tgetter = () => {\n\t\t\tvar value = /** @type {V} */ (props[key]);\n\t\t\tif (value === undefined) return get_fallback();\n\t\t\tfallback_dirty = true;\n\t\t\treturn value;\n\t\t};\n\t} else {\n\t\tgetter = () => {\n\t\t\tvar value = /** @type {V} */ (props[key]);\n\n\t\t\tif (value !== undefined) {\n\t\t\t\t// in legacy mode, we don't revert to the fallback value\n\t\t\t\t// if the prop goes from defined to undefined. The easiest\n\t\t\t\t// way to model this is to make the fallback undefined\n\t\t\t\t// as soon as the prop has a value\n\t\t\t\tfallback_value = /** @type {V} */ (undefined);\n\t\t\t}\n\n\t\t\treturn value === undefined ? fallback_value : value;\n\t\t};\n\t}\n\n\t// prop is never written to \u2014 we only need a getter\n\tif (runes && (flags & PROPS_IS_UPDATED) === 0) {\n\t\treturn getter;\n\t}\n\n\t// prop is written to, but the parent component had `bind:foo` which\n\t// means we can just call `$$props.foo = value` directly\n\tif (setter) {\n\t\tvar legacy_parent = props.$$legacy;\n\t\treturn /** @type {() => V} */ (\n\t\t\tfunction (/** @type {V} */ value, /** @type {boolean} */ mutation) {\n\t\t\t\tif (arguments.length > 0) {\n\t\t\t\t\t// We don't want to notify if the value was mutated and the parent is in runes mode.\n\t\t\t\t\t// In that case the state proxy (if it exists) should take care of the notification.\n\t\t\t\t\t// If the parent is not in runes mode, we need to notify on mutation, too, that the prop\n\t\t\t\t\t// has changed because the parent will not be able to detect the change otherwise.\n\t\t\t\t\tif (!runes || !mutation || legacy_parent || is_store_sub) {\n\t\t\t\t\t\t/** @type {Function} */ (setter)(mutation ? getter() : value);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\n\t\t\t\treturn getter();\n\t\t\t}\n\t\t);\n\t}\n\n\t// Either prop is written to, but there's no binding, which means we\n\t// create a derived that we can write to locally.\n\t// Or we are in legacy mode where we always create a derived to replicate that\n\t// Svelte 4 did not trigger updates when a primitive value was updated to the same value.\n\tvar overridden = false;\n\n\tvar d = ((flags & PROPS_IS_IMMUTABLE) !== 0 ? derived : derived_safe_equal)(() => {\n\t\toverridden = false;\n\t\treturn getter();\n\t});\n\n\tif (DEV) {\n\t\td.label = key;\n\t}\n\n\t// Capture the initial value if it's bindable\n\tif (bindable) get(d);\n\n\tvar parent_effect = /** @type {Effect} */ (active_effect);\n\n\treturn /** @type {() => V} */ (\n\t\tfunction (/** @type {any} */ value, /** @type {boolean} */ mutation) {\n\t\t\tif (arguments.length > 0) {\n\t\t\t\tconst new_value = mutation ? get(d) : runes && bindable ? proxy(value) : value;\n\n\t\t\t\tset(d, new_value);\n\t\t\t\toverridden = true;\n\n\t\t\t\tif (fallback_value !== undefined) {\n\t\t\t\t\tfallback_value = new_value;\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\t// special case \u2014 avoid recalculating the derived if we're in a\n\t\t\t// teardown function and the prop was overridden locally, or the\n\t\t\t// component was already destroyed (this latter part is necessary\n\t\t\t// because `bind:this` can read props after the component has\n\t\t\t// been destroyed. TODO simplify `bind:this`\n\t\t\tif ((is_destroying_effect && overridden) || (parent_effect.f & DESTROYED) !== 0) {\n\t\t\t\treturn d.v;\n\t\t\t}\n\n\t\t\treturn get(d);\n\t\t}\n\t);\n}\n", "/** @import { Blocker } from '#client' */\nimport { dev_current_component_function } from './context.js';\nimport { is_array } from '../shared/utils.js';\nimport * as e from './errors.js';\nimport { FILENAME } from '../../constants.js';\nimport { render_effect } from './reactivity/effects.js';\nimport * as w from './warnings.js';\nimport { capture_store_binding } from './reactivity/store.js';\nimport { run_after_blockers } from './reactivity/async.js';\n\n/**\n * @param {() => any} collection\n * @param {(item: any, index: number) => string} key_fn\n * @returns {void}\n */\nexport function validate_each_keys(collection, key_fn) {\n\trender_effect(() => {\n\t\tconst keys = new Map();\n\t\tconst maybe_array = collection();\n\t\tconst array = is_array(maybe_array)\n\t\t\t? maybe_array\n\t\t\t: maybe_array == null\n\t\t\t\t? []\n\t\t\t\t: Array.from(maybe_array);\n\t\tconst length = array.length;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst key = key_fn(array[i], i);\n\t\t\tif (keys.has(key)) {\n\t\t\t\tconst a = String(keys.get(key));\n\t\t\t\tconst b = String(i);\n\n\t\t\t\t/** @type {string | null} */\n\t\t\t\tlet k = String(key);\n\t\t\t\tif (k.startsWith('[object ')) k = null;\n\n\t\t\t\te.each_key_duplicate(a, b, k);\n\t\t\t}\n\t\t\tkeys.set(key, i);\n\t\t}\n\t});\n}\n\n/**\n * @param {string} binding\n * @param {Blocker[]} blockers\n * @param {() => Record<string, any>} get_object\n * @param {() => string} get_property\n * @param {number} line\n * @param {number} column\n */\nexport function validate_binding(binding, blockers, get_object, get_property, line, column) {\n\trun_after_blockers(blockers, () => {\n\t\tvar warned = false;\n\n\t\tvar filename = dev_current_component_function?.[FILENAME];\n\n\t\trender_effect(() => {\n\t\t\tif (warned) return;\n\n\t\t\tvar [object, is_store_sub] = capture_store_binding(get_object);\n\n\t\t\tif (is_store_sub) return;\n\n\t\t\tvar property = get_property();\n\n\t\t\tvar ran = false;\n\n\t\t\t// by making the (possibly false, but it would be an extreme edge case) assumption\n\t\t\t// that a getter has a corresponding setter, we can determine if a property is\n\t\t\t// reactive by seeing if this effect has dependencies\n\t\t\tvar effect = render_effect(() => {\n\t\t\t\tif (ran) return;\n\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unused-expressions\n\t\t\t\tobject[property];\n\t\t\t});\n\n\t\t\tran = true;\n\n\t\t\tif (effect.deps === null) {\n\t\t\t\tvar location = `${filename}:${line}:${column}`;\n\t\t\t\tw.binding_property_non_reactive(binding, location);\n\n\t\t\t\twarned = true;\n\t\t\t}\n\t\t});\n\t});\n}\n", "/** @import { ComponentConstructorOptions, ComponentType, SvelteComponent, Component } from 'svelte' */\nimport { DIRTY, LEGACY_PROPS, MAYBE_DIRTY } from '../internal/client/constants.js';\nimport { user_pre_effect } from '../internal/client/reactivity/effects.js';\nimport { mutable_source, set } from '../internal/client/reactivity/sources.js';\nimport { hydrate, mount, unmount } from '../internal/client/render.js';\nimport { active_effect, get } from '../internal/client/runtime.js';\nimport { flushSync } from '../internal/client/reactivity/batch.js';\nimport { define_property, is_array } from '../internal/shared/utils.js';\nimport * as e from '../internal/client/errors.js';\nimport * as w from '../internal/client/warnings.js';\nimport { DEV } from 'esm-env';\nimport { FILENAME } from '../constants.js';\nimport { component_context, dev_current_component_function } from '../internal/client/context.js';\nimport { async_mode_flag } from '../internal/flags/index.js';\nimport { set_signal_status } from '../internal/client/reactivity/status.js';\n\n/**\n * Takes the same options as a Svelte 4 component and the component function and returns a Svelte 4 compatible component.\n *\n * @deprecated Use this only as a temporary solution to migrate your imperative component code to Svelte 5.\n *\n * @template {Record<string, any>} Props\n * @template {Record<string, any>} Exports\n * @template {Record<string, any>} Events\n * @template {Record<string, any>} Slots\n *\n * @param {ComponentConstructorOptions<Props> & {\n * \tcomponent: ComponentType<SvelteComponent<Props, Events, Slots>> | Component<Props>;\n * }} options\n * @returns {SvelteComponent<Props, Events, Slots> & Exports}\n */\nexport function createClassComponent(options) {\n\t// @ts-expect-error $$prop_def etc are not actually defined\n\treturn new Svelte4Component(options);\n}\n\n/**\n * Takes the component function and returns a Svelte 4 compatible component constructor.\n *\n * @deprecated Use this only as a temporary solution to migrate your imperative component code to Svelte 5.\n *\n * @template {Record<string, any>} Props\n * @template {Record<string, any>} Exports\n * @template {Record<string, any>} Events\n * @template {Record<string, any>} Slots\n *\n * @param {SvelteComponent<Props, Events, Slots> | Component<Props>} component\n * @returns {ComponentType<SvelteComponent<Props, Events, Slots> & Exports>}\n */\nexport function asClassComponent(component) {\n\t// @ts-expect-error $$prop_def etc are not actually defined\n\treturn class extends Svelte4Component {\n\t\t/** @param {any} options */\n\t\tconstructor(options) {\n\t\t\tsuper({\n\t\t\t\tcomponent,\n\t\t\t\t...options\n\t\t\t});\n\t\t}\n\t};\n}\n\n/**\n * Support using the component as both a class and function during the transition period\n * @typedef  {{new (o: ComponentConstructorOptions): SvelteComponent;(...args: Parameters<Component<Record<string, any>>>): ReturnType<Component<Record<string, any>, Record<string, any>>>;}} LegacyComponentType\n */\n\nclass Svelte4Component {\n\t/** @type {any} */\n\t#events;\n\n\t/** @type {Record<string, any>} */\n\t#instance;\n\n\t/**\n\t * @param {ComponentConstructorOptions & {\n\t *  component: any;\n\t * }} options\n\t */\n\tconstructor(options) {\n\t\tvar sources = new Map();\n\n\t\t/**\n\t\t * @param {string | symbol} key\n\t\t * @param {unknown} value\n\t\t */\n\t\tvar add_source = (key, value) => {\n\t\t\tvar s = mutable_source(value, false, false);\n\t\t\tsources.set(key, s);\n\t\t\treturn s;\n\t\t};\n\n\t\t// Replicate coarse-grained props through a proxy that has a version source for\n\t\t// each property, which is incremented on updates to the property itself. Do not\n\t\t// use our $state proxy because that one has fine-grained reactivity.\n\t\tconst props = new Proxy(\n\t\t\t{ ...(options.props || {}), $$events: {} },\n\t\t\t{\n\t\t\t\tget(target, prop) {\n\t\t\t\t\treturn get(sources.get(prop) ?? add_source(prop, Reflect.get(target, prop)));\n\t\t\t\t},\n\t\t\t\thas(target, prop) {\n\t\t\t\t\t// Necessary to not throw \"invalid binding\" validation errors on the component side\n\t\t\t\t\tif (prop === LEGACY_PROPS) return true;\n\n\t\t\t\t\tget(sources.get(prop) ?? add_source(prop, Reflect.get(target, prop)));\n\t\t\t\t\treturn Reflect.has(target, prop);\n\t\t\t\t},\n\t\t\t\tset(target, prop, value) {\n\t\t\t\t\tset(sources.get(prop) ?? add_source(prop, value), value);\n\t\t\t\t\treturn Reflect.set(target, prop, value);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tthis.#instance = (options.hydrate ? hydrate : mount)(options.component, {\n\t\t\ttarget: options.target,\n\t\t\tanchor: options.anchor,\n\t\t\tprops,\n\t\t\tcontext: options.context,\n\t\t\tintro: options.intro ?? false,\n\t\t\trecover: options.recover\n\t\t});\n\n\t\t// We don't flushSync for custom element wrappers or if the user doesn't want it,\n\t\t// or if we're in async mode since `flushSync()` will fail\n\t\tif (!async_mode_flag && (!options?.props?.$$host || options.sync === false)) {\n\t\t\tflushSync();\n\t\t}\n\n\t\tthis.#events = props.$$events;\n\n\t\tfor (const key of Object.keys(this.#instance)) {\n\t\t\tif (key === '$set' || key === '$destroy' || key === '$on') continue;\n\t\t\tdefine_property(this, key, {\n\t\t\t\tget() {\n\t\t\t\t\treturn this.#instance[key];\n\t\t\t\t},\n\t\t\t\t/** @param {any} value */\n\t\t\t\tset(value) {\n\t\t\t\t\tthis.#instance[key] = value;\n\t\t\t\t},\n\t\t\t\tenumerable: true\n\t\t\t});\n\t\t}\n\n\t\tthis.#instance.$set = /** @param {Record<string, any>} next */ (next) => {\n\t\t\tObject.assign(props, next);\n\t\t};\n\n\t\tthis.#instance.$destroy = () => {\n\t\t\tunmount(this.#instance);\n\t\t};\n\t}\n\n\t/** @param {Record<string, any>} props */\n\t$set(props) {\n\t\tthis.#instance.$set(props);\n\t}\n\n\t/**\n\t * @param {string} event\n\t * @param {(...args: any[]) => any} callback\n\t * @returns {any}\n\t */\n\t$on(event, callback) {\n\t\tthis.#events[event] = this.#events[event] || [];\n\n\t\t/** @param {any[]} args */\n\t\tconst cb = (...args) => callback.call(this, ...args);\n\t\tthis.#events[event].push(cb);\n\t\treturn () => {\n\t\t\tthis.#events[event] = this.#events[event].filter(/** @param {any} fn */ (fn) => fn !== cb);\n\t\t};\n\t}\n\n\t$destroy() {\n\t\tthis.#instance.$destroy();\n\t}\n}\n\n/**\n * Runs the given function once immediately on the server, and works like `$effect.pre` on the client.\n *\n * @deprecated Use this only as a temporary solution to migrate your component code to Svelte 5.\n * @param {() => void | (() => void)} fn\n * @returns {void}\n */\nexport function run(fn) {\n\tuser_pre_effect(() => {\n\t\tfn();\n\t\tvar effect = /** @type {import('#client').Effect} */ (active_effect);\n\t\t// If the effect is immediately made dirty again, mark it as maybe dirty to emulate legacy behaviour\n\t\tif ((effect.f & DIRTY) !== 0) {\n\t\t\tlet filename = \"a file (we can't know which one)\";\n\t\t\tif (DEV) {\n\t\t\t\t// @ts-ignore\n\t\t\t\tfilename = dev_current_component_function?.[FILENAME] ?? filename;\n\t\t\t}\n\t\t\tw.legacy_recursive_reactive_block(filename);\n\t\t\tset_signal_status(effect, MAYBE_DIRTY);\n\t\t}\n\t});\n}\n\n/**\n * Function to mimic the multiple listeners available in svelte 4\n * @deprecated\n * @param {EventListener[]} handlers\n * @returns {EventListener}\n */\nexport function handlers(...handlers) {\n\treturn function (event) {\n\t\tconst { stopImmediatePropagation } = event;\n\t\tlet stopped = false;\n\n\t\tevent.stopImmediatePropagation = () => {\n\t\t\tstopped = true;\n\t\t\tstopImmediatePropagation.call(event);\n\t\t};\n\n\t\tconst errors = [];\n\n\t\tfor (const handler of handlers) {\n\t\t\ttry {\n\t\t\t\t// @ts-expect-error `this` is not typed\n\t\t\t\thandler?.call(this, event);\n\t\t\t} catch (e) {\n\t\t\t\terrors.push(e);\n\t\t\t}\n\n\t\t\tif (stopped) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfor (let error of errors) {\n\t\t\tqueueMicrotask(() => {\n\t\t\t\tthrow error;\n\t\t\t});\n\t\t}\n\t};\n}\n\n/**\n * Function to create a `bubble` function that mimic the behavior of `on:click` without handler available in svelte 4.\n * @deprecated Use this only as a temporary solution to migrate your automatically delegated events in Svelte 5.\n */\nexport function createBubbler() {\n\tconst active_component_context = component_context;\n\tif (active_component_context === null) {\n\t\te.lifecycle_outside_component('createBubbler');\n\t}\n\n\treturn (/**@type {string}*/ type) => (/**@type {Event}*/ event) => {\n\t\tconst events = /** @type {Record<string, Function | Function[]>} */ (\n\t\t\tactive_component_context.s.$$events\n\t\t)?.[/** @type {any} */ (type)];\n\n\t\tif (events) {\n\t\t\tconst callbacks = is_array(events) ? events.slice() : [events];\n\t\t\tfor (const fn of callbacks) {\n\t\t\t\tfn.call(active_component_context.x, event);\n\t\t\t}\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\t\treturn true;\n\t};\n}\n\nexport {\n\tonce,\n\tpreventDefault,\n\tself,\n\tstopImmediatePropagation,\n\tstopPropagation,\n\ttrusted,\n\tpassive,\n\tnonpassive\n} from '../internal/client/dom/legacy/event-modifiers.js';\n", "import { createClassComponent } from '../../../../legacy/legacy-client.js';\nimport { effect_root, render_effect } from '../../reactivity/effects.js';\nimport { append } from '../template.js';\nimport { define_property, get_descriptor, object_keys } from '../../../shared/utils.js';\n\n/**\n * @typedef {Object} CustomElementPropDefinition\n * @property {string} [attribute]\n * @property {boolean} [reflect]\n * @property {'String'|'Boolean'|'Number'|'Array'|'Object'} [type]\n */\n\n/** @type {any} */\nlet SvelteElement;\n\nif (typeof HTMLElement === 'function') {\n\tSvelteElement = class extends HTMLElement {\n\t\t/** The Svelte component constructor */\n\t\t$$ctor;\n\t\t/** Slots */\n\t\t$$s;\n\t\t/** @type {any} The Svelte component instance */\n\t\t$$c;\n\t\t/** Whether or not the custom element is connected */\n\t\t$$cn = false;\n\t\t/** @type {Record<string, any>} Component props data */\n\t\t$$d = {};\n\t\t/** `true` if currently in the process of reflecting component props back to attributes */\n\t\t$$r = false;\n\t\t/** @type {Record<string, CustomElementPropDefinition>} Props definition (name, reflected, type etc) */\n\t\t$$p_d = {};\n\t\t/** @type {Record<string, EventListenerOrEventListenerObject[]>} Event listeners */\n\t\t$$l = {};\n\t\t/** @type {Map<EventListenerOrEventListenerObject, Function>} Event listener unsubscribe functions */\n\t\t$$l_u = new Map();\n\t\t/** @type {any} The managed render effect for reflecting attributes */\n\t\t$$me;\n\n\t\t/**\n\t\t * @param {*} $$componentCtor\n\t\t * @param {*} $$slots\n\t\t * @param {*} use_shadow_dom\n\t\t */\n\t\tconstructor($$componentCtor, $$slots, use_shadow_dom) {\n\t\t\tsuper();\n\t\t\tthis.$$ctor = $$componentCtor;\n\t\t\tthis.$$s = $$slots;\n\t\t\tif (use_shadow_dom) {\n\t\t\t\tthis.attachShadow({ mode: 'open' });\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * @param {string} type\n\t\t * @param {EventListenerOrEventListenerObject} listener\n\t\t * @param {boolean | AddEventListenerOptions} [options]\n\t\t */\n\t\taddEventListener(type, listener, options) {\n\t\t\t// We can't determine upfront if the event is a custom event or not, so we have to\n\t\t\t// listen to both. If someone uses a custom event with the same name as a regular\n\t\t\t// browser event, this fires twice - we can't avoid that.\n\t\t\tthis.$$l[type] = this.$$l[type] || [];\n\t\t\tthis.$$l[type].push(listener);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t}\n\t\t\tsuper.addEventListener(type, listener, options);\n\t\t}\n\n\t\t/**\n\t\t * @param {string} type\n\t\t * @param {EventListenerOrEventListenerObject} listener\n\t\t * @param {boolean | AddEventListenerOptions} [options]\n\t\t */\n\t\tremoveEventListener(type, listener, options) {\n\t\t\tsuper.removeEventListener(type, listener, options);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$l_u.get(listener);\n\t\t\t\tif (unsub) {\n\t\t\t\t\tunsub();\n\t\t\t\t\tthis.$$l_u.delete(listener);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tasync connectedCallback() {\n\t\t\tthis.$$cn = true;\n\t\t\tif (!this.$$c) {\n\t\t\t\t// We wait one tick to let possible child slot elements be created/mounted\n\t\t\t\tawait Promise.resolve();\n\t\t\t\tif (!this.$$cn || this.$$c) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t/** @param {string} name */\n\t\t\t\tfunction create_slot(name) {\n\t\t\t\t\t/**\n\t\t\t\t\t * @param {Element} anchor\n\t\t\t\t\t */\n\t\t\t\t\treturn (anchor) => {\n\t\t\t\t\t\tconst slot = document.createElement('slot');\n\t\t\t\t\t\tif (name !== 'default') slot.name = name;\n\n\t\t\t\t\t\tappend(anchor, slot);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t/** @type {Record<string, any>} */\n\t\t\t\tconst $$slots = {};\n\t\t\t\tconst existing_slots = get_custom_elements_slots(this);\n\t\t\t\tfor (const name of this.$$s) {\n\t\t\t\t\tif (name in existing_slots) {\n\t\t\t\t\t\tif (name === 'default' && !this.$$d.children) {\n\t\t\t\t\t\t\tthis.$$d.children = create_slot(name);\n\t\t\t\t\t\t\t$$slots.default = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$$slots[name] = create_slot(name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (const attribute of this.attributes) {\n\t\t\t\t\t// this.$$data takes precedence over this.attributes\n\t\t\t\t\tconst name = this.$$g_p(attribute.name);\n\t\t\t\t\tif (!(name in this.$$d)) {\n\t\t\t\t\t\tthis.$$d[name] = get_custom_element_value(name, attribute.value, this.$$p_d, 'toProp');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Port over props that were set programmatically before ce was initialized\n\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\tif (!(key in this.$$d) && this[key] !== undefined) {\n\t\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\t\tthis.$$d[key] = this[key]; // don't transform, these were set through JavaScript\n\t\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\t\tdelete this[key]; // remove the property that shadows the getter/setter\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$c = createClassComponent({\n\t\t\t\t\tcomponent: this.$$ctor,\n\t\t\t\t\ttarget: this.shadowRoot || this,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\t...this.$$d,\n\t\t\t\t\t\t$$slots,\n\t\t\t\t\t\t$$host: this\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Reflect component props as attributes\n\t\t\t\tthis.$$me = effect_root(() => {\n\t\t\t\t\trender_effect(() => {\n\t\t\t\t\t\tthis.$$r = true;\n\t\t\t\t\t\tfor (const key of object_keys(this.$$c)) {\n\t\t\t\t\t\t\tif (!this.$$p_d[key]?.reflect) continue;\n\t\t\t\t\t\t\tthis.$$d[key] = this.$$c[key];\n\t\t\t\t\t\t\tconst attribute_value = get_custom_element_value(\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tthis.$$d[key],\n\t\t\t\t\t\t\t\tthis.$$p_d,\n\t\t\t\t\t\t\t\t'toAttribute'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (attribute_value == null) {\n\t\t\t\t\t\t\t\tthis.removeAttribute(this.$$p_d[key].attribute || key);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setAttribute(this.$$p_d[key].attribute || key, attribute_value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.$$r = false;\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tfor (const type in this.$$l) {\n\t\t\t\t\tfor (const listener of this.$$l[type]) {\n\t\t\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$l = {};\n\t\t\t}\n\t\t}\n\n\t\t// We don't need this when working within Svelte code, but for compatibility of people using this outside of Svelte\n\t\t// and setting attributes through setAttribute etc, this is helpful\n\n\t\t/**\n\t\t * @param {string} attr\n\t\t * @param {string} _oldValue\n\t\t * @param {string} newValue\n\t\t */\n\t\tattributeChangedCallback(attr, _oldValue, newValue) {\n\t\t\tif (this.$$r) return;\n\t\t\tattr = this.$$g_p(attr);\n\t\t\tthis.$$d[attr] = get_custom_element_value(attr, newValue, this.$$p_d, 'toProp');\n\t\t\tthis.$$c?.$set({ [attr]: this.$$d[attr] });\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tthis.$$cn = false;\n\t\t\t// In a microtask, because this could be a move within the DOM\n\t\t\tPromise.resolve().then(() => {\n\t\t\t\tif (!this.$$cn && this.$$c) {\n\t\t\t\t\tthis.$$c.$destroy();\n\t\t\t\t\tthis.$$me();\n\t\t\t\t\tthis.$$c = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * @param {string} attribute_name\n\t\t */\n\t\t$$g_p(attribute_name) {\n\t\t\treturn (\n\t\t\t\tobject_keys(this.$$p_d).find(\n\t\t\t\t\t(key) =>\n\t\t\t\t\t\tthis.$$p_d[key].attribute === attribute_name ||\n\t\t\t\t\t\t(!this.$$p_d[key].attribute && key.toLowerCase() === attribute_name)\n\t\t\t\t) || attribute_name\n\t\t\t);\n\t\t}\n\t};\n}\n\n/**\n * @param {string} prop\n * @param {any} value\n * @param {Record<string, CustomElementPropDefinition>} props_definition\n * @param {'toAttribute' | 'toProp'} [transform]\n */\nfunction get_custom_element_value(prop, value, props_definition, transform) {\n\tconst type = props_definition[prop]?.type;\n\tvalue = type === 'Boolean' && typeof value !== 'boolean' ? value != null : value;\n\tif (!transform || !props_definition[prop]) {\n\t\treturn value;\n\t} else if (transform === 'toAttribute') {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value == null ? null : JSON.stringify(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value ? '' : null;\n\t\t\tcase 'Number':\n\t\t\t\treturn value == null ? null : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t} else {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value && JSON.parse(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value; // conversion already handled above\n\t\t\tcase 'Number':\n\t\t\t\treturn value != null ? +value : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t}\n}\n\n/**\n * @param {HTMLElement} element\n */\nfunction get_custom_elements_slots(element) {\n\t/** @type {Record<string, true>} */\n\tconst result = {};\n\telement.childNodes.forEach((node) => {\n\t\tresult[/** @type {Element} node */ (node).slot || 'default'] = true;\n\t});\n\treturn result;\n}\n\n/**\n * @internal\n *\n * Turn a Svelte component into a custom element.\n * @param {any} Component  A Svelte component function\n * @param {Record<string, CustomElementPropDefinition>} props_definition  The props to observe\n * @param {string[]} slots  The slots to create\n * @param {string[]} exports  Explicitly exported values, other than props\n * @param {boolean} use_shadow_dom  Whether to use shadow DOM\n * @param {(ce: new () => HTMLElement) => new () => HTMLElement} [extend]\n */\nexport function create_custom_element(\n\tComponent,\n\tprops_definition,\n\tslots,\n\texports,\n\tuse_shadow_dom,\n\textend\n) {\n\tlet Class = class extends SvelteElement {\n\t\tconstructor() {\n\t\t\tsuper(Component, slots, use_shadow_dom);\n\t\t\tthis.$$p_d = props_definition;\n\t\t}\n\t\tstatic get observedAttributes() {\n\t\t\treturn object_keys(props_definition).map((key) =>\n\t\t\t\t(props_definition[key].attribute || key).toLowerCase()\n\t\t\t);\n\t\t}\n\t};\n\tobject_keys(props_definition).forEach((prop) => {\n\t\tdefine_property(Class.prototype, prop, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c && prop in this.$$c ? this.$$c[prop] : this.$$d[prop];\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tvalue = get_custom_element_value(prop, value, props_definition);\n\t\t\t\tthis.$$d[prop] = value;\n\t\t\t\tvar component = this.$$c;\n\n\t\t\t\tif (component) {\n\t\t\t\t\t// // If the instance has an accessor, use that instead\n\t\t\t\t\tvar setter = get_descriptor(component, prop)?.get;\n\n\t\t\t\t\tif (setter) {\n\t\t\t\t\t\tcomponent[prop] = value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcomponent.$set({ [prop]: value });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\texports.forEach((property) => {\n\t\tdefine_property(Class.prototype, property, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c?.[property];\n\t\t\t}\n\t\t});\n\t});\n\tif (extend) {\n\t\t// @ts-expect-error - assigning here is fine\n\t\tClass = extend(Class);\n\t}\n\tComponent.element = /** @type {any} */ Class;\n\treturn Class;\n}\n", "import { STATE_SYMBOL } from '#client/constants';\nimport { snapshot } from '../../shared/clone.js';\nimport * as w from '../warnings.js';\nimport { untrack } from '../runtime.js';\n\n/**\n * @param {string} method\n * @param  {...any} objects\n */\nexport function log_if_contains_state(method, ...objects) {\n\tuntrack(() => {\n\t\ttry {\n\t\t\tlet has_state = false;\n\t\t\tconst transformed = [];\n\n\t\t\tfor (const obj of objects) {\n\t\t\t\tif (obj && typeof obj === 'object' && STATE_SYMBOL in obj) {\n\t\t\t\t\ttransformed.push(snapshot(obj, true));\n\t\t\t\t\thas_state = true;\n\t\t\t\t} else {\n\t\t\t\t\ttransformed.push(obj);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (has_state) {\n\t\t\t\tw.console_log_state(method);\n\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.log('%c[snapshot]', 'color: grey', ...transformed);\n\t\t\t}\n\t\t} catch {}\n\t});\n\n\treturn objects;\n}\n", "export { createAttachmentKey as attachment } from '../../attachments/index.js';\nexport { FILENAME, HMR, NAMESPACE_SVG } from '../../constants.js';\nexport { push, pop, add_svelte_meta } from './context.js';\nexport { assign, assign_and, assign_or, assign_nullish } from './dev/assign.js';\nexport { cleanup_styles } from './dev/css.js';\nexport { add_locations } from './dev/elements.js';\nexport { hmr } from './dev/hmr.js';\nexport { create_ownership_validator } from './dev/ownership.js';\nexport { check_target, legacy_api } from './dev/legacy.js';\nexport { trace, tag, tag_proxy } from './dev/tracing.js';\nexport { inspect } from './dev/inspect.js';\nexport { async } from './dom/blocks/async.js';\nexport { validate_snippet_args } from './dev/validation.js';\nexport { await_block as await } from './dom/blocks/await.js';\nexport { if_block as if } from './dom/blocks/if.js';\nexport { key } from './dom/blocks/key.js';\nexport { css_props } from './dom/blocks/css-props.js';\nexport { index, each } from './dom/blocks/each.js';\nexport { html } from './dom/blocks/html.js';\nexport { sanitize_slots, slot } from './dom/blocks/slot.js';\nexport { snippet, wrap_snippet } from './dom/blocks/snippet.js';\nexport { component } from './dom/blocks/svelte-component.js';\nexport { element } from './dom/blocks/svelte-element.js';\nexport { head } from './dom/blocks/svelte-head.js';\nexport { append_styles } from './dom/css.js';\nexport { action } from './dom/elements/actions.js';\nexport { attach } from './dom/elements/attachments.js';\nexport {\n\tremove_input_defaults,\n\tset_attribute,\n\tattribute_effect,\n\tset_custom_element_data,\n\tset_xlink_attribute,\n\tset_value,\n\tset_checked,\n\tset_selected,\n\tset_default_checked,\n\tset_default_value,\n\tCLASS,\n\tSTYLE\n} from './dom/elements/attributes.js';\nexport { set_class } from './dom/elements/class.js';\nexport { apply, event, delegate, replay_events } from './dom/elements/events.js';\nexport { autofocus, remove_textarea_child } from './dom/elements/misc.js';\nexport { customizable_select, selectedcontent } from './dom/elements/customizable-select.js';\nexport { set_style } from './dom/elements/style.js';\nexport { animation, transition } from './dom/elements/transitions.js';\nexport { bind_active_element } from './dom/elements/bindings/document.js';\nexport { bind_checked, bind_files, bind_group, bind_value } from './dom/elements/bindings/input.js';\nexport {\n\tbind_buffered,\n\tbind_current_time,\n\tbind_ended,\n\tbind_muted,\n\tbind_paused,\n\tbind_playback_rate,\n\tbind_played,\n\tbind_ready_state,\n\tbind_seekable,\n\tbind_seeking,\n\tbind_volume\n} from './dom/elements/bindings/media.js';\nexport { bind_online } from './dom/elements/bindings/navigator.js';\nexport { bind_prop } from './dom/elements/bindings/props.js';\nexport { bind_select_value, init_select, select_option } from './dom/elements/bindings/select.js';\nexport { bind_element_size, bind_resize_observer } from './dom/elements/bindings/size.js';\nexport { bind_this } from './dom/elements/bindings/this.js';\nexport {\n\tbind_content_editable,\n\tbind_property,\n\tbind_focused\n} from './dom/elements/bindings/universal.js';\nexport { bind_window_scroll, bind_window_size } from './dom/elements/bindings/window.js';\nexport { hydrate_template, next, reset } from './dom/hydration.js';\nexport {\n\tonce,\n\tpreventDefault,\n\tself,\n\tstopImmediatePropagation,\n\tstopPropagation,\n\ttrusted\n} from './dom/legacy/event-modifiers.js';\nexport { init } from './dom/legacy/lifecycle.js';\nexport {\n\tadd_legacy_event_listener,\n\tbubble_event,\n\treactive_import,\n\tupdate_legacy_props\n} from './dom/legacy/misc.js';\nexport {\n\tappend,\n\tcomment,\n\tfrom_html,\n\tfrom_mathml,\n\tfrom_svg,\n\tfrom_tree,\n\ttext,\n\tprops_id,\n\twith_script\n} from './dom/template.js';\nexport {\n\tfor_await_track_reactivity_loss,\n\trun,\n\tsave,\n\ttrack_reactivity_loss,\n\trun_after_blockers,\n\twait\n} from './reactivity/async.js';\nexport { eager, flushSync as flush } from './reactivity/batch.js';\nexport {\n\tasync_derived,\n\tuser_derived as derived,\n\tderived_safe_equal\n} from './reactivity/deriveds.js';\nexport {\n\taborted,\n\teffect_tracking,\n\teffect_root,\n\tlegacy_pre_effect,\n\tlegacy_pre_effect_reset,\n\trender_effect,\n\ttemplate_effect,\n\tdeferred_template_effect,\n\teffect,\n\tuser_effect,\n\tuser_pre_effect\n} from './reactivity/effects.js';\nexport { mutable_source, mutate, set, state, update, update_pre } from './reactivity/sources.js';\nexport {\n\tprop,\n\trest_props,\n\tlegacy_rest_props,\n\tspread_props,\n\tupdate_pre_prop,\n\tupdate_prop\n} from './reactivity/props.js';\nexport {\n\tinvalidate_store,\n\tstore_mutate,\n\tsetup_stores,\n\tstore_get,\n\tstore_set,\n\tstore_unsub,\n\tupdate_pre_store,\n\tupdate_store,\n\tmark_store_binding\n} from './reactivity/store.js';\nexport { boundary, pending } from './dom/blocks/boundary.js';\nexport { invalidate_inner_signals } from './legacy.js';\nexport { set_text } from './render.js';\nexport {\n\tget,\n\tsafe_get,\n\ttick,\n\tuntrack,\n\texclude_from_object,\n\tdeep_read,\n\tdeep_read_state,\n\tactive_effect\n} from './runtime.js';\nexport { validate_binding, validate_each_keys } from './validate.js';\nexport { raf } from './timing.js';\nexport { proxy } from './proxy.js';\nexport { create_custom_element } from './dom/elements/custom-element.js';\nexport {\n\tchild,\n\tfirst_child,\n\tsibling,\n\t$window as window,\n\t$document as document\n} from './dom/operations.js';\nexport { attr, clsx } from '../shared/attributes.js';\nexport { snapshot } from '../shared/clone.js';\nexport { noop, fallback, to_array } from '../shared/utils.js';\nexport {\n\tinvalid_default_snippet,\n\tvalidate_dynamic_element_tag,\n\tvalidate_store,\n\tvalidate_void_dynamic_element,\n\tprevent_snippet_stringification\n} from '../shared/validate.js';\nexport { strict_equals, equals } from './dev/equality.js';\nexport { log_if_contains_state } from './dev/console-log.js';\nexport { invoke_error_boundary } from './error-handling.js';\n", "import {\n  createPraxisEngine\n} from \"./chunk-VOMLVI6V.js\";\n\n// src/core/rules.ts\nvar PraxisRegistry = class {\n  rules = /* @__PURE__ */ new Map();\n  constraints = /* @__PURE__ */ new Map();\n  /**\n   * Register a rule\n   */\n  registerRule(descriptor) {\n    if (this.rules.has(descriptor.id)) {\n      throw new Error(`Rule with id \"${descriptor.id}\" already registered`);\n    }\n    this.rules.set(descriptor.id, descriptor);\n  }\n  /**\n   * Register a constraint\n   */\n  registerConstraint(descriptor) {\n    if (this.constraints.has(descriptor.id)) {\n      throw new Error(`Constraint with id \"${descriptor.id}\" already registered`);\n    }\n    this.constraints.set(descriptor.id, descriptor);\n  }\n  /**\n   * Register a module (all its rules and constraints)\n   */\n  registerModule(module) {\n    for (const rule of module.rules) {\n      this.registerRule(rule);\n    }\n    for (const constraint of module.constraints) {\n      this.registerConstraint(constraint);\n    }\n  }\n  /**\n   * Get a rule by ID\n   */\n  getRule(id) {\n    return this.rules.get(id);\n  }\n  /**\n   * Get a constraint by ID\n   */\n  getConstraint(id) {\n    return this.constraints.get(id);\n  }\n  /**\n   * Get all registered rule IDs\n   */\n  getRuleIds() {\n    return Array.from(this.rules.keys());\n  }\n  /**\n   * Get all registered constraint IDs\n   */\n  getConstraintIds() {\n    return Array.from(this.constraints.keys());\n  }\n  /**\n   * Get all rules\n   */\n  getAllRules() {\n    return Array.from(this.rules.values());\n  }\n  /**\n   * Get all constraints\n   */\n  getAllConstraints() {\n    return Array.from(this.constraints.values());\n  }\n};\n\n// src/core/reactive-engine.svelte.ts\nimport * as $ from \"svelte/internal/client\";\nvar ReactiveLogicEngine = class {\n  #state = (\n    // Use Svelte's $state rune for automatic reactivity\n    $.state($.proxy({ context: {}, facts: [], meta: {} }))\n  );\n  get state() {\n    return $.get(this.#state);\n  }\n  set state(value) {\n    $.set(this.#state, value, true);\n  }\n  _engine;\n  constructor(options) {\n    this.state.context = options.initialContext;\n    this.state.facts = options.initialFacts ?? [];\n    this.state.meta = options.initialMeta ?? {};\n    if (options.registry) {\n      this._engine = createPraxisEngine({\n        initialContext: options.initialContext,\n        registry: options.registry\n      });\n    } else {\n      this._engine = createPraxisEngine({\n        initialContext: options.initialContext,\n        registry: new PraxisRegistry()\n      });\n    }\n  }\n  /**\n   * Access the reactive context.\n   * In Svelte 5 components, changes to this object will automatically trigger updates.\n   */\n  get context() {\n    return this.state.context;\n  }\n  /**\n   * Access the reactive facts list.\n   */\n  get facts() {\n    return this.state.facts;\n  }\n  /**\n   * Access the reactive metadata.\n   */\n  get meta() {\n    return this.state.meta;\n  }\n  /**\n   * Apply a mutation to the state.\n   * Changes will automatically trigger Svelte reactivity.\n   * \n   * @param mutator A function that receives the state and modifies it.\n   */\n  apply(mutator) {\n    mutator(this.state);\n  }\n  /**\n   * Process events through the logic engine and update reactive state.\n   * \n   * @param events Events to process\n   */\n  step(events) {\n    const result = this._engine.step(events);\n    this.state.context = result.state.context;\n    this.state.facts = result.state.facts;\n    this.state.meta = result.state.meta ?? {};\n  }\n};\nfunction createReactiveEngine(options) {\n  return new ReactiveLogicEngine(options);\n}\n\nexport {\n  PraxisRegistry,\n  ReactiveLogicEngine,\n  createReactiveEngine\n};\n", "// src/runtime/terminal-adapter.ts\nasync function defaultExecutor(command, options) {\n  try {\n    const { exec } = await import(\"child_process\");\n    const { promisify } = await import(\"util\");\n    const execAsync = promisify(exec);\n    const processEnv = typeof process !== \"undefined\" ? process.env : {};\n    const result = await execAsync(command, {\n      cwd: options.cwd,\n      env: { ...processEnv, ...options.env },\n      maxBuffer: 10 * 1024 * 1024,\n      // 10MB buffer\n      timeout: 6e4\n      // 60 second timeout\n    });\n    return {\n      output: result.stdout + (result.stderr ? `\n${result.stderr}` : \"\"),\n      exitCode: 0\n    };\n  } catch (error) {\n    const execError = error;\n    return {\n      output: (execError.stdout || \"\") + (execError.stderr || \"\"),\n      exitCode: execError.code || 1,\n      error: execError.message || \"Command execution failed\"\n    };\n  }\n}\nvar TerminalAdapter = class {\n  state;\n  inputPath;\n  outputPath;\n  db;\n  executor;\n  constructor(options) {\n    this.state = {\n      nodeId: options.nodeId,\n      inputMode: options.props?.inputMode || \"text\",\n      history: options.props?.history || [],\n      lastOutput: options.props?.lastOutput || null,\n      cwd: options.cwd,\n      env: options.env\n    };\n    this.inputPath = options.inputPath;\n    this.outputPath = options.outputPath;\n    this.db = options.db;\n    this.executor = options.executor || defaultExecutor;\n  }\n  /**\n   * Execute a terminal command\n   *\n   * @param command - Command to execute\n   * @returns Execution result\n   */\n  async executeCommand(command) {\n    this.state.history.push(command);\n    const timestamp = Date.now();\n    const { output, exitCode, error } = await this.executor(command, {\n      cwd: this.state.cwd,\n      env: this.state.env\n    });\n    const result = {\n      command,\n      output,\n      exitCode,\n      timestamp,\n      error\n    };\n    this.state.lastOutput = output;\n    if (this.db && this.outputPath) {\n      await this.syncToPluresDB(this.outputPath, result);\n    }\n    return result;\n  }\n  /**\n   * Get current terminal state\n   */\n  getState() {\n    return { ...this.state };\n  }\n  /**\n   * Update terminal props\n   */\n  updateProps(props) {\n    this.state = {\n      ...this.state,\n      ...props\n    };\n  }\n  /**\n   * Set working directory\n   */\n  setCwd(cwd) {\n    this.state.cwd = cwd;\n  }\n  /**\n   * Set environment variables\n   */\n  setEnv(env) {\n    this.state.env = { ...this.state.env, ...env };\n  }\n  /**\n   * Clear command history\n   */\n  clearHistory() {\n    this.state.history = [];\n  }\n  /**\n   * Get command history\n   */\n  getHistory() {\n    return [...this.state.history];\n  }\n  /**\n   * Sync state to PluresDB\n   *\n   * @param path - PluresDB path for storing results\n   * @param data - Data to sync\n   */\n  async syncToPluresDB(path, data) {\n    if (!this.db) return;\n    try {\n      await this.db.set(path, {\n        ...data,\n        nodeId: this.state.nodeId,\n        syncedAt: Date.now()\n      });\n      const historyPath = `${path}/history`;\n      const historyKey = `${historyPath}/${data.timestamp}`;\n      await this.db.set(historyKey, data);\n    } catch (error) {\n      console.warn(\"Failed to sync to PluresDB:\", error);\n    }\n  }\n  /**\n   * Load state from PluresDB\n   */\n  async loadFromPluresDB() {\n    if (!this.db || !this.inputPath) return;\n    try {\n      const data = await this.db.get(this.inputPath);\n      if (data && typeof data === \"object\") {\n        const savedState = data;\n        if (savedState.history) {\n          this.state.history = savedState.history;\n        }\n        if (savedState.lastOutput !== void 0) {\n          this.state.lastOutput = savedState.lastOutput;\n        }\n        if (savedState.cwd) {\n          this.state.cwd = savedState.cwd;\n        }\n        if (savedState.env) {\n          this.state.env = savedState.env;\n        }\n      }\n    } catch (error) {\n      console.warn(\"Failed to load from PluresDB:\", error);\n    }\n  }\n  /**\n   * Subscribe to input changes from PluresDB\n   */\n  watchInput(callback) {\n    if (!this.db || !this.inputPath) return null;\n    return this.db.watch(this.inputPath, (data) => {\n      if (data && typeof data === \"object\" && \"command\" in data) {\n        callback(data.command);\n      }\n    });\n  }\n};\nfunction createTerminalAdapter(options) {\n  return new TerminalAdapter(options);\n}\nasync function runTerminalCommand(nodeId, command, options) {\n  const adapter = createTerminalAdapter({\n    nodeId,\n    cwd: options?.cwd,\n    env: options?.env,\n    db: options?.db,\n    executor: options?.executor\n  });\n  return adapter.executeCommand(command);\n}\nfunction createMockExecutor(responses) {\n  return async (command) => {\n    const response = responses[command] || responses[\"*\"] || {\n      output: `Mock output for: ${command}`,\n      exitCode: 0\n    };\n    return response;\n  };\n}\n\nexport {\n  TerminalAdapter,\n  createTerminalAdapter,\n  runTerminalCommand,\n  createMockExecutor\n};\n", "// src/core/pluresdb/generator.ts\nvar PluresDBGenerator = class {\n  options;\n  constructor(options) {\n    this.options = {\n      dbVersion: 1,\n      enableSync: false,\n      autoIndex: \"all\",\n      // Default to indexing all fields for backward compatibility\n      ...options\n    };\n  }\n  /**\n   * Generate PluresDB configuration from schema\n   */\n  generateConfig(schema) {\n    const files = [];\n    files.push(this.generateConfigFile(schema));\n    return files;\n  }\n  /**\n   * Generate pluresdb-config.ts file\n   */\n  generateConfigFile(schema) {\n    const lines = [];\n    const dbName = this.options.dbName || schema.name.toLowerCase();\n    lines.push(\"/**\");\n    lines.push(` * PluresDB Configuration for ${schema.name}`);\n    lines.push(\" * Generated from Praxis schema\");\n    lines.push(\" */\");\n    lines.push(\"\");\n    lines.push(\"// import { createPluresDB } from '@plures/pluresdb';\");\n    lines.push(\"\");\n    lines.push(\"/**\");\n    lines.push(\" * Database store configuration\");\n    lines.push(\" * \");\n    const autoIndexStrategy = this.options.autoIndex || \"all\";\n    if (autoIndexStrategy === \"all\") {\n      lines.push(\" * Indexing: All string, number, and date fields are auto-indexed by default.\");\n      lines.push(' * For large datasets, consider using autoIndex: \"explicit\" to only index');\n      lines.push(\" * fields explicitly defined in the schema.\");\n    } else if (autoIndexStrategy === \"explicit\") {\n      lines.push(\" * Indexing: Only fields explicitly defined in schema indexes are indexed.\");\n    } else if (autoIndexStrategy === \"none\") {\n      lines.push(\" * Indexing: Auto-indexing disabled. Only explicit schema indexes are used.\");\n    }\n    lines.push(\" */\");\n    lines.push(\"export const stores = {\");\n    if (schema.models && schema.models.length > 0) {\n      for (const model of schema.models) {\n        const storeName = model.name.toLowerCase() + \"s\";\n        const storeConfig = this.generateStoreConfig(model);\n        lines.push(`  ${storeName}: {`);\n        lines.push(`    keyPath: '${storeConfig.keyPath}',`);\n        if (storeConfig.indexes.length > 0) {\n          lines.push(`    indexes: [${storeConfig.indexes.map((idx) => `'${idx}'`).join(\", \")}],`);\n        }\n        lines.push(\"  },\");\n      }\n    } else {\n      lines.push(\"  // No models defined in schema\");\n    }\n    lines.push(\"};\");\n    lines.push(\"\");\n    lines.push(\"/**\");\n    lines.push(\" * Database configuration\");\n    lines.push(\" */\");\n    lines.push(\"export const dbConfig = {\");\n    lines.push(`  name: '${dbName}',`);\n    lines.push(`  version: ${this.options.dbVersion},`);\n    lines.push(\"  stores,\");\n    if (this.options.enableSync) {\n      lines.push(\"  sync: {\");\n      lines.push(\"    enabled: true,\");\n      if (this.options.syncEndpoint) {\n        lines.push(`    endpoint: '${this.options.syncEndpoint}',`);\n      } else {\n        lines.push(\"    endpoint: 'ws://localhost:8080/sync',\");\n      }\n      lines.push(\"    conflictResolution: 'last-write-wins',\");\n      lines.push(\"  },\");\n    }\n    lines.push(\"};\");\n    lines.push(\"\");\n    lines.push(\"/**\");\n    lines.push(\" * Initialize PluresDB\");\n    lines.push(\" * @returns Configured PluresDB instance\");\n    lines.push(\" */\");\n    lines.push(\"export function initDB() {\");\n    lines.push(\"  // Create and configure PluresDB instance\");\n    lines.push(\"  const db = createInMemoryDB();\");\n    lines.push(\"  \");\n    lines.push(\"  // Initialize stores based on configuration\");\n    lines.push(\"  for (const storeDef of dbConfig.stores) {\");\n    lines.push(\"    // Pre-create store paths\");\n    lines.push(\"    db.set(`stores/${storeDef.name}/_meta`, {\");\n    lines.push(\"      keyPath: storeDef.keyPath,\");\n    lines.push(\"      indexes: storeDef.indexes,\");\n    lines.push(\"      createdAt: Date.now(),\");\n    lines.push(\"    });\");\n    lines.push(\"  }\");\n    lines.push(\"  \");\n    lines.push(\"  console.log(`PluresDB initialized: ${dbConfig.name}`);\");\n    lines.push(\"  return db;\");\n    lines.push(\"}\");\n    lines.push(\"\");\n    lines.push(\"/**\");\n    lines.push(\" * Get store by name\");\n    lines.push(\" */\");\n    lines.push(\n      \"export function getStore(db: ReturnType<typeof createInMemoryDB>, storeName: string) {\"\n    );\n    lines.push(\"  const storeDef = dbConfig.stores.find(s => s.name === storeName);\");\n    lines.push(\"  if (!storeDef) {\");\n    lines.push('    throw new Error(`Store \"${storeName}\" not found in configuration`);');\n    lines.push(\"  }\");\n    lines.push(\"  return {\");\n    lines.push(\"    get: (key: string) => db.get(`stores/${storeName}/${key}`),\");\n    lines.push(\n      \"    set: (key: string, value: unknown) => db.set(`stores/${storeName}/${key}`, value),\"\n    );\n    lines.push(\"    delete: (key: string) => db.delete(`stores/${storeName}/${key}`),\");\n    lines.push(\"    watch: (key: string, callback: (data: unknown) => void) => \");\n    lines.push(\"      db.watch(`stores/${storeName}/${key}`, callback),\");\n    lines.push(\"  };\");\n    lines.push(\"}\");\n    return {\n      path: `${this.options.outputDir}/pluresdb-config.ts`,\n      content: lines.join(\"\\n\"),\n      type: \"config\"\n    };\n  }\n  /**\n   * Generate store configuration for a model\n   */\n  generateStoreConfig(model) {\n    const idField = model.fields.find((f) => f.name === \"id\" || f.name === \"_id\");\n    const keyPath = idField ? idField.name : \"id\";\n    const indexes = [];\n    const autoIndexStrategy = this.options.autoIndex || \"all\";\n    if (autoIndexStrategy === \"all\") {\n      for (const field of model.fields) {\n        if (field.name !== keyPath) {\n          if (field.type === \"string\" || field.type === \"number\" || field.type === \"date\") {\n            indexes.push(field.name);\n          }\n        }\n      }\n    }\n    if (model.indexes) {\n      for (const indexDef of model.indexes) {\n        for (const fieldName of indexDef.fields) {\n          if (!indexes.includes(fieldName) && fieldName !== keyPath) {\n            indexes.push(fieldName);\n          }\n        }\n      }\n    }\n    return {\n      keyPath,\n      indexes\n    };\n  }\n};\nfunction createPluresDBGenerator(outputDir, options) {\n  return new PluresDBGenerator({\n    outputDir,\n    ...options\n  });\n}\n\nexport {\n  PluresDBGenerator,\n  createPluresDBGenerator\n};\n", "// src/core/schema/types.ts\nfunction validateSchema(schema) {\n  const errors = [];\n  if (!schema.version) {\n    errors.push({ path: \"version\", message: \"Schema version is required\" });\n  }\n  if (!schema.name) {\n    errors.push({ path: \"name\", message: \"Schema name is required\" });\n  }\n  if (schema.models) {\n    schema.models.forEach((model, index) => {\n      if (!model.name) {\n        errors.push({\n          path: `models[${index}].name`,\n          message: \"Model name is required\"\n        });\n      }\n      if (!model.fields || model.fields.length === 0) {\n        errors.push({\n          path: `models[${index}].fields`,\n          message: \"Model must have at least one field\"\n        });\n      }\n    });\n  }\n  if (schema.components) {\n    schema.components.forEach((component, index) => {\n      if (!component.name) {\n        errors.push({\n          path: `components[${index}].name`,\n          message: \"Component name is required\"\n        });\n      }\n      if (!component.type) {\n        errors.push({\n          path: `components[${index}].type`,\n          message: \"Component type is required\"\n        });\n      }\n    });\n  }\n  if (schema.logic) {\n    schema.logic.forEach((logic, logicIndex) => {\n      if (logic.facts) {\n        logic.facts.forEach((fact, factIndex) => {\n          if (!fact.tag) {\n            errors.push({\n              path: `logic[${logicIndex}].facts[${factIndex}].tag`,\n              message: \"Fact tag is required\"\n            });\n          } else if (!isValidIdentifier(fact.tag)) {\n            errors.push({\n              path: `logic[${logicIndex}].facts[${factIndex}].tag`,\n              message: `Fact tag \"${fact.tag}\" is not a valid JavaScript identifier. Use only letters, numbers, underscores, and dollar signs, and do not start with a number.`\n            });\n          }\n        });\n      }\n      if (logic.events) {\n        logic.events.forEach((event, eventIndex) => {\n          if (!event.tag) {\n            errors.push({\n              path: `logic[${logicIndex}].events[${eventIndex}].tag`,\n              message: \"Event tag is required\"\n            });\n          } else if (!isValidIdentifier(event.tag)) {\n            errors.push({\n              path: `logic[${logicIndex}].events[${eventIndex}].tag`,\n              message: `Event tag \"${event.tag}\" is not a valid JavaScript identifier. Use only letters, numbers, underscores, and dollar signs, and do not start with a number.`\n            });\n          }\n        });\n      }\n    });\n  }\n  if (schema.orchestration?.nodes) {\n    schema.orchestration.nodes.forEach((node, index) => {\n      if (!node.id) {\n        errors.push({\n          path: `orchestration.nodes[${index}].id`,\n          message: \"Node id is required\"\n        });\n      }\n      if (!node.type) {\n        errors.push({\n          path: `orchestration.nodes[${index}].type`,\n          message: \"Node type is required\"\n        });\n      }\n      if (node.type === \"terminal\" && node.props) {\n        const props = node.props;\n        if (props.inputMode && ![\"text\", \"widget\"].includes(props.inputMode)) {\n          errors.push({\n            path: `orchestration.nodes[${index}].props.inputMode`,\n            message: 'Terminal node inputMode must be \"text\" or \"widget\"'\n          });\n        }\n        if (props.history && !Array.isArray(props.history)) {\n          errors.push({\n            path: `orchestration.nodes[${index}].props.history`,\n            message: \"Terminal node history must be an array\"\n          });\n        }\n      }\n    });\n  }\n  return {\n    valid: errors.length === 0,\n    errors\n  };\n}\nfunction isValidIdentifier(str) {\n  const identifierRegex = /^[a-zA-Z_$][a-zA-Z0-9_$]*$/;\n  const reservedKeywords = [\n    \"break\",\n    \"case\",\n    \"catch\",\n    \"class\",\n    \"const\",\n    \"continue\",\n    \"debugger\",\n    \"default\",\n    \"delete\",\n    \"do\",\n    \"else\",\n    \"export\",\n    \"extends\",\n    \"finally\",\n    \"for\",\n    \"function\",\n    \"if\",\n    \"import\",\n    \"in\",\n    \"instanceof\",\n    \"new\",\n    \"return\",\n    \"super\",\n    \"switch\",\n    \"this\",\n    \"throw\",\n    \"try\",\n    \"typeof\",\n    \"var\",\n    \"void\",\n    \"while\",\n    \"with\",\n    \"yield\",\n    \"let\",\n    \"static\",\n    \"enum\",\n    \"await\",\n    \"implements\",\n    \"interface\",\n    \"package\",\n    \"private\",\n    \"protected\",\n    \"public\"\n  ];\n  return identifierRegex.test(str) && !reservedKeywords.includes(str);\n}\nfunction createSchemaTemplate(name) {\n  return {\n    version: \"1.0.0\",\n    name,\n    description: `Schema for ${name}`,\n    models: [],\n    components: [],\n    logic: []\n  };\n}\n\nexport {\n  validateSchema,\n  createSchemaTemplate\n};\n", "\n/*! js-yaml 4.1.1 https://github.com/nodeca/js-yaml @license MIT */\nfunction isNothing(subject) {\n  return (typeof subject === 'undefined') || (subject === null);\n}\n\n\nfunction isObject(subject) {\n  return (typeof subject === 'object') && (subject !== null);\n}\n\n\nfunction toArray(sequence) {\n  if (Array.isArray(sequence)) return sequence;\n  else if (isNothing(sequence)) return [];\n\n  return [ sequence ];\n}\n\n\nfunction extend(target, source) {\n  var index, length, key, sourceKeys;\n\n  if (source) {\n    sourceKeys = Object.keys(source);\n\n    for (index = 0, length = sourceKeys.length; index < length; index += 1) {\n      key = sourceKeys[index];\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\n\nfunction repeat(string, count) {\n  var result = '', cycle;\n\n  for (cycle = 0; cycle < count; cycle += 1) {\n    result += string;\n  }\n\n  return result;\n}\n\n\nfunction isNegativeZero(number) {\n  return (number === 0) && (Number.NEGATIVE_INFINITY === 1 / number);\n}\n\n\nvar isNothing_1      = isNothing;\nvar isObject_1       = isObject;\nvar toArray_1        = toArray;\nvar repeat_1         = repeat;\nvar isNegativeZero_1 = isNegativeZero;\nvar extend_1         = extend;\n\nvar common = {\n\tisNothing: isNothing_1,\n\tisObject: isObject_1,\n\ttoArray: toArray_1,\n\trepeat: repeat_1,\n\tisNegativeZero: isNegativeZero_1,\n\textend: extend_1\n};\n\n// YAML error class. http://stackoverflow.com/questions/8458984\n\n\nfunction formatError(exception, compact) {\n  var where = '', message = exception.reason || '(unknown reason)';\n\n  if (!exception.mark) return message;\n\n  if (exception.mark.name) {\n    where += 'in \"' + exception.mark.name + '\" ';\n  }\n\n  where += '(' + (exception.mark.line + 1) + ':' + (exception.mark.column + 1) + ')';\n\n  if (!compact && exception.mark.snippet) {\n    where += '\\n\\n' + exception.mark.snippet;\n  }\n\n  return message + ' ' + where;\n}\n\n\nfunction YAMLException$1(reason, mark) {\n  // Super constructor\n  Error.call(this);\n\n  this.name = 'YAMLException';\n  this.reason = reason;\n  this.mark = mark;\n  this.message = formatError(this, false);\n\n  // Include stack trace in error object\n  if (Error.captureStackTrace) {\n    // Chrome and NodeJS\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    // FF, IE 10+ and Safari 6+. Fallback for others\n    this.stack = (new Error()).stack || '';\n  }\n}\n\n\n// Inherit from Error\nYAMLException$1.prototype = Object.create(Error.prototype);\nYAMLException$1.prototype.constructor = YAMLException$1;\n\n\nYAMLException$1.prototype.toString = function toString(compact) {\n  return this.name + ': ' + formatError(this, compact);\n};\n\n\nvar exception = YAMLException$1;\n\n// get snippet for a single line, respecting maxLength\nfunction getLine(buffer, lineStart, lineEnd, position, maxLineLength) {\n  var head = '';\n  var tail = '';\n  var maxHalfLength = Math.floor(maxLineLength / 2) - 1;\n\n  if (position - lineStart > maxHalfLength) {\n    head = ' ... ';\n    lineStart = position - maxHalfLength + head.length;\n  }\n\n  if (lineEnd - position > maxHalfLength) {\n    tail = ' ...';\n    lineEnd = position + maxHalfLength - tail.length;\n  }\n\n  return {\n    str: head + buffer.slice(lineStart, lineEnd).replace(/\\t/g, '\u2192') + tail,\n    pos: position - lineStart + head.length // relative position\n  };\n}\n\n\nfunction padStart(string, max) {\n  return common.repeat(' ', max - string.length) + string;\n}\n\n\nfunction makeSnippet(mark, options) {\n  options = Object.create(options || null);\n\n  if (!mark.buffer) return null;\n\n  if (!options.maxLength) options.maxLength = 79;\n  if (typeof options.indent      !== 'number') options.indent      = 1;\n  if (typeof options.linesBefore !== 'number') options.linesBefore = 3;\n  if (typeof options.linesAfter  !== 'number') options.linesAfter  = 2;\n\n  var re = /\\r?\\n|\\r|\\0/g;\n  var lineStarts = [ 0 ];\n  var lineEnds = [];\n  var match;\n  var foundLineNo = -1;\n\n  while ((match = re.exec(mark.buffer))) {\n    lineEnds.push(match.index);\n    lineStarts.push(match.index + match[0].length);\n\n    if (mark.position <= match.index && foundLineNo < 0) {\n      foundLineNo = lineStarts.length - 2;\n    }\n  }\n\n  if (foundLineNo < 0) foundLineNo = lineStarts.length - 1;\n\n  var result = '', i, line;\n  var lineNoLength = Math.min(mark.line + options.linesAfter, lineEnds.length).toString().length;\n  var maxLineLength = options.maxLength - (options.indent + lineNoLength + 3);\n\n  for (i = 1; i <= options.linesBefore; i++) {\n    if (foundLineNo - i < 0) break;\n    line = getLine(\n      mark.buffer,\n      lineStarts[foundLineNo - i],\n      lineEnds[foundLineNo - i],\n      mark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo - i]),\n      maxLineLength\n    );\n    result = common.repeat(' ', options.indent) + padStart((mark.line - i + 1).toString(), lineNoLength) +\n      ' | ' + line.str + '\\n' + result;\n  }\n\n  line = getLine(mark.buffer, lineStarts[foundLineNo], lineEnds[foundLineNo], mark.position, maxLineLength);\n  result += common.repeat(' ', options.indent) + padStart((mark.line + 1).toString(), lineNoLength) +\n    ' | ' + line.str + '\\n';\n  result += common.repeat('-', options.indent + lineNoLength + 3 + line.pos) + '^' + '\\n';\n\n  for (i = 1; i <= options.linesAfter; i++) {\n    if (foundLineNo + i >= lineEnds.length) break;\n    line = getLine(\n      mark.buffer,\n      lineStarts[foundLineNo + i],\n      lineEnds[foundLineNo + i],\n      mark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo + i]),\n      maxLineLength\n    );\n    result += common.repeat(' ', options.indent) + padStart((mark.line + i + 1).toString(), lineNoLength) +\n      ' | ' + line.str + '\\n';\n  }\n\n  return result.replace(/\\n$/, '');\n}\n\n\nvar snippet = makeSnippet;\n\nvar TYPE_CONSTRUCTOR_OPTIONS = [\n  'kind',\n  'multi',\n  'resolve',\n  'construct',\n  'instanceOf',\n  'predicate',\n  'represent',\n  'representName',\n  'defaultStyle',\n  'styleAliases'\n];\n\nvar YAML_NODE_KINDS = [\n  'scalar',\n  'sequence',\n  'mapping'\n];\n\nfunction compileStyleAliases(map) {\n  var result = {};\n\n  if (map !== null) {\n    Object.keys(map).forEach(function (style) {\n      map[style].forEach(function (alias) {\n        result[String(alias)] = style;\n      });\n    });\n  }\n\n  return result;\n}\n\nfunction Type$1(tag, options) {\n  options = options || {};\n\n  Object.keys(options).forEach(function (name) {\n    if (TYPE_CONSTRUCTOR_OPTIONS.indexOf(name) === -1) {\n      throw new exception('Unknown option \"' + name + '\" is met in definition of \"' + tag + '\" YAML type.');\n    }\n  });\n\n  // TODO: Add tag format check.\n  this.options       = options; // keep original options in case user wants to extend this type later\n  this.tag           = tag;\n  this.kind          = options['kind']          || null;\n  this.resolve       = options['resolve']       || function () { return true; };\n  this.construct     = options['construct']     || function (data) { return data; };\n  this.instanceOf    = options['instanceOf']    || null;\n  this.predicate     = options['predicate']     || null;\n  this.represent     = options['represent']     || null;\n  this.representName = options['representName'] || null;\n  this.defaultStyle  = options['defaultStyle']  || null;\n  this.multi         = options['multi']         || false;\n  this.styleAliases  = compileStyleAliases(options['styleAliases'] || null);\n\n  if (YAML_NODE_KINDS.indexOf(this.kind) === -1) {\n    throw new exception('Unknown kind \"' + this.kind + '\" is specified for \"' + tag + '\" YAML type.');\n  }\n}\n\nvar type = Type$1;\n\n/*eslint-disable max-len*/\n\n\n\n\n\nfunction compileList(schema, name) {\n  var result = [];\n\n  schema[name].forEach(function (currentType) {\n    var newIndex = result.length;\n\n    result.forEach(function (previousType, previousIndex) {\n      if (previousType.tag === currentType.tag &&\n          previousType.kind === currentType.kind &&\n          previousType.multi === currentType.multi) {\n\n        newIndex = previousIndex;\n      }\n    });\n\n    result[newIndex] = currentType;\n  });\n\n  return result;\n}\n\n\nfunction compileMap(/* lists... */) {\n  var result = {\n        scalar: {},\n        sequence: {},\n        mapping: {},\n        fallback: {},\n        multi: {\n          scalar: [],\n          sequence: [],\n          mapping: [],\n          fallback: []\n        }\n      }, index, length;\n\n  function collectType(type) {\n    if (type.multi) {\n      result.multi[type.kind].push(type);\n      result.multi['fallback'].push(type);\n    } else {\n      result[type.kind][type.tag] = result['fallback'][type.tag] = type;\n    }\n  }\n\n  for (index = 0, length = arguments.length; index < length; index += 1) {\n    arguments[index].forEach(collectType);\n  }\n  return result;\n}\n\n\nfunction Schema$1(definition) {\n  return this.extend(definition);\n}\n\n\nSchema$1.prototype.extend = function extend(definition) {\n  var implicit = [];\n  var explicit = [];\n\n  if (definition instanceof type) {\n    // Schema.extend(type)\n    explicit.push(definition);\n\n  } else if (Array.isArray(definition)) {\n    // Schema.extend([ type1, type2, ... ])\n    explicit = explicit.concat(definition);\n\n  } else if (definition && (Array.isArray(definition.implicit) || Array.isArray(definition.explicit))) {\n    // Schema.extend({ explicit: [ type1, type2, ... ], implicit: [ type1, type2, ... ] })\n    if (definition.implicit) implicit = implicit.concat(definition.implicit);\n    if (definition.explicit) explicit = explicit.concat(definition.explicit);\n\n  } else {\n    throw new exception('Schema.extend argument should be a Type, [ Type ], ' +\n      'or a schema definition ({ implicit: [...], explicit: [...] })');\n  }\n\n  implicit.forEach(function (type$1) {\n    if (!(type$1 instanceof type)) {\n      throw new exception('Specified list of YAML types (or a single Type object) contains a non-Type object.');\n    }\n\n    if (type$1.loadKind && type$1.loadKind !== 'scalar') {\n      throw new exception('There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.');\n    }\n\n    if (type$1.multi) {\n      throw new exception('There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.');\n    }\n  });\n\n  explicit.forEach(function (type$1) {\n    if (!(type$1 instanceof type)) {\n      throw new exception('Specified list of YAML types (or a single Type object) contains a non-Type object.');\n    }\n  });\n\n  var result = Object.create(Schema$1.prototype);\n\n  result.implicit = (this.implicit || []).concat(implicit);\n  result.explicit = (this.explicit || []).concat(explicit);\n\n  result.compiledImplicit = compileList(result, 'implicit');\n  result.compiledExplicit = compileList(result, 'explicit');\n  result.compiledTypeMap  = compileMap(result.compiledImplicit, result.compiledExplicit);\n\n  return result;\n};\n\n\nvar schema = Schema$1;\n\nvar str = new type('tag:yaml.org,2002:str', {\n  kind: 'scalar',\n  construct: function (data) { return data !== null ? data : ''; }\n});\n\nvar seq = new type('tag:yaml.org,2002:seq', {\n  kind: 'sequence',\n  construct: function (data) { return data !== null ? data : []; }\n});\n\nvar map = new type('tag:yaml.org,2002:map', {\n  kind: 'mapping',\n  construct: function (data) { return data !== null ? data : {}; }\n});\n\nvar failsafe = new schema({\n  explicit: [\n    str,\n    seq,\n    map\n  ]\n});\n\nfunction resolveYamlNull(data) {\n  if (data === null) return true;\n\n  var max = data.length;\n\n  return (max === 1 && data === '~') ||\n         (max === 4 && (data === 'null' || data === 'Null' || data === 'NULL'));\n}\n\nfunction constructYamlNull() {\n  return null;\n}\n\nfunction isNull(object) {\n  return object === null;\n}\n\nvar _null = new type('tag:yaml.org,2002:null', {\n  kind: 'scalar',\n  resolve: resolveYamlNull,\n  construct: constructYamlNull,\n  predicate: isNull,\n  represent: {\n    canonical: function () { return '~';    },\n    lowercase: function () { return 'null'; },\n    uppercase: function () { return 'NULL'; },\n    camelcase: function () { return 'Null'; },\n    empty:     function () { return '';     }\n  },\n  defaultStyle: 'lowercase'\n});\n\nfunction resolveYamlBoolean(data) {\n  if (data === null) return false;\n\n  var max = data.length;\n\n  return (max === 4 && (data === 'true' || data === 'True' || data === 'TRUE')) ||\n         (max === 5 && (data === 'false' || data === 'False' || data === 'FALSE'));\n}\n\nfunction constructYamlBoolean(data) {\n  return data === 'true' ||\n         data === 'True' ||\n         data === 'TRUE';\n}\n\nfunction isBoolean(object) {\n  return Object.prototype.toString.call(object) === '[object Boolean]';\n}\n\nvar bool = new type('tag:yaml.org,2002:bool', {\n  kind: 'scalar',\n  resolve: resolveYamlBoolean,\n  construct: constructYamlBoolean,\n  predicate: isBoolean,\n  represent: {\n    lowercase: function (object) { return object ? 'true' : 'false'; },\n    uppercase: function (object) { return object ? 'TRUE' : 'FALSE'; },\n    camelcase: function (object) { return object ? 'True' : 'False'; }\n  },\n  defaultStyle: 'lowercase'\n});\n\nfunction isHexCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) ||\n         ((0x41/* A */ <= c) && (c <= 0x46/* F */)) ||\n         ((0x61/* a */ <= c) && (c <= 0x66/* f */));\n}\n\nfunction isOctCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x37/* 7 */));\n}\n\nfunction isDecCode(c) {\n  return ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */));\n}\n\nfunction resolveYamlInteger(data) {\n  if (data === null) return false;\n\n  var max = data.length,\n      index = 0,\n      hasDigits = false,\n      ch;\n\n  if (!max) return false;\n\n  ch = data[index];\n\n  // sign\n  if (ch === '-' || ch === '+') {\n    ch = data[++index];\n  }\n\n  if (ch === '0') {\n    // 0\n    if (index + 1 === max) return true;\n    ch = data[++index];\n\n    // base 2, base 8, base 16\n\n    if (ch === 'b') {\n      // base 2\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (ch !== '0' && ch !== '1') return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n\n\n    if (ch === 'x') {\n      // base 16\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (!isHexCode(data.charCodeAt(index))) return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n\n\n    if (ch === 'o') {\n      // base 8\n      index++;\n\n      for (; index < max; index++) {\n        ch = data[index];\n        if (ch === '_') continue;\n        if (!isOctCode(data.charCodeAt(index))) return false;\n        hasDigits = true;\n      }\n      return hasDigits && ch !== '_';\n    }\n  }\n\n  // base 10 (except 0)\n\n  // value should not start with `_`;\n  if (ch === '_') return false;\n\n  for (; index < max; index++) {\n    ch = data[index];\n    if (ch === '_') continue;\n    if (!isDecCode(data.charCodeAt(index))) {\n      return false;\n    }\n    hasDigits = true;\n  }\n\n  // Should have digits and should not end with `_`\n  if (!hasDigits || ch === '_') return false;\n\n  return true;\n}\n\nfunction constructYamlInteger(data) {\n  var value = data, sign = 1, ch;\n\n  if (value.indexOf('_') !== -1) {\n    value = value.replace(/_/g, '');\n  }\n\n  ch = value[0];\n\n  if (ch === '-' || ch === '+') {\n    if (ch === '-') sign = -1;\n    value = value.slice(1);\n    ch = value[0];\n  }\n\n  if (value === '0') return 0;\n\n  if (ch === '0') {\n    if (value[1] === 'b') return sign * parseInt(value.slice(2), 2);\n    if (value[1] === 'x') return sign * parseInt(value.slice(2), 16);\n    if (value[1] === 'o') return sign * parseInt(value.slice(2), 8);\n  }\n\n  return sign * parseInt(value, 10);\n}\n\nfunction isInteger(object) {\n  return (Object.prototype.toString.call(object)) === '[object Number]' &&\n         (object % 1 === 0 && !common.isNegativeZero(object));\n}\n\nvar int = new type('tag:yaml.org,2002:int', {\n  kind: 'scalar',\n  resolve: resolveYamlInteger,\n  construct: constructYamlInteger,\n  predicate: isInteger,\n  represent: {\n    binary:      function (obj) { return obj >= 0 ? '0b' + obj.toString(2) : '-0b' + obj.toString(2).slice(1); },\n    octal:       function (obj) { return obj >= 0 ? '0o'  + obj.toString(8) : '-0o'  + obj.toString(8).slice(1); },\n    decimal:     function (obj) { return obj.toString(10); },\n    /* eslint-disable max-len */\n    hexadecimal: function (obj) { return obj >= 0 ? '0x' + obj.toString(16).toUpperCase() :  '-0x' + obj.toString(16).toUpperCase().slice(1); }\n  },\n  defaultStyle: 'decimal',\n  styleAliases: {\n    binary:      [ 2,  'bin' ],\n    octal:       [ 8,  'oct' ],\n    decimal:     [ 10, 'dec' ],\n    hexadecimal: [ 16, 'hex' ]\n  }\n});\n\nvar YAML_FLOAT_PATTERN = new RegExp(\n  // 2.5e4, 2.5 and integers\n  '^(?:[-+]?(?:[0-9][0-9_]*)(?:\\\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?' +\n  // .2e4, .2\n  // special case, seems not from spec\n  '|\\\\.[0-9_]+(?:[eE][-+]?[0-9]+)?' +\n  // .inf\n  '|[-+]?\\\\.(?:inf|Inf|INF)' +\n  // .nan\n  '|\\\\.(?:nan|NaN|NAN))$');\n\nfunction resolveYamlFloat(data) {\n  if (data === null) return false;\n\n  if (!YAML_FLOAT_PATTERN.test(data) ||\n      // Quick hack to not allow integers end with `_`\n      // Probably should update regexp & check speed\n      data[data.length - 1] === '_') {\n    return false;\n  }\n\n  return true;\n}\n\nfunction constructYamlFloat(data) {\n  var value, sign;\n\n  value  = data.replace(/_/g, '').toLowerCase();\n  sign   = value[0] === '-' ? -1 : 1;\n\n  if ('+-'.indexOf(value[0]) >= 0) {\n    value = value.slice(1);\n  }\n\n  if (value === '.inf') {\n    return (sign === 1) ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;\n\n  } else if (value === '.nan') {\n    return NaN;\n  }\n  return sign * parseFloat(value, 10);\n}\n\n\nvar SCIENTIFIC_WITHOUT_DOT = /^[-+]?[0-9]+e/;\n\nfunction representYamlFloat(object, style) {\n  var res;\n\n  if (isNaN(object)) {\n    switch (style) {\n      case 'lowercase': return '.nan';\n      case 'uppercase': return '.NAN';\n      case 'camelcase': return '.NaN';\n    }\n  } else if (Number.POSITIVE_INFINITY === object) {\n    switch (style) {\n      case 'lowercase': return '.inf';\n      case 'uppercase': return '.INF';\n      case 'camelcase': return '.Inf';\n    }\n  } else if (Number.NEGATIVE_INFINITY === object) {\n    switch (style) {\n      case 'lowercase': return '-.inf';\n      case 'uppercase': return '-.INF';\n      case 'camelcase': return '-.Inf';\n    }\n  } else if (common.isNegativeZero(object)) {\n    return '-0.0';\n  }\n\n  res = object.toString(10);\n\n  // JS stringifier can build scientific format without dots: 5e-100,\n  // while YAML requres dot: 5.e-100. Fix it with simple hack\n\n  return SCIENTIFIC_WITHOUT_DOT.test(res) ? res.replace('e', '.e') : res;\n}\n\nfunction isFloat(object) {\n  return (Object.prototype.toString.call(object) === '[object Number]') &&\n         (object % 1 !== 0 || common.isNegativeZero(object));\n}\n\nvar float = new type('tag:yaml.org,2002:float', {\n  kind: 'scalar',\n  resolve: resolveYamlFloat,\n  construct: constructYamlFloat,\n  predicate: isFloat,\n  represent: representYamlFloat,\n  defaultStyle: 'lowercase'\n});\n\nvar json = failsafe.extend({\n  implicit: [\n    _null,\n    bool,\n    int,\n    float\n  ]\n});\n\nvar core = json;\n\nvar YAML_DATE_REGEXP = new RegExp(\n  '^([0-9][0-9][0-9][0-9])'          + // [1] year\n  '-([0-9][0-9])'                    + // [2] month\n  '-([0-9][0-9])$');                   // [3] day\n\nvar YAML_TIMESTAMP_REGEXP = new RegExp(\n  '^([0-9][0-9][0-9][0-9])'          + // [1] year\n  '-([0-9][0-9]?)'                   + // [2] month\n  '-([0-9][0-9]?)'                   + // [3] day\n  '(?:[Tt]|[ \\\\t]+)'                 + // ...\n  '([0-9][0-9]?)'                    + // [4] hour\n  ':([0-9][0-9])'                    + // [5] minute\n  ':([0-9][0-9])'                    + // [6] second\n  '(?:\\\\.([0-9]*))?'                 + // [7] fraction\n  '(?:[ \\\\t]*(Z|([-+])([0-9][0-9]?)' + // [8] tz [9] tz_sign [10] tz_hour\n  '(?::([0-9][0-9]))?))?$');           // [11] tz_minute\n\nfunction resolveYamlTimestamp(data) {\n  if (data === null) return false;\n  if (YAML_DATE_REGEXP.exec(data) !== null) return true;\n  if (YAML_TIMESTAMP_REGEXP.exec(data) !== null) return true;\n  return false;\n}\n\nfunction constructYamlTimestamp(data) {\n  var match, year, month, day, hour, minute, second, fraction = 0,\n      delta = null, tz_hour, tz_minute, date;\n\n  match = YAML_DATE_REGEXP.exec(data);\n  if (match === null) match = YAML_TIMESTAMP_REGEXP.exec(data);\n\n  if (match === null) throw new Error('Date resolve error');\n\n  // match: [1] year [2] month [3] day\n\n  year = +(match[1]);\n  month = +(match[2]) - 1; // JS month starts with 0\n  day = +(match[3]);\n\n  if (!match[4]) { // no hour\n    return new Date(Date.UTC(year, month, day));\n  }\n\n  // match: [4] hour [5] minute [6] second [7] fraction\n\n  hour = +(match[4]);\n  minute = +(match[5]);\n  second = +(match[6]);\n\n  if (match[7]) {\n    fraction = match[7].slice(0, 3);\n    while (fraction.length < 3) { // milli-seconds\n      fraction += '0';\n    }\n    fraction = +fraction;\n  }\n\n  // match: [8] tz [9] tz_sign [10] tz_hour [11] tz_minute\n\n  if (match[9]) {\n    tz_hour = +(match[10]);\n    tz_minute = +(match[11] || 0);\n    delta = (tz_hour * 60 + tz_minute) * 60000; // delta in mili-seconds\n    if (match[9] === '-') delta = -delta;\n  }\n\n  date = new Date(Date.UTC(year, month, day, hour, minute, second, fraction));\n\n  if (delta) date.setTime(date.getTime() - delta);\n\n  return date;\n}\n\nfunction representYamlTimestamp(object /*, style*/) {\n  return object.toISOString();\n}\n\nvar timestamp = new type('tag:yaml.org,2002:timestamp', {\n  kind: 'scalar',\n  resolve: resolveYamlTimestamp,\n  construct: constructYamlTimestamp,\n  instanceOf: Date,\n  represent: representYamlTimestamp\n});\n\nfunction resolveYamlMerge(data) {\n  return data === '<<' || data === null;\n}\n\nvar merge = new type('tag:yaml.org,2002:merge', {\n  kind: 'scalar',\n  resolve: resolveYamlMerge\n});\n\n/*eslint-disable no-bitwise*/\n\n\n\n\n\n// [ 64, 65, 66 ] -> [ padding, CR, LF ]\nvar BASE64_MAP = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\\n\\r';\n\n\nfunction resolveYamlBinary(data) {\n  if (data === null) return false;\n\n  var code, idx, bitlen = 0, max = data.length, map = BASE64_MAP;\n\n  // Convert one by one.\n  for (idx = 0; idx < max; idx++) {\n    code = map.indexOf(data.charAt(idx));\n\n    // Skip CR/LF\n    if (code > 64) continue;\n\n    // Fail on illegal characters\n    if (code < 0) return false;\n\n    bitlen += 6;\n  }\n\n  // If there are any bits left, source was corrupted\n  return (bitlen % 8) === 0;\n}\n\nfunction constructYamlBinary(data) {\n  var idx, tailbits,\n      input = data.replace(/[\\r\\n=]/g, ''), // remove CR/LF & padding to simplify scan\n      max = input.length,\n      map = BASE64_MAP,\n      bits = 0,\n      result = [];\n\n  // Collect by 6*4 bits (3 bytes)\n\n  for (idx = 0; idx < max; idx++) {\n    if ((idx % 4 === 0) && idx) {\n      result.push((bits >> 16) & 0xFF);\n      result.push((bits >> 8) & 0xFF);\n      result.push(bits & 0xFF);\n    }\n\n    bits = (bits << 6) | map.indexOf(input.charAt(idx));\n  }\n\n  // Dump tail\n\n  tailbits = (max % 4) * 6;\n\n  if (tailbits === 0) {\n    result.push((bits >> 16) & 0xFF);\n    result.push((bits >> 8) & 0xFF);\n    result.push(bits & 0xFF);\n  } else if (tailbits === 18) {\n    result.push((bits >> 10) & 0xFF);\n    result.push((bits >> 2) & 0xFF);\n  } else if (tailbits === 12) {\n    result.push((bits >> 4) & 0xFF);\n  }\n\n  return new Uint8Array(result);\n}\n\nfunction representYamlBinary(object /*, style*/) {\n  var result = '', bits = 0, idx, tail,\n      max = object.length,\n      map = BASE64_MAP;\n\n  // Convert every three bytes to 4 ASCII characters.\n\n  for (idx = 0; idx < max; idx++) {\n    if ((idx % 3 === 0) && idx) {\n      result += map[(bits >> 18) & 0x3F];\n      result += map[(bits >> 12) & 0x3F];\n      result += map[(bits >> 6) & 0x3F];\n      result += map[bits & 0x3F];\n    }\n\n    bits = (bits << 8) + object[idx];\n  }\n\n  // Dump tail\n\n  tail = max % 3;\n\n  if (tail === 0) {\n    result += map[(bits >> 18) & 0x3F];\n    result += map[(bits >> 12) & 0x3F];\n    result += map[(bits >> 6) & 0x3F];\n    result += map[bits & 0x3F];\n  } else if (tail === 2) {\n    result += map[(bits >> 10) & 0x3F];\n    result += map[(bits >> 4) & 0x3F];\n    result += map[(bits << 2) & 0x3F];\n    result += map[64];\n  } else if (tail === 1) {\n    result += map[(bits >> 2) & 0x3F];\n    result += map[(bits << 4) & 0x3F];\n    result += map[64];\n    result += map[64];\n  }\n\n  return result;\n}\n\nfunction isBinary(obj) {\n  return Object.prototype.toString.call(obj) ===  '[object Uint8Array]';\n}\n\nvar binary = new type('tag:yaml.org,2002:binary', {\n  kind: 'scalar',\n  resolve: resolveYamlBinary,\n  construct: constructYamlBinary,\n  predicate: isBinary,\n  represent: representYamlBinary\n});\n\nvar _hasOwnProperty$3 = Object.prototype.hasOwnProperty;\nvar _toString$2       = Object.prototype.toString;\n\nfunction resolveYamlOmap(data) {\n  if (data === null) return true;\n\n  var objectKeys = [], index, length, pair, pairKey, pairHasKey,\n      object = data;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n    pairHasKey = false;\n\n    if (_toString$2.call(pair) !== '[object Object]') return false;\n\n    for (pairKey in pair) {\n      if (_hasOwnProperty$3.call(pair, pairKey)) {\n        if (!pairHasKey) pairHasKey = true;\n        else return false;\n      }\n    }\n\n    if (!pairHasKey) return false;\n\n    if (objectKeys.indexOf(pairKey) === -1) objectKeys.push(pairKey);\n    else return false;\n  }\n\n  return true;\n}\n\nfunction constructYamlOmap(data) {\n  return data !== null ? data : [];\n}\n\nvar omap = new type('tag:yaml.org,2002:omap', {\n  kind: 'sequence',\n  resolve: resolveYamlOmap,\n  construct: constructYamlOmap\n});\n\nvar _toString$1 = Object.prototype.toString;\n\nfunction resolveYamlPairs(data) {\n  if (data === null) return true;\n\n  var index, length, pair, keys, result,\n      object = data;\n\n  result = new Array(object.length);\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n\n    if (_toString$1.call(pair) !== '[object Object]') return false;\n\n    keys = Object.keys(pair);\n\n    if (keys.length !== 1) return false;\n\n    result[index] = [ keys[0], pair[keys[0]] ];\n  }\n\n  return true;\n}\n\nfunction constructYamlPairs(data) {\n  if (data === null) return [];\n\n  var index, length, pair, keys, result,\n      object = data;\n\n  result = new Array(object.length);\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    pair = object[index];\n\n    keys = Object.keys(pair);\n\n    result[index] = [ keys[0], pair[keys[0]] ];\n  }\n\n  return result;\n}\n\nvar pairs = new type('tag:yaml.org,2002:pairs', {\n  kind: 'sequence',\n  resolve: resolveYamlPairs,\n  construct: constructYamlPairs\n});\n\nvar _hasOwnProperty$2 = Object.prototype.hasOwnProperty;\n\nfunction resolveYamlSet(data) {\n  if (data === null) return true;\n\n  var key, object = data;\n\n  for (key in object) {\n    if (_hasOwnProperty$2.call(object, key)) {\n      if (object[key] !== null) return false;\n    }\n  }\n\n  return true;\n}\n\nfunction constructYamlSet(data) {\n  return data !== null ? data : {};\n}\n\nvar set = new type('tag:yaml.org,2002:set', {\n  kind: 'mapping',\n  resolve: resolveYamlSet,\n  construct: constructYamlSet\n});\n\nvar _default = core.extend({\n  implicit: [\n    timestamp,\n    merge\n  ],\n  explicit: [\n    binary,\n    omap,\n    pairs,\n    set\n  ]\n});\n\n/*eslint-disable max-len,no-use-before-define*/\n\n\n\n\n\n\n\nvar _hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n\n\nvar CONTEXT_FLOW_IN   = 1;\nvar CONTEXT_FLOW_OUT  = 2;\nvar CONTEXT_BLOCK_IN  = 3;\nvar CONTEXT_BLOCK_OUT = 4;\n\n\nvar CHOMPING_CLIP  = 1;\nvar CHOMPING_STRIP = 2;\nvar CHOMPING_KEEP  = 3;\n\n\nvar PATTERN_NON_PRINTABLE         = /[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F-\\x84\\x86-\\x9F\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/;\nvar PATTERN_NON_ASCII_LINE_BREAKS = /[\\x85\\u2028\\u2029]/;\nvar PATTERN_FLOW_INDICATORS       = /[,\\[\\]\\{\\}]/;\nvar PATTERN_TAG_HANDLE            = /^(?:!|!!|![a-z\\-]+!)$/i;\nvar PATTERN_TAG_URI               = /^(?:!|[^,\\[\\]\\{\\}])(?:%[0-9a-f]{2}|[0-9a-z\\-#;\\/\\?:@&=\\+\\$,_\\.!~\\*'\\(\\)\\[\\]])*$/i;\n\n\nfunction _class(obj) { return Object.prototype.toString.call(obj); }\n\nfunction is_EOL(c) {\n  return (c === 0x0A/* LF */) || (c === 0x0D/* CR */);\n}\n\nfunction is_WHITE_SPACE(c) {\n  return (c === 0x09/* Tab */) || (c === 0x20/* Space */);\n}\n\nfunction is_WS_OR_EOL(c) {\n  return (c === 0x09/* Tab */) ||\n         (c === 0x20/* Space */) ||\n         (c === 0x0A/* LF */) ||\n         (c === 0x0D/* CR */);\n}\n\nfunction is_FLOW_INDICATOR(c) {\n  return c === 0x2C/* , */ ||\n         c === 0x5B/* [ */ ||\n         c === 0x5D/* ] */ ||\n         c === 0x7B/* { */ ||\n         c === 0x7D/* } */;\n}\n\nfunction fromHexCode(c) {\n  var lc;\n\n  if ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) {\n    return c - 0x30;\n  }\n\n  /*eslint-disable no-bitwise*/\n  lc = c | 0x20;\n\n  if ((0x61/* a */ <= lc) && (lc <= 0x66/* f */)) {\n    return lc - 0x61 + 10;\n  }\n\n  return -1;\n}\n\nfunction escapedHexLen(c) {\n  if (c === 0x78/* x */) { return 2; }\n  if (c === 0x75/* u */) { return 4; }\n  if (c === 0x55/* U */) { return 8; }\n  return 0;\n}\n\nfunction fromDecimalCode(c) {\n  if ((0x30/* 0 */ <= c) && (c <= 0x39/* 9 */)) {\n    return c - 0x30;\n  }\n\n  return -1;\n}\n\nfunction simpleEscapeSequence(c) {\n  /* eslint-disable indent */\n  return (c === 0x30/* 0 */) ? '\\x00' :\n        (c === 0x61/* a */) ? '\\x07' :\n        (c === 0x62/* b */) ? '\\x08' :\n        (c === 0x74/* t */) ? '\\x09' :\n        (c === 0x09/* Tab */) ? '\\x09' :\n        (c === 0x6E/* n */) ? '\\x0A' :\n        (c === 0x76/* v */) ? '\\x0B' :\n        (c === 0x66/* f */) ? '\\x0C' :\n        (c === 0x72/* r */) ? '\\x0D' :\n        (c === 0x65/* e */) ? '\\x1B' :\n        (c === 0x20/* Space */) ? ' ' :\n        (c === 0x22/* \" */) ? '\\x22' :\n        (c === 0x2F/* / */) ? '/' :\n        (c === 0x5C/* \\ */) ? '\\x5C' :\n        (c === 0x4E/* N */) ? '\\x85' :\n        (c === 0x5F/* _ */) ? '\\xA0' :\n        (c === 0x4C/* L */) ? '\\u2028' :\n        (c === 0x50/* P */) ? '\\u2029' : '';\n}\n\nfunction charFromCodepoint(c) {\n  if (c <= 0xFFFF) {\n    return String.fromCharCode(c);\n  }\n  // Encode UTF-16 surrogate pair\n  // https://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B010000_to_U.2B10FFFF\n  return String.fromCharCode(\n    ((c - 0x010000) >> 10) + 0xD800,\n    ((c - 0x010000) & 0x03FF) + 0xDC00\n  );\n}\n\n// set a property of a literal object, while protecting against prototype pollution,\n// see https://github.com/nodeca/js-yaml/issues/164 for more details\nfunction setProperty(object, key, value) {\n  // used for this specific key only because Object.defineProperty is slow\n  if (key === '__proto__') {\n    Object.defineProperty(object, key, {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: value\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nvar simpleEscapeCheck = new Array(256); // integer, for fast access\nvar simpleEscapeMap = new Array(256);\nfor (var i = 0; i < 256; i++) {\n  simpleEscapeCheck[i] = simpleEscapeSequence(i) ? 1 : 0;\n  simpleEscapeMap[i] = simpleEscapeSequence(i);\n}\n\n\nfunction State$1(input, options) {\n  this.input = input;\n\n  this.filename  = options['filename']  || null;\n  this.schema    = options['schema']    || _default;\n  this.onWarning = options['onWarning'] || null;\n  // (Hidden) Remove? makes the loader to expect YAML 1.1 documents\n  // if such documents have no explicit %YAML directive\n  this.legacy    = options['legacy']    || false;\n\n  this.json      = options['json']      || false;\n  this.listener  = options['listener']  || null;\n\n  this.implicitTypes = this.schema.compiledImplicit;\n  this.typeMap       = this.schema.compiledTypeMap;\n\n  this.length     = input.length;\n  this.position   = 0;\n  this.line       = 0;\n  this.lineStart  = 0;\n  this.lineIndent = 0;\n\n  // position of first leading tab in the current line,\n  // used to make sure there are no tabs in the indentation\n  this.firstTabInLine = -1;\n\n  this.documents = [];\n\n  /*\n  this.version;\n  this.checkLineBreaks;\n  this.tagMap;\n  this.anchorMap;\n  this.tag;\n  this.anchor;\n  this.kind;\n  this.result;*/\n\n}\n\n\nfunction generateError(state, message) {\n  var mark = {\n    name:     state.filename,\n    buffer:   state.input.slice(0, -1), // omit trailing \\0\n    position: state.position,\n    line:     state.line,\n    column:   state.position - state.lineStart\n  };\n\n  mark.snippet = snippet(mark);\n\n  return new exception(message, mark);\n}\n\nfunction throwError(state, message) {\n  throw generateError(state, message);\n}\n\nfunction throwWarning(state, message) {\n  if (state.onWarning) {\n    state.onWarning.call(null, generateError(state, message));\n  }\n}\n\n\nvar directiveHandlers = {\n\n  YAML: function handleYamlDirective(state, name, args) {\n\n    var match, major, minor;\n\n    if (state.version !== null) {\n      throwError(state, 'duplication of %YAML directive');\n    }\n\n    if (args.length !== 1) {\n      throwError(state, 'YAML directive accepts exactly one argument');\n    }\n\n    match = /^([0-9]+)\\.([0-9]+)$/.exec(args[0]);\n\n    if (match === null) {\n      throwError(state, 'ill-formed argument of the YAML directive');\n    }\n\n    major = parseInt(match[1], 10);\n    minor = parseInt(match[2], 10);\n\n    if (major !== 1) {\n      throwError(state, 'unacceptable YAML version of the document');\n    }\n\n    state.version = args[0];\n    state.checkLineBreaks = (minor < 2);\n\n    if (minor !== 1 && minor !== 2) {\n      throwWarning(state, 'unsupported YAML version of the document');\n    }\n  },\n\n  TAG: function handleTagDirective(state, name, args) {\n\n    var handle, prefix;\n\n    if (args.length !== 2) {\n      throwError(state, 'TAG directive accepts exactly two arguments');\n    }\n\n    handle = args[0];\n    prefix = args[1];\n\n    if (!PATTERN_TAG_HANDLE.test(handle)) {\n      throwError(state, 'ill-formed tag handle (first argument) of the TAG directive');\n    }\n\n    if (_hasOwnProperty$1.call(state.tagMap, handle)) {\n      throwError(state, 'there is a previously declared suffix for \"' + handle + '\" tag handle');\n    }\n\n    if (!PATTERN_TAG_URI.test(prefix)) {\n      throwError(state, 'ill-formed tag prefix (second argument) of the TAG directive');\n    }\n\n    try {\n      prefix = decodeURIComponent(prefix);\n    } catch (err) {\n      throwError(state, 'tag prefix is malformed: ' + prefix);\n    }\n\n    state.tagMap[handle] = prefix;\n  }\n};\n\n\nfunction captureSegment(state, start, end, checkJson) {\n  var _position, _length, _character, _result;\n\n  if (start < end) {\n    _result = state.input.slice(start, end);\n\n    if (checkJson) {\n      for (_position = 0, _length = _result.length; _position < _length; _position += 1) {\n        _character = _result.charCodeAt(_position);\n        if (!(_character === 0x09 ||\n              (0x20 <= _character && _character <= 0x10FFFF))) {\n          throwError(state, 'expected valid JSON character');\n        }\n      }\n    } else if (PATTERN_NON_PRINTABLE.test(_result)) {\n      throwError(state, 'the stream contains non-printable characters');\n    }\n\n    state.result += _result;\n  }\n}\n\nfunction mergeMappings(state, destination, source, overridableKeys) {\n  var sourceKeys, key, index, quantity;\n\n  if (!common.isObject(source)) {\n    throwError(state, 'cannot merge mappings; the provided source object is unacceptable');\n  }\n\n  sourceKeys = Object.keys(source);\n\n  for (index = 0, quantity = sourceKeys.length; index < quantity; index += 1) {\n    key = sourceKeys[index];\n\n    if (!_hasOwnProperty$1.call(destination, key)) {\n      setProperty(destination, key, source[key]);\n      overridableKeys[key] = true;\n    }\n  }\n}\n\nfunction storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode,\n  startLine, startLineStart, startPos) {\n\n  var index, quantity;\n\n  // The output is a plain object here, so keys can only be strings.\n  // We need to convert keyNode to a string, but doing so can hang the process\n  // (deeply nested arrays that explode exponentially using aliases).\n  if (Array.isArray(keyNode)) {\n    keyNode = Array.prototype.slice.call(keyNode);\n\n    for (index = 0, quantity = keyNode.length; index < quantity; index += 1) {\n      if (Array.isArray(keyNode[index])) {\n        throwError(state, 'nested arrays are not supported inside keys');\n      }\n\n      if (typeof keyNode === 'object' && _class(keyNode[index]) === '[object Object]') {\n        keyNode[index] = '[object Object]';\n      }\n    }\n  }\n\n  // Avoid code execution in load() via toString property\n  // (still use its own toString for arrays, timestamps,\n  // and whatever user schema extensions happen to have @@toStringTag)\n  if (typeof keyNode === 'object' && _class(keyNode) === '[object Object]') {\n    keyNode = '[object Object]';\n  }\n\n\n  keyNode = String(keyNode);\n\n  if (_result === null) {\n    _result = {};\n  }\n\n  if (keyTag === 'tag:yaml.org,2002:merge') {\n    if (Array.isArray(valueNode)) {\n      for (index = 0, quantity = valueNode.length; index < quantity; index += 1) {\n        mergeMappings(state, _result, valueNode[index], overridableKeys);\n      }\n    } else {\n      mergeMappings(state, _result, valueNode, overridableKeys);\n    }\n  } else {\n    if (!state.json &&\n        !_hasOwnProperty$1.call(overridableKeys, keyNode) &&\n        _hasOwnProperty$1.call(_result, keyNode)) {\n      state.line = startLine || state.line;\n      state.lineStart = startLineStart || state.lineStart;\n      state.position = startPos || state.position;\n      throwError(state, 'duplicated mapping key');\n    }\n\n    setProperty(_result, keyNode, valueNode);\n    delete overridableKeys[keyNode];\n  }\n\n  return _result;\n}\n\nfunction readLineBreak(state) {\n  var ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x0A/* LF */) {\n    state.position++;\n  } else if (ch === 0x0D/* CR */) {\n    state.position++;\n    if (state.input.charCodeAt(state.position) === 0x0A/* LF */) {\n      state.position++;\n    }\n  } else {\n    throwError(state, 'a line break is expected');\n  }\n\n  state.line += 1;\n  state.lineStart = state.position;\n  state.firstTabInLine = -1;\n}\n\nfunction skipSeparationSpace(state, allowComments, checkIndent) {\n  var lineBreaks = 0,\n      ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    while (is_WHITE_SPACE(ch)) {\n      if (ch === 0x09/* Tab */ && state.firstTabInLine === -1) {\n        state.firstTabInLine = state.position;\n      }\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    if (allowComments && ch === 0x23/* # */) {\n      do {\n        ch = state.input.charCodeAt(++state.position);\n      } while (ch !== 0x0A/* LF */ && ch !== 0x0D/* CR */ && ch !== 0);\n    }\n\n    if (is_EOL(ch)) {\n      readLineBreak(state);\n\n      ch = state.input.charCodeAt(state.position);\n      lineBreaks++;\n      state.lineIndent = 0;\n\n      while (ch === 0x20/* Space */) {\n        state.lineIndent++;\n        ch = state.input.charCodeAt(++state.position);\n      }\n    } else {\n      break;\n    }\n  }\n\n  if (checkIndent !== -1 && lineBreaks !== 0 && state.lineIndent < checkIndent) {\n    throwWarning(state, 'deficient indentation');\n  }\n\n  return lineBreaks;\n}\n\nfunction testDocumentSeparator(state) {\n  var _position = state.position,\n      ch;\n\n  ch = state.input.charCodeAt(_position);\n\n  // Condition state.position === state.lineStart is tested\n  // in parent on each call, for efficiency. No needs to test here again.\n  if ((ch === 0x2D/* - */ || ch === 0x2E/* . */) &&\n      ch === state.input.charCodeAt(_position + 1) &&\n      ch === state.input.charCodeAt(_position + 2)) {\n\n    _position += 3;\n\n    ch = state.input.charCodeAt(_position);\n\n    if (ch === 0 || is_WS_OR_EOL(ch)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction writeFoldedLines(state, count) {\n  if (count === 1) {\n    state.result += ' ';\n  } else if (count > 1) {\n    state.result += common.repeat('\\n', count - 1);\n  }\n}\n\n\nfunction readPlainScalar(state, nodeIndent, withinFlowCollection) {\n  var preceding,\n      following,\n      captureStart,\n      captureEnd,\n      hasPendingContent,\n      _line,\n      _lineStart,\n      _lineIndent,\n      _kind = state.kind,\n      _result = state.result,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (is_WS_OR_EOL(ch)      ||\n      is_FLOW_INDICATOR(ch) ||\n      ch === 0x23/* # */    ||\n      ch === 0x26/* & */    ||\n      ch === 0x2A/* * */    ||\n      ch === 0x21/* ! */    ||\n      ch === 0x7C/* | */    ||\n      ch === 0x3E/* > */    ||\n      ch === 0x27/* ' */    ||\n      ch === 0x22/* \" */    ||\n      ch === 0x25/* % */    ||\n      ch === 0x40/* @ */    ||\n      ch === 0x60/* ` */) {\n    return false;\n  }\n\n  if (ch === 0x3F/* ? */ || ch === 0x2D/* - */) {\n    following = state.input.charCodeAt(state.position + 1);\n\n    if (is_WS_OR_EOL(following) ||\n        withinFlowCollection && is_FLOW_INDICATOR(following)) {\n      return false;\n    }\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  captureStart = captureEnd = state.position;\n  hasPendingContent = false;\n\n  while (ch !== 0) {\n    if (ch === 0x3A/* : */) {\n      following = state.input.charCodeAt(state.position + 1);\n\n      if (is_WS_OR_EOL(following) ||\n          withinFlowCollection && is_FLOW_INDICATOR(following)) {\n        break;\n      }\n\n    } else if (ch === 0x23/* # */) {\n      preceding = state.input.charCodeAt(state.position - 1);\n\n      if (is_WS_OR_EOL(preceding)) {\n        break;\n      }\n\n    } else if ((state.position === state.lineStart && testDocumentSeparator(state)) ||\n               withinFlowCollection && is_FLOW_INDICATOR(ch)) {\n      break;\n\n    } else if (is_EOL(ch)) {\n      _line = state.line;\n      _lineStart = state.lineStart;\n      _lineIndent = state.lineIndent;\n      skipSeparationSpace(state, false, -1);\n\n      if (state.lineIndent >= nodeIndent) {\n        hasPendingContent = true;\n        ch = state.input.charCodeAt(state.position);\n        continue;\n      } else {\n        state.position = captureEnd;\n        state.line = _line;\n        state.lineStart = _lineStart;\n        state.lineIndent = _lineIndent;\n        break;\n      }\n    }\n\n    if (hasPendingContent) {\n      captureSegment(state, captureStart, captureEnd, false);\n      writeFoldedLines(state, state.line - _line);\n      captureStart = captureEnd = state.position;\n      hasPendingContent = false;\n    }\n\n    if (!is_WHITE_SPACE(ch)) {\n      captureEnd = state.position + 1;\n    }\n\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  captureSegment(state, captureStart, captureEnd, false);\n\n  if (state.result) {\n    return true;\n  }\n\n  state.kind = _kind;\n  state.result = _result;\n  return false;\n}\n\nfunction readSingleQuotedScalar(state, nodeIndent) {\n  var ch,\n      captureStart, captureEnd;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x27/* ' */) {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  state.position++;\n  captureStart = captureEnd = state.position;\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    if (ch === 0x27/* ' */) {\n      captureSegment(state, captureStart, state.position, true);\n      ch = state.input.charCodeAt(++state.position);\n\n      if (ch === 0x27/* ' */) {\n        captureStart = state.position;\n        state.position++;\n        captureEnd = state.position;\n      } else {\n        return true;\n      }\n\n    } else if (is_EOL(ch)) {\n      captureSegment(state, captureStart, captureEnd, true);\n      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));\n      captureStart = captureEnd = state.position;\n\n    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {\n      throwError(state, 'unexpected end of the document within a single quoted scalar');\n\n    } else {\n      state.position++;\n      captureEnd = state.position;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a single quoted scalar');\n}\n\nfunction readDoubleQuotedScalar(state, nodeIndent) {\n  var captureStart,\n      captureEnd,\n      hexLength,\n      hexResult,\n      tmp,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x22/* \" */) {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n  state.position++;\n  captureStart = captureEnd = state.position;\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    if (ch === 0x22/* \" */) {\n      captureSegment(state, captureStart, state.position, true);\n      state.position++;\n      return true;\n\n    } else if (ch === 0x5C/* \\ */) {\n      captureSegment(state, captureStart, state.position, true);\n      ch = state.input.charCodeAt(++state.position);\n\n      if (is_EOL(ch)) {\n        skipSeparationSpace(state, false, nodeIndent);\n\n        // TODO: rework to inline fn with no type cast?\n      } else if (ch < 256 && simpleEscapeCheck[ch]) {\n        state.result += simpleEscapeMap[ch];\n        state.position++;\n\n      } else if ((tmp = escapedHexLen(ch)) > 0) {\n        hexLength = tmp;\n        hexResult = 0;\n\n        for (; hexLength > 0; hexLength--) {\n          ch = state.input.charCodeAt(++state.position);\n\n          if ((tmp = fromHexCode(ch)) >= 0) {\n            hexResult = (hexResult << 4) + tmp;\n\n          } else {\n            throwError(state, 'expected hexadecimal character');\n          }\n        }\n\n        state.result += charFromCodepoint(hexResult);\n\n        state.position++;\n\n      } else {\n        throwError(state, 'unknown escape sequence');\n      }\n\n      captureStart = captureEnd = state.position;\n\n    } else if (is_EOL(ch)) {\n      captureSegment(state, captureStart, captureEnd, true);\n      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));\n      captureStart = captureEnd = state.position;\n\n    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {\n      throwError(state, 'unexpected end of the document within a double quoted scalar');\n\n    } else {\n      state.position++;\n      captureEnd = state.position;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a double quoted scalar');\n}\n\nfunction readFlowCollection(state, nodeIndent) {\n  var readNext = true,\n      _line,\n      _lineStart,\n      _pos,\n      _tag     = state.tag,\n      _result,\n      _anchor  = state.anchor,\n      following,\n      terminator,\n      isPair,\n      isExplicitPair,\n      isMapping,\n      overridableKeys = Object.create(null),\n      keyNode,\n      keyTag,\n      valueNode,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x5B/* [ */) {\n    terminator = 0x5D;/* ] */\n    isMapping = false;\n    _result = [];\n  } else if (ch === 0x7B/* { */) {\n    terminator = 0x7D;/* } */\n    isMapping = true;\n    _result = {};\n  } else {\n    return false;\n  }\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n\n  while (ch !== 0) {\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (ch === terminator) {\n      state.position++;\n      state.tag = _tag;\n      state.anchor = _anchor;\n      state.kind = isMapping ? 'mapping' : 'sequence';\n      state.result = _result;\n      return true;\n    } else if (!readNext) {\n      throwError(state, 'missed comma between flow collection entries');\n    } else if (ch === 0x2C/* , */) {\n      // \"flow collection entries can never be completely empty\", as per YAML 1.2, section 7.4\n      throwError(state, \"expected the node content, but found ','\");\n    }\n\n    keyTag = keyNode = valueNode = null;\n    isPair = isExplicitPair = false;\n\n    if (ch === 0x3F/* ? */) {\n      following = state.input.charCodeAt(state.position + 1);\n\n      if (is_WS_OR_EOL(following)) {\n        isPair = isExplicitPair = true;\n        state.position++;\n        skipSeparationSpace(state, true, nodeIndent);\n      }\n    }\n\n    _line = state.line; // Save the current line.\n    _lineStart = state.lineStart;\n    _pos = state.position;\n    composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);\n    keyTag = state.tag;\n    keyNode = state.result;\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if ((isExplicitPair || state.line === _line) && ch === 0x3A/* : */) {\n      isPair = true;\n      ch = state.input.charCodeAt(++state.position);\n      skipSeparationSpace(state, true, nodeIndent);\n      composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);\n      valueNode = state.result;\n    }\n\n    if (isMapping) {\n      storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos);\n    } else if (isPair) {\n      _result.push(storeMappingPair(state, null, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos));\n    } else {\n      _result.push(keyNode);\n    }\n\n    skipSeparationSpace(state, true, nodeIndent);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (ch === 0x2C/* , */) {\n      readNext = true;\n      ch = state.input.charCodeAt(++state.position);\n    } else {\n      readNext = false;\n    }\n  }\n\n  throwError(state, 'unexpected end of the stream within a flow collection');\n}\n\nfunction readBlockScalar(state, nodeIndent) {\n  var captureStart,\n      folding,\n      chomping       = CHOMPING_CLIP,\n      didReadContent = false,\n      detectedIndent = false,\n      textIndent     = nodeIndent,\n      emptyLines     = 0,\n      atMoreIndented = false,\n      tmp,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch === 0x7C/* | */) {\n    folding = false;\n  } else if (ch === 0x3E/* > */) {\n    folding = true;\n  } else {\n    return false;\n  }\n\n  state.kind = 'scalar';\n  state.result = '';\n\n  while (ch !== 0) {\n    ch = state.input.charCodeAt(++state.position);\n\n    if (ch === 0x2B/* + */ || ch === 0x2D/* - */) {\n      if (CHOMPING_CLIP === chomping) {\n        chomping = (ch === 0x2B/* + */) ? CHOMPING_KEEP : CHOMPING_STRIP;\n      } else {\n        throwError(state, 'repeat of a chomping mode identifier');\n      }\n\n    } else if ((tmp = fromDecimalCode(ch)) >= 0) {\n      if (tmp === 0) {\n        throwError(state, 'bad explicit indentation width of a block scalar; it cannot be less than one');\n      } else if (!detectedIndent) {\n        textIndent = nodeIndent + tmp - 1;\n        detectedIndent = true;\n      } else {\n        throwError(state, 'repeat of an indentation width identifier');\n      }\n\n    } else {\n      break;\n    }\n  }\n\n  if (is_WHITE_SPACE(ch)) {\n    do { ch = state.input.charCodeAt(++state.position); }\n    while (is_WHITE_SPACE(ch));\n\n    if (ch === 0x23/* # */) {\n      do { ch = state.input.charCodeAt(++state.position); }\n      while (!is_EOL(ch) && (ch !== 0));\n    }\n  }\n\n  while (ch !== 0) {\n    readLineBreak(state);\n    state.lineIndent = 0;\n\n    ch = state.input.charCodeAt(state.position);\n\n    while ((!detectedIndent || state.lineIndent < textIndent) &&\n           (ch === 0x20/* Space */)) {\n      state.lineIndent++;\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    if (!detectedIndent && state.lineIndent > textIndent) {\n      textIndent = state.lineIndent;\n    }\n\n    if (is_EOL(ch)) {\n      emptyLines++;\n      continue;\n    }\n\n    // End of the scalar.\n    if (state.lineIndent < textIndent) {\n\n      // Perform the chomping.\n      if (chomping === CHOMPING_KEEP) {\n        state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n      } else if (chomping === CHOMPING_CLIP) {\n        if (didReadContent) { // i.e. only if the scalar is not empty.\n          state.result += '\\n';\n        }\n      }\n\n      // Break this `while` cycle and go to the funciton's epilogue.\n      break;\n    }\n\n    // Folded style: use fancy rules to handle line breaks.\n    if (folding) {\n\n      // Lines starting with white space characters (more-indented lines) are not folded.\n      if (is_WHITE_SPACE(ch)) {\n        atMoreIndented = true;\n        // except for the first content line (cf. Example 8.1)\n        state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n\n      // End of more-indented block.\n      } else if (atMoreIndented) {\n        atMoreIndented = false;\n        state.result += common.repeat('\\n', emptyLines + 1);\n\n      // Just one line break - perceive as the same line.\n      } else if (emptyLines === 0) {\n        if (didReadContent) { // i.e. only if we have already read some scalar content.\n          state.result += ' ';\n        }\n\n      // Several line breaks - perceive as different lines.\n      } else {\n        state.result += common.repeat('\\n', emptyLines);\n      }\n\n    // Literal style: just add exact number of line breaks between content lines.\n    } else {\n      // Keep all line breaks except the header line break.\n      state.result += common.repeat('\\n', didReadContent ? 1 + emptyLines : emptyLines);\n    }\n\n    didReadContent = true;\n    detectedIndent = true;\n    emptyLines = 0;\n    captureStart = state.position;\n\n    while (!is_EOL(ch) && (ch !== 0)) {\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    captureSegment(state, captureStart, state.position, false);\n  }\n\n  return true;\n}\n\nfunction readBlockSequence(state, nodeIndent) {\n  var _line,\n      _tag      = state.tag,\n      _anchor   = state.anchor,\n      _result   = [],\n      following,\n      detected  = false,\n      ch;\n\n  // there is a leading tab before this token, so it can't be a block sequence/mapping;\n  // it can still be flow sequence/mapping or a scalar\n  if (state.firstTabInLine !== -1) return false;\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    if (state.firstTabInLine !== -1) {\n      state.position = state.firstTabInLine;\n      throwError(state, 'tab characters must not be used in indentation');\n    }\n\n    if (ch !== 0x2D/* - */) {\n      break;\n    }\n\n    following = state.input.charCodeAt(state.position + 1);\n\n    if (!is_WS_OR_EOL(following)) {\n      break;\n    }\n\n    detected = true;\n    state.position++;\n\n    if (skipSeparationSpace(state, true, -1)) {\n      if (state.lineIndent <= nodeIndent) {\n        _result.push(null);\n        ch = state.input.charCodeAt(state.position);\n        continue;\n      }\n    }\n\n    _line = state.line;\n    composeNode(state, nodeIndent, CONTEXT_BLOCK_IN, false, true);\n    _result.push(state.result);\n    skipSeparationSpace(state, true, -1);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if ((state.line === _line || state.lineIndent > nodeIndent) && (ch !== 0)) {\n      throwError(state, 'bad indentation of a sequence entry');\n    } else if (state.lineIndent < nodeIndent) {\n      break;\n    }\n  }\n\n  if (detected) {\n    state.tag = _tag;\n    state.anchor = _anchor;\n    state.kind = 'sequence';\n    state.result = _result;\n    return true;\n  }\n  return false;\n}\n\nfunction readBlockMapping(state, nodeIndent, flowIndent) {\n  var following,\n      allowCompact,\n      _line,\n      _keyLine,\n      _keyLineStart,\n      _keyPos,\n      _tag          = state.tag,\n      _anchor       = state.anchor,\n      _result       = {},\n      overridableKeys = Object.create(null),\n      keyTag        = null,\n      keyNode       = null,\n      valueNode     = null,\n      atExplicitKey = false,\n      detected      = false,\n      ch;\n\n  // there is a leading tab before this token, so it can't be a block sequence/mapping;\n  // it can still be flow sequence/mapping or a scalar\n  if (state.firstTabInLine !== -1) return false;\n\n  if (state.anchor !== null) {\n    state.anchorMap[state.anchor] = _result;\n  }\n\n  ch = state.input.charCodeAt(state.position);\n\n  while (ch !== 0) {\n    if (!atExplicitKey && state.firstTabInLine !== -1) {\n      state.position = state.firstTabInLine;\n      throwError(state, 'tab characters must not be used in indentation');\n    }\n\n    following = state.input.charCodeAt(state.position + 1);\n    _line = state.line; // Save the current line.\n\n    //\n    // Explicit notation case. There are two separate blocks:\n    // first for the key (denoted by \"?\") and second for the value (denoted by \":\")\n    //\n    if ((ch === 0x3F/* ? */ || ch === 0x3A/* : */) && is_WS_OR_EOL(following)) {\n\n      if (ch === 0x3F/* ? */) {\n        if (atExplicitKey) {\n          storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n          keyTag = keyNode = valueNode = null;\n        }\n\n        detected = true;\n        atExplicitKey = true;\n        allowCompact = true;\n\n      } else if (atExplicitKey) {\n        // i.e. 0x3A/* : */ === character after the explicit key.\n        atExplicitKey = false;\n        allowCompact = true;\n\n      } else {\n        throwError(state, 'incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line');\n      }\n\n      state.position += 1;\n      ch = following;\n\n    //\n    // Implicit notation case. Flow-style node as the key first, then \":\", and the value.\n    //\n    } else {\n      _keyLine = state.line;\n      _keyLineStart = state.lineStart;\n      _keyPos = state.position;\n\n      if (!composeNode(state, flowIndent, CONTEXT_FLOW_OUT, false, true)) {\n        // Neither implicit nor explicit notation.\n        // Reading is done. Go to the epilogue.\n        break;\n      }\n\n      if (state.line === _line) {\n        ch = state.input.charCodeAt(state.position);\n\n        while (is_WHITE_SPACE(ch)) {\n          ch = state.input.charCodeAt(++state.position);\n        }\n\n        if (ch === 0x3A/* : */) {\n          ch = state.input.charCodeAt(++state.position);\n\n          if (!is_WS_OR_EOL(ch)) {\n            throwError(state, 'a whitespace character is expected after the key-value separator within a block mapping');\n          }\n\n          if (atExplicitKey) {\n            storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n            keyTag = keyNode = valueNode = null;\n          }\n\n          detected = true;\n          atExplicitKey = false;\n          allowCompact = false;\n          keyTag = state.tag;\n          keyNode = state.result;\n\n        } else if (detected) {\n          throwError(state, 'can not read an implicit mapping pair; a colon is missed');\n\n        } else {\n          state.tag = _tag;\n          state.anchor = _anchor;\n          return true; // Keep the result of `composeNode`.\n        }\n\n      } else if (detected) {\n        throwError(state, 'can not read a block mapping entry; a multiline key may not be an implicit key');\n\n      } else {\n        state.tag = _tag;\n        state.anchor = _anchor;\n        return true; // Keep the result of `composeNode`.\n      }\n    }\n\n    //\n    // Common reading code for both explicit and implicit notations.\n    //\n    if (state.line === _line || state.lineIndent > nodeIndent) {\n      if (atExplicitKey) {\n        _keyLine = state.line;\n        _keyLineStart = state.lineStart;\n        _keyPos = state.position;\n      }\n\n      if (composeNode(state, nodeIndent, CONTEXT_BLOCK_OUT, true, allowCompact)) {\n        if (atExplicitKey) {\n          keyNode = state.result;\n        } else {\n          valueNode = state.result;\n        }\n      }\n\n      if (!atExplicitKey) {\n        storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _keyLine, _keyLineStart, _keyPos);\n        keyTag = keyNode = valueNode = null;\n      }\n\n      skipSeparationSpace(state, true, -1);\n      ch = state.input.charCodeAt(state.position);\n    }\n\n    if ((state.line === _line || state.lineIndent > nodeIndent) && (ch !== 0)) {\n      throwError(state, 'bad indentation of a mapping entry');\n    } else if (state.lineIndent < nodeIndent) {\n      break;\n    }\n  }\n\n  //\n  // Epilogue.\n  //\n\n  // Special case: last mapping's node contains only the key in explicit notation.\n  if (atExplicitKey) {\n    storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);\n  }\n\n  // Expose the resulting mapping.\n  if (detected) {\n    state.tag = _tag;\n    state.anchor = _anchor;\n    state.kind = 'mapping';\n    state.result = _result;\n  }\n\n  return detected;\n}\n\nfunction readTagProperty(state) {\n  var _position,\n      isVerbatim = false,\n      isNamed    = false,\n      tagHandle,\n      tagName,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x21/* ! */) return false;\n\n  if (state.tag !== null) {\n    throwError(state, 'duplication of a tag property');\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n\n  if (ch === 0x3C/* < */) {\n    isVerbatim = true;\n    ch = state.input.charCodeAt(++state.position);\n\n  } else if (ch === 0x21/* ! */) {\n    isNamed = true;\n    tagHandle = '!!';\n    ch = state.input.charCodeAt(++state.position);\n\n  } else {\n    tagHandle = '!';\n  }\n\n  _position = state.position;\n\n  if (isVerbatim) {\n    do { ch = state.input.charCodeAt(++state.position); }\n    while (ch !== 0 && ch !== 0x3E/* > */);\n\n    if (state.position < state.length) {\n      tagName = state.input.slice(_position, state.position);\n      ch = state.input.charCodeAt(++state.position);\n    } else {\n      throwError(state, 'unexpected end of the stream within a verbatim tag');\n    }\n  } else {\n    while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n\n      if (ch === 0x21/* ! */) {\n        if (!isNamed) {\n          tagHandle = state.input.slice(_position - 1, state.position + 1);\n\n          if (!PATTERN_TAG_HANDLE.test(tagHandle)) {\n            throwError(state, 'named tag handle cannot contain such characters');\n          }\n\n          isNamed = true;\n          _position = state.position + 1;\n        } else {\n          throwError(state, 'tag suffix cannot contain exclamation marks');\n        }\n      }\n\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    tagName = state.input.slice(_position, state.position);\n\n    if (PATTERN_FLOW_INDICATORS.test(tagName)) {\n      throwError(state, 'tag suffix cannot contain flow indicator characters');\n    }\n  }\n\n  if (tagName && !PATTERN_TAG_URI.test(tagName)) {\n    throwError(state, 'tag name cannot contain such characters: ' + tagName);\n  }\n\n  try {\n    tagName = decodeURIComponent(tagName);\n  } catch (err) {\n    throwError(state, 'tag name is malformed: ' + tagName);\n  }\n\n  if (isVerbatim) {\n    state.tag = tagName;\n\n  } else if (_hasOwnProperty$1.call(state.tagMap, tagHandle)) {\n    state.tag = state.tagMap[tagHandle] + tagName;\n\n  } else if (tagHandle === '!') {\n    state.tag = '!' + tagName;\n\n  } else if (tagHandle === '!!') {\n    state.tag = 'tag:yaml.org,2002:' + tagName;\n\n  } else {\n    throwError(state, 'undeclared tag handle \"' + tagHandle + '\"');\n  }\n\n  return true;\n}\n\nfunction readAnchorProperty(state) {\n  var _position,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x26/* & */) return false;\n\n  if (state.anchor !== null) {\n    throwError(state, 'duplication of an anchor property');\n  }\n\n  ch = state.input.charCodeAt(++state.position);\n  _position = state.position;\n\n  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  if (state.position === _position) {\n    throwError(state, 'name of an anchor node must contain at least one character');\n  }\n\n  state.anchor = state.input.slice(_position, state.position);\n  return true;\n}\n\nfunction readAlias(state) {\n  var _position, alias,\n      ch;\n\n  ch = state.input.charCodeAt(state.position);\n\n  if (ch !== 0x2A/* * */) return false;\n\n  ch = state.input.charCodeAt(++state.position);\n  _position = state.position;\n\n  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {\n    ch = state.input.charCodeAt(++state.position);\n  }\n\n  if (state.position === _position) {\n    throwError(state, 'name of an alias node must contain at least one character');\n  }\n\n  alias = state.input.slice(_position, state.position);\n\n  if (!_hasOwnProperty$1.call(state.anchorMap, alias)) {\n    throwError(state, 'unidentified alias \"' + alias + '\"');\n  }\n\n  state.result = state.anchorMap[alias];\n  skipSeparationSpace(state, true, -1);\n  return true;\n}\n\nfunction composeNode(state, parentIndent, nodeContext, allowToSeek, allowCompact) {\n  var allowBlockStyles,\n      allowBlockScalars,\n      allowBlockCollections,\n      indentStatus = 1, // 1: this>parent, 0: this=parent, -1: this<parent\n      atNewLine  = false,\n      hasContent = false,\n      typeIndex,\n      typeQuantity,\n      typeList,\n      type,\n      flowIndent,\n      blockIndent;\n\n  if (state.listener !== null) {\n    state.listener('open', state);\n  }\n\n  state.tag    = null;\n  state.anchor = null;\n  state.kind   = null;\n  state.result = null;\n\n  allowBlockStyles = allowBlockScalars = allowBlockCollections =\n    CONTEXT_BLOCK_OUT === nodeContext ||\n    CONTEXT_BLOCK_IN  === nodeContext;\n\n  if (allowToSeek) {\n    if (skipSeparationSpace(state, true, -1)) {\n      atNewLine = true;\n\n      if (state.lineIndent > parentIndent) {\n        indentStatus = 1;\n      } else if (state.lineIndent === parentIndent) {\n        indentStatus = 0;\n      } else if (state.lineIndent < parentIndent) {\n        indentStatus = -1;\n      }\n    }\n  }\n\n  if (indentStatus === 1) {\n    while (readTagProperty(state) || readAnchorProperty(state)) {\n      if (skipSeparationSpace(state, true, -1)) {\n        atNewLine = true;\n        allowBlockCollections = allowBlockStyles;\n\n        if (state.lineIndent > parentIndent) {\n          indentStatus = 1;\n        } else if (state.lineIndent === parentIndent) {\n          indentStatus = 0;\n        } else if (state.lineIndent < parentIndent) {\n          indentStatus = -1;\n        }\n      } else {\n        allowBlockCollections = false;\n      }\n    }\n  }\n\n  if (allowBlockCollections) {\n    allowBlockCollections = atNewLine || allowCompact;\n  }\n\n  if (indentStatus === 1 || CONTEXT_BLOCK_OUT === nodeContext) {\n    if (CONTEXT_FLOW_IN === nodeContext || CONTEXT_FLOW_OUT === nodeContext) {\n      flowIndent = parentIndent;\n    } else {\n      flowIndent = parentIndent + 1;\n    }\n\n    blockIndent = state.position - state.lineStart;\n\n    if (indentStatus === 1) {\n      if (allowBlockCollections &&\n          (readBlockSequence(state, blockIndent) ||\n           readBlockMapping(state, blockIndent, flowIndent)) ||\n          readFlowCollection(state, flowIndent)) {\n        hasContent = true;\n      } else {\n        if ((allowBlockScalars && readBlockScalar(state, flowIndent)) ||\n            readSingleQuotedScalar(state, flowIndent) ||\n            readDoubleQuotedScalar(state, flowIndent)) {\n          hasContent = true;\n\n        } else if (readAlias(state)) {\n          hasContent = true;\n\n          if (state.tag !== null || state.anchor !== null) {\n            throwError(state, 'alias node should not have any properties');\n          }\n\n        } else if (readPlainScalar(state, flowIndent, CONTEXT_FLOW_IN === nodeContext)) {\n          hasContent = true;\n\n          if (state.tag === null) {\n            state.tag = '?';\n          }\n        }\n\n        if (state.anchor !== null) {\n          state.anchorMap[state.anchor] = state.result;\n        }\n      }\n    } else if (indentStatus === 0) {\n      // Special case: block sequences are allowed to have same indentation level as the parent.\n      // http://www.yaml.org/spec/1.2/spec.html#id2799784\n      hasContent = allowBlockCollections && readBlockSequence(state, blockIndent);\n    }\n  }\n\n  if (state.tag === null) {\n    if (state.anchor !== null) {\n      state.anchorMap[state.anchor] = state.result;\n    }\n\n  } else if (state.tag === '?') {\n    // Implicit resolving is not allowed for non-scalar types, and '?'\n    // non-specific tag is only automatically assigned to plain scalars.\n    //\n    // We only need to check kind conformity in case user explicitly assigns '?'\n    // tag, for example like this: \"!<?> [0]\"\n    //\n    if (state.result !== null && state.kind !== 'scalar') {\n      throwError(state, 'unacceptable node kind for !<?> tag; it should be \"scalar\", not \"' + state.kind + '\"');\n    }\n\n    for (typeIndex = 0, typeQuantity = state.implicitTypes.length; typeIndex < typeQuantity; typeIndex += 1) {\n      type = state.implicitTypes[typeIndex];\n\n      if (type.resolve(state.result)) { // `state.result` updated in resolver if matched\n        state.result = type.construct(state.result);\n        state.tag = type.tag;\n        if (state.anchor !== null) {\n          state.anchorMap[state.anchor] = state.result;\n        }\n        break;\n      }\n    }\n  } else if (state.tag !== '!') {\n    if (_hasOwnProperty$1.call(state.typeMap[state.kind || 'fallback'], state.tag)) {\n      type = state.typeMap[state.kind || 'fallback'][state.tag];\n    } else {\n      // looking for multi type\n      type = null;\n      typeList = state.typeMap.multi[state.kind || 'fallback'];\n\n      for (typeIndex = 0, typeQuantity = typeList.length; typeIndex < typeQuantity; typeIndex += 1) {\n        if (state.tag.slice(0, typeList[typeIndex].tag.length) === typeList[typeIndex].tag) {\n          type = typeList[typeIndex];\n          break;\n        }\n      }\n    }\n\n    if (!type) {\n      throwError(state, 'unknown tag !<' + state.tag + '>');\n    }\n\n    if (state.result !== null && type.kind !== state.kind) {\n      throwError(state, 'unacceptable node kind for !<' + state.tag + '> tag; it should be \"' + type.kind + '\", not \"' + state.kind + '\"');\n    }\n\n    if (!type.resolve(state.result, state.tag)) { // `state.result` updated in resolver if matched\n      throwError(state, 'cannot resolve a node with !<' + state.tag + '> explicit tag');\n    } else {\n      state.result = type.construct(state.result, state.tag);\n      if (state.anchor !== null) {\n        state.anchorMap[state.anchor] = state.result;\n      }\n    }\n  }\n\n  if (state.listener !== null) {\n    state.listener('close', state);\n  }\n  return state.tag !== null ||  state.anchor !== null || hasContent;\n}\n\nfunction readDocument(state) {\n  var documentStart = state.position,\n      _position,\n      directiveName,\n      directiveArgs,\n      hasDirectives = false,\n      ch;\n\n  state.version = null;\n  state.checkLineBreaks = state.legacy;\n  state.tagMap = Object.create(null);\n  state.anchorMap = Object.create(null);\n\n  while ((ch = state.input.charCodeAt(state.position)) !== 0) {\n    skipSeparationSpace(state, true, -1);\n\n    ch = state.input.charCodeAt(state.position);\n\n    if (state.lineIndent > 0 || ch !== 0x25/* % */) {\n      break;\n    }\n\n    hasDirectives = true;\n    ch = state.input.charCodeAt(++state.position);\n    _position = state.position;\n\n    while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n      ch = state.input.charCodeAt(++state.position);\n    }\n\n    directiveName = state.input.slice(_position, state.position);\n    directiveArgs = [];\n\n    if (directiveName.length < 1) {\n      throwError(state, 'directive name must not be less than one character in length');\n    }\n\n    while (ch !== 0) {\n      while (is_WHITE_SPACE(ch)) {\n        ch = state.input.charCodeAt(++state.position);\n      }\n\n      if (ch === 0x23/* # */) {\n        do { ch = state.input.charCodeAt(++state.position); }\n        while (ch !== 0 && !is_EOL(ch));\n        break;\n      }\n\n      if (is_EOL(ch)) break;\n\n      _position = state.position;\n\n      while (ch !== 0 && !is_WS_OR_EOL(ch)) {\n        ch = state.input.charCodeAt(++state.position);\n      }\n\n      directiveArgs.push(state.input.slice(_position, state.position));\n    }\n\n    if (ch !== 0) readLineBreak(state);\n\n    if (_hasOwnProperty$1.call(directiveHandlers, directiveName)) {\n      directiveHandlers[directiveName](state, directiveName, directiveArgs);\n    } else {\n      throwWarning(state, 'unknown document directive \"' + directiveName + '\"');\n    }\n  }\n\n  skipSeparationSpace(state, true, -1);\n\n  if (state.lineIndent === 0 &&\n      state.input.charCodeAt(state.position)     === 0x2D/* - */ &&\n      state.input.charCodeAt(state.position + 1) === 0x2D/* - */ &&\n      state.input.charCodeAt(state.position + 2) === 0x2D/* - */) {\n    state.position += 3;\n    skipSeparationSpace(state, true, -1);\n\n  } else if (hasDirectives) {\n    throwError(state, 'directives end mark is expected');\n  }\n\n  composeNode(state, state.lineIndent - 1, CONTEXT_BLOCK_OUT, false, true);\n  skipSeparationSpace(state, true, -1);\n\n  if (state.checkLineBreaks &&\n      PATTERN_NON_ASCII_LINE_BREAKS.test(state.input.slice(documentStart, state.position))) {\n    throwWarning(state, 'non-ASCII line breaks are interpreted as content');\n  }\n\n  state.documents.push(state.result);\n\n  if (state.position === state.lineStart && testDocumentSeparator(state)) {\n\n    if (state.input.charCodeAt(state.position) === 0x2E/* . */) {\n      state.position += 3;\n      skipSeparationSpace(state, true, -1);\n    }\n    return;\n  }\n\n  if (state.position < (state.length - 1)) {\n    throwError(state, 'end of the stream or a document separator is expected');\n  } else {\n    return;\n  }\n}\n\n\nfunction loadDocuments(input, options) {\n  input = String(input);\n  options = options || {};\n\n  if (input.length !== 0) {\n\n    // Add tailing `\\n` if not exists\n    if (input.charCodeAt(input.length - 1) !== 0x0A/* LF */ &&\n        input.charCodeAt(input.length - 1) !== 0x0D/* CR */) {\n      input += '\\n';\n    }\n\n    // Strip BOM\n    if (input.charCodeAt(0) === 0xFEFF) {\n      input = input.slice(1);\n    }\n  }\n\n  var state = new State$1(input, options);\n\n  var nullpos = input.indexOf('\\0');\n\n  if (nullpos !== -1) {\n    state.position = nullpos;\n    throwError(state, 'null byte is not allowed in input');\n  }\n\n  // Use 0 as string terminator. That significantly simplifies bounds check.\n  state.input += '\\0';\n\n  while (state.input.charCodeAt(state.position) === 0x20/* Space */) {\n    state.lineIndent += 1;\n    state.position += 1;\n  }\n\n  while (state.position < (state.length - 1)) {\n    readDocument(state);\n  }\n\n  return state.documents;\n}\n\n\nfunction loadAll$1(input, iterator, options) {\n  if (iterator !== null && typeof iterator === 'object' && typeof options === 'undefined') {\n    options = iterator;\n    iterator = null;\n  }\n\n  var documents = loadDocuments(input, options);\n\n  if (typeof iterator !== 'function') {\n    return documents;\n  }\n\n  for (var index = 0, length = documents.length; index < length; index += 1) {\n    iterator(documents[index]);\n  }\n}\n\n\nfunction load$1(input, options) {\n  var documents = loadDocuments(input, options);\n\n  if (documents.length === 0) {\n    /*eslint-disable no-undefined*/\n    return undefined;\n  } else if (documents.length === 1) {\n    return documents[0];\n  }\n  throw new exception('expected a single document in the stream, but found more');\n}\n\n\nvar loadAll_1 = loadAll$1;\nvar load_1    = load$1;\n\nvar loader = {\n\tloadAll: loadAll_1,\n\tload: load_1\n};\n\n/*eslint-disable no-use-before-define*/\n\n\n\n\n\nvar _toString       = Object.prototype.toString;\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar CHAR_BOM                  = 0xFEFF;\nvar CHAR_TAB                  = 0x09; /* Tab */\nvar CHAR_LINE_FEED            = 0x0A; /* LF */\nvar CHAR_CARRIAGE_RETURN      = 0x0D; /* CR */\nvar CHAR_SPACE                = 0x20; /* Space */\nvar CHAR_EXCLAMATION          = 0x21; /* ! */\nvar CHAR_DOUBLE_QUOTE         = 0x22; /* \" */\nvar CHAR_SHARP                = 0x23; /* # */\nvar CHAR_PERCENT              = 0x25; /* % */\nvar CHAR_AMPERSAND            = 0x26; /* & */\nvar CHAR_SINGLE_QUOTE         = 0x27; /* ' */\nvar CHAR_ASTERISK             = 0x2A; /* * */\nvar CHAR_COMMA                = 0x2C; /* , */\nvar CHAR_MINUS                = 0x2D; /* - */\nvar CHAR_COLON                = 0x3A; /* : */\nvar CHAR_EQUALS               = 0x3D; /* = */\nvar CHAR_GREATER_THAN         = 0x3E; /* > */\nvar CHAR_QUESTION             = 0x3F; /* ? */\nvar CHAR_COMMERCIAL_AT        = 0x40; /* @ */\nvar CHAR_LEFT_SQUARE_BRACKET  = 0x5B; /* [ */\nvar CHAR_RIGHT_SQUARE_BRACKET = 0x5D; /* ] */\nvar CHAR_GRAVE_ACCENT         = 0x60; /* ` */\nvar CHAR_LEFT_CURLY_BRACKET   = 0x7B; /* { */\nvar CHAR_VERTICAL_LINE        = 0x7C; /* | */\nvar CHAR_RIGHT_CURLY_BRACKET  = 0x7D; /* } */\n\nvar ESCAPE_SEQUENCES = {};\n\nESCAPE_SEQUENCES[0x00]   = '\\\\0';\nESCAPE_SEQUENCES[0x07]   = '\\\\a';\nESCAPE_SEQUENCES[0x08]   = '\\\\b';\nESCAPE_SEQUENCES[0x09]   = '\\\\t';\nESCAPE_SEQUENCES[0x0A]   = '\\\\n';\nESCAPE_SEQUENCES[0x0B]   = '\\\\v';\nESCAPE_SEQUENCES[0x0C]   = '\\\\f';\nESCAPE_SEQUENCES[0x0D]   = '\\\\r';\nESCAPE_SEQUENCES[0x1B]   = '\\\\e';\nESCAPE_SEQUENCES[0x22]   = '\\\\\"';\nESCAPE_SEQUENCES[0x5C]   = '\\\\\\\\';\nESCAPE_SEQUENCES[0x85]   = '\\\\N';\nESCAPE_SEQUENCES[0xA0]   = '\\\\_';\nESCAPE_SEQUENCES[0x2028] = '\\\\L';\nESCAPE_SEQUENCES[0x2029] = '\\\\P';\n\nvar DEPRECATED_BOOLEANS_SYNTAX = [\n  'y', 'Y', 'yes', 'Yes', 'YES', 'on', 'On', 'ON',\n  'n', 'N', 'no', 'No', 'NO', 'off', 'Off', 'OFF'\n];\n\nvar DEPRECATED_BASE60_SYNTAX = /^[-+]?[0-9_]+(?::[0-9_]+)+(?:\\.[0-9_]*)?$/;\n\nfunction compileStyleMap(schema, map) {\n  var result, keys, index, length, tag, style, type;\n\n  if (map === null) return {};\n\n  result = {};\n  keys = Object.keys(map);\n\n  for (index = 0, length = keys.length; index < length; index += 1) {\n    tag = keys[index];\n    style = String(map[tag]);\n\n    if (tag.slice(0, 2) === '!!') {\n      tag = 'tag:yaml.org,2002:' + tag.slice(2);\n    }\n    type = schema.compiledTypeMap['fallback'][tag];\n\n    if (type && _hasOwnProperty.call(type.styleAliases, style)) {\n      style = type.styleAliases[style];\n    }\n\n    result[tag] = style;\n  }\n\n  return result;\n}\n\nfunction encodeHex(character) {\n  var string, handle, length;\n\n  string = character.toString(16).toUpperCase();\n\n  if (character <= 0xFF) {\n    handle = 'x';\n    length = 2;\n  } else if (character <= 0xFFFF) {\n    handle = 'u';\n    length = 4;\n  } else if (character <= 0xFFFFFFFF) {\n    handle = 'U';\n    length = 8;\n  } else {\n    throw new exception('code point within a string may not be greater than 0xFFFFFFFF');\n  }\n\n  return '\\\\' + handle + common.repeat('0', length - string.length) + string;\n}\n\n\nvar QUOTING_TYPE_SINGLE = 1,\n    QUOTING_TYPE_DOUBLE = 2;\n\nfunction State(options) {\n  this.schema        = options['schema'] || _default;\n  this.indent        = Math.max(1, (options['indent'] || 2));\n  this.noArrayIndent = options['noArrayIndent'] || false;\n  this.skipInvalid   = options['skipInvalid'] || false;\n  this.flowLevel     = (common.isNothing(options['flowLevel']) ? -1 : options['flowLevel']);\n  this.styleMap      = compileStyleMap(this.schema, options['styles'] || null);\n  this.sortKeys      = options['sortKeys'] || false;\n  this.lineWidth     = options['lineWidth'] || 80;\n  this.noRefs        = options['noRefs'] || false;\n  this.noCompatMode  = options['noCompatMode'] || false;\n  this.condenseFlow  = options['condenseFlow'] || false;\n  this.quotingType   = options['quotingType'] === '\"' ? QUOTING_TYPE_DOUBLE : QUOTING_TYPE_SINGLE;\n  this.forceQuotes   = options['forceQuotes'] || false;\n  this.replacer      = typeof options['replacer'] === 'function' ? options['replacer'] : null;\n\n  this.implicitTypes = this.schema.compiledImplicit;\n  this.explicitTypes = this.schema.compiledExplicit;\n\n  this.tag = null;\n  this.result = '';\n\n  this.duplicates = [];\n  this.usedDuplicates = null;\n}\n\n// Indents every line in a string. Empty lines (\\n only) are not indented.\nfunction indentString(string, spaces) {\n  var ind = common.repeat(' ', spaces),\n      position = 0,\n      next = -1,\n      result = '',\n      line,\n      length = string.length;\n\n  while (position < length) {\n    next = string.indexOf('\\n', position);\n    if (next === -1) {\n      line = string.slice(position);\n      position = length;\n    } else {\n      line = string.slice(position, next + 1);\n      position = next + 1;\n    }\n\n    if (line.length && line !== '\\n') result += ind;\n\n    result += line;\n  }\n\n  return result;\n}\n\nfunction generateNextLine(state, level) {\n  return '\\n' + common.repeat(' ', state.indent * level);\n}\n\nfunction testImplicitResolving(state, str) {\n  var index, length, type;\n\n  for (index = 0, length = state.implicitTypes.length; index < length; index += 1) {\n    type = state.implicitTypes[index];\n\n    if (type.resolve(str)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// [33] s-white ::= s-space | s-tab\nfunction isWhitespace(c) {\n  return c === CHAR_SPACE || c === CHAR_TAB;\n}\n\n// Returns true if the character can be printed without escaping.\n// From YAML 1.2: \"any allowed characters known to be non-printable\n// should also be escaped. [However,] This isn\u2019t mandatory\"\n// Derived from nb-char - \\t - #x85 - #xA0 - #x2028 - #x2029.\nfunction isPrintable(c) {\n  return  (0x00020 <= c && c <= 0x00007E)\n      || ((0x000A1 <= c && c <= 0x00D7FF) && c !== 0x2028 && c !== 0x2029)\n      || ((0x0E000 <= c && c <= 0x00FFFD) && c !== CHAR_BOM)\n      ||  (0x10000 <= c && c <= 0x10FFFF);\n}\n\n// [34] ns-char ::= nb-char - s-white\n// [27] nb-char ::= c-printable - b-char - c-byte-order-mark\n// [26] b-char  ::= b-line-feed | b-carriage-return\n// Including s-white (for some reason, examples doesn't match specs in this aspect)\n// ns-char ::= c-printable - b-line-feed - b-carriage-return - c-byte-order-mark\nfunction isNsCharOrWhitespace(c) {\n  return isPrintable(c)\n    && c !== CHAR_BOM\n    // - b-char\n    && c !== CHAR_CARRIAGE_RETURN\n    && c !== CHAR_LINE_FEED;\n}\n\n// [127]  ns-plain-safe(c) ::= c = flow-out  \u21D2 ns-plain-safe-out\n//                             c = flow-in   \u21D2 ns-plain-safe-in\n//                             c = block-key \u21D2 ns-plain-safe-out\n//                             c = flow-key  \u21D2 ns-plain-safe-in\n// [128] ns-plain-safe-out ::= ns-char\n// [129]  ns-plain-safe-in ::= ns-char - c-flow-indicator\n// [130]  ns-plain-char(c) ::=  ( ns-plain-safe(c) - \u201C:\u201D - \u201C#\u201D )\n//                            | ( /* An ns-char preceding */ \u201C#\u201D )\n//                            | ( \u201C:\u201D /* Followed by an ns-plain-safe(c) */ )\nfunction isPlainSafe(c, prev, inblock) {\n  var cIsNsCharOrWhitespace = isNsCharOrWhitespace(c);\n  var cIsNsChar = cIsNsCharOrWhitespace && !isWhitespace(c);\n  return (\n    // ns-plain-safe\n    inblock ? // c = flow-in\n      cIsNsCharOrWhitespace\n      : cIsNsCharOrWhitespace\n        // - c-flow-indicator\n        && c !== CHAR_COMMA\n        && c !== CHAR_LEFT_SQUARE_BRACKET\n        && c !== CHAR_RIGHT_SQUARE_BRACKET\n        && c !== CHAR_LEFT_CURLY_BRACKET\n        && c !== CHAR_RIGHT_CURLY_BRACKET\n  )\n    // ns-plain-char\n    && c !== CHAR_SHARP // false on '#'\n    && !(prev === CHAR_COLON && !cIsNsChar) // false on ': '\n    || (isNsCharOrWhitespace(prev) && !isWhitespace(prev) && c === CHAR_SHARP) // change to true on '[^ ]#'\n    || (prev === CHAR_COLON && cIsNsChar); // change to true on ':[^ ]'\n}\n\n// Simplified test for values allowed as the first character in plain style.\nfunction isPlainSafeFirst(c) {\n  // Uses a subset of ns-char - c-indicator\n  // where ns-char = nb-char - s-white.\n  // No support of ( ( \u201C?\u201D | \u201C:\u201D | \u201C-\u201D ) /* Followed by an ns-plain-safe(c)) */ ) part\n  return isPrintable(c) && c !== CHAR_BOM\n    && !isWhitespace(c) // - s-white\n    // - (c-indicator ::=\n    // \u201C-\u201D | \u201C?\u201D | \u201C:\u201D | \u201C,\u201D | \u201C[\u201D | \u201C]\u201D | \u201C{\u201D | \u201C}\u201D\n    && c !== CHAR_MINUS\n    && c !== CHAR_QUESTION\n    && c !== CHAR_COLON\n    && c !== CHAR_COMMA\n    && c !== CHAR_LEFT_SQUARE_BRACKET\n    && c !== CHAR_RIGHT_SQUARE_BRACKET\n    && c !== CHAR_LEFT_CURLY_BRACKET\n    && c !== CHAR_RIGHT_CURLY_BRACKET\n    // | \u201C#\u201D | \u201C&\u201D | \u201C*\u201D | \u201C!\u201D | \u201C|\u201D | \u201C=\u201D | \u201C>\u201D | \u201C'\u201D | \u201C\"\u201D\n    && c !== CHAR_SHARP\n    && c !== CHAR_AMPERSAND\n    && c !== CHAR_ASTERISK\n    && c !== CHAR_EXCLAMATION\n    && c !== CHAR_VERTICAL_LINE\n    && c !== CHAR_EQUALS\n    && c !== CHAR_GREATER_THAN\n    && c !== CHAR_SINGLE_QUOTE\n    && c !== CHAR_DOUBLE_QUOTE\n    // | \u201C%\u201D | \u201C@\u201D | \u201C`\u201D)\n    && c !== CHAR_PERCENT\n    && c !== CHAR_COMMERCIAL_AT\n    && c !== CHAR_GRAVE_ACCENT;\n}\n\n// Simplified test for values allowed as the last character in plain style.\nfunction isPlainSafeLast(c) {\n  // just not whitespace or colon, it will be checked to be plain character later\n  return !isWhitespace(c) && c !== CHAR_COLON;\n}\n\n// Same as 'string'.codePointAt(pos), but works in older browsers.\nfunction codePointAt(string, pos) {\n  var first = string.charCodeAt(pos), second;\n  if (first >= 0xD800 && first <= 0xDBFF && pos + 1 < string.length) {\n    second = string.charCodeAt(pos + 1);\n    if (second >= 0xDC00 && second <= 0xDFFF) {\n      // https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n      return (first - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n    }\n  }\n  return first;\n}\n\n// Determines whether block indentation indicator is required.\nfunction needIndentIndicator(string) {\n  var leadingSpaceRe = /^\\n* /;\n  return leadingSpaceRe.test(string);\n}\n\nvar STYLE_PLAIN   = 1,\n    STYLE_SINGLE  = 2,\n    STYLE_LITERAL = 3,\n    STYLE_FOLDED  = 4,\n    STYLE_DOUBLE  = 5;\n\n// Determines which scalar styles are possible and returns the preferred style.\n// lineWidth = -1 => no limit.\n// Pre-conditions: str.length > 0.\n// Post-conditions:\n//    STYLE_PLAIN or STYLE_SINGLE => no \\n are in the string.\n//    STYLE_LITERAL => no lines are suitable for folding (or lineWidth is -1).\n//    STYLE_FOLDED => a line > lineWidth and can be folded (and lineWidth != -1).\nfunction chooseScalarStyle(string, singleLineOnly, indentPerLevel, lineWidth,\n  testAmbiguousType, quotingType, forceQuotes, inblock) {\n\n  var i;\n  var char = 0;\n  var prevChar = null;\n  var hasLineBreak = false;\n  var hasFoldableLine = false; // only checked if shouldTrackWidth\n  var shouldTrackWidth = lineWidth !== -1;\n  var previousLineBreak = -1; // count the first line correctly\n  var plain = isPlainSafeFirst(codePointAt(string, 0))\n          && isPlainSafeLast(codePointAt(string, string.length - 1));\n\n  if (singleLineOnly || forceQuotes) {\n    // Case: no block styles.\n    // Check for disallowed characters to rule out plain and single.\n    for (i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n      char = codePointAt(string, i);\n      if (!isPrintable(char)) {\n        return STYLE_DOUBLE;\n      }\n      plain = plain && isPlainSafe(char, prevChar, inblock);\n      prevChar = char;\n    }\n  } else {\n    // Case: block styles permitted.\n    for (i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n      char = codePointAt(string, i);\n      if (char === CHAR_LINE_FEED) {\n        hasLineBreak = true;\n        // Check if any line can be folded.\n        if (shouldTrackWidth) {\n          hasFoldableLine = hasFoldableLine ||\n            // Foldable line = too long, and not more-indented.\n            (i - previousLineBreak - 1 > lineWidth &&\n             string[previousLineBreak + 1] !== ' ');\n          previousLineBreak = i;\n        }\n      } else if (!isPrintable(char)) {\n        return STYLE_DOUBLE;\n      }\n      plain = plain && isPlainSafe(char, prevChar, inblock);\n      prevChar = char;\n    }\n    // in case the end is missing a \\n\n    hasFoldableLine = hasFoldableLine || (shouldTrackWidth &&\n      (i - previousLineBreak - 1 > lineWidth &&\n       string[previousLineBreak + 1] !== ' '));\n  }\n  // Although every style can represent \\n without escaping, prefer block styles\n  // for multiline, since they're more readable and they don't add empty lines.\n  // Also prefer folding a super-long line.\n  if (!hasLineBreak && !hasFoldableLine) {\n    // Strings interpretable as another type have to be quoted;\n    // e.g. the string 'true' vs. the boolean true.\n    if (plain && !forceQuotes && !testAmbiguousType(string)) {\n      return STYLE_PLAIN;\n    }\n    return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;\n  }\n  // Edge case: block indentation indicator can only have one digit.\n  if (indentPerLevel > 9 && needIndentIndicator(string)) {\n    return STYLE_DOUBLE;\n  }\n  // At this point we know block styles are valid.\n  // Prefer literal style unless we want to fold.\n  if (!forceQuotes) {\n    return hasFoldableLine ? STYLE_FOLDED : STYLE_LITERAL;\n  }\n  return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;\n}\n\n// Note: line breaking/folding is implemented for only the folded style.\n// NB. We drop the last trailing newline (if any) of a returned block scalar\n//  since the dumper adds its own newline. This always works:\n//    \u2022 No ending newline => unaffected; already using strip \"-\" chomping.\n//    \u2022 Ending newline    => removed then restored.\n//  Importantly, this keeps the \"+\" chomp indicator from gaining an extra line.\nfunction writeScalar(state, string, level, iskey, inblock) {\n  state.dump = (function () {\n    if (string.length === 0) {\n      return state.quotingType === QUOTING_TYPE_DOUBLE ? '\"\"' : \"''\";\n    }\n    if (!state.noCompatMode) {\n      if (DEPRECATED_BOOLEANS_SYNTAX.indexOf(string) !== -1 || DEPRECATED_BASE60_SYNTAX.test(string)) {\n        return state.quotingType === QUOTING_TYPE_DOUBLE ? ('\"' + string + '\"') : (\"'\" + string + \"'\");\n      }\n    }\n\n    var indent = state.indent * Math.max(1, level); // no 0-indent scalars\n    // As indentation gets deeper, let the width decrease monotonically\n    // to the lower bound min(state.lineWidth, 40).\n    // Note that this implies\n    //  state.lineWidth \u2264 40 + state.indent: width is fixed at the lower bound.\n    //  state.lineWidth > 40 + state.indent: width decreases until the lower bound.\n    // This behaves better than a constant minimum width which disallows narrower options,\n    // or an indent threshold which causes the width to suddenly increase.\n    var lineWidth = state.lineWidth === -1\n      ? -1 : Math.max(Math.min(state.lineWidth, 40), state.lineWidth - indent);\n\n    // Without knowing if keys are implicit/explicit, assume implicit for safety.\n    var singleLineOnly = iskey\n      // No block styles in flow mode.\n      || (state.flowLevel > -1 && level >= state.flowLevel);\n    function testAmbiguity(string) {\n      return testImplicitResolving(state, string);\n    }\n\n    switch (chooseScalarStyle(string, singleLineOnly, state.indent, lineWidth,\n      testAmbiguity, state.quotingType, state.forceQuotes && !iskey, inblock)) {\n\n      case STYLE_PLAIN:\n        return string;\n      case STYLE_SINGLE:\n        return \"'\" + string.replace(/'/g, \"''\") + \"'\";\n      case STYLE_LITERAL:\n        return '|' + blockHeader(string, state.indent)\n          + dropEndingNewline(indentString(string, indent));\n      case STYLE_FOLDED:\n        return '>' + blockHeader(string, state.indent)\n          + dropEndingNewline(indentString(foldString(string, lineWidth), indent));\n      case STYLE_DOUBLE:\n        return '\"' + escapeString(string) + '\"';\n      default:\n        throw new exception('impossible error: invalid scalar style');\n    }\n  }());\n}\n\n// Pre-conditions: string is valid for a block scalar, 1 <= indentPerLevel <= 9.\nfunction blockHeader(string, indentPerLevel) {\n  var indentIndicator = needIndentIndicator(string) ? String(indentPerLevel) : '';\n\n  // note the special case: the string '\\n' counts as a \"trailing\" empty line.\n  var clip =          string[string.length - 1] === '\\n';\n  var keep = clip && (string[string.length - 2] === '\\n' || string === '\\n');\n  var chomp = keep ? '+' : (clip ? '' : '-');\n\n  return indentIndicator + chomp + '\\n';\n}\n\n// (See the note for writeScalar.)\nfunction dropEndingNewline(string) {\n  return string[string.length - 1] === '\\n' ? string.slice(0, -1) : string;\n}\n\n// Note: a long line without a suitable break point will exceed the width limit.\n// Pre-conditions: every char in str isPrintable, str.length > 0, width > 0.\nfunction foldString(string, width) {\n  // In folded style, $k$ consecutive newlines output as $k+1$ newlines\u2014\n  // unless they're before or after a more-indented line, or at the very\n  // beginning or end, in which case $k$ maps to $k$.\n  // Therefore, parse each chunk as newline(s) followed by a content line.\n  var lineRe = /(\\n+)([^\\n]*)/g;\n\n  // first line (possibly an empty line)\n  var result = (function () {\n    var nextLF = string.indexOf('\\n');\n    nextLF = nextLF !== -1 ? nextLF : string.length;\n    lineRe.lastIndex = nextLF;\n    return foldLine(string.slice(0, nextLF), width);\n  }());\n  // If we haven't reached the first content line yet, don't add an extra \\n.\n  var prevMoreIndented = string[0] === '\\n' || string[0] === ' ';\n  var moreIndented;\n\n  // rest of the lines\n  var match;\n  while ((match = lineRe.exec(string))) {\n    var prefix = match[1], line = match[2];\n    moreIndented = (line[0] === ' ');\n    result += prefix\n      + (!prevMoreIndented && !moreIndented && line !== ''\n        ? '\\n' : '')\n      + foldLine(line, width);\n    prevMoreIndented = moreIndented;\n  }\n\n  return result;\n}\n\n// Greedy line breaking.\n// Picks the longest line under the limit each time,\n// otherwise settles for the shortest line over the limit.\n// NB. More-indented lines *cannot* be folded, as that would add an extra \\n.\nfunction foldLine(line, width) {\n  if (line === '' || line[0] === ' ') return line;\n\n  // Since a more-indented line adds a \\n, breaks can't be followed by a space.\n  var breakRe = / [^ ]/g; // note: the match index will always be <= length-2.\n  var match;\n  // start is an inclusive index. end, curr, and next are exclusive.\n  var start = 0, end, curr = 0, next = 0;\n  var result = '';\n\n  // Invariants: 0 <= start <= length-1.\n  //   0 <= curr <= next <= max(0, length-2). curr - start <= width.\n  // Inside the loop:\n  //   A match implies length >= 2, so curr and next are <= length-2.\n  while ((match = breakRe.exec(line))) {\n    next = match.index;\n    // maintain invariant: curr - start <= width\n    if (next - start > width) {\n      end = (curr > start) ? curr : next; // derive end <= length-2\n      result += '\\n' + line.slice(start, end);\n      // skip the space that was output as \\n\n      start = end + 1;                    // derive start <= length-1\n    }\n    curr = next;\n  }\n\n  // By the invariants, start <= length-1, so there is something left over.\n  // It is either the whole string or a part starting from non-whitespace.\n  result += '\\n';\n  // Insert a break if the remainder is too long and there is a break available.\n  if (line.length - start > width && curr > start) {\n    result += line.slice(start, curr) + '\\n' + line.slice(curr + 1);\n  } else {\n    result += line.slice(start);\n  }\n\n  return result.slice(1); // drop extra \\n joiner\n}\n\n// Escapes a double-quoted string.\nfunction escapeString(string) {\n  var result = '';\n  var char = 0;\n  var escapeSeq;\n\n  for (var i = 0; i < string.length; char >= 0x10000 ? i += 2 : i++) {\n    char = codePointAt(string, i);\n    escapeSeq = ESCAPE_SEQUENCES[char];\n\n    if (!escapeSeq && isPrintable(char)) {\n      result += string[i];\n      if (char >= 0x10000) result += string[i + 1];\n    } else {\n      result += escapeSeq || encodeHex(char);\n    }\n  }\n\n  return result;\n}\n\nfunction writeFlowSequence(state, level, object) {\n  var _result = '',\n      _tag    = state.tag,\n      index,\n      length,\n      value;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    value = object[index];\n\n    if (state.replacer) {\n      value = state.replacer.call(object, String(index), value);\n    }\n\n    // Write only valid elements, put null instead of invalid elements.\n    if (writeNode(state, level, value, false, false) ||\n        (typeof value === 'undefined' &&\n         writeNode(state, level, null, false, false))) {\n\n      if (_result !== '') _result += ',' + (!state.condenseFlow ? ' ' : '');\n      _result += state.dump;\n    }\n  }\n\n  state.tag = _tag;\n  state.dump = '[' + _result + ']';\n}\n\nfunction writeBlockSequence(state, level, object, compact) {\n  var _result = '',\n      _tag    = state.tag,\n      index,\n      length,\n      value;\n\n  for (index = 0, length = object.length; index < length; index += 1) {\n    value = object[index];\n\n    if (state.replacer) {\n      value = state.replacer.call(object, String(index), value);\n    }\n\n    // Write only valid elements, put null instead of invalid elements.\n    if (writeNode(state, level + 1, value, true, true, false, true) ||\n        (typeof value === 'undefined' &&\n         writeNode(state, level + 1, null, true, true, false, true))) {\n\n      if (!compact || _result !== '') {\n        _result += generateNextLine(state, level);\n      }\n\n      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n        _result += '-';\n      } else {\n        _result += '- ';\n      }\n\n      _result += state.dump;\n    }\n  }\n\n  state.tag = _tag;\n  state.dump = _result || '[]'; // Empty sequence if no valid values.\n}\n\nfunction writeFlowMapping(state, level, object) {\n  var _result       = '',\n      _tag          = state.tag,\n      objectKeyList = Object.keys(object),\n      index,\n      length,\n      objectKey,\n      objectValue,\n      pairBuffer;\n\n  for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n\n    pairBuffer = '';\n    if (_result !== '') pairBuffer += ', ';\n\n    if (state.condenseFlow) pairBuffer += '\"';\n\n    objectKey = objectKeyList[index];\n    objectValue = object[objectKey];\n\n    if (state.replacer) {\n      objectValue = state.replacer.call(object, objectKey, objectValue);\n    }\n\n    if (!writeNode(state, level, objectKey, false, false)) {\n      continue; // Skip this pair because of invalid key;\n    }\n\n    if (state.dump.length > 1024) pairBuffer += '? ';\n\n    pairBuffer += state.dump + (state.condenseFlow ? '\"' : '') + ':' + (state.condenseFlow ? '' : ' ');\n\n    if (!writeNode(state, level, objectValue, false, false)) {\n      continue; // Skip this pair because of invalid value.\n    }\n\n    pairBuffer += state.dump;\n\n    // Both key and value are valid.\n    _result += pairBuffer;\n  }\n\n  state.tag = _tag;\n  state.dump = '{' + _result + '}';\n}\n\nfunction writeBlockMapping(state, level, object, compact) {\n  var _result       = '',\n      _tag          = state.tag,\n      objectKeyList = Object.keys(object),\n      index,\n      length,\n      objectKey,\n      objectValue,\n      explicitPair,\n      pairBuffer;\n\n  // Allow sorting keys so that the output file is deterministic\n  if (state.sortKeys === true) {\n    // Default sorting\n    objectKeyList.sort();\n  } else if (typeof state.sortKeys === 'function') {\n    // Custom sort function\n    objectKeyList.sort(state.sortKeys);\n  } else if (state.sortKeys) {\n    // Something is wrong\n    throw new exception('sortKeys must be a boolean or a function');\n  }\n\n  for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n    pairBuffer = '';\n\n    if (!compact || _result !== '') {\n      pairBuffer += generateNextLine(state, level);\n    }\n\n    objectKey = objectKeyList[index];\n    objectValue = object[objectKey];\n\n    if (state.replacer) {\n      objectValue = state.replacer.call(object, objectKey, objectValue);\n    }\n\n    if (!writeNode(state, level + 1, objectKey, true, true, true)) {\n      continue; // Skip this pair because of invalid key.\n    }\n\n    explicitPair = (state.tag !== null && state.tag !== '?') ||\n                   (state.dump && state.dump.length > 1024);\n\n    if (explicitPair) {\n      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n        pairBuffer += '?';\n      } else {\n        pairBuffer += '? ';\n      }\n    }\n\n    pairBuffer += state.dump;\n\n    if (explicitPair) {\n      pairBuffer += generateNextLine(state, level);\n    }\n\n    if (!writeNode(state, level + 1, objectValue, true, explicitPair)) {\n      continue; // Skip this pair because of invalid value.\n    }\n\n    if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {\n      pairBuffer += ':';\n    } else {\n      pairBuffer += ': ';\n    }\n\n    pairBuffer += state.dump;\n\n    // Both key and value are valid.\n    _result += pairBuffer;\n  }\n\n  state.tag = _tag;\n  state.dump = _result || '{}'; // Empty mapping if no valid pairs.\n}\n\nfunction detectType(state, object, explicit) {\n  var _result, typeList, index, length, type, style;\n\n  typeList = explicit ? state.explicitTypes : state.implicitTypes;\n\n  for (index = 0, length = typeList.length; index < length; index += 1) {\n    type = typeList[index];\n\n    if ((type.instanceOf  || type.predicate) &&\n        (!type.instanceOf || ((typeof object === 'object') && (object instanceof type.instanceOf))) &&\n        (!type.predicate  || type.predicate(object))) {\n\n      if (explicit) {\n        if (type.multi && type.representName) {\n          state.tag = type.representName(object);\n        } else {\n          state.tag = type.tag;\n        }\n      } else {\n        state.tag = '?';\n      }\n\n      if (type.represent) {\n        style = state.styleMap[type.tag] || type.defaultStyle;\n\n        if (_toString.call(type.represent) === '[object Function]') {\n          _result = type.represent(object, style);\n        } else if (_hasOwnProperty.call(type.represent, style)) {\n          _result = type.represent[style](object, style);\n        } else {\n          throw new exception('!<' + type.tag + '> tag resolver accepts not \"' + style + '\" style');\n        }\n\n        state.dump = _result;\n      }\n\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// Serializes `object` and writes it to global `result`.\n// Returns true on success, or false on invalid object.\n//\nfunction writeNode(state, level, object, block, compact, iskey, isblockseq) {\n  state.tag = null;\n  state.dump = object;\n\n  if (!detectType(state, object, false)) {\n    detectType(state, object, true);\n  }\n\n  var type = _toString.call(state.dump);\n  var inblock = block;\n  var tagStr;\n\n  if (block) {\n    block = (state.flowLevel < 0 || state.flowLevel > level);\n  }\n\n  var objectOrArray = type === '[object Object]' || type === '[object Array]',\n      duplicateIndex,\n      duplicate;\n\n  if (objectOrArray) {\n    duplicateIndex = state.duplicates.indexOf(object);\n    duplicate = duplicateIndex !== -1;\n  }\n\n  if ((state.tag !== null && state.tag !== '?') || duplicate || (state.indent !== 2 && level > 0)) {\n    compact = false;\n  }\n\n  if (duplicate && state.usedDuplicates[duplicateIndex]) {\n    state.dump = '*ref_' + duplicateIndex;\n  } else {\n    if (objectOrArray && duplicate && !state.usedDuplicates[duplicateIndex]) {\n      state.usedDuplicates[duplicateIndex] = true;\n    }\n    if (type === '[object Object]') {\n      if (block && (Object.keys(state.dump).length !== 0)) {\n        writeBlockMapping(state, level, state.dump, compact);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + state.dump;\n        }\n      } else {\n        writeFlowMapping(state, level, state.dump);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + ' ' + state.dump;\n        }\n      }\n    } else if (type === '[object Array]') {\n      if (block && (state.dump.length !== 0)) {\n        if (state.noArrayIndent && !isblockseq && level > 0) {\n          writeBlockSequence(state, level - 1, state.dump, compact);\n        } else {\n          writeBlockSequence(state, level, state.dump, compact);\n        }\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + state.dump;\n        }\n      } else {\n        writeFlowSequence(state, level, state.dump);\n        if (duplicate) {\n          state.dump = '&ref_' + duplicateIndex + ' ' + state.dump;\n        }\n      }\n    } else if (type === '[object String]') {\n      if (state.tag !== '?') {\n        writeScalar(state, state.dump, level, iskey, inblock);\n      }\n    } else if (type === '[object Undefined]') {\n      return false;\n    } else {\n      if (state.skipInvalid) return false;\n      throw new exception('unacceptable kind of an object to dump ' + type);\n    }\n\n    if (state.tag !== null && state.tag !== '?') {\n      // Need to encode all characters except those allowed by the spec:\n      //\n      // [35] ns-dec-digit    ::=  [#x30-#x39] /* 0-9 */\n      // [36] ns-hex-digit    ::=  ns-dec-digit\n      //                         | [#x41-#x46] /* A-F */ | [#x61-#x66] /* a-f */\n      // [37] ns-ascii-letter ::=  [#x41-#x5A] /* A-Z */ | [#x61-#x7A] /* a-z */\n      // [38] ns-word-char    ::=  ns-dec-digit | ns-ascii-letter | \u201C-\u201D\n      // [39] ns-uri-char     ::=  \u201C%\u201D ns-hex-digit ns-hex-digit | ns-word-char | \u201C#\u201D\n      //                         | \u201C;\u201D | \u201C/\u201D | \u201C?\u201D | \u201C:\u201D | \u201C@\u201D | \u201C&\u201D | \u201C=\u201D | \u201C+\u201D | \u201C$\u201D | \u201C,\u201D\n      //                         | \u201C_\u201D | \u201C.\u201D | \u201C!\u201D | \u201C~\u201D | \u201C*\u201D | \u201C'\u201D | \u201C(\u201D | \u201C)\u201D | \u201C[\u201D | \u201C]\u201D\n      //\n      // Also need to encode '!' because it has special meaning (end of tag prefix).\n      //\n      tagStr = encodeURI(\n        state.tag[0] === '!' ? state.tag.slice(1) : state.tag\n      ).replace(/!/g, '%21');\n\n      if (state.tag[0] === '!') {\n        tagStr = '!' + tagStr;\n      } else if (tagStr.slice(0, 18) === 'tag:yaml.org,2002:') {\n        tagStr = '!!' + tagStr.slice(18);\n      } else {\n        tagStr = '!<' + tagStr + '>';\n      }\n\n      state.dump = tagStr + ' ' + state.dump;\n    }\n  }\n\n  return true;\n}\n\nfunction getDuplicateReferences(object, state) {\n  var objects = [],\n      duplicatesIndexes = [],\n      index,\n      length;\n\n  inspectNode(object, objects, duplicatesIndexes);\n\n  for (index = 0, length = duplicatesIndexes.length; index < length; index += 1) {\n    state.duplicates.push(objects[duplicatesIndexes[index]]);\n  }\n  state.usedDuplicates = new Array(length);\n}\n\nfunction inspectNode(object, objects, duplicatesIndexes) {\n  var objectKeyList,\n      index,\n      length;\n\n  if (object !== null && typeof object === 'object') {\n    index = objects.indexOf(object);\n    if (index !== -1) {\n      if (duplicatesIndexes.indexOf(index) === -1) {\n        duplicatesIndexes.push(index);\n      }\n    } else {\n      objects.push(object);\n\n      if (Array.isArray(object)) {\n        for (index = 0, length = object.length; index < length; index += 1) {\n          inspectNode(object[index], objects, duplicatesIndexes);\n        }\n      } else {\n        objectKeyList = Object.keys(object);\n\n        for (index = 0, length = objectKeyList.length; index < length; index += 1) {\n          inspectNode(object[objectKeyList[index]], objects, duplicatesIndexes);\n        }\n      }\n    }\n  }\n}\n\nfunction dump$1(input, options) {\n  options = options || {};\n\n  var state = new State(options);\n\n  if (!state.noRefs) getDuplicateReferences(input, state);\n\n  var value = input;\n\n  if (state.replacer) {\n    value = state.replacer.call({ '': value }, '', value);\n  }\n\n  if (writeNode(state, 0, value, true, true)) return state.dump + '\\n';\n\n  return '';\n}\n\nvar dump_1 = dump$1;\n\nvar dumper = {\n\tdump: dump_1\n};\n\nfunction renamed(from, to) {\n  return function () {\n    throw new Error('Function yaml.' + from + ' is removed in js-yaml 4. ' +\n      'Use yaml.' + to + ' instead, which is now safe by default.');\n  };\n}\n\n\nvar Type                = type;\nvar Schema              = schema;\nvar FAILSAFE_SCHEMA     = failsafe;\nvar JSON_SCHEMA         = json;\nvar CORE_SCHEMA         = core;\nvar DEFAULT_SCHEMA      = _default;\nvar load                = loader.load;\nvar loadAll             = loader.loadAll;\nvar dump                = dumper.dump;\nvar YAMLException       = exception;\n\n// Re-export all types in case user wants to create custom schema\nvar types = {\n  binary:    binary,\n  float:     float,\n  map:       map,\n  null:      _null,\n  pairs:     pairs,\n  set:       set,\n  timestamp: timestamp,\n  bool:      bool,\n  int:       int,\n  merge:     merge,\n  omap:      omap,\n  seq:       seq,\n  str:       str\n};\n\n// Removed functions from JS-YAML 3.0.x\nvar safeLoad            = renamed('safeLoad', 'load');\nvar safeLoadAll         = renamed('safeLoadAll', 'loadAll');\nvar safeDump            = renamed('safeDump', 'dump');\n\nvar jsYaml = {\n\tType: Type,\n\tSchema: Schema,\n\tFAILSAFE_SCHEMA: FAILSAFE_SCHEMA,\n\tJSON_SCHEMA: JSON_SCHEMA,\n\tCORE_SCHEMA: CORE_SCHEMA,\n\tDEFAULT_SCHEMA: DEFAULT_SCHEMA,\n\tload: load,\n\tloadAll: loadAll,\n\tdump: dump,\n\tYAMLException: YAMLException,\n\ttypes: types,\n\tsafeLoad: safeLoad,\n\tsafeLoadAll: safeLoadAll,\n\tsafeDump: safeDump\n};\n\nexport { CORE_SCHEMA, DEFAULT_SCHEMA, FAILSAFE_SCHEMA, JSON_SCHEMA, Schema, Type, YAMLException, jsYaml as default, dump, load, loadAll, safeDump, safeLoad, safeLoadAll, types };\n", "import {\n  validateSchema\n} from \"./chunk-UATVJBNV.js\";\n\n// src/core/schema/loader.common.ts\nimport { load as yamlLoad } from \"js-yaml\";\nfunction loadSchemaFromJson(json, options = {}) {\n  const errors = [];\n  try {\n    const schema = JSON.parse(json);\n    let validation;\n    if (options.validate !== false) {\n      validation = validateSchema(schema);\n      if (!validation.valid) {\n        errors.push(\"Schema validation failed:\");\n        validation.errors.forEach((error) => {\n          errors.push(`  ${error.path}: ${error.message}`);\n        });\n      }\n    }\n    return {\n      schema,\n      validation,\n      errors\n    };\n  } catch (error) {\n    if (error instanceof Error) {\n      errors.push(`Failed to parse JSON: ${error.message}`);\n    } else {\n      errors.push(\"Failed to parse JSON: Unknown error\");\n    }\n    return { errors };\n  }\n}\nfunction loadSchemaFromYaml(yaml, options = {}) {\n  const errors = [];\n  try {\n    const schema = yamlLoad(yaml);\n    let validation;\n    if (options.validate !== false) {\n      validation = validateSchema(schema);\n      if (!validation.valid) {\n        errors.push(\"Schema validation failed:\");\n        validation.errors.forEach((error) => {\n          errors.push(`  ${error.path}: ${error.message}`);\n        });\n      }\n    }\n    return {\n      schema,\n      validation,\n      errors\n    };\n  } catch (error) {\n    if (error instanceof Error) {\n      errors.push(`Failed to parse YAML: ${error.message}`);\n    } else {\n      errors.push(\"Failed to parse YAML: Unknown error\");\n    }\n    return { errors };\n  }\n}\nfunction validateForGeneration(schema) {\n  const errors = [];\n  if (!schema.models || schema.models.length === 0) {\n    errors.push(\"Schema must define at least one model for generation\");\n  }\n  schema.models?.forEach((model, index) => {\n    if (!model.fields || model.fields.length === 0) {\n      errors.push(`Model \"${model.name}\" at index ${index} must have at least one field`);\n    }\n    model.fields?.forEach((field, fieldIndex) => {\n      if (!field.name) {\n        errors.push(`Field at index ${fieldIndex} in model \"${model.name}\" must have a name`);\n      }\n      if (!field.type) {\n        errors.push(`Field \"${field.name}\" in model \"${model.name}\" must have a type`);\n      }\n    });\n  });\n  return {\n    valid: errors.length === 0,\n    errors: errors.map((message) => ({ path: \"schema\", message }))\n  };\n}\n\n// src/core/schema/loader.ts\nimport { readFile } from \"fs/promises\";\nimport { pathToFileURL } from \"url\";\nasync function loadSchema(filePath, options = {}) {\n  const errors = [];\n  try {\n    let fileUrl = pathToFileURL(filePath).href;\n    const module = await import(fileUrl);\n    let schema;\n    if (module.default) {\n      schema = module.default;\n    } else if (module.schema) {\n      schema = module.schema;\n    } else if (module.appSchema) {\n      schema = module.appSchema;\n    } else {\n      const exports = Object.values(module);\n      const possibleSchema = exports.find(\n        (exp) => typeof exp === \"object\" && exp !== null && \"version\" in exp && \"name\" in exp\n      );\n      if (possibleSchema) {\n        schema = possibleSchema;\n      }\n    }\n    if (!schema) {\n      errors.push(\n        \"Schema file must export a PraxisSchema object (as default, schema, or appSchema)\"\n      );\n      return { errors };\n    }\n    let validation;\n    if (options.validate !== false) {\n      validation = validateSchema(schema);\n      if (!validation.valid) {\n        errors.push(\"Schema validation failed:\");\n        validation.errors.forEach((error) => {\n          errors.push(`  ${error.path}: ${error.message}`);\n        });\n      }\n    }\n    return {\n      schema,\n      validation,\n      errors\n    };\n  } catch (error) {\n    if (error instanceof Error) {\n      errors.push(`Failed to load schema: ${error.message}`);\n    } else {\n      errors.push(\"Failed to load schema: Unknown error\");\n    }\n    return { errors };\n  }\n}\nasync function loadSchemaFromFile(filePath, options = {}) {\n  if (filePath.endsWith(\".json\")) {\n    const content = await readFile(filePath, \"utf-8\");\n    return loadSchemaFromJson(content, options);\n  } else if (filePath.endsWith(\".yaml\") || filePath.endsWith(\".yml\")) {\n    const content = await readFile(filePath, \"utf-8\");\n    return loadSchemaFromYaml(content, options);\n  } else {\n    return loadSchema(filePath, options);\n  }\n}\n\nexport {\n  loadSchemaFromJson,\n  loadSchemaFromYaml,\n  validateForGeneration,\n  loadSchema,\n  loadSchemaFromFile\n};\n", "var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __require = /* @__PURE__ */ ((x) => typeof require !== \"undefined\" ? require : typeof Proxy !== \"undefined\" ? new Proxy(x, {\n  get: (a, b) => (typeof require !== \"undefined\" ? require : a)[b]\n}) : x)(function(x) {\n  if (typeof require !== \"undefined\") return require.apply(this, arguments);\n  throw Error('Dynamic require of \"' + x + '\" is not supported');\n});\nvar __commonJS = (cb, mod) => function __require2() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  // If the importer is in node compatibility mode or this is not an ESM\n  // file that has been converted to a CommonJS file using a Babel-\n  // compatible transform (i.e. \"__esModule\" has not been set), then set\n  // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\n\nexport {\n  __require,\n  __commonJS,\n  __toESM\n};\n", "import {\n  InMemoryPraxisDB,\n  PluresDBPraxisAdapter,\n  createInMemoryDB,\n  createPluresDB\n} from \"./chunk-JQ64KMLN.js\";\nimport {\n  StateDocsGenerator,\n  createStateDocsGenerator,\n  generateDocs\n} from \"./chunk-S54337I5.js\";\nimport {\n  canvasToMermaid,\n  canvasToSchema,\n  canvasToYaml,\n  createCanvasEditor,\n  schemaToCanvas,\n  validateWithGuardian\n} from \"./chunk-SRM3OPPM.js\";\nimport {\n  PraxisRegistry,\n  ReactiveLogicEngine,\n  createReactiveEngine\n} from \"./chunk-LE2ZJYFC.js\";\nimport {\n  TerminalAdapter,\n  createMockExecutor,\n  createTerminalAdapter,\n  runTerminalCommand\n} from \"./chunk-N5Y37EUV.js\";\nimport {\n  PluresDBGenerator,\n  createPluresDBGenerator\n} from \"./chunk-RJMWCNHR.js\";\nimport {\n  loadSchema,\n  loadSchemaFromFile,\n  loadSchemaFromJson,\n  loadSchemaFromYaml,\n  validateForGeneration\n} from \"./chunk-UY7YEBE2.js\";\nimport {\n  createSchemaTemplate,\n  validateSchema\n} from \"./chunk-UATVJBNV.js\";\nimport {\n  LogicEngine,\n  PRAXIS_PROTOCOL_VERSION,\n  createPraxisEngine\n} from \"./chunk-VOMLVI6V.js\";\nimport \"./chunk-QGM4M3NI.js\";\n\n// src/core/reactive-engine.ts\nvar ReactiveLogicEngine2 = class _ReactiveLogicEngine {\n  _state;\n  _subscribers = /* @__PURE__ */ new Set();\n  _contextProxy;\n  _factsProxy;\n  _metaProxy;\n  _batchDepth = 0;\n  _pendingNotification = false;\n  _proxyCache = /* @__PURE__ */ new WeakMap();\n  // Array methods that mutate the array\n  static ARRAY_MUTATORS = [\"push\", \"pop\", \"shift\", \"unshift\", \"splice\", \"sort\", \"reverse\"];\n  constructor(options) {\n    this._state = {\n      context: options.initialContext,\n      facts: options.initialFacts ?? [],\n      meta: options.initialMeta ?? {}\n    };\n    this._contextProxy = this._createReactiveProxy(this._state.context);\n    this._factsProxy = this._createReactiveProxy(this._state.facts);\n    this._metaProxy = this._createReactiveProxy(this._state.meta);\n  }\n  /**\n   * Create a reactive proxy that notifies subscribers on changes.\n   * Uses a WeakMap cache to avoid creating multiple proxies for the same object.\n   */\n  _createReactiveProxy(target) {\n    const cached = this._proxyCache.get(target);\n    if (cached) {\n      return cached;\n    }\n    const self = this;\n    const handler = {\n      get(obj, prop) {\n        const value = Reflect.get(obj, prop);\n        if (value && typeof value === \"object\") {\n          return self._createReactiveProxy(value);\n        }\n        if (Array.isArray(obj) && typeof value === \"function\") {\n          if (_ReactiveLogicEngine.ARRAY_MUTATORS.includes(prop)) {\n            return function(...args) {\n              const result = value.apply(obj, args);\n              self._notify();\n              return result;\n            };\n          }\n        }\n        return value;\n      },\n      set(obj, prop, value) {\n        const oldValue = obj[prop];\n        const result = Reflect.set(obj, prop, value);\n        if (oldValue !== value) {\n          self._notify();\n        }\n        return result;\n      },\n      deleteProperty(obj, prop) {\n        const result = Reflect.deleteProperty(obj, prop);\n        self._notify();\n        return result;\n      }\n    };\n    const proxy = new Proxy(target, handler);\n    this._proxyCache.set(target, proxy);\n    return proxy;\n  }\n  /**\n   * Notify all subscribers of state changes\n   */\n  _notify() {\n    if (this._batchDepth > 0) {\n      this._pendingNotification = true;\n      return;\n    }\n    const currentState = {\n      context: this._contextProxy,\n      facts: this._factsProxy,\n      meta: this._metaProxy\n    };\n    this._subscribers.forEach((callback) => {\n      try {\n        callback(currentState);\n      } catch (error) {\n        console.error(\"Error in reactive engine subscriber:\", error);\n      }\n    });\n  }\n  /**\n   * Get the full state object\n   */\n  get state() {\n    return {\n      context: this._contextProxy,\n      facts: this._factsProxy,\n      meta: this._metaProxy\n    };\n  }\n  /**\n   * Access the reactive context.\n   * Changes to this object will trigger subscriber notifications.\n   */\n  get context() {\n    return this._contextProxy;\n  }\n  /**\n   * Access the reactive facts list.\n   * Changes to this array will trigger subscriber notifications.\n   */\n  get facts() {\n    return this._factsProxy;\n  }\n  /**\n   * Access the reactive metadata.\n   * Changes to this object will trigger subscriber notifications.\n   */\n  get meta() {\n    return this._metaProxy;\n  }\n  /**\n   * Apply a mutation to the state.\n   * This is the \"Action\" or \"Rule\" equivalent.\n   * Mutations are batched - notifications only happen once per apply call.\n   * \n   * @param mutator A function that receives the state and modifies it.\n   */\n  apply(mutator) {\n    this._batchDepth++;\n    try {\n      mutator({\n        context: this._contextProxy,\n        facts: this._factsProxy,\n        meta: this._metaProxy\n      });\n    } finally {\n      this._batchDepth--;\n      if (this._batchDepth === 0 && this._pendingNotification) {\n        this._pendingNotification = false;\n        this._notify();\n      }\n    }\n  }\n  /**\n   * Subscribe to state changes.\n   * Returns an unsubscribe function.\n   * \n   * @param callback Function to call when state changes\n   * @returns Unsubscribe function\n   */\n  subscribe(callback) {\n    this._subscribers.add(callback);\n    try {\n      callback({\n        context: this._contextProxy,\n        facts: this._factsProxy,\n        meta: this._metaProxy\n      });\n    } catch (error) {\n      console.error(\"Error in reactive engine subscriber:\", error);\n    }\n    return () => {\n      this._subscribers.delete(callback);\n    };\n  }\n  /**\n   * Create a derived/computed value from the state.\n   * The selector function will be called whenever the state changes.\n   * \n   * @param selector Function to extract derived value from state\n   * @returns Object with subscribe method for reactive updates\n   */\n  $derived(selector) {\n    const subscribers = /* @__PURE__ */ new Set();\n    let currentValue = selector({\n      context: this._contextProxy,\n      facts: this._factsProxy,\n      meta: this._metaProxy\n    });\n    this.subscribe(() => {\n      const newValue = selector({\n        context: this._contextProxy,\n        facts: this._factsProxy,\n        meta: this._metaProxy\n      });\n      if (newValue !== currentValue) {\n        currentValue = newValue;\n        subscribers.forEach((callback) => {\n          try {\n            callback(currentValue);\n          } catch (error) {\n            console.error(\"Error in derived value subscriber:\", error);\n          }\n        });\n      }\n    });\n    return {\n      subscribe: (callback) => {\n        subscribers.add(callback);\n        try {\n          callback(currentValue);\n        } catch (error) {\n          console.error(\"Error in derived value subscriber:\", error);\n        }\n        return () => {\n          subscribers.delete(callback);\n        };\n      }\n    };\n  }\n};\nfunction createReactiveEngine2(options) {\n  return new ReactiveLogicEngine2(options);\n}\n\n// src/core/actors.ts\nvar ActorManager = class {\n  actors = /* @__PURE__ */ new Map();\n  activeActors = /* @__PURE__ */ new Set();\n  engine = null;\n  /**\n   * Register an actor\n   */\n  register(actor) {\n    if (this.actors.has(actor.id)) {\n      throw new Error(`Actor with id \"${actor.id}\" already registered`);\n    }\n    this.actors.set(actor.id, actor);\n  }\n  /**\n   * Unregister an actor\n   */\n  unregister(actorId) {\n    if (this.activeActors.has(actorId)) {\n      throw new Error(`Cannot unregister active actor \"${actorId}\". Stop it first.`);\n    }\n    this.actors.delete(actorId);\n  }\n  /**\n   * Attach the actor manager to an engine\n   */\n  attachEngine(engine) {\n    this.engine = engine;\n  }\n  /**\n   * Start an actor\n   */\n  async start(actorId) {\n    const actor = this.actors.get(actorId);\n    if (!actor) {\n      throw new Error(`Actor \"${actorId}\" not found`);\n    }\n    if (this.activeActors.has(actorId)) {\n      throw new Error(`Actor \"${actorId}\" is already started`);\n    }\n    if (!this.engine) {\n      throw new Error(\"Actor manager not attached to an engine\");\n    }\n    this.activeActors.add(actorId);\n    if (actor.onStart) {\n      await actor.onStart(this.engine);\n    }\n  }\n  /**\n   * Stop an actor\n   */\n  async stop(actorId) {\n    const actor = this.actors.get(actorId);\n    if (!actor) {\n      throw new Error(`Actor \"${actorId}\" not found`);\n    }\n    if (!this.activeActors.has(actorId)) {\n      return;\n    }\n    this.activeActors.delete(actorId);\n    if (actor.onStop) {\n      await actor.onStop();\n    }\n  }\n  /**\n   * Start all registered actors\n   */\n  async startAll() {\n    const actorIds = Array.from(this.actors.keys());\n    for (const actorId of actorIds) {\n      if (!this.activeActors.has(actorId)) {\n        await this.start(actorId);\n      }\n    }\n  }\n  /**\n   * Stop all active actors\n   */\n  async stopAll() {\n    const activeIds = Array.from(this.activeActors);\n    for (const actorId of activeIds) {\n      await this.stop(actorId);\n    }\n  }\n  /**\n   * Notify active actors of a state change\n   */\n  async notifyStateChange(state) {\n    if (!this.engine) {\n      return;\n    }\n    const promises = [];\n    for (const actorId of this.activeActors) {\n      const actor = this.actors.get(actorId);\n      if (actor?.onStateChange) {\n        const result = actor.onStateChange(state, this.engine);\n        if (result instanceof Promise) {\n          promises.push(result);\n        }\n      }\n    }\n    await Promise.all(promises);\n  }\n  /**\n   * Get all registered actor IDs\n   */\n  getActorIds() {\n    return Array.from(this.actors.keys());\n  }\n  /**\n   * Get all active actor IDs\n   */\n  getActiveActorIds() {\n    return Array.from(this.activeActors);\n  }\n  /**\n   * Check if an actor is active\n   */\n  isActive(actorId) {\n    return this.activeActors.has(actorId);\n  }\n};\nfunction createTimerActor(id, intervalMs, createEvent) {\n  let timerId = null;\n  return {\n    id,\n    description: `Timer actor (${intervalMs}ms) - ${id}`,\n    onStart: (engine) => {\n      timerId = setInterval(() => {\n        engine.step([createEvent()]);\n      }, intervalMs);\n    },\n    onStop: () => {\n      if (timerId) {\n        clearInterval(timerId);\n        timerId = null;\n      }\n    }\n  };\n}\n\n// src/core/introspection.ts\nvar RegistryIntrospector = class {\n  constructor(registry) {\n    this.registry = registry;\n  }\n  /**\n   * Get basic statistics about the registry\n   */\n  getStats() {\n    return {\n      ruleCount: this.registry.getRuleIds().length,\n      constraintCount: this.registry.getConstraintIds().length,\n      moduleCount: 0,\n      // Modules are flattened in registry\n      rulesById: this.registry.getRuleIds(),\n      constraintsById: this.registry.getConstraintIds()\n    };\n  }\n  /**\n   * Generate a JSON schema representation of the registry\n   */\n  generateSchema(protocolVersion) {\n    const rules = this.registry.getAllRules().map((rule) => ({\n      id: rule.id,\n      description: rule.description,\n      type: \"rule\",\n      meta: rule.meta\n    }));\n    const constraints = this.registry.getAllConstraints().map((constraint) => ({\n      id: constraint.id,\n      description: constraint.description,\n      type: \"constraint\",\n      meta: constraint.meta\n    }));\n    return {\n      protocolVersion,\n      rules,\n      constraints,\n      meta: {\n        ruleCount: rules.length,\n        constraintCount: constraints.length\n      }\n    };\n  }\n  /**\n   * Generate a graph representation of the registry\n   *\n   * This creates nodes for rules and constraints.\n   * Edges can be inferred from metadata if rules/constraints\n   * document their dependencies.\n   */\n  generateGraph() {\n    const nodes = [];\n    const edges = [];\n    for (const rule of this.registry.getAllRules()) {\n      nodes.push({\n        id: rule.id,\n        type: \"rule\",\n        description: rule.description,\n        meta: rule.meta\n      });\n      if (rule.meta?.dependsOn) {\n        const deps = Array.isArray(rule.meta.dependsOn) ? rule.meta.dependsOn : [rule.meta.dependsOn];\n        for (const dep of deps) {\n          edges.push({\n            from: String(dep),\n            to: rule.id,\n            type: \"depends-on\"\n          });\n        }\n      }\n    }\n    for (const constraint of this.registry.getAllConstraints()) {\n      nodes.push({\n        id: constraint.id,\n        type: \"constraint\",\n        description: constraint.description,\n        meta: constraint.meta\n      });\n      if (constraint.meta?.constrains) {\n        const targets = Array.isArray(constraint.meta.constrains) ? constraint.meta.constrains : [constraint.meta.constrains];\n        for (const target of targets) {\n          edges.push({\n            from: constraint.id,\n            to: String(target),\n            type: \"constrains\"\n          });\n        }\n      }\n    }\n    return {\n      nodes,\n      edges,\n      meta: {\n        nodeCount: nodes.length,\n        ruleCount: nodes.filter((n) => n.type === \"rule\").length,\n        constraintCount: nodes.filter((n) => n.type === \"constraint\").length\n      }\n    };\n  }\n  /**\n   * Export graph in DOT format (Graphviz)\n   *\n   * This can be rendered with Graphviz tools or online services.\n   */\n  exportDOT() {\n    const graph = this.generateGraph();\n    const lines = [];\n    lines.push(\"digraph PraxisRegistry {\");\n    lines.push(\"  rankdir=TB;\");\n    lines.push(\"  node [shape=box, style=rounded];\");\n    lines.push(\"\");\n    for (const node of graph.nodes) {\n      const shape = node.type === \"rule\" ? \"box\" : \"diamond\";\n      const color = node.type === \"rule\" ? \"lightblue\" : \"lightcoral\";\n      const label = `${node.id}\\\\n${node.description}`;\n      lines.push(\n        `  \"${node.id}\" [label=\"${label}\", shape=${shape}, style=filled, fillcolor=${color}];`\n      );\n    }\n    lines.push(\"\");\n    for (const edge of graph.edges) {\n      const style = edge.type === \"constrains\" ? \"dashed\" : \"solid\";\n      lines.push(`  \"${edge.from}\" -> \"${edge.to}\" [label=\"${edge.type}\", style=${style}];`);\n    }\n    lines.push(\"}\");\n    return lines.join(\"\\n\");\n  }\n  /**\n   * Export graph in Mermaid format\n   *\n   * Mermaid is a markdown-friendly diagramming language.\n   */\n  exportMermaid() {\n    const graph = this.generateGraph();\n    const lines = [];\n    lines.push(\"graph TB\");\n    for (const node of graph.nodes) {\n      const shape = node.type === \"rule\" ? \"[\" : \"{\";\n      const endShape = node.type === \"rule\" ? \"]\" : \"}\";\n      const label = `${node.id}<br/>${node.description}`;\n      lines.push(`  ${node.id}${shape}\"${label}\"${endShape}`);\n    }\n    lines.push(\"\");\n    for (const edge of graph.edges) {\n      const arrow = edge.type === \"constrains\" ? \"-.->|constrains|\" : \"-->|\" + edge.type + \"|\";\n      lines.push(`  ${edge.from} ${arrow} ${edge.to}`);\n    }\n    return lines.join(\"\\n\");\n  }\n  /**\n   * Get detailed information about a specific rule\n   */\n  getRuleInfo(ruleId) {\n    return this.registry.getRule(ruleId);\n  }\n  /**\n   * Get detailed information about a specific constraint\n   */\n  getConstraintInfo(constraintId) {\n    return this.registry.getConstraint(constraintId);\n  }\n  /**\n   * Search for rules by description text\n   */\n  searchRules(query) {\n    const lowerQuery = query.toLowerCase();\n    return this.registry.getAllRules().filter(\n      (rule) => rule.id.toLowerCase().includes(lowerQuery) || rule.description.toLowerCase().includes(lowerQuery)\n    );\n  }\n  /**\n   * Search for constraints by description text\n   */\n  searchConstraints(query) {\n    const lowerQuery = query.toLowerCase();\n    return this.registry.getAllConstraints().filter(\n      (constraint) => constraint.id.toLowerCase().includes(lowerQuery) || constraint.description.toLowerCase().includes(lowerQuery)\n    );\n  }\n};\nfunction createIntrospector(registry) {\n  return new RegistryIntrospector(registry);\n}\n\n// src/dsl/index.ts\nfunction defineFact(tag) {\n  return {\n    tag,\n    create(payload) {\n      return { tag, payload };\n    },\n    is(fact) {\n      return fact.tag === tag;\n    }\n  };\n}\nfunction defineEvent(tag) {\n  return {\n    tag,\n    create(payload) {\n      return { tag, payload };\n    },\n    is(event) {\n      return event.tag === tag;\n    }\n  };\n}\nfunction defineRule(options) {\n  return {\n    id: options.id,\n    description: options.description,\n    impl: options.impl,\n    meta: options.meta\n  };\n}\nfunction defineConstraint(options) {\n  return {\n    id: options.id,\n    description: options.description,\n    impl: options.impl,\n    meta: options.meta\n  };\n}\nfunction defineModule(options) {\n  return {\n    rules: options.rules ?? [],\n    constraints: options.constraints ?? [],\n    meta: options.meta\n  };\n}\nfunction filterEvents(events, definition) {\n  return events.filter(definition.is);\n}\nfunction filterFacts(facts, definition) {\n  return facts.filter(definition.is);\n}\nfunction findEvent(events, definition) {\n  return events.find(definition.is);\n}\nfunction findFact(facts, definition) {\n  return facts.find(definition.is);\n}\n\n// src/core/pluresdb/store.ts\nvar PRAXIS_PATHS = {\n  /** Base path for all Praxis data */\n  BASE: \"/_praxis\",\n  /** Path for facts storage */\n  FACTS: \"/_praxis/facts\",\n  /** Path for events storage */\n  EVENTS: \"/_praxis/events\",\n  /** Path for schema registry */\n  SCHEMAS: \"/_praxis/schemas\"\n};\nfunction getFactPath(factTag, id) {\n  if (id) {\n    return `${PRAXIS_PATHS.FACTS}/${factTag}/${id}`;\n  }\n  return `${PRAXIS_PATHS.FACTS}/${factTag}`;\n}\nfunction getEventPath(eventTag) {\n  return `${PRAXIS_PATHS.EVENTS}/${eventTag}`;\n}\nfunction generateId() {\n  return `${Date.now()}-${Math.random().toString(36).slice(2, 9)}`;\n}\nvar defaultErrorHandler = (ruleId, error) => {\n  if (typeof process !== \"undefined\" && process.env?.NODE_ENV === \"development\") {\n    console.error(`Error executing rule \"${ruleId}\":`, error);\n  }\n};\nvar PraxisDBStore = class {\n  db;\n  registry;\n  context;\n  subscriptions = [];\n  factWatchers = /* @__PURE__ */ new Map();\n  onRuleError;\n  constructor(options) {\n    this.db = options.db;\n    this.registry = options.registry;\n    this.context = options.initialContext ?? {};\n    this.onRuleError = options.onRuleError ?? defaultErrorHandler;\n  }\n  /**\n   * Store a fact in PluresDB\n   *\n   * Facts are stored under `/_praxis/facts/<factTag>/<id>`\n   * If no id is provided in the payload, a timestamp-based id is used.\n   *\n   * @param fact The fact to store\n   * @returns Promise that resolves when the fact is stored\n   */\n  async storeFact(fact) {\n    const constraintResult = await this.checkConstraints([fact]);\n    if (!constraintResult.valid) {\n      throw new Error(`Constraint violation: ${constraintResult.errors.join(\", \")}`);\n    }\n    await this.persistFact(fact);\n    await this.triggerRules([fact]);\n  }\n  /**\n   * Store multiple facts in PluresDB\n   *\n   * @param facts The facts to store\n   */\n  async storeFacts(facts) {\n    const constraintResult = await this.checkConstraints(facts);\n    if (!constraintResult.valid) {\n      throw new Error(`Constraint violation: ${constraintResult.errors.join(\", \")}`);\n    }\n    for (const fact of facts) {\n      await this.persistFact(fact);\n    }\n    await this.triggerRules(facts);\n  }\n  /**\n   * Internal method to persist a fact without constraint checking\n   * Used by both storeFact and derived fact storage\n   */\n  async persistFact(fact) {\n    const payload = fact.payload;\n    const id = payload?.id ?? generateId();\n    const path = getFactPath(fact.tag, id);\n    await this.db.set(path, fact);\n  }\n  /**\n   * Get a fact by tag and id\n   *\n   * @param factTag The fact type tag\n   * @param id The fact id\n   * @returns The fact or undefined if not found\n   */\n  async getFact(factTag, id) {\n    const path = getFactPath(factTag, id);\n    return this.db.get(path);\n  }\n  /**\n   * Append an event to the event stream\n   *\n   * Events are stored as append-only streams under `/_praxis/events/<eventTag>`\n   *\n   * @param event The event to append\n   */\n  async appendEvent(event) {\n    const path = getEventPath(event.tag);\n    const existingEvents = await this.db.get(path) ?? [];\n    const entry = {\n      event,\n      timestamp: Date.now(),\n      sequence: existingEvents.length\n    };\n    const newEvents = [...existingEvents, entry];\n    await this.db.set(path, newEvents);\n    await this.triggerRulesForEvents([event]);\n  }\n  /**\n   * Append multiple events to their respective streams\n   *\n   * @param events The events to append\n   */\n  async appendEvents(events) {\n    const eventsByTag = /* @__PURE__ */ new Map();\n    for (const event of events) {\n      const existing = eventsByTag.get(event.tag) ?? [];\n      eventsByTag.set(event.tag, [...existing, event]);\n    }\n    for (const [tag, tagEvents] of eventsByTag) {\n      const path = getEventPath(tag);\n      const existingEvents = await this.db.get(path) ?? [];\n      let sequence = existingEvents.length;\n      const newEntries = tagEvents.map((event) => ({\n        event,\n        timestamp: Date.now(),\n        sequence: sequence++\n      }));\n      await this.db.set(path, [...existingEvents, ...newEntries]);\n    }\n    await this.triggerRulesForEvents(events);\n  }\n  /**\n   * Get events from a stream\n   *\n   * @param eventTag The event type tag\n   * @param options Query options\n   * @returns Array of event stream entries\n   */\n  async getEvents(eventTag, options) {\n    const path = getEventPath(eventTag);\n    const events = await this.db.get(path) ?? [];\n    let result = events;\n    if (options?.since !== void 0) {\n      const sinceTimestamp = options.since;\n      result = result.filter((e) => e.timestamp > sinceTimestamp);\n    }\n    if (options?.limit !== void 0) {\n      result = result.slice(-options.limit);\n    }\n    return result;\n  }\n  /**\n   * Watch a fact path for changes\n   *\n   * @param factTag The fact type tag to watch\n   * @param callback Called when facts of this type change\n   * @returns Unsubscribe function\n   */\n  watchFacts(factTag, callback) {\n    const path = getFactPath(factTag);\n    if (!this.factWatchers.has(factTag)) {\n      this.factWatchers.set(factTag, /* @__PURE__ */ new Set());\n    }\n    const watchers = this.factWatchers.get(factTag);\n    if (watchers) {\n      watchers.add(callback);\n    }\n    const unsubscribe = this.db.watch(path, (fact) => {\n      callback([fact]);\n    });\n    this.subscriptions.push(unsubscribe);\n    return () => {\n      unsubscribe();\n      this.factWatchers.get(factTag)?.delete(callback);\n    };\n  }\n  /**\n   * Check constraints against the current state with new facts\n   */\n  async checkConstraints(newFacts) {\n    const constraints = this.registry.getAllConstraints();\n    const errors = [];\n    const state = {\n      context: this.context,\n      facts: newFacts,\n      meta: {}\n    };\n    for (const constraint of constraints) {\n      try {\n        const result = constraint.impl(state);\n        if (result === false) {\n          errors.push(`Constraint \"${constraint.id}\" violated`);\n        } else if (typeof result === \"string\") {\n          errors.push(result);\n        }\n      } catch (error) {\n        errors.push(\n          `Error checking constraint \"${constraint.id}\": ${error instanceof Error ? error.message : String(error)}`\n        );\n      }\n    }\n    return {\n      valid: errors.length === 0,\n      errors\n    };\n  }\n  /**\n   * Trigger rules when new facts are added\n   *\n   * This method is called after facts are stored. It can be extended\n   * for derived fact computation where rules generate new facts based\n   * on existing facts. Currently implemented as a hook point for future\n   * enhancements.\n   *\n   * @param _newFacts The newly stored facts (unused in current implementation)\n   */\n  async triggerRules(_newFacts) {\n  }\n  /**\n   * Trigger rules when events are appended\n   */\n  async triggerRulesForEvents(events) {\n    const rules = this.registry.getAllRules();\n    const state = {\n      context: this.context,\n      facts: [],\n      meta: {}\n    };\n    const derivedFacts = [];\n    for (const rule of rules) {\n      try {\n        const facts = rule.impl(state, events);\n        derivedFacts.push(...facts);\n      } catch (error) {\n        this.onRuleError(rule.id, error);\n      }\n    }\n    if (derivedFacts.length > 0) {\n      const constraintResult = await this.checkConstraints(derivedFacts);\n      if (constraintResult.valid) {\n        for (const fact of derivedFacts) {\n          await this.persistFact(fact);\n        }\n      }\n    }\n  }\n  /**\n   * Update the context\n   */\n  updateContext(context) {\n    this.context = context;\n  }\n  /**\n   * Get the current context\n   */\n  getContext() {\n    return this.context;\n  }\n  /**\n   * Dispose of all subscriptions\n   */\n  dispose() {\n    for (const unsubscribe of this.subscriptions) {\n      unsubscribe();\n    }\n    this.subscriptions = [];\n    this.factWatchers.clear();\n  }\n};\nfunction createPraxisDBStore(db, registry, initialContext, onRuleError) {\n  return new PraxisDBStore({ db, registry, initialContext, onRuleError });\n}\n\n// src/core/pluresdb/schema-registry.ts\nfunction getSchemaPath(schemaName) {\n  return `${PRAXIS_PATHS.SCHEMAS}/${schemaName}`;\n}\nvar PraxisSchemaRegistry = class {\n  db;\n  constructor(db) {\n    this.db = db;\n  }\n  /**\n   * Register a schema in PluresDB\n   *\n   * @param schema The schema to register\n   */\n  async register(schema) {\n    const path = getSchemaPath(schema.name);\n    const storedSchema = {\n      schema,\n      registeredAt: Date.now(),\n      version: schema.version\n    };\n    await this.db.set(path, storedSchema);\n  }\n  /**\n   * Get a schema by name\n   *\n   * @param schemaName The schema name\n   * @returns The stored schema or undefined if not found\n   */\n  async get(schemaName) {\n    const path = getSchemaPath(schemaName);\n    return this.db.get(path);\n  }\n  /**\n   * Check if a schema is registered\n   *\n   * @param schemaName The schema name\n   * @returns True if the schema exists\n   */\n  async exists(schemaName) {\n    const stored = await this.get(schemaName);\n    return stored !== void 0;\n  }\n  /**\n   * Update a schema (replaces existing)\n   *\n   * @param schema The updated schema\n   */\n  async update(schema) {\n    await this.register(schema);\n  }\n  /**\n   * List all registered schema names\n   *\n   * Implementation note: This method uses an index stored at `/_praxis/schemas/_index`.\n   * When using InMemoryPraxisDB, schemas must be registered using `registerWithIndex()`\n   * for them to appear in this listing. When using a full PluresDB implementation,\n   * native listing capabilities should be used instead.\n   *\n   * @returns Array of registered schema names\n   */\n  async list() {\n    const indexPath = `${PRAXIS_PATHS.SCHEMAS}/_index`;\n    const index = await this.db.get(indexPath);\n    return index ?? [];\n  }\n  /**\n   * Register a schema and update the index\n   *\n   * @param schema The schema to register\n   */\n  async registerWithIndex(schema) {\n    await this.register(schema);\n    const indexPath = `${PRAXIS_PATHS.SCHEMAS}/_index`;\n    const existingIndex = await this.db.get(indexPath) ?? [];\n    if (!existingIndex.includes(schema.name)) {\n      await this.db.set(indexPath, [...existingIndex, schema.name]);\n    }\n  }\n};\nasync function registerSchema(db, schema) {\n  const registry = new PraxisSchemaRegistry(db);\n  await registry.registerWithIndex(schema);\n}\nfunction createSchemaRegistry(db) {\n  return new PraxisSchemaRegistry(db);\n}\n\n// src/integrations/pluresdb.ts\nfunction createPluresDBAdapter(options) {\n  const store = createPraxisDBStore(options.db, options.registry, options.initialContext);\n  const subscriptions = [];\n  return {\n    async persistEvents(events) {\n      await store.appendEvents(events);\n    },\n    async persistFacts(facts) {\n      await store.storeFacts(facts);\n    },\n    async loadEvents(query) {\n      if (!query?.tag) {\n        return [];\n      }\n      const entries = await store.getEvents(query.tag, {\n        since: query.since,\n        limit: query.limit\n      });\n      return entries.map((e) => e.event);\n    },\n    subscribeToEvents(callback, query) {\n      if (!query?.tag) {\n        return () => {\n        };\n      }\n      const unsubscribe = store.watchFacts(query.tag, (facts) => {\n        const events = facts.map((f) => ({\n          tag: f.tag,\n          payload: f.payload\n        }));\n        callback(events);\n      });\n      subscriptions.push(unsubscribe);\n      return unsubscribe;\n    },\n    attachEngine(engine) {\n      store.updateContext(engine.getContext());\n    },\n    dispose() {\n      for (const unsub of subscriptions) {\n        unsub();\n      }\n      subscriptions.length = 0;\n      store.dispose();\n    }\n  };\n}\nfunction attachToEngine(store, engine) {\n  store.updateContext(engine.getContext());\n  return () => {\n    store.dispose();\n  };\n}\n\n// src/integrations/unum.ts\nasync function createUnumAdapter(config) {\n  const { db, realtime = true } = config;\n  let currentIdentity = null;\n  const channels = /* @__PURE__ */ new Map();\n  const subscriptions = /* @__PURE__ */ new Set();\n  if (config.identity) {\n    currentIdentity = {\n      ...config.identity,\n      id: config.identity.id || generateId2(),\n      createdAt: Date.now()\n    };\n    await db.set(`unum/identities/${currentIdentity.id}`, currentIdentity);\n  }\n  async function setIdentity(identity) {\n    currentIdentity = {\n      ...identity,\n      id: generateId2(),\n      createdAt: Date.now()\n    };\n    await db.set(`unum/identities/${currentIdentity.id}`, currentIdentity);\n    return currentIdentity;\n  }\n  async function getIdentity(id) {\n    return await db.get(`unum/identities/${id}`);\n  }\n  async function createChannel(name, members) {\n    const channelId = generateId2();\n    const channelData = {\n      id: channelId,\n      name,\n      members: members || [],\n      createdAt: Date.now(),\n      createdBy: currentIdentity?.id\n    };\n    await db.set(`unum/channels/${channelId}`, channelData);\n    const channel = createChannelInstance(channelId, name);\n    channels.set(channelId, channel);\n    return channel;\n  }\n  async function joinChannel(channelId) {\n    const existing = channels.get(channelId);\n    if (existing) return existing;\n    const channelData = await db.get(`unum/channels/${channelId}`);\n    if (!channelData) {\n      throw new Error(`Channel ${channelId} not found`);\n    }\n    const channel = createChannelInstance(channelData.id, channelData.name);\n    channels.set(channelId, channel);\n    return channel;\n  }\n  async function listChannels() {\n    return Array.from(channels.values());\n  }\n  function createChannelInstance(id, name) {\n    const handlers = /* @__PURE__ */ new Set();\n    return {\n      id,\n      name,\n      subscribe(handler) {\n        handlers.add(handler);\n        if (realtime) {\n          const unsub = db.watch(`unum/channels/${id}/messages`, (data) => {\n            if (data) {\n              handler(data);\n            }\n          });\n          subscriptions.add(unsub);\n        }\n        return () => {\n          handlers.delete(handler);\n        };\n      },\n      async publish(message) {\n        const fullMessage = {\n          ...message,\n          id: message.id || generateId2(),\n          channelId: id,\n          timestamp: Date.now()\n        };\n        await db.set(`unum/channels/${id}/messages/${fullMessage.id}`, fullMessage);\n        handlers.forEach((h) => h(fullMessage));\n      },\n      async getMembers() {\n        const channelData = await db.get(`unum/channels/${id}`);\n        if (!channelData?.members) return [];\n        const members = [];\n        for (const memberId of channelData.members) {\n          const identity = await getIdentity(memberId);\n          if (identity) members.push(identity);\n        }\n        return members;\n      },\n      async leave() {\n        channels.delete(id);\n      }\n    };\n  }\n  async function broadcastEvent(channelId, event) {\n    const channel = channels.get(channelId);\n    if (!channel) {\n      throw new Error(`Not joined to channel ${channelId}`);\n    }\n    await channel.publish({\n      id: generateId2(),\n      sender: currentIdentity || { id: \"anonymous\", createdAt: Date.now() },\n      content: event,\n      type: \"event\"\n    });\n  }\n  async function broadcastFact(channelId, fact) {\n    const channel = channels.get(channelId);\n    if (!channel) {\n      throw new Error(`Not joined to channel ${channelId}`);\n    }\n    await channel.publish({\n      id: generateId2(),\n      sender: currentIdentity || { id: \"anonymous\", createdAt: Date.now() },\n      content: fact,\n      type: \"fact\"\n    });\n  }\n  function subscribeToEvents(channelId, handler) {\n    const channel = channels.get(channelId);\n    if (!channel) {\n      throw new Error(`Not joined to channel ${channelId}`);\n    }\n    return channel.subscribe((message) => {\n      if (message.type === \"event\") {\n        handler(message.content);\n      }\n    });\n  }\n  function subscribeToFacts(channelId, handler) {\n    const channel = channels.get(channelId);\n    if (!channel) {\n      throw new Error(`Not joined to channel ${channelId}`);\n    }\n    return channel.subscribe((message) => {\n      if (message.type === \"fact\") {\n        handler(message.content);\n      }\n    });\n  }\n  async function disconnect() {\n    subscriptions.forEach((unsub) => unsub());\n    subscriptions.clear();\n    for (const channel of channels.values()) {\n      await channel.leave();\n    }\n    channels.clear();\n    currentIdentity = null;\n  }\n  return {\n    get identity() {\n      return currentIdentity;\n    },\n    setIdentity,\n    getIdentity,\n    createChannel,\n    joinChannel,\n    listChannels,\n    broadcastEvent,\n    broadcastFact,\n    subscribeToEvents,\n    subscribeToFacts,\n    disconnect\n  };\n}\nfunction generateId2() {\n  return `${Date.now().toString(36)}-${Math.random().toString(36).substr(2, 9)}`;\n}\nfunction attachUnumToEngine(_engine, _adapter, _channelId) {\n  return () => {\n  };\n}\n\n// src/integrations/tauri.ts\nfunction createMockTauriBridge() {\n  const eventHandlers = /* @__PURE__ */ new Map();\n  const storage = /* @__PURE__ */ new Map();\n  return {\n    app: {\n      name: \"Mock App\",\n      version: \"0.0.0\",\n      tauriVersion: \"mock\"\n    },\n    fs: {\n      async readFile(path) {\n        const data = storage.get(path);\n        if (data instanceof Uint8Array) return data;\n        throw new Error(`File not found: ${path}`);\n      },\n      async readTextFile(path) {\n        const data = storage.get(path);\n        if (typeof data === \"string\") return data;\n        throw new Error(`File not found: ${path}`);\n      },\n      async writeFile(path, data) {\n        storage.set(path, data);\n      },\n      async writeTextFile(path, data) {\n        storage.set(path, data);\n      },\n      async exists(path) {\n        return storage.has(path);\n      },\n      async mkdir(_path, _options) {\n      },\n      async remove(path, _options) {\n        storage.delete(path);\n      },\n      async rename(oldPath, newPath) {\n        const data = storage.get(oldPath);\n        if (data !== void 0) {\n          storage.set(newPath, data);\n          storage.delete(oldPath);\n        }\n      },\n      async readDir(_path) {\n        return [];\n      }\n    },\n    tray: {\n      async setIcon(_icon) {\n      },\n      async setTooltip(_tooltip) {\n      },\n      async setMenu(_menu) {\n      },\n      async show() {\n      },\n      async hide() {\n      }\n    },\n    notification: {\n      async send(options) {\n        console.log(\"Mock notification:\", options.title, options.body);\n      },\n      async requestPermission() {\n        return \"granted\";\n      },\n      async checkPermission() {\n        return \"granted\";\n      }\n    },\n    async invoke(cmd, payload) {\n      console.log(\"Mock invoke:\", cmd, payload);\n      return null;\n    },\n    async listen(event, handler) {\n      if (!eventHandlers.has(event)) {\n        eventHandlers.set(event, /* @__PURE__ */ new Set());\n      }\n      eventHandlers.get(event).add(handler);\n      return () => {\n        eventHandlers.get(event)?.delete(handler);\n      };\n    },\n    async emit(event, payload) {\n      const handlers = eventHandlers.get(event);\n      if (handlers) {\n        const tauriEvent = { event, payload };\n        handlers.forEach((h) => h(tauriEvent));\n      }\n    },\n    window: {\n      async minimize() {\n      },\n      async maximize() {\n      },\n      async unmaximize() {\n      },\n      async close() {\n      },\n      async toggleFullscreen() {\n      },\n      async setTitle(_title) {\n      },\n      async show() {\n      },\n      async hide() {\n      },\n      async focus() {\n      }\n    },\n    async checkForUpdates() {\n      return null;\n    },\n    async installUpdate() {\n    }\n  };\n}\nfunction createTauriPraxisAdapter(options) {\n  const { bridge, statePath = \"praxis-state.json\", eventsPath = \"praxis-events.json\" } = options;\n  return {\n    async saveState(state) {\n      const json = JSON.stringify(state, null, 2);\n      await bridge.fs.writeTextFile(statePath, json);\n    },\n    async loadState() {\n      try {\n        const exists = await bridge.fs.exists(statePath);\n        if (!exists) return null;\n        const json = await bridge.fs.readTextFile(statePath);\n        return JSON.parse(json);\n      } catch {\n        return null;\n      }\n    },\n    async saveEvents(events) {\n      const json = JSON.stringify(events, null, 2);\n      await bridge.fs.writeTextFile(eventsPath, json);\n    },\n    async loadEvents() {\n      try {\n        const exists = await bridge.fs.exists(eventsPath);\n        if (!exists) return [];\n        const json = await bridge.fs.readTextFile(eventsPath);\n        return JSON.parse(json);\n      } catch {\n        return [];\n      }\n    },\n    async watchStateFile(_handler) {\n      console.log(\"File watching not implemented in mock\");\n      return () => {\n      };\n    },\n    getStatePath() {\n      return statePath;\n    },\n    getEventsPath() {\n      return eventsPath;\n    }\n  };\n}\nfunction attachTauriToEngine(engine, adapter, options = {}) {\n  const { autoSave = true, saveInterval = 5e3 } = options;\n  const cleanupFns = [];\n  if (autoSave) {\n    let saveTimer = null;\n    let pendingSave = false;\n    const debouncedSave = async () => {\n      pendingSave = true;\n      if (saveTimer) clearTimeout(saveTimer);\n      saveTimer = setTimeout(async () => {\n        if (pendingSave) {\n          await adapter.saveState(engine.getContext());\n          pendingSave = false;\n        }\n      }, saveInterval);\n    };\n    cleanupFns.push(() => {\n      if (saveTimer) clearTimeout(saveTimer);\n    });\n    void debouncedSave;\n  }\n  return () => {\n    cleanupFns.forEach((fn) => fn());\n  };\n}\nfunction generateTauriConfig(config) {\n  return {\n    $schema: \"https://raw.githubusercontent.com/tauri-apps/tauri/tauri-v2.0.0/core/tauri-config-schema/schema.json\",\n    productName: config.name,\n    version: config.version,\n    identifier: config.identifier,\n    app: {\n      windows: [\n        {\n          title: config.window?.title || config.name,\n          width: config.window?.width || 800,\n          height: config.window?.height || 600,\n          minWidth: config.window?.minWidth,\n          minHeight: config.window?.minHeight,\n          resizable: config.window?.resizable ?? true,\n          fullscreen: config.window?.fullscreen ?? false,\n          decorations: config.window?.decorations ?? true,\n          transparent: config.window?.transparent ?? false,\n          alwaysOnTop: config.window?.alwaysOnTop ?? false,\n          center: config.window?.center ?? true\n        }\n      ],\n      security: {\n        csp: config.security?.csp || \"default-src 'self'\",\n        devtools: config.security?.devTools ?? false\n      }\n    },\n    build: {\n      devUrl: \"http://localhost:5173\",\n      frontendDist: \"../dist\"\n    },\n    plugins: Object.fromEntries((config.plugins || []).map((p) => [p.name, p.config || {}]))\n  };\n}\n\n// src/integrations/unified.ts\nasync function createUnifiedApp(config) {\n  const { createPraxisEngine: createPraxisEngine2 } = await import(\"./engine-2DQBKBJC.js\");\n  const { createInMemoryDB: createInMemoryDB2 } = await import(\"./adapter-K6DOX6XS.js\");\n  const db = config.db || createInMemoryDB2();\n  const pluresdb = createPluresDBAdapter({\n    db,\n    registry: config.registry,\n    initialContext: config.initialContext\n  });\n  const engine = createPraxisEngine2({\n    initialContext: config.initialContext,\n    registry: config.registry\n  });\n  pluresdb.attachEngine(engine);\n  const disposers = [];\n  let unum;\n  let channel;\n  if (config.enableUnum) {\n    const fullIdentity = config.unumIdentity ? {\n      ...config.unumIdentity,\n      id: generateId(),\n      createdAt: Date.now()\n    } : void 0;\n    unum = await createUnumAdapter({\n      db,\n      identity: fullIdentity,\n      realtime: true\n    });\n    channel = await unum.createChannel(\n      config.unumIdentity?.name || \"praxis-app\",\n      []\n    );\n    const unumDisposer = attachUnumToEngine(engine, unum, channel.id);\n    disposers.push(unumDisposer);\n  }\n  let docs;\n  let generateDocs2;\n  if (config.enableDocs && config.docsConfig) {\n    docs = createStateDocsGenerator({\n      projectTitle: config.docsConfig.projectTitle,\n      target: config.docsConfig.target || \"./docs\"\n    });\n    generateDocs2 = () => {\n      const module = {\n        rules: config.registry.getAllRules(),\n        constraints: config.registry.getAllConstraints()\n      };\n      return docs.generateFromModule(module);\n    };\n  }\n  let canvas;\n  if (config.schema) {\n    canvas = schemaToCanvas(config.schema, { layout: \"hierarchical\" });\n  }\n  return {\n    engine,\n    pluresdb,\n    unum,\n    channel,\n    docs,\n    canvas,\n    generateDocs: generateDocs2,\n    dispose: () => {\n      pluresdb.dispose();\n      if (unum) {\n        unum.disconnect().catch((err) => {\n          console.warn(\"Warning: Error during Unum disconnect:\", err);\n        });\n      }\n      for (const disposer of disposers) {\n        disposer();\n      }\n    }\n  };\n}\nasync function attachAllIntegrations(engine, registry, options = {}) {\n  const { createInMemoryDB: createInMemoryDB2 } = await import(\"./adapter-K6DOX6XS.js\");\n  const db = options.db || createInMemoryDB2();\n  const pluresdb = createPluresDBAdapter({\n    db,\n    registry,\n    initialContext: engine.getContext()\n  });\n  pluresdb.attachEngine(engine);\n  const disposers = [];\n  let unum;\n  let channel;\n  if (options.enableUnum) {\n    const fullIdentity = options.unumIdentity ? {\n      ...options.unumIdentity,\n      id: generateId(),\n      createdAt: Date.now()\n    } : void 0;\n    unum = await createUnumAdapter({\n      db,\n      identity: fullIdentity,\n      realtime: true\n    });\n    channel = await unum.createChannel(\n      options.unumIdentity?.name || \"praxis-app\",\n      []\n    );\n    const unumDisposer = attachUnumToEngine(engine, unum, channel.id);\n    disposers.push(unumDisposer);\n  }\n  let docs;\n  if (options.enableDocs && options.docsConfig) {\n    docs = createStateDocsGenerator({\n      projectTitle: options.docsConfig.projectTitle,\n      target: options.docsConfig.target || \"./docs\"\n    });\n  }\n  return {\n    pluresdb,\n    unum,\n    channel,\n    docs,\n    dispose: () => {\n      pluresdb.dispose();\n      if (unum) {\n        unum.disconnect().catch((err) => {\n          console.warn(\"Warning: Error during Unum disconnect:\", err);\n        });\n      }\n      for (const disposer of disposers) {\n        disposer();\n      }\n    }\n  };\n}\nexport {\n  ActorManager,\n  ReactiveLogicEngine2 as FrameworkAgnosticReactiveEngine,\n  InMemoryPraxisDB,\n  LogicEngine,\n  PRAXIS_PATHS,\n  PRAXIS_PROTOCOL_VERSION,\n  PluresDBGenerator,\n  PluresDBPraxisAdapter,\n  PraxisDBStore,\n  PraxisRegistry,\n  PraxisSchemaRegistry,\n  ReactiveLogicEngine,\n  RegistryIntrospector,\n  StateDocsGenerator,\n  TerminalAdapter,\n  attachAllIntegrations,\n  attachTauriToEngine,\n  attachToEngine,\n  attachUnumToEngine,\n  canvasToMermaid,\n  canvasToSchema,\n  canvasToYaml,\n  createCanvasEditor,\n  createReactiveEngine2 as createFrameworkAgnosticReactiveEngine,\n  createInMemoryDB,\n  createIntrospector,\n  createMockExecutor,\n  createMockTauriBridge,\n  createPluresDB,\n  createPluresDBAdapter,\n  createPluresDBGenerator,\n  createPraxisDBStore,\n  createPraxisEngine,\n  createReactiveEngine,\n  createSchemaRegistry,\n  createSchemaTemplate,\n  createStateDocsGenerator,\n  createTauriPraxisAdapter,\n  createTerminalAdapter,\n  createTimerActor,\n  createUnifiedApp,\n  createUnumAdapter,\n  defineConstraint,\n  defineEvent,\n  defineFact,\n  defineModule,\n  defineRule,\n  filterEvents,\n  filterFacts,\n  findEvent,\n  findFact,\n  generateDocs,\n  generateId,\n  generateTauriConfig,\n  getEventPath,\n  getFactPath,\n  getSchemaPath,\n  loadSchema,\n  loadSchemaFromFile,\n  loadSchemaFromJson,\n  loadSchemaFromYaml,\n  registerSchema,\n  runTerminalCommand,\n  schemaToCanvas,\n  validateForGeneration,\n  validateSchema,\n  validateWithGuardian\n};\n", "/**\n * Praxis Connection Facts and Events\n *\n * Defines the facts and events for the connection logic using Praxis DSL.\n * Facts represent the current state of the connection.\n * Events represent actions that can change the connection state.\n */\n\nimport { defineFact, defineEvent } from '@plures/praxis';\nimport type { PraxisConnectionState, PraxisConnectionContext, ProjectConnection } from './types.js';\n\n// ============================================================================\n// Facts - Propositions about the connection domain\n// ============================================================================\n\n/**\n * ConnectionState fact - represents the current connection state\n */\nexport const ConnectionStateFact = defineFact<'ConnectionState', PraxisConnectionState>(\n  'ConnectionState'\n);\n\n/**\n * ConnectionData fact - represents the connection context data\n */\nexport const ConnectionDataFact = defineFact<'ConnectionData', PraxisConnectionContext>(\n  'ConnectionData'\n);\n\n/**\n * ConnectionEstablished fact - indicates connection was successful\n */\nexport const ConnectionEstablishedFact = defineFact<\n  'ConnectionEstablished',\n  { connectionId: string; hasClient: boolean; hasProvider: boolean }\n>('ConnectionEstablished');\n\n/**\n * ConnectionFailed fact - indicates connection failed\n */\nexport const ConnectionFailedFact = defineFact<\n  'ConnectionFailed',\n  { connectionId: string; error: string }\n>('ConnectionFailed');\n\n// ============================================================================\n// Events - Actions that drive connection state changes\n// ============================================================================\n\n/**\n * Connect event - initiates connection to Azure DevOps\n */\nexport const ConnectEvent = defineEvent<\n  'CONNECT',\n  {\n    config: ProjectConnection;\n    forceInteractive?: boolean;\n  }\n>('CONNECT');\n\n/**\n * Disconnect event - disconnects from Azure DevOps\n */\nexport const DisconnectEvent = defineEvent<'DISCONNECT', Record<string, never>>('DISCONNECT');\n\n/**\n * AuthenticatedEvent - authentication step completed\n */\nexport const AuthenticatedEvent = defineEvent<\n  'AUTHENTICATED',\n  {\n    credential: string;\n    expiresAt?: number;\n  }\n>('AUTHENTICATED');\n\n/**\n * AuthFailedEvent - authentication step failed\n */\nexport const AuthConnectionFailedEvent = defineEvent<'AUTH_CONNECTION_FAILED', { error: string }>(\n  'AUTH_CONNECTION_FAILED'\n);\n\n/**\n * ClientCreated event - Azure client created successfully\n */\nexport const ClientCreatedEvent = defineEvent<'CLIENT_CREATED', { client: unknown }>(\n  'CLIENT_CREATED'\n);\n\n/**\n * ClientFailed event - Azure client creation failed\n */\nexport const ClientFailedEvent = defineEvent<'CLIENT_FAILED', { error: string }>('CLIENT_FAILED');\n\n/**\n * ProviderCreated event - Work items provider created successfully\n */\nexport const ProviderCreatedEvent = defineEvent<'PROVIDER_CREATED', { provider: unknown }>(\n  'PROVIDER_CREATED'\n);\n\n/**\n * ProviderFailed event - Provider creation failed\n */\nexport const ProviderFailedEvent = defineEvent<'PROVIDER_FAILED', { error: string }>(\n  'PROVIDER_FAILED'\n);\n\n/**\n * ConnectionError event - general connection error\n */\nexport const ConnectionErrorEvent = defineEvent<'CONNECTION_ERROR', { error: string }>(\n  'CONNECTION_ERROR'\n);\n\n/**\n * TokenExpired event - auth token has expired\n */\nexport const TokenExpiredConnectionEvent = defineEvent<'TOKEN_EXPIRED', Record<string, never>>(\n  'TOKEN_EXPIRED'\n);\n\n/**\n * RefreshAuth event - refresh authentication token\n */\nexport const RefreshAuthEvent = defineEvent<'REFRESH_AUTH', Record<string, never>>('REFRESH_AUTH');\n\n/**\n * TokenRefreshed event - token refresh successful\n */\nexport const TokenRefreshedEvent = defineEvent<\n  'TOKEN_REFRESHED',\n  { token: string; expiresAt?: number }\n>('TOKEN_REFRESHED');\n\n/**\n * TokenRefreshFailed event - token refresh failed\n */\nexport const TokenRefreshFailedEvent = defineEvent<'TOKEN_REFRESH_FAILED', { error: string }>(\n  'TOKEN_REFRESH_FAILED'\n);\n\n/**\n * Retry event - retry connection after failure\n */\nexport const RetryConnectionEvent = defineEvent<'RETRY', Record<string, never>>('RETRY');\n\n/**\n * Reset event - reset connection state\n */\nexport const ResetConnectionEvent = defineEvent<'RESET', Record<string, never>>('RESET');\n", "/**\n * Praxis Connection Rules\n *\n * Defines the rules for connection state transitions using the Praxis logic engine.\n * These rules update the connection context directly based on events.\n */\n\nimport { defineRule, findEvent, type RuleDescriptor } from '@plures/praxis';\nimport { DEFAULT_CONNECTION_CONFIG } from './types.js';\nimport {\n  ConnectEvent,\n  DisconnectEvent,\n  AuthenticatedEvent,\n  AuthConnectionFailedEvent,\n  ClientCreatedEvent,\n  ClientFailedEvent,\n  ProviderCreatedEvent,\n  ProviderFailedEvent,\n  ConnectionErrorEvent,\n  TokenExpiredConnectionEvent,\n  RefreshAuthEvent,\n  TokenRefreshedEvent,\n  TokenRefreshFailedEvent,\n  RetryConnectionEvent,\n  ResetConnectionEvent,\n} from './facts.js';\nimport type { ConnectionEngineContext } from './engine.js';\n\n/**\n * Connect rule - initiates connection\n */\nexport const connectRule: RuleDescriptor<ConnectionEngineContext> = defineRule({\n  id: 'connection.connect',\n  description: 'Initiate connection to Azure DevOps',\n  impl: (state, events) => {\n    const connectEvent = findEvent(events, ConnectEvent);\n    if (!connectEvent) return [];\n\n    // Allow connection from disconnected or any failed state\n    const allowedStates = [\n      'disconnected',\n      'auth_failed',\n      'client_failed',\n      'provider_failed',\n      'connection_error',\n    ];\n    if (!allowedStates.includes(state.context.connectionState)) return [];\n\n    state.context.connectionState = 'authenticating';\n    state.context.connectionData = {\n      ...state.context.connectionData,\n      config: connectEvent.payload.config,\n      connectionId: connectEvent.payload.config.id,\n      authMethod: connectEvent.payload.config.authMethod || 'pat',\n      forceInteractive: connectEvent.payload.forceInteractive || false,\n      retryCount: 0,\n      lastError: undefined,\n    };\n    return [];\n  },\n});\n\n/**\n * Disconnect rule - disconnects and clears state\n */\nexport const disconnectRule: RuleDescriptor<ConnectionEngineContext> = defineRule({\n  id: 'connection.disconnect',\n  description: 'Disconnect from Azure DevOps',\n  impl: (state, events) => {\n    const disconnectEvent = findEvent(events, DisconnectEvent);\n    if (!disconnectEvent) return [];\n\n    state.context.connectionState = 'disconnected';\n    state.context.connectionData = {\n      ...state.context.connectionData,\n      isConnected: false,\n      client: undefined,\n      provider: undefined,\n      credential: undefined,\n      pat: undefined,\n      accessToken: undefined,\n      accessTokenExpiresAt: undefined,\n      lastError: undefined,\n      forceInteractive: false,\n    };\n    return [];\n  },\n});\n\n/**\n * Authenticated rule - handle successful authentication\n */\nexport const authenticatedRule: RuleDescriptor<ConnectionEngineContext> = defineRule({\n  id: 'connection.authenticated',\n  description: 'Handle successful authentication',\n  impl: (state, events) => {\n    const authEvent = findEvent(events, AuthenticatedEvent);\n    if (!authEvent) return [];\n    if (state.context.connectionState !== 'authenticating') return [];\n\n    state.context.connectionState = 'creating_client';\n    state.context.connectionData = {\n      ...state.context.connectionData,\n      credential: authEvent.payload.credential,\n      accessToken: authEvent.payload.credential,\n      accessTokenExpiresAt: authEvent.payload.expiresAt,\n      lastError: undefined,\n    };\n    return [];\n  },\n});\n\n/**\n * Auth failed rule - handle authentication failure\n */\nexport const authConnectionFailedRule: RuleDescriptor<ConnectionEngineContext> = defineRule({\n  id: 'connection.authFailed',\n  description: 'Handle authentication failure',\n  impl: (state, events) => {\n    const failedEvent = findEvent(events, AuthConnectionFailedEvent);\n    if (!failedEvent) return [];\n    if (state.context.connectionState !== 'authenticating') return [];\n\n    state.context.connectionState = 'auth_failed';\n    state.context.connectionData = {\n      ...state.context.connectionData,\n      lastError: failedEvent.payload.error,\n      retryCount: state.context.connectionData.retryCount + 1,\n      reauthInProgress: false,\n      forceInteractive: false,\n    };\n    return [];\n  },\n});\n\n/**\n * Client created rule - handle Azure client creation success\n */\nexport const clientCreatedRule: RuleDescriptor<ConnectionEngineContext> = defineRule({\n  id: 'connection.clientCreated',\n  description: 'Handle Azure client creation success',\n  impl: (state, events) => {\n    const clientEvent = findEvent(events, ClientCreatedEvent);\n    if (!clientEvent) return [];\n    if (state.context.connectionState !== 'creating_client') return [];\n\n    state.context.connectionState = 'creating_provider';\n    state.context.connectionData = {\n      ...state.context.connectionData,\n      client: clientEvent.payload.client,\n    };\n    return [];\n  },\n});\n\n/**\n * Client failed rule - handle Azure client creation failure\n */\nexport const clientFailedRule: RuleDescriptor<ConnectionEngineContext> = defineRule({\n  id: 'connection.clientFailed',\n  description: 'Handle Azure client creation failure',\n  impl: (state, events) => {\n    const failedEvent = findEvent(events, ClientFailedEvent);\n    if (!failedEvent) return [];\n    if (state.context.connectionState !== 'creating_client') return [];\n\n    state.context.connectionState = 'client_failed';\n    state.context.connectionData = {\n      ...state.context.connectionData,\n      lastError: failedEvent.payload.error,\n    };\n    return [];\n  },\n});\n\n/**\n * Provider created rule - handle provider creation success\n */\nexport const providerCreatedRule: RuleDescriptor<ConnectionEngineContext> = defineRule({\n  id: 'connection.providerCreated',\n  description: 'Handle provider creation success',\n  impl: (state, events) => {\n    const providerEvent = findEvent(events, ProviderCreatedEvent);\n    if (!providerEvent) return [];\n    if (state.context.connectionState !== 'creating_provider') return [];\n\n    state.context.connectionState = 'connected';\n    state.context.connectionData = {\n      ...state.context.connectionData,\n      provider: providerEvent.payload.provider,\n      isConnected: true,\n      retryCount: 0,\n      lastError: undefined,\n    };\n    return [];\n  },\n});\n\n/**\n * Provider failed rule - handle provider creation failure\n */\nexport const providerFailedRule: RuleDescriptor<ConnectionEngineContext> = defineRule({\n  id: 'connection.providerFailed',\n  description: 'Handle provider creation failure',\n  impl: (state, events) => {\n    const failedEvent = findEvent(events, ProviderFailedEvent);\n    if (!failedEvent) return [];\n    if (state.context.connectionState !== 'creating_provider') return [];\n\n    state.context.connectionState = 'provider_failed';\n    state.context.connectionData = {\n      ...state.context.connectionData,\n      lastError: failedEvent.payload.error,\n    };\n    return [];\n  },\n});\n\n/**\n * Connection error rule - handle general connection errors\n */\nexport const connectionErrorRule: RuleDescriptor<ConnectionEngineContext> = defineRule({\n  id: 'connection.error',\n  description: 'Handle connection error',\n  impl: (state, events) => {\n    const errorEvent = findEvent(events, ConnectionErrorEvent);\n    if (!errorEvent) return [];\n    if (state.context.connectionState !== 'connected') return [];\n\n    state.context.connectionState = 'connection_error';\n    state.context.connectionData = {\n      ...state.context.connectionData,\n      lastError: errorEvent.payload.error,\n      isConnected: false,\n    };\n    return [];\n  },\n});\n\n/**\n * Token expired rule - handle token expiration\n */\nexport const tokenExpiredConnectionRule: RuleDescriptor<ConnectionEngineContext> = defineRule({\n  id: 'connection.tokenExpired',\n  description: 'Handle token expiration',\n  impl: (state, events) => {\n    const expiredEvent = findEvent(events, TokenExpiredConnectionEvent);\n    if (!expiredEvent) return [];\n    if (state.context.connectionState !== 'connected') return [];\n\n    // For Entra auth, transition to auth_failed to wait for user action\n    // For PAT auth, attempt re-authentication\n    if (state.context.connectionData.authMethod === 'entra') {\n      state.context.connectionState = 'auth_failed';\n      state.context.connectionData = {\n        ...state.context.connectionData,\n        lastError: 'Session expired. Please sign in again.',\n      };\n    } else {\n      state.context.connectionState = 'token_refresh';\n    }\n    return [];\n  },\n});\n\n/**\n * Refresh auth rule - start token refresh\n */\nexport const refreshAuthRule: RuleDescriptor<ConnectionEngineContext> = defineRule({\n  id: 'connection.refreshAuth',\n  description: 'Start authentication token refresh',\n  impl: (state, events) => {\n    const refreshEvent = findEvent(events, RefreshAuthEvent);\n    if (!refreshEvent) return [];\n    if (state.context.connectionState !== 'connected') return [];\n\n    state.context.connectionState = 'token_refresh';\n    return [];\n  },\n});\n\n/**\n * Token refreshed rule - handle successful token refresh\n */\nexport const tokenRefreshedRule: RuleDescriptor<ConnectionEngineContext> = defineRule({\n  id: 'connection.tokenRefreshed',\n  description: 'Handle successful token refresh',\n  impl: (state, events) => {\n    const refreshedEvent = findEvent(events, TokenRefreshedEvent);\n    if (!refreshedEvent) return [];\n    if (state.context.connectionState !== 'token_refresh') return [];\n\n    state.context.connectionState = 'connected';\n    state.context.connectionData = {\n      ...state.context.connectionData,\n      credential: refreshedEvent.payload.token,\n      accessToken: refreshedEvent.payload.token,\n      accessTokenExpiresAt: refreshedEvent.payload.expiresAt,\n      refreshFailureCount: 0,\n      lastRefreshFailure: undefined,\n      refreshBackoffUntil: undefined,\n    };\n    return [];\n  },\n});\n\n/**\n * Token refresh failed rule - handle failed token refresh\n */\nexport const tokenRefreshFailedRule: RuleDescriptor<ConnectionEngineContext> = defineRule({\n  id: 'connection.tokenRefreshFailed',\n  description: 'Handle failed token refresh',\n  impl: (state, events) => {\n    const failedEvent = findEvent(events, TokenRefreshFailedEvent);\n    if (!failedEvent) return [];\n    if (state.context.connectionState !== 'token_refresh') return [];\n\n    const newFailureCount = state.context.connectionData.refreshFailureCount + 1;\n    const backoffMinutes = Math.min(\n      DEFAULT_CONNECTION_CONFIG.maxRefreshBackoffMinutes,\n      Math.pow(2, newFailureCount) * DEFAULT_CONNECTION_CONFIG.refreshBackoffMinutes\n    );\n\n    state.context.connectionState = 'auth_failed';\n    state.context.connectionData = {\n      ...state.context.connectionData,\n      lastError: failedEvent.payload.error,\n      refreshFailureCount: newFailureCount,\n      lastRefreshFailure: new Date(),\n      refreshBackoffUntil: new Date(Date.now() + backoffMinutes * 60 * 1000),\n    };\n    return [];\n  },\n});\n\n/**\n * Retry connection rule - retry after failure\n */\nexport const retryConnectionRule: RuleDescriptor<ConnectionEngineContext> = defineRule({\n  id: 'connection.retry',\n  description: 'Retry connection after failure',\n  impl: (state, events) => {\n    const retryEvent = findEvent(events, RetryConnectionEvent);\n    if (!retryEvent) return [];\n\n    const failedStates = ['auth_failed', 'client_failed', 'provider_failed', 'connection_error'];\n    if (!failedStates.includes(state.context.connectionState)) return [];\n\n    // Check if we've exceeded max retries\n    if (state.context.connectionData.retryCount >= DEFAULT_CONNECTION_CONFIG.maxRetryCount) {\n      return [];\n    }\n\n    state.context.connectionState = 'authenticating';\n    state.context.connectionData = {\n      ...state.context.connectionData,\n      lastError: undefined,\n    };\n    return [];\n  },\n});\n\n/**\n * Reset connection rule - reset to disconnected state\n */\nexport const resetConnectionRule: RuleDescriptor<ConnectionEngineContext> = defineRule({\n  id: 'connection.reset',\n  description: 'Reset connection state',\n  impl: (state, events) => {\n    const resetEvent = findEvent(events, ResetConnectionEvent);\n    if (!resetEvent) return [];\n\n    state.context.connectionState = 'disconnected';\n    state.context.connectionData = {\n      ...state.context.connectionData,\n      retryCount: 0,\n      refreshFailureCount: 0,\n      lastRefreshFailure: undefined,\n      refreshBackoffUntil: undefined,\n      reauthInProgress: false,\n      lastError: undefined,\n      forceInteractive: false,\n      client: undefined,\n      provider: undefined,\n      credential: undefined,\n      isConnected: false,\n    };\n    return [];\n  },\n});\n", "/**\n * Praxis Connection Engine\n *\n * Creates and configures the Praxis logic engine for connection functionality.\n * This is the main entry point for the Praxis-based connection implementation.\n */\n\nimport { createPraxisEngine, PraxisRegistry, type LogicEngine } from '@plures/praxis';\nimport type { PraxisConnectionContext, PraxisConnectionState, ProjectConnection } from './types.js';\nimport {\n  connectRule,\n  disconnectRule,\n  authenticatedRule,\n  authConnectionFailedRule,\n  clientCreatedRule,\n  clientFailedRule,\n  providerCreatedRule,\n  providerFailedRule,\n  connectionErrorRule,\n  tokenExpiredConnectionRule,\n  refreshAuthRule,\n  tokenRefreshedRule,\n  tokenRefreshFailedRule,\n  retryConnectionRule,\n  resetConnectionRule,\n} from './rules.js';\n\n/**\n * Connection engine context - uses context for state management\n */\nexport interface ConnectionEngineContext {\n  connectionState: PraxisConnectionState;\n  connectionData: PraxisConnectionContext;\n}\n\n/**\n * Create a new Praxis connection engine\n */\nexport function createConnectionEngine(\n  config: ProjectConnection,\n  initialConfig?: Partial<PraxisConnectionContext>\n): LogicEngine<ConnectionEngineContext> {\n  const registry = new PraxisRegistry<ConnectionEngineContext>();\n\n  // Register all connection rules\n  registry.registerRule(connectRule);\n  registry.registerRule(disconnectRule);\n  registry.registerRule(authenticatedRule);\n  registry.registerRule(authConnectionFailedRule);\n  registry.registerRule(clientCreatedRule);\n  registry.registerRule(clientFailedRule);\n  registry.registerRule(providerCreatedRule);\n  registry.registerRule(providerFailedRule);\n  registry.registerRule(connectionErrorRule);\n  registry.registerRule(tokenExpiredConnectionRule);\n  registry.registerRule(refreshAuthRule);\n  registry.registerRule(tokenRefreshedRule);\n  registry.registerRule(tokenRefreshFailedRule);\n  registry.registerRule(retryConnectionRule);\n  registry.registerRule(resetConnectionRule);\n\n  return createPraxisEngine<ConnectionEngineContext>({\n    initialContext: {\n      connectionState: 'disconnected',\n      connectionData: {\n        connectionId: config.id,\n        config,\n        authMethod: config.authMethod || 'pat',\n        isConnected: false,\n        retryCount: 0,\n        refreshFailureCount: 0,\n        reauthInProgress: false,\n        forceInteractive: false,\n        ...initialConfig,\n      },\n    },\n    registry,\n    initialFacts: [],\n  });\n}\n", "/**\n * Praxis Connection Manager\n *\n * High-level API for connection operations using the Praxis logic engine.\n * This class provides a simple API that mirrors the existing FSMManager\n * for easy migration from XState.\n */\n\nimport type { LogicEngine } from '@plures/praxis';\nimport type {\n  PraxisConnectionContext,\n  PraxisConnectionState,\n  PraxisConnectionSnapshot,\n  ProjectConnection,\n} from './types.js';\nimport { DEFAULT_CONNECTION_CONFIG } from './types.js';\nimport {\n  ConnectEvent,\n  DisconnectEvent,\n  AuthenticatedEvent,\n  AuthConnectionFailedEvent,\n  ClientCreatedEvent,\n  ClientFailedEvent,\n  ProviderCreatedEvent,\n  ProviderFailedEvent,\n  ConnectionErrorEvent,\n  TokenExpiredConnectionEvent,\n  TokenRefreshedEvent,\n  TokenRefreshFailedEvent,\n  RetryConnectionEvent,\n  ResetConnectionEvent,\n} from './facts.js';\nimport { createConnectionEngine, type ConnectionEngineContext } from './engine.js';\n\n/**\n * PraxisConnectionManager - High-level API for connection operations\n */\nexport class PraxisConnectionManager {\n  private engine: LogicEngine<ConnectionEngineContext>;\n  private isStarted = false;\n\n  constructor(config: ProjectConnection, initialConfig?: Partial<PraxisConnectionContext>) {\n    this.engine = createConnectionEngine(config, initialConfig);\n  }\n\n  start(): void {\n    this.isStarted = true;\n  }\n\n  stop(): void {\n    this.isStarted = false;\n  }\n\n  getConnectionState(): PraxisConnectionState {\n    return this.engine.getContext().connectionState;\n  }\n\n  getConnectionData(): PraxisConnectionContext {\n    return this.engine.getContext().connectionData;\n  }\n\n  /**\n   * Initiate connection\n   */\n  connect(options?: { forceInteractive?: boolean }): boolean {\n    if (!this.isStarted) return false;\n    if (this.getConnectionState() !== 'disconnected') return false;\n\n    const config = this.getConnectionData().config;\n    this.engine.step([\n      ConnectEvent.create({\n        config,\n        forceInteractive: options?.forceInteractive,\n      }),\n    ]);\n\n    return this.getConnectionState() === 'authenticating';\n  }\n\n  /**\n   * Disconnect from Azure DevOps\n   */\n  disconnect(): boolean {\n    if (!this.isStarted) return false;\n\n    this.engine.step([DisconnectEvent.create({})]);\n    return this.getConnectionState() === 'disconnected';\n  }\n\n  /**\n   * Handle successful authentication\n   */\n  authenticated(credential: string, expiresAt?: number): boolean {\n    if (!this.isStarted) return false;\n    if (this.getConnectionState() !== 'authenticating') return false;\n\n    this.engine.step([AuthenticatedEvent.create({ credential, expiresAt })]);\n    return this.getConnectionState() === 'creating_client';\n  }\n\n  /**\n   * Handle failed authentication\n   */\n  authFailed(error: string): boolean {\n    if (!this.isStarted) return false;\n    if (this.getConnectionState() !== 'authenticating') return false;\n\n    this.engine.step([AuthConnectionFailedEvent.create({ error })]);\n    return this.getConnectionState() === 'auth_failed';\n  }\n\n  /**\n   * Handle client creation success\n   */\n  clientCreated(client: unknown): boolean {\n    if (!this.isStarted) return false;\n    if (this.getConnectionState() !== 'creating_client') return false;\n\n    this.engine.step([ClientCreatedEvent.create({ client })]);\n    return this.getConnectionState() === 'creating_provider';\n  }\n\n  /**\n   * Handle client creation failure\n   */\n  clientFailed(error: string): boolean {\n    if (!this.isStarted) return false;\n    if (this.getConnectionState() !== 'creating_client') return false;\n\n    this.engine.step([ClientFailedEvent.create({ error })]);\n    return this.getConnectionState() === 'client_failed';\n  }\n\n  /**\n   * Handle provider creation success\n   */\n  providerCreated(provider: unknown): boolean {\n    if (!this.isStarted) return false;\n    if (this.getConnectionState() !== 'creating_provider') return false;\n\n    this.engine.step([ProviderCreatedEvent.create({ provider })]);\n    return this.getConnectionState() === 'connected';\n  }\n\n  /**\n   * Handle provider creation failure\n   */\n  providerFailed(error: string): boolean {\n    if (!this.isStarted) return false;\n    if (this.getConnectionState() !== 'creating_provider') return false;\n\n    this.engine.step([ProviderFailedEvent.create({ error })]);\n    return this.getConnectionState() === 'provider_failed';\n  }\n\n  /**\n   * Handle connection error\n   */\n  connectionError(error: string): boolean {\n    if (!this.isStarted) return false;\n    if (this.getConnectionState() !== 'connected') return false;\n\n    this.engine.step([ConnectionErrorEvent.create({ error })]);\n    return this.getConnectionState() === 'connection_error';\n  }\n\n  /**\n   * Handle token expiration\n   */\n  tokenExpired(): boolean {\n    if (!this.isStarted) return false;\n    if (this.getConnectionState() !== 'connected') return false;\n\n    this.engine.step([TokenExpiredConnectionEvent.create({})]);\n    const newState = this.getConnectionState();\n    return newState === 'auth_failed' || newState === 'token_refresh';\n  }\n\n  /**\n   * Handle successful token refresh\n   */\n  tokenRefreshed(token: string, expiresAt?: number): boolean {\n    if (!this.isStarted) return false;\n    if (this.getConnectionState() !== 'token_refresh') return false;\n\n    this.engine.step([TokenRefreshedEvent.create({ token, expiresAt })]);\n    return this.getConnectionState() === 'connected';\n  }\n\n  /**\n   * Handle failed token refresh\n   */\n  tokenRefreshFailed(error: string): boolean {\n    if (!this.isStarted) return false;\n    if (this.getConnectionState() !== 'token_refresh') return false;\n\n    this.engine.step([TokenRefreshFailedEvent.create({ error })]);\n    return this.getConnectionState() === 'auth_failed';\n  }\n\n  /**\n   * Retry connection after failure\n   */\n  retry(): boolean {\n    if (!this.isStarted) return false;\n\n    const currentState = this.getConnectionState();\n    const failedStates = ['auth_failed', 'client_failed', 'provider_failed', 'connection_error'];\n    if (!failedStates.includes(currentState)) return false;\n\n    const connectionData = this.getConnectionData();\n    if (connectionData.retryCount >= DEFAULT_CONNECTION_CONFIG.maxRetryCount) {\n      return false;\n    }\n\n    this.engine.step([RetryConnectionEvent.create({})]);\n    return this.getConnectionState() === 'authenticating';\n  }\n\n  /**\n   * Reset connection state\n   */\n  reset(): void {\n    if (!this.isStarted) return;\n    this.engine.step([ResetConnectionEvent.create({})]);\n  }\n\n  /**\n   * Check if connected\n   */\n  isConnected(): boolean {\n    return this.getConnectionState() === 'connected';\n  }\n\n  /**\n   * Check if authenticating\n   */\n  isAuthenticating(): boolean {\n    return this.getConnectionState() === 'authenticating';\n  }\n\n  /**\n   * Check if in a failed state\n   */\n  isFailed(): boolean {\n    const failedStates = ['auth_failed', 'client_failed', 'provider_failed', 'connection_error'];\n    return failedStates.includes(this.getConnectionState());\n  }\n\n  /**\n   * Get the client if available\n   */\n  getClient(): unknown | undefined {\n    if (!this.isConnected()) return undefined;\n    return this.getConnectionData().client;\n  }\n\n  /**\n   * Get the provider if available\n   */\n  getProvider(): unknown | undefined {\n    if (!this.isConnected()) return undefined;\n    return this.getConnectionData().provider;\n  }\n\n  /**\n   * Get connection snapshot\n   */\n  getSnapshot(): PraxisConnectionSnapshot {\n    const state = this.getConnectionState();\n    const data = this.getConnectionData();\n\n    return {\n      state,\n      connectionId: data.connectionId,\n      isConnected: data.isConnected,\n      authMethod: data.authMethod,\n      hasClient: !!data.client,\n      hasProvider: !!data.provider,\n      error: data.lastError,\n      retryCount: data.retryCount,\n    };\n  }\n\n  /**\n   * Get status information\n   */\n  getStatus() {\n    return {\n      isStarted: this.isStarted,\n      connectionState: this.getConnectionState(),\n      connectionContext: this.getConnectionData(),\n    };\n  }\n\n  /**\n   * Validate that manager is in sync\n   */\n  validateSync(): boolean {\n    return this.isStarted;\n  }\n\n  /**\n   * Get the underlying engine for advanced operations\n   */\n  getEngine(): LogicEngine<ConnectionEngineContext> {\n    return this.engine;\n  }\n}\n", "/* eslint-disable max-lines */\n/**\n * Module: src/logging/ComponentLogger.ts\n * Owner: application\n * Reads: (document)\n * Writes: (document)\n * Receives: (document)\n * Emits: (document)\n * Prohibitions: Do not mutate ApplicationContext directly; Do not define new *Context types\n * Rationale: (document)\n *\n * LLM-GUARD:\n * - Follow ownership boundaries; route events to Router; do not add UI logic here\n */\n/**\n * Praxis-Integrated Logging System\n *\n * Provides comprehensive logging capabilities specifically designed for Praxis architecture:\n * - Configurable log levels with runtime changes\n * - Praxis context-aware logging with state tracking\n * - Component-specific log filtering\n * - Multiple output destinations\n * - Performance-optimized with minimal overhead when disabled\n */\n\n// Conditional vscode import for webview compatibility\nlet vscode: any = null;\nasync function getVscode(): Promise<any> {\n  if (vscode) return vscode;\n  try {\n    if (typeof window === 'undefined') {\n      // Only import vscode in Node.js environment (extension), not webview\n      vscode = await import('vscode');\n    }\n  } catch {\n    // vscode not available - running in webview or test environment\n  }\n  return vscode;\n}\n\n// ============================================================================\n// LOG LEVEL DEFINITIONS\n// ============================================================================\n\nexport enum LogLevel {\n  DEBUG = 0,\n  INFO = 1,\n  WARN = 2,\n  ERROR = 3,\n  OFF = 4,\n}\n\nexport const LOG_LEVEL_NAMES: Record<LogLevel, string> = {\n  [LogLevel.DEBUG]: 'DEBUG',\n  [LogLevel.INFO]: 'INFO',\n  [LogLevel.WARN]: 'WARN',\n  [LogLevel.ERROR]: 'ERROR',\n  [LogLevel.OFF]: 'OFF',\n};\n\n// ============================================================================\n// COMPONENT TYPES\n// ============================================================================\n\nexport enum Component {\n  APPLICATION = 'APPLICATION',\n  CONNECTION = 'CONNECTION',\n  TIMER = 'TIMER',\n  WEBVIEW = 'WEBVIEW',\n  AUTH = 'AUTH',\n  DATA = 'DATA',\n  ADAPTER = 'ADAPTER',\n  MACHINE = 'MACHINE',\n}\n\nexport interface ComponentContext {\n  component: Component;\n  instanceId?: string;\n  connectionId?: string;\n  state?: string;\n  event?: string;\n  machineId?: string;\n  [key: string]: any;\n}\n\n// ============================================================================\n// LOGGING CONFIGURATION\n// ============================================================================\n\nexport interface LoggingConfig {\n  enabled: boolean;\n  level: LogLevel;\n  components: Record<Component, boolean>;\n  destinations: {\n    console: boolean;\n    outputChannel: boolean;\n    file: boolean;\n  };\n  includeTimestamp: boolean;\n  includeStackTrace: boolean;\n  maxLogEntries: number;\n  contextTracking: boolean;\n}\n\nconst DEFAULT_CONFIG: LoggingConfig = {\n  enabled: true,\n  level: LogLevel.DEBUG, // More verbose logging by default\n  components: {\n    [Component.APPLICATION]: true,\n    [Component.CONNECTION]: true,\n    [Component.TIMER]: true,\n    [Component.WEBVIEW]: true, // Enable webview logging\n    [Component.AUTH]: true,\n    [Component.DATA]: true, // Enable data logging\n    [Component.ADAPTER]: true, // Enable adapter logging\n    [Component.MACHINE]: true, // Enable machine logging\n  },\n  destinations: {\n    console: true,\n    outputChannel: true,\n    file: false,\n  },\n  includeTimestamp: true,\n  includeStackTrace: false,\n  maxLogEntries: 1000,\n  contextTracking: true,\n};\n\n// ============================================================================\n// LOG ENTRY STRUCTURE\n// ============================================================================\n\nexport interface LogEntry {\n  id: string;\n  timestamp: number;\n  level: LogLevel;\n  component: Component;\n  message: string;\n  context?: ComponentContext;\n  data?: any;\n  stackTrace?: string;\n}\n\n// ============================================================================\n// COMPONENT LOGGER CLASS\n// ============================================================================\n\nexport class ComponentLogger {\n  private static instance: ComponentLogger | undefined;\n  private config: LoggingConfig = DEFAULT_CONFIG;\n  private logBuffer: LogEntry[] = [];\n  public outputChannel?: any;\n  private logCounter = 0;\n  private configListeners: Array<(config: LoggingConfig) => void> = [];\n  private logListeners: Array<(entry: LogEntry) => void> = [];\n\n  private constructor() {\n    void getVscode();\n    this.loadConfiguration();\n  }\n\n  public static getInstance(): ComponentLogger {\n    if (!ComponentLogger.instance) {\n      ComponentLogger.instance = new ComponentLogger();\n    }\n    return ComponentLogger.instance;\n  }\n\n  // ============================================================================\n  // CONFIGURATION MANAGEMENT\n  // ============================================================================\n\n  private loadConfiguration(): void {\n    try {\n      // Check if vscode is available before trying to access workspace\n      if (typeof vscode !== 'undefined' && vscode?.workspace) {\n        const vscodeConfig = vscode.workspace.getConfiguration('azureDevOpsIntegration.logging');\n\n        this.config = {\n          enabled: vscodeConfig.get('enabled', DEFAULT_CONFIG.enabled),\n          level: vscodeConfig.get('level', DEFAULT_CONFIG.level),\n          components: {\n            ...DEFAULT_CONFIG.components,\n            ...vscodeConfig.get('components', {}),\n          },\n          destinations: {\n            ...DEFAULT_CONFIG.destinations,\n            ...vscodeConfig.get('destinations', {}),\n          },\n          includeTimestamp: vscodeConfig.get('includeTimestamp', DEFAULT_CONFIG.includeTimestamp),\n          includeStackTrace: vscodeConfig.get(\n            'includeStackTrace',\n            DEFAULT_CONFIG.includeStackTrace\n          ),\n          maxLogEntries: vscodeConfig.get('maxLogEntries', DEFAULT_CONFIG.maxLogEntries),\n          contextTracking: vscodeConfig.get('contextTracking', DEFAULT_CONFIG.contextTracking),\n        };\n      } else {\n        // Use default configuration if vscode is not available yet\n        this.config = { ...DEFAULT_CONFIG };\n      }\n\n      // Notify listeners of config changes\n      this.configListeners.forEach((listener) => listener(this.config));\n    } catch (error) {\n      // Bootstrap error - logging system may not be functional\n      // Silently fall back to default config\n      this.config = { ...DEFAULT_CONFIG };\n    }\n  }\n\n  public updateConfiguration(updates: Partial<LoggingConfig>): void {\n    this.config = { ...this.config, ...updates };\n    this.configListeners.forEach((listener) => listener(this.config));\n\n    // Persist to VS Code settings if available\n    try {\n      if (typeof vscode !== 'undefined' && vscode?.workspace) {\n        const vscodeConfig = vscode.workspace.getConfiguration('azureDevOpsIntegration.logging');\n        Object.entries(updates).forEach(([key, value]) => {\n          vscodeConfig.update(key, value, vscode.ConfigurationTarget.Global);\n        });\n      }\n    } catch (error) {\n      // Bootstrap error - logging system may not be functional\n      // Silently ignore persistence failure\n    }\n  }\n\n  public onConfigurationChange(listener: (config: LoggingConfig) => void): any {\n    this.configListeners.push(listener);\n    if (vscode && vscode.Disposable) {\n      return new vscode.Disposable(() => {\n        const index = this.configListeners.indexOf(listener);\n        if (index >= 0) {\n          this.configListeners.splice(index, 1);\n        }\n      });\n    } else {\n      // Return a simple disposable-like object if vscode is not available\n      return {\n        dispose: () => {\n          const index = this.configListeners.indexOf(listener);\n          if (index >= 0) {\n            this.configListeners.splice(index, 1);\n          }\n        },\n      };\n    }\n  }\n\n  public onLogEntry(listener: (entry: LogEntry) => void): any {\n    this.logListeners.push(listener);\n    if (vscode && vscode.Disposable) {\n      return new vscode.Disposable(() => {\n        const index = this.logListeners.indexOf(listener);\n        if (index >= 0) {\n          this.logListeners.splice(index, 1);\n        }\n      });\n    } else {\n      return {\n        dispose: () => {\n          const index = this.logListeners.indexOf(listener);\n          if (index >= 0) {\n            this.logListeners.splice(index, 1);\n          }\n        },\n      };\n    }\n  }\n\n  // ============================================================================\n  // OUTPUT CHANNEL MANAGEMENT\n  // ============================================================================\n\n  private getOutputChannel(): any {\n    if (!this.outputChannel) {\n      // Check if vscode is available (extension context)\n      if (typeof vscode !== 'undefined' && vscode?.window) {\n        this.outputChannel = vscode.window.createOutputChannel('Azure DevOps Int (Praxis)');\n      } else {\n        // Return null if vscode is not available yet\n        return null;\n      }\n    }\n    return this.outputChannel;\n  }\n\n  // ============================================================================\n  // CORE LOGGING METHODS\n  // ============================================================================\n\n  private shouldLog(level: LogLevel, component: Component): boolean {\n    if (!this.config.enabled) return false;\n    if (level < this.config.level) return false;\n    if (!this.config.components[component]) return false;\n    return true;\n  }\n\n  private createLogEntry(\n    level: LogLevel,\n    component: Component,\n    message: string,\n    context?: ComponentContext,\n    data?: any\n  ): LogEntry {\n    const entry: LogEntry = {\n      id: `log_${++this.logCounter}`,\n      timestamp: Date.now(),\n      level,\n      component,\n      message,\n      context: this.config.contextTracking ? context : undefined,\n      data,\n    };\n\n    if (this.config.includeStackTrace && level >= LogLevel.WARN) {\n      entry.stackTrace = new Error().stack;\n    }\n\n    return entry;\n  }\n\n  private formatLogEntry(entry: LogEntry): string {\n    const timestamp = this.config.includeTimestamp ? new Date(entry.timestamp).toISOString() : '';\n\n    const level = LOG_LEVEL_NAMES[entry.level].padEnd(5);\n    const component = `[${entry.component}]`.padEnd(12);\n\n    let contextStr = '';\n    if (entry.context) {\n      const parts: string[] = [];\n      if (entry.context.instanceId) parts.push(`id:${entry.context.instanceId}`);\n      if (entry.context.connectionId) parts.push(`conn:${entry.context.connectionId}`);\n      if (entry.context.state) parts.push(`state:${entry.context.state}`);\n      if (entry.context.event) parts.push(`event:${entry.context.event}`);\n      if (entry.context.machineId) parts.push(`machine:${entry.context.machineId}`);\n\n      if (parts.length > 0) {\n        contextStr = `{${parts.join(', ')}} `;\n      }\n    }\n\n    let formatted = `${timestamp} ${level} ${component} ${contextStr}${entry.message}`;\n\n    if (entry.data) {\n      formatted += `\\n  Data: ${JSON.stringify(entry.data, null, 2)}`;\n    }\n\n    if (entry.stackTrace && this.config.includeStackTrace) {\n      formatted += `\\n  Stack: ${entry.stackTrace}`;\n    }\n\n    return formatted;\n  }\n\n  private writeToDestinations(entry: LogEntry): void {\n    const formatted = this.formatLogEntry(entry);\n\n    // Notify listeners\n    this.logListeners.forEach((listener) => {\n      try {\n        listener(entry);\n      } catch (e) {\n        // Silently ignore listener errors to prevent cascading failures\n      }\n    });\n\n    // Console output with enhanced visibility for debug console\n    if (this.config.destinations.console) {\n      const levelName = LOG_LEVEL_NAMES[entry.level];\n      /* eslint-disable no-console */\n      switch (levelName) {\n        case 'ERROR':\n          console.error(formatted);\n          break;\n        case 'WARN':\n          console.warn(formatted);\n          break;\n        case 'INFO':\n          console.info(formatted);\n          break;\n        case 'DEBUG':\n        case 'TRACE':\n          if (typeof console.debug === 'function') {\n            console.debug(formatted);\n          } else {\n            console.log(formatted);\n          }\n          break;\n        default:\n          console.log(formatted);\n          break;\n      }\n      /* eslint-enable no-console */\n    }\n\n    // Output channel\n    if (this.config.destinations.outputChannel) {\n      const outputChannel = this.getOutputChannel();\n      if (outputChannel) {\n        outputChannel.appendLine(formatted);\n      }\n    }\n\n    // File output (could be implemented later)\n    if (this.config.destinations.file) {\n      // TODO: Implement file logging\n    }\n  }\n\n  private addToBuffer(entry: LogEntry): void {\n    this.logBuffer.push(entry);\n\n    // Maintain buffer size\n    if (this.logBuffer.length > this.config.maxLogEntries) {\n      this.logBuffer = this.logBuffer.slice(-this.config.maxLogEntries);\n    }\n  }\n\n  private log(\n    level: LogLevel,\n    component: Component,\n    message: string,\n    context?: ComponentContext,\n    data?: any\n  ): void {\n    if (!this.shouldLog(level, component)) return;\n\n    const entry = this.createLogEntry(level, component, message, context, data);\n    this.addToBuffer(entry);\n    this.writeToDestinations(entry);\n  }\n\n  // ============================================================================\n  // PUBLIC LOGGING API\n  // ============================================================================\n\n  public debug(\n    component: Component,\n    message: string,\n    context?: ComponentContext,\n    data?: any\n  ): void {\n    this.log(LogLevel.DEBUG, component, message, context, data);\n  }\n\n  public info(component: Component, message: string, context?: ComponentContext, data?: any): void {\n    this.log(LogLevel.INFO, component, message, context, data);\n  }\n\n  public warn(component: Component, message: string, context?: ComponentContext, data?: any): void {\n    this.log(LogLevel.WARN, component, message, context, data);\n  }\n\n  public error(\n    component: Component,\n    message: string,\n    context?: ComponentContext,\n    data?: any\n  ): void {\n    this.log(LogLevel.ERROR, component, message, context, data);\n  }\n\n  // ============================================================================\n  // COMPONENT-SPECIFIC LOGGING HELPERS\n  // ============================================================================\n\n  public logStateTransition(\n    component: Component,\n    instanceId: string,\n    fromState: string,\n    toState: string,\n    event: string,\n    machineId?: string\n  ): void {\n    this.info(component, `State transition: ${fromState} \u2192 ${toState}`, {\n      component,\n      instanceId,\n      state: toState,\n      event,\n      machineId,\n    });\n  }\n\n  public logEvent(\n    component: Component,\n    instanceId: string,\n    event: string,\n    currentState: string,\n    machineId?: string,\n    data?: any\n  ): void {\n    this.debug(\n      component,\n      `Event: ${event}`,\n      {\n        component,\n        instanceId,\n        state: currentState,\n        event,\n        machineId,\n      },\n      data\n    );\n  }\n\n  public logError(\n    component: Component,\n    instanceId: string,\n    error: Error,\n    currentState?: string,\n    machineId?: string\n  ): void {\n    this.error(\n      component,\n      `Error: ${error.message}`,\n      {\n        component,\n        instanceId,\n        state: currentState,\n        machineId,\n      },\n      { error: error.stack }\n    );\n  }\n\n  public logConnectionActivity(\n    connectionId: string,\n    activity: string,\n    state?: string,\n    data?: any\n  ): void {\n    this.info(\n      Component.CONNECTION,\n      activity,\n      {\n        component: Component.CONNECTION,\n        connectionId,\n        state,\n      },\n      data\n    );\n  }\n\n  // ============================================================================\n  // UTILITY METHODS\n  // ============================================================================\n\n  public getLogBuffer(): LogEntry[] {\n    return [...this.logBuffer];\n  }\n\n  public clearLogBuffer(): void {\n    this.logBuffer = [];\n  }\n\n  public exportLogs(): string {\n    return this.logBuffer.map((entry) => this.formatLogEntry(entry)).join('\\n');\n  }\n\n  public getConfiguration(): LoggingConfig {\n    return { ...this.config };\n  }\n\n  public showOutputChannel(): void {\n    const outputChannel = this.getOutputChannel();\n    if (outputChannel) {\n      outputChannel.show(true);\n    }\n  }\n\n  public getStats(): {\n    totalEntries: number;\n    entriesByLevel: Record<LogLevel, number>;\n    entriesByComponent: Record<Component, number>;\n  } {\n    const stats = {\n      totalEntries: this.logBuffer.length,\n      entriesByLevel: {} as Record<LogLevel, number>,\n      entriesByComponent: {} as Record<Component, number>,\n    };\n\n    // Initialize counters\n    Object.values(LogLevel).forEach((level) => {\n      if (typeof level === 'number') {\n        stats.entriesByLevel[level] = 0;\n      }\n    });\n    Object.values(Component).forEach((component) => {\n      stats.entriesByComponent[component] = 0;\n    });\n\n    // Count entries\n    this.logBuffer.forEach((entry) => {\n      stats.entriesByLevel[entry.level]++;\n      stats.entriesByComponent[entry.component]++;\n    });\n\n    return stats;\n  }\n}\n\n// ============================================================================\n// GLOBAL LOGGER INSTANCE\n// ============================================================================\n\nexport const componentLogger = ComponentLogger.getInstance();\n\n// ============================================================================\n// CONVENIENCE FUNCTIONS\n// ============================================================================\n\nexport interface ComponentLoggerInterface {\n  debug: (message: string, context?: Partial<ComponentContext>, data?: any) => void;\n  info: (message: string, context?: Partial<ComponentContext>, data?: any) => void;\n  warn: (message: string, context?: Partial<ComponentContext>, data?: any) => void;\n  error: (message: string, context?: Partial<ComponentContext>, data?: any) => void;\n  logStateTransition: (\n    fromState: string,\n    toState: string,\n    event: string,\n    machineId?: string\n  ) => void;\n  logEvent: (event: string, currentState: string, machineId?: string, data?: any) => void;\n  logError: (error: Error, currentState?: string, machineId?: string) => void;\n}\n\nexport function createComponentLogger(\n  component: Component,\n  instanceId?: string\n): ComponentLoggerInterface {\n  return {\n    debug: (message: string, context?: Partial<ComponentContext>, data?: any) =>\n      componentLogger.debug(component, message, { component, instanceId, ...context }, data),\n\n    info: (message: string, context?: Partial<ComponentContext>, data?: any) =>\n      componentLogger.info(component, message, { component, instanceId, ...context }, data),\n\n    warn: (message: string, context?: Partial<ComponentContext>, data?: any) =>\n      componentLogger.warn(component, message, { component, instanceId, ...context }, data),\n\n    error: (message: string, context?: Partial<ComponentContext>, data?: any) =>\n      componentLogger.error(component, message, { component, instanceId, ...context }, data),\n\n    logStateTransition: (fromState: string, toState: string, event: string, machineId?: string) =>\n      componentLogger.logStateTransition(\n        component,\n        instanceId || 'unknown',\n        fromState,\n        toState,\n        event,\n        machineId\n      ),\n\n    logEvent: (event: string, currentState: string, machineId?: string, data?: any) =>\n      componentLogger.logEvent(\n        component,\n        instanceId || 'unknown',\n        event,\n        currentState,\n        machineId,\n        data\n      ),\n\n    logError: (error: Error, currentState?: string, machineId?: string) =>\n      componentLogger.logError(component, instanceId || 'unknown', error, currentState, machineId),\n  };\n}\n", "'use strict';\n\n/**\n * Create a bound version of a function with a specified `this` context\n *\n * @param {Function} fn - The function to bind\n * @param {*} thisArg - The value to be passed as the `this` parameter\n * @returns {Function} A new function that will call the original function with the specified `this` context\n */\nexport default function bind(fn, thisArg) {\n  return function wrap() {\n    return fn.apply(thisArg, arguments);\n  };\n}\n", "'use strict';\n\nimport bind from './helpers/bind.js';\n\n// utils is a library of generic helper functions non-specific to axios\n\nconst {toString} = Object.prototype;\nconst {getPrototypeOf} = Object;\nconst {iterator, toStringTag} = Symbol;\n\nconst kindOf = (cache => thing => {\n    const str = toString.call(thing);\n    return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());\n})(Object.create(null));\n\nconst kindOfTest = (type) => {\n  type = type.toLowerCase();\n  return (thing) => kindOf(thing) === type\n}\n\nconst typeOfTest = type => thing => typeof thing === type;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n *\n * @returns {boolean} True if value is an Array, otherwise false\n */\nconst {isArray} = Array;\n\n/**\n * Determine if a value is undefined\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nconst isUndefined = typeOfTest('undefined');\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nconst isArrayBuffer = kindOfTest('ArrayBuffer');\n\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  let result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (isArrayBuffer(val.buffer));\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a String, otherwise false\n */\nconst isString = typeOfTest('string');\n\n/**\n * Determine if a value is a Function\n *\n * @param {*} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nconst isFunction = typeOfTest('function');\n\n/**\n * Determine if a value is a Number\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Number, otherwise false\n */\nconst isNumber = typeOfTest('number');\n\n/**\n * Determine if a value is an Object\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an Object, otherwise false\n */\nconst isObject = (thing) => thing !== null && typeof thing === 'object';\n\n/**\n * Determine if a value is a Boolean\n *\n * @param {*} thing The value to test\n * @returns {boolean} True if value is a Boolean, otherwise false\n */\nconst isBoolean = thing => thing === true || thing === false;\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a plain Object, otherwise false\n */\nconst isPlainObject = (val) => {\n  if (kindOf(val) !== 'object') {\n    return false;\n  }\n\n  const prototype = getPrototypeOf(val);\n  return (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(toStringTag in val) && !(iterator in val);\n}\n\n/**\n * Determine if a value is an empty object (safely handles Buffers)\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an empty object, otherwise false\n */\nconst isEmptyObject = (val) => {\n  // Early return for non-objects or Buffers to prevent RangeError\n  if (!isObject(val) || isBuffer(val)) {\n    return false;\n  }\n\n  try {\n    return Object.keys(val).length === 0 && Object.getPrototypeOf(val) === Object.prototype;\n  } catch (e) {\n    // Fallback for any other objects that might cause RangeError with Object.keys()\n    return false;\n  }\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Date, otherwise false\n */\nconst isDate = kindOfTest('Date');\n\n/**\n * Determine if a value is a File\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFile = kindOfTest('File');\n\n/**\n * Determine if a value is a Blob\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nconst isBlob = kindOfTest('Blob');\n\n/**\n * Determine if a value is a FileList\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFileList = kindOfTest('FileList');\n\n/**\n * Determine if a value is a Stream\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nconst isStream = (val) => isObject(val) && isFunction(val.pipe);\n\n/**\n * Determine if a value is a FormData\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nconst isFormData = (thing) => {\n  let kind;\n  return thing && (\n    (typeof FormData === 'function' && thing instanceof FormData) || (\n      isFunction(thing.append) && (\n        (kind = kindOf(thing)) === 'formdata' ||\n        // detect form-data instance\n        (kind === 'object' && isFunction(thing.toString) && thing.toString() === '[object FormData]')\n      )\n    )\n  )\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nconst isURLSearchParams = kindOfTest('URLSearchParams');\n\nconst [isReadableStream, isRequest, isResponse, isHeaders] = ['ReadableStream', 'Request', 'Response', 'Headers'].map(kindOfTest);\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n *\n * @returns {String} The String freed of excess whitespace\n */\nconst trim = (str) => str.trim ?\n  str.trim() : str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n *\n * @param {Boolean} [allOwnKeys = false]\n * @returns {any}\n */\nfunction forEach(obj, fn, {allOwnKeys = false} = {}) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  let i;\n  let l;\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Buffer check\n    if (isBuffer(obj)) {\n      return;\n    }\n\n    // Iterate over object keys\n    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);\n    const len = keys.length;\n    let key;\n\n    for (i = 0; i < len; i++) {\n      key = keys[i];\n      fn.call(null, obj[key], key, obj);\n    }\n  }\n}\n\nfunction findKey(obj, key) {\n  if (isBuffer(obj)){\n    return null;\n  }\n\n  key = key.toLowerCase();\n  const keys = Object.keys(obj);\n  let i = keys.length;\n  let _key;\n  while (i-- > 0) {\n    _key = keys[i];\n    if (key === _key.toLowerCase()) {\n      return _key;\n    }\n  }\n  return null;\n}\n\nconst _global = (() => {\n  /*eslint no-undef:0*/\n  if (typeof globalThis !== \"undefined\") return globalThis;\n  return typeof self !== \"undefined\" ? self : (typeof window !== 'undefined' ? window : global)\n})();\n\nconst isContextDefined = (context) => !isUndefined(context) && context !== _global;\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n *\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  const {caseless, skipUndefined} = isContextDefined(this) && this || {};\n  const result = {};\n  const assignValue = (val, key) => {\n    const targetKey = caseless && findKey(result, key) || key;\n    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {\n      result[targetKey] = merge(result[targetKey], val);\n    } else if (isPlainObject(val)) {\n      result[targetKey] = merge({}, val);\n    } else if (isArray(val)) {\n      result[targetKey] = val.slice();\n    } else if (!skipUndefined || !isUndefined(val)) {\n      result[targetKey] = val;\n    }\n  }\n\n  for (let i = 0, l = arguments.length; i < l; i++) {\n    arguments[i] && forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n *\n * @param {Boolean} [allOwnKeys]\n * @returns {Object} The resulting value of object a\n */\nconst extend = (a, b, thisArg, {allOwnKeys}= {}) => {\n  forEach(b, (val, key) => {\n    if (thisArg && isFunction(val)) {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  }, {allOwnKeys});\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n *\n * @returns {string} content value without BOM\n */\nconst stripBOM = (content) => {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\n/**\n * Inherit the prototype methods from one constructor into another\n * @param {function} constructor\n * @param {function} superConstructor\n * @param {object} [props]\n * @param {object} [descriptors]\n *\n * @returns {void}\n */\nconst inherits = (constructor, superConstructor, props, descriptors) => {\n  constructor.prototype = Object.create(superConstructor.prototype, descriptors);\n  constructor.prototype.constructor = constructor;\n  Object.defineProperty(constructor, 'super', {\n    value: superConstructor.prototype\n  });\n  props && Object.assign(constructor.prototype, props);\n}\n\n/**\n * Resolve object with deep prototype chain to a flat object\n * @param {Object} sourceObj source object\n * @param {Object} [destObj]\n * @param {Function|Boolean} [filter]\n * @param {Function} [propFilter]\n *\n * @returns {Object}\n */\nconst toFlatObject = (sourceObj, destObj, filter, propFilter) => {\n  let props;\n  let i;\n  let prop;\n  const merged = {};\n\n  destObj = destObj || {};\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  if (sourceObj == null) return destObj;\n\n  do {\n    props = Object.getOwnPropertyNames(sourceObj);\n    i = props.length;\n    while (i-- > 0) {\n      prop = props[i];\n      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {\n        destObj[prop] = sourceObj[prop];\n        merged[prop] = true;\n      }\n    }\n    sourceObj = filter !== false && getPrototypeOf(sourceObj);\n  } while (sourceObj && (!filter || filter(sourceObj, destObj)) && sourceObj !== Object.prototype);\n\n  return destObj;\n}\n\n/**\n * Determines whether a string ends with the characters of a specified string\n *\n * @param {String} str\n * @param {String} searchString\n * @param {Number} [position= 0]\n *\n * @returns {boolean}\n */\nconst endsWith = (str, searchString, position) => {\n  str = String(str);\n  if (position === undefined || position > str.length) {\n    position = str.length;\n  }\n  position -= searchString.length;\n  const lastIndex = str.indexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\n\n/**\n * Returns new array from array like object or null if failed\n *\n * @param {*} [thing]\n *\n * @returns {?Array}\n */\nconst toArray = (thing) => {\n  if (!thing) return null;\n  if (isArray(thing)) return thing;\n  let i = thing.length;\n  if (!isNumber(i)) return null;\n  const arr = new Array(i);\n  while (i-- > 0) {\n    arr[i] = thing[i];\n  }\n  return arr;\n}\n\n/**\n * Checking if the Uint8Array exists and if it does, it returns a function that checks if the\n * thing passed in is an instance of Uint8Array\n *\n * @param {TypedArray}\n *\n * @returns {Array}\n */\n// eslint-disable-next-line func-names\nconst isTypedArray = (TypedArray => {\n  // eslint-disable-next-line func-names\n  return thing => {\n    return TypedArray && thing instanceof TypedArray;\n  };\n})(typeof Uint8Array !== 'undefined' && getPrototypeOf(Uint8Array));\n\n/**\n * For each entry in the object, call the function with the key and value.\n *\n * @param {Object<any, any>} obj - The object to iterate over.\n * @param {Function} fn - The function to call for each entry.\n *\n * @returns {void}\n */\nconst forEachEntry = (obj, fn) => {\n  const generator = obj && obj[iterator];\n\n  const _iterator = generator.call(obj);\n\n  let result;\n\n  while ((result = _iterator.next()) && !result.done) {\n    const pair = result.value;\n    fn.call(obj, pair[0], pair[1]);\n  }\n}\n\n/**\n * It takes a regular expression and a string, and returns an array of all the matches\n *\n * @param {string} regExp - The regular expression to match against.\n * @param {string} str - The string to search.\n *\n * @returns {Array<boolean>}\n */\nconst matchAll = (regExp, str) => {\n  let matches;\n  const arr = [];\n\n  while ((matches = regExp.exec(str)) !== null) {\n    arr.push(matches);\n  }\n\n  return arr;\n}\n\n/* Checking if the kindOfTest function returns true when passed an HTMLFormElement. */\nconst isHTMLForm = kindOfTest('HTMLFormElement');\n\nconst toCamelCase = str => {\n  return str.toLowerCase().replace(/[-_\\s]([a-z\\d])(\\w*)/g,\n    function replacer(m, p1, p2) {\n      return p1.toUpperCase() + p2;\n    }\n  );\n};\n\n/* Creating a function that will check if an object has a property. */\nconst hasOwnProperty = (({hasOwnProperty}) => (obj, prop) => hasOwnProperty.call(obj, prop))(Object.prototype);\n\n/**\n * Determine if a value is a RegExp object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a RegExp object, otherwise false\n */\nconst isRegExp = kindOfTest('RegExp');\n\nconst reduceDescriptors = (obj, reducer) => {\n  const descriptors = Object.getOwnPropertyDescriptors(obj);\n  const reducedDescriptors = {};\n\n  forEach(descriptors, (descriptor, name) => {\n    let ret;\n    if ((ret = reducer(descriptor, name, obj)) !== false) {\n      reducedDescriptors[name] = ret || descriptor;\n    }\n  });\n\n  Object.defineProperties(obj, reducedDescriptors);\n}\n\n/**\n * Makes all methods read-only\n * @param {Object} obj\n */\n\nconst freezeMethods = (obj) => {\n  reduceDescriptors(obj, (descriptor, name) => {\n    // skip restricted props in strict mode\n    if (isFunction(obj) && ['arguments', 'caller', 'callee'].indexOf(name) !== -1) {\n      return false;\n    }\n\n    const value = obj[name];\n\n    if (!isFunction(value)) return;\n\n    descriptor.enumerable = false;\n\n    if ('writable' in descriptor) {\n      descriptor.writable = false;\n      return;\n    }\n\n    if (!descriptor.set) {\n      descriptor.set = () => {\n        throw Error('Can not rewrite read-only method \\'' + name + '\\'');\n      };\n    }\n  });\n}\n\nconst toObjectSet = (arrayOrString, delimiter) => {\n  const obj = {};\n\n  const define = (arr) => {\n    arr.forEach(value => {\n      obj[value] = true;\n    });\n  }\n\n  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));\n\n  return obj;\n}\n\nconst noop = () => {}\n\nconst toFiniteNumber = (value, defaultValue) => {\n  return value != null && Number.isFinite(value = +value) ? value : defaultValue;\n}\n\n\n\n/**\n * If the thing is a FormData object, return true, otherwise return false.\n *\n * @param {unknown} thing - The thing to check.\n *\n * @returns {boolean}\n */\nfunction isSpecCompliantForm(thing) {\n  return !!(thing && isFunction(thing.append) && thing[toStringTag] === 'FormData' && thing[iterator]);\n}\n\nconst toJSONObject = (obj) => {\n  const stack = new Array(10);\n\n  const visit = (source, i) => {\n\n    if (isObject(source)) {\n      if (stack.indexOf(source) >= 0) {\n        return;\n      }\n\n      //Buffer check\n      if (isBuffer(source)) {\n        return source;\n      }\n\n      if(!('toJSON' in source)) {\n        stack[i] = source;\n        const target = isArray(source) ? [] : {};\n\n        forEach(source, (value, key) => {\n          const reducedValue = visit(value, i + 1);\n          !isUndefined(reducedValue) && (target[key] = reducedValue);\n        });\n\n        stack[i] = undefined;\n\n        return target;\n      }\n    }\n\n    return source;\n  }\n\n  return visit(obj, 0);\n}\n\nconst isAsyncFn = kindOfTest('AsyncFunction');\n\nconst isThenable = (thing) =>\n  thing && (isObject(thing) || isFunction(thing)) && isFunction(thing.then) && isFunction(thing.catch);\n\n// original code\n// https://github.com/DigitalBrainJS/AxiosPromise/blob/16deab13710ec09779922131f3fa5954320f83ab/lib/utils.js#L11-L34\n\nconst _setImmediate = ((setImmediateSupported, postMessageSupported) => {\n  if (setImmediateSupported) {\n    return setImmediate;\n  }\n\n  return postMessageSupported ? ((token, callbacks) => {\n    _global.addEventListener(\"message\", ({source, data}) => {\n      if (source === _global && data === token) {\n        callbacks.length && callbacks.shift()();\n      }\n    }, false);\n\n    return (cb) => {\n      callbacks.push(cb);\n      _global.postMessage(token, \"*\");\n    }\n  })(`axios@${Math.random()}`, []) : (cb) => setTimeout(cb);\n})(\n  typeof setImmediate === 'function',\n  isFunction(_global.postMessage)\n);\n\nconst asap = typeof queueMicrotask !== 'undefined' ?\n  queueMicrotask.bind(_global) : ( typeof process !== 'undefined' && process.nextTick || _setImmediate);\n\n// *********************\n\n\nconst isIterable = (thing) => thing != null && isFunction(thing[iterator]);\n\n\nexport default {\n  isArray,\n  isArrayBuffer,\n  isBuffer,\n  isFormData,\n  isArrayBufferView,\n  isString,\n  isNumber,\n  isBoolean,\n  isObject,\n  isPlainObject,\n  isEmptyObject,\n  isReadableStream,\n  isRequest,\n  isResponse,\n  isHeaders,\n  isUndefined,\n  isDate,\n  isFile,\n  isBlob,\n  isRegExp,\n  isFunction,\n  isStream,\n  isURLSearchParams,\n  isTypedArray,\n  isFileList,\n  forEach,\n  merge,\n  extend,\n  trim,\n  stripBOM,\n  inherits,\n  toFlatObject,\n  kindOf,\n  kindOfTest,\n  endsWith,\n  toArray,\n  forEachEntry,\n  matchAll,\n  isHTMLForm,\n  hasOwnProperty,\n  hasOwnProp: hasOwnProperty, // an alias to avoid ESLint no-prototype-builtins detection\n  reduceDescriptors,\n  freezeMethods,\n  toObjectSet,\n  toCamelCase,\n  noop,\n  toFiniteNumber,\n  findKey,\n  global: _global,\n  isContextDefined,\n  isSpecCompliantForm,\n  toJSONObject,\n  isAsyncFn,\n  isThenable,\n  setImmediate: _setImmediate,\n  asap,\n  isIterable\n};\n", "'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [config] The config.\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n *\n * @returns {Error} The created error.\n */\nfunction AxiosError(message, code, config, request, response) {\n  Error.call(this);\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    this.stack = (new Error()).stack;\n  }\n\n  this.message = message;\n  this.name = 'AxiosError';\n  code && (this.code = code);\n  config && (this.config = config);\n  request && (this.request = request);\n  if (response) {\n    this.response = response;\n    this.status = response.status ? response.status : null;\n  }\n}\n\nutils.inherits(AxiosError, Error, {\n  toJSON: function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: utils.toJSONObject(this.config),\n      code: this.code,\n      status: this.status\n    };\n  }\n});\n\nconst prototype = AxiosError.prototype;\nconst descriptors = {};\n\n[\n  'ERR_BAD_OPTION_VALUE',\n  'ERR_BAD_OPTION',\n  'ECONNABORTED',\n  'ETIMEDOUT',\n  'ERR_NETWORK',\n  'ERR_FR_TOO_MANY_REDIRECTS',\n  'ERR_DEPRECATED',\n  'ERR_BAD_RESPONSE',\n  'ERR_BAD_REQUEST',\n  'ERR_CANCELED',\n  'ERR_NOT_SUPPORT',\n  'ERR_INVALID_URL'\n// eslint-disable-next-line func-names\n].forEach(code => {\n  descriptors[code] = {value: code};\n});\n\nObject.defineProperties(AxiosError, descriptors);\nObject.defineProperty(prototype, 'isAxiosError', {value: true});\n\n// eslint-disable-next-line func-names\nAxiosError.from = (error, code, config, request, response, customProps) => {\n  const axiosError = Object.create(prototype);\n\n  utils.toFlatObject(error, axiosError, function filter(obj) {\n    return obj !== Error.prototype;\n  }, prop => {\n    return prop !== 'isAxiosError';\n  });\n\n  const msg = error && error.message ? error.message : 'Error';\n\n  // Prefer explicit code; otherwise copy the low-level error's code (e.g. ECONNREFUSED)\n  const errCode = code == null && error ? error.code : code;\n  AxiosError.call(axiosError, msg, errCode, config, request, response);\n\n  // Chain the original error on the standard field; non-enumerable to avoid JSON noise\n  if (error && axiosError.cause == null) {\n    Object.defineProperty(axiosError, 'cause', { value: error, configurable: true });\n  }\n\n  axiosError.name = (error && error.name) || 'Error';\n\n  customProps && Object.assign(axiosError, customProps);\n\n  return axiosError;\n};\n\nexport default AxiosError;\n", "var Stream = require('stream').Stream;\nvar util = require('util');\n\nmodule.exports = DelayedStream;\nfunction DelayedStream() {\n  this.source = null;\n  this.dataSize = 0;\n  this.maxDataSize = 1024 * 1024;\n  this.pauseStream = true;\n\n  this._maxDataSizeExceeded = false;\n  this._released = false;\n  this._bufferedEvents = [];\n}\nutil.inherits(DelayedStream, Stream);\n\nDelayedStream.create = function(source, options) {\n  var delayedStream = new this();\n\n  options = options || {};\n  for (var option in options) {\n    delayedStream[option] = options[option];\n  }\n\n  delayedStream.source = source;\n\n  var realEmit = source.emit;\n  source.emit = function() {\n    delayedStream._handleEmit(arguments);\n    return realEmit.apply(source, arguments);\n  };\n\n  source.on('error', function() {});\n  if (delayedStream.pauseStream) {\n    source.pause();\n  }\n\n  return delayedStream;\n};\n\nObject.defineProperty(DelayedStream.prototype, 'readable', {\n  configurable: true,\n  enumerable: true,\n  get: function() {\n    return this.source.readable;\n  }\n});\n\nDelayedStream.prototype.setEncoding = function() {\n  return this.source.setEncoding.apply(this.source, arguments);\n};\n\nDelayedStream.prototype.resume = function() {\n  if (!this._released) {\n    this.release();\n  }\n\n  this.source.resume();\n};\n\nDelayedStream.prototype.pause = function() {\n  this.source.pause();\n};\n\nDelayedStream.prototype.release = function() {\n  this._released = true;\n\n  this._bufferedEvents.forEach(function(args) {\n    this.emit.apply(this, args);\n  }.bind(this));\n  this._bufferedEvents = [];\n};\n\nDelayedStream.prototype.pipe = function() {\n  var r = Stream.prototype.pipe.apply(this, arguments);\n  this.resume();\n  return r;\n};\n\nDelayedStream.prototype._handleEmit = function(args) {\n  if (this._released) {\n    this.emit.apply(this, args);\n    return;\n  }\n\n  if (args[0] === 'data') {\n    this.dataSize += args[1].length;\n    this._checkIfMaxDataSizeExceeded();\n  }\n\n  this._bufferedEvents.push(args);\n};\n\nDelayedStream.prototype._checkIfMaxDataSizeExceeded = function() {\n  if (this._maxDataSizeExceeded) {\n    return;\n  }\n\n  if (this.dataSize <= this.maxDataSize) {\n    return;\n  }\n\n  this._maxDataSizeExceeded = true;\n  var message =\n    'DelayedStream#maxDataSize of ' + this.maxDataSize + ' bytes exceeded.'\n  this.emit('error', new Error(message));\n};\n", "var util = require('util');\nvar Stream = require('stream').Stream;\nvar DelayedStream = require('delayed-stream');\n\nmodule.exports = CombinedStream;\nfunction CombinedStream() {\n  this.writable = false;\n  this.readable = true;\n  this.dataSize = 0;\n  this.maxDataSize = 2 * 1024 * 1024;\n  this.pauseStreams = true;\n\n  this._released = false;\n  this._streams = [];\n  this._currentStream = null;\n  this._insideLoop = false;\n  this._pendingNext = false;\n}\nutil.inherits(CombinedStream, Stream);\n\nCombinedStream.create = function(options) {\n  var combinedStream = new this();\n\n  options = options || {};\n  for (var option in options) {\n    combinedStream[option] = options[option];\n  }\n\n  return combinedStream;\n};\n\nCombinedStream.isStreamLike = function(stream) {\n  return (typeof stream !== 'function')\n    && (typeof stream !== 'string')\n    && (typeof stream !== 'boolean')\n    && (typeof stream !== 'number')\n    && (!Buffer.isBuffer(stream));\n};\n\nCombinedStream.prototype.append = function(stream) {\n  var isStreamLike = CombinedStream.isStreamLike(stream);\n\n  if (isStreamLike) {\n    if (!(stream instanceof DelayedStream)) {\n      var newStream = DelayedStream.create(stream, {\n        maxDataSize: Infinity,\n        pauseStream: this.pauseStreams,\n      });\n      stream.on('data', this._checkDataSize.bind(this));\n      stream = newStream;\n    }\n\n    this._handleErrors(stream);\n\n    if (this.pauseStreams) {\n      stream.pause();\n    }\n  }\n\n  this._streams.push(stream);\n  return this;\n};\n\nCombinedStream.prototype.pipe = function(dest, options) {\n  Stream.prototype.pipe.call(this, dest, options);\n  this.resume();\n  return dest;\n};\n\nCombinedStream.prototype._getNext = function() {\n  this._currentStream = null;\n\n  if (this._insideLoop) {\n    this._pendingNext = true;\n    return; // defer call\n  }\n\n  this._insideLoop = true;\n  try {\n    do {\n      this._pendingNext = false;\n      this._realGetNext();\n    } while (this._pendingNext);\n  } finally {\n    this._insideLoop = false;\n  }\n};\n\nCombinedStream.prototype._realGetNext = function() {\n  var stream = this._streams.shift();\n\n\n  if (typeof stream == 'undefined') {\n    this.end();\n    return;\n  }\n\n  if (typeof stream !== 'function') {\n    this._pipeNext(stream);\n    return;\n  }\n\n  var getStream = stream;\n  getStream(function(stream) {\n    var isStreamLike = CombinedStream.isStreamLike(stream);\n    if (isStreamLike) {\n      stream.on('data', this._checkDataSize.bind(this));\n      this._handleErrors(stream);\n    }\n\n    this._pipeNext(stream);\n  }.bind(this));\n};\n\nCombinedStream.prototype._pipeNext = function(stream) {\n  this._currentStream = stream;\n\n  var isStreamLike = CombinedStream.isStreamLike(stream);\n  if (isStreamLike) {\n    stream.on('end', this._getNext.bind(this));\n    stream.pipe(this, {end: false});\n    return;\n  }\n\n  var value = stream;\n  this.write(value);\n  this._getNext();\n};\n\nCombinedStream.prototype._handleErrors = function(stream) {\n  var self = this;\n  stream.on('error', function(err) {\n    self._emitError(err);\n  });\n};\n\nCombinedStream.prototype.write = function(data) {\n  this.emit('data', data);\n};\n\nCombinedStream.prototype.pause = function() {\n  if (!this.pauseStreams) {\n    return;\n  }\n\n  if(this.pauseStreams && this._currentStream && typeof(this._currentStream.pause) == 'function') this._currentStream.pause();\n  this.emit('pause');\n};\n\nCombinedStream.prototype.resume = function() {\n  if (!this._released) {\n    this._released = true;\n    this.writable = true;\n    this._getNext();\n  }\n\n  if(this.pauseStreams && this._currentStream && typeof(this._currentStream.resume) == 'function') this._currentStream.resume();\n  this.emit('resume');\n};\n\nCombinedStream.prototype.end = function() {\n  this._reset();\n  this.emit('end');\n};\n\nCombinedStream.prototype.destroy = function() {\n  this._reset();\n  this.emit('close');\n};\n\nCombinedStream.prototype._reset = function() {\n  this.writable = false;\n  this._streams = [];\n  this._currentStream = null;\n};\n\nCombinedStream.prototype._checkDataSize = function() {\n  this._updateDataSize();\n  if (this.dataSize <= this.maxDataSize) {\n    return;\n  }\n\n  var message =\n    'DelayedStream#maxDataSize of ' + this.maxDataSize + ' bytes exceeded.';\n  this._emitError(new Error(message));\n};\n\nCombinedStream.prototype._updateDataSize = function() {\n  this.dataSize = 0;\n\n  var self = this;\n  this._streams.forEach(function(stream) {\n    if (!stream.dataSize) {\n      return;\n    }\n\n    self.dataSize += stream.dataSize;\n  });\n\n  if (this._currentStream && this._currentStream.dataSize) {\n    this.dataSize += this._currentStream.dataSize;\n  }\n};\n\nCombinedStream.prototype._emitError = function(err) {\n  this._reset();\n  this.emit('error', err);\n};\n", "{\n  \"application/1d-interleaved-parityfec\": {\n    \"source\": \"iana\"\n  },\n  \"application/3gpdash-qoe-report+xml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true\n  },\n  \"application/3gpp-ims+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/3gpphal+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/3gpphalforms+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/a2l\": {\n    \"source\": \"iana\"\n  },\n  \"application/ace+cbor\": {\n    \"source\": \"iana\"\n  },\n  \"application/activemessage\": {\n    \"source\": \"iana\"\n  },\n  \"application/activity+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/alto-costmap+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/alto-costmapfilter+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/alto-directory+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/alto-endpointcost+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/alto-endpointcostparams+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/alto-endpointprop+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/alto-endpointpropparams+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/alto-error+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/alto-networkmap+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/alto-networkmapfilter+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/alto-updatestreamcontrol+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/alto-updatestreamparams+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/aml\": {\n    \"source\": \"iana\"\n  },\n  \"application/andrew-inset\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ez\"]\n  },\n  \"application/applefile\": {\n    \"source\": \"iana\"\n  },\n  \"application/applixware\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"aw\"]\n  },\n  \"application/at+jwt\": {\n    \"source\": \"iana\"\n  },\n  \"application/atf\": {\n    \"source\": \"iana\"\n  },\n  \"application/atfx\": {\n    \"source\": \"iana\"\n  },\n  \"application/atom+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"atom\"]\n  },\n  \"application/atomcat+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"atomcat\"]\n  },\n  \"application/atomdeleted+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"atomdeleted\"]\n  },\n  \"application/atomicmail\": {\n    \"source\": \"iana\"\n  },\n  \"application/atomsvc+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"atomsvc\"]\n  },\n  \"application/atsc-dwd+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"dwd\"]\n  },\n  \"application/atsc-dynamic-event-message\": {\n    \"source\": \"iana\"\n  },\n  \"application/atsc-held+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"held\"]\n  },\n  \"application/atsc-rdt+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/atsc-rsat+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"rsat\"]\n  },\n  \"application/atxml\": {\n    \"source\": \"iana\"\n  },\n  \"application/auth-policy+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/bacnet-xdd+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/batch-smtp\": {\n    \"source\": \"iana\"\n  },\n  \"application/bdoc\": {\n    \"compressible\": false,\n    \"extensions\": [\"bdoc\"]\n  },\n  \"application/beep+xml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true\n  },\n  \"application/calendar+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/calendar+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"xcs\"]\n  },\n  \"application/call-completion\": {\n    \"source\": \"iana\"\n  },\n  \"application/cals-1840\": {\n    \"source\": \"iana\"\n  },\n  \"application/captive+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/cbor\": {\n    \"source\": \"iana\"\n  },\n  \"application/cbor-seq\": {\n    \"source\": \"iana\"\n  },\n  \"application/cccex\": {\n    \"source\": \"iana\"\n  },\n  \"application/ccmp+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/ccxml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"ccxml\"]\n  },\n  \"application/cdfx+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"cdfx\"]\n  },\n  \"application/cdmi-capability\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"cdmia\"]\n  },\n  \"application/cdmi-container\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"cdmic\"]\n  },\n  \"application/cdmi-domain\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"cdmid\"]\n  },\n  \"application/cdmi-object\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"cdmio\"]\n  },\n  \"application/cdmi-queue\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"cdmiq\"]\n  },\n  \"application/cdni\": {\n    \"source\": \"iana\"\n  },\n  \"application/cea\": {\n    \"source\": \"iana\"\n  },\n  \"application/cea-2018+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/cellml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/cfw\": {\n    \"source\": \"iana\"\n  },\n  \"application/city+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/clr\": {\n    \"source\": \"iana\"\n  },\n  \"application/clue+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/clue_info+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/cms\": {\n    \"source\": \"iana\"\n  },\n  \"application/cnrp+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/coap-group+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/coap-payload\": {\n    \"source\": \"iana\"\n  },\n  \"application/commonground\": {\n    \"source\": \"iana\"\n  },\n  \"application/conference-info+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/cose\": {\n    \"source\": \"iana\"\n  },\n  \"application/cose-key\": {\n    \"source\": \"iana\"\n  },\n  \"application/cose-key-set\": {\n    \"source\": \"iana\"\n  },\n  \"application/cpl+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"cpl\"]\n  },\n  \"application/csrattrs\": {\n    \"source\": \"iana\"\n  },\n  \"application/csta+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/cstadata+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/csvm+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/cu-seeme\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"cu\"]\n  },\n  \"application/cwt\": {\n    \"source\": \"iana\"\n  },\n  \"application/cybercash\": {\n    \"source\": \"iana\"\n  },\n  \"application/dart\": {\n    \"compressible\": true\n  },\n  \"application/dash+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"mpd\"]\n  },\n  \"application/dash-patch+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"mpp\"]\n  },\n  \"application/dashdelta\": {\n    \"source\": \"iana\"\n  },\n  \"application/davmount+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"davmount\"]\n  },\n  \"application/dca-rft\": {\n    \"source\": \"iana\"\n  },\n  \"application/dcd\": {\n    \"source\": \"iana\"\n  },\n  \"application/dec-dx\": {\n    \"source\": \"iana\"\n  },\n  \"application/dialog-info+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/dicom\": {\n    \"source\": \"iana\"\n  },\n  \"application/dicom+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/dicom+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/dii\": {\n    \"source\": \"iana\"\n  },\n  \"application/dit\": {\n    \"source\": \"iana\"\n  },\n  \"application/dns\": {\n    \"source\": \"iana\"\n  },\n  \"application/dns+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/dns-message\": {\n    \"source\": \"iana\"\n  },\n  \"application/docbook+xml\": {\n    \"source\": \"apache\",\n    \"compressible\": true,\n    \"extensions\": [\"dbk\"]\n  },\n  \"application/dots+cbor\": {\n    \"source\": \"iana\"\n  },\n  \"application/dskpp+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/dssc+der\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"dssc\"]\n  },\n  \"application/dssc+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"xdssc\"]\n  },\n  \"application/dvcs\": {\n    \"source\": \"iana\"\n  },\n  \"application/ecmascript\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"es\",\"ecma\"]\n  },\n  \"application/edi-consent\": {\n    \"source\": \"iana\"\n  },\n  \"application/edi-x12\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/edifact\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/efi\": {\n    \"source\": \"iana\"\n  },\n  \"application/elm+json\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true\n  },\n  \"application/elm+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/emergencycalldata.cap+xml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true\n  },\n  \"application/emergencycalldata.comment+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/emergencycalldata.control+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/emergencycalldata.deviceinfo+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/emergencycalldata.ecall.msd\": {\n    \"source\": \"iana\"\n  },\n  \"application/emergencycalldata.providerinfo+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/emergencycalldata.serviceinfo+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/emergencycalldata.subscriberinfo+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/emergencycalldata.veds+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/emma+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"emma\"]\n  },\n  \"application/emotionml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"emotionml\"]\n  },\n  \"application/encaprtp\": {\n    \"source\": \"iana\"\n  },\n  \"application/epp+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/epub+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"epub\"]\n  },\n  \"application/eshop\": {\n    \"source\": \"iana\"\n  },\n  \"application/exi\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"exi\"]\n  },\n  \"application/expect-ct-report+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/express\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"exp\"]\n  },\n  \"application/fastinfoset\": {\n    \"source\": \"iana\"\n  },\n  \"application/fastsoap\": {\n    \"source\": \"iana\"\n  },\n  \"application/fdt+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"fdt\"]\n  },\n  \"application/fhir+json\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true\n  },\n  \"application/fhir+xml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true\n  },\n  \"application/fido.trusted-apps+json\": {\n    \"compressible\": true\n  },\n  \"application/fits\": {\n    \"source\": \"iana\"\n  },\n  \"application/flexfec\": {\n    \"source\": \"iana\"\n  },\n  \"application/font-sfnt\": {\n    \"source\": \"iana\"\n  },\n  \"application/font-tdpfr\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"pfr\"]\n  },\n  \"application/font-woff\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/framework-attributes+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/geo+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"geojson\"]\n  },\n  \"application/geo+json-seq\": {\n    \"source\": \"iana\"\n  },\n  \"application/geopackage+sqlite3\": {\n    \"source\": \"iana\"\n  },\n  \"application/geoxacml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/gltf-buffer\": {\n    \"source\": \"iana\"\n  },\n  \"application/gml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"gml\"]\n  },\n  \"application/gpx+xml\": {\n    \"source\": \"apache\",\n    \"compressible\": true,\n    \"extensions\": [\"gpx\"]\n  },\n  \"application/gxf\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"gxf\"]\n  },\n  \"application/gzip\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"gz\"]\n  },\n  \"application/h224\": {\n    \"source\": \"iana\"\n  },\n  \"application/held+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/hjson\": {\n    \"extensions\": [\"hjson\"]\n  },\n  \"application/http\": {\n    \"source\": \"iana\"\n  },\n  \"application/hyperstudio\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"stk\"]\n  },\n  \"application/ibe-key-request+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/ibe-pkg-reply+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/ibe-pp-data\": {\n    \"source\": \"iana\"\n  },\n  \"application/iges\": {\n    \"source\": \"iana\"\n  },\n  \"application/im-iscomposing+xml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true\n  },\n  \"application/index\": {\n    \"source\": \"iana\"\n  },\n  \"application/index.cmd\": {\n    \"source\": \"iana\"\n  },\n  \"application/index.obj\": {\n    \"source\": \"iana\"\n  },\n  \"application/index.response\": {\n    \"source\": \"iana\"\n  },\n  \"application/index.vnd\": {\n    \"source\": \"iana\"\n  },\n  \"application/inkml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"ink\",\"inkml\"]\n  },\n  \"application/iotp\": {\n    \"source\": \"iana\"\n  },\n  \"application/ipfix\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ipfix\"]\n  },\n  \"application/ipp\": {\n    \"source\": \"iana\"\n  },\n  \"application/isup\": {\n    \"source\": \"iana\"\n  },\n  \"application/its+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"its\"]\n  },\n  \"application/java-archive\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"jar\",\"war\",\"ear\"]\n  },\n  \"application/java-serialized-object\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"ser\"]\n  },\n  \"application/java-vm\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"class\"]\n  },\n  \"application/javascript\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true,\n    \"extensions\": [\"js\",\"mjs\"]\n  },\n  \"application/jf2feed+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/jose\": {\n    \"source\": \"iana\"\n  },\n  \"application/jose+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/jrd+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/jscalendar+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/json\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true,\n    \"extensions\": [\"json\",\"map\"]\n  },\n  \"application/json-patch+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/json-seq\": {\n    \"source\": \"iana\"\n  },\n  \"application/json5\": {\n    \"extensions\": [\"json5\"]\n  },\n  \"application/jsonml+json\": {\n    \"source\": \"apache\",\n    \"compressible\": true,\n    \"extensions\": [\"jsonml\"]\n  },\n  \"application/jwk+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/jwk-set+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/jwt\": {\n    \"source\": \"iana\"\n  },\n  \"application/kpml-request+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/kpml-response+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/ld+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"jsonld\"]\n  },\n  \"application/lgr+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"lgr\"]\n  },\n  \"application/link-format\": {\n    \"source\": \"iana\"\n  },\n  \"application/load-control+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/lost+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"lostxml\"]\n  },\n  \"application/lostsync+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/lpf+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/lxf\": {\n    \"source\": \"iana\"\n  },\n  \"application/mac-binhex40\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"hqx\"]\n  },\n  \"application/mac-compactpro\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"cpt\"]\n  },\n  \"application/macwriteii\": {\n    \"source\": \"iana\"\n  },\n  \"application/mads+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"mads\"]\n  },\n  \"application/manifest+json\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true,\n    \"extensions\": [\"webmanifest\"]\n  },\n  \"application/marc\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mrc\"]\n  },\n  \"application/marcxml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"mrcx\"]\n  },\n  \"application/mathematica\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ma\",\"nb\",\"mb\"]\n  },\n  \"application/mathml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"mathml\"]\n  },\n  \"application/mathml-content+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/mathml-presentation+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/mbms-associated-procedure-description+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/mbms-deregister+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/mbms-envelope+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/mbms-msk+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/mbms-msk-response+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/mbms-protection-description+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/mbms-reception-report+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/mbms-register+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/mbms-register-response+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/mbms-schedule+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/mbms-user-service-description+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/mbox\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mbox\"]\n  },\n  \"application/media-policy-dataset+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"mpf\"]\n  },\n  \"application/media_control+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/mediaservercontrol+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"mscml\"]\n  },\n  \"application/merge-patch+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/metalink+xml\": {\n    \"source\": \"apache\",\n    \"compressible\": true,\n    \"extensions\": [\"metalink\"]\n  },\n  \"application/metalink4+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"meta4\"]\n  },\n  \"application/mets+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"mets\"]\n  },\n  \"application/mf4\": {\n    \"source\": \"iana\"\n  },\n  \"application/mikey\": {\n    \"source\": \"iana\"\n  },\n  \"application/mipc\": {\n    \"source\": \"iana\"\n  },\n  \"application/missing-blocks+cbor-seq\": {\n    \"source\": \"iana\"\n  },\n  \"application/mmt-aei+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"maei\"]\n  },\n  \"application/mmt-usd+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"musd\"]\n  },\n  \"application/mods+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"mods\"]\n  },\n  \"application/moss-keys\": {\n    \"source\": \"iana\"\n  },\n  \"application/moss-signature\": {\n    \"source\": \"iana\"\n  },\n  \"application/mosskey-data\": {\n    \"source\": \"iana\"\n  },\n  \"application/mosskey-request\": {\n    \"source\": \"iana\"\n  },\n  \"application/mp21\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"m21\",\"mp21\"]\n  },\n  \"application/mp4\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mp4s\",\"m4p\"]\n  },\n  \"application/mpeg4-generic\": {\n    \"source\": \"iana\"\n  },\n  \"application/mpeg4-iod\": {\n    \"source\": \"iana\"\n  },\n  \"application/mpeg4-iod-xmt\": {\n    \"source\": \"iana\"\n  },\n  \"application/mrb-consumer+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/mrb-publish+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/msc-ivr+xml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true\n  },\n  \"application/msc-mixer+xml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true\n  },\n  \"application/msword\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"doc\",\"dot\"]\n  },\n  \"application/mud+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/multipart-core\": {\n    \"source\": \"iana\"\n  },\n  \"application/mxf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mxf\"]\n  },\n  \"application/n-quads\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"nq\"]\n  },\n  \"application/n-triples\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"nt\"]\n  },\n  \"application/nasdata\": {\n    \"source\": \"iana\"\n  },\n  \"application/news-checkgroups\": {\n    \"source\": \"iana\",\n    \"charset\": \"US-ASCII\"\n  },\n  \"application/news-groupinfo\": {\n    \"source\": \"iana\",\n    \"charset\": \"US-ASCII\"\n  },\n  \"application/news-transmission\": {\n    \"source\": \"iana\"\n  },\n  \"application/nlsml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/node\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"cjs\"]\n  },\n  \"application/nss\": {\n    \"source\": \"iana\"\n  },\n  \"application/oauth-authz-req+jwt\": {\n    \"source\": \"iana\"\n  },\n  \"application/oblivious-dns-message\": {\n    \"source\": \"iana\"\n  },\n  \"application/ocsp-request\": {\n    \"source\": \"iana\"\n  },\n  \"application/ocsp-response\": {\n    \"source\": \"iana\"\n  },\n  \"application/octet-stream\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"bin\",\"dms\",\"lrf\",\"mar\",\"so\",\"dist\",\"distz\",\"pkg\",\"bpk\",\"dump\",\"elc\",\"deploy\",\"exe\",\"dll\",\"deb\",\"dmg\",\"iso\",\"img\",\"msi\",\"msp\",\"msm\",\"buffer\"]\n  },\n  \"application/oda\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"oda\"]\n  },\n  \"application/odm+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/odx\": {\n    \"source\": \"iana\"\n  },\n  \"application/oebps-package+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"opf\"]\n  },\n  \"application/ogg\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"ogx\"]\n  },\n  \"application/omdoc+xml\": {\n    \"source\": \"apache\",\n    \"compressible\": true,\n    \"extensions\": [\"omdoc\"]\n  },\n  \"application/onenote\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"onetoc\",\"onetoc2\",\"onetmp\",\"onepkg\"]\n  },\n  \"application/opc-nodeset+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/oscore\": {\n    \"source\": \"iana\"\n  },\n  \"application/oxps\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"oxps\"]\n  },\n  \"application/p21\": {\n    \"source\": \"iana\"\n  },\n  \"application/p21+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/p2p-overlay+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"relo\"]\n  },\n  \"application/parityfec\": {\n    \"source\": \"iana\"\n  },\n  \"application/passport\": {\n    \"source\": \"iana\"\n  },\n  \"application/patch-ops-error+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"xer\"]\n  },\n  \"application/pdf\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"pdf\"]\n  },\n  \"application/pdx\": {\n    \"source\": \"iana\"\n  },\n  \"application/pem-certificate-chain\": {\n    \"source\": \"iana\"\n  },\n  \"application/pgp-encrypted\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"pgp\"]\n  },\n  \"application/pgp-keys\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"asc\"]\n  },\n  \"application/pgp-signature\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"asc\",\"sig\"]\n  },\n  \"application/pics-rules\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"prf\"]\n  },\n  \"application/pidf+xml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true\n  },\n  \"application/pidf-diff+xml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true\n  },\n  \"application/pkcs10\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"p10\"]\n  },\n  \"application/pkcs12\": {\n    \"source\": \"iana\"\n  },\n  \"application/pkcs7-mime\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"p7m\",\"p7c\"]\n  },\n  \"application/pkcs7-signature\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"p7s\"]\n  },\n  \"application/pkcs8\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"p8\"]\n  },\n  \"application/pkcs8-encrypted\": {\n    \"source\": \"iana\"\n  },\n  \"application/pkix-attr-cert\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ac\"]\n  },\n  \"application/pkix-cert\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"cer\"]\n  },\n  \"application/pkix-crl\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"crl\"]\n  },\n  \"application/pkix-pkipath\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"pkipath\"]\n  },\n  \"application/pkixcmp\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"pki\"]\n  },\n  \"application/pls+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"pls\"]\n  },\n  \"application/poc-settings+xml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true\n  },\n  \"application/postscript\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"ai\",\"eps\",\"ps\"]\n  },\n  \"application/ppsp-tracker+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/problem+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/problem+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/provenance+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"provx\"]\n  },\n  \"application/prs.alvestrand.titrax-sheet\": {\n    \"source\": \"iana\"\n  },\n  \"application/prs.cww\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"cww\"]\n  },\n  \"application/prs.cyn\": {\n    \"source\": \"iana\",\n    \"charset\": \"7-BIT\"\n  },\n  \"application/prs.hpub+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/prs.nprend\": {\n    \"source\": \"iana\"\n  },\n  \"application/prs.plucker\": {\n    \"source\": \"iana\"\n  },\n  \"application/prs.rdf-xml-crypt\": {\n    \"source\": \"iana\"\n  },\n  \"application/prs.xsf+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/pskc+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"pskcxml\"]\n  },\n  \"application/pvd+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/qsig\": {\n    \"source\": \"iana\"\n  },\n  \"application/raml+yaml\": {\n    \"compressible\": true,\n    \"extensions\": [\"raml\"]\n  },\n  \"application/raptorfec\": {\n    \"source\": \"iana\"\n  },\n  \"application/rdap+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/rdf+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"rdf\",\"owl\"]\n  },\n  \"application/reginfo+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"rif\"]\n  },\n  \"application/relax-ng-compact-syntax\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"rnc\"]\n  },\n  \"application/remote-printing\": {\n    \"source\": \"iana\"\n  },\n  \"application/reputon+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/resource-lists+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"rl\"]\n  },\n  \"application/resource-lists-diff+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"rld\"]\n  },\n  \"application/rfc+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/riscos\": {\n    \"source\": \"iana\"\n  },\n  \"application/rlmi+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/rls-services+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"rs\"]\n  },\n  \"application/route-apd+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"rapd\"]\n  },\n  \"application/route-s-tsid+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"sls\"]\n  },\n  \"application/route-usd+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"rusd\"]\n  },\n  \"application/rpki-ghostbusters\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"gbr\"]\n  },\n  \"application/rpki-manifest\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mft\"]\n  },\n  \"application/rpki-publication\": {\n    \"source\": \"iana\"\n  },\n  \"application/rpki-roa\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"roa\"]\n  },\n  \"application/rpki-updown\": {\n    \"source\": \"iana\"\n  },\n  \"application/rsd+xml\": {\n    \"source\": \"apache\",\n    \"compressible\": true,\n    \"extensions\": [\"rsd\"]\n  },\n  \"application/rss+xml\": {\n    \"source\": \"apache\",\n    \"compressible\": true,\n    \"extensions\": [\"rss\"]\n  },\n  \"application/rtf\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"rtf\"]\n  },\n  \"application/rtploopback\": {\n    \"source\": \"iana\"\n  },\n  \"application/rtx\": {\n    \"source\": \"iana\"\n  },\n  \"application/samlassertion+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/samlmetadata+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/sarif+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/sarif-external-properties+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/sbe\": {\n    \"source\": \"iana\"\n  },\n  \"application/sbml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"sbml\"]\n  },\n  \"application/scaip+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/scim+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/scvp-cv-request\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"scq\"]\n  },\n  \"application/scvp-cv-response\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"scs\"]\n  },\n  \"application/scvp-vp-request\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"spq\"]\n  },\n  \"application/scvp-vp-response\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"spp\"]\n  },\n  \"application/sdp\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"sdp\"]\n  },\n  \"application/secevent+jwt\": {\n    \"source\": \"iana\"\n  },\n  \"application/senml+cbor\": {\n    \"source\": \"iana\"\n  },\n  \"application/senml+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/senml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"senmlx\"]\n  },\n  \"application/senml-etch+cbor\": {\n    \"source\": \"iana\"\n  },\n  \"application/senml-etch+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/senml-exi\": {\n    \"source\": \"iana\"\n  },\n  \"application/sensml+cbor\": {\n    \"source\": \"iana\"\n  },\n  \"application/sensml+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/sensml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"sensmlx\"]\n  },\n  \"application/sensml-exi\": {\n    \"source\": \"iana\"\n  },\n  \"application/sep+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/sep-exi\": {\n    \"source\": \"iana\"\n  },\n  \"application/session-info\": {\n    \"source\": \"iana\"\n  },\n  \"application/set-payment\": {\n    \"source\": \"iana\"\n  },\n  \"application/set-payment-initiation\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"setpay\"]\n  },\n  \"application/set-registration\": {\n    \"source\": \"iana\"\n  },\n  \"application/set-registration-initiation\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"setreg\"]\n  },\n  \"application/sgml\": {\n    \"source\": \"iana\"\n  },\n  \"application/sgml-open-catalog\": {\n    \"source\": \"iana\"\n  },\n  \"application/shf+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"shf\"]\n  },\n  \"application/sieve\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"siv\",\"sieve\"]\n  },\n  \"application/simple-filter+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/simple-message-summary\": {\n    \"source\": \"iana\"\n  },\n  \"application/simplesymbolcontainer\": {\n    \"source\": \"iana\"\n  },\n  \"application/sipc\": {\n    \"source\": \"iana\"\n  },\n  \"application/slate\": {\n    \"source\": \"iana\"\n  },\n  \"application/smil\": {\n    \"source\": \"iana\"\n  },\n  \"application/smil+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"smi\",\"smil\"]\n  },\n  \"application/smpte336m\": {\n    \"source\": \"iana\"\n  },\n  \"application/soap+fastinfoset\": {\n    \"source\": \"iana\"\n  },\n  \"application/soap+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/sparql-query\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"rq\"]\n  },\n  \"application/sparql-results+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"srx\"]\n  },\n  \"application/spdx+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/spirits-event+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/sql\": {\n    \"source\": \"iana\"\n  },\n  \"application/srgs\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"gram\"]\n  },\n  \"application/srgs+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"grxml\"]\n  },\n  \"application/sru+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"sru\"]\n  },\n  \"application/ssdl+xml\": {\n    \"source\": \"apache\",\n    \"compressible\": true,\n    \"extensions\": [\"ssdl\"]\n  },\n  \"application/ssml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"ssml\"]\n  },\n  \"application/stix+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/swid+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"swidtag\"]\n  },\n  \"application/tamp-apex-update\": {\n    \"source\": \"iana\"\n  },\n  \"application/tamp-apex-update-confirm\": {\n    \"source\": \"iana\"\n  },\n  \"application/tamp-community-update\": {\n    \"source\": \"iana\"\n  },\n  \"application/tamp-community-update-confirm\": {\n    \"source\": \"iana\"\n  },\n  \"application/tamp-error\": {\n    \"source\": \"iana\"\n  },\n  \"application/tamp-sequence-adjust\": {\n    \"source\": \"iana\"\n  },\n  \"application/tamp-sequence-adjust-confirm\": {\n    \"source\": \"iana\"\n  },\n  \"application/tamp-status-query\": {\n    \"source\": \"iana\"\n  },\n  \"application/tamp-status-response\": {\n    \"source\": \"iana\"\n  },\n  \"application/tamp-update\": {\n    \"source\": \"iana\"\n  },\n  \"application/tamp-update-confirm\": {\n    \"source\": \"iana\"\n  },\n  \"application/tar\": {\n    \"compressible\": true\n  },\n  \"application/taxii+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/td+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/tei+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"tei\",\"teicorpus\"]\n  },\n  \"application/tetra_isi\": {\n    \"source\": \"iana\"\n  },\n  \"application/thraud+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"tfi\"]\n  },\n  \"application/timestamp-query\": {\n    \"source\": \"iana\"\n  },\n  \"application/timestamp-reply\": {\n    \"source\": \"iana\"\n  },\n  \"application/timestamped-data\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"tsd\"]\n  },\n  \"application/tlsrpt+gzip\": {\n    \"source\": \"iana\"\n  },\n  \"application/tlsrpt+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/tnauthlist\": {\n    \"source\": \"iana\"\n  },\n  \"application/token-introspection+jwt\": {\n    \"source\": \"iana\"\n  },\n  \"application/toml\": {\n    \"compressible\": true,\n    \"extensions\": [\"toml\"]\n  },\n  \"application/trickle-ice-sdpfrag\": {\n    \"source\": \"iana\"\n  },\n  \"application/trig\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"trig\"]\n  },\n  \"application/ttml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"ttml\"]\n  },\n  \"application/tve-trigger\": {\n    \"source\": \"iana\"\n  },\n  \"application/tzif\": {\n    \"source\": \"iana\"\n  },\n  \"application/tzif-leap\": {\n    \"source\": \"iana\"\n  },\n  \"application/ubjson\": {\n    \"compressible\": false,\n    \"extensions\": [\"ubj\"]\n  },\n  \"application/ulpfec\": {\n    \"source\": \"iana\"\n  },\n  \"application/urc-grpsheet+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/urc-ressheet+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"rsheet\"]\n  },\n  \"application/urc-targetdesc+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"td\"]\n  },\n  \"application/urc-uisocketdesc+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vcard+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vcard+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vemmi\": {\n    \"source\": \"iana\"\n  },\n  \"application/vividence.scriptfile\": {\n    \"source\": \"apache\"\n  },\n  \"application/vnd.1000minds.decision-model+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"1km\"]\n  },\n  \"application/vnd.3gpp-prose+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp-prose-pc3ch+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp-v2x-local-service-information\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.3gpp.5gnas\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.3gpp.access-transfer-events+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.bsf+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.gmop+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.gtpc\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.3gpp.interworking-data\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.3gpp.lpp\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.3gpp.mc-signalling-ear\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.3gpp.mcdata-affiliation-command+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcdata-info+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcdata-payload\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.3gpp.mcdata-service-config+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcdata-signalling\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.3gpp.mcdata-ue-config+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcdata-user-profile+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcptt-affiliation-command+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcptt-floor-request+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcptt-info+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcptt-location-info+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcptt-mbms-usage-info+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcptt-service-config+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcptt-signed+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcptt-ue-config+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcptt-ue-init-config+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcptt-user-profile+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcvideo-affiliation-command+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcvideo-affiliation-info+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcvideo-info+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcvideo-location-info+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcvideo-mbms-usage-info+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcvideo-service-config+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcvideo-transmission-request+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcvideo-ue-config+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mcvideo-user-profile+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.mid-call+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.ngap\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.3gpp.pfcp\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.3gpp.pic-bw-large\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"plb\"]\n  },\n  \"application/vnd.3gpp.pic-bw-small\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"psb\"]\n  },\n  \"application/vnd.3gpp.pic-bw-var\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"pvb\"]\n  },\n  \"application/vnd.3gpp.s1ap\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.3gpp.sms\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.3gpp.sms+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.srvcc-ext+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.srvcc-info+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.state-and-event-info+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp.ussd+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp2.bcmcsinfo+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.3gpp2.sms\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.3gpp2.tcap\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"tcap\"]\n  },\n  \"application/vnd.3lightssoftware.imagescal\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.3m.post-it-notes\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"pwn\"]\n  },\n  \"application/vnd.accpac.simply.aso\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"aso\"]\n  },\n  \"application/vnd.accpac.simply.imp\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"imp\"]\n  },\n  \"application/vnd.acucobol\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"acu\"]\n  },\n  \"application/vnd.acucorp\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"atc\",\"acutc\"]\n  },\n  \"application/vnd.adobe.air-application-installer-package+zip\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"air\"]\n  },\n  \"application/vnd.adobe.flash.movie\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.adobe.formscentral.fcdt\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"fcdt\"]\n  },\n  \"application/vnd.adobe.fxp\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"fxp\",\"fxpl\"]\n  },\n  \"application/vnd.adobe.partial-upload\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.adobe.xdp+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"xdp\"]\n  },\n  \"application/vnd.adobe.xfdf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"xfdf\"]\n  },\n  \"application/vnd.aether.imp\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.afpc.afplinedata\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.afpc.afplinedata-pagedef\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.afpc.cmoca-cmresource\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.afpc.foca-charset\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.afpc.foca-codedfont\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.afpc.foca-codepage\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.afpc.modca\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.afpc.modca-cmtable\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.afpc.modca-formdef\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.afpc.modca-mediummap\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.afpc.modca-objectcontainer\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.afpc.modca-overlay\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.afpc.modca-pagesegment\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.age\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"age\"]\n  },\n  \"application/vnd.ah-barcode\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ahead.space\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ahead\"]\n  },\n  \"application/vnd.airzip.filesecure.azf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"azf\"]\n  },\n  \"application/vnd.airzip.filesecure.azs\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"azs\"]\n  },\n  \"application/vnd.amadeus+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.amazon.ebook\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"azw\"]\n  },\n  \"application/vnd.amazon.mobi8-ebook\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.americandynamics.acc\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"acc\"]\n  },\n  \"application/vnd.amiga.ami\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ami\"]\n  },\n  \"application/vnd.amundsen.maze+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.android.ota\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.android.package-archive\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"apk\"]\n  },\n  \"application/vnd.anki\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.anser-web-certificate-issue-initiation\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"cii\"]\n  },\n  \"application/vnd.anser-web-funds-transfer-initiation\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"fti\"]\n  },\n  \"application/vnd.antix.game-component\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"atx\"]\n  },\n  \"application/vnd.apache.arrow.file\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.apache.arrow.stream\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.apache.thrift.binary\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.apache.thrift.compact\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.apache.thrift.json\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.api+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.aplextor.warrp+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.apothekende.reservation+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.apple.installer+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"mpkg\"]\n  },\n  \"application/vnd.apple.keynote\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"key\"]\n  },\n  \"application/vnd.apple.mpegurl\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"m3u8\"]\n  },\n  \"application/vnd.apple.numbers\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"numbers\"]\n  },\n  \"application/vnd.apple.pages\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"pages\"]\n  },\n  \"application/vnd.apple.pkpass\": {\n    \"compressible\": false,\n    \"extensions\": [\"pkpass\"]\n  },\n  \"application/vnd.arastra.swi\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.aristanetworks.swi\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"swi\"]\n  },\n  \"application/vnd.artisan+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.artsquare\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.astraea-software.iota\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"iota\"]\n  },\n  \"application/vnd.audiograph\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"aep\"]\n  },\n  \"application/vnd.autopackage\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.avalon+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.avistar+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.balsamiq.bmml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"bmml\"]\n  },\n  \"application/vnd.balsamiq.bmpr\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.banana-accounting\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.bbf.usp.error\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.bbf.usp.msg\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.bbf.usp.msg+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.bekitzur-stech+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.bint.med-content\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.biopax.rdf+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.blink-idb-value-wrapper\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.blueice.multipass\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mpm\"]\n  },\n  \"application/vnd.bluetooth.ep.oob\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.bluetooth.le.oob\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.bmi\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"bmi\"]\n  },\n  \"application/vnd.bpf\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.bpf3\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.businessobjects\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"rep\"]\n  },\n  \"application/vnd.byu.uapi+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.cab-jscript\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.canon-cpdl\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.canon-lips\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.capasystems-pg+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.cendio.thinlinc.clientconf\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.century-systems.tcp_stream\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.chemdraw+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"cdxml\"]\n  },\n  \"application/vnd.chess-pgn\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.chipnuts.karaoke-mmd\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mmd\"]\n  },\n  \"application/vnd.ciedi\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.cinderella\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"cdy\"]\n  },\n  \"application/vnd.cirpack.isdn-ext\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.citationstyles.style+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"csl\"]\n  },\n  \"application/vnd.claymore\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"cla\"]\n  },\n  \"application/vnd.cloanto.rp9\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"rp9\"]\n  },\n  \"application/vnd.clonk.c4group\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"c4g\",\"c4d\",\"c4f\",\"c4p\",\"c4u\"]\n  },\n  \"application/vnd.cluetrust.cartomobile-config\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"c11amc\"]\n  },\n  \"application/vnd.cluetrust.cartomobile-config-pkg\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"c11amz\"]\n  },\n  \"application/vnd.coffeescript\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.collabio.xodocuments.document\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.collabio.xodocuments.document-template\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.collabio.xodocuments.presentation\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.collabio.xodocuments.presentation-template\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.collabio.xodocuments.spreadsheet\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.collabio.xodocuments.spreadsheet-template\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.collection+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.collection.doc+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.collection.next+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.comicbook+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/vnd.comicbook-rar\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.commerce-battelle\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.commonspace\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"csp\"]\n  },\n  \"application/vnd.contact.cmsg\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"cdbcmsg\"]\n  },\n  \"application/vnd.coreos.ignition+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.cosmocaller\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"cmc\"]\n  },\n  \"application/vnd.crick.clicker\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"clkx\"]\n  },\n  \"application/vnd.crick.clicker.keyboard\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"clkk\"]\n  },\n  \"application/vnd.crick.clicker.palette\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"clkp\"]\n  },\n  \"application/vnd.crick.clicker.template\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"clkt\"]\n  },\n  \"application/vnd.crick.clicker.wordbank\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"clkw\"]\n  },\n  \"application/vnd.criticaltools.wbs+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"wbs\"]\n  },\n  \"application/vnd.cryptii.pipe+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.crypto-shade-file\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.cryptomator.encrypted\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.cryptomator.vault\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ctc-posml\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"pml\"]\n  },\n  \"application/vnd.ctct.ws+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.cups-pdf\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.cups-postscript\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.cups-ppd\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ppd\"]\n  },\n  \"application/vnd.cups-raster\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.cups-raw\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.curl\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.curl.car\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"car\"]\n  },\n  \"application/vnd.curl.pcurl\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"pcurl\"]\n  },\n  \"application/vnd.cyan.dean.root+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.cybank\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.cyclonedx+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.cyclonedx+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.d2l.coursepackage1p0+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/vnd.d3m-dataset\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.d3m-problem\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.dart\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"dart\"]\n  },\n  \"application/vnd.data-vision.rdz\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"rdz\"]\n  },\n  \"application/vnd.datapackage+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.dataresource+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.dbf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"dbf\"]\n  },\n  \"application/vnd.debian.binary-package\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.dece.data\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"uvf\",\"uvvf\",\"uvd\",\"uvvd\"]\n  },\n  \"application/vnd.dece.ttml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"uvt\",\"uvvt\"]\n  },\n  \"application/vnd.dece.unspecified\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"uvx\",\"uvvx\"]\n  },\n  \"application/vnd.dece.zip\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"uvz\",\"uvvz\"]\n  },\n  \"application/vnd.denovo.fcselayout-link\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"fe_launch\"]\n  },\n  \"application/vnd.desmume.movie\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.dir-bi.plate-dl-nosuffix\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.dm.delegation+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.dna\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"dna\"]\n  },\n  \"application/vnd.document+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.dolby.mlp\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"mlp\"]\n  },\n  \"application/vnd.dolby.mobile.1\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.dolby.mobile.2\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.doremir.scorecloud-binary-document\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.dpgraph\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"dpg\"]\n  },\n  \"application/vnd.dreamfactory\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"dfac\"]\n  },\n  \"application/vnd.drive+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.ds-keypoint\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"kpxx\"]\n  },\n  \"application/vnd.dtg.local\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.dtg.local.flash\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.dtg.local.html\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.dvb.ait\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ait\"]\n  },\n  \"application/vnd.dvb.dvbisl+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.dvb.dvbj\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.dvb.esgcontainer\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.dvb.ipdcdftnotifaccess\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.dvb.ipdcesgaccess\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.dvb.ipdcesgaccess2\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.dvb.ipdcesgpdd\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.dvb.ipdcroaming\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.dvb.iptv.alfec-base\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.dvb.iptv.alfec-enhancement\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.dvb.notif-aggregate-root+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.dvb.notif-container+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.dvb.notif-generic+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.dvb.notif-ia-msglist+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.dvb.notif-ia-registration-request+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.dvb.notif-ia-registration-response+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.dvb.notif-init+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.dvb.pfr\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.dvb.service\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"svc\"]\n  },\n  \"application/vnd.dxr\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.dynageo\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"geo\"]\n  },\n  \"application/vnd.dzr\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.easykaraoke.cdgdownload\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ecdis-update\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ecip.rlp\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.eclipse.ditto+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.ecowin.chart\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mag\"]\n  },\n  \"application/vnd.ecowin.filerequest\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ecowin.fileupdate\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ecowin.series\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ecowin.seriesrequest\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ecowin.seriesupdate\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.efi.img\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.efi.iso\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.emclient.accessrequest+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.enliven\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"nml\"]\n  },\n  \"application/vnd.enphase.envoy\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.eprints.data+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.epson.esf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"esf\"]\n  },\n  \"application/vnd.epson.msf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"msf\"]\n  },\n  \"application/vnd.epson.quickanime\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"qam\"]\n  },\n  \"application/vnd.epson.salt\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"slt\"]\n  },\n  \"application/vnd.epson.ssf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ssf\"]\n  },\n  \"application/vnd.ericsson.quickcall\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.espass-espass+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/vnd.eszigno3+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"es3\",\"et3\"]\n  },\n  \"application/vnd.etsi.aoc+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.etsi.asic-e+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/vnd.etsi.asic-s+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/vnd.etsi.cug+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.etsi.iptvcommand+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.etsi.iptvdiscovery+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.etsi.iptvprofile+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.etsi.iptvsad-bc+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.etsi.iptvsad-cod+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.etsi.iptvsad-npvr+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.etsi.iptvservice+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.etsi.iptvsync+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.etsi.iptvueprofile+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.etsi.mcid+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.etsi.mheg5\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.etsi.overload-control-policy-dataset+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.etsi.pstn+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.etsi.sci+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.etsi.simservs+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.etsi.timestamp-token\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.etsi.tsl+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.etsi.tsl.der\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.eu.kasparian.car+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.eudora.data\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.evolv.ecig.profile\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.evolv.ecig.settings\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.evolv.ecig.theme\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.exstream-empower+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/vnd.exstream-package\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ezpix-album\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ez2\"]\n  },\n  \"application/vnd.ezpix-package\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ez3\"]\n  },\n  \"application/vnd.f-secure.mobile\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.familysearch.gedcom+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/vnd.fastcopy-disk-image\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.fdf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"fdf\"]\n  },\n  \"application/vnd.fdsn.mseed\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mseed\"]\n  },\n  \"application/vnd.fdsn.seed\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"seed\",\"dataless\"]\n  },\n  \"application/vnd.ffsns\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ficlab.flb+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/vnd.filmit.zfc\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.fints\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.firemonkeys.cloudcell\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.flographit\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"gph\"]\n  },\n  \"application/vnd.fluxtime.clip\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ftc\"]\n  },\n  \"application/vnd.font-fontforge-sfd\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.framemaker\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"fm\",\"frame\",\"maker\",\"book\"]\n  },\n  \"application/vnd.frogans.fnc\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"fnc\"]\n  },\n  \"application/vnd.frogans.ltf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ltf\"]\n  },\n  \"application/vnd.fsc.weblaunch\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"fsc\"]\n  },\n  \"application/vnd.fujifilm.fb.docuworks\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.fujifilm.fb.docuworks.binder\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.fujifilm.fb.docuworks.container\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.fujifilm.fb.jfi+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.fujitsu.oasys\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"oas\"]\n  },\n  \"application/vnd.fujitsu.oasys2\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"oa2\"]\n  },\n  \"application/vnd.fujitsu.oasys3\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"oa3\"]\n  },\n  \"application/vnd.fujitsu.oasysgp\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"fg5\"]\n  },\n  \"application/vnd.fujitsu.oasysprs\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"bh2\"]\n  },\n  \"application/vnd.fujixerox.art-ex\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.fujixerox.art4\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.fujixerox.ddd\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ddd\"]\n  },\n  \"application/vnd.fujixerox.docuworks\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"xdw\"]\n  },\n  \"application/vnd.fujixerox.docuworks.binder\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"xbd\"]\n  },\n  \"application/vnd.fujixerox.docuworks.container\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.fujixerox.hbpl\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.fut-misnet\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.futoin+cbor\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.futoin+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.fuzzysheet\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"fzs\"]\n  },\n  \"application/vnd.genomatix.tuxedo\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"txd\"]\n  },\n  \"application/vnd.gentics.grd+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.geo+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.geocube+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.geogebra.file\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ggb\"]\n  },\n  \"application/vnd.geogebra.slides\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.geogebra.tool\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ggt\"]\n  },\n  \"application/vnd.geometry-explorer\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"gex\",\"gre\"]\n  },\n  \"application/vnd.geonext\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"gxt\"]\n  },\n  \"application/vnd.geoplan\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"g2w\"]\n  },\n  \"application/vnd.geospace\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"g3w\"]\n  },\n  \"application/vnd.gerber\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.globalplatform.card-content-mgt\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.globalplatform.card-content-mgt-response\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.gmx\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"gmx\"]\n  },\n  \"application/vnd.google-apps.document\": {\n    \"compressible\": false,\n    \"extensions\": [\"gdoc\"]\n  },\n  \"application/vnd.google-apps.presentation\": {\n    \"compressible\": false,\n    \"extensions\": [\"gslides\"]\n  },\n  \"application/vnd.google-apps.spreadsheet\": {\n    \"compressible\": false,\n    \"extensions\": [\"gsheet\"]\n  },\n  \"application/vnd.google-earth.kml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"kml\"]\n  },\n  \"application/vnd.google-earth.kmz\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"kmz\"]\n  },\n  \"application/vnd.gov.sk.e-form+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.gov.sk.e-form+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/vnd.gov.sk.xmldatacontainer+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.grafeq\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"gqf\",\"gqs\"]\n  },\n  \"application/vnd.gridmp\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.groove-account\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"gac\"]\n  },\n  \"application/vnd.groove-help\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ghf\"]\n  },\n  \"application/vnd.groove-identity-message\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"gim\"]\n  },\n  \"application/vnd.groove-injector\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"grv\"]\n  },\n  \"application/vnd.groove-tool-message\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"gtm\"]\n  },\n  \"application/vnd.groove-tool-template\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"tpl\"]\n  },\n  \"application/vnd.groove-vcard\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"vcg\"]\n  },\n  \"application/vnd.hal+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.hal+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"hal\"]\n  },\n  \"application/vnd.handheld-entertainment+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"zmm\"]\n  },\n  \"application/vnd.hbci\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"hbci\"]\n  },\n  \"application/vnd.hc+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.hcl-bireports\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.hdt\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.heroku+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.hhe.lesson-player\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"les\"]\n  },\n  \"application/vnd.hl7cda+xml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true\n  },\n  \"application/vnd.hl7v2+xml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true\n  },\n  \"application/vnd.hp-hpgl\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"hpgl\"]\n  },\n  \"application/vnd.hp-hpid\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"hpid\"]\n  },\n  \"application/vnd.hp-hps\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"hps\"]\n  },\n  \"application/vnd.hp-jlyt\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"jlt\"]\n  },\n  \"application/vnd.hp-pcl\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"pcl\"]\n  },\n  \"application/vnd.hp-pclxl\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"pclxl\"]\n  },\n  \"application/vnd.httphone\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.hydrostatix.sof-data\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"sfd-hdstx\"]\n  },\n  \"application/vnd.hyper+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.hyper-item+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.hyperdrive+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.hzn-3d-crossword\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ibm.afplinedata\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ibm.electronic-media\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ibm.minipay\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mpy\"]\n  },\n  \"application/vnd.ibm.modcap\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"afp\",\"listafp\",\"list3820\"]\n  },\n  \"application/vnd.ibm.rights-management\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"irm\"]\n  },\n  \"application/vnd.ibm.secure-container\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"sc\"]\n  },\n  \"application/vnd.iccprofile\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"icc\",\"icm\"]\n  },\n  \"application/vnd.ieee.1905\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.igloader\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"igl\"]\n  },\n  \"application/vnd.imagemeter.folder+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/vnd.imagemeter.image+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/vnd.immervision-ivp\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ivp\"]\n  },\n  \"application/vnd.immervision-ivu\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ivu\"]\n  },\n  \"application/vnd.ims.imsccv1p1\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ims.imsccv1p2\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ims.imsccv1p3\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ims.lis.v2.result+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.ims.lti.v2.toolconsumerprofile+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.ims.lti.v2.toolproxy+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.ims.lti.v2.toolproxy.id+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.ims.lti.v2.toolsettings+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.ims.lti.v2.toolsettings.simple+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.informedcontrol.rms+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.informix-visionary\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.infotech.project\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.infotech.project+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.innopath.wamp.notification\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.insors.igm\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"igm\"]\n  },\n  \"application/vnd.intercon.formnet\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"xpw\",\"xpx\"]\n  },\n  \"application/vnd.intergeo\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"i2g\"]\n  },\n  \"application/vnd.intertrust.digibox\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.intertrust.nncp\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.intu.qbo\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"qbo\"]\n  },\n  \"application/vnd.intu.qfx\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"qfx\"]\n  },\n  \"application/vnd.iptc.g2.catalogitem+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.iptc.g2.conceptitem+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.iptc.g2.knowledgeitem+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.iptc.g2.newsitem+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.iptc.g2.newsmessage+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.iptc.g2.packageitem+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.iptc.g2.planningitem+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.ipunplugged.rcprofile\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"rcprofile\"]\n  },\n  \"application/vnd.irepository.package+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"irp\"]\n  },\n  \"application/vnd.is-xpr\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"xpr\"]\n  },\n  \"application/vnd.isac.fcs\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"fcs\"]\n  },\n  \"application/vnd.iso11783-10+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/vnd.jam\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"jam\"]\n  },\n  \"application/vnd.japannet-directory-service\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.japannet-jpnstore-wakeup\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.japannet-payment-wakeup\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.japannet-registration\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.japannet-registration-wakeup\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.japannet-setstore-wakeup\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.japannet-verification\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.japannet-verification-wakeup\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.jcp.javame.midlet-rms\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"rms\"]\n  },\n  \"application/vnd.jisp\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"jisp\"]\n  },\n  \"application/vnd.joost.joda-archive\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"joda\"]\n  },\n  \"application/vnd.jsk.isdn-ngn\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.kahootz\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ktz\",\"ktr\"]\n  },\n  \"application/vnd.kde.karbon\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"karbon\"]\n  },\n  \"application/vnd.kde.kchart\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"chrt\"]\n  },\n  \"application/vnd.kde.kformula\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"kfo\"]\n  },\n  \"application/vnd.kde.kivio\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"flw\"]\n  },\n  \"application/vnd.kde.kontour\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"kon\"]\n  },\n  \"application/vnd.kde.kpresenter\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"kpr\",\"kpt\"]\n  },\n  \"application/vnd.kde.kspread\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ksp\"]\n  },\n  \"application/vnd.kde.kword\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"kwd\",\"kwt\"]\n  },\n  \"application/vnd.kenameaapp\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"htke\"]\n  },\n  \"application/vnd.kidspiration\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"kia\"]\n  },\n  \"application/vnd.kinar\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"kne\",\"knp\"]\n  },\n  \"application/vnd.koan\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"skp\",\"skd\",\"skt\",\"skm\"]\n  },\n  \"application/vnd.kodak-descriptor\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"sse\"]\n  },\n  \"application/vnd.las\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.las.las+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.las.las+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"lasxml\"]\n  },\n  \"application/vnd.laszip\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.leap+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.liberty-request+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.llamagraphics.life-balance.desktop\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"lbd\"]\n  },\n  \"application/vnd.llamagraphics.life-balance.exchange+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"lbe\"]\n  },\n  \"application/vnd.logipipe.circuit+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/vnd.loom\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.lotus-1-2-3\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"123\"]\n  },\n  \"application/vnd.lotus-approach\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"apr\"]\n  },\n  \"application/vnd.lotus-freelance\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"pre\"]\n  },\n  \"application/vnd.lotus-notes\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"nsf\"]\n  },\n  \"application/vnd.lotus-organizer\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"org\"]\n  },\n  \"application/vnd.lotus-screencam\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"scm\"]\n  },\n  \"application/vnd.lotus-wordpro\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"lwp\"]\n  },\n  \"application/vnd.macports.portpkg\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"portpkg\"]\n  },\n  \"application/vnd.mapbox-vector-tile\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mvt\"]\n  },\n  \"application/vnd.marlin.drm.actiontoken+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.marlin.drm.conftoken+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.marlin.drm.license+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.marlin.drm.mdcf\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.mason+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.maxar.archive.3tz+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"application/vnd.maxmind.maxmind-db\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.mcd\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mcd\"]\n  },\n  \"application/vnd.medcalcdata\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mc1\"]\n  },\n  \"application/vnd.mediastation.cdkey\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"cdkey\"]\n  },\n  \"application/vnd.meridian-slingshot\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.mfer\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mwf\"]\n  },\n  \"application/vnd.mfmp\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mfm\"]\n  },\n  \"application/vnd.micro+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.micrografx.flo\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"flo\"]\n  },\n  \"application/vnd.micrografx.igx\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"igx\"]\n  },\n  \"application/vnd.microsoft.portable-executable\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.microsoft.windows.thumbnail-cache\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.miele+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.mif\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mif\"]\n  },\n  \"application/vnd.minisoft-hp3000-save\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.mitsubishi.misty-guard.trustweb\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.mobius.daf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"daf\"]\n  },\n  \"application/vnd.mobius.dis\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"dis\"]\n  },\n  \"application/vnd.mobius.mbk\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mbk\"]\n  },\n  \"application/vnd.mobius.mqy\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mqy\"]\n  },\n  \"application/vnd.mobius.msl\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"msl\"]\n  },\n  \"application/vnd.mobius.plc\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"plc\"]\n  },\n  \"application/vnd.mobius.txf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"txf\"]\n  },\n  \"application/vnd.mophun.application\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mpn\"]\n  },\n  \"application/vnd.mophun.certificate\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mpc\"]\n  },\n  \"application/vnd.motorola.flexsuite\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.motorola.flexsuite.adsi\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.motorola.flexsuite.fis\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.motorola.flexsuite.gotap\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.motorola.flexsuite.kmr\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.motorola.flexsuite.ttc\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.motorola.flexsuite.wem\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.motorola.iprm\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.mozilla.xul+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"xul\"]\n  },\n  \"application/vnd.ms-3mfdocument\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ms-artgalry\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"cil\"]\n  },\n  \"application/vnd.ms-asf\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ms-cab-compressed\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"cab\"]\n  },\n  \"application/vnd.ms-color.iccprofile\": {\n    \"source\": \"apache\"\n  },\n  \"application/vnd.ms-excel\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"xls\",\"xlm\",\"xla\",\"xlc\",\"xlt\",\"xlw\"]\n  },\n  \"application/vnd.ms-excel.addin.macroenabled.12\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"xlam\"]\n  },\n  \"application/vnd.ms-excel.sheet.binary.macroenabled.12\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"xlsb\"]\n  },\n  \"application/vnd.ms-excel.sheet.macroenabled.12\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"xlsm\"]\n  },\n  \"application/vnd.ms-excel.template.macroenabled.12\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"xltm\"]\n  },\n  \"application/vnd.ms-fontobject\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"eot\"]\n  },\n  \"application/vnd.ms-htmlhelp\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"chm\"]\n  },\n  \"application/vnd.ms-ims\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ims\"]\n  },\n  \"application/vnd.ms-lrm\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"lrm\"]\n  },\n  \"application/vnd.ms-office.activex+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.ms-officetheme\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"thmx\"]\n  },\n  \"application/vnd.ms-opentype\": {\n    \"source\": \"apache\",\n    \"compressible\": true\n  },\n  \"application/vnd.ms-outlook\": {\n    \"compressible\": false,\n    \"extensions\": [\"msg\"]\n  },\n  \"application/vnd.ms-package.obfuscated-opentype\": {\n    \"source\": \"apache\"\n  },\n  \"application/vnd.ms-pki.seccat\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"cat\"]\n  },\n  \"application/vnd.ms-pki.stl\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"stl\"]\n  },\n  \"application/vnd.ms-playready.initiator+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.ms-powerpoint\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"ppt\",\"pps\",\"pot\"]\n  },\n  \"application/vnd.ms-powerpoint.addin.macroenabled.12\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ppam\"]\n  },\n  \"application/vnd.ms-powerpoint.presentation.macroenabled.12\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"pptm\"]\n  },\n  \"application/vnd.ms-powerpoint.slide.macroenabled.12\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"sldm\"]\n  },\n  \"application/vnd.ms-powerpoint.slideshow.macroenabled.12\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ppsm\"]\n  },\n  \"application/vnd.ms-powerpoint.template.macroenabled.12\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"potm\"]\n  },\n  \"application/vnd.ms-printdevicecapabilities+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.ms-printing.printticket+xml\": {\n    \"source\": \"apache\",\n    \"compressible\": true\n  },\n  \"application/vnd.ms-printschematicket+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.ms-project\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mpp\",\"mpt\"]\n  },\n  \"application/vnd.ms-tnef\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ms-windows.devicepairing\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ms-windows.nwprinting.oob\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ms-windows.printerpairing\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ms-windows.wsd.oob\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ms-wmdrm.lic-chlg-req\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ms-wmdrm.lic-resp\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ms-wmdrm.meter-chlg-req\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ms-wmdrm.meter-resp\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ms-word.document.macroenabled.12\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"docm\"]\n  },\n  \"application/vnd.ms-word.template.macroenabled.12\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"dotm\"]\n  },\n  \"application/vnd.ms-works\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"wps\",\"wks\",\"wcm\",\"wdb\"]\n  },\n  \"application/vnd.ms-wpl\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"wpl\"]\n  },\n  \"application/vnd.ms-xpsdocument\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"xps\"]\n  },\n  \"application/vnd.msa-disk-image\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.mseq\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mseq\"]\n  },\n  \"application/vnd.msign\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.multiad.creator\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.multiad.creator.cif\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.music-niff\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.musician\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mus\"]\n  },\n  \"application/vnd.muvee.style\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"msty\"]\n  },\n  \"application/vnd.mynfc\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"taglet\"]\n  },\n  \"application/vnd.nacamar.ybrid+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.ncd.control\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ncd.reference\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.nearst.inv+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.nebumind.line\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.nervana\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.netfpx\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.neurolanguage.nlu\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"nlu\"]\n  },\n  \"application/vnd.nimn\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.nintendo.nitro.rom\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.nintendo.snes.rom\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.nitf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ntf\",\"nitf\"]\n  },\n  \"application/vnd.noblenet-directory\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"nnd\"]\n  },\n  \"application/vnd.noblenet-sealer\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"nns\"]\n  },\n  \"application/vnd.noblenet-web\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"nnw\"]\n  },\n  \"application/vnd.nokia.catalogs\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.nokia.conml+wbxml\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.nokia.conml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.nokia.iptv.config+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.nokia.isds-radio-presets\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.nokia.landmark+wbxml\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.nokia.landmark+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.nokia.landmarkcollection+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.nokia.n-gage.ac+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"ac\"]\n  },\n  \"application/vnd.nokia.n-gage.data\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ngdat\"]\n  },\n  \"application/vnd.nokia.n-gage.symbian.install\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"n-gage\"]\n  },\n  \"application/vnd.nokia.ncd\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.nokia.pcd+wbxml\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.nokia.pcd+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.nokia.radio-preset\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"rpst\"]\n  },\n  \"application/vnd.nokia.radio-presets\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"rpss\"]\n  },\n  \"application/vnd.novadigm.edm\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"edm\"]\n  },\n  \"application/vnd.novadigm.edx\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"edx\"]\n  },\n  \"application/vnd.novadigm.ext\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ext\"]\n  },\n  \"application/vnd.ntt-local.content-share\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ntt-local.file-transfer\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ntt-local.ogw_remote-access\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ntt-local.sip-ta_remote\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ntt-local.sip-ta_tcp_stream\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.oasis.opendocument.chart\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"odc\"]\n  },\n  \"application/vnd.oasis.opendocument.chart-template\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"otc\"]\n  },\n  \"application/vnd.oasis.opendocument.database\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"odb\"]\n  },\n  \"application/vnd.oasis.opendocument.formula\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"odf\"]\n  },\n  \"application/vnd.oasis.opendocument.formula-template\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"odft\"]\n  },\n  \"application/vnd.oasis.opendocument.graphics\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"odg\"]\n  },\n  \"application/vnd.oasis.opendocument.graphics-template\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"otg\"]\n  },\n  \"application/vnd.oasis.opendocument.image\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"odi\"]\n  },\n  \"application/vnd.oasis.opendocument.image-template\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"oti\"]\n  },\n  \"application/vnd.oasis.opendocument.presentation\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"odp\"]\n  },\n  \"application/vnd.oasis.opendocument.presentation-template\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"otp\"]\n  },\n  \"application/vnd.oasis.opendocument.spreadsheet\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"ods\"]\n  },\n  \"application/vnd.oasis.opendocument.spreadsheet-template\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ots\"]\n  },\n  \"application/vnd.oasis.opendocument.text\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"odt\"]\n  },\n  \"application/vnd.oasis.opendocument.text-master\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"odm\"]\n  },\n  \"application/vnd.oasis.opendocument.text-template\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ott\"]\n  },\n  \"application/vnd.oasis.opendocument.text-web\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"oth\"]\n  },\n  \"application/vnd.obn\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ocf+cbor\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.oci.image.manifest.v1+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oftn.l10n+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oipf.contentaccessdownload+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oipf.contentaccessstreaming+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oipf.cspg-hexbinary\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.oipf.dae.svg+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oipf.dae.xhtml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oipf.mippvcontrolmessage+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oipf.pae.gem\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.oipf.spdiscovery+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oipf.spdlist+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oipf.ueprofile+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oipf.userprofile+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.olpc-sugar\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"xo\"]\n  },\n  \"application/vnd.oma-scws-config\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.oma-scws-http-request\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.oma-scws-http-response\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.oma.bcast.associated-procedure-parameter+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.bcast.drm-trigger+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.bcast.imd+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.bcast.ltkm\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.oma.bcast.notification+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.bcast.provisioningtrigger\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.oma.bcast.sgboot\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.oma.bcast.sgdd+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.bcast.sgdu\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.oma.bcast.simple-symbol-container\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.oma.bcast.smartcard-trigger+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.bcast.sprov+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.bcast.stkm\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.oma.cab-address-book+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.cab-feature-handler+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.cab-pcc+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.cab-subs-invite+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.cab-user-prefs+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.dcd\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.oma.dcdc\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.oma.dd2+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"dd2\"]\n  },\n  \"application/vnd.oma.drm.risd+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.group-usage-list+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.lwm2m+cbor\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.oma.lwm2m+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.lwm2m+tlv\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.oma.pal+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.poc.detailed-progress-report+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.poc.final-report+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.poc.groups+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.poc.invocation-descriptor+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.poc.optimized-progress-report+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.push\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.oma.scidm.messages+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oma.xcap-directory+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.omads-email+xml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true\n  },\n  \"application/vnd.omads-file+xml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true\n  },\n  \"application/vnd.omads-folder+xml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true\n  },\n  \"application/vnd.omaloc-supl-init\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.onepager\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.onepagertamp\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.onepagertamx\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.onepagertat\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.onepagertatp\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.onepagertatx\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.openblox.game+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"obgx\"]\n  },\n  \"application/vnd.openblox.game-binary\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.openeye.oeb\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.openofficeorg.extension\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"oxt\"]\n  },\n  \"application/vnd.openstreetmap.data+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"osm\"]\n  },\n  \"application/vnd.opentimestamps.ots\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.openxmlformats-officedocument.custom-properties+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.customxmlproperties+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.drawing+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.drawingml.chart+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.extended-properties+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.presentationml.comments+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.presentationml.presentation\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"pptx\"]\n  },\n  \"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.presentationml.slide\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"sldx\"]\n  },\n  \"application/vnd.openxmlformats-officedocument.presentationml.slide+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.presentationml.slideshow\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ppsx\"]\n  },\n  \"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.presentationml.tags+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.presentationml.template\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"potx\"]\n  },\n  \"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"xlsx\"]\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.template\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"xltx\"]\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.theme+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.themeoverride+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.vmldrawing\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"docx\"]\n  },\n  \"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.wordprocessingml.template\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"dotx\"]\n  },\n  \"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-package.core-properties+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.openxmlformats-package.relationships+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oracle.resource+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.orange.indata\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.osa.netdeploy\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.osgeo.mapguide.package\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mgp\"]\n  },\n  \"application/vnd.osgi.bundle\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.osgi.dp\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"dp\"]\n  },\n  \"application/vnd.osgi.subsystem\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"esa\"]\n  },\n  \"application/vnd.otps.ct-kip+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.oxli.countgraph\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.pagerduty+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.palm\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"pdb\",\"pqa\",\"oprc\"]\n  },\n  \"application/vnd.panoply\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.paos.xml\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.patentdive\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.patientecommsdoc\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.pawaafile\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"paw\"]\n  },\n  \"application/vnd.pcos\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.pg.format\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"str\"]\n  },\n  \"application/vnd.pg.osasli\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ei6\"]\n  },\n  \"application/vnd.piaccess.application-licence\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.picsel\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"efif\"]\n  },\n  \"application/vnd.pmi.widget\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"wg\"]\n  },\n  \"application/vnd.poc.group-advertisement+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.pocketlearn\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"plf\"]\n  },\n  \"application/vnd.powerbuilder6\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"pbd\"]\n  },\n  \"application/vnd.powerbuilder6-s\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.powerbuilder7\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.powerbuilder7-s\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.powerbuilder75\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.powerbuilder75-s\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.preminet\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.previewsystems.box\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"box\"]\n  },\n  \"application/vnd.proteus.magazine\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mgz\"]\n  },\n  \"application/vnd.psfs\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.publishare-delta-tree\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"qps\"]\n  },\n  \"application/vnd.pvi.ptid1\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ptid\"]\n  },\n  \"application/vnd.pwg-multiplexed\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.pwg-xhtml-print+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.qualcomm.brew-app-res\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.quarantainenet\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.quark.quarkxpress\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"qxd\",\"qxt\",\"qwd\",\"qwt\",\"qxl\",\"qxb\"]\n  },\n  \"application/vnd.quobject-quoxdocument\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.radisys.moml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.radisys.msml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.radisys.msml-audit+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.radisys.msml-audit-conf+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.radisys.msml-audit-conn+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.radisys.msml-audit-dialog+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.radisys.msml-audit-stream+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.radisys.msml-conf+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.radisys.msml-dialog+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.radisys.msml-dialog-base+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.radisys.msml-dialog-fax-detect+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.radisys.msml-dialog-fax-sendrecv+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.radisys.msml-dialog-group+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.radisys.msml-dialog-speech+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.radisys.msml-dialog-transform+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.rainstor.data\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.rapid\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.rar\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"rar\"]\n  },\n  \"application/vnd.realvnc.bed\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"bed\"]\n  },\n  \"application/vnd.recordare.musicxml\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mxl\"]\n  },\n  \"application/vnd.recordare.musicxml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"musicxml\"]\n  },\n  \"application/vnd.renlearn.rlprint\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.resilient.logic\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.restful+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.rig.cryptonote\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"cryptonote\"]\n  },\n  \"application/vnd.rim.cod\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"cod\"]\n  },\n  \"application/vnd.rn-realmedia\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"rm\"]\n  },\n  \"application/vnd.rn-realmedia-vbr\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"rmvb\"]\n  },\n  \"application/vnd.route66.link66+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"link66\"]\n  },\n  \"application/vnd.rs-274x\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ruckus.download\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.s3sms\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.sailingtracker.track\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"st\"]\n  },\n  \"application/vnd.sar\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.sbm.cid\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.sbm.mid2\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.scribus\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.sealed.3df\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.sealed.csf\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.sealed.doc\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.sealed.eml\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.sealed.mht\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.sealed.net\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.sealed.ppt\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.sealed.tiff\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.sealed.xls\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.sealedmedia.softseal.html\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.sealedmedia.softseal.pdf\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.seemail\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"see\"]\n  },\n  \"application/vnd.seis+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.sema\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"sema\"]\n  },\n  \"application/vnd.semd\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"semd\"]\n  },\n  \"application/vnd.semf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"semf\"]\n  },\n  \"application/vnd.shade-save-file\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.shana.informed.formdata\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ifm\"]\n  },\n  \"application/vnd.shana.informed.formtemplate\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"itp\"]\n  },\n  \"application/vnd.shana.informed.interchange\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"iif\"]\n  },\n  \"application/vnd.shana.informed.package\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ipk\"]\n  },\n  \"application/vnd.shootproof+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.shopkick+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.shp\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.shx\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.sigrok.session\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.simtech-mindmapper\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"twd\",\"twds\"]\n  },\n  \"application/vnd.siren+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.smaf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mmf\"]\n  },\n  \"application/vnd.smart.notebook\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.smart.teacher\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"teacher\"]\n  },\n  \"application/vnd.snesdev-page-table\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.software602.filler.form+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"fo\"]\n  },\n  \"application/vnd.software602.filler.form-xml-zip\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.solent.sdkm+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"sdkm\",\"sdkd\"]\n  },\n  \"application/vnd.spotfire.dxp\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"dxp\"]\n  },\n  \"application/vnd.spotfire.sfs\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"sfs\"]\n  },\n  \"application/vnd.sqlite3\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.sss-cod\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.sss-dtf\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.sss-ntf\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.stardivision.calc\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sdc\"]\n  },\n  \"application/vnd.stardivision.draw\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sda\"]\n  },\n  \"application/vnd.stardivision.impress\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sdd\"]\n  },\n  \"application/vnd.stardivision.math\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"smf\"]\n  },\n  \"application/vnd.stardivision.writer\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sdw\",\"vor\"]\n  },\n  \"application/vnd.stardivision.writer-global\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sgl\"]\n  },\n  \"application/vnd.stepmania.package\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"smzip\"]\n  },\n  \"application/vnd.stepmania.stepchart\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"sm\"]\n  },\n  \"application/vnd.street-stream\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.sun.wadl+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"wadl\"]\n  },\n  \"application/vnd.sun.xml.calc\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sxc\"]\n  },\n  \"application/vnd.sun.xml.calc.template\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"stc\"]\n  },\n  \"application/vnd.sun.xml.draw\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sxd\"]\n  },\n  \"application/vnd.sun.xml.draw.template\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"std\"]\n  },\n  \"application/vnd.sun.xml.impress\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sxi\"]\n  },\n  \"application/vnd.sun.xml.impress.template\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sti\"]\n  },\n  \"application/vnd.sun.xml.math\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sxm\"]\n  },\n  \"application/vnd.sun.xml.writer\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sxw\"]\n  },\n  \"application/vnd.sun.xml.writer.global\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sxg\"]\n  },\n  \"application/vnd.sun.xml.writer.template\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"stw\"]\n  },\n  \"application/vnd.sus-calendar\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"sus\",\"susp\"]\n  },\n  \"application/vnd.svd\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"svd\"]\n  },\n  \"application/vnd.swiftview-ics\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.sycle+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.syft+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.symbian.install\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sis\",\"sisx\"]\n  },\n  \"application/vnd.syncml+xml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true,\n    \"extensions\": [\"xsm\"]\n  },\n  \"application/vnd.syncml.dm+wbxml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"extensions\": [\"bdm\"]\n  },\n  \"application/vnd.syncml.dm+xml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true,\n    \"extensions\": [\"xdm\"]\n  },\n  \"application/vnd.syncml.dm.notification\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.syncml.dmddf+wbxml\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.syncml.dmddf+xml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true,\n    \"extensions\": [\"ddf\"]\n  },\n  \"application/vnd.syncml.dmtnds+wbxml\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.syncml.dmtnds+xml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true\n  },\n  \"application/vnd.syncml.ds.notification\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.tableschema+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.tao.intent-module-archive\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"tao\"]\n  },\n  \"application/vnd.tcpdump.pcap\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"pcap\",\"cap\",\"dmp\"]\n  },\n  \"application/vnd.think-cell.ppttc+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.tmd.mediaflex.api+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.tml\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.tmobile-livetv\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"tmo\"]\n  },\n  \"application/vnd.tri.onesource\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.trid.tpt\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"tpt\"]\n  },\n  \"application/vnd.triscape.mxs\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mxs\"]\n  },\n  \"application/vnd.trueapp\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"tra\"]\n  },\n  \"application/vnd.truedoc\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ubisoft.webplayer\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ufdl\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ufd\",\"ufdl\"]\n  },\n  \"application/vnd.uiq.theme\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"utz\"]\n  },\n  \"application/vnd.umajin\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"umj\"]\n  },\n  \"application/vnd.unity\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"unityweb\"]\n  },\n  \"application/vnd.uoml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"uoml\"]\n  },\n  \"application/vnd.uplanet.alert\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.uplanet.alert-wbxml\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.uplanet.bearer-choice\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.uplanet.bearer-choice-wbxml\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.uplanet.cacheop\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.uplanet.cacheop-wbxml\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.uplanet.channel\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.uplanet.channel-wbxml\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.uplanet.list\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.uplanet.list-wbxml\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.uplanet.listcmd\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.uplanet.listcmd-wbxml\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.uplanet.signal\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.uri-map\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.valve.source.material\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.vcx\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"vcx\"]\n  },\n  \"application/vnd.vd-study\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.vectorworks\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.vel+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.verimatrix.vcas\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.veritone.aion+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.veryant.thin\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.ves.encrypted\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.vidsoft.vidconference\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.visio\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"vsd\",\"vst\",\"vss\",\"vsw\"]\n  },\n  \"application/vnd.visionary\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"vis\"]\n  },\n  \"application/vnd.vividence.scriptfile\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.vsf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"vsf\"]\n  },\n  \"application/vnd.wap.sic\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.wap.slc\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.wap.wbxml\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"extensions\": [\"wbxml\"]\n  },\n  \"application/vnd.wap.wmlc\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"wmlc\"]\n  },\n  \"application/vnd.wap.wmlscriptc\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"wmlsc\"]\n  },\n  \"application/vnd.webturbo\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"wtb\"]\n  },\n  \"application/vnd.wfa.dpp\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.wfa.p2p\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.wfa.wsc\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.windows.devicepairing\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.wmc\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.wmf.bootstrap\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.wolfram.mathematica\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.wolfram.mathematica.package\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.wolfram.player\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"nbp\"]\n  },\n  \"application/vnd.wordperfect\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"wpd\"]\n  },\n  \"application/vnd.wqd\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"wqd\"]\n  },\n  \"application/vnd.wrq-hp3000-labelled\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.wt.stf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"stf\"]\n  },\n  \"application/vnd.wv.csp+wbxml\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.wv.csp+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.wv.ssp+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.xacml+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.xara\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"xar\"]\n  },\n  \"application/vnd.xfdl\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"xfdl\"]\n  },\n  \"application/vnd.xfdl.webform\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.xmi+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vnd.xmpie.cpkg\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.xmpie.dpkg\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.xmpie.plan\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.xmpie.ppkg\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.xmpie.xlim\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.yamaha.hv-dic\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"hvd\"]\n  },\n  \"application/vnd.yamaha.hv-script\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"hvs\"]\n  },\n  \"application/vnd.yamaha.hv-voice\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"hvp\"]\n  },\n  \"application/vnd.yamaha.openscoreformat\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"osf\"]\n  },\n  \"application/vnd.yamaha.openscoreformat.osfpvg+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"osfpvg\"]\n  },\n  \"application/vnd.yamaha.remote-setup\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.yamaha.smaf-audio\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"saf\"]\n  },\n  \"application/vnd.yamaha.smaf-phrase\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"spf\"]\n  },\n  \"application/vnd.yamaha.through-ngn\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.yamaha.tunnel-udpencap\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.yaoweme\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.yellowriver-custom-menu\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"cmp\"]\n  },\n  \"application/vnd.youtube.yt\": {\n    \"source\": \"iana\"\n  },\n  \"application/vnd.zul\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"zir\",\"zirz\"]\n  },\n  \"application/vnd.zzazz.deck+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"zaz\"]\n  },\n  \"application/voicexml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"vxml\"]\n  },\n  \"application/voucher-cms+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/vq-rtcpxr\": {\n    \"source\": \"iana\"\n  },\n  \"application/wasm\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"wasm\"]\n  },\n  \"application/watcherinfo+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"wif\"]\n  },\n  \"application/webpush-options+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/whoispp-query\": {\n    \"source\": \"iana\"\n  },\n  \"application/whoispp-response\": {\n    \"source\": \"iana\"\n  },\n  \"application/widget\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"wgt\"]\n  },\n  \"application/winhlp\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"hlp\"]\n  },\n  \"application/wita\": {\n    \"source\": \"iana\"\n  },\n  \"application/wordperfect5.1\": {\n    \"source\": \"iana\"\n  },\n  \"application/wsdl+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"wsdl\"]\n  },\n  \"application/wspolicy+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"wspolicy\"]\n  },\n  \"application/x-7z-compressed\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"7z\"]\n  },\n  \"application/x-abiword\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"abw\"]\n  },\n  \"application/x-ace-compressed\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"ace\"]\n  },\n  \"application/x-amf\": {\n    \"source\": \"apache\"\n  },\n  \"application/x-apple-diskimage\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"dmg\"]\n  },\n  \"application/x-arj\": {\n    \"compressible\": false,\n    \"extensions\": [\"arj\"]\n  },\n  \"application/x-authorware-bin\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"aab\",\"x32\",\"u32\",\"vox\"]\n  },\n  \"application/x-authorware-map\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"aam\"]\n  },\n  \"application/x-authorware-seg\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"aas\"]\n  },\n  \"application/x-bcpio\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"bcpio\"]\n  },\n  \"application/x-bdoc\": {\n    \"compressible\": false,\n    \"extensions\": [\"bdoc\"]\n  },\n  \"application/x-bittorrent\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"torrent\"]\n  },\n  \"application/x-blorb\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"blb\",\"blorb\"]\n  },\n  \"application/x-bzip\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"bz\"]\n  },\n  \"application/x-bzip2\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"bz2\",\"boz\"]\n  },\n  \"application/x-cbr\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"cbr\",\"cba\",\"cbt\",\"cbz\",\"cb7\"]\n  },\n  \"application/x-cdlink\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"vcd\"]\n  },\n  \"application/x-cfs-compressed\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"cfs\"]\n  },\n  \"application/x-chat\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"chat\"]\n  },\n  \"application/x-chess-pgn\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"pgn\"]\n  },\n  \"application/x-chrome-extension\": {\n    \"extensions\": [\"crx\"]\n  },\n  \"application/x-cocoa\": {\n    \"source\": \"nginx\",\n    \"extensions\": [\"cco\"]\n  },\n  \"application/x-compress\": {\n    \"source\": \"apache\"\n  },\n  \"application/x-conference\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"nsc\"]\n  },\n  \"application/x-cpio\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"cpio\"]\n  },\n  \"application/x-csh\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"csh\"]\n  },\n  \"application/x-deb\": {\n    \"compressible\": false\n  },\n  \"application/x-debian-package\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"deb\",\"udeb\"]\n  },\n  \"application/x-dgc-compressed\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"dgc\"]\n  },\n  \"application/x-director\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"dir\",\"dcr\",\"dxr\",\"cst\",\"cct\",\"cxt\",\"w3d\",\"fgd\",\"swa\"]\n  },\n  \"application/x-doom\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"wad\"]\n  },\n  \"application/x-dtbncx+xml\": {\n    \"source\": \"apache\",\n    \"compressible\": true,\n    \"extensions\": [\"ncx\"]\n  },\n  \"application/x-dtbook+xml\": {\n    \"source\": \"apache\",\n    \"compressible\": true,\n    \"extensions\": [\"dtb\"]\n  },\n  \"application/x-dtbresource+xml\": {\n    \"source\": \"apache\",\n    \"compressible\": true,\n    \"extensions\": [\"res\"]\n  },\n  \"application/x-dvi\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"dvi\"]\n  },\n  \"application/x-envoy\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"evy\"]\n  },\n  \"application/x-eva\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"eva\"]\n  },\n  \"application/x-font-bdf\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"bdf\"]\n  },\n  \"application/x-font-dos\": {\n    \"source\": \"apache\"\n  },\n  \"application/x-font-framemaker\": {\n    \"source\": \"apache\"\n  },\n  \"application/x-font-ghostscript\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"gsf\"]\n  },\n  \"application/x-font-libgrx\": {\n    \"source\": \"apache\"\n  },\n  \"application/x-font-linux-psf\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"psf\"]\n  },\n  \"application/x-font-pcf\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"pcf\"]\n  },\n  \"application/x-font-snf\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"snf\"]\n  },\n  \"application/x-font-speedo\": {\n    \"source\": \"apache\"\n  },\n  \"application/x-font-sunos-news\": {\n    \"source\": \"apache\"\n  },\n  \"application/x-font-type1\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"pfa\",\"pfb\",\"pfm\",\"afm\"]\n  },\n  \"application/x-font-vfont\": {\n    \"source\": \"apache\"\n  },\n  \"application/x-freearc\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"arc\"]\n  },\n  \"application/x-futuresplash\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"spl\"]\n  },\n  \"application/x-gca-compressed\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"gca\"]\n  },\n  \"application/x-glulx\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"ulx\"]\n  },\n  \"application/x-gnumeric\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"gnumeric\"]\n  },\n  \"application/x-gramps-xml\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"gramps\"]\n  },\n  \"application/x-gtar\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"gtar\"]\n  },\n  \"application/x-gzip\": {\n    \"source\": \"apache\"\n  },\n  \"application/x-hdf\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"hdf\"]\n  },\n  \"application/x-httpd-php\": {\n    \"compressible\": true,\n    \"extensions\": [\"php\"]\n  },\n  \"application/x-install-instructions\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"install\"]\n  },\n  \"application/x-iso9660-image\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"iso\"]\n  },\n  \"application/x-iwork-keynote-sffkey\": {\n    \"extensions\": [\"key\"]\n  },\n  \"application/x-iwork-numbers-sffnumbers\": {\n    \"extensions\": [\"numbers\"]\n  },\n  \"application/x-iwork-pages-sffpages\": {\n    \"extensions\": [\"pages\"]\n  },\n  \"application/x-java-archive-diff\": {\n    \"source\": \"nginx\",\n    \"extensions\": [\"jardiff\"]\n  },\n  \"application/x-java-jnlp-file\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"jnlp\"]\n  },\n  \"application/x-javascript\": {\n    \"compressible\": true\n  },\n  \"application/x-keepass2\": {\n    \"extensions\": [\"kdbx\"]\n  },\n  \"application/x-latex\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"latex\"]\n  },\n  \"application/x-lua-bytecode\": {\n    \"extensions\": [\"luac\"]\n  },\n  \"application/x-lzh-compressed\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"lzh\",\"lha\"]\n  },\n  \"application/x-makeself\": {\n    \"source\": \"nginx\",\n    \"extensions\": [\"run\"]\n  },\n  \"application/x-mie\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"mie\"]\n  },\n  \"application/x-mobipocket-ebook\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"prc\",\"mobi\"]\n  },\n  \"application/x-mpegurl\": {\n    \"compressible\": false\n  },\n  \"application/x-ms-application\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"application\"]\n  },\n  \"application/x-ms-shortcut\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"lnk\"]\n  },\n  \"application/x-ms-wmd\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"wmd\"]\n  },\n  \"application/x-ms-wmz\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"wmz\"]\n  },\n  \"application/x-ms-xbap\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"xbap\"]\n  },\n  \"application/x-msaccess\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"mdb\"]\n  },\n  \"application/x-msbinder\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"obd\"]\n  },\n  \"application/x-mscardfile\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"crd\"]\n  },\n  \"application/x-msclip\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"clp\"]\n  },\n  \"application/x-msdos-program\": {\n    \"extensions\": [\"exe\"]\n  },\n  \"application/x-msdownload\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"exe\",\"dll\",\"com\",\"bat\",\"msi\"]\n  },\n  \"application/x-msmediaview\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"mvb\",\"m13\",\"m14\"]\n  },\n  \"application/x-msmetafile\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"wmf\",\"wmz\",\"emf\",\"emz\"]\n  },\n  \"application/x-msmoney\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"mny\"]\n  },\n  \"application/x-mspublisher\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"pub\"]\n  },\n  \"application/x-msschedule\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"scd\"]\n  },\n  \"application/x-msterminal\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"trm\"]\n  },\n  \"application/x-mswrite\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"wri\"]\n  },\n  \"application/x-netcdf\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"nc\",\"cdf\"]\n  },\n  \"application/x-ns-proxy-autoconfig\": {\n    \"compressible\": true,\n    \"extensions\": [\"pac\"]\n  },\n  \"application/x-nzb\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"nzb\"]\n  },\n  \"application/x-perl\": {\n    \"source\": \"nginx\",\n    \"extensions\": [\"pl\",\"pm\"]\n  },\n  \"application/x-pilot\": {\n    \"source\": \"nginx\",\n    \"extensions\": [\"prc\",\"pdb\"]\n  },\n  \"application/x-pkcs12\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"p12\",\"pfx\"]\n  },\n  \"application/x-pkcs7-certificates\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"p7b\",\"spc\"]\n  },\n  \"application/x-pkcs7-certreqresp\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"p7r\"]\n  },\n  \"application/x-pki-message\": {\n    \"source\": \"iana\"\n  },\n  \"application/x-rar-compressed\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"rar\"]\n  },\n  \"application/x-redhat-package-manager\": {\n    \"source\": \"nginx\",\n    \"extensions\": [\"rpm\"]\n  },\n  \"application/x-research-info-systems\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"ris\"]\n  },\n  \"application/x-sea\": {\n    \"source\": \"nginx\",\n    \"extensions\": [\"sea\"]\n  },\n  \"application/x-sh\": {\n    \"source\": \"apache\",\n    \"compressible\": true,\n    \"extensions\": [\"sh\"]\n  },\n  \"application/x-shar\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"shar\"]\n  },\n  \"application/x-shockwave-flash\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"swf\"]\n  },\n  \"application/x-silverlight-app\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"xap\"]\n  },\n  \"application/x-sql\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sql\"]\n  },\n  \"application/x-stuffit\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"sit\"]\n  },\n  \"application/x-stuffitx\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sitx\"]\n  },\n  \"application/x-subrip\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"srt\"]\n  },\n  \"application/x-sv4cpio\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sv4cpio\"]\n  },\n  \"application/x-sv4crc\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sv4crc\"]\n  },\n  \"application/x-t3vm-image\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"t3\"]\n  },\n  \"application/x-tads\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"gam\"]\n  },\n  \"application/x-tar\": {\n    \"source\": \"apache\",\n    \"compressible\": true,\n    \"extensions\": [\"tar\"]\n  },\n  \"application/x-tcl\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"tcl\",\"tk\"]\n  },\n  \"application/x-tex\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"tex\"]\n  },\n  \"application/x-tex-tfm\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"tfm\"]\n  },\n  \"application/x-texinfo\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"texinfo\",\"texi\"]\n  },\n  \"application/x-tgif\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"obj\"]\n  },\n  \"application/x-ustar\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"ustar\"]\n  },\n  \"application/x-virtualbox-hdd\": {\n    \"compressible\": true,\n    \"extensions\": [\"hdd\"]\n  },\n  \"application/x-virtualbox-ova\": {\n    \"compressible\": true,\n    \"extensions\": [\"ova\"]\n  },\n  \"application/x-virtualbox-ovf\": {\n    \"compressible\": true,\n    \"extensions\": [\"ovf\"]\n  },\n  \"application/x-virtualbox-vbox\": {\n    \"compressible\": true,\n    \"extensions\": [\"vbox\"]\n  },\n  \"application/x-virtualbox-vbox-extpack\": {\n    \"compressible\": false,\n    \"extensions\": [\"vbox-extpack\"]\n  },\n  \"application/x-virtualbox-vdi\": {\n    \"compressible\": true,\n    \"extensions\": [\"vdi\"]\n  },\n  \"application/x-virtualbox-vhd\": {\n    \"compressible\": true,\n    \"extensions\": [\"vhd\"]\n  },\n  \"application/x-virtualbox-vmdk\": {\n    \"compressible\": true,\n    \"extensions\": [\"vmdk\"]\n  },\n  \"application/x-wais-source\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"src\"]\n  },\n  \"application/x-web-app-manifest+json\": {\n    \"compressible\": true,\n    \"extensions\": [\"webapp\"]\n  },\n  \"application/x-www-form-urlencoded\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/x-x509-ca-cert\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"der\",\"crt\",\"pem\"]\n  },\n  \"application/x-x509-ca-ra-cert\": {\n    \"source\": \"iana\"\n  },\n  \"application/x-x509-next-ca-cert\": {\n    \"source\": \"iana\"\n  },\n  \"application/x-xfig\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"fig\"]\n  },\n  \"application/x-xliff+xml\": {\n    \"source\": \"apache\",\n    \"compressible\": true,\n    \"extensions\": [\"xlf\"]\n  },\n  \"application/x-xpinstall\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"xpi\"]\n  },\n  \"application/x-xz\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"xz\"]\n  },\n  \"application/x-zmachine\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"z1\",\"z2\",\"z3\",\"z4\",\"z5\",\"z6\",\"z7\",\"z8\"]\n  },\n  \"application/x400-bp\": {\n    \"source\": \"iana\"\n  },\n  \"application/xacml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/xaml+xml\": {\n    \"source\": \"apache\",\n    \"compressible\": true,\n    \"extensions\": [\"xaml\"]\n  },\n  \"application/xcap-att+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"xav\"]\n  },\n  \"application/xcap-caps+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"xca\"]\n  },\n  \"application/xcap-diff+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"xdf\"]\n  },\n  \"application/xcap-el+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"xel\"]\n  },\n  \"application/xcap-error+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/xcap-ns+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"xns\"]\n  },\n  \"application/xcon-conference-info+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/xcon-conference-info-diff+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/xenc+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"xenc\"]\n  },\n  \"application/xhtml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"xhtml\",\"xht\"]\n  },\n  \"application/xhtml-voice+xml\": {\n    \"source\": \"apache\",\n    \"compressible\": true\n  },\n  \"application/xliff+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"xlf\"]\n  },\n  \"application/xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"xml\",\"xsl\",\"xsd\",\"rng\"]\n  },\n  \"application/xml-dtd\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"dtd\"]\n  },\n  \"application/xml-external-parsed-entity\": {\n    \"source\": \"iana\"\n  },\n  \"application/xml-patch+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/xmpp+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/xop+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"xop\"]\n  },\n  \"application/xproc+xml\": {\n    \"source\": \"apache\",\n    \"compressible\": true,\n    \"extensions\": [\"xpl\"]\n  },\n  \"application/xslt+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"xsl\",\"xslt\"]\n  },\n  \"application/xspf+xml\": {\n    \"source\": \"apache\",\n    \"compressible\": true,\n    \"extensions\": [\"xspf\"]\n  },\n  \"application/xv+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"mxml\",\"xhvml\",\"xvml\",\"xvm\"]\n  },\n  \"application/yang\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"yang\"]\n  },\n  \"application/yang-data+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/yang-data+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/yang-patch+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/yang-patch+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"application/yin+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"yin\"]\n  },\n  \"application/zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"zip\"]\n  },\n  \"application/zlib\": {\n    \"source\": \"iana\"\n  },\n  \"application/zstd\": {\n    \"source\": \"iana\"\n  },\n  \"audio/1d-interleaved-parityfec\": {\n    \"source\": \"iana\"\n  },\n  \"audio/32kadpcm\": {\n    \"source\": \"iana\"\n  },\n  \"audio/3gpp\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"3gpp\"]\n  },\n  \"audio/3gpp2\": {\n    \"source\": \"iana\"\n  },\n  \"audio/aac\": {\n    \"source\": \"iana\"\n  },\n  \"audio/ac3\": {\n    \"source\": \"iana\"\n  },\n  \"audio/adpcm\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"adp\"]\n  },\n  \"audio/amr\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"amr\"]\n  },\n  \"audio/amr-wb\": {\n    \"source\": \"iana\"\n  },\n  \"audio/amr-wb+\": {\n    \"source\": \"iana\"\n  },\n  \"audio/aptx\": {\n    \"source\": \"iana\"\n  },\n  \"audio/asc\": {\n    \"source\": \"iana\"\n  },\n  \"audio/atrac-advanced-lossless\": {\n    \"source\": \"iana\"\n  },\n  \"audio/atrac-x\": {\n    \"source\": \"iana\"\n  },\n  \"audio/atrac3\": {\n    \"source\": \"iana\"\n  },\n  \"audio/basic\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"au\",\"snd\"]\n  },\n  \"audio/bv16\": {\n    \"source\": \"iana\"\n  },\n  \"audio/bv32\": {\n    \"source\": \"iana\"\n  },\n  \"audio/clearmode\": {\n    \"source\": \"iana\"\n  },\n  \"audio/cn\": {\n    \"source\": \"iana\"\n  },\n  \"audio/dat12\": {\n    \"source\": \"iana\"\n  },\n  \"audio/dls\": {\n    \"source\": \"iana\"\n  },\n  \"audio/dsr-es201108\": {\n    \"source\": \"iana\"\n  },\n  \"audio/dsr-es202050\": {\n    \"source\": \"iana\"\n  },\n  \"audio/dsr-es202211\": {\n    \"source\": \"iana\"\n  },\n  \"audio/dsr-es202212\": {\n    \"source\": \"iana\"\n  },\n  \"audio/dv\": {\n    \"source\": \"iana\"\n  },\n  \"audio/dvi4\": {\n    \"source\": \"iana\"\n  },\n  \"audio/eac3\": {\n    \"source\": \"iana\"\n  },\n  \"audio/encaprtp\": {\n    \"source\": \"iana\"\n  },\n  \"audio/evrc\": {\n    \"source\": \"iana\"\n  },\n  \"audio/evrc-qcp\": {\n    \"source\": \"iana\"\n  },\n  \"audio/evrc0\": {\n    \"source\": \"iana\"\n  },\n  \"audio/evrc1\": {\n    \"source\": \"iana\"\n  },\n  \"audio/evrcb\": {\n    \"source\": \"iana\"\n  },\n  \"audio/evrcb0\": {\n    \"source\": \"iana\"\n  },\n  \"audio/evrcb1\": {\n    \"source\": \"iana\"\n  },\n  \"audio/evrcnw\": {\n    \"source\": \"iana\"\n  },\n  \"audio/evrcnw0\": {\n    \"source\": \"iana\"\n  },\n  \"audio/evrcnw1\": {\n    \"source\": \"iana\"\n  },\n  \"audio/evrcwb\": {\n    \"source\": \"iana\"\n  },\n  \"audio/evrcwb0\": {\n    \"source\": \"iana\"\n  },\n  \"audio/evrcwb1\": {\n    \"source\": \"iana\"\n  },\n  \"audio/evs\": {\n    \"source\": \"iana\"\n  },\n  \"audio/flexfec\": {\n    \"source\": \"iana\"\n  },\n  \"audio/fwdred\": {\n    \"source\": \"iana\"\n  },\n  \"audio/g711-0\": {\n    \"source\": \"iana\"\n  },\n  \"audio/g719\": {\n    \"source\": \"iana\"\n  },\n  \"audio/g722\": {\n    \"source\": \"iana\"\n  },\n  \"audio/g7221\": {\n    \"source\": \"iana\"\n  },\n  \"audio/g723\": {\n    \"source\": \"iana\"\n  },\n  \"audio/g726-16\": {\n    \"source\": \"iana\"\n  },\n  \"audio/g726-24\": {\n    \"source\": \"iana\"\n  },\n  \"audio/g726-32\": {\n    \"source\": \"iana\"\n  },\n  \"audio/g726-40\": {\n    \"source\": \"iana\"\n  },\n  \"audio/g728\": {\n    \"source\": \"iana\"\n  },\n  \"audio/g729\": {\n    \"source\": \"iana\"\n  },\n  \"audio/g7291\": {\n    \"source\": \"iana\"\n  },\n  \"audio/g729d\": {\n    \"source\": \"iana\"\n  },\n  \"audio/g729e\": {\n    \"source\": \"iana\"\n  },\n  \"audio/gsm\": {\n    \"source\": \"iana\"\n  },\n  \"audio/gsm-efr\": {\n    \"source\": \"iana\"\n  },\n  \"audio/gsm-hr-08\": {\n    \"source\": \"iana\"\n  },\n  \"audio/ilbc\": {\n    \"source\": \"iana\"\n  },\n  \"audio/ip-mr_v2.5\": {\n    \"source\": \"iana\"\n  },\n  \"audio/isac\": {\n    \"source\": \"apache\"\n  },\n  \"audio/l16\": {\n    \"source\": \"iana\"\n  },\n  \"audio/l20\": {\n    \"source\": \"iana\"\n  },\n  \"audio/l24\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"audio/l8\": {\n    \"source\": \"iana\"\n  },\n  \"audio/lpc\": {\n    \"source\": \"iana\"\n  },\n  \"audio/melp\": {\n    \"source\": \"iana\"\n  },\n  \"audio/melp1200\": {\n    \"source\": \"iana\"\n  },\n  \"audio/melp2400\": {\n    \"source\": \"iana\"\n  },\n  \"audio/melp600\": {\n    \"source\": \"iana\"\n  },\n  \"audio/mhas\": {\n    \"source\": \"iana\"\n  },\n  \"audio/midi\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"mid\",\"midi\",\"kar\",\"rmi\"]\n  },\n  \"audio/mobile-xmf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mxmf\"]\n  },\n  \"audio/mp3\": {\n    \"compressible\": false,\n    \"extensions\": [\"mp3\"]\n  },\n  \"audio/mp4\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"m4a\",\"mp4a\"]\n  },\n  \"audio/mp4a-latm\": {\n    \"source\": \"iana\"\n  },\n  \"audio/mpa\": {\n    \"source\": \"iana\"\n  },\n  \"audio/mpa-robust\": {\n    \"source\": \"iana\"\n  },\n  \"audio/mpeg\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"mpga\",\"mp2\",\"mp2a\",\"mp3\",\"m2a\",\"m3a\"]\n  },\n  \"audio/mpeg4-generic\": {\n    \"source\": \"iana\"\n  },\n  \"audio/musepack\": {\n    \"source\": \"apache\"\n  },\n  \"audio/ogg\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"oga\",\"ogg\",\"spx\",\"opus\"]\n  },\n  \"audio/opus\": {\n    \"source\": \"iana\"\n  },\n  \"audio/parityfec\": {\n    \"source\": \"iana\"\n  },\n  \"audio/pcma\": {\n    \"source\": \"iana\"\n  },\n  \"audio/pcma-wb\": {\n    \"source\": \"iana\"\n  },\n  \"audio/pcmu\": {\n    \"source\": \"iana\"\n  },\n  \"audio/pcmu-wb\": {\n    \"source\": \"iana\"\n  },\n  \"audio/prs.sid\": {\n    \"source\": \"iana\"\n  },\n  \"audio/qcelp\": {\n    \"source\": \"iana\"\n  },\n  \"audio/raptorfec\": {\n    \"source\": \"iana\"\n  },\n  \"audio/red\": {\n    \"source\": \"iana\"\n  },\n  \"audio/rtp-enc-aescm128\": {\n    \"source\": \"iana\"\n  },\n  \"audio/rtp-midi\": {\n    \"source\": \"iana\"\n  },\n  \"audio/rtploopback\": {\n    \"source\": \"iana\"\n  },\n  \"audio/rtx\": {\n    \"source\": \"iana\"\n  },\n  \"audio/s3m\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"s3m\"]\n  },\n  \"audio/scip\": {\n    \"source\": \"iana\"\n  },\n  \"audio/silk\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sil\"]\n  },\n  \"audio/smv\": {\n    \"source\": \"iana\"\n  },\n  \"audio/smv-qcp\": {\n    \"source\": \"iana\"\n  },\n  \"audio/smv0\": {\n    \"source\": \"iana\"\n  },\n  \"audio/sofa\": {\n    \"source\": \"iana\"\n  },\n  \"audio/sp-midi\": {\n    \"source\": \"iana\"\n  },\n  \"audio/speex\": {\n    \"source\": \"iana\"\n  },\n  \"audio/t140c\": {\n    \"source\": \"iana\"\n  },\n  \"audio/t38\": {\n    \"source\": \"iana\"\n  },\n  \"audio/telephone-event\": {\n    \"source\": \"iana\"\n  },\n  \"audio/tetra_acelp\": {\n    \"source\": \"iana\"\n  },\n  \"audio/tetra_acelp_bb\": {\n    \"source\": \"iana\"\n  },\n  \"audio/tone\": {\n    \"source\": \"iana\"\n  },\n  \"audio/tsvcis\": {\n    \"source\": \"iana\"\n  },\n  \"audio/uemclip\": {\n    \"source\": \"iana\"\n  },\n  \"audio/ulpfec\": {\n    \"source\": \"iana\"\n  },\n  \"audio/usac\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vdvi\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vmr-wb\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.3gpp.iufp\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.4sb\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.audiokoz\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.celp\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.cisco.nse\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.cmles.radio-events\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.cns.anp1\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.cns.inf1\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.dece.audio\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"uva\",\"uvva\"]\n  },\n  \"audio/vnd.digital-winds\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"eol\"]\n  },\n  \"audio/vnd.dlna.adts\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.dolby.heaac.1\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.dolby.heaac.2\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.dolby.mlp\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.dolby.mps\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.dolby.pl2\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.dolby.pl2x\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.dolby.pl2z\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.dolby.pulse.1\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.dra\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"dra\"]\n  },\n  \"audio/vnd.dts\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"dts\"]\n  },\n  \"audio/vnd.dts.hd\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"dtshd\"]\n  },\n  \"audio/vnd.dts.uhd\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.dvb.file\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.everad.plj\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.hns.audio\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.lucent.voice\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"lvp\"]\n  },\n  \"audio/vnd.ms-playready.media.pya\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"pya\"]\n  },\n  \"audio/vnd.nokia.mobile-xmf\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.nortel.vbk\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.nuera.ecelp4800\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ecelp4800\"]\n  },\n  \"audio/vnd.nuera.ecelp7470\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ecelp7470\"]\n  },\n  \"audio/vnd.nuera.ecelp9600\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ecelp9600\"]\n  },\n  \"audio/vnd.octel.sbc\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.presonus.multitrack\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.qcelp\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.rhetorex.32kadpcm\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.rip\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"rip\"]\n  },\n  \"audio/vnd.rn-realaudio\": {\n    \"compressible\": false\n  },\n  \"audio/vnd.sealedmedia.softseal.mpeg\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.vmx.cvsd\": {\n    \"source\": \"iana\"\n  },\n  \"audio/vnd.wave\": {\n    \"compressible\": false\n  },\n  \"audio/vorbis\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"audio/vorbis-config\": {\n    \"source\": \"iana\"\n  },\n  \"audio/wav\": {\n    \"compressible\": false,\n    \"extensions\": [\"wav\"]\n  },\n  \"audio/wave\": {\n    \"compressible\": false,\n    \"extensions\": [\"wav\"]\n  },\n  \"audio/webm\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"weba\"]\n  },\n  \"audio/x-aac\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"aac\"]\n  },\n  \"audio/x-aiff\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"aif\",\"aiff\",\"aifc\"]\n  },\n  \"audio/x-caf\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"caf\"]\n  },\n  \"audio/x-flac\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"flac\"]\n  },\n  \"audio/x-m4a\": {\n    \"source\": \"nginx\",\n    \"extensions\": [\"m4a\"]\n  },\n  \"audio/x-matroska\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"mka\"]\n  },\n  \"audio/x-mpegurl\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"m3u\"]\n  },\n  \"audio/x-ms-wax\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"wax\"]\n  },\n  \"audio/x-ms-wma\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"wma\"]\n  },\n  \"audio/x-pn-realaudio\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"ram\",\"ra\"]\n  },\n  \"audio/x-pn-realaudio-plugin\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"rmp\"]\n  },\n  \"audio/x-realaudio\": {\n    \"source\": \"nginx\",\n    \"extensions\": [\"ra\"]\n  },\n  \"audio/x-tta\": {\n    \"source\": \"apache\"\n  },\n  \"audio/x-wav\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"wav\"]\n  },\n  \"audio/xm\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"xm\"]\n  },\n  \"chemical/x-cdx\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"cdx\"]\n  },\n  \"chemical/x-cif\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"cif\"]\n  },\n  \"chemical/x-cmdf\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"cmdf\"]\n  },\n  \"chemical/x-cml\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"cml\"]\n  },\n  \"chemical/x-csml\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"csml\"]\n  },\n  \"chemical/x-pdb\": {\n    \"source\": \"apache\"\n  },\n  \"chemical/x-xyz\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"xyz\"]\n  },\n  \"font/collection\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ttc\"]\n  },\n  \"font/otf\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"otf\"]\n  },\n  \"font/sfnt\": {\n    \"source\": \"iana\"\n  },\n  \"font/ttf\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"ttf\"]\n  },\n  \"font/woff\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"woff\"]\n  },\n  \"font/woff2\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"woff2\"]\n  },\n  \"image/aces\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"exr\"]\n  },\n  \"image/apng\": {\n    \"compressible\": false,\n    \"extensions\": [\"apng\"]\n  },\n  \"image/avci\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"avci\"]\n  },\n  \"image/avcs\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"avcs\"]\n  },\n  \"image/avif\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"avif\"]\n  },\n  \"image/bmp\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"bmp\"]\n  },\n  \"image/cgm\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"cgm\"]\n  },\n  \"image/dicom-rle\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"drle\"]\n  },\n  \"image/emf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"emf\"]\n  },\n  \"image/fits\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"fits\"]\n  },\n  \"image/g3fax\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"g3\"]\n  },\n  \"image/gif\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"gif\"]\n  },\n  \"image/heic\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"heic\"]\n  },\n  \"image/heic-sequence\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"heics\"]\n  },\n  \"image/heif\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"heif\"]\n  },\n  \"image/heif-sequence\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"heifs\"]\n  },\n  \"image/hej2k\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"hej2\"]\n  },\n  \"image/hsj2\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"hsj2\"]\n  },\n  \"image/ief\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ief\"]\n  },\n  \"image/jls\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"jls\"]\n  },\n  \"image/jp2\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"jp2\",\"jpg2\"]\n  },\n  \"image/jpeg\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"jpeg\",\"jpg\",\"jpe\"]\n  },\n  \"image/jph\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"jph\"]\n  },\n  \"image/jphc\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"jhc\"]\n  },\n  \"image/jpm\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"jpm\"]\n  },\n  \"image/jpx\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"jpx\",\"jpf\"]\n  },\n  \"image/jxr\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"jxr\"]\n  },\n  \"image/jxra\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"jxra\"]\n  },\n  \"image/jxrs\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"jxrs\"]\n  },\n  \"image/jxs\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"jxs\"]\n  },\n  \"image/jxsc\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"jxsc\"]\n  },\n  \"image/jxsi\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"jxsi\"]\n  },\n  \"image/jxss\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"jxss\"]\n  },\n  \"image/ktx\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ktx\"]\n  },\n  \"image/ktx2\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ktx2\"]\n  },\n  \"image/naplps\": {\n    \"source\": \"iana\"\n  },\n  \"image/pjpeg\": {\n    \"compressible\": false\n  },\n  \"image/png\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"png\"]\n  },\n  \"image/prs.btif\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"btif\"]\n  },\n  \"image/prs.pti\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"pti\"]\n  },\n  \"image/pwg-raster\": {\n    \"source\": \"iana\"\n  },\n  \"image/sgi\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sgi\"]\n  },\n  \"image/svg+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"svg\",\"svgz\"]\n  },\n  \"image/t38\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"t38\"]\n  },\n  \"image/tiff\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"tif\",\"tiff\"]\n  },\n  \"image/tiff-fx\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"tfx\"]\n  },\n  \"image/vnd.adobe.photoshop\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"psd\"]\n  },\n  \"image/vnd.airzip.accelerator.azv\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"azv\"]\n  },\n  \"image/vnd.cns.inf2\": {\n    \"source\": \"iana\"\n  },\n  \"image/vnd.dece.graphic\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"uvi\",\"uvvi\",\"uvg\",\"uvvg\"]\n  },\n  \"image/vnd.djvu\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"djvu\",\"djv\"]\n  },\n  \"image/vnd.dvb.subtitle\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"sub\"]\n  },\n  \"image/vnd.dwg\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"dwg\"]\n  },\n  \"image/vnd.dxf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"dxf\"]\n  },\n  \"image/vnd.fastbidsheet\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"fbs\"]\n  },\n  \"image/vnd.fpx\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"fpx\"]\n  },\n  \"image/vnd.fst\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"fst\"]\n  },\n  \"image/vnd.fujixerox.edmics-mmr\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mmr\"]\n  },\n  \"image/vnd.fujixerox.edmics-rlc\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"rlc\"]\n  },\n  \"image/vnd.globalgraphics.pgb\": {\n    \"source\": \"iana\"\n  },\n  \"image/vnd.microsoft.icon\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"ico\"]\n  },\n  \"image/vnd.mix\": {\n    \"source\": \"iana\"\n  },\n  \"image/vnd.mozilla.apng\": {\n    \"source\": \"iana\"\n  },\n  \"image/vnd.ms-dds\": {\n    \"compressible\": true,\n    \"extensions\": [\"dds\"]\n  },\n  \"image/vnd.ms-modi\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mdi\"]\n  },\n  \"image/vnd.ms-photo\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"wdp\"]\n  },\n  \"image/vnd.net-fpx\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"npx\"]\n  },\n  \"image/vnd.pco.b16\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"b16\"]\n  },\n  \"image/vnd.radiance\": {\n    \"source\": \"iana\"\n  },\n  \"image/vnd.sealed.png\": {\n    \"source\": \"iana\"\n  },\n  \"image/vnd.sealedmedia.softseal.gif\": {\n    \"source\": \"iana\"\n  },\n  \"image/vnd.sealedmedia.softseal.jpg\": {\n    \"source\": \"iana\"\n  },\n  \"image/vnd.svf\": {\n    \"source\": \"iana\"\n  },\n  \"image/vnd.tencent.tap\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"tap\"]\n  },\n  \"image/vnd.valve.source.texture\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"vtf\"]\n  },\n  \"image/vnd.wap.wbmp\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"wbmp\"]\n  },\n  \"image/vnd.xiff\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"xif\"]\n  },\n  \"image/vnd.zbrush.pcx\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"pcx\"]\n  },\n  \"image/webp\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"webp\"]\n  },\n  \"image/wmf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"wmf\"]\n  },\n  \"image/x-3ds\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"3ds\"]\n  },\n  \"image/x-cmu-raster\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"ras\"]\n  },\n  \"image/x-cmx\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"cmx\"]\n  },\n  \"image/x-freehand\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"fh\",\"fhc\",\"fh4\",\"fh5\",\"fh7\"]\n  },\n  \"image/x-icon\": {\n    \"source\": \"apache\",\n    \"compressible\": true,\n    \"extensions\": [\"ico\"]\n  },\n  \"image/x-jng\": {\n    \"source\": \"nginx\",\n    \"extensions\": [\"jng\"]\n  },\n  \"image/x-mrsid-image\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sid\"]\n  },\n  \"image/x-ms-bmp\": {\n    \"source\": \"nginx\",\n    \"compressible\": true,\n    \"extensions\": [\"bmp\"]\n  },\n  \"image/x-pcx\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"pcx\"]\n  },\n  \"image/x-pict\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"pic\",\"pct\"]\n  },\n  \"image/x-portable-anymap\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"pnm\"]\n  },\n  \"image/x-portable-bitmap\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"pbm\"]\n  },\n  \"image/x-portable-graymap\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"pgm\"]\n  },\n  \"image/x-portable-pixmap\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"ppm\"]\n  },\n  \"image/x-rgb\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"rgb\"]\n  },\n  \"image/x-tga\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"tga\"]\n  },\n  \"image/x-xbitmap\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"xbm\"]\n  },\n  \"image/x-xcf\": {\n    \"compressible\": false\n  },\n  \"image/x-xpixmap\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"xpm\"]\n  },\n  \"image/x-xwindowdump\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"xwd\"]\n  },\n  \"message/cpim\": {\n    \"source\": \"iana\"\n  },\n  \"message/delivery-status\": {\n    \"source\": \"iana\"\n  },\n  \"message/disposition-notification\": {\n    \"source\": \"iana\",\n    \"extensions\": [\n      \"disposition-notification\"\n    ]\n  },\n  \"message/external-body\": {\n    \"source\": \"iana\"\n  },\n  \"message/feedback-report\": {\n    \"source\": \"iana\"\n  },\n  \"message/global\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"u8msg\"]\n  },\n  \"message/global-delivery-status\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"u8dsn\"]\n  },\n  \"message/global-disposition-notification\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"u8mdn\"]\n  },\n  \"message/global-headers\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"u8hdr\"]\n  },\n  \"message/http\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"message/imdn+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"message/news\": {\n    \"source\": \"iana\"\n  },\n  \"message/partial\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"message/rfc822\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"eml\",\"mime\"]\n  },\n  \"message/s-http\": {\n    \"source\": \"iana\"\n  },\n  \"message/sip\": {\n    \"source\": \"iana\"\n  },\n  \"message/sipfrag\": {\n    \"source\": \"iana\"\n  },\n  \"message/tracking-status\": {\n    \"source\": \"iana\"\n  },\n  \"message/vnd.si.simp\": {\n    \"source\": \"iana\"\n  },\n  \"message/vnd.wfa.wsc\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"wsc\"]\n  },\n  \"model/3mf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"3mf\"]\n  },\n  \"model/e57\": {\n    \"source\": \"iana\"\n  },\n  \"model/gltf+json\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"gltf\"]\n  },\n  \"model/gltf-binary\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"glb\"]\n  },\n  \"model/iges\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"igs\",\"iges\"]\n  },\n  \"model/mesh\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"msh\",\"mesh\",\"silo\"]\n  },\n  \"model/mtl\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mtl\"]\n  },\n  \"model/obj\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"obj\"]\n  },\n  \"model/step\": {\n    \"source\": \"iana\"\n  },\n  \"model/step+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"stpx\"]\n  },\n  \"model/step+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"stpz\"]\n  },\n  \"model/step-xml+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"stpxz\"]\n  },\n  \"model/stl\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"stl\"]\n  },\n  \"model/vnd.collada+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"dae\"]\n  },\n  \"model/vnd.dwf\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"dwf\"]\n  },\n  \"model/vnd.flatland.3dml\": {\n    \"source\": \"iana\"\n  },\n  \"model/vnd.gdl\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"gdl\"]\n  },\n  \"model/vnd.gs-gdl\": {\n    \"source\": \"apache\"\n  },\n  \"model/vnd.gs.gdl\": {\n    \"source\": \"iana\"\n  },\n  \"model/vnd.gtw\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"gtw\"]\n  },\n  \"model/vnd.moml+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"model/vnd.mts\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mts\"]\n  },\n  \"model/vnd.opengex\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ogex\"]\n  },\n  \"model/vnd.parasolid.transmit.binary\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"x_b\"]\n  },\n  \"model/vnd.parasolid.transmit.text\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"x_t\"]\n  },\n  \"model/vnd.pytha.pyox\": {\n    \"source\": \"iana\"\n  },\n  \"model/vnd.rosette.annotated-data-model\": {\n    \"source\": \"iana\"\n  },\n  \"model/vnd.sap.vds\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"vds\"]\n  },\n  \"model/vnd.usdz+zip\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"usdz\"]\n  },\n  \"model/vnd.valve.source.compiled-map\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"bsp\"]\n  },\n  \"model/vnd.vtu\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"vtu\"]\n  },\n  \"model/vrml\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"wrl\",\"vrml\"]\n  },\n  \"model/x3d+binary\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"x3db\",\"x3dbz\"]\n  },\n  \"model/x3d+fastinfoset\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"x3db\"]\n  },\n  \"model/x3d+vrml\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"x3dv\",\"x3dvz\"]\n  },\n  \"model/x3d+xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"x3d\",\"x3dz\"]\n  },\n  \"model/x3d-vrml\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"x3dv\"]\n  },\n  \"multipart/alternative\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"multipart/appledouble\": {\n    \"source\": \"iana\"\n  },\n  \"multipart/byteranges\": {\n    \"source\": \"iana\"\n  },\n  \"multipart/digest\": {\n    \"source\": \"iana\"\n  },\n  \"multipart/encrypted\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"multipart/form-data\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"multipart/header-set\": {\n    \"source\": \"iana\"\n  },\n  \"multipart/mixed\": {\n    \"source\": \"iana\"\n  },\n  \"multipart/multilingual\": {\n    \"source\": \"iana\"\n  },\n  \"multipart/parallel\": {\n    \"source\": \"iana\"\n  },\n  \"multipart/related\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"multipart/report\": {\n    \"source\": \"iana\"\n  },\n  \"multipart/signed\": {\n    \"source\": \"iana\",\n    \"compressible\": false\n  },\n  \"multipart/vnd.bint.med-plus\": {\n    \"source\": \"iana\"\n  },\n  \"multipart/voice-message\": {\n    \"source\": \"iana\"\n  },\n  \"multipart/x-mixed-replace\": {\n    \"source\": \"iana\"\n  },\n  \"text/1d-interleaved-parityfec\": {\n    \"source\": \"iana\"\n  },\n  \"text/cache-manifest\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"appcache\",\"manifest\"]\n  },\n  \"text/calendar\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ics\",\"ifb\"]\n  },\n  \"text/calender\": {\n    \"compressible\": true\n  },\n  \"text/cmd\": {\n    \"compressible\": true\n  },\n  \"text/coffeescript\": {\n    \"extensions\": [\"coffee\",\"litcoffee\"]\n  },\n  \"text/cql\": {\n    \"source\": \"iana\"\n  },\n  \"text/cql-expression\": {\n    \"source\": \"iana\"\n  },\n  \"text/cql-identifier\": {\n    \"source\": \"iana\"\n  },\n  \"text/css\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true,\n    \"extensions\": [\"css\"]\n  },\n  \"text/csv\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"csv\"]\n  },\n  \"text/csv-schema\": {\n    \"source\": \"iana\"\n  },\n  \"text/directory\": {\n    \"source\": \"iana\"\n  },\n  \"text/dns\": {\n    \"source\": \"iana\"\n  },\n  \"text/ecmascript\": {\n    \"source\": \"iana\"\n  },\n  \"text/encaprtp\": {\n    \"source\": \"iana\"\n  },\n  \"text/enriched\": {\n    \"source\": \"iana\"\n  },\n  \"text/fhirpath\": {\n    \"source\": \"iana\"\n  },\n  \"text/flexfec\": {\n    \"source\": \"iana\"\n  },\n  \"text/fwdred\": {\n    \"source\": \"iana\"\n  },\n  \"text/gff3\": {\n    \"source\": \"iana\"\n  },\n  \"text/grammar-ref-list\": {\n    \"source\": \"iana\"\n  },\n  \"text/html\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"html\",\"htm\",\"shtml\"]\n  },\n  \"text/jade\": {\n    \"extensions\": [\"jade\"]\n  },\n  \"text/javascript\": {\n    \"source\": \"iana\",\n    \"compressible\": true\n  },\n  \"text/jcr-cnd\": {\n    \"source\": \"iana\"\n  },\n  \"text/jsx\": {\n    \"compressible\": true,\n    \"extensions\": [\"jsx\"]\n  },\n  \"text/less\": {\n    \"compressible\": true,\n    \"extensions\": [\"less\"]\n  },\n  \"text/markdown\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"markdown\",\"md\"]\n  },\n  \"text/mathml\": {\n    \"source\": \"nginx\",\n    \"extensions\": [\"mml\"]\n  },\n  \"text/mdx\": {\n    \"compressible\": true,\n    \"extensions\": [\"mdx\"]\n  },\n  \"text/mizar\": {\n    \"source\": \"iana\"\n  },\n  \"text/n3\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true,\n    \"extensions\": [\"n3\"]\n  },\n  \"text/parameters\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\"\n  },\n  \"text/parityfec\": {\n    \"source\": \"iana\"\n  },\n  \"text/plain\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"txt\",\"text\",\"conf\",\"def\",\"list\",\"log\",\"in\",\"ini\"]\n  },\n  \"text/provenance-notation\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\"\n  },\n  \"text/prs.fallenstein.rst\": {\n    \"source\": \"iana\"\n  },\n  \"text/prs.lines.tag\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"dsc\"]\n  },\n  \"text/prs.prop.logic\": {\n    \"source\": \"iana\"\n  },\n  \"text/raptorfec\": {\n    \"source\": \"iana\"\n  },\n  \"text/red\": {\n    \"source\": \"iana\"\n  },\n  \"text/rfc822-headers\": {\n    \"source\": \"iana\"\n  },\n  \"text/richtext\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"rtx\"]\n  },\n  \"text/rtf\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"rtf\"]\n  },\n  \"text/rtp-enc-aescm128\": {\n    \"source\": \"iana\"\n  },\n  \"text/rtploopback\": {\n    \"source\": \"iana\"\n  },\n  \"text/rtx\": {\n    \"source\": \"iana\"\n  },\n  \"text/sgml\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"sgml\",\"sgm\"]\n  },\n  \"text/shaclc\": {\n    \"source\": \"iana\"\n  },\n  \"text/shex\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"shex\"]\n  },\n  \"text/slim\": {\n    \"extensions\": [\"slim\",\"slm\"]\n  },\n  \"text/spdx\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"spdx\"]\n  },\n  \"text/strings\": {\n    \"source\": \"iana\"\n  },\n  \"text/stylus\": {\n    \"extensions\": [\"stylus\",\"styl\"]\n  },\n  \"text/t140\": {\n    \"source\": \"iana\"\n  },\n  \"text/tab-separated-values\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"tsv\"]\n  },\n  \"text/troff\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"t\",\"tr\",\"roff\",\"man\",\"me\",\"ms\"]\n  },\n  \"text/turtle\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"extensions\": [\"ttl\"]\n  },\n  \"text/ulpfec\": {\n    \"source\": \"iana\"\n  },\n  \"text/uri-list\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"uri\",\"uris\",\"urls\"]\n  },\n  \"text/vcard\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"vcard\"]\n  },\n  \"text/vnd.a\": {\n    \"source\": \"iana\"\n  },\n  \"text/vnd.abc\": {\n    \"source\": \"iana\"\n  },\n  \"text/vnd.ascii-art\": {\n    \"source\": \"iana\"\n  },\n  \"text/vnd.curl\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"curl\"]\n  },\n  \"text/vnd.curl.dcurl\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"dcurl\"]\n  },\n  \"text/vnd.curl.mcurl\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"mcurl\"]\n  },\n  \"text/vnd.curl.scurl\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"scurl\"]\n  },\n  \"text/vnd.debian.copyright\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\"\n  },\n  \"text/vnd.dmclientscript\": {\n    \"source\": \"iana\"\n  },\n  \"text/vnd.dvb.subtitle\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"sub\"]\n  },\n  \"text/vnd.esmertec.theme-descriptor\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\"\n  },\n  \"text/vnd.familysearch.gedcom\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ged\"]\n  },\n  \"text/vnd.ficlab.flt\": {\n    \"source\": \"iana\"\n  },\n  \"text/vnd.fly\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"fly\"]\n  },\n  \"text/vnd.fmi.flexstor\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"flx\"]\n  },\n  \"text/vnd.gml\": {\n    \"source\": \"iana\"\n  },\n  \"text/vnd.graphviz\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"gv\"]\n  },\n  \"text/vnd.hans\": {\n    \"source\": \"iana\"\n  },\n  \"text/vnd.hgl\": {\n    \"source\": \"iana\"\n  },\n  \"text/vnd.in3d.3dml\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"3dml\"]\n  },\n  \"text/vnd.in3d.spot\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"spot\"]\n  },\n  \"text/vnd.iptc.newsml\": {\n    \"source\": \"iana\"\n  },\n  \"text/vnd.iptc.nitf\": {\n    \"source\": \"iana\"\n  },\n  \"text/vnd.latex-z\": {\n    \"source\": \"iana\"\n  },\n  \"text/vnd.motorola.reflex\": {\n    \"source\": \"iana\"\n  },\n  \"text/vnd.ms-mediapackage\": {\n    \"source\": \"iana\"\n  },\n  \"text/vnd.net2phone.commcenter.command\": {\n    \"source\": \"iana\"\n  },\n  \"text/vnd.radisys.msml-basic-layout\": {\n    \"source\": \"iana\"\n  },\n  \"text/vnd.senx.warpscript\": {\n    \"source\": \"iana\"\n  },\n  \"text/vnd.si.uricatalogue\": {\n    \"source\": \"iana\"\n  },\n  \"text/vnd.sosi\": {\n    \"source\": \"iana\"\n  },\n  \"text/vnd.sun.j2me.app-descriptor\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"extensions\": [\"jad\"]\n  },\n  \"text/vnd.trolltech.linguist\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\"\n  },\n  \"text/vnd.wap.si\": {\n    \"source\": \"iana\"\n  },\n  \"text/vnd.wap.sl\": {\n    \"source\": \"iana\"\n  },\n  \"text/vnd.wap.wml\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"wml\"]\n  },\n  \"text/vnd.wap.wmlscript\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"wmls\"]\n  },\n  \"text/vtt\": {\n    \"source\": \"iana\",\n    \"charset\": \"UTF-8\",\n    \"compressible\": true,\n    \"extensions\": [\"vtt\"]\n  },\n  \"text/x-asm\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"s\",\"asm\"]\n  },\n  \"text/x-c\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"c\",\"cc\",\"cxx\",\"cpp\",\"h\",\"hh\",\"dic\"]\n  },\n  \"text/x-component\": {\n    \"source\": \"nginx\",\n    \"extensions\": [\"htc\"]\n  },\n  \"text/x-fortran\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"f\",\"for\",\"f77\",\"f90\"]\n  },\n  \"text/x-gwt-rpc\": {\n    \"compressible\": true\n  },\n  \"text/x-handlebars-template\": {\n    \"extensions\": [\"hbs\"]\n  },\n  \"text/x-java-source\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"java\"]\n  },\n  \"text/x-jquery-tmpl\": {\n    \"compressible\": true\n  },\n  \"text/x-lua\": {\n    \"extensions\": [\"lua\"]\n  },\n  \"text/x-markdown\": {\n    \"compressible\": true,\n    \"extensions\": [\"mkd\"]\n  },\n  \"text/x-nfo\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"nfo\"]\n  },\n  \"text/x-opml\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"opml\"]\n  },\n  \"text/x-org\": {\n    \"compressible\": true,\n    \"extensions\": [\"org\"]\n  },\n  \"text/x-pascal\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"p\",\"pas\"]\n  },\n  \"text/x-processing\": {\n    \"compressible\": true,\n    \"extensions\": [\"pde\"]\n  },\n  \"text/x-sass\": {\n    \"extensions\": [\"sass\"]\n  },\n  \"text/x-scss\": {\n    \"extensions\": [\"scss\"]\n  },\n  \"text/x-setext\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"etx\"]\n  },\n  \"text/x-sfv\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"sfv\"]\n  },\n  \"text/x-suse-ymp\": {\n    \"compressible\": true,\n    \"extensions\": [\"ymp\"]\n  },\n  \"text/x-uuencode\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"uu\"]\n  },\n  \"text/x-vcalendar\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"vcs\"]\n  },\n  \"text/x-vcard\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"vcf\"]\n  },\n  \"text/xml\": {\n    \"source\": \"iana\",\n    \"compressible\": true,\n    \"extensions\": [\"xml\"]\n  },\n  \"text/xml-external-parsed-entity\": {\n    \"source\": \"iana\"\n  },\n  \"text/yaml\": {\n    \"compressible\": true,\n    \"extensions\": [\"yaml\",\"yml\"]\n  },\n  \"video/1d-interleaved-parityfec\": {\n    \"source\": \"iana\"\n  },\n  \"video/3gpp\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"3gp\",\"3gpp\"]\n  },\n  \"video/3gpp-tt\": {\n    \"source\": \"iana\"\n  },\n  \"video/3gpp2\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"3g2\"]\n  },\n  \"video/av1\": {\n    \"source\": \"iana\"\n  },\n  \"video/bmpeg\": {\n    \"source\": \"iana\"\n  },\n  \"video/bt656\": {\n    \"source\": \"iana\"\n  },\n  \"video/celb\": {\n    \"source\": \"iana\"\n  },\n  \"video/dv\": {\n    \"source\": \"iana\"\n  },\n  \"video/encaprtp\": {\n    \"source\": \"iana\"\n  },\n  \"video/ffv1\": {\n    \"source\": \"iana\"\n  },\n  \"video/flexfec\": {\n    \"source\": \"iana\"\n  },\n  \"video/h261\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"h261\"]\n  },\n  \"video/h263\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"h263\"]\n  },\n  \"video/h263-1998\": {\n    \"source\": \"iana\"\n  },\n  \"video/h263-2000\": {\n    \"source\": \"iana\"\n  },\n  \"video/h264\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"h264\"]\n  },\n  \"video/h264-rcdo\": {\n    \"source\": \"iana\"\n  },\n  \"video/h264-svc\": {\n    \"source\": \"iana\"\n  },\n  \"video/h265\": {\n    \"source\": \"iana\"\n  },\n  \"video/iso.segment\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"m4s\"]\n  },\n  \"video/jpeg\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"jpgv\"]\n  },\n  \"video/jpeg2000\": {\n    \"source\": \"iana\"\n  },\n  \"video/jpm\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"jpm\",\"jpgm\"]\n  },\n  \"video/jxsv\": {\n    \"source\": \"iana\"\n  },\n  \"video/mj2\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mj2\",\"mjp2\"]\n  },\n  \"video/mp1s\": {\n    \"source\": \"iana\"\n  },\n  \"video/mp2p\": {\n    \"source\": \"iana\"\n  },\n  \"video/mp2t\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"ts\"]\n  },\n  \"video/mp4\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"mp4\",\"mp4v\",\"mpg4\"]\n  },\n  \"video/mp4v-es\": {\n    \"source\": \"iana\"\n  },\n  \"video/mpeg\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"mpeg\",\"mpg\",\"mpe\",\"m1v\",\"m2v\"]\n  },\n  \"video/mpeg4-generic\": {\n    \"source\": \"iana\"\n  },\n  \"video/mpv\": {\n    \"source\": \"iana\"\n  },\n  \"video/nv\": {\n    \"source\": \"iana\"\n  },\n  \"video/ogg\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"ogv\"]\n  },\n  \"video/parityfec\": {\n    \"source\": \"iana\"\n  },\n  \"video/pointer\": {\n    \"source\": \"iana\"\n  },\n  \"video/quicktime\": {\n    \"source\": \"iana\",\n    \"compressible\": false,\n    \"extensions\": [\"qt\",\"mov\"]\n  },\n  \"video/raptorfec\": {\n    \"source\": \"iana\"\n  },\n  \"video/raw\": {\n    \"source\": \"iana\"\n  },\n  \"video/rtp-enc-aescm128\": {\n    \"source\": \"iana\"\n  },\n  \"video/rtploopback\": {\n    \"source\": \"iana\"\n  },\n  \"video/rtx\": {\n    \"source\": \"iana\"\n  },\n  \"video/scip\": {\n    \"source\": \"iana\"\n  },\n  \"video/smpte291\": {\n    \"source\": \"iana\"\n  },\n  \"video/smpte292m\": {\n    \"source\": \"iana\"\n  },\n  \"video/ulpfec\": {\n    \"source\": \"iana\"\n  },\n  \"video/vc1\": {\n    \"source\": \"iana\"\n  },\n  \"video/vc2\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.cctv\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.dece.hd\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"uvh\",\"uvvh\"]\n  },\n  \"video/vnd.dece.mobile\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"uvm\",\"uvvm\"]\n  },\n  \"video/vnd.dece.mp4\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.dece.pd\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"uvp\",\"uvvp\"]\n  },\n  \"video/vnd.dece.sd\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"uvs\",\"uvvs\"]\n  },\n  \"video/vnd.dece.video\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"uvv\",\"uvvv\"]\n  },\n  \"video/vnd.directv.mpeg\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.directv.mpeg-tts\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.dlna.mpeg-tts\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.dvb.file\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"dvb\"]\n  },\n  \"video/vnd.fvt\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"fvt\"]\n  },\n  \"video/vnd.hns.video\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.iptvforum.1dparityfec-1010\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.iptvforum.1dparityfec-2005\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.iptvforum.2dparityfec-1010\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.iptvforum.2dparityfec-2005\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.iptvforum.ttsavc\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.iptvforum.ttsmpeg2\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.motorola.video\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.motorola.videop\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.mpegurl\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"mxu\",\"m4u\"]\n  },\n  \"video/vnd.ms-playready.media.pyv\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"pyv\"]\n  },\n  \"video/vnd.nokia.interleaved-multimedia\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.nokia.mp4vr\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.nokia.videovoip\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.objectvideo\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.radgamettools.bink\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.radgamettools.smacker\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.sealed.mpeg1\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.sealed.mpeg4\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.sealed.swf\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.sealedmedia.softseal.mov\": {\n    \"source\": \"iana\"\n  },\n  \"video/vnd.uvvu.mp4\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"uvu\",\"uvvu\"]\n  },\n  \"video/vnd.vivo\": {\n    \"source\": \"iana\",\n    \"extensions\": [\"viv\"]\n  },\n  \"video/vnd.youtube.yt\": {\n    \"source\": \"iana\"\n  },\n  \"video/vp8\": {\n    \"source\": \"iana\"\n  },\n  \"video/vp9\": {\n    \"source\": \"iana\"\n  },\n  \"video/webm\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"webm\"]\n  },\n  \"video/x-f4v\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"f4v\"]\n  },\n  \"video/x-fli\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"fli\"]\n  },\n  \"video/x-flv\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"flv\"]\n  },\n  \"video/x-m4v\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"m4v\"]\n  },\n  \"video/x-matroska\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"mkv\",\"mk3d\",\"mks\"]\n  },\n  \"video/x-mng\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"mng\"]\n  },\n  \"video/x-ms-asf\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"asf\",\"asx\"]\n  },\n  \"video/x-ms-vob\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"vob\"]\n  },\n  \"video/x-ms-wm\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"wm\"]\n  },\n  \"video/x-ms-wmv\": {\n    \"source\": \"apache\",\n    \"compressible\": false,\n    \"extensions\": [\"wmv\"]\n  },\n  \"video/x-ms-wmx\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"wmx\"]\n  },\n  \"video/x-ms-wvx\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"wvx\"]\n  },\n  \"video/x-msvideo\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"avi\"]\n  },\n  \"video/x-sgi-movie\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"movie\"]\n  },\n  \"video/x-smv\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"smv\"]\n  },\n  \"x-conference/x-cooltalk\": {\n    \"source\": \"apache\",\n    \"extensions\": [\"ice\"]\n  },\n  \"x-shader/x-fragment\": {\n    \"compressible\": true\n  },\n  \"x-shader/x-vertex\": {\n    \"compressible\": true\n  }\n}\n", "/*!\n * mime-db\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2015-2022 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n/**\n * Module exports.\n */\n\nmodule.exports = require('./db.json')\n", "/*!\n * mime-types\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar db = require('mime-db')\nvar extname = require('path').extname\n\n/**\n * Module variables.\n * @private\n */\n\nvar EXTRACT_TYPE_REGEXP = /^\\s*([^;\\s]*)(?:;|\\s|$)/\nvar TEXT_TYPE_REGEXP = /^text\\//i\n\n/**\n * Module exports.\n * @public\n */\n\nexports.charset = charset\nexports.charsets = { lookup: charset }\nexports.contentType = contentType\nexports.extension = extension\nexports.extensions = Object.create(null)\nexports.lookup = lookup\nexports.types = Object.create(null)\n\n// Populate the extensions/types maps\npopulateMaps(exports.extensions, exports.types)\n\n/**\n * Get the default charset for a MIME type.\n *\n * @param {string} type\n * @return {boolean|string}\n */\n\nfunction charset (type) {\n  if (!type || typeof type !== 'string') {\n    return false\n  }\n\n  // TODO: use media-typer\n  var match = EXTRACT_TYPE_REGEXP.exec(type)\n  var mime = match && db[match[1].toLowerCase()]\n\n  if (mime && mime.charset) {\n    return mime.charset\n  }\n\n  // default text/* to utf-8\n  if (match && TEXT_TYPE_REGEXP.test(match[1])) {\n    return 'UTF-8'\n  }\n\n  return false\n}\n\n/**\n * Create a full Content-Type header given a MIME type or extension.\n *\n * @param {string} str\n * @return {boolean|string}\n */\n\nfunction contentType (str) {\n  // TODO: should this even be in this module?\n  if (!str || typeof str !== 'string') {\n    return false\n  }\n\n  var mime = str.indexOf('/') === -1\n    ? exports.lookup(str)\n    : str\n\n  if (!mime) {\n    return false\n  }\n\n  // TODO: use content-type or other module\n  if (mime.indexOf('charset') === -1) {\n    var charset = exports.charset(mime)\n    if (charset) mime += '; charset=' + charset.toLowerCase()\n  }\n\n  return mime\n}\n\n/**\n * Get the default extension for a MIME type.\n *\n * @param {string} type\n * @return {boolean|string}\n */\n\nfunction extension (type) {\n  if (!type || typeof type !== 'string') {\n    return false\n  }\n\n  // TODO: use media-typer\n  var match = EXTRACT_TYPE_REGEXP.exec(type)\n\n  // get extensions\n  var exts = match && exports.extensions[match[1].toLowerCase()]\n\n  if (!exts || !exts.length) {\n    return false\n  }\n\n  return exts[0]\n}\n\n/**\n * Lookup the MIME type for a file path/extension.\n *\n * @param {string} path\n * @return {boolean|string}\n */\n\nfunction lookup (path) {\n  if (!path || typeof path !== 'string') {\n    return false\n  }\n\n  // get the extension (\"ext\" or \".ext\" or full path)\n  var extension = extname('x.' + path)\n    .toLowerCase()\n    .substr(1)\n\n  if (!extension) {\n    return false\n  }\n\n  return exports.types[extension] || false\n}\n\n/**\n * Populate the extensions and types maps.\n * @private\n */\n\nfunction populateMaps (extensions, types) {\n  // source preference (least -> most)\n  var preference = ['nginx', 'apache', undefined, 'iana']\n\n  Object.keys(db).forEach(function forEachMimeType (type) {\n    var mime = db[type]\n    var exts = mime.extensions\n\n    if (!exts || !exts.length) {\n      return\n    }\n\n    // mime -> extensions\n    extensions[type] = exts\n\n    // extension -> mime\n    for (var i = 0; i < exts.length; i++) {\n      var extension = exts[i]\n\n      if (types[extension]) {\n        var from = preference.indexOf(db[types[extension]].source)\n        var to = preference.indexOf(mime.source)\n\n        if (types[extension] !== 'application/octet-stream' &&\n          (from > to || (from === to && types[extension].substr(0, 12) === 'application/'))) {\n          // skip the remapping\n          continue\n        }\n      }\n\n      // set the extension -> mime\n      types[extension] = type\n    }\n  })\n}\n", "module.exports = defer;\n\n/**\n * Runs provided function on next iteration of the event loop\n *\n * @param {function} fn - function to run\n */\nfunction defer(fn)\n{\n  var nextTick = typeof setImmediate == 'function'\n    ? setImmediate\n    : (\n      typeof process == 'object' && typeof process.nextTick == 'function'\n      ? process.nextTick\n      : null\n    );\n\n  if (nextTick)\n  {\n    nextTick(fn);\n  }\n  else\n  {\n    setTimeout(fn, 0);\n  }\n}\n", "var defer = require('./defer.js');\n\n// API\nmodule.exports = async;\n\n/**\n * Runs provided callback asynchronously\n * even if callback itself is not\n *\n * @param   {function} callback - callback to invoke\n * @returns {function} - augmented callback\n */\nfunction async(callback)\n{\n  var isAsync = false;\n\n  // check if async happened\n  defer(function() { isAsync = true; });\n\n  return function async_callback(err, result)\n  {\n    if (isAsync)\n    {\n      callback(err, result);\n    }\n    else\n    {\n      defer(function nextTick_callback()\n      {\n        callback(err, result);\n      });\n    }\n  };\n}\n", "// API\nmodule.exports = abort;\n\n/**\n * Aborts leftover active jobs\n *\n * @param {object} state - current state object\n */\nfunction abort(state)\n{\n  Object.keys(state.jobs).forEach(clean.bind(state));\n\n  // reset leftover jobs\n  state.jobs = {};\n}\n\n/**\n * Cleans up leftover job by invoking abort function for the provided job id\n *\n * @this  state\n * @param {string|number} key - job id to abort\n */\nfunction clean(key)\n{\n  if (typeof this.jobs[key] == 'function')\n  {\n    this.jobs[key]();\n  }\n}\n", "var async = require('./async.js')\n  , abort = require('./abort.js')\n  ;\n\n// API\nmodule.exports = iterate;\n\n/**\n * Iterates over each job object\n *\n * @param {array|object} list - array or object (named list) to iterate over\n * @param {function} iterator - iterator to run\n * @param {object} state - current job status\n * @param {function} callback - invoked when all elements processed\n */\nfunction iterate(list, iterator, state, callback)\n{\n  // store current index\n  var key = state['keyedList'] ? state['keyedList'][state.index] : state.index;\n\n  state.jobs[key] = runJob(iterator, key, list[key], function(error, output)\n  {\n    // don't repeat yourself\n    // skip secondary callbacks\n    if (!(key in state.jobs))\n    {\n      return;\n    }\n\n    // clean up jobs\n    delete state.jobs[key];\n\n    if (error)\n    {\n      // don't process rest of the results\n      // stop still active jobs\n      // and reset the list\n      abort(state);\n    }\n    else\n    {\n      state.results[key] = output;\n    }\n\n    // return salvaged results\n    callback(error, state.results);\n  });\n}\n\n/**\n * Runs iterator over provided job element\n *\n * @param   {function} iterator - iterator to invoke\n * @param   {string|number} key - key/index of the element in the list of jobs\n * @param   {mixed} item - job description\n * @param   {function} callback - invoked after iterator is done with the job\n * @returns {function|mixed} - job abort function or something else\n */\nfunction runJob(iterator, key, item, callback)\n{\n  var aborter;\n\n  // allow shortcut if iterator expects only two arguments\n  if (iterator.length == 2)\n  {\n    aborter = iterator(item, async(callback));\n  }\n  // otherwise go with full three arguments\n  else\n  {\n    aborter = iterator(item, key, async(callback));\n  }\n\n  return aborter;\n}\n", "// API\nmodule.exports = state;\n\n/**\n * Creates initial state object\n * for iteration over list\n *\n * @param   {array|object} list - list to iterate over\n * @param   {function|null} sortMethod - function to use for keys sort,\n *                                     or `null` to keep them as is\n * @returns {object} - initial state object\n */\nfunction state(list, sortMethod)\n{\n  var isNamedList = !Array.isArray(list)\n    , initState =\n    {\n      index    : 0,\n      keyedList: isNamedList || sortMethod ? Object.keys(list) : null,\n      jobs     : {},\n      results  : isNamedList ? {} : [],\n      size     : isNamedList ? Object.keys(list).length : list.length\n    }\n    ;\n\n  if (sortMethod)\n  {\n    // sort array keys based on it's values\n    // sort object's keys just on own merit\n    initState.keyedList.sort(isNamedList ? sortMethod : function(a, b)\n    {\n      return sortMethod(list[a], list[b]);\n    });\n  }\n\n  return initState;\n}\n", "var abort = require('./abort.js')\n  , async = require('./async.js')\n  ;\n\n// API\nmodule.exports = terminator;\n\n/**\n * Terminates jobs in the attached state context\n *\n * @this  AsyncKitState#\n * @param {function} callback - final callback to invoke after termination\n */\nfunction terminator(callback)\n{\n  if (!Object.keys(this.jobs).length)\n  {\n    return;\n  }\n\n  // fast forward iteration index\n  this.index = this.size;\n\n  // abort jobs\n  abort(this);\n\n  // send back results we have so far\n  async(callback)(null, this.results);\n}\n", "var iterate    = require('./lib/iterate.js')\n  , initState  = require('./lib/state.js')\n  , terminator = require('./lib/terminator.js')\n  ;\n\n// Public API\nmodule.exports = parallel;\n\n/**\n * Runs iterator over provided array elements in parallel\n *\n * @param   {array|object} list - array or object (named list) to iterate over\n * @param   {function} iterator - iterator to run\n * @param   {function} callback - invoked when all elements processed\n * @returns {function} - jobs terminator\n */\nfunction parallel(list, iterator, callback)\n{\n  var state = initState(list);\n\n  while (state.index < (state['keyedList'] || list).length)\n  {\n    iterate(list, iterator, state, function(error, result)\n    {\n      if (error)\n      {\n        callback(error, result);\n        return;\n      }\n\n      // looks like it's the last one\n      if (Object.keys(state.jobs).length === 0)\n      {\n        callback(null, state.results);\n        return;\n      }\n    });\n\n    state.index++;\n  }\n\n  return terminator.bind(state, callback);\n}\n", "var iterate    = require('./lib/iterate.js')\n  , initState  = require('./lib/state.js')\n  , terminator = require('./lib/terminator.js')\n  ;\n\n// Public API\nmodule.exports = serialOrdered;\n// sorting helpers\nmodule.exports.ascending  = ascending;\nmodule.exports.descending = descending;\n\n/**\n * Runs iterator over provided sorted array elements in series\n *\n * @param   {array|object} list - array or object (named list) to iterate over\n * @param   {function} iterator - iterator to run\n * @param   {function} sortMethod - custom sort function\n * @param   {function} callback - invoked when all elements processed\n * @returns {function} - jobs terminator\n */\nfunction serialOrdered(list, iterator, sortMethod, callback)\n{\n  var state = initState(list, sortMethod);\n\n  iterate(list, iterator, state, function iteratorHandler(error, result)\n  {\n    if (error)\n    {\n      callback(error, result);\n      return;\n    }\n\n    state.index++;\n\n    // are we there yet?\n    if (state.index < (state['keyedList'] || list).length)\n    {\n      iterate(list, iterator, state, iteratorHandler);\n      return;\n    }\n\n    // done here\n    callback(null, state.results);\n  });\n\n  return terminator.bind(state, callback);\n}\n\n/*\n * -- Sort methods\n */\n\n/**\n * sort helper to sort array elements in ascending order\n *\n * @param   {mixed} a - an item to compare\n * @param   {mixed} b - an item to compare\n * @returns {number} - comparison result\n */\nfunction ascending(a, b)\n{\n  return a < b ? -1 : a > b ? 1 : 0;\n}\n\n/**\n * sort helper to sort array elements in descending order\n *\n * @param   {mixed} a - an item to compare\n * @param   {mixed} b - an item to compare\n * @returns {number} - comparison result\n */\nfunction descending(a, b)\n{\n  return -1 * ascending(a, b);\n}\n", "var serialOrdered = require('./serialOrdered.js');\n\n// Public API\nmodule.exports = serial;\n\n/**\n * Runs iterator over provided array elements in series\n *\n * @param   {array|object} list - array or object (named list) to iterate over\n * @param   {function} iterator - iterator to run\n * @param   {function} callback - invoked when all elements processed\n * @returns {function} - jobs terminator\n */\nfunction serial(list, iterator, callback)\n{\n  return serialOrdered(list, iterator, null, callback);\n}\n", "module.exports =\n{\n  parallel      : require('./parallel.js'),\n  serial        : require('./serial.js'),\n  serialOrdered : require('./serialOrdered.js')\n};\n", "'use strict';\n\n/** @type {import('.')} */\nmodule.exports = Object;\n", "'use strict';\n\n/** @type {import('.')} */\nmodule.exports = Error;\n", "'use strict';\n\n/** @type {import('./eval')} */\nmodule.exports = EvalError;\n", "'use strict';\n\n/** @type {import('./range')} */\nmodule.exports = RangeError;\n", "'use strict';\n\n/** @type {import('./ref')} */\nmodule.exports = ReferenceError;\n", "'use strict';\n\n/** @type {import('./syntax')} */\nmodule.exports = SyntaxError;\n", "'use strict';\n\n/** @type {import('./type')} */\nmodule.exports = TypeError;\n", "'use strict';\n\n/** @type {import('./uri')} */\nmodule.exports = URIError;\n", "'use strict';\n\n/** @type {import('./abs')} */\nmodule.exports = Math.abs;\n", "'use strict';\n\n/** @type {import('./floor')} */\nmodule.exports = Math.floor;\n", "'use strict';\n\n/** @type {import('./max')} */\nmodule.exports = Math.max;\n", "'use strict';\n\n/** @type {import('./min')} */\nmodule.exports = Math.min;\n", "'use strict';\n\n/** @type {import('./pow')} */\nmodule.exports = Math.pow;\n", "'use strict';\n\n/** @type {import('./round')} */\nmodule.exports = Math.round;\n", "'use strict';\n\n/** @type {import('./isNaN')} */\nmodule.exports = Number.isNaN || function isNaN(a) {\n\treturn a !== a;\n};\n", "'use strict';\n\nvar $isNaN = require('./isNaN');\n\n/** @type {import('./sign')} */\nmodule.exports = function sign(number) {\n\tif ($isNaN(number) || number === 0) {\n\t\treturn number;\n\t}\n\treturn number < 0 ? -1 : +1;\n};\n", "'use strict';\n\n/** @type {import('./gOPD')} */\nmodule.exports = Object.getOwnPropertyDescriptor;\n", "'use strict';\n\n/** @type {import('.')} */\nvar $gOPD = require('./gOPD');\n\nif ($gOPD) {\n\ttry {\n\t\t$gOPD([], 'length');\n\t} catch (e) {\n\t\t// IE 8 has a broken gOPD\n\t\t$gOPD = null;\n\t}\n}\n\nmodule.exports = $gOPD;\n", "'use strict';\n\n/** @type {import('.')} */\nvar $defineProperty = Object.defineProperty || false;\nif ($defineProperty) {\n\ttry {\n\t\t$defineProperty({}, 'a', { value: 1 });\n\t} catch (e) {\n\t\t// IE 8 has a broken defineProperty\n\t\t$defineProperty = false;\n\t}\n}\n\nmodule.exports = $defineProperty;\n", "'use strict';\n\n/** @type {import('./shams')} */\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\t/** @type {{ [k in symbol]?: unknown }} */\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (var _ in obj) { return false; } // eslint-disable-line no-restricted-syntax, no-unreachable-loop\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\t// eslint-disable-next-line no-extra-parens\n\t\tvar descriptor = /** @type {PropertyDescriptor} */ (Object.getOwnPropertyDescriptor(obj, sym));\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n", "'use strict';\n\nvar origSymbol = typeof Symbol !== 'undefined' && Symbol;\nvar hasSymbolSham = require('./shams');\n\n/** @type {import('.')} */\nmodule.exports = function hasNativeSymbols() {\n\tif (typeof origSymbol !== 'function') { return false; }\n\tif (typeof Symbol !== 'function') { return false; }\n\tif (typeof origSymbol('foo') !== 'symbol') { return false; }\n\tif (typeof Symbol('bar') !== 'symbol') { return false; }\n\n\treturn hasSymbolSham();\n};\n", "'use strict';\n\n/** @type {import('./Reflect.getPrototypeOf')} */\nmodule.exports = (typeof Reflect !== 'undefined' && Reflect.getPrototypeOf) || null;\n", "'use strict';\n\nvar $Object = require('es-object-atoms');\n\n/** @type {import('./Object.getPrototypeOf')} */\nmodule.exports = $Object.getPrototypeOf || null;\n", "'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar toStr = Object.prototype.toString;\nvar max = Math.max;\nvar funcType = '[object Function]';\n\nvar concatty = function concatty(a, b) {\n    var arr = [];\n\n    for (var i = 0; i < a.length; i += 1) {\n        arr[i] = a[i];\n    }\n    for (var j = 0; j < b.length; j += 1) {\n        arr[j + a.length] = b[j];\n    }\n\n    return arr;\n};\n\nvar slicy = function slicy(arrLike, offset) {\n    var arr = [];\n    for (var i = offset || 0, j = 0; i < arrLike.length; i += 1, j += 1) {\n        arr[j] = arrLike[i];\n    }\n    return arr;\n};\n\nvar joiny = function (arr, joiner) {\n    var str = '';\n    for (var i = 0; i < arr.length; i += 1) {\n        str += arr[i];\n        if (i + 1 < arr.length) {\n            str += joiner;\n        }\n    }\n    return str;\n};\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.apply(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slicy(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                concatty(args, arguments)\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        }\n        return target.apply(\n            that,\n            concatty(args, arguments)\n        );\n\n    };\n\n    var boundLength = max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs[i] = '$' + i;\n    }\n\n    bound = Function('binder', 'return function (' + joiny(boundArgs, ',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n", "'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n", "'use strict';\n\n/** @type {import('./functionCall')} */\nmodule.exports = Function.prototype.call;\n", "'use strict';\n\n/** @type {import('./functionApply')} */\nmodule.exports = Function.prototype.apply;\n", "'use strict';\n\n/** @type {import('./reflectApply')} */\nmodule.exports = typeof Reflect !== 'undefined' && Reflect && Reflect.apply;\n", "'use strict';\n\nvar bind = require('function-bind');\n\nvar $apply = require('./functionApply');\nvar $call = require('./functionCall');\nvar $reflectApply = require('./reflectApply');\n\n/** @type {import('./actualApply')} */\nmodule.exports = $reflectApply || bind.call($call, $apply);\n", "'use strict';\n\nvar bind = require('function-bind');\nvar $TypeError = require('es-errors/type');\n\nvar $call = require('./functionCall');\nvar $actualApply = require('./actualApply');\n\n/** @type {(args: [Function, thisArg?: unknown, ...args: unknown[]]) => Function} TODO FIXME, find a way to use import('.') */\nmodule.exports = function callBindBasic(args) {\n\tif (args.length < 1 || typeof args[0] !== 'function') {\n\t\tthrow new $TypeError('a function is required');\n\t}\n\treturn $actualApply(bind, $call, args);\n};\n", "'use strict';\n\nvar callBind = require('call-bind-apply-helpers');\nvar gOPD = require('gopd');\n\nvar hasProtoAccessor;\ntry {\n\t// eslint-disable-next-line no-extra-parens, no-proto\n\thasProtoAccessor = /** @type {{ __proto__?: typeof Array.prototype }} */ ([]).__proto__ === Array.prototype;\n} catch (e) {\n\tif (!e || typeof e !== 'object' || !('code' in e) || e.code !== 'ERR_PROTO_ACCESS') {\n\t\tthrow e;\n\t}\n}\n\n// eslint-disable-next-line no-extra-parens\nvar desc = !!hasProtoAccessor && gOPD && gOPD(Object.prototype, /** @type {keyof typeof Object.prototype} */ ('__proto__'));\n\nvar $Object = Object;\nvar $getPrototypeOf = $Object.getPrototypeOf;\n\n/** @type {import('./get')} */\nmodule.exports = desc && typeof desc.get === 'function'\n\t? callBind([desc.get])\n\t: typeof $getPrototypeOf === 'function'\n\t\t? /** @type {import('./get')} */ function getDunder(value) {\n\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\treturn $getPrototypeOf(value == null ? value : $Object(value));\n\t\t}\n\t\t: false;\n", "'use strict';\n\nvar reflectGetProto = require('./Reflect.getPrototypeOf');\nvar originalGetProto = require('./Object.getPrototypeOf');\n\nvar getDunderProto = require('dunder-proto/get');\n\n/** @type {import('.')} */\nmodule.exports = reflectGetProto\n\t? function getProto(O) {\n\t\t// @ts-expect-error TS can't narrow inside a closure, for some reason\n\t\treturn reflectGetProto(O);\n\t}\n\t: originalGetProto\n\t\t? function getProto(O) {\n\t\t\tif (!O || (typeof O !== 'object' && typeof O !== 'function')) {\n\t\t\t\tthrow new TypeError('getProto: not an object');\n\t\t\t}\n\t\t\t// @ts-expect-error TS can't narrow inside a closure, for some reason\n\t\t\treturn originalGetProto(O);\n\t\t}\n\t\t: getDunderProto\n\t\t\t? function getProto(O) {\n\t\t\t\t// @ts-expect-error TS can't narrow inside a closure, for some reason\n\t\t\t\treturn getDunderProto(O);\n\t\t\t}\n\t\t\t: null;\n", "'use strict';\n\nvar call = Function.prototype.call;\nvar $hasOwn = Object.prototype.hasOwnProperty;\nvar bind = require('function-bind');\n\n/** @type {import('.')} */\nmodule.exports = bind.call(call, $hasOwn);\n", "'use strict';\n\nvar undefined;\n\nvar $Object = require('es-object-atoms');\n\nvar $Error = require('es-errors');\nvar $EvalError = require('es-errors/eval');\nvar $RangeError = require('es-errors/range');\nvar $ReferenceError = require('es-errors/ref');\nvar $SyntaxError = require('es-errors/syntax');\nvar $TypeError = require('es-errors/type');\nvar $URIError = require('es-errors/uri');\n\nvar abs = require('math-intrinsics/abs');\nvar floor = require('math-intrinsics/floor');\nvar max = require('math-intrinsics/max');\nvar min = require('math-intrinsics/min');\nvar pow = require('math-intrinsics/pow');\nvar round = require('math-intrinsics/round');\nvar sign = require('math-intrinsics/sign');\n\nvar $Function = Function;\n\n// eslint-disable-next-line consistent-return\nvar getEvalledConstructor = function (expressionSyntax) {\n\ttry {\n\t\treturn $Function('\"use strict\"; return (' + expressionSyntax + ').constructor;')();\n\t} catch (e) {}\n};\n\nvar $gOPD = require('gopd');\nvar $defineProperty = require('es-define-property');\n\nvar throwTypeError = function () {\n\tthrow new $TypeError();\n};\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\n\nvar getProto = require('get-proto');\nvar $ObjectGPO = require('get-proto/Object.getPrototypeOf');\nvar $ReflectGPO = require('get-proto/Reflect.getPrototypeOf');\n\nvar $apply = require('call-bind-apply-helpers/functionApply');\nvar $call = require('call-bind-apply-helpers/functionCall');\n\nvar needsEval = {};\n\nvar TypedArray = typeof Uint8Array === 'undefined' || !getProto ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t__proto__: null,\n\t'%AggregateError%': typeof AggregateError === 'undefined' ? undefined : AggregateError,\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayIteratorPrototype%': hasSymbols && getProto ? getProto([][Symbol.iterator]()) : undefined,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': needsEval,\n\t'%AsyncGenerator%': needsEval,\n\t'%AsyncGeneratorFunction%': needsEval,\n\t'%AsyncIteratorPrototype%': needsEval,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%BigInt%': typeof BigInt === 'undefined' ? undefined : BigInt,\n\t'%BigInt64Array%': typeof BigInt64Array === 'undefined' ? undefined : BigInt64Array,\n\t'%BigUint64Array%': typeof BigUint64Array === 'undefined' ? undefined : BigUint64Array,\n\t'%Boolean%': Boolean,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%Date%': Date,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': $Error,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': $EvalError,\n\t'%Float16Array%': typeof Float16Array === 'undefined' ? undefined : Float16Array,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined : FinalizationRegistry,\n\t'%Function%': $Function,\n\t'%GeneratorFunction%': needsEval,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols && getProto ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%Object%': $Object,\n\t'%Object.getOwnPropertyDescriptor%': $gOPD,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': $RangeError,\n\t'%ReferenceError%': $ReferenceError,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols && getProto ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SyntaxError%': $SyntaxError,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypeError%': $TypeError,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%URIError%': $URIError,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakRef%': typeof WeakRef === 'undefined' ? undefined : WeakRef,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet,\n\n\t'%Function.prototype.call%': $call,\n\t'%Function.prototype.apply%': $apply,\n\t'%Object.defineProperty%': $defineProperty,\n\t'%Object.getPrototypeOf%': $ObjectGPO,\n\t'%Math.abs%': abs,\n\t'%Math.floor%': floor,\n\t'%Math.max%': max,\n\t'%Math.min%': min,\n\t'%Math.pow%': pow,\n\t'%Math.round%': round,\n\t'%Math.sign%': sign,\n\t'%Reflect.getPrototypeOf%': $ReflectGPO\n};\n\nif (getProto) {\n\ttry {\n\t\tnull.error; // eslint-disable-line no-unused-expressions\n\t} catch (e) {\n\t\t// https://github.com/tc39/proposal-shadowrealm/pull/384#issuecomment-1364264229\n\t\tvar errorProto = getProto(getProto(e));\n\t\tINTRINSICS['%Error.prototype%'] = errorProto;\n\t}\n}\n\nvar doEval = function doEval(name) {\n\tvar value;\n\tif (name === '%AsyncFunction%') {\n\t\tvalue = getEvalledConstructor('async function () {}');\n\t} else if (name === '%GeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('function* () {}');\n\t} else if (name === '%AsyncGeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('async function* () {}');\n\t} else if (name === '%AsyncGenerator%') {\n\t\tvar fn = doEval('%AsyncGeneratorFunction%');\n\t\tif (fn) {\n\t\t\tvalue = fn.prototype;\n\t\t}\n\t} else if (name === '%AsyncIteratorPrototype%') {\n\t\tvar gen = doEval('%AsyncGenerator%');\n\t\tif (gen && getProto) {\n\t\t\tvalue = getProto(gen.prototype);\n\t\t}\n\t}\n\n\tINTRINSICS[name] = value;\n\n\treturn value;\n};\n\nvar LEGACY_ALIASES = {\n\t__proto__: null,\n\t'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],\n\t'%ArrayPrototype%': ['Array', 'prototype'],\n\t'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],\n\t'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],\n\t'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],\n\t'%ArrayProto_values%': ['Array', 'prototype', 'values'],\n\t'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],\n\t'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],\n\t'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],\n\t'%BooleanPrototype%': ['Boolean', 'prototype'],\n\t'%DataViewPrototype%': ['DataView', 'prototype'],\n\t'%DatePrototype%': ['Date', 'prototype'],\n\t'%ErrorPrototype%': ['Error', 'prototype'],\n\t'%EvalErrorPrototype%': ['EvalError', 'prototype'],\n\t'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],\n\t'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],\n\t'%FunctionPrototype%': ['Function', 'prototype'],\n\t'%Generator%': ['GeneratorFunction', 'prototype'],\n\t'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],\n\t'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],\n\t'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],\n\t'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],\n\t'%JSONParse%': ['JSON', 'parse'],\n\t'%JSONStringify%': ['JSON', 'stringify'],\n\t'%MapPrototype%': ['Map', 'prototype'],\n\t'%NumberPrototype%': ['Number', 'prototype'],\n\t'%ObjectPrototype%': ['Object', 'prototype'],\n\t'%ObjProto_toString%': ['Object', 'prototype', 'toString'],\n\t'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],\n\t'%PromisePrototype%': ['Promise', 'prototype'],\n\t'%PromiseProto_then%': ['Promise', 'prototype', 'then'],\n\t'%Promise_all%': ['Promise', 'all'],\n\t'%Promise_reject%': ['Promise', 'reject'],\n\t'%Promise_resolve%': ['Promise', 'resolve'],\n\t'%RangeErrorPrototype%': ['RangeError', 'prototype'],\n\t'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],\n\t'%RegExpPrototype%': ['RegExp', 'prototype'],\n\t'%SetPrototype%': ['Set', 'prototype'],\n\t'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],\n\t'%StringPrototype%': ['String', 'prototype'],\n\t'%SymbolPrototype%': ['Symbol', 'prototype'],\n\t'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],\n\t'%TypedArrayPrototype%': ['TypedArray', 'prototype'],\n\t'%TypeErrorPrototype%': ['TypeError', 'prototype'],\n\t'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],\n\t'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],\n\t'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],\n\t'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],\n\t'%URIErrorPrototype%': ['URIError', 'prototype'],\n\t'%WeakMapPrototype%': ['WeakMap', 'prototype'],\n\t'%WeakSetPrototype%': ['WeakSet', 'prototype']\n};\n\nvar bind = require('function-bind');\nvar hasOwn = require('hasown');\nvar $concat = bind.call($call, Array.prototype.concat);\nvar $spliceApply = bind.call($apply, Array.prototype.splice);\nvar $replace = bind.call($call, String.prototype.replace);\nvar $strSlice = bind.call($call, String.prototype.slice);\nvar $exec = bind.call($call, RegExp.prototype.exec);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar first = $strSlice(string, 0, 1);\n\tvar last = $strSlice(string, -1);\n\tif (first === '%' && last !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected closing `%`');\n\t} else if (last === '%' && first !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected opening `%`');\n\t}\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : number || match;\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tvar intrinsicName = name;\n\tvar alias;\n\tif (hasOwn(LEGACY_ALIASES, intrinsicName)) {\n\t\talias = LEGACY_ALIASES[intrinsicName];\n\t\tintrinsicName = '%' + alias[0] + '%';\n\t}\n\n\tif (hasOwn(INTRINSICS, intrinsicName)) {\n\t\tvar value = INTRINSICS[intrinsicName];\n\t\tif (value === needsEval) {\n\t\t\tvalue = doEval(intrinsicName);\n\t\t}\n\t\tif (typeof value === 'undefined' && !allowMissing) {\n\t\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t\t}\n\n\t\treturn {\n\t\t\talias: alias,\n\t\t\tname: intrinsicName,\n\t\t\tvalue: value\n\t\t};\n\t}\n\n\tthrow new $SyntaxError('intrinsic ' + name + ' does not exist!');\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new $TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new $TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tif ($exec(/^%?[^%]*%?$/, name) === null) {\n\t\tthrow new $SyntaxError('`%` may not be present anywhere but at the beginning and end of the intrinsic name');\n\t}\n\tvar parts = stringToPath(name);\n\tvar intrinsicBaseName = parts.length > 0 ? parts[0] : '';\n\n\tvar intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);\n\tvar intrinsicRealName = intrinsic.name;\n\tvar value = intrinsic.value;\n\tvar skipFurtherCaching = false;\n\n\tvar alias = intrinsic.alias;\n\tif (alias) {\n\t\tintrinsicBaseName = alias[0];\n\t\t$spliceApply(parts, $concat([0, 1], alias));\n\t}\n\n\tfor (var i = 1, isOwn = true; i < parts.length; i += 1) {\n\t\tvar part = parts[i];\n\t\tvar first = $strSlice(part, 0, 1);\n\t\tvar last = $strSlice(part, -1);\n\t\tif (\n\t\t\t(\n\t\t\t\t(first === '\"' || first === \"'\" || first === '`')\n\t\t\t\t|| (last === '\"' || last === \"'\" || last === '`')\n\t\t\t)\n\t\t\t&& first !== last\n\t\t) {\n\t\t\tthrow new $SyntaxError('property names with quotes must have matching quotes');\n\t\t}\n\t\tif (part === 'constructor' || !isOwn) {\n\t\t\tskipFurtherCaching = true;\n\t\t}\n\n\t\tintrinsicBaseName += '.' + part;\n\t\tintrinsicRealName = '%' + intrinsicBaseName + '%';\n\n\t\tif (hasOwn(INTRINSICS, intrinsicRealName)) {\n\t\t\tvalue = INTRINSICS[intrinsicRealName];\n\t\t} else if (value != null) {\n\t\t\tif (!(part in value)) {\n\t\t\t\tif (!allowMissing) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\treturn void undefined;\n\t\t\t}\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, part);\n\t\t\t\tisOwn = !!desc;\n\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tif (isOwn && 'get' in desc && !('originalValue' in desc.get)) {\n\t\t\t\t\tvalue = desc.get;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisOwn = hasOwn(value, part);\n\t\t\t\tvalue = value[part];\n\t\t\t}\n\n\t\t\tif (isOwn && !skipFurtherCaching) {\n\t\t\t\tINTRINSICS[intrinsicRealName] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n", "'use strict';\n\nvar hasSymbols = require('has-symbols/shams');\n\n/** @type {import('.')} */\nmodule.exports = function hasToStringTagShams() {\n\treturn hasSymbols() && !!Symbol.toStringTag;\n};\n", "'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $defineProperty = GetIntrinsic('%Object.defineProperty%', true);\n\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar hasOwn = require('hasown');\nvar $TypeError = require('es-errors/type');\n\nvar toStringTag = hasToStringTag ? Symbol.toStringTag : null;\n\n/** @type {import('.')} */\nmodule.exports = function setToStringTag(object, value) {\n\tvar overrideIfSet = arguments.length > 2 && !!arguments[2] && arguments[2].force;\n\tvar nonConfigurable = arguments.length > 2 && !!arguments[2] && arguments[2].nonConfigurable;\n\tif (\n\t\t(typeof overrideIfSet !== 'undefined' && typeof overrideIfSet !== 'boolean')\n\t\t|| (typeof nonConfigurable !== 'undefined' && typeof nonConfigurable !== 'boolean')\n\t) {\n\t\tthrow new $TypeError('if provided, the `overrideIfSet` and `nonConfigurable` options must be booleans');\n\t}\n\tif (toStringTag && (overrideIfSet || !hasOwn(object, toStringTag))) {\n\t\tif ($defineProperty) {\n\t\t\t$defineProperty(object, toStringTag, {\n\t\t\t\tconfigurable: !nonConfigurable,\n\t\t\t\tenumerable: false,\n\t\t\t\tvalue: value,\n\t\t\t\twritable: false\n\t\t\t});\n\t\t} else {\n\t\t\tobject[toStringTag] = value; // eslint-disable-line no-param-reassign\n\t\t}\n\t}\n};\n", "'use strict';\n\n// populates missing values\nmodule.exports = function (dst, src) {\n  Object.keys(src).forEach(function (prop) {\n    dst[prop] = dst[prop] || src[prop]; // eslint-disable-line no-param-reassign\n  });\n\n  return dst;\n};\n", "'use strict';\n\nvar CombinedStream = require('combined-stream');\nvar util = require('util');\nvar path = require('path');\nvar http = require('http');\nvar https = require('https');\nvar parseUrl = require('url').parse;\nvar fs = require('fs');\nvar Stream = require('stream').Stream;\nvar crypto = require('crypto');\nvar mime = require('mime-types');\nvar asynckit = require('asynckit');\nvar setToStringTag = require('es-set-tostringtag');\nvar hasOwn = require('hasown');\nvar populate = require('./populate.js');\n\n/**\n * Create readable \"multipart/form-data\" streams.\n * Can be used to submit forms\n * and file uploads to other web applications.\n *\n * @constructor\n * @param {object} options - Properties to be added/overriden for FormData and CombinedStream\n */\nfunction FormData(options) {\n  if (!(this instanceof FormData)) {\n    return new FormData(options);\n  }\n\n  this._overheadLength = 0;\n  this._valueLength = 0;\n  this._valuesToMeasure = [];\n\n  CombinedStream.call(this);\n\n  options = options || {}; // eslint-disable-line no-param-reassign\n  for (var option in options) { // eslint-disable-line no-restricted-syntax\n    this[option] = options[option];\n  }\n}\n\n// make it a Stream\nutil.inherits(FormData, CombinedStream);\n\nFormData.LINE_BREAK = '\\r\\n';\nFormData.DEFAULT_CONTENT_TYPE = 'application/octet-stream';\n\nFormData.prototype.append = function (field, value, options) {\n  options = options || {}; // eslint-disable-line no-param-reassign\n\n  // allow filename as single option\n  if (typeof options === 'string') {\n    options = { filename: options }; // eslint-disable-line no-param-reassign\n  }\n\n  var append = CombinedStream.prototype.append.bind(this);\n\n  // all that streamy business can't handle numbers\n  if (typeof value === 'number' || value == null) {\n    value = String(value); // eslint-disable-line no-param-reassign\n  }\n\n  // https://github.com/felixge/node-form-data/issues/38\n  if (Array.isArray(value)) {\n    /*\n     * Please convert your array into string\n     * the way web server expects it\n     */\n    this._error(new Error('Arrays are not supported.'));\n    return;\n  }\n\n  var header = this._multiPartHeader(field, value, options);\n  var footer = this._multiPartFooter();\n\n  append(header);\n  append(value);\n  append(footer);\n\n  // pass along options.knownLength\n  this._trackLength(header, value, options);\n};\n\nFormData.prototype._trackLength = function (header, value, options) {\n  var valueLength = 0;\n\n  /*\n   * used w/ getLengthSync(), when length is known.\n   * e.g. for streaming directly from a remote server,\n   * w/ a known file a size, and not wanting to wait for\n   * incoming file to finish to get its size.\n   */\n  if (options.knownLength != null) {\n    valueLength += Number(options.knownLength);\n  } else if (Buffer.isBuffer(value)) {\n    valueLength = value.length;\n  } else if (typeof value === 'string') {\n    valueLength = Buffer.byteLength(value);\n  }\n\n  this._valueLength += valueLength;\n\n  // @check why add CRLF? does this account for custom/multiple CRLFs?\n  this._overheadLength += Buffer.byteLength(header) + FormData.LINE_BREAK.length;\n\n  // empty or either doesn't have path or not an http response or not a stream\n  if (!value || (!value.path && !(value.readable && hasOwn(value, 'httpVersion')) && !(value instanceof Stream))) {\n    return;\n  }\n\n  // no need to bother with the length\n  if (!options.knownLength) {\n    this._valuesToMeasure.push(value);\n  }\n};\n\nFormData.prototype._lengthRetriever = function (value, callback) {\n  if (hasOwn(value, 'fd')) {\n    // take read range into a account\n    // `end` = Infinity \u2013> read file till the end\n    //\n    // TODO: Looks like there is bug in Node fs.createReadStream\n    // it doesn't respect `end` options without `start` options\n    // Fix it when node fixes it.\n    // https://github.com/joyent/node/issues/7819\n    if (value.end != undefined && value.end != Infinity && value.start != undefined) {\n      // when end specified\n      // no need to calculate range\n      // inclusive, starts with 0\n      callback(null, value.end + 1 - (value.start ? value.start : 0)); // eslint-disable-line callback-return\n\n      // not that fast snoopy\n    } else {\n      // still need to fetch file size from fs\n      fs.stat(value.path, function (err, stat) {\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        // update final size based on the range options\n        var fileSize = stat.size - (value.start ? value.start : 0);\n        callback(null, fileSize);\n      });\n    }\n\n    // or http response\n  } else if (hasOwn(value, 'httpVersion')) {\n    callback(null, Number(value.headers['content-length'])); // eslint-disable-line callback-return\n\n    // or request stream http://github.com/mikeal/request\n  } else if (hasOwn(value, 'httpModule')) {\n    // wait till response come back\n    value.on('response', function (response) {\n      value.pause();\n      callback(null, Number(response.headers['content-length']));\n    });\n    value.resume();\n\n    // something else\n  } else {\n    callback('Unknown stream'); // eslint-disable-line callback-return\n  }\n};\n\nFormData.prototype._multiPartHeader = function (field, value, options) {\n  /*\n   * custom header specified (as string)?\n   * it becomes responsible for boundary\n   * (e.g. to handle extra CRLFs on .NET servers)\n   */\n  if (typeof options.header === 'string') {\n    return options.header;\n  }\n\n  var contentDisposition = this._getContentDisposition(value, options);\n  var contentType = this._getContentType(value, options);\n\n  var contents = '';\n  var headers = {\n    // add custom disposition as third element or keep it two elements if not\n    'Content-Disposition': ['form-data', 'name=\"' + field + '\"'].concat(contentDisposition || []),\n    // if no content type. allow it to be empty array\n    'Content-Type': [].concat(contentType || [])\n  };\n\n  // allow custom headers.\n  if (typeof options.header === 'object') {\n    populate(headers, options.header);\n  }\n\n  var header;\n  for (var prop in headers) { // eslint-disable-line no-restricted-syntax\n    if (hasOwn(headers, prop)) {\n      header = headers[prop];\n\n      // skip nullish headers.\n      if (header == null) {\n        continue; // eslint-disable-line no-restricted-syntax, no-continue\n      }\n\n      // convert all headers to arrays.\n      if (!Array.isArray(header)) {\n        header = [header];\n      }\n\n      // add non-empty headers.\n      if (header.length) {\n        contents += prop + ': ' + header.join('; ') + FormData.LINE_BREAK;\n      }\n    }\n  }\n\n  return '--' + this.getBoundary() + FormData.LINE_BREAK + contents + FormData.LINE_BREAK;\n};\n\nFormData.prototype._getContentDisposition = function (value, options) { // eslint-disable-line consistent-return\n  var filename;\n\n  if (typeof options.filepath === 'string') {\n    // custom filepath for relative paths\n    filename = path.normalize(options.filepath).replace(/\\\\/g, '/');\n  } else if (options.filename || (value && (value.name || value.path))) {\n    /*\n     * custom filename take precedence\n     * formidable and the browser add a name property\n     * fs- and request- streams have path property\n     */\n    filename = path.basename(options.filename || (value && (value.name || value.path)));\n  } else if (value && value.readable && hasOwn(value, 'httpVersion')) {\n    // or try http response\n    filename = path.basename(value.client._httpMessage.path || '');\n  }\n\n  if (filename) {\n    return 'filename=\"' + filename + '\"';\n  }\n};\n\nFormData.prototype._getContentType = function (value, options) {\n  // use custom content-type above all\n  var contentType = options.contentType;\n\n  // or try `name` from formidable, browser\n  if (!contentType && value && value.name) {\n    contentType = mime.lookup(value.name);\n  }\n\n  // or try `path` from fs-, request- streams\n  if (!contentType && value && value.path) {\n    contentType = mime.lookup(value.path);\n  }\n\n  // or if it's http-reponse\n  if (!contentType && value && value.readable && hasOwn(value, 'httpVersion')) {\n    contentType = value.headers['content-type'];\n  }\n\n  // or guess it from the filepath or filename\n  if (!contentType && (options.filepath || options.filename)) {\n    contentType = mime.lookup(options.filepath || options.filename);\n  }\n\n  // fallback to the default content type if `value` is not simple value\n  if (!contentType && value && typeof value === 'object') {\n    contentType = FormData.DEFAULT_CONTENT_TYPE;\n  }\n\n  return contentType;\n};\n\nFormData.prototype._multiPartFooter = function () {\n  return function (next) {\n    var footer = FormData.LINE_BREAK;\n\n    var lastPart = this._streams.length === 0;\n    if (lastPart) {\n      footer += this._lastBoundary();\n    }\n\n    next(footer);\n  }.bind(this);\n};\n\nFormData.prototype._lastBoundary = function () {\n  return '--' + this.getBoundary() + '--' + FormData.LINE_BREAK;\n};\n\nFormData.prototype.getHeaders = function (userHeaders) {\n  var header;\n  var formHeaders = {\n    'content-type': 'multipart/form-data; boundary=' + this.getBoundary()\n  };\n\n  for (header in userHeaders) { // eslint-disable-line no-restricted-syntax\n    if (hasOwn(userHeaders, header)) {\n      formHeaders[header.toLowerCase()] = userHeaders[header];\n    }\n  }\n\n  return formHeaders;\n};\n\nFormData.prototype.setBoundary = function (boundary) {\n  if (typeof boundary !== 'string') {\n    throw new TypeError('FormData boundary must be a string');\n  }\n  this._boundary = boundary;\n};\n\nFormData.prototype.getBoundary = function () {\n  if (!this._boundary) {\n    this._generateBoundary();\n  }\n\n  return this._boundary;\n};\n\nFormData.prototype.getBuffer = function () {\n  var dataBuffer = new Buffer.alloc(0); // eslint-disable-line new-cap\n  var boundary = this.getBoundary();\n\n  // Create the form content. Add Line breaks to the end of data.\n  for (var i = 0, len = this._streams.length; i < len; i++) {\n    if (typeof this._streams[i] !== 'function') {\n      // Add content to the buffer.\n      if (Buffer.isBuffer(this._streams[i])) {\n        dataBuffer = Buffer.concat([dataBuffer, this._streams[i]]);\n      } else {\n        dataBuffer = Buffer.concat([dataBuffer, Buffer.from(this._streams[i])]);\n      }\n\n      // Add break after content.\n      if (typeof this._streams[i] !== 'string' || this._streams[i].substring(2, boundary.length + 2) !== boundary) {\n        dataBuffer = Buffer.concat([dataBuffer, Buffer.from(FormData.LINE_BREAK)]);\n      }\n    }\n  }\n\n  // Add the footer and return the Buffer object.\n  return Buffer.concat([dataBuffer, Buffer.from(this._lastBoundary())]);\n};\n\nFormData.prototype._generateBoundary = function () {\n  // This generates a 50 character boundary similar to those used by Firefox.\n\n  // They are optimized for boyer-moore parsing.\n  this._boundary = '--------------------------' + crypto.randomBytes(12).toString('hex');\n};\n\n// Note: getLengthSync DOESN'T calculate streams length\n// As workaround one can calculate file size manually and add it as knownLength option\nFormData.prototype.getLengthSync = function () {\n  var knownLength = this._overheadLength + this._valueLength;\n\n  // Don't get confused, there are 3 \"internal\" streams for each keyval pair so it basically checks if there is any value added to the form\n  if (this._streams.length) {\n    knownLength += this._lastBoundary().length;\n  }\n\n  // https://github.com/form-data/form-data/issues/40\n  if (!this.hasKnownLength()) {\n    /*\n     * Some async length retrievers are present\n     * therefore synchronous length calculation is false.\n     * Please use getLength(callback) to get proper length\n     */\n    this._error(new Error('Cannot calculate proper length in synchronous way.'));\n  }\n\n  return knownLength;\n};\n\n// Public API to check if length of added values is known\n// https://github.com/form-data/form-data/issues/196\n// https://github.com/form-data/form-data/issues/262\nFormData.prototype.hasKnownLength = function () {\n  var hasKnownLength = true;\n\n  if (this._valuesToMeasure.length) {\n    hasKnownLength = false;\n  }\n\n  return hasKnownLength;\n};\n\nFormData.prototype.getLength = function (cb) {\n  var knownLength = this._overheadLength + this._valueLength;\n\n  if (this._streams.length) {\n    knownLength += this._lastBoundary().length;\n  }\n\n  if (!this._valuesToMeasure.length) {\n    process.nextTick(cb.bind(this, null, knownLength));\n    return;\n  }\n\n  asynckit.parallel(this._valuesToMeasure, this._lengthRetriever, function (err, values) {\n    if (err) {\n      cb(err);\n      return;\n    }\n\n    values.forEach(function (length) {\n      knownLength += length;\n    });\n\n    cb(null, knownLength);\n  });\n};\n\nFormData.prototype.submit = function (params, cb) {\n  var request;\n  var options;\n  var defaults = { method: 'post' };\n\n  // parse provided url if it's string or treat it as options object\n  if (typeof params === 'string') {\n    params = parseUrl(params); // eslint-disable-line no-param-reassign\n    /* eslint sort-keys: 0 */\n    options = populate({\n      port: params.port,\n      path: params.pathname,\n      host: params.hostname,\n      protocol: params.protocol\n    }, defaults);\n  } else { // use custom params\n    options = populate(params, defaults);\n    // if no port provided use default one\n    if (!options.port) {\n      options.port = options.protocol === 'https:' ? 443 : 80;\n    }\n  }\n\n  // put that good code in getHeaders to some use\n  options.headers = this.getHeaders(params.headers);\n\n  // https if specified, fallback to http in any other case\n  if (options.protocol === 'https:') {\n    request = https.request(options);\n  } else {\n    request = http.request(options);\n  }\n\n  // get content length and fire away\n  this.getLength(function (err, length) {\n    if (err && err !== 'Unknown stream') {\n      this._error(err);\n      return;\n    }\n\n    // add content length\n    if (length) {\n      request.setHeader('Content-Length', length);\n    }\n\n    this.pipe(request);\n    if (cb) {\n      var onResponse;\n\n      var callback = function (error, responce) {\n        request.removeListener('error', callback);\n        request.removeListener('response', onResponse);\n\n        return cb.call(this, error, responce);\n      };\n\n      onResponse = callback.bind(this, null);\n\n      request.on('error', callback);\n      request.on('response', onResponse);\n    }\n  }.bind(this));\n\n  return request;\n};\n\nFormData.prototype._error = function (err) {\n  if (!this.error) {\n    this.error = err;\n    this.pause();\n    this.emit('error', err);\n  }\n};\n\nFormData.prototype.toString = function () {\n  return '[object FormData]';\n};\nsetToStringTag(FormData.prototype, 'FormData');\n\n// Public API\nmodule.exports = FormData;\n", "import FormData from 'form-data';\n\nexport default FormData;\n", "'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\n// temporary hotfix to avoid circular references until AxiosURLSearchParams is refactored\nimport PlatformFormData from '../platform/node/classes/FormData.js';\n\n/**\n * Determines if the given thing is a array or js object.\n *\n * @param {string} thing - The object or array to be visited.\n *\n * @returns {boolean}\n */\nfunction isVisitable(thing) {\n  return utils.isPlainObject(thing) || utils.isArray(thing);\n}\n\n/**\n * It removes the brackets from the end of a string\n *\n * @param {string} key - The key of the parameter.\n *\n * @returns {string} the key without the brackets.\n */\nfunction removeBrackets(key) {\n  return utils.endsWith(key, '[]') ? key.slice(0, -2) : key;\n}\n\n/**\n * It takes a path, a key, and a boolean, and returns a string\n *\n * @param {string} path - The path to the current key.\n * @param {string} key - The key of the current object being iterated over.\n * @param {string} dots - If true, the key will be rendered with dots instead of brackets.\n *\n * @returns {string} The path to the current key.\n */\nfunction renderKey(path, key, dots) {\n  if (!path) return key;\n  return path.concat(key).map(function each(token, i) {\n    // eslint-disable-next-line no-param-reassign\n    token = removeBrackets(token);\n    return !dots && i ? '[' + token + ']' : token;\n  }).join(dots ? '.' : '');\n}\n\n/**\n * If the array is an array and none of its elements are visitable, then it's a flat array.\n *\n * @param {Array<any>} arr - The array to check\n *\n * @returns {boolean}\n */\nfunction isFlatArray(arr) {\n  return utils.isArray(arr) && !arr.some(isVisitable);\n}\n\nconst predicates = utils.toFlatObject(utils, {}, null, function filter(prop) {\n  return /^is[A-Z]/.test(prop);\n});\n\n/**\n * Convert a data object to FormData\n *\n * @param {Object} obj\n * @param {?Object} [formData]\n * @param {?Object} [options]\n * @param {Function} [options.visitor]\n * @param {Boolean} [options.metaTokens = true]\n * @param {Boolean} [options.dots = false]\n * @param {?Boolean} [options.indexes = false]\n *\n * @returns {Object}\n **/\n\n/**\n * It converts an object into a FormData object\n *\n * @param {Object<any, any>} obj - The object to convert to form data.\n * @param {string} formData - The FormData object to append to.\n * @param {Object<string, any>} options\n *\n * @returns\n */\nfunction toFormData(obj, formData, options) {\n  if (!utils.isObject(obj)) {\n    throw new TypeError('target must be an object');\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  formData = formData || new (PlatformFormData || FormData)();\n\n  // eslint-disable-next-line no-param-reassign\n  options = utils.toFlatObject(options, {\n    metaTokens: true,\n    dots: false,\n    indexes: false\n  }, false, function defined(option, source) {\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    return !utils.isUndefined(source[option]);\n  });\n\n  const metaTokens = options.metaTokens;\n  // eslint-disable-next-line no-use-before-define\n  const visitor = options.visitor || defaultVisitor;\n  const dots = options.dots;\n  const indexes = options.indexes;\n  const _Blob = options.Blob || typeof Blob !== 'undefined' && Blob;\n  const useBlob = _Blob && utils.isSpecCompliantForm(formData);\n\n  if (!utils.isFunction(visitor)) {\n    throw new TypeError('visitor must be a function');\n  }\n\n  function convertValue(value) {\n    if (value === null) return '';\n\n    if (utils.isDate(value)) {\n      return value.toISOString();\n    }\n\n    if (utils.isBoolean(value)) {\n      return value.toString();\n    }\n\n    if (!useBlob && utils.isBlob(value)) {\n      throw new AxiosError('Blob is not supported. Use a Buffer instead.');\n    }\n\n    if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {\n      return useBlob && typeof Blob === 'function' ? new Blob([value]) : Buffer.from(value);\n    }\n\n    return value;\n  }\n\n  /**\n   * Default visitor.\n   *\n   * @param {*} value\n   * @param {String|Number} key\n   * @param {Array<String|Number>} path\n   * @this {FormData}\n   *\n   * @returns {boolean} return true to visit the each prop of the value recursively\n   */\n  function defaultVisitor(value, key, path) {\n    let arr = value;\n\n    if (value && !path && typeof value === 'object') {\n      if (utils.endsWith(key, '{}')) {\n        // eslint-disable-next-line no-param-reassign\n        key = metaTokens ? key : key.slice(0, -2);\n        // eslint-disable-next-line no-param-reassign\n        value = JSON.stringify(value);\n      } else if (\n        (utils.isArray(value) && isFlatArray(value)) ||\n        ((utils.isFileList(value) || utils.endsWith(key, '[]')) && (arr = utils.toArray(value))\n        )) {\n        // eslint-disable-next-line no-param-reassign\n        key = removeBrackets(key);\n\n        arr.forEach(function each(el, index) {\n          !(utils.isUndefined(el) || el === null) && formData.append(\n            // eslint-disable-next-line no-nested-ternary\n            indexes === true ? renderKey([key], index, dots) : (indexes === null ? key : key + '[]'),\n            convertValue(el)\n          );\n        });\n        return false;\n      }\n    }\n\n    if (isVisitable(value)) {\n      return true;\n    }\n\n    formData.append(renderKey(path, key, dots), convertValue(value));\n\n    return false;\n  }\n\n  const stack = [];\n\n  const exposedHelpers = Object.assign(predicates, {\n    defaultVisitor,\n    convertValue,\n    isVisitable\n  });\n\n  function build(value, path) {\n    if (utils.isUndefined(value)) return;\n\n    if (stack.indexOf(value) !== -1) {\n      throw Error('Circular reference detected in ' + path.join('.'));\n    }\n\n    stack.push(value);\n\n    utils.forEach(value, function each(el, key) {\n      const result = !(utils.isUndefined(el) || el === null) && visitor.call(\n        formData, el, utils.isString(key) ? key.trim() : key, path, exposedHelpers\n      );\n\n      if (result === true) {\n        build(el, path ? path.concat(key) : [key]);\n      }\n    });\n\n    stack.pop();\n  }\n\n  if (!utils.isObject(obj)) {\n    throw new TypeError('data must be an object');\n  }\n\n  build(obj);\n\n  return formData;\n}\n\nexport default toFormData;\n", "'use strict';\n\nimport toFormData from './toFormData.js';\n\n/**\n * It encodes a string by replacing all characters that are not in the unreserved set with\n * their percent-encoded equivalents\n *\n * @param {string} str - The string to encode.\n *\n * @returns {string} The encoded string.\n */\nfunction encode(str) {\n  const charMap = {\n    '!': '%21',\n    \"'\": '%27',\n    '(': '%28',\n    ')': '%29',\n    '~': '%7E',\n    '%20': '+',\n    '%00': '\\x00'\n  };\n  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {\n    return charMap[match];\n  });\n}\n\n/**\n * It takes a params object and converts it to a FormData object\n *\n * @param {Object<string, any>} params - The parameters to be converted to a FormData object.\n * @param {Object<string, any>} options - The options object passed to the Axios constructor.\n *\n * @returns {void}\n */\nfunction AxiosURLSearchParams(params, options) {\n  this._pairs = [];\n\n  params && toFormData(params, this, options);\n}\n\nconst prototype = AxiosURLSearchParams.prototype;\n\nprototype.append = function append(name, value) {\n  this._pairs.push([name, value]);\n};\n\nprototype.toString = function toString(encoder) {\n  const _encode = encoder ? function(value) {\n    return encoder.call(this, value, encode);\n  } : encode;\n\n  return this._pairs.map(function each(pair) {\n    return _encode(pair[0]) + '=' + _encode(pair[1]);\n  }, '').join('&');\n};\n\nexport default AxiosURLSearchParams;\n", "'use strict';\n\nimport utils from '../utils.js';\nimport AxiosURLSearchParams from '../helpers/AxiosURLSearchParams.js';\n\n/**\n * It replaces all instances of the characters `:`, `$`, `,`, `+`, `[`, and `]` with their\n * URI encoded counterparts\n *\n * @param {string} val The value to be encoded.\n *\n * @returns {string} The encoded value.\n */\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @param {?(object|Function)} options\n *\n * @returns {string} The formatted url\n */\nexport default function buildURL(url, params, options) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n  \n  const _encode = options && options.encode || encode;\n\n  if (utils.isFunction(options)) {\n    options = {\n      serialize: options\n    };\n  } \n\n  const serializeFn = options && options.serialize;\n\n  let serializedParams;\n\n  if (serializeFn) {\n    serializedParams = serializeFn(params, options);\n  } else {\n    serializedParams = utils.isURLSearchParams(params) ?\n      params.toString() :\n      new AxiosURLSearchParams(params, options).toString(_encode);\n  }\n\n  if (serializedParams) {\n    const hashmarkIndex = url.indexOf(\"#\");\n\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n}\n", "'use strict';\n\nimport utils from './../utils.js';\n\nclass InterceptorManager {\n  constructor() {\n    this.handlers = [];\n  }\n\n  /**\n   * Add a new interceptor to the stack\n   *\n   * @param {Function} fulfilled The function to handle `then` for a `Promise`\n   * @param {Function} rejected The function to handle `reject` for a `Promise`\n   *\n   * @return {Number} An ID used to remove interceptor later\n   */\n  use(fulfilled, rejected, options) {\n    this.handlers.push({\n      fulfilled,\n      rejected,\n      synchronous: options ? options.synchronous : false,\n      runWhen: options ? options.runWhen : null\n    });\n    return this.handlers.length - 1;\n  }\n\n  /**\n   * Remove an interceptor from the stack\n   *\n   * @param {Number} id The ID that was returned by `use`\n   *\n   * @returns {void}\n   */\n  eject(id) {\n    if (this.handlers[id]) {\n      this.handlers[id] = null;\n    }\n  }\n\n  /**\n   * Clear all interceptors from the stack\n   *\n   * @returns {void}\n   */\n  clear() {\n    if (this.handlers) {\n      this.handlers = [];\n    }\n  }\n\n  /**\n   * Iterate over all the registered interceptors\n   *\n   * This method is particularly useful for skipping over any\n   * interceptors that may have become `null` calling `eject`.\n   *\n   * @param {Function} fn The function to call for each interceptor\n   *\n   * @returns {void}\n   */\n  forEach(fn) {\n    utils.forEach(this.handlers, function forEachHandler(h) {\n      if (h !== null) {\n        fn(h);\n      }\n    });\n  }\n}\n\nexport default InterceptorManager;\n", "'use strict';\n\nexport default {\n  silentJSONParsing: true,\n  forcedJSONParsing: true,\n  clarifyTimeoutError: false\n};\n", "'use strict';\n\nimport url from 'url';\nexport default url.URLSearchParams;\n", "import crypto from 'crypto';\nimport URLSearchParams from './classes/URLSearchParams.js'\nimport FormData from './classes/FormData.js'\n\nconst ALPHA = 'abcdefghijklmnopqrstuvwxyz'\n\nconst DIGIT = '0123456789';\n\nconst ALPHABET = {\n  DIGIT,\n  ALPHA,\n  ALPHA_DIGIT: ALPHA + ALPHA.toUpperCase() + DIGIT\n}\n\nconst generateString = (size = 16, alphabet = ALPHABET.ALPHA_DIGIT) => {\n  let str = '';\n  const {length} = alphabet;\n  const randomValues = new Uint32Array(size);\n  crypto.randomFillSync(randomValues);\n  for (let i = 0; i < size; i++) {\n    str += alphabet[randomValues[i] % length];\n  }\n\n  return str;\n}\n\n\nexport default {\n  isNode: true,\n  classes: {\n    URLSearchParams,\n    FormData,\n    Blob: typeof Blob !== 'undefined' && Blob || null\n  },\n  ALPHABET,\n  generateString,\n  protocols: [ 'http', 'https', 'file', 'data' ]\n};\n", "const hasBrowserEnv = typeof window !== 'undefined' && typeof document !== 'undefined';\n\nconst _navigator = typeof navigator === 'object' && navigator || undefined;\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n *\n * @returns {boolean}\n */\nconst hasStandardBrowserEnv = hasBrowserEnv &&\n  (!_navigator || ['ReactNative', 'NativeScript', 'NS'].indexOf(_navigator.product) < 0);\n\n/**\n * Determine if we're running in a standard browser webWorker environment\n *\n * Although the `isStandardBrowserEnv` method indicates that\n * `allows axios to run in a web worker`, the WebWorker will still be\n * filtered out due to its judgment standard\n * `typeof window !== 'undefined' && typeof document !== 'undefined'`.\n * This leads to a problem when axios post `FormData` in webWorker\n */\nconst hasStandardBrowserWebWorkerEnv = (() => {\n  return (\n    typeof WorkerGlobalScope !== 'undefined' &&\n    // eslint-disable-next-line no-undef\n    self instanceof WorkerGlobalScope &&\n    typeof self.importScripts === 'function'\n  );\n})();\n\nconst origin = hasBrowserEnv && window.location.href || 'http://localhost';\n\nexport {\n  hasBrowserEnv,\n  hasStandardBrowserWebWorkerEnv,\n  hasStandardBrowserEnv,\n  _navigator as navigator,\n  origin\n}\n", "import platform from './node/index.js';\nimport * as utils from './common/utils.js';\n\nexport default {\n  ...utils,\n  ...platform\n}\n", "'use strict';\n\nimport utils from '../utils.js';\nimport toFormData from './toFormData.js';\nimport platform from '../platform/index.js';\n\nexport default function toURLEncodedForm(data, options) {\n  return toFormData(data, new platform.classes.URLSearchParams(), {\n    visitor: function(value, key, path, helpers) {\n      if (platform.isNode && utils.isBuffer(value)) {\n        this.append(key, value.toString('base64'));\n        return false;\n      }\n\n      return helpers.defaultVisitor.apply(this, arguments);\n    },\n    ...options\n  });\n}\n", "'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * It takes a string like `foo[x][y][z]` and returns an array like `['foo', 'x', 'y', 'z']\n *\n * @param {string} name - The name of the property to get.\n *\n * @returns An array of strings.\n */\nfunction parsePropPath(name) {\n  // foo[x][y][z]\n  // foo.x.y.z\n  // foo-x-y-z\n  // foo x y z\n  return utils.matchAll(/\\w+|\\[(\\w*)]/g, name).map(match => {\n    return match[0] === '[]' ? '' : match[1] || match[0];\n  });\n}\n\n/**\n * Convert an array to an object.\n *\n * @param {Array<any>} arr - The array to convert to an object.\n *\n * @returns An object with the same keys and values as the array.\n */\nfunction arrayToObject(arr) {\n  const obj = {};\n  const keys = Object.keys(arr);\n  let i;\n  const len = keys.length;\n  let key;\n  for (i = 0; i < len; i++) {\n    key = keys[i];\n    obj[key] = arr[key];\n  }\n  return obj;\n}\n\n/**\n * It takes a FormData object and returns a JavaScript object\n *\n * @param {string} formData The FormData object to convert to JSON.\n *\n * @returns {Object<string, any> | null} The converted object.\n */\nfunction formDataToJSON(formData) {\n  function buildPath(path, value, target, index) {\n    let name = path[index++];\n\n    if (name === '__proto__') return true;\n\n    const isNumericKey = Number.isFinite(+name);\n    const isLast = index >= path.length;\n    name = !name && utils.isArray(target) ? target.length : name;\n\n    if (isLast) {\n      if (utils.hasOwnProp(target, name)) {\n        target[name] = [target[name], value];\n      } else {\n        target[name] = value;\n      }\n\n      return !isNumericKey;\n    }\n\n    if (!target[name] || !utils.isObject(target[name])) {\n      target[name] = [];\n    }\n\n    const result = buildPath(path, value, target[name], index);\n\n    if (result && utils.isArray(target[name])) {\n      target[name] = arrayToObject(target[name]);\n    }\n\n    return !isNumericKey;\n  }\n\n  if (utils.isFormData(formData) && utils.isFunction(formData.entries)) {\n    const obj = {};\n\n    utils.forEachEntry(formData, (name, value) => {\n      buildPath(parsePropPath(name), value, obj, 0);\n    });\n\n    return obj;\n  }\n\n  return null;\n}\n\nexport default formDataToJSON;\n", "'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\nimport transitionalDefaults from './transitional.js';\nimport toFormData from '../helpers/toFormData.js';\nimport toURLEncodedForm from '../helpers/toURLEncodedForm.js';\nimport platform from '../platform/index.js';\nimport formDataToJSON from '../helpers/formDataToJSON.js';\n\n/**\n * It takes a string, tries to parse it, and if it fails, it returns the stringified version\n * of the input\n *\n * @param {any} rawValue - The value to be stringified.\n * @param {Function} parser - A function that parses a string into a JavaScript object.\n * @param {Function} encoder - A function that takes a value and returns a string.\n *\n * @returns {string} A stringified version of the rawValue.\n */\nfunction stringifySafely(rawValue, parser, encoder) {\n  if (utils.isString(rawValue)) {\n    try {\n      (parser || JSON.parse)(rawValue);\n      return utils.trim(rawValue);\n    } catch (e) {\n      if (e.name !== 'SyntaxError') {\n        throw e;\n      }\n    }\n  }\n\n  return (encoder || JSON.stringify)(rawValue);\n}\n\nconst defaults = {\n\n  transitional: transitionalDefaults,\n\n  adapter: ['xhr', 'http', 'fetch'],\n\n  transformRequest: [function transformRequest(data, headers) {\n    const contentType = headers.getContentType() || '';\n    const hasJSONContentType = contentType.indexOf('application/json') > -1;\n    const isObjectPayload = utils.isObject(data);\n\n    if (isObjectPayload && utils.isHTMLForm(data)) {\n      data = new FormData(data);\n    }\n\n    const isFormData = utils.isFormData(data);\n\n    if (isFormData) {\n      return hasJSONContentType ? JSON.stringify(formDataToJSON(data)) : data;\n    }\n\n    if (utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data) ||\n      utils.isReadableStream(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      headers.setContentType('application/x-www-form-urlencoded;charset=utf-8', false);\n      return data.toString();\n    }\n\n    let isFileList;\n\n    if (isObjectPayload) {\n      if (contentType.indexOf('application/x-www-form-urlencoded') > -1) {\n        return toURLEncodedForm(data, this.formSerializer).toString();\n      }\n\n      if ((isFileList = utils.isFileList(data)) || contentType.indexOf('multipart/form-data') > -1) {\n        const _FormData = this.env && this.env.FormData;\n\n        return toFormData(\n          isFileList ? {'files[]': data} : data,\n          _FormData && new _FormData(),\n          this.formSerializer\n        );\n      }\n    }\n\n    if (isObjectPayload || hasJSONContentType ) {\n      headers.setContentType('application/json', false);\n      return stringifySafely(data);\n    }\n\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    const transitional = this.transitional || defaults.transitional;\n    const forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    const JSONRequested = this.responseType === 'json';\n\n    if (utils.isResponse(data) || utils.isReadableStream(data)) {\n      return data;\n    }\n\n    if (data && utils.isString(data) && ((forcedJSONParsing && !this.responseType) || JSONRequested)) {\n      const silentJSONParsing = transitional && transitional.silentJSONParsing;\n      const strictJSONParsing = !silentJSONParsing && JSONRequested;\n\n      try {\n        return JSON.parse(data, this.parseReviver);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw AxiosError.from(e, AxiosError.ERR_BAD_RESPONSE, this, null, this.response);\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  env: {\n    FormData: platform.classes.FormData,\n    Blob: platform.classes.Blob\n  },\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  },\n\n  headers: {\n    common: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': undefined\n    }\n  }\n};\n\nutils.forEach(['delete', 'get', 'head', 'post', 'put', 'patch'], (method) => {\n  defaults.headers[method] = {};\n});\n\nexport default defaults;\n", "'use strict';\n\nimport utils from './../utils.js';\n\n// RawAxiosHeaders whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nconst ignoreDuplicateOf = utils.toObjectSet([\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n]);\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} rawHeaders Headers needing to be parsed\n *\n * @returns {Object} Headers parsed into an object\n */\nexport default rawHeaders => {\n  const parsed = {};\n  let key;\n  let val;\n  let i;\n\n  rawHeaders && rawHeaders.split('\\n').forEach(function parser(line) {\n    i = line.indexOf(':');\n    key = line.substring(0, i).trim().toLowerCase();\n    val = line.substring(i + 1).trim();\n\n    if (!key || (parsed[key] && ignoreDuplicateOf[key])) {\n      return;\n    }\n\n    if (key === 'set-cookie') {\n      if (parsed[key]) {\n        parsed[key].push(val);\n      } else {\n        parsed[key] = [val];\n      }\n    } else {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n", "'use strict';\n\nimport utils from '../utils.js';\nimport parseHeaders from '../helpers/parseHeaders.js';\n\nconst $internals = Symbol('internals');\n\nfunction normalizeHeader(header) {\n  return header && String(header).trim().toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (value === false || value == null) {\n    return value;\n  }\n\n  return utils.isArray(value) ? value.map(normalizeValue) : String(value);\n}\n\nfunction parseTokens(str) {\n  const tokens = Object.create(null);\n  const tokensRE = /([^\\s,;=]+)\\s*(?:=\\s*([^,;]+))?/g;\n  let match;\n\n  while ((match = tokensRE.exec(str))) {\n    tokens[match[1]] = match[2];\n  }\n\n  return tokens;\n}\n\nconst isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());\n\nfunction matchHeaderValue(context, value, header, filter, isHeaderNameFilter) {\n  if (utils.isFunction(filter)) {\n    return filter.call(this, value, header);\n  }\n\n  if (isHeaderNameFilter) {\n    value = header;\n  }\n\n  if (!utils.isString(value)) return;\n\n  if (utils.isString(filter)) {\n    return value.indexOf(filter) !== -1;\n  }\n\n  if (utils.isRegExp(filter)) {\n    return filter.test(value);\n  }\n}\n\nfunction formatHeader(header) {\n  return header.trim()\n    .toLowerCase().replace(/([a-z\\d])(\\w*)/g, (w, char, str) => {\n      return char.toUpperCase() + str;\n    });\n}\n\nfunction buildAccessors(obj, header) {\n  const accessorName = utils.toCamelCase(' ' + header);\n\n  ['get', 'set', 'has'].forEach(methodName => {\n    Object.defineProperty(obj, methodName + accessorName, {\n      value: function(arg1, arg2, arg3) {\n        return this[methodName].call(this, header, arg1, arg2, arg3);\n      },\n      configurable: true\n    });\n  });\n}\n\nclass AxiosHeaders {\n  constructor(headers) {\n    headers && this.set(headers);\n  }\n\n  set(header, valueOrRewrite, rewrite) {\n    const self = this;\n\n    function setHeader(_value, _header, _rewrite) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!lHeader) {\n        throw new Error('header name must be a non-empty string');\n      }\n\n      const key = utils.findKey(self, lHeader);\n\n      if(!key || self[key] === undefined || _rewrite === true || (_rewrite === undefined && self[key] !== false)) {\n        self[key || _header] = normalizeValue(_value);\n      }\n    }\n\n    const setHeaders = (headers, _rewrite) =>\n      utils.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));\n\n    if (utils.isPlainObject(header) || header instanceof this.constructor) {\n      setHeaders(header, valueOrRewrite)\n    } else if(utils.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {\n      setHeaders(parseHeaders(header), valueOrRewrite);\n    } else if (utils.isObject(header) && utils.isIterable(header)) {\n      let obj = {}, dest, key;\n      for (const entry of header) {\n        if (!utils.isArray(entry)) {\n          throw TypeError('Object iterator must return a key-value pair');\n        }\n\n        obj[key = entry[0]] = (dest = obj[key]) ?\n          (utils.isArray(dest) ? [...dest, entry[1]] : [dest, entry[1]]) : entry[1];\n      }\n\n      setHeaders(obj, valueOrRewrite)\n    } else {\n      header != null && setHeader(valueOrRewrite, header, rewrite);\n    }\n\n    return this;\n  }\n\n  get(header, parser) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      if (key) {\n        const value = this[key];\n\n        if (!parser) {\n          return value;\n        }\n\n        if (parser === true) {\n          return parseTokens(value);\n        }\n\n        if (utils.isFunction(parser)) {\n          return parser.call(this, value, key);\n        }\n\n        if (utils.isRegExp(parser)) {\n          return parser.exec(value);\n        }\n\n        throw new TypeError('parser must be boolean|regexp|function');\n      }\n    }\n  }\n\n  has(header, matcher) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      return !!(key && this[key] !== undefined && (!matcher || matchHeaderValue(this, this[key], key, matcher)));\n    }\n\n    return false;\n  }\n\n  delete(header, matcher) {\n    const self = this;\n    let deleted = false;\n\n    function deleteHeader(_header) {\n      _header = normalizeHeader(_header);\n\n      if (_header) {\n        const key = utils.findKey(self, _header);\n\n        if (key && (!matcher || matchHeaderValue(self, self[key], key, matcher))) {\n          delete self[key];\n\n          deleted = true;\n        }\n      }\n    }\n\n    if (utils.isArray(header)) {\n      header.forEach(deleteHeader);\n    } else {\n      deleteHeader(header);\n    }\n\n    return deleted;\n  }\n\n  clear(matcher) {\n    const keys = Object.keys(this);\n    let i = keys.length;\n    let deleted = false;\n\n    while (i--) {\n      const key = keys[i];\n      if(!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {\n        delete this[key];\n        deleted = true;\n      }\n    }\n\n    return deleted;\n  }\n\n  normalize(format) {\n    const self = this;\n    const headers = {};\n\n    utils.forEach(this, (value, header) => {\n      const key = utils.findKey(headers, header);\n\n      if (key) {\n        self[key] = normalizeValue(value);\n        delete self[header];\n        return;\n      }\n\n      const normalized = format ? formatHeader(header) : String(header).trim();\n\n      if (normalized !== header) {\n        delete self[header];\n      }\n\n      self[normalized] = normalizeValue(value);\n\n      headers[normalized] = true;\n    });\n\n    return this;\n  }\n\n  concat(...targets) {\n    return this.constructor.concat(this, ...targets);\n  }\n\n  toJSON(asStrings) {\n    const obj = Object.create(null);\n\n    utils.forEach(this, (value, header) => {\n      value != null && value !== false && (obj[header] = asStrings && utils.isArray(value) ? value.join(', ') : value);\n    });\n\n    return obj;\n  }\n\n  [Symbol.iterator]() {\n    return Object.entries(this.toJSON())[Symbol.iterator]();\n  }\n\n  toString() {\n    return Object.entries(this.toJSON()).map(([header, value]) => header + ': ' + value).join('\\n');\n  }\n\n  getSetCookie() {\n    return this.get(\"set-cookie\") || [];\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'AxiosHeaders';\n  }\n\n  static from(thing) {\n    return thing instanceof this ? thing : new this(thing);\n  }\n\n  static concat(first, ...targets) {\n    const computed = new this(first);\n\n    targets.forEach((target) => computed.set(target));\n\n    return computed;\n  }\n\n  static accessor(header) {\n    const internals = this[$internals] = (this[$internals] = {\n      accessors: {}\n    });\n\n    const accessors = internals.accessors;\n    const prototype = this.prototype;\n\n    function defineAccessor(_header) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!accessors[lHeader]) {\n        buildAccessors(prototype, _header);\n        accessors[lHeader] = true;\n      }\n    }\n\n    utils.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);\n\n    return this;\n  }\n}\n\nAxiosHeaders.accessor(['Content-Type', 'Content-Length', 'Accept', 'Accept-Encoding', 'User-Agent', 'Authorization']);\n\n// reserved names hotfix\nutils.reduceDescriptors(AxiosHeaders.prototype, ({value}, key) => {\n  let mapped = key[0].toUpperCase() + key.slice(1); // map `set` => `Set`\n  return {\n    get: () => value,\n    set(headerValue) {\n      this[mapped] = headerValue;\n    }\n  }\n});\n\nutils.freezeMethods(AxiosHeaders);\n\nexport default AxiosHeaders;\n", "'use strict';\n\nimport utils from './../utils.js';\nimport defaults from '../defaults/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Array|Function} fns A single function or Array of functions\n * @param {?Object} response The response object\n *\n * @returns {*} The resulting transformed data\n */\nexport default function transformData(fns, response) {\n  const config = this || defaults;\n  const context = response || config;\n  const headers = AxiosHeaders.from(context.headers);\n  let data = context.data;\n\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(config, data, headers.normalize(), response ? response.status : undefined);\n  });\n\n  headers.normalize();\n\n  return data;\n}\n", "'use strict';\n\nexport default function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n}\n", "'use strict';\n\nimport AxiosError from '../core/AxiosError.js';\nimport utils from '../utils.js';\n\n/**\n * A `CanceledError` is an object that is thrown when an operation is canceled.\n *\n * @param {string=} message The message.\n * @param {Object=} config The config.\n * @param {Object=} request The request.\n *\n * @returns {CanceledError} The created error.\n */\nfunction CanceledError(message, config, request) {\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  AxiosError.call(this, message == null ? 'canceled' : message, AxiosError.ERR_CANCELED, config, request);\n  this.name = 'CanceledError';\n}\n\nutils.inherits(CanceledError, AxiosError, {\n  __CANCEL__: true\n});\n\nexport default CanceledError;\n", "'use strict';\n\nimport AxiosError from './AxiosError.js';\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n *\n * @returns {object} The response.\n */\nexport default function settle(resolve, reject, response) {\n  const validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(new AxiosError(\n      'Request failed with status code ' + response.status,\n      [AxiosError.ERR_BAD_REQUEST, AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],\n      response.config,\n      response.request,\n      response\n    ));\n  }\n}\n", "'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n *\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nexport default function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(url);\n}\n", "'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n *\n * @returns {string} The combined URL\n */\nexport default function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/?\\/$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n}\n", "'use strict';\n\nimport isAbsoluteURL from '../helpers/isAbsoluteURL.js';\nimport combineURLs from '../helpers/combineURLs.js';\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n *\n * @returns {string} The combined full path\n */\nexport default function buildFullPath(baseURL, requestedURL, allowAbsoluteUrls) {\n  let isRelativeUrl = !isAbsoluteURL(requestedURL);\n  if (baseURL && (isRelativeUrl || allowAbsoluteUrls == false)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n}\n", "'use strict';\n\nvar parseUrl = require('url').parse;\n\nvar DEFAULT_PORTS = {\n  ftp: 21,\n  gopher: 70,\n  http: 80,\n  https: 443,\n  ws: 80,\n  wss: 443,\n};\n\nvar stringEndsWith = String.prototype.endsWith || function(s) {\n  return s.length <= this.length &&\n    this.indexOf(s, this.length - s.length) !== -1;\n};\n\n/**\n * @param {string|object} url - The URL, or the result from url.parse.\n * @return {string} The URL of the proxy that should handle the request to the\n *  given URL. If no proxy is set, this will be an empty string.\n */\nfunction getProxyForUrl(url) {\n  var parsedUrl = typeof url === 'string' ? parseUrl(url) : url || {};\n  var proto = parsedUrl.protocol;\n  var hostname = parsedUrl.host;\n  var port = parsedUrl.port;\n  if (typeof hostname !== 'string' || !hostname || typeof proto !== 'string') {\n    return '';  // Don't proxy URLs without a valid scheme or host.\n  }\n\n  proto = proto.split(':', 1)[0];\n  // Stripping ports in this way instead of using parsedUrl.hostname to make\n  // sure that the brackets around IPv6 addresses are kept.\n  hostname = hostname.replace(/:\\d*$/, '');\n  port = parseInt(port) || DEFAULT_PORTS[proto] || 0;\n  if (!shouldProxy(hostname, port)) {\n    return '';  // Don't proxy URLs that match NO_PROXY.\n  }\n\n  var proxy =\n    getEnv('npm_config_' + proto + '_proxy') ||\n    getEnv(proto + '_proxy') ||\n    getEnv('npm_config_proxy') ||\n    getEnv('all_proxy');\n  if (proxy && proxy.indexOf('://') === -1) {\n    // Missing scheme in proxy, default to the requested URL's scheme.\n    proxy = proto + '://' + proxy;\n  }\n  return proxy;\n}\n\n/**\n * Determines whether a given URL should be proxied.\n *\n * @param {string} hostname - The host name of the URL.\n * @param {number} port - The effective port of the URL.\n * @returns {boolean} Whether the given URL should be proxied.\n * @private\n */\nfunction shouldProxy(hostname, port) {\n  var NO_PROXY =\n    (getEnv('npm_config_no_proxy') || getEnv('no_proxy')).toLowerCase();\n  if (!NO_PROXY) {\n    return true;  // Always proxy if NO_PROXY is not set.\n  }\n  if (NO_PROXY === '*') {\n    return false;  // Never proxy if wildcard is set.\n  }\n\n  return NO_PROXY.split(/[,\\s]/).every(function(proxy) {\n    if (!proxy) {\n      return true;  // Skip zero-length hosts.\n    }\n    var parsedProxy = proxy.match(/^(.+):(\\d+)$/);\n    var parsedProxyHostname = parsedProxy ? parsedProxy[1] : proxy;\n    var parsedProxyPort = parsedProxy ? parseInt(parsedProxy[2]) : 0;\n    if (parsedProxyPort && parsedProxyPort !== port) {\n      return true;  // Skip if ports don't match.\n    }\n\n    if (!/^[.*]/.test(parsedProxyHostname)) {\n      // No wildcards, so stop proxying if there is an exact match.\n      return hostname !== parsedProxyHostname;\n    }\n\n    if (parsedProxyHostname.charAt(0) === '*') {\n      // Remove leading wildcard.\n      parsedProxyHostname = parsedProxyHostname.slice(1);\n    }\n    // Stop proxying if the hostname ends with the no_proxy host.\n    return !stringEndsWith.call(hostname, parsedProxyHostname);\n  });\n}\n\n/**\n * Get the value for an environment variable.\n *\n * @param {string} key - The name of the environment variable.\n * @return {string} The value of the environment variable.\n * @private\n */\nfunction getEnv(key) {\n  return process.env[key.toLowerCase()] || process.env[key.toUpperCase()] || '';\n}\n\nexports.getProxyForUrl = getProxyForUrl;\n", "/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n", "\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '')\n\t\t\t.trim()\n\t\t\t.replace(/\\s+/g, ',')\n\t\t\t.split(',')\n\t\t\t.filter(Boolean);\n\n\t\tfor (const ns of split) {\n\t\t\tif (ns[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(ns.slice(1));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(ns);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks if the given string matches a namespace template, honoring\n\t * asterisks as wildcards.\n\t *\n\t * @param {String} search\n\t * @param {String} template\n\t * @return {Boolean}\n\t */\n\tfunction matchesTemplate(search, template) {\n\t\tlet searchIndex = 0;\n\t\tlet templateIndex = 0;\n\t\tlet starIndex = -1;\n\t\tlet matchIndex = 0;\n\n\t\twhile (searchIndex < search.length) {\n\t\t\tif (templateIndex < template.length && (template[templateIndex] === search[searchIndex] || template[templateIndex] === '*')) {\n\t\t\t\t// Match character or proceed with wildcard\n\t\t\t\tif (template[templateIndex] === '*') {\n\t\t\t\t\tstarIndex = templateIndex;\n\t\t\t\t\tmatchIndex = searchIndex;\n\t\t\t\t\ttemplateIndex++; // Skip the '*'\n\t\t\t\t} else {\n\t\t\t\t\tsearchIndex++;\n\t\t\t\t\ttemplateIndex++;\n\t\t\t\t}\n\t\t\t} else if (starIndex !== -1) { // eslint-disable-line no-negated-condition\n\t\t\t\t// Backtrack to the last '*' and try to match more characters\n\t\t\t\ttemplateIndex = starIndex + 1;\n\t\t\t\tmatchIndex++;\n\t\t\t\tsearchIndex = matchIndex;\n\t\t\t} else {\n\t\t\t\treturn false; // No match\n\t\t\t}\n\t\t}\n\n\t\t// Handle trailing '*' in template\n\t\twhile (templateIndex < template.length && template[templateIndex] === '*') {\n\t\t\ttemplateIndex++;\n\t\t}\n\n\t\treturn templateIndex === template.length;\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names,\n\t\t\t...createDebug.skips.map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tfor (const skip of createDebug.skips) {\n\t\t\tif (matchesTemplate(name, skip)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (const ns of createDebug.names) {\n\t\t\tif (matchesTemplate(name, ns)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n", "/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\tlet m;\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\t// eslint-disable-next-line no-return-assign\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && (m = navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)) && parseInt(m[1], 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug') || exports.storage.getItem('DEBUG') ;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n", "'use strict';\n\nmodule.exports = (flag, argv = process.argv) => {\n\tconst prefix = flag.startsWith('-') ? '' : (flag.length === 1 ? '-' : '--');\n\tconst position = argv.indexOf(prefix + flag);\n\tconst terminatorPosition = argv.indexOf('--');\n\treturn position !== -1 && (terminatorPosition === -1 || position < terminatorPosition);\n};\n", "'use strict';\nconst os = require('os');\nconst tty = require('tty');\nconst hasFlag = require('has-flag');\n\nconst {env} = process;\n\nlet flagForceColor;\nif (hasFlag('no-color') ||\n\thasFlag('no-colors') ||\n\thasFlag('color=false') ||\n\thasFlag('color=never')) {\n\tflagForceColor = 0;\n} else if (hasFlag('color') ||\n\thasFlag('colors') ||\n\thasFlag('color=true') ||\n\thasFlag('color=always')) {\n\tflagForceColor = 1;\n}\n\nfunction envForceColor() {\n\tif ('FORCE_COLOR' in env) {\n\t\tif (env.FORCE_COLOR === 'true') {\n\t\t\treturn 1;\n\t\t}\n\n\t\tif (env.FORCE_COLOR === 'false') {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn env.FORCE_COLOR.length === 0 ? 1 : Math.min(Number.parseInt(env.FORCE_COLOR, 10), 3);\n\t}\n}\n\nfunction translateLevel(level) {\n\tif (level === 0) {\n\t\treturn false;\n\t}\n\n\treturn {\n\t\tlevel,\n\t\thasBasic: true,\n\t\thas256: level >= 2,\n\t\thas16m: level >= 3\n\t};\n}\n\nfunction supportsColor(haveStream, {streamIsTTY, sniffFlags = true} = {}) {\n\tconst noFlagForceColor = envForceColor();\n\tif (noFlagForceColor !== undefined) {\n\t\tflagForceColor = noFlagForceColor;\n\t}\n\n\tconst forceColor = sniffFlags ? flagForceColor : noFlagForceColor;\n\n\tif (forceColor === 0) {\n\t\treturn 0;\n\t}\n\n\tif (sniffFlags) {\n\t\tif (hasFlag('color=16m') ||\n\t\t\thasFlag('color=full') ||\n\t\t\thasFlag('color=truecolor')) {\n\t\t\treturn 3;\n\t\t}\n\n\t\tif (hasFlag('color=256')) {\n\t\t\treturn 2;\n\t\t}\n\t}\n\n\tif (haveStream && !streamIsTTY && forceColor === undefined) {\n\t\treturn 0;\n\t}\n\n\tconst min = forceColor || 0;\n\n\tif (env.TERM === 'dumb') {\n\t\treturn min;\n\t}\n\n\tif (process.platform === 'win32') {\n\t\t// Windows 10 build 10586 is the first Windows release that supports 256 colors.\n\t\t// Windows 10 build 14931 is the first release that supports 16m/TrueColor.\n\t\tconst osRelease = os.release().split('.');\n\t\tif (\n\t\t\tNumber(osRelease[0]) >= 10 &&\n\t\t\tNumber(osRelease[2]) >= 10586\n\t\t) {\n\t\t\treturn Number(osRelease[2]) >= 14931 ? 3 : 2;\n\t\t}\n\n\t\treturn 1;\n\t}\n\n\tif ('CI' in env) {\n\t\tif (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI', 'GITHUB_ACTIONS', 'BUILDKITE', 'DRONE'].some(sign => sign in env) || env.CI_NAME === 'codeship') {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn min;\n\t}\n\n\tif ('TEAMCITY_VERSION' in env) {\n\t\treturn /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0;\n\t}\n\n\tif (env.COLORTERM === 'truecolor') {\n\t\treturn 3;\n\t}\n\n\tif ('TERM_PROGRAM' in env) {\n\t\tconst version = Number.parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);\n\n\t\tswitch (env.TERM_PROGRAM) {\n\t\t\tcase 'iTerm.app':\n\t\t\t\treturn version >= 3 ? 3 : 2;\n\t\t\tcase 'Apple_Terminal':\n\t\t\t\treturn 2;\n\t\t\t// No default\n\t\t}\n\t}\n\n\tif (/-256(color)?$/i.test(env.TERM)) {\n\t\treturn 2;\n\t}\n\n\tif (/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {\n\t\treturn 1;\n\t}\n\n\tif ('COLORTERM' in env) {\n\t\treturn 1;\n\t}\n\n\treturn min;\n}\n\nfunction getSupportLevel(stream, options = {}) {\n\tconst level = supportsColor(stream, {\n\t\tstreamIsTTY: stream && stream.isTTY,\n\t\t...options\n\t});\n\n\treturn translateLevel(level);\n}\n\nmodule.exports = {\n\tsupportsColor: getSupportLevel,\n\tstdout: getSupportLevel({isTTY: tty.isatty(1)}),\n\tstderr: getSupportLevel({isTTY: tty.isatty(2)})\n};\n", "/**\n * Module dependencies.\n */\n\nconst tty = require('tty');\nconst util = require('util');\n\n/**\n * This is the Node.js implementation of `debug()`.\n */\n\nexports.init = init;\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.destroy = util.deprecate(\n\t() => {},\n\t'Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.'\n);\n\n/**\n * Colors.\n */\n\nexports.colors = [6, 2, 3, 4, 5, 1];\n\ntry {\n\t// Optional dependency (as in, doesn't need to be installed, NOT like optionalDependencies in package.json)\n\t// eslint-disable-next-line import/no-extraneous-dependencies\n\tconst supportsColor = require('supports-color');\n\n\tif (supportsColor && (supportsColor.stderr || supportsColor).level >= 2) {\n\t\texports.colors = [\n\t\t\t20,\n\t\t\t21,\n\t\t\t26,\n\t\t\t27,\n\t\t\t32,\n\t\t\t33,\n\t\t\t38,\n\t\t\t39,\n\t\t\t40,\n\t\t\t41,\n\t\t\t42,\n\t\t\t43,\n\t\t\t44,\n\t\t\t45,\n\t\t\t56,\n\t\t\t57,\n\t\t\t62,\n\t\t\t63,\n\t\t\t68,\n\t\t\t69,\n\t\t\t74,\n\t\t\t75,\n\t\t\t76,\n\t\t\t77,\n\t\t\t78,\n\t\t\t79,\n\t\t\t80,\n\t\t\t81,\n\t\t\t92,\n\t\t\t93,\n\t\t\t98,\n\t\t\t99,\n\t\t\t112,\n\t\t\t113,\n\t\t\t128,\n\t\t\t129,\n\t\t\t134,\n\t\t\t135,\n\t\t\t148,\n\t\t\t149,\n\t\t\t160,\n\t\t\t161,\n\t\t\t162,\n\t\t\t163,\n\t\t\t164,\n\t\t\t165,\n\t\t\t166,\n\t\t\t167,\n\t\t\t168,\n\t\t\t169,\n\t\t\t170,\n\t\t\t171,\n\t\t\t172,\n\t\t\t173,\n\t\t\t178,\n\t\t\t179,\n\t\t\t184,\n\t\t\t185,\n\t\t\t196,\n\t\t\t197,\n\t\t\t198,\n\t\t\t199,\n\t\t\t200,\n\t\t\t201,\n\t\t\t202,\n\t\t\t203,\n\t\t\t204,\n\t\t\t205,\n\t\t\t206,\n\t\t\t207,\n\t\t\t208,\n\t\t\t209,\n\t\t\t214,\n\t\t\t215,\n\t\t\t220,\n\t\t\t221\n\t\t];\n\t}\n} catch (error) {\n\t// Swallow - we only care if `supports-color` is available; it doesn't have to be.\n}\n\n/**\n * Build up the default `inspectOpts` object from the environment variables.\n *\n *   $ DEBUG_COLORS=no DEBUG_DEPTH=10 DEBUG_SHOW_HIDDEN=enabled node script.js\n */\n\nexports.inspectOpts = Object.keys(process.env).filter(key => {\n\treturn /^debug_/i.test(key);\n}).reduce((obj, key) => {\n\t// Camel-case\n\tconst prop = key\n\t\t.substring(6)\n\t\t.toLowerCase()\n\t\t.replace(/_([a-z])/g, (_, k) => {\n\t\t\treturn k.toUpperCase();\n\t\t});\n\n\t// Coerce string value into JS value\n\tlet val = process.env[key];\n\tif (/^(yes|on|true|enabled)$/i.test(val)) {\n\t\tval = true;\n\t} else if (/^(no|off|false|disabled)$/i.test(val)) {\n\t\tval = false;\n\t} else if (val === 'null') {\n\t\tval = null;\n\t} else {\n\t\tval = Number(val);\n\t}\n\n\tobj[prop] = val;\n\treturn obj;\n}, {});\n\n/**\n * Is stdout a TTY? Colored output is enabled when `true`.\n */\n\nfunction useColors() {\n\treturn 'colors' in exports.inspectOpts ?\n\t\tBoolean(exports.inspectOpts.colors) :\n\t\ttty.isatty(process.stderr.fd);\n}\n\n/**\n * Adds ANSI color escape codes if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\tconst {namespace: name, useColors} = this;\n\n\tif (useColors) {\n\t\tconst c = this.color;\n\t\tconst colorCode = '\\u001B[3' + (c < 8 ? c : '8;5;' + c);\n\t\tconst prefix = `  ${colorCode};1m${name} \\u001B[0m`;\n\n\t\targs[0] = prefix + args[0].split('\\n').join('\\n' + prefix);\n\t\targs.push(colorCode + 'm+' + module.exports.humanize(this.diff) + '\\u001B[0m');\n\t} else {\n\t\targs[0] = getDate() + name + ' ' + args[0];\n\t}\n}\n\nfunction getDate() {\n\tif (exports.inspectOpts.hideDate) {\n\t\treturn '';\n\t}\n\treturn new Date().toISOString() + ' ';\n}\n\n/**\n * Invokes `util.formatWithOptions()` with the specified arguments and writes to stderr.\n */\n\nfunction log(...args) {\n\treturn process.stderr.write(util.formatWithOptions(exports.inspectOpts, ...args) + '\\n');\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\tif (namespaces) {\n\t\tprocess.env.DEBUG = namespaces;\n\t} else {\n\t\t// If you set a process.env field to null or undefined, it gets cast to the\n\t\t// string 'null' or 'undefined'. Just delete instead.\n\t\tdelete process.env.DEBUG;\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n\treturn process.env.DEBUG;\n}\n\n/**\n * Init logic for `debug` instances.\n *\n * Create a new `inspectOpts` object in case `useColors` is set\n * differently for a particular `debug` instance.\n */\n\nfunction init(debug) {\n\tdebug.inspectOpts = {};\n\n\tconst keys = Object.keys(exports.inspectOpts);\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tdebug.inspectOpts[keys[i]] = exports.inspectOpts[keys[i]];\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %o to `util.inspect()`, all on a single line.\n */\n\nformatters.o = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts)\n\t\t.split('\\n')\n\t\t.map(str => str.trim())\n\t\t.join(' ');\n};\n\n/**\n * Map %O to `util.inspect()`, allowing multiple lines if needed.\n */\n\nformatters.O = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts);\n};\n", "/**\n * Detect Electron renderer / nwjs process, which is node, but we should\n * treat as a browser.\n */\n\nif (typeof process === 'undefined' || process.type === 'renderer' || process.browser === true || process.__nwjs) {\n\tmodule.exports = require('./browser.js');\n} else {\n\tmodule.exports = require('./node.js');\n}\n", "var debug;\n\nmodule.exports = function () {\n  if (!debug) {\n    try {\n      /* eslint global-require: off */\n      debug = require(\"debug\")(\"follow-redirects\");\n    }\n    catch (error) { /* */ }\n    if (typeof debug !== \"function\") {\n      debug = function () { /* */ };\n    }\n  }\n  debug.apply(null, arguments);\n};\n", "var url = require(\"url\");\nvar URL = url.URL;\nvar http = require(\"http\");\nvar https = require(\"https\");\nvar Writable = require(\"stream\").Writable;\nvar assert = require(\"assert\");\nvar debug = require(\"./debug\");\n\n// Preventive platform detection\n// istanbul ignore next\n(function detectUnsupportedEnvironment() {\n  var looksLikeNode = typeof process !== \"undefined\";\n  var looksLikeBrowser = typeof window !== \"undefined\" && typeof document !== \"undefined\";\n  var looksLikeV8 = isFunction(Error.captureStackTrace);\n  if (!looksLikeNode && (looksLikeBrowser || !looksLikeV8)) {\n    console.warn(\"The follow-redirects package should be excluded from browser builds.\");\n  }\n}());\n\n// Whether to use the native URL object or the legacy url module\nvar useNativeURL = false;\ntry {\n  assert(new URL(\"\"));\n}\ncatch (error) {\n  useNativeURL = error.code === \"ERR_INVALID_URL\";\n}\n\n// URL fields to preserve in copy operations\nvar preservedUrlFields = [\n  \"auth\",\n  \"host\",\n  \"hostname\",\n  \"href\",\n  \"path\",\n  \"pathname\",\n  \"port\",\n  \"protocol\",\n  \"query\",\n  \"search\",\n  \"hash\",\n];\n\n// Create handlers that pass events from native requests\nvar events = [\"abort\", \"aborted\", \"connect\", \"error\", \"socket\", \"timeout\"];\nvar eventHandlers = Object.create(null);\nevents.forEach(function (event) {\n  eventHandlers[event] = function (arg1, arg2, arg3) {\n    this._redirectable.emit(event, arg1, arg2, arg3);\n  };\n});\n\n// Error types with codes\nvar InvalidUrlError = createErrorType(\n  \"ERR_INVALID_URL\",\n  \"Invalid URL\",\n  TypeError\n);\nvar RedirectionError = createErrorType(\n  \"ERR_FR_REDIRECTION_FAILURE\",\n  \"Redirected request failed\"\n);\nvar TooManyRedirectsError = createErrorType(\n  \"ERR_FR_TOO_MANY_REDIRECTS\",\n  \"Maximum number of redirects exceeded\",\n  RedirectionError\n);\nvar MaxBodyLengthExceededError = createErrorType(\n  \"ERR_FR_MAX_BODY_LENGTH_EXCEEDED\",\n  \"Request body larger than maxBodyLength limit\"\n);\nvar WriteAfterEndError = createErrorType(\n  \"ERR_STREAM_WRITE_AFTER_END\",\n  \"write after end\"\n);\n\n// istanbul ignore next\nvar destroy = Writable.prototype.destroy || noop;\n\n// An HTTP(S) request that can be redirected\nfunction RedirectableRequest(options, responseCallback) {\n  // Initialize the request\n  Writable.call(this);\n  this._sanitizeOptions(options);\n  this._options = options;\n  this._ended = false;\n  this._ending = false;\n  this._redirectCount = 0;\n  this._redirects = [];\n  this._requestBodyLength = 0;\n  this._requestBodyBuffers = [];\n\n  // Attach a callback if passed\n  if (responseCallback) {\n    this.on(\"response\", responseCallback);\n  }\n\n  // React to responses of native requests\n  var self = this;\n  this._onNativeResponse = function (response) {\n    try {\n      self._processResponse(response);\n    }\n    catch (cause) {\n      self.emit(\"error\", cause instanceof RedirectionError ?\n        cause : new RedirectionError({ cause: cause }));\n    }\n  };\n\n  // Perform the first request\n  this._performRequest();\n}\nRedirectableRequest.prototype = Object.create(Writable.prototype);\n\nRedirectableRequest.prototype.abort = function () {\n  destroyRequest(this._currentRequest);\n  this._currentRequest.abort();\n  this.emit(\"abort\");\n};\n\nRedirectableRequest.prototype.destroy = function (error) {\n  destroyRequest(this._currentRequest, error);\n  destroy.call(this, error);\n  return this;\n};\n\n// Writes buffered data to the current native request\nRedirectableRequest.prototype.write = function (data, encoding, callback) {\n  // Writing is not allowed if end has been called\n  if (this._ending) {\n    throw new WriteAfterEndError();\n  }\n\n  // Validate input and shift parameters if necessary\n  if (!isString(data) && !isBuffer(data)) {\n    throw new TypeError(\"data should be a string, Buffer or Uint8Array\");\n  }\n  if (isFunction(encoding)) {\n    callback = encoding;\n    encoding = null;\n  }\n\n  // Ignore empty buffers, since writing them doesn't invoke the callback\n  // https://github.com/nodejs/node/issues/22066\n  if (data.length === 0) {\n    if (callback) {\n      callback();\n    }\n    return;\n  }\n  // Only write when we don't exceed the maximum body length\n  if (this._requestBodyLength + data.length <= this._options.maxBodyLength) {\n    this._requestBodyLength += data.length;\n    this._requestBodyBuffers.push({ data: data, encoding: encoding });\n    this._currentRequest.write(data, encoding, callback);\n  }\n  // Error when we exceed the maximum body length\n  else {\n    this.emit(\"error\", new MaxBodyLengthExceededError());\n    this.abort();\n  }\n};\n\n// Ends the current native request\nRedirectableRequest.prototype.end = function (data, encoding, callback) {\n  // Shift parameters if necessary\n  if (isFunction(data)) {\n    callback = data;\n    data = encoding = null;\n  }\n  else if (isFunction(encoding)) {\n    callback = encoding;\n    encoding = null;\n  }\n\n  // Write data if needed and end\n  if (!data) {\n    this._ended = this._ending = true;\n    this._currentRequest.end(null, null, callback);\n  }\n  else {\n    var self = this;\n    var currentRequest = this._currentRequest;\n    this.write(data, encoding, function () {\n      self._ended = true;\n      currentRequest.end(null, null, callback);\n    });\n    this._ending = true;\n  }\n};\n\n// Sets a header value on the current native request\nRedirectableRequest.prototype.setHeader = function (name, value) {\n  this._options.headers[name] = value;\n  this._currentRequest.setHeader(name, value);\n};\n\n// Clears a header value on the current native request\nRedirectableRequest.prototype.removeHeader = function (name) {\n  delete this._options.headers[name];\n  this._currentRequest.removeHeader(name);\n};\n\n// Global timeout for all underlying requests\nRedirectableRequest.prototype.setTimeout = function (msecs, callback) {\n  var self = this;\n\n  // Destroys the socket on timeout\n  function destroyOnTimeout(socket) {\n    socket.setTimeout(msecs);\n    socket.removeListener(\"timeout\", socket.destroy);\n    socket.addListener(\"timeout\", socket.destroy);\n  }\n\n  // Sets up a timer to trigger a timeout event\n  function startTimer(socket) {\n    if (self._timeout) {\n      clearTimeout(self._timeout);\n    }\n    self._timeout = setTimeout(function () {\n      self.emit(\"timeout\");\n      clearTimer();\n    }, msecs);\n    destroyOnTimeout(socket);\n  }\n\n  // Stops a timeout from triggering\n  function clearTimer() {\n    // Clear the timeout\n    if (self._timeout) {\n      clearTimeout(self._timeout);\n      self._timeout = null;\n    }\n\n    // Clean up all attached listeners\n    self.removeListener(\"abort\", clearTimer);\n    self.removeListener(\"error\", clearTimer);\n    self.removeListener(\"response\", clearTimer);\n    self.removeListener(\"close\", clearTimer);\n    if (callback) {\n      self.removeListener(\"timeout\", callback);\n    }\n    if (!self.socket) {\n      self._currentRequest.removeListener(\"socket\", startTimer);\n    }\n  }\n\n  // Attach callback if passed\n  if (callback) {\n    this.on(\"timeout\", callback);\n  }\n\n  // Start the timer if or when the socket is opened\n  if (this.socket) {\n    startTimer(this.socket);\n  }\n  else {\n    this._currentRequest.once(\"socket\", startTimer);\n  }\n\n  // Clean up on events\n  this.on(\"socket\", destroyOnTimeout);\n  this.on(\"abort\", clearTimer);\n  this.on(\"error\", clearTimer);\n  this.on(\"response\", clearTimer);\n  this.on(\"close\", clearTimer);\n\n  return this;\n};\n\n// Proxy all other public ClientRequest methods\n[\n  \"flushHeaders\", \"getHeader\",\n  \"setNoDelay\", \"setSocketKeepAlive\",\n].forEach(function (method) {\n  RedirectableRequest.prototype[method] = function (a, b) {\n    return this._currentRequest[method](a, b);\n  };\n});\n\n// Proxy all public ClientRequest properties\n[\"aborted\", \"connection\", \"socket\"].forEach(function (property) {\n  Object.defineProperty(RedirectableRequest.prototype, property, {\n    get: function () { return this._currentRequest[property]; },\n  });\n});\n\nRedirectableRequest.prototype._sanitizeOptions = function (options) {\n  // Ensure headers are always present\n  if (!options.headers) {\n    options.headers = {};\n  }\n\n  // Since http.request treats host as an alias of hostname,\n  // but the url module interprets host as hostname plus port,\n  // eliminate the host property to avoid confusion.\n  if (options.host) {\n    // Use hostname if set, because it has precedence\n    if (!options.hostname) {\n      options.hostname = options.host;\n    }\n    delete options.host;\n  }\n\n  // Complete the URL object when necessary\n  if (!options.pathname && options.path) {\n    var searchPos = options.path.indexOf(\"?\");\n    if (searchPos < 0) {\n      options.pathname = options.path;\n    }\n    else {\n      options.pathname = options.path.substring(0, searchPos);\n      options.search = options.path.substring(searchPos);\n    }\n  }\n};\n\n\n// Executes the next native request (initial or redirect)\nRedirectableRequest.prototype._performRequest = function () {\n  // Load the native protocol\n  var protocol = this._options.protocol;\n  var nativeProtocol = this._options.nativeProtocols[protocol];\n  if (!nativeProtocol) {\n    throw new TypeError(\"Unsupported protocol \" + protocol);\n  }\n\n  // If specified, use the agent corresponding to the protocol\n  // (HTTP and HTTPS use different types of agents)\n  if (this._options.agents) {\n    var scheme = protocol.slice(0, -1);\n    this._options.agent = this._options.agents[scheme];\n  }\n\n  // Create the native request and set up its event handlers\n  var request = this._currentRequest =\n        nativeProtocol.request(this._options, this._onNativeResponse);\n  request._redirectable = this;\n  for (var event of events) {\n    request.on(event, eventHandlers[event]);\n  }\n\n  // RFC7230\u00A75.3.1: When making a request directly to an origin server, [\u2026]\n  // a client MUST send only the absolute path [\u2026] as the request-target.\n  this._currentUrl = /^\\//.test(this._options.path) ?\n    url.format(this._options) :\n    // When making a request to a proxy, [\u2026]\n    // a client MUST send the target URI in absolute-form [\u2026].\n    this._options.path;\n\n  // End a redirected request\n  // (The first request must be ended explicitly with RedirectableRequest#end)\n  if (this._isRedirect) {\n    // Write the request entity and end\n    var i = 0;\n    var self = this;\n    var buffers = this._requestBodyBuffers;\n    (function writeNext(error) {\n      // Only write if this request has not been redirected yet\n      // istanbul ignore else\n      if (request === self._currentRequest) {\n        // Report any write errors\n        // istanbul ignore if\n        if (error) {\n          self.emit(\"error\", error);\n        }\n        // Write the next buffer if there are still left\n        else if (i < buffers.length) {\n          var buffer = buffers[i++];\n          // istanbul ignore else\n          if (!request.finished) {\n            request.write(buffer.data, buffer.encoding, writeNext);\n          }\n        }\n        // End the request if `end` has been called on us\n        else if (self._ended) {\n          request.end();\n        }\n      }\n    }());\n  }\n};\n\n// Processes a response from the current native request\nRedirectableRequest.prototype._processResponse = function (response) {\n  // Store the redirected response\n  var statusCode = response.statusCode;\n  if (this._options.trackRedirects) {\n    this._redirects.push({\n      url: this._currentUrl,\n      headers: response.headers,\n      statusCode: statusCode,\n    });\n  }\n\n  // RFC7231\u00A76.4: The 3xx (Redirection) class of status code indicates\n  // that further action needs to be taken by the user agent in order to\n  // fulfill the request. If a Location header field is provided,\n  // the user agent MAY automatically redirect its request to the URI\n  // referenced by the Location field value,\n  // even if the specific status code is not understood.\n\n  // If the response is not a redirect; return it as-is\n  var location = response.headers.location;\n  if (!location || this._options.followRedirects === false ||\n      statusCode < 300 || statusCode >= 400) {\n    response.responseUrl = this._currentUrl;\n    response.redirects = this._redirects;\n    this.emit(\"response\", response);\n\n    // Clean up\n    this._requestBodyBuffers = [];\n    return;\n  }\n\n  // The response is a redirect, so abort the current request\n  destroyRequest(this._currentRequest);\n  // Discard the remainder of the response to avoid waiting for data\n  response.destroy();\n\n  // RFC7231\u00A76.4: A client SHOULD detect and intervene\n  // in cyclical redirections (i.e., \"infinite\" redirection loops).\n  if (++this._redirectCount > this._options.maxRedirects) {\n    throw new TooManyRedirectsError();\n  }\n\n  // Store the request headers if applicable\n  var requestHeaders;\n  var beforeRedirect = this._options.beforeRedirect;\n  if (beforeRedirect) {\n    requestHeaders = Object.assign({\n      // The Host header was set by nativeProtocol.request\n      Host: response.req.getHeader(\"host\"),\n    }, this._options.headers);\n  }\n\n  // RFC7231\u00A76.4: Automatic redirection needs to done with\n  // care for methods not known to be safe, [\u2026]\n  // RFC7231\u00A76.4.2\u20133: For historical reasons, a user agent MAY change\n  // the request method from POST to GET for the subsequent request.\n  var method = this._options.method;\n  if ((statusCode === 301 || statusCode === 302) && this._options.method === \"POST\" ||\n      // RFC7231\u00A76.4.4: The 303 (See Other) status code indicates that\n      // the server is redirecting the user agent to a different resource [\u2026]\n      // A user agent can perform a retrieval request targeting that URI\n      // (a GET or HEAD request if using HTTP) [\u2026]\n      (statusCode === 303) && !/^(?:GET|HEAD)$/.test(this._options.method)) {\n    this._options.method = \"GET\";\n    // Drop a possible entity and headers related to it\n    this._requestBodyBuffers = [];\n    removeMatchingHeaders(/^content-/i, this._options.headers);\n  }\n\n  // Drop the Host header, as the redirect might lead to a different host\n  var currentHostHeader = removeMatchingHeaders(/^host$/i, this._options.headers);\n\n  // If the redirect is relative, carry over the host of the last request\n  var currentUrlParts = parseUrl(this._currentUrl);\n  var currentHost = currentHostHeader || currentUrlParts.host;\n  var currentUrl = /^\\w+:/.test(location) ? this._currentUrl :\n    url.format(Object.assign(currentUrlParts, { host: currentHost }));\n\n  // Create the redirected request\n  var redirectUrl = resolveUrl(location, currentUrl);\n  debug(\"redirecting to\", redirectUrl.href);\n  this._isRedirect = true;\n  spreadUrlObject(redirectUrl, this._options);\n\n  // Drop confidential headers when redirecting to a less secure protocol\n  // or to a different domain that is not a superdomain\n  if (redirectUrl.protocol !== currentUrlParts.protocol &&\n     redirectUrl.protocol !== \"https:\" ||\n     redirectUrl.host !== currentHost &&\n     !isSubdomain(redirectUrl.host, currentHost)) {\n    removeMatchingHeaders(/^(?:(?:proxy-)?authorization|cookie)$/i, this._options.headers);\n  }\n\n  // Evaluate the beforeRedirect callback\n  if (isFunction(beforeRedirect)) {\n    var responseDetails = {\n      headers: response.headers,\n      statusCode: statusCode,\n    };\n    var requestDetails = {\n      url: currentUrl,\n      method: method,\n      headers: requestHeaders,\n    };\n    beforeRedirect(this._options, responseDetails, requestDetails);\n    this._sanitizeOptions(this._options);\n  }\n\n  // Perform the redirected request\n  this._performRequest();\n};\n\n// Wraps the key/value object of protocols with redirect functionality\nfunction wrap(protocols) {\n  // Default settings\n  var exports = {\n    maxRedirects: 21,\n    maxBodyLength: 10 * 1024 * 1024,\n  };\n\n  // Wrap each protocol\n  var nativeProtocols = {};\n  Object.keys(protocols).forEach(function (scheme) {\n    var protocol = scheme + \":\";\n    var nativeProtocol = nativeProtocols[protocol] = protocols[scheme];\n    var wrappedProtocol = exports[scheme] = Object.create(nativeProtocol);\n\n    // Executes a request, following redirects\n    function request(input, options, callback) {\n      // Parse parameters, ensuring that input is an object\n      if (isURL(input)) {\n        input = spreadUrlObject(input);\n      }\n      else if (isString(input)) {\n        input = spreadUrlObject(parseUrl(input));\n      }\n      else {\n        callback = options;\n        options = validateUrl(input);\n        input = { protocol: protocol };\n      }\n      if (isFunction(options)) {\n        callback = options;\n        options = null;\n      }\n\n      // Set defaults\n      options = Object.assign({\n        maxRedirects: exports.maxRedirects,\n        maxBodyLength: exports.maxBodyLength,\n      }, input, options);\n      options.nativeProtocols = nativeProtocols;\n      if (!isString(options.host) && !isString(options.hostname)) {\n        options.hostname = \"::1\";\n      }\n\n      assert.equal(options.protocol, protocol, \"protocol mismatch\");\n      debug(\"options\", options);\n      return new RedirectableRequest(options, callback);\n    }\n\n    // Executes a GET request, following redirects\n    function get(input, options, callback) {\n      var wrappedRequest = wrappedProtocol.request(input, options, callback);\n      wrappedRequest.end();\n      return wrappedRequest;\n    }\n\n    // Expose the properties on the wrapped protocol\n    Object.defineProperties(wrappedProtocol, {\n      request: { value: request, configurable: true, enumerable: true, writable: true },\n      get: { value: get, configurable: true, enumerable: true, writable: true },\n    });\n  });\n  return exports;\n}\n\nfunction noop() { /* empty */ }\n\nfunction parseUrl(input) {\n  var parsed;\n  // istanbul ignore else\n  if (useNativeURL) {\n    parsed = new URL(input);\n  }\n  else {\n    // Ensure the URL is valid and absolute\n    parsed = validateUrl(url.parse(input));\n    if (!isString(parsed.protocol)) {\n      throw new InvalidUrlError({ input });\n    }\n  }\n  return parsed;\n}\n\nfunction resolveUrl(relative, base) {\n  // istanbul ignore next\n  return useNativeURL ? new URL(relative, base) : parseUrl(url.resolve(base, relative));\n}\n\nfunction validateUrl(input) {\n  if (/^\\[/.test(input.hostname) && !/^\\[[:0-9a-f]+\\]$/i.test(input.hostname)) {\n    throw new InvalidUrlError({ input: input.href || input });\n  }\n  if (/^\\[/.test(input.host) && !/^\\[[:0-9a-f]+\\](:\\d+)?$/i.test(input.host)) {\n    throw new InvalidUrlError({ input: input.href || input });\n  }\n  return input;\n}\n\nfunction spreadUrlObject(urlObject, target) {\n  var spread = target || {};\n  for (var key of preservedUrlFields) {\n    spread[key] = urlObject[key];\n  }\n\n  // Fix IPv6 hostname\n  if (spread.hostname.startsWith(\"[\")) {\n    spread.hostname = spread.hostname.slice(1, -1);\n  }\n  // Ensure port is a number\n  if (spread.port !== \"\") {\n    spread.port = Number(spread.port);\n  }\n  // Concatenate path\n  spread.path = spread.search ? spread.pathname + spread.search : spread.pathname;\n\n  return spread;\n}\n\nfunction removeMatchingHeaders(regex, headers) {\n  var lastValue;\n  for (var header in headers) {\n    if (regex.test(header)) {\n      lastValue = headers[header];\n      delete headers[header];\n    }\n  }\n  return (lastValue === null || typeof lastValue === \"undefined\") ?\n    undefined : String(lastValue).trim();\n}\n\nfunction createErrorType(code, message, baseClass) {\n  // Create constructor\n  function CustomError(properties) {\n    // istanbul ignore else\n    if (isFunction(Error.captureStackTrace)) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n    Object.assign(this, properties || {});\n    this.code = code;\n    this.message = this.cause ? message + \": \" + this.cause.message : message;\n  }\n\n  // Attach constructor and set default properties\n  CustomError.prototype = new (baseClass || Error)();\n  Object.defineProperties(CustomError.prototype, {\n    constructor: {\n      value: CustomError,\n      enumerable: false,\n    },\n    name: {\n      value: \"Error [\" + code + \"]\",\n      enumerable: false,\n    },\n  });\n  return CustomError;\n}\n\nfunction destroyRequest(request, error) {\n  for (var event of events) {\n    request.removeListener(event, eventHandlers[event]);\n  }\n  request.on(\"error\", noop);\n  request.destroy(error);\n}\n\nfunction isSubdomain(subdomain, domain) {\n  assert(isString(subdomain) && isString(domain));\n  var dot = subdomain.length - domain.length - 1;\n  return dot > 0 && subdomain[dot] === \".\" && subdomain.endsWith(domain);\n}\n\nfunction isString(value) {\n  return typeof value === \"string\" || value instanceof String;\n}\n\nfunction isFunction(value) {\n  return typeof value === \"function\";\n}\n\nfunction isBuffer(value) {\n  return typeof value === \"object\" && (\"length\" in value);\n}\n\nfunction isURL(value) {\n  return URL && value instanceof URL;\n}\n\n// Exports\nmodule.exports = wrap({ http: http, https: https });\nmodule.exports.wrap = wrap;\n", "export const VERSION = \"1.13.2\";", "'use strict';\n\nexport default function parseProtocol(url) {\n  const match = /^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(url);\n  return match && match[1] || '';\n}\n", "'use strict';\n\nimport AxiosError from '../core/AxiosError.js';\nimport parseProtocol from './parseProtocol.js';\nimport platform from '../platform/index.js';\n\nconst DATA_URL_PATTERN = /^(?:([^;]+);)?(?:[^;]+;)?(base64|),([\\s\\S]*)$/;\n\n/**\n * Parse data uri to a Buffer or Blob\n *\n * @param {String} uri\n * @param {?Boolean} asBlob\n * @param {?Object} options\n * @param {?Function} options.Blob\n *\n * @returns {Buffer|Blob}\n */\nexport default function fromDataURI(uri, asBlob, options) {\n  const _Blob = options && options.Blob || platform.classes.Blob;\n  const protocol = parseProtocol(uri);\n\n  if (asBlob === undefined && _Blob) {\n    asBlob = true;\n  }\n\n  if (protocol === 'data') {\n    uri = protocol.length ? uri.slice(protocol.length + 1) : uri;\n\n    const match = DATA_URL_PATTERN.exec(uri);\n\n    if (!match) {\n      throw new AxiosError('Invalid URL', AxiosError.ERR_INVALID_URL);\n    }\n\n    const mime = match[1];\n    const isBase64 = match[2];\n    const body = match[3];\n    const buffer = Buffer.from(decodeURIComponent(body), isBase64 ? 'base64' : 'utf8');\n\n    if (asBlob) {\n      if (!_Blob) {\n        throw new AxiosError('Blob is not supported', AxiosError.ERR_NOT_SUPPORT);\n      }\n\n      return new _Blob([buffer], {type: mime});\n    }\n\n    return buffer;\n  }\n\n  throw new AxiosError('Unsupported protocol ' + protocol, AxiosError.ERR_NOT_SUPPORT);\n}\n", "'use strict';\n\nimport stream from 'stream';\nimport utils from '../utils.js';\n\nconst kInternals = Symbol('internals');\n\nclass AxiosTransformStream extends stream.Transform{\n  constructor(options) {\n    options = utils.toFlatObject(options, {\n      maxRate: 0,\n      chunkSize: 64 * 1024,\n      minChunkSize: 100,\n      timeWindow: 500,\n      ticksRate: 2,\n      samplesCount: 15\n    }, null, (prop, source) => {\n      return !utils.isUndefined(source[prop]);\n    });\n\n    super({\n      readableHighWaterMark: options.chunkSize\n    });\n\n    const internals = this[kInternals] = {\n      timeWindow: options.timeWindow,\n      chunkSize: options.chunkSize,\n      maxRate: options.maxRate,\n      minChunkSize: options.minChunkSize,\n      bytesSeen: 0,\n      isCaptured: false,\n      notifiedBytesLoaded: 0,\n      ts: Date.now(),\n      bytes: 0,\n      onReadCallback: null\n    };\n\n    this.on('newListener', event => {\n      if (event === 'progress') {\n        if (!internals.isCaptured) {\n          internals.isCaptured = true;\n        }\n      }\n    });\n  }\n\n  _read(size) {\n    const internals = this[kInternals];\n\n    if (internals.onReadCallback) {\n      internals.onReadCallback();\n    }\n\n    return super._read(size);\n  }\n\n  _transform(chunk, encoding, callback) {\n    const internals = this[kInternals];\n    const maxRate = internals.maxRate;\n\n    const readableHighWaterMark = this.readableHighWaterMark;\n\n    const timeWindow = internals.timeWindow;\n\n    const divider = 1000 / timeWindow;\n    const bytesThreshold = (maxRate / divider);\n    const minChunkSize = internals.minChunkSize !== false ? Math.max(internals.minChunkSize, bytesThreshold * 0.01) : 0;\n\n    const pushChunk = (_chunk, _callback) => {\n      const bytes = Buffer.byteLength(_chunk);\n      internals.bytesSeen += bytes;\n      internals.bytes += bytes;\n\n      internals.isCaptured && this.emit('progress', internals.bytesSeen);\n\n      if (this.push(_chunk)) {\n        process.nextTick(_callback);\n      } else {\n        internals.onReadCallback = () => {\n          internals.onReadCallback = null;\n          process.nextTick(_callback);\n        };\n      }\n    }\n\n    const transformChunk = (_chunk, _callback) => {\n      const chunkSize = Buffer.byteLength(_chunk);\n      let chunkRemainder = null;\n      let maxChunkSize = readableHighWaterMark;\n      let bytesLeft;\n      let passed = 0;\n\n      if (maxRate) {\n        const now = Date.now();\n\n        if (!internals.ts || (passed = (now - internals.ts)) >= timeWindow) {\n          internals.ts = now;\n          bytesLeft = bytesThreshold - internals.bytes;\n          internals.bytes = bytesLeft < 0 ? -bytesLeft : 0;\n          passed = 0;\n        }\n\n        bytesLeft = bytesThreshold - internals.bytes;\n      }\n\n      if (maxRate) {\n        if (bytesLeft <= 0) {\n          // next time window\n          return setTimeout(() => {\n            _callback(null, _chunk);\n          }, timeWindow - passed);\n        }\n\n        if (bytesLeft < maxChunkSize) {\n          maxChunkSize = bytesLeft;\n        }\n      }\n\n      if (maxChunkSize && chunkSize > maxChunkSize && (chunkSize - maxChunkSize) > minChunkSize) {\n        chunkRemainder = _chunk.subarray(maxChunkSize);\n        _chunk = _chunk.subarray(0, maxChunkSize);\n      }\n\n      pushChunk(_chunk, chunkRemainder ? () => {\n        process.nextTick(_callback, null, chunkRemainder);\n      } : _callback);\n    };\n\n    transformChunk(chunk, function transformNextChunk(err, _chunk) {\n      if (err) {\n        return callback(err);\n      }\n\n      if (_chunk) {\n        transformChunk(_chunk, transformNextChunk);\n      } else {\n        callback(null);\n      }\n    });\n  }\n}\n\nexport default AxiosTransformStream;\n", "const {asyncIterator} = Symbol;\n\nconst readBlob = async function* (blob) {\n  if (blob.stream) {\n    yield* blob.stream()\n  } else if (blob.arrayBuffer) {\n    yield await blob.arrayBuffer()\n  } else if (blob[asyncIterator]) {\n    yield* blob[asyncIterator]();\n  } else {\n    yield blob;\n  }\n}\n\nexport default readBlob;\n", "import util from 'util';\nimport {Readable} from 'stream';\nimport utils from \"../utils.js\";\nimport readBlob from \"./readBlob.js\";\nimport platform from \"../platform/index.js\";\n\nconst BOUNDARY_ALPHABET = platform.ALPHABET.ALPHA_DIGIT + '-_';\n\nconst textEncoder = typeof TextEncoder === 'function' ? new TextEncoder() : new util.TextEncoder();\n\nconst CRLF = '\\r\\n';\nconst CRLF_BYTES = textEncoder.encode(CRLF);\nconst CRLF_BYTES_COUNT = 2;\n\nclass FormDataPart {\n  constructor(name, value) {\n    const {escapeName} = this.constructor;\n    const isStringValue = utils.isString(value);\n\n    let headers = `Content-Disposition: form-data; name=\"${escapeName(name)}\"${\n      !isStringValue && value.name ? `; filename=\"${escapeName(value.name)}\"` : ''\n    }${CRLF}`;\n\n    if (isStringValue) {\n      value = textEncoder.encode(String(value).replace(/\\r?\\n|\\r\\n?/g, CRLF));\n    } else {\n      headers += `Content-Type: ${value.type || \"application/octet-stream\"}${CRLF}`\n    }\n\n    this.headers = textEncoder.encode(headers + CRLF);\n\n    this.contentLength = isStringValue ? value.byteLength : value.size;\n\n    this.size = this.headers.byteLength + this.contentLength + CRLF_BYTES_COUNT;\n\n    this.name = name;\n    this.value = value;\n  }\n\n  async *encode(){\n    yield this.headers;\n\n    const {value} = this;\n\n    if(utils.isTypedArray(value)) {\n      yield value;\n    } else {\n      yield* readBlob(value);\n    }\n\n    yield CRLF_BYTES;\n  }\n\n  static escapeName(name) {\n      return String(name).replace(/[\\r\\n\"]/g, (match) => ({\n        '\\r' : '%0D',\n        '\\n' : '%0A',\n        '\"' : '%22',\n      }[match]));\n  }\n}\n\nconst formDataToStream = (form, headersHandler, options) => {\n  const {\n    tag = 'form-data-boundary',\n    size = 25,\n    boundary = tag + '-' + platform.generateString(size, BOUNDARY_ALPHABET)\n  } = options || {};\n\n  if(!utils.isFormData(form)) {\n    throw TypeError('FormData instance required');\n  }\n\n  if (boundary.length < 1 || boundary.length > 70) {\n    throw Error('boundary must be 10-70 characters long')\n  }\n\n  const boundaryBytes = textEncoder.encode('--' + boundary + CRLF);\n  const footerBytes = textEncoder.encode('--' + boundary + '--' + CRLF);\n  let contentLength = footerBytes.byteLength;\n\n  const parts = Array.from(form.entries()).map(([name, value]) => {\n    const part = new FormDataPart(name, value);\n    contentLength += part.size;\n    return part;\n  });\n\n  contentLength += boundaryBytes.byteLength * parts.length;\n\n  contentLength = utils.toFiniteNumber(contentLength);\n\n  const computedHeaders = {\n    'Content-Type': `multipart/form-data; boundary=${boundary}`\n  }\n\n  if (Number.isFinite(contentLength)) {\n    computedHeaders['Content-Length'] = contentLength;\n  }\n\n  headersHandler && headersHandler(computedHeaders);\n\n  return Readable.from((async function *() {\n    for(const part of parts) {\n      yield boundaryBytes;\n      yield* part.encode();\n    }\n\n    yield footerBytes;\n  })());\n};\n\nexport default formDataToStream;\n", "\"use strict\";\n\nimport stream from \"stream\";\n\nclass ZlibHeaderTransformStream extends stream.Transform {\n  __transform(chunk, encoding, callback) {\n    this.push(chunk);\n    callback();\n  }\n\n  _transform(chunk, encoding, callback) {\n    if (chunk.length !== 0) {\n      this._transform = this.__transform;\n\n      // Add Default Compression headers if no zlib headers are present\n      if (chunk[0] !== 120) { // Hex: 78\n        const header = Buffer.alloc(2);\n        header[0] = 120; // Hex: 78\n        header[1] = 156; // Hex: 9C \n        this.push(header, encoding);\n      }\n    }\n\n    this.__transform(chunk, encoding, callback);\n  }\n}\n\nexport default ZlibHeaderTransformStream;\n", "import utils from \"../utils.js\";\n\nconst callbackify = (fn, reducer) => {\n  return utils.isAsyncFn(fn) ? function (...args) {\n    const cb = args.pop();\n    fn.apply(this, args).then((value) => {\n      try {\n        reducer ? cb(null, ...reducer(value)) : cb(null, value);\n      } catch (err) {\n        cb(err);\n      }\n    }, cb);\n  } : fn;\n}\n\nexport default callbackify;\n", "'use strict';\n\n/**\n * Calculate data maxRate\n * @param {Number} [samplesCount= 10]\n * @param {Number} [min= 1000]\n * @returns {Function}\n */\nfunction speedometer(samplesCount, min) {\n  samplesCount = samplesCount || 10;\n  const bytes = new Array(samplesCount);\n  const timestamps = new Array(samplesCount);\n  let head = 0;\n  let tail = 0;\n  let firstSampleTS;\n\n  min = min !== undefined ? min : 1000;\n\n  return function push(chunkLength) {\n    const now = Date.now();\n\n    const startedAt = timestamps[tail];\n\n    if (!firstSampleTS) {\n      firstSampleTS = now;\n    }\n\n    bytes[head] = chunkLength;\n    timestamps[head] = now;\n\n    let i = tail;\n    let bytesCount = 0;\n\n    while (i !== head) {\n      bytesCount += bytes[i++];\n      i = i % samplesCount;\n    }\n\n    head = (head + 1) % samplesCount;\n\n    if (head === tail) {\n      tail = (tail + 1) % samplesCount;\n    }\n\n    if (now - firstSampleTS < min) {\n      return;\n    }\n\n    const passed = startedAt && now - startedAt;\n\n    return passed ? Math.round(bytesCount * 1000 / passed) : undefined;\n  };\n}\n\nexport default speedometer;\n", "/**\n * Throttle decorator\n * @param {Function} fn\n * @param {Number} freq\n * @return {Function}\n */\nfunction throttle(fn, freq) {\n  let timestamp = 0;\n  let threshold = 1000 / freq;\n  let lastArgs;\n  let timer;\n\n  const invoke = (args, now = Date.now()) => {\n    timestamp = now;\n    lastArgs = null;\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n    fn(...args);\n  }\n\n  const throttled = (...args) => {\n    const now = Date.now();\n    const passed = now - timestamp;\n    if ( passed >= threshold) {\n      invoke(args, now);\n    } else {\n      lastArgs = args;\n      if (!timer) {\n        timer = setTimeout(() => {\n          timer = null;\n          invoke(lastArgs)\n        }, threshold - passed);\n      }\n    }\n  }\n\n  const flush = () => lastArgs && invoke(lastArgs);\n\n  return [throttled, flush];\n}\n\nexport default throttle;\n", "import speedometer from \"./speedometer.js\";\nimport throttle from \"./throttle.js\";\nimport utils from \"../utils.js\";\n\nexport const progressEventReducer = (listener, isDownloadStream, freq = 3) => {\n  let bytesNotified = 0;\n  const _speedometer = speedometer(50, 250);\n\n  return throttle(e => {\n    const loaded = e.loaded;\n    const total = e.lengthComputable ? e.total : undefined;\n    const progressBytes = loaded - bytesNotified;\n    const rate = _speedometer(progressBytes);\n    const inRange = loaded <= total;\n\n    bytesNotified = loaded;\n\n    const data = {\n      loaded,\n      total,\n      progress: total ? (loaded / total) : undefined,\n      bytes: progressBytes,\n      rate: rate ? rate : undefined,\n      estimated: rate && total && inRange ? (total - loaded) / rate : undefined,\n      event: e,\n      lengthComputable: total != null,\n      [isDownloadStream ? 'download' : 'upload']: true\n    };\n\n    listener(data);\n  }, freq);\n}\n\nexport const progressEventDecorator = (total, throttled) => {\n  const lengthComputable = total != null;\n\n  return [(loaded) => throttled[0]({\n    lengthComputable,\n    total,\n    loaded\n  }), throttled[1]];\n}\n\nexport const asyncDecorator = (fn) => (...args) => utils.asap(() => fn(...args));\n", "/**\n * Estimate decoded byte length of a data:// URL *without* allocating large buffers.\n * - For base64: compute exact decoded size using length and padding;\n *               handle %XX at the character-count level (no string allocation).\n * - For non-base64: use UTF-8 byteLength of the encoded body as a safe upper bound.\n *\n * @param {string} url\n * @returns {number}\n */\nexport default function estimateDataURLDecodedBytes(url) {\n  if (!url || typeof url !== 'string') return 0;\n  if (!url.startsWith('data:')) return 0;\n\n  const comma = url.indexOf(',');\n  if (comma < 0) return 0;\n\n  const meta = url.slice(5, comma);\n  const body = url.slice(comma + 1);\n  const isBase64 = /;base64/i.test(meta);\n\n  if (isBase64) {\n    let effectiveLen = body.length;\n    const len = body.length; // cache length\n\n    for (let i = 0; i < len; i++) {\n      if (body.charCodeAt(i) === 37 /* '%' */ && i + 2 < len) {\n        const a = body.charCodeAt(i + 1);\n        const b = body.charCodeAt(i + 2);\n        const isHex =\n          ((a >= 48 && a <= 57) || (a >= 65 && a <= 70) || (a >= 97 && a <= 102)) &&\n          ((b >= 48 && b <= 57) || (b >= 65 && b <= 70) || (b >= 97 && b <= 102));\n\n        if (isHex) {\n          effectiveLen -= 2;\n          i += 2;\n        }\n      }\n    }\n\n    let pad = 0;\n    let idx = len - 1;\n\n    const tailIsPct3D = (j) =>\n      j >= 2 &&\n      body.charCodeAt(j - 2) === 37 && // '%'\n      body.charCodeAt(j - 1) === 51 && // '3'\n      (body.charCodeAt(j) === 68 || body.charCodeAt(j) === 100); // 'D' or 'd'\n\n    if (idx >= 0) {\n      if (body.charCodeAt(idx) === 61 /* '=' */) {\n        pad++;\n        idx--;\n      } else if (tailIsPct3D(idx)) {\n        pad++;\n        idx -= 3;\n      }\n    }\n\n    if (pad === 1 && idx >= 0) {\n      if (body.charCodeAt(idx) === 61 /* '=' */) {\n        pad++;\n      } else if (tailIsPct3D(idx)) {\n        pad++;\n      }\n    }\n\n    const groups = Math.floor(effectiveLen / 4);\n    const bytes = groups * 3 - (pad || 0);\n    return bytes > 0 ? bytes : 0;\n  }\n\n  return Buffer.byteLength(body, 'utf8');\n}\n", "import utils from './../utils.js';\nimport settle from './../core/settle.js';\nimport buildFullPath from '../core/buildFullPath.js';\nimport buildURL from './../helpers/buildURL.js';\nimport proxyFromEnv from 'proxy-from-env';\nimport http from 'http';\nimport https from 'https';\nimport http2 from 'http2';\nimport util from 'util';\nimport followRedirects from 'follow-redirects';\nimport zlib from 'zlib';\nimport {VERSION} from '../env/data.js';\nimport transitionalDefaults from '../defaults/transitional.js';\nimport AxiosError from '../core/AxiosError.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport platform from '../platform/index.js';\nimport fromDataURI from '../helpers/fromDataURI.js';\nimport stream from 'stream';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport AxiosTransformStream from '../helpers/AxiosTransformStream.js';\nimport {EventEmitter} from 'events';\nimport formDataToStream from \"../helpers/formDataToStream.js\";\nimport readBlob from \"../helpers/readBlob.js\";\nimport ZlibHeaderTransformStream from '../helpers/ZlibHeaderTransformStream.js';\nimport callbackify from \"../helpers/callbackify.js\";\nimport {progressEventReducer, progressEventDecorator, asyncDecorator} from \"../helpers/progressEventReducer.js\";\nimport estimateDataURLDecodedBytes from '../helpers/estimateDataURLDecodedBytes.js';\n\nconst zlibOptions = {\n  flush: zlib.constants.Z_SYNC_FLUSH,\n  finishFlush: zlib.constants.Z_SYNC_FLUSH\n};\n\nconst brotliOptions = {\n  flush: zlib.constants.BROTLI_OPERATION_FLUSH,\n  finishFlush: zlib.constants.BROTLI_OPERATION_FLUSH\n}\n\nconst isBrotliSupported = utils.isFunction(zlib.createBrotliDecompress);\n\nconst {http: httpFollow, https: httpsFollow} = followRedirects;\n\nconst isHttps = /https:?/;\n\nconst supportedProtocols = platform.protocols.map(protocol => {\n  return protocol + ':';\n});\n\n\nconst flushOnFinish = (stream, [throttled, flush]) => {\n  stream\n    .on('end', flush)\n    .on('error', flush);\n\n  return throttled;\n}\n\nclass Http2Sessions {\n  constructor() {\n    this.sessions = Object.create(null);\n  }\n\n  getSession(authority, options) {\n    options = Object.assign({\n      sessionTimeout: 1000\n    }, options);\n\n    let authoritySessions = this.sessions[authority];\n\n    if (authoritySessions) {\n      let len = authoritySessions.length;\n\n      for (let i = 0; i < len; i++) {\n        const [sessionHandle, sessionOptions] = authoritySessions[i];\n        if (!sessionHandle.destroyed && !sessionHandle.closed && util.isDeepStrictEqual(sessionOptions, options)) {\n          return sessionHandle;\n        }\n      }\n    }\n\n    const session = http2.connect(authority, options);\n\n    let removed;\n\n    const removeSession = () => {\n      if (removed) {\n        return;\n      }\n\n      removed = true;\n\n      let entries = authoritySessions, len = entries.length, i = len;\n\n      while (i--) {\n        if (entries[i][0] === session) {\n          if (len === 1) {\n            delete this.sessions[authority];\n          } else {\n            entries.splice(i, 1);\n          }\n          return;\n        }\n      }\n    };\n\n    const originalRequestFn = session.request;\n\n    const {sessionTimeout} = options;\n\n    if(sessionTimeout != null) {\n\n      let timer;\n      let streamsCount = 0;\n\n      session.request = function () {\n        const stream = originalRequestFn.apply(this, arguments);\n\n        streamsCount++;\n\n        if (timer) {\n          clearTimeout(timer);\n          timer = null;\n        }\n\n        stream.once('close', () => {\n          if (!--streamsCount) {\n            timer = setTimeout(() => {\n              timer = null;\n              removeSession();\n            }, sessionTimeout);\n          }\n        });\n\n        return stream;\n      }\n    }\n\n    session.once('close', removeSession);\n\n    let entry = [\n        session,\n        options\n      ];\n\n    authoritySessions ? authoritySessions.push(entry) : authoritySessions =  this.sessions[authority] = [entry];\n\n    return session;\n  }\n}\n\nconst http2Sessions = new Http2Sessions();\n\n\n/**\n * If the proxy or config beforeRedirects functions are defined, call them with the options\n * object.\n *\n * @param {Object<string, any>} options - The options object that was passed to the request.\n *\n * @returns {Object<string, any>}\n */\nfunction dispatchBeforeRedirect(options, responseDetails) {\n  if (options.beforeRedirects.proxy) {\n    options.beforeRedirects.proxy(options);\n  }\n  if (options.beforeRedirects.config) {\n    options.beforeRedirects.config(options, responseDetails);\n  }\n}\n\n/**\n * If the proxy or config afterRedirects functions are defined, call them with the options\n *\n * @param {http.ClientRequestArgs} options\n * @param {AxiosProxyConfig} configProxy configuration from Axios options object\n * @param {string} location\n *\n * @returns {http.ClientRequestArgs}\n */\nfunction setProxy(options, configProxy, location) {\n  let proxy = configProxy;\n  if (!proxy && proxy !== false) {\n    const proxyUrl = proxyFromEnv.getProxyForUrl(location);\n    if (proxyUrl) {\n      proxy = new URL(proxyUrl);\n    }\n  }\n  if (proxy) {\n    // Basic proxy authorization\n    if (proxy.username) {\n      proxy.auth = (proxy.username || '') + ':' + (proxy.password || '');\n    }\n\n    if (proxy.auth) {\n      // Support proxy auth object form\n      if (proxy.auth.username || proxy.auth.password) {\n        proxy.auth = (proxy.auth.username || '') + ':' + (proxy.auth.password || '');\n      }\n      const base64 = Buffer\n        .from(proxy.auth, 'utf8')\n        .toString('base64');\n      options.headers['Proxy-Authorization'] = 'Basic ' + base64;\n    }\n\n    options.headers.host = options.hostname + (options.port ? ':' + options.port : '');\n    const proxyHost = proxy.hostname || proxy.host;\n    options.hostname = proxyHost;\n    // Replace 'host' since options is not a URL object\n    options.host = proxyHost;\n    options.port = proxy.port;\n    options.path = location;\n    if (proxy.protocol) {\n      options.protocol = proxy.protocol.includes(':') ? proxy.protocol : `${proxy.protocol}:`;\n    }\n  }\n\n  options.beforeRedirects.proxy = function beforeRedirect(redirectOptions) {\n    // Configure proxy for redirected request, passing the original config proxy to apply\n    // the exact same logic as if the redirected request was performed by axios directly.\n    setProxy(redirectOptions, configProxy, redirectOptions.href);\n  };\n}\n\nconst isHttpAdapterSupported = typeof process !== 'undefined' && utils.kindOf(process) === 'process';\n\n// temporary hotfix\n\nconst wrapAsync = (asyncExecutor) => {\n  return new Promise((resolve, reject) => {\n    let onDone;\n    let isDone;\n\n    const done = (value, isRejected) => {\n      if (isDone) return;\n      isDone = true;\n      onDone && onDone(value, isRejected);\n    }\n\n    const _resolve = (value) => {\n      done(value);\n      resolve(value);\n    };\n\n    const _reject = (reason) => {\n      done(reason, true);\n      reject(reason);\n    }\n\n    asyncExecutor(_resolve, _reject, (onDoneHandler) => (onDone = onDoneHandler)).catch(_reject);\n  })\n};\n\nconst resolveFamily = ({address, family}) => {\n  if (!utils.isString(address)) {\n    throw TypeError('address must be a string');\n  }\n  return ({\n    address,\n    family: family || (address.indexOf('.') < 0 ? 6 : 4)\n  });\n}\n\nconst buildAddressEntry = (address, family) => resolveFamily(utils.isObject(address) ? address : {address, family});\n\nconst http2Transport = {\n  request(options, cb) {\n      const authority = options.protocol + '//' + options.hostname + ':' + (options.port || 80);\n\n      const {http2Options, headers} = options;\n\n      const session = http2Sessions.getSession(authority, http2Options);\n\n      const {\n        HTTP2_HEADER_SCHEME,\n        HTTP2_HEADER_METHOD,\n        HTTP2_HEADER_PATH,\n        HTTP2_HEADER_STATUS\n      } = http2.constants;\n\n      const http2Headers = {\n        [HTTP2_HEADER_SCHEME]: options.protocol.replace(':', ''),\n        [HTTP2_HEADER_METHOD]: options.method,\n        [HTTP2_HEADER_PATH]: options.path,\n      }\n\n      utils.forEach(headers, (header, name) => {\n        name.charAt(0) !== ':' && (http2Headers[name] = header);\n      });\n\n      const req = session.request(http2Headers);\n\n      req.once('response', (responseHeaders) => {\n        const response = req; //duplex\n\n        responseHeaders = Object.assign({}, responseHeaders);\n\n        const status = responseHeaders[HTTP2_HEADER_STATUS];\n\n        delete responseHeaders[HTTP2_HEADER_STATUS];\n\n        response.headers = responseHeaders;\n\n        response.statusCode = +status;\n\n        cb(response);\n      })\n\n      return req;\n  }\n}\n\n/*eslint consistent-return:0*/\nexport default isHttpAdapterSupported && function httpAdapter(config) {\n  return wrapAsync(async function dispatchHttpRequest(resolve, reject, onDone) {\n    let {data, lookup, family, httpVersion = 1, http2Options} = config;\n    const {responseType, responseEncoding} = config;\n    const method = config.method.toUpperCase();\n    let isDone;\n    let rejected = false;\n    let req;\n\n    httpVersion = +httpVersion;\n\n    if (Number.isNaN(httpVersion)) {\n      throw TypeError(`Invalid protocol version: '${config.httpVersion}' is not a number`);\n    }\n\n    if (httpVersion !== 1 && httpVersion !== 2) {\n      throw TypeError(`Unsupported protocol version '${httpVersion}'`);\n    }\n\n    const isHttp2 = httpVersion === 2;\n\n    if (lookup) {\n      const _lookup = callbackify(lookup, (value) => utils.isArray(value) ? value : [value]);\n      // hotfix to support opt.all option which is required for node 20.x\n      lookup = (hostname, opt, cb) => {\n        _lookup(hostname, opt, (err, arg0, arg1) => {\n          if (err) {\n            return cb(err);\n          }\n\n          const addresses = utils.isArray(arg0) ? arg0.map(addr => buildAddressEntry(addr)) : [buildAddressEntry(arg0, arg1)];\n\n          opt.all ? cb(err, addresses) : cb(err, addresses[0].address, addresses[0].family);\n        });\n      }\n    }\n\n    const abortEmitter = new EventEmitter();\n\n    function abort(reason) {\n      try {\n        abortEmitter.emit('abort', !reason || reason.type ? new CanceledError(null, config, req) : reason);\n      } catch(err) {\n        console.warn('emit error', err);\n      }\n    }\n\n    abortEmitter.once('abort', reject);\n\n    const onFinished = () => {\n      if (config.cancelToken) {\n        config.cancelToken.unsubscribe(abort);\n      }\n\n      if (config.signal) {\n        config.signal.removeEventListener('abort', abort);\n      }\n\n      abortEmitter.removeAllListeners();\n    }\n\n    if (config.cancelToken || config.signal) {\n      config.cancelToken && config.cancelToken.subscribe(abort);\n      if (config.signal) {\n        config.signal.aborted ? abort() : config.signal.addEventListener('abort', abort);\n      }\n    }\n\n    onDone((response, isRejected) => {\n      isDone = true;\n\n      if (isRejected) {\n        rejected = true;\n        onFinished();\n        return;\n      }\n\n      const {data} = response;\n\n      if (data instanceof stream.Readable || data instanceof stream.Duplex) {\n        const offListeners = stream.finished(data, () => {\n          offListeners();\n          onFinished();\n        });\n      } else {\n        onFinished();\n      }\n    });\n\n\n\n\n\n    // Parse url\n    const fullPath = buildFullPath(config.baseURL, config.url, config.allowAbsoluteUrls);\n    const parsed = new URL(fullPath, platform.hasBrowserEnv ? platform.origin : undefined);\n    const protocol = parsed.protocol || supportedProtocols[0];\n\n    if (protocol === 'data:') {\n      // Apply the same semantics as HTTP: only enforce if a finite, non-negative cap is set.\n      if (config.maxContentLength > -1) {\n        // Use the exact string passed to fromDataURI (config.url); fall back to fullPath if needed.\n        const dataUrl = String(config.url || fullPath || '');\n        const estimated = estimateDataURLDecodedBytes(dataUrl);\n\n        if (estimated > config.maxContentLength) {\n          return reject(new AxiosError(\n            'maxContentLength size of ' + config.maxContentLength + ' exceeded',\n            AxiosError.ERR_BAD_RESPONSE,\n            config\n          ));\n        }\n      }\n\n      let convertedData;\n\n      if (method !== 'GET') {\n        return settle(resolve, reject, {\n          status: 405,\n          statusText: 'method not allowed',\n          headers: {},\n          config\n        });\n      }\n\n      try {\n        convertedData = fromDataURI(config.url, responseType === 'blob', {\n          Blob: config.env && config.env.Blob\n        });\n      } catch (err) {\n        throw AxiosError.from(err, AxiosError.ERR_BAD_REQUEST, config);\n      }\n\n      if (responseType === 'text') {\n        convertedData = convertedData.toString(responseEncoding);\n\n        if (!responseEncoding || responseEncoding === 'utf8') {\n          convertedData = utils.stripBOM(convertedData);\n        }\n      } else if (responseType === 'stream') {\n        convertedData = stream.Readable.from(convertedData);\n      }\n\n      return settle(resolve, reject, {\n        data: convertedData,\n        status: 200,\n        statusText: 'OK',\n        headers: new AxiosHeaders(),\n        config\n      });\n    }\n\n    if (supportedProtocols.indexOf(protocol) === -1) {\n      return reject(new AxiosError(\n        'Unsupported protocol ' + protocol,\n        AxiosError.ERR_BAD_REQUEST,\n        config\n      ));\n    }\n\n    const headers = AxiosHeaders.from(config.headers).normalize();\n\n    // Set User-Agent (required by some servers)\n    // See https://github.com/axios/axios/issues/69\n    // User-Agent is specified; handle case where no UA header is desired\n    // Only set header if it hasn't been set in config\n    headers.set('User-Agent', 'axios/' + VERSION, false);\n\n    const {onUploadProgress, onDownloadProgress} = config;\n    const maxRate = config.maxRate;\n    let maxUploadRate = undefined;\n    let maxDownloadRate = undefined;\n\n    // support for spec compliant FormData objects\n    if (utils.isSpecCompliantForm(data)) {\n      const userBoundary = headers.getContentType(/boundary=([-_\\w\\d]{10,70})/i);\n\n      data = formDataToStream(data, (formHeaders) => {\n        headers.set(formHeaders);\n      }, {\n        tag: `axios-${VERSION}-boundary`,\n        boundary: userBoundary && userBoundary[1] || undefined\n      });\n      // support for https://www.npmjs.com/package/form-data api\n    } else if (utils.isFormData(data) && utils.isFunction(data.getHeaders)) {\n      headers.set(data.getHeaders());\n\n      if (!headers.hasContentLength()) {\n        try {\n          const knownLength = await util.promisify(data.getLength).call(data);\n          Number.isFinite(knownLength) && knownLength >= 0 && headers.setContentLength(knownLength);\n          /*eslint no-empty:0*/\n        } catch (e) {\n        }\n      }\n    } else if (utils.isBlob(data) || utils.isFile(data)) {\n      data.size && headers.setContentType(data.type || 'application/octet-stream');\n      headers.setContentLength(data.size || 0);\n      data = stream.Readable.from(readBlob(data));\n    } else if (data && !utils.isStream(data)) {\n      if (Buffer.isBuffer(data)) {\n        // Nothing to do...\n      } else if (utils.isArrayBuffer(data)) {\n        data = Buffer.from(new Uint8Array(data));\n      } else if (utils.isString(data)) {\n        data = Buffer.from(data, 'utf-8');\n      } else {\n        return reject(new AxiosError(\n          'Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream',\n          AxiosError.ERR_BAD_REQUEST,\n          config\n        ));\n      }\n\n      // Add Content-Length header if data exists\n      headers.setContentLength(data.length, false);\n\n      if (config.maxBodyLength > -1 && data.length > config.maxBodyLength) {\n        return reject(new AxiosError(\n          'Request body larger than maxBodyLength limit',\n          AxiosError.ERR_BAD_REQUEST,\n          config\n        ));\n      }\n    }\n\n    const contentLength = utils.toFiniteNumber(headers.getContentLength());\n\n    if (utils.isArray(maxRate)) {\n      maxUploadRate = maxRate[0];\n      maxDownloadRate = maxRate[1];\n    } else {\n      maxUploadRate = maxDownloadRate = maxRate;\n    }\n\n    if (data && (onUploadProgress || maxUploadRate)) {\n      if (!utils.isStream(data)) {\n        data = stream.Readable.from(data, {objectMode: false});\n      }\n\n      data = stream.pipeline([data, new AxiosTransformStream({\n        maxRate: utils.toFiniteNumber(maxUploadRate)\n      })], utils.noop);\n\n      onUploadProgress && data.on('progress', flushOnFinish(\n        data,\n        progressEventDecorator(\n          contentLength,\n          progressEventReducer(asyncDecorator(onUploadProgress), false, 3)\n        )\n      ));\n    }\n\n    // HTTP basic authentication\n    let auth = undefined;\n    if (config.auth) {\n      const username = config.auth.username || '';\n      const password = config.auth.password || '';\n      auth = username + ':' + password;\n    }\n\n    if (!auth && parsed.username) {\n      const urlUsername = parsed.username;\n      const urlPassword = parsed.password;\n      auth = urlUsername + ':' + urlPassword;\n    }\n\n    auth && headers.delete('authorization');\n\n    let path;\n\n    try {\n      path = buildURL(\n        parsed.pathname + parsed.search,\n        config.params,\n        config.paramsSerializer\n      ).replace(/^\\?/, '');\n    } catch (err) {\n      const customErr = new Error(err.message);\n      customErr.config = config;\n      customErr.url = config.url;\n      customErr.exists = true;\n      return reject(customErr);\n    }\n\n    headers.set(\n      'Accept-Encoding',\n      'gzip, compress, deflate' + (isBrotliSupported ? ', br' : ''), false\n      );\n\n    const options = {\n      path,\n      method: method,\n      headers: headers.toJSON(),\n      agents: { http: config.httpAgent, https: config.httpsAgent },\n      auth,\n      protocol,\n      family,\n      beforeRedirect: dispatchBeforeRedirect,\n      beforeRedirects: {},\n      http2Options\n    };\n\n    // cacheable-lookup integration hotfix\n    !utils.isUndefined(lookup) && (options.lookup = lookup);\n\n    if (config.socketPath) {\n      options.socketPath = config.socketPath;\n    } else {\n      options.hostname = parsed.hostname.startsWith(\"[\") ? parsed.hostname.slice(1, -1) : parsed.hostname;\n      options.port = parsed.port;\n      setProxy(options, config.proxy, protocol + '//' + parsed.hostname + (parsed.port ? ':' + parsed.port : '') + options.path);\n    }\n\n    let transport;\n    const isHttpsRequest = isHttps.test(options.protocol);\n    options.agent = isHttpsRequest ? config.httpsAgent : config.httpAgent;\n\n    if (isHttp2) {\n       transport = http2Transport;\n    } else {\n      if (config.transport) {\n        transport = config.transport;\n      } else if (config.maxRedirects === 0) {\n        transport = isHttpsRequest ? https : http;\n      } else {\n        if (config.maxRedirects) {\n          options.maxRedirects = config.maxRedirects;\n        }\n        if (config.beforeRedirect) {\n          options.beforeRedirects.config = config.beforeRedirect;\n        }\n        transport = isHttpsRequest ? httpsFollow : httpFollow;\n      }\n    }\n\n    if (config.maxBodyLength > -1) {\n      options.maxBodyLength = config.maxBodyLength;\n    } else {\n      // follow-redirects does not skip comparison, so it should always succeed for axios -1 unlimited\n      options.maxBodyLength = Infinity;\n    }\n\n    if (config.insecureHTTPParser) {\n      options.insecureHTTPParser = config.insecureHTTPParser;\n    }\n\n    // Create the request\n    req = transport.request(options, function handleResponse(res) {\n      if (req.destroyed) return;\n\n      const streams = [res];\n\n      const responseLength = utils.toFiniteNumber(res.headers['content-length']);\n\n      if (onDownloadProgress || maxDownloadRate) {\n        const transformStream = new AxiosTransformStream({\n          maxRate: utils.toFiniteNumber(maxDownloadRate)\n        });\n\n        onDownloadProgress && transformStream.on('progress', flushOnFinish(\n          transformStream,\n          progressEventDecorator(\n            responseLength,\n            progressEventReducer(asyncDecorator(onDownloadProgress), true, 3)\n          )\n        ));\n\n        streams.push(transformStream);\n      }\n\n      // decompress the response body transparently if required\n      let responseStream = res;\n\n      // return the last request in case of redirects\n      const lastRequest = res.req || req;\n\n      // if decompress disabled we should not decompress\n      if (config.decompress !== false && res.headers['content-encoding']) {\n        // if no content, but headers still say that it is encoded,\n        // remove the header not confuse downstream operations\n        if (method === 'HEAD' || res.statusCode === 204) {\n          delete res.headers['content-encoding'];\n        }\n\n        switch ((res.headers['content-encoding'] || '').toLowerCase()) {\n        /*eslint default-case:0*/\n        case 'gzip':\n        case 'x-gzip':\n        case 'compress':\n        case 'x-compress':\n          // add the unzipper to the body stream processing pipeline\n          streams.push(zlib.createUnzip(zlibOptions));\n\n          // remove the content-encoding in order to not confuse downstream operations\n          delete res.headers['content-encoding'];\n          break;\n        case 'deflate':\n          streams.push(new ZlibHeaderTransformStream());\n\n          // add the unzipper to the body stream processing pipeline\n          streams.push(zlib.createUnzip(zlibOptions));\n\n          // remove the content-encoding in order to not confuse downstream operations\n          delete res.headers['content-encoding'];\n          break;\n        case 'br':\n          if (isBrotliSupported) {\n            streams.push(zlib.createBrotliDecompress(brotliOptions));\n            delete res.headers['content-encoding'];\n          }\n        }\n      }\n\n      responseStream = streams.length > 1 ? stream.pipeline(streams, utils.noop) : streams[0];\n\n\n\n      const response = {\n        status: res.statusCode,\n        statusText: res.statusMessage,\n        headers: new AxiosHeaders(res.headers),\n        config,\n        request: lastRequest\n      };\n\n      if (responseType === 'stream') {\n        response.data = responseStream;\n        settle(resolve, reject, response);\n      } else {\n        const responseBuffer = [];\n        let totalResponseBytes = 0;\n\n        responseStream.on('data', function handleStreamData(chunk) {\n          responseBuffer.push(chunk);\n          totalResponseBytes += chunk.length;\n\n          // make sure the content length is not over the maxContentLength if specified\n          if (config.maxContentLength > -1 && totalResponseBytes > config.maxContentLength) {\n            // stream.destroy() emit aborted event before calling reject() on Node.js v16\n            rejected = true;\n            responseStream.destroy();\n            abort(new AxiosError('maxContentLength size of ' + config.maxContentLength + ' exceeded',\n              AxiosError.ERR_BAD_RESPONSE, config, lastRequest));\n          }\n        });\n\n        responseStream.on('aborted', function handlerStreamAborted() {\n          if (rejected) {\n            return;\n          }\n\n          const err = new AxiosError(\n            'stream has been aborted',\n            AxiosError.ERR_BAD_RESPONSE,\n            config,\n            lastRequest\n          );\n          responseStream.destroy(err);\n          reject(err);\n        });\n\n        responseStream.on('error', function handleStreamError(err) {\n          if (req.destroyed) return;\n          reject(AxiosError.from(err, null, config, lastRequest));\n        });\n\n        responseStream.on('end', function handleStreamEnd() {\n          try {\n            let responseData = responseBuffer.length === 1 ? responseBuffer[0] : Buffer.concat(responseBuffer);\n            if (responseType !== 'arraybuffer') {\n              responseData = responseData.toString(responseEncoding);\n              if (!responseEncoding || responseEncoding === 'utf8') {\n                responseData = utils.stripBOM(responseData);\n              }\n            }\n            response.data = responseData;\n          } catch (err) {\n            return reject(AxiosError.from(err, null, config, response.request, response));\n          }\n          settle(resolve, reject, response);\n        });\n      }\n\n      abortEmitter.once('abort', err => {\n        if (!responseStream.destroyed) {\n          responseStream.emit('error', err);\n          responseStream.destroy();\n        }\n      });\n    });\n\n    abortEmitter.once('abort', err => {\n      if (req.close) {\n        req.close();\n      } else {\n        req.destroy(err);\n      }\n    });\n\n    // Handle errors\n    req.on('error', function handleRequestError(err) {\n      // @todo remove\n      // if (req.aborted && err.code !== AxiosError.ERR_FR_TOO_MANY_REDIRECTS) return;\n      reject(AxiosError.from(err, null, config, req));\n    });\n\n    // set tcp keep alive to prevent drop connection by peer\n    req.on('socket', function handleRequestSocket(socket) {\n      // default interval of sending ack packet is 1 minute\n      socket.setKeepAlive(true, 1000 * 60);\n    });\n\n    // Handle request timeout\n    if (config.timeout) {\n      // This is forcing a int timeout to avoid problems if the `req` interface doesn't handle other types.\n      const timeout = parseInt(config.timeout, 10);\n\n      if (Number.isNaN(timeout)) {\n        abort(new AxiosError(\n          'error trying to parse `config.timeout` to int',\n          AxiosError.ERR_BAD_OPTION_VALUE,\n          config,\n          req\n        ));\n\n        return;\n      }\n\n      // Sometime, the response will be very slow, and does not respond, the connect event will be block by event loop system.\n      // And timer callback will be fired, and abort() will be invoked before connection, then get \"socket hang up\" and code ECONNRESET.\n      // At this time, if we have a large number of request, nodejs will hang up some socket on background. and the number will up and up.\n      // And then these socket which be hang up will devouring CPU little by little.\n      // ClientRequest.setTimeout will be fired on the specify milliseconds, and can make sure that abort() will be fired after connect.\n      req.setTimeout(timeout, function handleRequestTimeout() {\n        if (isDone) return;\n        let timeoutErrorMessage = config.timeout ? 'timeout of ' + config.timeout + 'ms exceeded' : 'timeout exceeded';\n        const transitional = config.transitional || transitionalDefaults;\n        if (config.timeoutErrorMessage) {\n          timeoutErrorMessage = config.timeoutErrorMessage;\n        }\n        abort(new AxiosError(\n          timeoutErrorMessage,\n          transitional.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,\n          config,\n          req\n        ));\n      });\n    } else {\n      // explicitly reset the socket timeout value for a possible `keep-alive` request\n      req.setTimeout(0);\n    }\n\n\n    // Send the request\n    if (utils.isStream(data)) {\n      let ended = false;\n      let errored = false;\n\n      data.on('end', () => {\n        ended = true;\n      });\n\n      data.once('error', err => {\n        errored = true;\n        req.destroy(err);\n      });\n\n      data.on('close', () => {\n        if (!ended && !errored) {\n          abort(new CanceledError('Request stream has been aborted', config, req));\n        }\n      });\n\n      data.pipe(req);\n    } else {\n      data && req.write(data);\n      req.end();\n    }\n  });\n}\n\nexport const __setProxy = setProxy;\n", "import platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ? ((origin, isMSIE) => (url) => {\n  url = new URL(url, platform.origin);\n\n  return (\n    origin.protocol === url.protocol &&\n    origin.host === url.host &&\n    (isMSIE || origin.port === url.port)\n  );\n})(\n  new URL(platform.origin),\n  platform.navigator && /(msie|trident)/i.test(platform.navigator.userAgent)\n) : () => true;\n", "import utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ?\n\n  // Standard browser envs support document.cookie\n  {\n    write(name, value, expires, path, domain, secure, sameSite) {\n      if (typeof document === 'undefined') return;\n\n      const cookie = [`${name}=${encodeURIComponent(value)}`];\n\n      if (utils.isNumber(expires)) {\n        cookie.push(`expires=${new Date(expires).toUTCString()}`);\n      }\n      if (utils.isString(path)) {\n        cookie.push(`path=${path}`);\n      }\n      if (utils.isString(domain)) {\n        cookie.push(`domain=${domain}`);\n      }\n      if (secure === true) {\n        cookie.push('secure');\n      }\n      if (utils.isString(sameSite)) {\n        cookie.push(`SameSite=${sameSite}`);\n      }\n\n      document.cookie = cookie.join('; ');\n    },\n\n    read(name) {\n      if (typeof document === 'undefined') return null;\n      const match = document.cookie.match(new RegExp('(?:^|; )' + name + '=([^;]*)'));\n      return match ? decodeURIComponent(match[1]) : null;\n    },\n\n    remove(name) {\n      this.write(name, '', Date.now() - 86400000, '/');\n    }\n  }\n\n  :\n\n  // Non-standard browser env (web workers, react-native) lack needed support.\n  {\n    write() {},\n    read() {\n      return null;\n    },\n    remove() {}\n  };\n\n", "'use strict';\n\nimport utils from '../utils.js';\nimport AxiosHeaders from \"./AxiosHeaders.js\";\n\nconst headersToObject = (thing) => thing instanceof AxiosHeaders ? { ...thing } : thing;\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n *\n * @returns {Object} New object resulting from merging config2 to config1\n */\nexport default function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  const config = {};\n\n  function getMergedValue(target, source, prop, caseless) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge.call({caseless}, target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDeepProperties(a, b, prop, caseless) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(a, b, prop, caseless);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a, prop, caseless);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function valueFromConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function defaultToConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDirectKeys(a, b, prop) {\n    if (prop in config2) {\n      return getMergedValue(a, b);\n    } else if (prop in config1) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  const mergeMap = {\n    url: valueFromConfig2,\n    method: valueFromConfig2,\n    data: valueFromConfig2,\n    baseURL: defaultToConfig2,\n    transformRequest: defaultToConfig2,\n    transformResponse: defaultToConfig2,\n    paramsSerializer: defaultToConfig2,\n    timeout: defaultToConfig2,\n    timeoutMessage: defaultToConfig2,\n    withCredentials: defaultToConfig2,\n    withXSRFToken: defaultToConfig2,\n    adapter: defaultToConfig2,\n    responseType: defaultToConfig2,\n    xsrfCookieName: defaultToConfig2,\n    xsrfHeaderName: defaultToConfig2,\n    onUploadProgress: defaultToConfig2,\n    onDownloadProgress: defaultToConfig2,\n    decompress: defaultToConfig2,\n    maxContentLength: defaultToConfig2,\n    maxBodyLength: defaultToConfig2,\n    beforeRedirect: defaultToConfig2,\n    transport: defaultToConfig2,\n    httpAgent: defaultToConfig2,\n    httpsAgent: defaultToConfig2,\n    cancelToken: defaultToConfig2,\n    socketPath: defaultToConfig2,\n    responseEncoding: defaultToConfig2,\n    validateStatus: mergeDirectKeys,\n    headers: (a, b, prop) => mergeDeepProperties(headersToObject(a), headersToObject(b), prop, true)\n  };\n\n  utils.forEach(Object.keys({...config1, ...config2}), function computeConfigValue(prop) {\n    const merge = mergeMap[prop] || mergeDeepProperties;\n    const configValue = merge(config1[prop], config2[prop], prop);\n    (utils.isUndefined(configValue) && merge !== mergeDirectKeys) || (config[prop] = configValue);\n  });\n\n  return config;\n}\n", "import platform from \"../platform/index.js\";\nimport utils from \"../utils.js\";\nimport isURLSameOrigin from \"./isURLSameOrigin.js\";\nimport cookies from \"./cookies.js\";\nimport buildFullPath from \"../core/buildFullPath.js\";\nimport mergeConfig from \"../core/mergeConfig.js\";\nimport AxiosHeaders from \"../core/AxiosHeaders.js\";\nimport buildURL from \"./buildURL.js\";\n\nexport default (config) => {\n  const newConfig = mergeConfig({}, config);\n\n  let { data, withXSRFToken, xsrfHeaderName, xsrfCookieName, headers, auth } = newConfig;\n\n  newConfig.headers = headers = AxiosHeaders.from(headers);\n\n  newConfig.url = buildURL(buildFullPath(newConfig.baseURL, newConfig.url, newConfig.allowAbsoluteUrls), config.params, config.paramsSerializer);\n\n  // HTTP basic authentication\n  if (auth) {\n    headers.set('Authorization', 'Basic ' +\n      btoa((auth.username || '') + ':' + (auth.password ? unescape(encodeURIComponent(auth.password)) : ''))\n    );\n  }\n\n  if (utils.isFormData(data)) {\n    if (platform.hasStandardBrowserEnv || platform.hasStandardBrowserWebWorkerEnv) {\n      headers.setContentType(undefined); // browser handles it\n    } else if (utils.isFunction(data.getHeaders)) {\n      // Node.js FormData (like form-data package)\n      const formHeaders = data.getHeaders();\n      // Only set safe headers to avoid overwriting security headers\n      const allowedHeaders = ['content-type', 'content-length'];\n      Object.entries(formHeaders).forEach(([key, val]) => {\n        if (allowedHeaders.includes(key.toLowerCase())) {\n          headers.set(key, val);\n        }\n      });\n    }\n  }  \n\n  // Add xsrf header\n  // This is only done if running in a standard browser environment.\n  // Specifically not if we're in a web worker, or react-native.\n\n  if (platform.hasStandardBrowserEnv) {\n    withXSRFToken && utils.isFunction(withXSRFToken) && (withXSRFToken = withXSRFToken(newConfig));\n\n    if (withXSRFToken || (withXSRFToken !== false && isURLSameOrigin(newConfig.url))) {\n      // Add xsrf header\n      const xsrfValue = xsrfHeaderName && xsrfCookieName && cookies.read(xsrfCookieName);\n\n      if (xsrfValue) {\n        headers.set(xsrfHeaderName, xsrfValue);\n      }\n    }\n  }\n\n  return newConfig;\n}\n\n", "import utils from './../utils.js';\nimport settle from './../core/settle.js';\nimport transitionalDefaults from '../defaults/transitional.js';\nimport AxiosError from '../core/AxiosError.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport parseProtocol from '../helpers/parseProtocol.js';\nimport platform from '../platform/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport {progressEventReducer} from '../helpers/progressEventReducer.js';\nimport resolveConfig from \"../helpers/resolveConfig.js\";\n\nconst isXHRAdapterSupported = typeof XMLHttpRequest !== 'undefined';\n\nexport default isXHRAdapterSupported && function (config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    const _config = resolveConfig(config);\n    let requestData = _config.data;\n    const requestHeaders = AxiosHeaders.from(_config.headers).normalize();\n    let {responseType, onUploadProgress, onDownloadProgress} = _config;\n    let onCanceled;\n    let uploadThrottled, downloadThrottled;\n    let flushUpload, flushDownload;\n\n    function done() {\n      flushUpload && flushUpload(); // flush events\n      flushDownload && flushDownload(); // flush events\n\n      _config.cancelToken && _config.cancelToken.unsubscribe(onCanceled);\n\n      _config.signal && _config.signal.removeEventListener('abort', onCanceled);\n    }\n\n    let request = new XMLHttpRequest();\n\n    request.open(_config.method.toUpperCase(), _config.url, true);\n\n    // Set the request timeout in MS\n    request.timeout = _config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      const responseHeaders = AxiosHeaders.from(\n        'getAllResponseHeaders' in request && request.getAllResponseHeaders()\n      );\n      const responseData = !responseType || responseType === 'text' || responseType === 'json' ?\n        request.responseText : request.response;\n      const response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config,\n        request\n      };\n\n      settle(function _resolve(value) {\n        resolve(value);\n        done();\n      }, function _reject(err) {\n        reject(err);\n        done();\n      }, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(new AxiosError('Request aborted', AxiosError.ECONNABORTED, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n  request.onerror = function handleError(event) {\n       // Browsers deliver a ProgressEvent in XHR onerror\n       // (message may be empty; when present, surface it)\n       // See https://developer.mozilla.org/docs/Web/API/XMLHttpRequest/error_event\n       const msg = event && event.message ? event.message : 'Network Error';\n       const err = new AxiosError(msg, AxiosError.ERR_NETWORK, config, request);\n       // attach the underlying event for consumers who want details\n       err.event = event || null;\n       reject(err);\n       request = null;\n    };\n    \n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      let timeoutErrorMessage = _config.timeout ? 'timeout of ' + _config.timeout + 'ms exceeded' : 'timeout exceeded';\n      const transitional = _config.transitional || transitionalDefaults;\n      if (_config.timeoutErrorMessage) {\n        timeoutErrorMessage = _config.timeoutErrorMessage;\n      }\n      reject(new AxiosError(\n        timeoutErrorMessage,\n        transitional.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,\n        config,\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Remove Content-Type if data is undefined\n    requestData === undefined && requestHeaders.setContentType(null);\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {\n        request.setRequestHeader(key, val);\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(_config.withCredentials)) {\n      request.withCredentials = !!_config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = _config.responseType;\n    }\n\n    // Handle progress if needed\n    if (onDownloadProgress) {\n      ([downloadThrottled, flushDownload] = progressEventReducer(onDownloadProgress, true));\n      request.addEventListener('progress', downloadThrottled);\n    }\n\n    // Not all browsers support upload events\n    if (onUploadProgress && request.upload) {\n      ([uploadThrottled, flushUpload] = progressEventReducer(onUploadProgress));\n\n      request.upload.addEventListener('progress', uploadThrottled);\n\n      request.upload.addEventListener('loadend', flushUpload);\n    }\n\n    if (_config.cancelToken || _config.signal) {\n      // Handle cancellation\n      // eslint-disable-next-line func-names\n      onCanceled = cancel => {\n        if (!request) {\n          return;\n        }\n        reject(!cancel || cancel.type ? new CanceledError(null, config, request) : cancel);\n        request.abort();\n        request = null;\n      };\n\n      _config.cancelToken && _config.cancelToken.subscribe(onCanceled);\n      if (_config.signal) {\n        _config.signal.aborted ? onCanceled() : _config.signal.addEventListener('abort', onCanceled);\n      }\n    }\n\n    const protocol = parseProtocol(_config.url);\n\n    if (protocol && platform.protocols.indexOf(protocol) === -1) {\n      reject(new AxiosError('Unsupported protocol ' + protocol + ':', AxiosError.ERR_BAD_REQUEST, config));\n      return;\n    }\n\n\n    // Send the request\n    request.send(requestData || null);\n  });\n}\n", "import CanceledError from \"../cancel/CanceledError.js\";\nimport AxiosError from \"../core/AxiosError.js\";\nimport utils from '../utils.js';\n\nconst composeSignals = (signals, timeout) => {\n  const {length} = (signals = signals ? signals.filter(Boolean) : []);\n\n  if (timeout || length) {\n    let controller = new AbortController();\n\n    let aborted;\n\n    const onabort = function (reason) {\n      if (!aborted) {\n        aborted = true;\n        unsubscribe();\n        const err = reason instanceof Error ? reason : this.reason;\n        controller.abort(err instanceof AxiosError ? err : new CanceledError(err instanceof Error ? err.message : err));\n      }\n    }\n\n    let timer = timeout && setTimeout(() => {\n      timer = null;\n      onabort(new AxiosError(`timeout ${timeout} of ms exceeded`, AxiosError.ETIMEDOUT))\n    }, timeout)\n\n    const unsubscribe = () => {\n      if (signals) {\n        timer && clearTimeout(timer);\n        timer = null;\n        signals.forEach(signal => {\n          signal.unsubscribe ? signal.unsubscribe(onabort) : signal.removeEventListener('abort', onabort);\n        });\n        signals = null;\n      }\n    }\n\n    signals.forEach((signal) => signal.addEventListener('abort', onabort));\n\n    const {signal} = controller;\n\n    signal.unsubscribe = () => utils.asap(unsubscribe);\n\n    return signal;\n  }\n}\n\nexport default composeSignals;\n", "\nexport const streamChunk = function* (chunk, chunkSize) {\n  let len = chunk.byteLength;\n\n  if (!chunkSize || len < chunkSize) {\n    yield chunk;\n    return;\n  }\n\n  let pos = 0;\n  let end;\n\n  while (pos < len) {\n    end = pos + chunkSize;\n    yield chunk.slice(pos, end);\n    pos = end;\n  }\n}\n\nexport const readBytes = async function* (iterable, chunkSize) {\n  for await (const chunk of readStream(iterable)) {\n    yield* streamChunk(chunk, chunkSize);\n  }\n}\n\nconst readStream = async function* (stream) {\n  if (stream[Symbol.asyncIterator]) {\n    yield* stream;\n    return;\n  }\n\n  const reader = stream.getReader();\n  try {\n    for (;;) {\n      const {done, value} = await reader.read();\n      if (done) {\n        break;\n      }\n      yield value;\n    }\n  } finally {\n    await reader.cancel();\n  }\n}\n\nexport const trackStream = (stream, chunkSize, onProgress, onFinish) => {\n  const iterator = readBytes(stream, chunkSize);\n\n  let bytes = 0;\n  let done;\n  let _onFinish = (e) => {\n    if (!done) {\n      done = true;\n      onFinish && onFinish(e);\n    }\n  }\n\n  return new ReadableStream({\n    async pull(controller) {\n      try {\n        const {done, value} = await iterator.next();\n\n        if (done) {\n         _onFinish();\n          controller.close();\n          return;\n        }\n\n        let len = value.byteLength;\n        if (onProgress) {\n          let loadedBytes = bytes += len;\n          onProgress(loadedBytes);\n        }\n        controller.enqueue(new Uint8Array(value));\n      } catch (err) {\n        _onFinish(err);\n        throw err;\n      }\n    },\n    cancel(reason) {\n      _onFinish(reason);\n      return iterator.return();\n    }\n  }, {\n    highWaterMark: 2\n  })\n}\n", "import platform from \"../platform/index.js\";\nimport utils from \"../utils.js\";\nimport AxiosError from \"../core/AxiosError.js\";\nimport composeSignals from \"../helpers/composeSignals.js\";\nimport {trackStream} from \"../helpers/trackStream.js\";\nimport AxiosHeaders from \"../core/AxiosHeaders.js\";\nimport {progressEventReducer, progressEventDecorator, asyncDecorator} from \"../helpers/progressEventReducer.js\";\nimport resolveConfig from \"../helpers/resolveConfig.js\";\nimport settle from \"../core/settle.js\";\n\nconst DEFAULT_CHUNK_SIZE = 64 * 1024;\n\nconst {isFunction} = utils;\n\nconst globalFetchAPI = (({Request, Response}) => ({\n  Request, Response\n}))(utils.global);\n\nconst {\n  ReadableStream, TextEncoder\n} = utils.global;\n\n\nconst test = (fn, ...args) => {\n  try {\n    return !!fn(...args);\n  } catch (e) {\n    return false\n  }\n}\n\nconst factory = (env) => {\n  env = utils.merge.call({\n    skipUndefined: true\n  }, globalFetchAPI, env);\n\n  const {fetch: envFetch, Request, Response} = env;\n  const isFetchSupported = envFetch ? isFunction(envFetch) : typeof fetch === 'function';\n  const isRequestSupported = isFunction(Request);\n  const isResponseSupported = isFunction(Response);\n\n  if (!isFetchSupported) {\n    return false;\n  }\n\n  const isReadableStreamSupported = isFetchSupported && isFunction(ReadableStream);\n\n  const encodeText = isFetchSupported && (typeof TextEncoder === 'function' ?\n      ((encoder) => (str) => encoder.encode(str))(new TextEncoder()) :\n      async (str) => new Uint8Array(await new Request(str).arrayBuffer())\n  );\n\n  const supportsRequestStream = isRequestSupported && isReadableStreamSupported && test(() => {\n    let duplexAccessed = false;\n\n    const hasContentType = new Request(platform.origin, {\n      body: new ReadableStream(),\n      method: 'POST',\n      get duplex() {\n        duplexAccessed = true;\n        return 'half';\n      },\n    }).headers.has('Content-Type');\n\n    return duplexAccessed && !hasContentType;\n  });\n\n  const supportsResponseStream = isResponseSupported && isReadableStreamSupported &&\n    test(() => utils.isReadableStream(new Response('').body));\n\n  const resolvers = {\n    stream: supportsResponseStream && ((res) => res.body)\n  };\n\n  isFetchSupported && ((() => {\n    ['text', 'arrayBuffer', 'blob', 'formData', 'stream'].forEach(type => {\n      !resolvers[type] && (resolvers[type] = (res, config) => {\n        let method = res && res[type];\n\n        if (method) {\n          return method.call(res);\n        }\n\n        throw new AxiosError(`Response type '${type}' is not supported`, AxiosError.ERR_NOT_SUPPORT, config);\n      })\n    });\n  })());\n\n  const getBodyLength = async (body) => {\n    if (body == null) {\n      return 0;\n    }\n\n    if (utils.isBlob(body)) {\n      return body.size;\n    }\n\n    if (utils.isSpecCompliantForm(body)) {\n      const _request = new Request(platform.origin, {\n        method: 'POST',\n        body,\n      });\n      return (await _request.arrayBuffer()).byteLength;\n    }\n\n    if (utils.isArrayBufferView(body) || utils.isArrayBuffer(body)) {\n      return body.byteLength;\n    }\n\n    if (utils.isURLSearchParams(body)) {\n      body = body + '';\n    }\n\n    if (utils.isString(body)) {\n      return (await encodeText(body)).byteLength;\n    }\n  }\n\n  const resolveBodyLength = async (headers, body) => {\n    const length = utils.toFiniteNumber(headers.getContentLength());\n\n    return length == null ? getBodyLength(body) : length;\n  }\n\n  return async (config) => {\n    let {\n      url,\n      method,\n      data,\n      signal,\n      cancelToken,\n      timeout,\n      onDownloadProgress,\n      onUploadProgress,\n      responseType,\n      headers,\n      withCredentials = 'same-origin',\n      fetchOptions\n    } = resolveConfig(config);\n\n    let _fetch = envFetch || fetch;\n\n    responseType = responseType ? (responseType + '').toLowerCase() : 'text';\n\n    let composedSignal = composeSignals([signal, cancelToken && cancelToken.toAbortSignal()], timeout);\n\n    let request = null;\n\n    const unsubscribe = composedSignal && composedSignal.unsubscribe && (() => {\n      composedSignal.unsubscribe();\n    });\n\n    let requestContentLength;\n\n    try {\n      if (\n        onUploadProgress && supportsRequestStream && method !== 'get' && method !== 'head' &&\n        (requestContentLength = await resolveBodyLength(headers, data)) !== 0\n      ) {\n        let _request = new Request(url, {\n          method: 'POST',\n          body: data,\n          duplex: \"half\"\n        });\n\n        let contentTypeHeader;\n\n        if (utils.isFormData(data) && (contentTypeHeader = _request.headers.get('content-type'))) {\n          headers.setContentType(contentTypeHeader)\n        }\n\n        if (_request.body) {\n          const [onProgress, flush] = progressEventDecorator(\n            requestContentLength,\n            progressEventReducer(asyncDecorator(onUploadProgress))\n          );\n\n          data = trackStream(_request.body, DEFAULT_CHUNK_SIZE, onProgress, flush);\n        }\n      }\n\n      if (!utils.isString(withCredentials)) {\n        withCredentials = withCredentials ? 'include' : 'omit';\n      }\n\n      // Cloudflare Workers throws when credentials are defined\n      // see https://github.com/cloudflare/workerd/issues/902\n      const isCredentialsSupported = isRequestSupported && \"credentials\" in Request.prototype;\n\n      const resolvedOptions = {\n        ...fetchOptions,\n        signal: composedSignal,\n        method: method.toUpperCase(),\n        headers: headers.normalize().toJSON(),\n        body: data,\n        duplex: \"half\",\n        credentials: isCredentialsSupported ? withCredentials : undefined\n      };\n\n      request = isRequestSupported && new Request(url, resolvedOptions);\n\n      let response = await (isRequestSupported ? _fetch(request, fetchOptions) : _fetch(url, resolvedOptions));\n\n      const isStreamResponse = supportsResponseStream && (responseType === 'stream' || responseType === 'response');\n\n      if (supportsResponseStream && (onDownloadProgress || (isStreamResponse && unsubscribe))) {\n        const options = {};\n\n        ['status', 'statusText', 'headers'].forEach(prop => {\n          options[prop] = response[prop];\n        });\n\n        const responseContentLength = utils.toFiniteNumber(response.headers.get('content-length'));\n\n        const [onProgress, flush] = onDownloadProgress && progressEventDecorator(\n          responseContentLength,\n          progressEventReducer(asyncDecorator(onDownloadProgress), true)\n        ) || [];\n\n        response = new Response(\n          trackStream(response.body, DEFAULT_CHUNK_SIZE, onProgress, () => {\n            flush && flush();\n            unsubscribe && unsubscribe();\n          }),\n          options\n        );\n      }\n\n      responseType = responseType || 'text';\n\n      let responseData = await resolvers[utils.findKey(resolvers, responseType) || 'text'](response, config);\n\n      !isStreamResponse && unsubscribe && unsubscribe();\n\n      return await new Promise((resolve, reject) => {\n        settle(resolve, reject, {\n          data: responseData,\n          headers: AxiosHeaders.from(response.headers),\n          status: response.status,\n          statusText: response.statusText,\n          config,\n          request\n        })\n      })\n    } catch (err) {\n      unsubscribe && unsubscribe();\n\n      if (err && err.name === 'TypeError' && /Load failed|fetch/i.test(err.message)) {\n        throw Object.assign(\n          new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request),\n          {\n            cause: err.cause || err\n          }\n        )\n      }\n\n      throw AxiosError.from(err, err && err.code, config, request);\n    }\n  }\n}\n\nconst seedCache = new Map();\n\nexport const getFetch = (config) => {\n  let env = (config && config.env) || {};\n  const {fetch, Request, Response} = env;\n  const seeds = [\n    Request, Response, fetch\n  ];\n\n  let len = seeds.length, i = len,\n    seed, target, map = seedCache;\n\n  while (i--) {\n    seed = seeds[i];\n    target = map.get(seed);\n\n    target === undefined && map.set(seed, target = (i ? new Map() : factory(env)))\n\n    map = target;\n  }\n\n  return target;\n};\n\nconst adapter = getFetch();\n\nexport default adapter;\n", "import utils from '../utils.js';\nimport httpAdapter from './http.js';\nimport xhrAdapter from './xhr.js';\nimport * as fetchAdapter from './fetch.js';\nimport AxiosError from \"../core/AxiosError.js\";\n\n/**\n * Known adapters mapping.\n * Provides environment-specific adapters for Axios:\n * - `http` for Node.js\n * - `xhr` for browsers\n * - `fetch` for fetch API-based requests\n * \n * @type {Object<string, Function|Object>}\n */\nconst knownAdapters = {\n  http: httpAdapter,\n  xhr: xhrAdapter,\n  fetch: {\n    get: fetchAdapter.getFetch,\n  }\n};\n\n// Assign adapter names for easier debugging and identification\nutils.forEach(knownAdapters, (fn, value) => {\n  if (fn) {\n    try {\n      Object.defineProperty(fn, 'name', { value });\n    } catch (e) {\n      // eslint-disable-next-line no-empty\n    }\n    Object.defineProperty(fn, 'adapterName', { value });\n  }\n});\n\n/**\n * Render a rejection reason string for unknown or unsupported adapters\n * \n * @param {string} reason\n * @returns {string}\n */\nconst renderReason = (reason) => `- ${reason}`;\n\n/**\n * Check if the adapter is resolved (function, null, or false)\n * \n * @param {Function|null|false} adapter\n * @returns {boolean}\n */\nconst isResolvedHandle = (adapter) => utils.isFunction(adapter) || adapter === null || adapter === false;\n\n/**\n * Get the first suitable adapter from the provided list.\n * Tries each adapter in order until a supported one is found.\n * Throws an AxiosError if no adapter is suitable.\n * \n * @param {Array<string|Function>|string|Function} adapters - Adapter(s) by name or function.\n * @param {Object} config - Axios request configuration\n * @throws {AxiosError} If no suitable adapter is available\n * @returns {Function} The resolved adapter function\n */\nfunction getAdapter(adapters, config) {\n  adapters = utils.isArray(adapters) ? adapters : [adapters];\n\n  const { length } = adapters;\n  let nameOrAdapter;\n  let adapter;\n\n  const rejectedReasons = {};\n\n  for (let i = 0; i < length; i++) {\n    nameOrAdapter = adapters[i];\n    let id;\n\n    adapter = nameOrAdapter;\n\n    if (!isResolvedHandle(nameOrAdapter)) {\n      adapter = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];\n\n      if (adapter === undefined) {\n        throw new AxiosError(`Unknown adapter '${id}'`);\n      }\n    }\n\n    if (adapter && (utils.isFunction(adapter) || (adapter = adapter.get(config)))) {\n      break;\n    }\n\n    rejectedReasons[id || '#' + i] = adapter;\n  }\n\n  if (!adapter) {\n    const reasons = Object.entries(rejectedReasons)\n      .map(([id, state]) => `adapter ${id} ` +\n        (state === false ? 'is not supported by the environment' : 'is not available in the build')\n      );\n\n    let s = length ?\n      (reasons.length > 1 ? 'since :\\n' + reasons.map(renderReason).join('\\n') : ' ' + renderReason(reasons[0])) :\n      'as no adapter specified';\n\n    throw new AxiosError(\n      `There is no suitable adapter to dispatch the request ` + s,\n      'ERR_NOT_SUPPORT'\n    );\n  }\n\n  return adapter;\n}\n\n/**\n * Exports Axios adapters and utility to resolve an adapter\n */\nexport default {\n  /**\n   * Resolve an adapter from a list of adapter names or functions.\n   * @type {Function}\n   */\n  getAdapter,\n\n  /**\n   * Exposes all known adapters\n   * @type {Object<string, Function|Object>}\n   */\n  adapters: knownAdapters\n};\n", "'use strict';\n\nimport transformData from './transformData.js';\nimport isCancel from '../cancel/isCancel.js';\nimport defaults from '../defaults/index.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport adapters from \"../adapters/adapters.js\";\n\n/**\n * Throws a `CanceledError` if cancellation has been requested.\n *\n * @param {Object} config The config that is to be used for the request\n *\n * @returns {void}\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n\n  if (config.signal && config.signal.aborted) {\n    throw new CanceledError(null, config);\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n *\n * @returns {Promise} The Promise to be fulfilled\n */\nexport default function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  config.headers = AxiosHeaders.from(config.headers);\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.transformRequest\n  );\n\n  if (['post', 'put', 'patch'].indexOf(config.method) !== -1) {\n    config.headers.setContentType('application/x-www-form-urlencoded', false);\n  }\n\n  const adapter = adapters.getAdapter(config.adapter || defaults.adapter, config);\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      config.transformResponse,\n      response\n    );\n\n    response.headers = AxiosHeaders.from(response.headers);\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          config.transformResponse,\n          reason.response\n        );\n        reason.response.headers = AxiosHeaders.from(reason.response.headers);\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n}\n", "'use strict';\n\nimport {VERSION} from '../env/data.js';\nimport AxiosError from '../core/AxiosError.js';\n\nconst validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach((type, i) => {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nconst deprecatedWarnings = {};\n\n/**\n * Transitional option validator\n *\n * @param {function|boolean?} validator - set to false if the transitional option has been removed\n * @param {string?} version - deprecated version / removed since version\n * @param {string?} message - some message with additional info\n *\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  function formatMessage(opt, desc) {\n    return '[Axios v' + VERSION + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return (value, opt, opts) => {\n    if (validator === false) {\n      throw new AxiosError(\n        formatMessage(opt, ' has been removed' + (version ? ' in ' + version : '')),\n        AxiosError.ERR_DEPRECATED\n      );\n    }\n\n    if (version && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\nvalidators.spelling = function spelling(correctSpelling) {\n  return (value, opt) => {\n    // eslint-disable-next-line no-console\n    console.warn(`${opt} is likely a misspelling of ${correctSpelling}`);\n    return true;\n  }\n};\n\n/**\n * Assert object's properties type\n *\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n *\n * @returns {object}\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new AxiosError('options must be an object', AxiosError.ERR_BAD_OPTION_VALUE);\n  }\n  const keys = Object.keys(options);\n  let i = keys.length;\n  while (i-- > 0) {\n    const opt = keys[i];\n    const validator = schema[opt];\n    if (validator) {\n      const value = options[opt];\n      const result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new AxiosError('option ' + opt + ' must be ' + result, AxiosError.ERR_BAD_OPTION_VALUE);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw new AxiosError('Unknown option ' + opt, AxiosError.ERR_BAD_OPTION);\n    }\n  }\n}\n\nexport default {\n  assertOptions,\n  validators\n};\n", "'use strict';\n\nimport utils from './../utils.js';\nimport buildURL from '../helpers/buildURL.js';\nimport InterceptorManager from './InterceptorManager.js';\nimport dispatchRequest from './dispatchRequest.js';\nimport mergeConfig from './mergeConfig.js';\nimport buildFullPath from './buildFullPath.js';\nimport validator from '../helpers/validator.js';\nimport AxiosHeaders from './AxiosHeaders.js';\n\nconst validators = validator.validators;\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n *\n * @return {Axios} A new instance of Axios\n */\nclass Axios {\n  constructor(instanceConfig) {\n    this.defaults = instanceConfig || {};\n    this.interceptors = {\n      request: new InterceptorManager(),\n      response: new InterceptorManager()\n    };\n  }\n\n  /**\n   * Dispatch a request\n   *\n   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)\n   * @param {?Object} config\n   *\n   * @returns {Promise} The Promise to be fulfilled\n   */\n  async request(configOrUrl, config) {\n    try {\n      return await this._request(configOrUrl, config);\n    } catch (err) {\n      if (err instanceof Error) {\n        let dummy = {};\n\n        Error.captureStackTrace ? Error.captureStackTrace(dummy) : (dummy = new Error());\n\n        // slice off the Error: ... line\n        const stack = dummy.stack ? dummy.stack.replace(/^.+\\n/, '') : '';\n        try {\n          if (!err.stack) {\n            err.stack = stack;\n            // match without the 2 top stack lines\n          } else if (stack && !String(err.stack).endsWith(stack.replace(/^.+\\n.+\\n/, ''))) {\n            err.stack += '\\n' + stack\n          }\n        } catch (e) {\n          // ignore the case where \"stack\" is an un-writable property\n        }\n      }\n\n      throw err;\n    }\n  }\n\n  _request(configOrUrl, config) {\n    /*eslint no-param-reassign:0*/\n    // Allow for axios('example/url'[, config]) a la fetch API\n    if (typeof configOrUrl === 'string') {\n      config = config || {};\n      config.url = configOrUrl;\n    } else {\n      config = configOrUrl || {};\n    }\n\n    config = mergeConfig(this.defaults, config);\n\n    const {transitional, paramsSerializer, headers} = config;\n\n    if (transitional !== undefined) {\n      validator.assertOptions(transitional, {\n        silentJSONParsing: validators.transitional(validators.boolean),\n        forcedJSONParsing: validators.transitional(validators.boolean),\n        clarifyTimeoutError: validators.transitional(validators.boolean)\n      }, false);\n    }\n\n    if (paramsSerializer != null) {\n      if (utils.isFunction(paramsSerializer)) {\n        config.paramsSerializer = {\n          serialize: paramsSerializer\n        }\n      } else {\n        validator.assertOptions(paramsSerializer, {\n          encode: validators.function,\n          serialize: validators.function\n        }, true);\n      }\n    }\n\n    // Set config.allowAbsoluteUrls\n    if (config.allowAbsoluteUrls !== undefined) {\n      // do nothing\n    } else if (this.defaults.allowAbsoluteUrls !== undefined) {\n      config.allowAbsoluteUrls = this.defaults.allowAbsoluteUrls;\n    } else {\n      config.allowAbsoluteUrls = true;\n    }\n\n    validator.assertOptions(config, {\n      baseUrl: validators.spelling('baseURL'),\n      withXsrfToken: validators.spelling('withXSRFToken')\n    }, true);\n\n    // Set config.method\n    config.method = (config.method || this.defaults.method || 'get').toLowerCase();\n\n    // Flatten headers\n    let contextHeaders = headers && utils.merge(\n      headers.common,\n      headers[config.method]\n    );\n\n    headers && utils.forEach(\n      ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n      (method) => {\n        delete headers[method];\n      }\n    );\n\n    config.headers = AxiosHeaders.concat(contextHeaders, headers);\n\n    // filter out skipped interceptors\n    const requestInterceptorChain = [];\n    let synchronousRequestInterceptors = true;\n    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n      if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n        return;\n      }\n\n      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    const responseInterceptorChain = [];\n    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    let promise;\n    let i = 0;\n    let len;\n\n    if (!synchronousRequestInterceptors) {\n      const chain = [dispatchRequest.bind(this), undefined];\n      chain.unshift(...requestInterceptorChain);\n      chain.push(...responseInterceptorChain);\n      len = chain.length;\n\n      promise = Promise.resolve(config);\n\n      while (i < len) {\n        promise = promise.then(chain[i++], chain[i++]);\n      }\n\n      return promise;\n    }\n\n    len = requestInterceptorChain.length;\n\n    let newConfig = config;\n\n    while (i < len) {\n      const onFulfilled = requestInterceptorChain[i++];\n      const onRejected = requestInterceptorChain[i++];\n      try {\n        newConfig = onFulfilled(newConfig);\n      } catch (error) {\n        onRejected.call(this, error);\n        break;\n      }\n    }\n\n    try {\n      promise = dispatchRequest.call(this, newConfig);\n    } catch (error) {\n      return Promise.reject(error);\n    }\n\n    i = 0;\n    len = responseInterceptorChain.length;\n\n    while (i < len) {\n      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);\n    }\n\n    return promise;\n  }\n\n  getUri(config) {\n    config = mergeConfig(this.defaults, config);\n    const fullPath = buildFullPath(config.baseURL, config.url, config.allowAbsoluteUrls);\n    return buildURL(fullPath, config.params, config.paramsSerializer);\n  }\n}\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method,\n      url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n\n  function generateHTTPMethod(isForm) {\n    return function httpMethod(url, data, config) {\n      return this.request(mergeConfig(config || {}, {\n        method,\n        headers: isForm ? {\n          'Content-Type': 'multipart/form-data'\n        } : {},\n        url,\n        data\n      }));\n    };\n  }\n\n  Axios.prototype[method] = generateHTTPMethod();\n\n  Axios.prototype[method + 'Form'] = generateHTTPMethod(true);\n});\n\nexport default Axios;\n", "'use strict';\n\nimport CanceledError from './CanceledError.js';\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @param {Function} executor The executor function.\n *\n * @returns {CancelToken}\n */\nclass CancelToken {\n  constructor(executor) {\n    if (typeof executor !== 'function') {\n      throw new TypeError('executor must be a function.');\n    }\n\n    let resolvePromise;\n\n    this.promise = new Promise(function promiseExecutor(resolve) {\n      resolvePromise = resolve;\n    });\n\n    const token = this;\n\n    // eslint-disable-next-line func-names\n    this.promise.then(cancel => {\n      if (!token._listeners) return;\n\n      let i = token._listeners.length;\n\n      while (i-- > 0) {\n        token._listeners[i](cancel);\n      }\n      token._listeners = null;\n    });\n\n    // eslint-disable-next-line func-names\n    this.promise.then = onfulfilled => {\n      let _resolve;\n      // eslint-disable-next-line func-names\n      const promise = new Promise(resolve => {\n        token.subscribe(resolve);\n        _resolve = resolve;\n      }).then(onfulfilled);\n\n      promise.cancel = function reject() {\n        token.unsubscribe(_resolve);\n      };\n\n      return promise;\n    };\n\n    executor(function cancel(message, config, request) {\n      if (token.reason) {\n        // Cancellation has already been requested\n        return;\n      }\n\n      token.reason = new CanceledError(message, config, request);\n      resolvePromise(token.reason);\n    });\n  }\n\n  /**\n   * Throws a `CanceledError` if cancellation has been requested.\n   */\n  throwIfRequested() {\n    if (this.reason) {\n      throw this.reason;\n    }\n  }\n\n  /**\n   * Subscribe to the cancel signal\n   */\n\n  subscribe(listener) {\n    if (this.reason) {\n      listener(this.reason);\n      return;\n    }\n\n    if (this._listeners) {\n      this._listeners.push(listener);\n    } else {\n      this._listeners = [listener];\n    }\n  }\n\n  /**\n   * Unsubscribe from the cancel signal\n   */\n\n  unsubscribe(listener) {\n    if (!this._listeners) {\n      return;\n    }\n    const index = this._listeners.indexOf(listener);\n    if (index !== -1) {\n      this._listeners.splice(index, 1);\n    }\n  }\n\n  toAbortSignal() {\n    const controller = new AbortController();\n\n    const abort = (err) => {\n      controller.abort(err);\n    };\n\n    this.subscribe(abort);\n\n    controller.signal.unsubscribe = () => this.unsubscribe(abort);\n\n    return controller.signal;\n  }\n\n  /**\n   * Returns an object that contains a new `CancelToken` and a function that, when called,\n   * cancels the `CancelToken`.\n   */\n  static source() {\n    let cancel;\n    const token = new CancelToken(function executor(c) {\n      cancel = c;\n    });\n    return {\n      token,\n      cancel\n    };\n  }\n}\n\nexport default CancelToken;\n", "'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n *\n * @returns {Function}\n */\nexport default function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n}\n", "'use strict';\n\nimport utils from './../utils.js';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n *\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nexport default function isAxiosError(payload) {\n  return utils.isObject(payload) && (payload.isAxiosError === true);\n}\n", "const HttpStatusCode = {\n  Continue: 100,\n  SwitchingProtocols: 101,\n  Processing: 102,\n  EarlyHints: 103,\n  Ok: 200,\n  Created: 201,\n  Accepted: 202,\n  NonAuthoritativeInformation: 203,\n  NoContent: 204,\n  ResetContent: 205,\n  PartialContent: 206,\n  MultiStatus: 207,\n  AlreadyReported: 208,\n  ImUsed: 226,\n  MultipleChoices: 300,\n  MovedPermanently: 301,\n  Found: 302,\n  SeeOther: 303,\n  NotModified: 304,\n  UseProxy: 305,\n  Unused: 306,\n  TemporaryRedirect: 307,\n  PermanentRedirect: 308,\n  BadRequest: 400,\n  Unauthorized: 401,\n  PaymentRequired: 402,\n  Forbidden: 403,\n  NotFound: 404,\n  MethodNotAllowed: 405,\n  NotAcceptable: 406,\n  ProxyAuthenticationRequired: 407,\n  RequestTimeout: 408,\n  Conflict: 409,\n  Gone: 410,\n  LengthRequired: 411,\n  PreconditionFailed: 412,\n  PayloadTooLarge: 413,\n  UriTooLong: 414,\n  UnsupportedMediaType: 415,\n  RangeNotSatisfiable: 416,\n  ExpectationFailed: 417,\n  ImATeapot: 418,\n  MisdirectedRequest: 421,\n  UnprocessableEntity: 422,\n  Locked: 423,\n  FailedDependency: 424,\n  TooEarly: 425,\n  UpgradeRequired: 426,\n  PreconditionRequired: 428,\n  TooManyRequests: 429,\n  RequestHeaderFieldsTooLarge: 431,\n  UnavailableForLegalReasons: 451,\n  InternalServerError: 500,\n  NotImplemented: 501,\n  BadGateway: 502,\n  ServiceUnavailable: 503,\n  GatewayTimeout: 504,\n  HttpVersionNotSupported: 505,\n  VariantAlsoNegotiates: 506,\n  InsufficientStorage: 507,\n  LoopDetected: 508,\n  NotExtended: 510,\n  NetworkAuthenticationRequired: 511,\n  WebServerIsDown: 521,\n  ConnectionTimedOut: 522,\n  OriginIsUnreachable: 523,\n  TimeoutOccurred: 524,\n  SslHandshakeFailed: 525,\n  InvalidSslCertificate: 526,\n};\n\nObject.entries(HttpStatusCode).forEach(([key, value]) => {\n  HttpStatusCode[value] = key;\n});\n\nexport default HttpStatusCode;\n", "'use strict';\n\nimport utils from './utils.js';\nimport bind from './helpers/bind.js';\nimport Axios from './core/Axios.js';\nimport mergeConfig from './core/mergeConfig.js';\nimport defaults from './defaults/index.js';\nimport formDataToJSON from './helpers/formDataToJSON.js';\nimport CanceledError from './cancel/CanceledError.js';\nimport CancelToken from './cancel/CancelToken.js';\nimport isCancel from './cancel/isCancel.js';\nimport {VERSION} from './env/data.js';\nimport toFormData from './helpers/toFormData.js';\nimport AxiosError from './core/AxiosError.js';\nimport spread from './helpers/spread.js';\nimport isAxiosError from './helpers/isAxiosError.js';\nimport AxiosHeaders from \"./core/AxiosHeaders.js\";\nimport adapters from './adapters/adapters.js';\nimport HttpStatusCode from './helpers/HttpStatusCode.js';\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n *\n * @returns {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  const context = new Axios(defaultConfig);\n  const instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context, {allOwnKeys: true});\n\n  // Copy context to instance\n  utils.extend(instance, context, null, {allOwnKeys: true});\n\n  // Factory for creating new instances\n  instance.create = function create(instanceConfig) {\n    return createInstance(mergeConfig(defaultConfig, instanceConfig));\n  };\n\n  return instance;\n}\n\n// Create the default instance to be exported\nconst axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Expose Cancel & CancelToken\naxios.CanceledError = CanceledError;\naxios.CancelToken = CancelToken;\naxios.isCancel = isCancel;\naxios.VERSION = VERSION;\naxios.toFormData = toFormData;\n\n// Expose AxiosError class\naxios.AxiosError = AxiosError;\n\n// alias for CanceledError for backward compatibility\naxios.Cancel = axios.CanceledError;\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\n\naxios.spread = spread;\n\n// Expose isAxiosError\naxios.isAxiosError = isAxiosError;\n\n// Expose mergeConfig\naxios.mergeConfig = mergeConfig;\n\naxios.AxiosHeaders = AxiosHeaders;\n\naxios.formToJSON = thing => formDataToJSON(utils.isHTMLForm(thing) ? new FormData(thing) : thing);\n\naxios.getAdapter = adapters.getAdapter;\n\naxios.HttpStatusCode = HttpStatusCode;\n\naxios.default = axios;\n\n// this module should only have a default export\nexport default axios\n", "import axios from './lib/axios.js';\n\n// This module is intended to unwrap Axios default export as named.\n// Keep top-level export same with static properties\n// so that it can keep same with es module or cjs\nconst {\n  Axios,\n  AxiosError,\n  CanceledError,\n  isCancel,\n  CancelToken,\n  VERSION,\n  all,\n  Cancel,\n  isAxiosError,\n  spread,\n  toFormData,\n  AxiosHeaders,\n  HttpStatusCode,\n  formToJSON,\n  getAdapter,\n  mergeConfig\n} = axios;\n\nexport {\n  axios as default,\n  Axios,\n  AxiosError,\n  CanceledError,\n  isCancel,\n  CancelToken,\n  VERSION,\n  all,\n  Cancel,\n  isAxiosError,\n  spread,\n  toFormData,\n  AxiosHeaders,\n  HttpStatusCode,\n  formToJSON,\n  getAdapter,\n  mergeConfig\n}\n", "/**\n * Module: src/rateLimiter.ts\n * Owner: application\n * Reads: (document)\n * Writes: (document)\n * Receives: (document)\n * Emits: (document)\n * Prohibitions: Do not mutate ApplicationContext directly; Do not define new *Context types\n * Rationale: (document)\n *\n * LLM-GUARD:\n * - Follow ownership boundaries; route events to Router; do not add UI logic here\n */\n/**\n * Simple adaptive rate limiter + retry helper for Azure DevOps API.\n * Token bucket w/ refill + queue. Burst allowed up to `burst` then sustained `ratePerSecond`.\n */\nexport class RateLimiter {\n  private tokens: number;\n  private readonly queue: Array<() => void> = [];\n  private lastRefill: number;\n  private timer: NodeJS.Timeout | null = null;\n\n  constructor(\n    private ratePerSecond: number,\n    private burst: number\n  ) {\n    // Initialize token bucket at full burst capacity (uses burst param)\n    this.tokens = burst;\n    this.lastRefill = Date.now();\n  }\n\n  private refill() {\n    const now = Date.now();\n    const elapsed = (now - this.lastRefill) / 1000;\n    if (elapsed <= 0) return;\n    this.lastRefill = now;\n    this.tokens = Math.min(this.burst, this.tokens + elapsed * this.ratePerSecond);\n  }\n\n  private scheduleDrain() {\n    if (this.timer || this.queue.length === 0) return;\n    const delay = 50; // 20Hz check\n    this.timer = setTimeout(() => {\n      this.timer = null;\n      this.refill();\n      while (this.queue.length && this.tokens >= 1) {\n        this.tokens -= 1;\n        const resolve = this.queue.shift();\n        resolve && resolve();\n      }\n      if (this.queue.length) this.scheduleDrain();\n    }, delay);\n  }\n\n  acquire(): Promise<void> {\n    this.refill();\n    if (this.tokens >= 1 && this.queue.length === 0) {\n      this.tokens -= 1;\n      return Promise.resolve();\n    }\n    return new Promise((res) => {\n      this.queue.push(res);\n      this.scheduleDrain();\n    });\n  }\n}\n\nexport interface RetryOptions {\n  retries?: number; // total attempts (default 4)\n  baseDelayMs?: number; // initial backoff (default 250)\n  maxDelayMs?: number; // cap (default 4000)\n}\n\nexport async function withRetry<T>(\n  fn: () => Promise<T>,\n  isRetryable: (err: any) => boolean,\n  opts: RetryOptions = {}\n): Promise<T> {\n  const { retries = 4, baseDelayMs = 250, maxDelayMs = 4000 } = opts;\n  let attempt = 0;\n  while (true) {\n    try {\n      return await fn();\n    } catch (err: any) {\n      attempt++;\n      // If not retryable or attempts exhausted, rethrow immediately\n      if (attempt > retries || !isRetryable(err)) throw err;\n      const backoff = Math.min(maxDelayMs, baseDelayMs * Math.pow(2, attempt - 1));\n      const jitter = Math.random() * (backoff * 0.25);\n      const sleep = backoff + jitter;\n      await new Promise((r) => setTimeout(r, sleep));\n    }\n  }\n}\n", "/**\n * Module: AzureDevOpsIntClient (HTTP client)\n * Owner: connection\n * Reads: Connection configuration from FSM; ApplicationContext via selectors (read-only)\n * Writes: none (context updates happen via FSM reducers)\n * Receives: HTTP requests from provider/connection actors\n * Emits: onAuthFailure callback to FSM; HTTP responses/errors to callers\n * Prohibitions: Do not implement webview logic; Do not define or mutate ApplicationContext\n * Rationale: Single HTTP boundary with structured error classification\n *\n * LLM-GUARD:\n * - On 401 bearer: call onAuthFailure and throw; do not handle UI here\n * - Do not emit SELECT_CONNECTION or any UI events\n *\n * URL invariants:\n * - apiBaseUrl: ALWAYS used for REST API calls. Must include project and end with '/_apis'.\n * - baseUrl:    ONLY used for browser/UI links. Never used for REST calls.\n */\nimport axios, { type AxiosInstance } from 'axios';\nimport type { WorkItem, WorkItemBuildSummary } from './types.js';\nimport { RateLimiter } from './rateLimiter.js';\nimport { workItemCache, WorkItemCache } from './cache.js';\nimport { measureAsync } from './performance.js';\nimport { createLogger } from './logging/unifiedLogger.js';\n\nconst logger = createLogger('azureClient');\n\nconst escapeRegExp = (value: string) => value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n\nconst stripProjectSegment = (url: string, encodedProject: string, rawProject?: string): string => {\n  const candidates = new Set<string>();\n  if (encodedProject) {\n    candidates.add(encodedProject);\n    const doubleEncoded = encodeURIComponent(encodedProject);\n    if (doubleEncoded && doubleEncoded !== encodedProject) {\n      candidates.add(doubleEncoded);\n    }\n  }\n\n  if (rawProject?.trim()) {\n    candidates.add(rawProject.trim());\n  }\n\n  try {\n    const decoded = decodeURIComponent(encodedProject);\n    if (decoded) {\n      candidates.add(decoded);\n      const fullyDecoded = decodeURIComponent(decoded);\n      if (fullyDecoded) {\n        candidates.add(fullyDecoded);\n      }\n    }\n  } catch {\n    // ignore decode issues\n  }\n\n  return Array.from(candidates).reduce((current, candidate) => {\n    if (!candidate) {\n      return current;\n    }\n\n    const pattern = new RegExp(`/${escapeRegExp(candidate)}$`);\n    return current.replace(pattern, '');\n  }, url);\n};\n\ntype AuthType = 'pat' | 'bearer';\n\ninterface ClientOptions {\n  ratePerSecond?: number;\n  burst?: number;\n  team?: string; // Optional team context for iteration APIs and @CurrentIteration resolution\n  // If true (default), attempt to use [System.StateCategory] in WIQL filters until proven unsupported.\n  wiqlPreferStateCategory?: boolean;\n  baseUrl?: string; // Custom base URL for different Azure DevOps instances\n  apiBaseUrl?: string; // Manual API base URL override (takes precedence over derived URL)\n  authType?: AuthType; // 'pat' (default) or 'bearer' for Entra ID tokens\n  identityName?: string; // Optional identity name for on-prem servers where @Me doesn't resolve\n  onAuthFailure?: (error: Error) => void;\n}\n\nexport class AzureDevOpsIntClient {\n  public organization: string;\n  public project: string;\n  public encodedOrganization: string;\n  public encodedProject: string;\n  public axios: AxiosInstance;\n  private _repoCache: any[] | undefined;\n  private credential: string; // PAT or access token\n  private authType: AuthType;\n  private limiter: RateLimiter;\n  private onAuthFailure?: (error: Error) => void;\n  public team: string | undefined;\n  public encodedTeam: string | undefined;\n  // Capability cache: prefer using [System.StateCategory] unless Azure DevOps rejects it for this org/project\n  private preferStateCategory: boolean;\n  private cachedIdentity?: { id?: string; displayName?: string; uniqueName?: string };\n  private identityName?: string; // Fallback identity name for on-prem servers\n  // baseUrl is for browser/UI links only (e.g., openExternal). Never for REST calls.\n  public baseUrl: string;\n  // apiBaseUrl is the canonical root for REST calls (must include project + '/_apis').\n  private apiBaseUrl: string;\n  private static readonly connectionDataApiVersions = [\n    '7.1-preview.1',\n    '7.0-preview.1',\n    '6.0-preview.1',\n    '5.1-preview.2',\n    '5.0-preview.3',\n    '5.0-preview',\n    '5.0',\n  ];\n\n  private _authorizedGet(url: string) {\n    // Use existing axios instance so interceptors attach auth headers; override baseURL to avoid double prefixing\n    return this.axios.get(url, { baseURL: undefined });\n  }\n\n  constructor(\n    organization: string,\n    project: string,\n    credential: string,\n    options: ClientOptions = {}\n  ) {\n    this.organization = organization;\n    this.project = project;\n    this.credential = credential;\n    this.authType = options.authType ?? 'pat';\n    this.onAuthFailure = options.onAuthFailure;\n    this.team = options.team?.trim() ? options.team.trim() : undefined;\n    this.preferStateCategory = options.wiqlPreferStateCategory ?? true;\n    this.identityName = options.identityName?.trim() ? options.identityName.trim() : undefined;\n    if (this.identityName) {\n      logger.info('Configured with fallback identityName for on-prem', {\n        meta: { identityName: this.identityName },\n      });\n    }\n    this.encodedOrganization = encodeURIComponent(organization);\n    this.encodedProject = encodeURIComponent(project);\n    this.encodedTeam = this.team ? encodeURIComponent(this.team) : undefined;\n\n    // Determine the base URL and API base URL\n    // Priority: manual apiBaseUrl override > derived from baseUrl > default cloud\n    const trimTrailingSlash = (value?: string) => (value ? value.replace(/\\/+$/, '') : undefined);\n\n    const normalizeBaseUrl = (value?: string): string => {\n      const fallback = `https://dev.azure.com/${this.encodedOrganization}`;\n      if (!value) {\n        return fallback;\n      }\n\n      const trimmed = trimTrailingSlash(value) ?? fallback;\n      const withoutApis = trimmed.replace(/\\/_apis$/i, '');\n\n      if (/visualstudio\\.com/i.test(withoutApis)) {\n        // Keep visualstudio.com host as-is for browser links\n        return withoutApis;\n      }\n\n      if (/dev\\.azure\\.com/i.test(withoutApis)) {\n        return `https://dev.azure.com/${this.encodedOrganization}`;\n      }\n\n      const normalized = stripProjectSegment(withoutApis, this.encodedProject, this.project);\n      return trimTrailingSlash(normalized) ?? fallback;\n    };\n\n    const ensureApiSuffix = (value: string): string => {\n      const trimmed = trimTrailingSlash(value) ?? value;\n      return /\\/_apis$/i.test(trimmed) ? trimmed : `${trimmed}/_apis`;\n    };\n\n    if (options.apiBaseUrl) {\n      // TRUST the provided apiBaseUrl for REST calls; only ensure '/_apis' suffix and trim.\n      const manualApi = ensureApiSuffix(options.apiBaseUrl).replace(/\\/+$/, '');\n      // Derive a browser baseUrl from the provided apiBaseUrl by removing the project segment.\n      const baseCandidate = manualApi.replace(/\\/_apis$/i, '');\n      const derivedBase = stripProjectSegment(baseCandidate, this.encodedProject, this.project);\n      const preferredBase = options.baseUrl\n        ? normalizeBaseUrl(options.baseUrl)\n        : normalizeBaseUrl(derivedBase);\n\n      this.baseUrl = preferredBase;\n      this.apiBaseUrl = manualApi;\n\n      logger.info('Using apiBaseUrl from settings', {\n        meta: { apiBaseUrl: this.apiBaseUrl, baseUrl: this.baseUrl },\n      });\n    } else if (options.baseUrl) {\n      this.baseUrl = normalizeBaseUrl(options.baseUrl);\n      this.apiBaseUrl = `${this.baseUrl}/${this.encodedProject}/_apis`;\n    } else {\n      // Default to dev.azure.com\n      this.baseUrl = `https://dev.azure.com/${this.encodedOrganization}`;\n      this.apiBaseUrl = `${this.baseUrl}/${this.encodedProject}/_apis`;\n    }\n\n    this.baseUrl = this.baseUrl.replace(/\\/+$/, '');\n    this.apiBaseUrl = this.apiBaseUrl.replace(/\\/+$/, '');\n\n    // IMPORTANT: axios baseURL must be apiBaseUrl, not baseUrl.\n    this.axios = axios.create({\n      baseURL: this.apiBaseUrl,\n      timeout: 30000, // 30s network timeout for slow Azure DevOps APIs\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n    // Rate limiter: allow configurable burst & sustained rate (defaults)\n    const rps = Math.max(1, Math.min(50, options.ratePerSecond ?? 5));\n    const burst = Math.max(1, Math.min(100, options.burst ?? 10));\n    this.limiter = new RateLimiter(rps, burst);\n\n    // Attach auth header on each request\n    this.axios.interceptors.request.use(async (cfg) => {\n      await this.limiter.acquire();\n\n      // Set authorization header based on auth type\n      if (this.authType === 'pat') {\n        (cfg.headers ||= {} as any)['Authorization'] =\n          `Basic ${Buffer.from(':' + this.credential).toString('base64')}`;\n      } else {\n        // Bearer token for Entra ID\n        (cfg.headers ||= {} as any)['Authorization'] = `Bearer ${this.credential}`;\n      }\n\n      (cfg as any).__start = Date.now();\n      // Attach attempt counter for retries\n      (cfg as any).__attempt = ((cfg as any).__attempt || 0) + 1;\n\n      // Enhanced debugging: log token info (first/last chars only for security)\n      const authHeader = cfg.headers?.['Authorization'] as string;\n      const tokenDebug = authHeader\n        ? `${authHeader.substring(0, 20)}...${authHeader.substring(authHeader.length - 10)}`\n        : 'NO_AUTH_HEADER';\n\n      logger.debug('HTTP request', {\n        meta: {\n          method: cfg.method?.toUpperCase(),\n          url: cfg.url,\n          attempt: (cfg as any).__attempt,\n          token: tokenDebug,\n        },\n      });\n      return cfg;\n    });\n\n    this.axios.interceptors.response.use(\n      (resp) => {\n        const ms = Date.now() - (resp.config as any).__start;\n        logger.debug('HTTP response', {\n          meta: {\n            method: resp.config.method?.toUpperCase(),\n            url: resp.config.url,\n            status: resp.status,\n            duration: `${ms}ms`,\n          },\n        });\n        return resp;\n      },\n      async (err) => {\n        const cfg = err.config || {};\n        const ms = cfg.__start ? Date.now() - cfg.__start : 'n/a';\n        if (err.response) {\n          const { status, statusText, data } = err.response;\n\n          // Enhanced error logging for 404s\n          if (status === 404) {\n            logger.error('HTTP 404 Details', {\n              meta: {\n                method: cfg.method?.toUpperCase(),\n                url: cfg.url,\n                fullUrl: cfg.baseURL + cfg.url,\n                status,\n                statusText,\n                responseData: data,\n                authType: this.authType,\n                organization: this.organization,\n                project: this.project,\n              },\n            });\n          }\n\n          logger.error('HTTP error', {\n            meta: {\n              method: cfg.method?.toUpperCase(),\n              url: cfg.url,\n              status,\n              statusText,\n              duration: `${ms}ms`,\n            },\n          });\n          if (data) {\n            let snippet: string;\n            try {\n              snippet =\n                typeof data === 'string' ? data.slice(0, 500) : JSON.stringify(data).slice(0, 500);\n            } catch {\n              snippet = '[unserializable response data]';\n            }\n            logger.error('HTTP error body', { meta: { snippet } });\n          }\n\n          // Handle 401 for bearer token auth - throw error immediately to stop retry loops\n          // Note: 404 is handled individually by methods since it can have different meanings\n          if (status === 401 && this.authType === 'bearer') {\n            logger.error('HTTP 401 Unauthorized - authentication required');\n            const authError = new Error(\n              `Authentication failed: 401 Unauthorized. Please re-authenticate.`\n            );\n            authError.name = 'AuthenticationError';\n            (authError as any).status = status;\n            try {\n              this.onAuthFailure?.(authError);\n            } catch (callbackError) {\n              logger.error('onAuthFailure callback threw', { meta: callbackError });\n            }\n            throw authError;\n          }\n\n          // Handle 401 for PAT authentication when token is expired\n          // Check error message for \"expired\" to detect PAT expiration vs other auth issues\n          if (status === 401 && this.authType === 'pat') {\n            const errorMessage = data?.message || (typeof data === 'string' ? data : '') || '';\n            const isPatExpired =\n              errorMessage.toLowerCase().includes('expired') ||\n              errorMessage.toLowerCase().includes('personal access token used has expired');\n\n            if (isPatExpired) {\n              logger.error('HTTP 401 Unauthorized - PAT expired');\n              const authError = new Error(\n                `Personal Access Token has expired. Please update your PAT.`\n              );\n              authError.name = 'AuthenticationError';\n              (authError as any).status = status;\n              (authError as any).isPatExpired = true;\n              try {\n                this.onAuthFailure?.(authError);\n              } catch (callbackError) {\n                logger.error('onAuthFailure callback threw', { meta: callbackError });\n              }\n              throw authError;\n            }\n          }\n        } else if (err.code === 'ECONNABORTED') {\n          logger.error('HTTP timeout', {\n            meta: { method: cfg.method?.toUpperCase(), url: cfg.url, duration: `${ms}ms` },\n          });\n        } else {\n          logger.error('HTTP network error', { meta: { message: err.message } });\n        }\n        // Retry logic: 429 or >=500 (excluding 501/505 uncommon) with exponential backoff\n        const status = err.response?.status;\n        const attempt = (cfg as any).__attempt || 1;\n        const maxAttempts = 4;\n        if (\n          status &&\n          (status === 429 || (status >= 500 && status < 600)) &&\n          attempt < maxAttempts\n        ) {\n          const backoffBase = 250 * Math.pow(2, attempt - 1);\n          const jitter = Math.random() * backoffBase * 0.3;\n          const delay = Math.min(4000, backoffBase + jitter);\n          logger.warn('HTTP retry', {\n            meta: { url: cfg.url, status, retryInMs: Math.round(delay), attempt: attempt + 1 },\n          });\n          return new Promise((resolve) => setTimeout(resolve, delay)).then(() => this.axios(cfg));\n        }\n        return Promise.reject(err);\n      }\n    );\n  }\n\n  /**\n   * Update the credential (PAT or access token)\n   * Useful for refreshing Entra ID tokens\n   */\n  updateCredential(newCredential: string): void {\n    this.credential = newCredential;\n  }\n\n  // Build a REST endpoint URL from apiBaseUrl (for HTTP calls)\n  buildFullUrl(path: string) {\n    return `${this.apiBaseUrl}${path}`;\n  }\n  // Build a browser URL from baseUrl (for openExternal)\n  getBrowserUrl(path: string) {\n    return `${this.baseUrl}/${this.encodedProject}${path}`;\n  }\n  private buildTeamApiUrl(path: string) {\n    if (!this.encodedTeam) return this.buildFullUrl(path);\n    // Insert team segment before _apis\n    const baseWithoutApis = this.apiBaseUrl.replace(/\\/_apis$/, '');\n    return `${baseWithoutApis}/${this.encodedTeam}/_apis${path}`;\n  }\n\n  // ---------------- Identity Helpers ----------------\n  /**\n   * Fetches the authenticated Azure DevOps user identity GUID using connectionData.\n   * Falls back to null on error.\n   */\n  async getAuthenticatedUserId(): Promise<string | null> {\n    logger.debug('Testing authentication...');\n    const identity = await this._getAuthenticatedIdentity();\n\n    if (identity?.id) {\n      logger.info('Authentication successful', {\n        meta: {\n          displayName: identity.displayName || 'Unknown',\n          uniqueName: identity.uniqueName || 'Unknown',\n        },\n      });\n      logger.debug('Authentication method: Personal Access Token (PAT)');\n      logger.debug('PAT has at least basic read permissions');\n      logger.debug('If work item creation works, PAT also has work item write permissions');\n    } else {\n      logger.warn('Authentication failed - no user identity returned');\n    }\n\n    // Debug: log the entire identity object for diagnostics (no secrets)\n    try {\n      logger.debug('Resolved identity object', { meta: identity });\n    } catch {\n      // ignore stringify errors\n    }\n\n    return identity?.id ?? null;\n  }\n\n  private async _getAuthenticatedIdentity(): Promise<{\n    id?: string;\n    displayName?: string;\n    uniqueName?: string;\n  } | null> {\n    if (this.cachedIdentity) return this.cachedIdentity;\n    try {\n      // Request connectionData. The endpoint location varies:\n      // - Cloud (dev.azure.com): https://dev.azure.com/{org}/_apis/connectionData\n      // - On-prem/TFS: https://server/collection/_apis/connectionData OR https://server/_apis/connectionData\n      // Use api-version=5.0 (widely supported stable version)\n      let resp: any;\n      const attempts: Array<{ desc: string; url: string }> = [];\n\n      const attemptConnectionData = async (\n        basePath: string,\n        desc: string,\n        useAxiosBase: boolean\n      ) => {\n        let lastError: unknown;\n        const sanitized = basePath.replace(/([&?]+)api-version=[^&]+/i, '').replace(/[&?]+$/, '');\n        for (const version of AzureDevOpsIntClient.connectionDataApiVersions) {\n          const separator = sanitized.includes('?') ? '&' : '?';\n          const fullUrl = `${sanitized}${separator}api-version=${version}`;\n          attempts.push({ desc: `${desc} (v=${version})`, url: fullUrl });\n          try {\n            return useAxiosBase\n              ? await this.axios.get(fullUrl)\n              : await this._authorizedGet(fullUrl);\n          } catch (error) {\n            lastError = error;\n            if (!this._shouldRetryConnectionDataVersion(error)) {\n              throw error;\n            }\n          }\n        }\n        throw lastError || new Error('connectionData api-version attempts exhausted');\n      };\n\n      try {\n        const orgLevel = this.baseUrl.replace(/\\/$/, '') + '/_apis/connectionData';\n        resp = await attemptConnectionData(orgLevel, 'baseUrl org-level', false);\n      } catch (err1) {\n        try {\n          const apiRoot = stripProjectSegment(\n            this.apiBaseUrl.replace(/\\/_apis\\/?$/, ''),\n            this.encodedProject,\n            this.project\n          );\n          const apiConn = apiRoot.replace(/\\/$/, '') + '/_apis/connectionData';\n          resp = await attemptConnectionData(apiConn, 'apiBaseUrl without project', false);\n        } catch (err2) {\n          try {\n            resp = await attemptConnectionData(\n              '/connectionData',\n              'relative to axios baseURL',\n              true\n            );\n          } catch (err3) {\n            logger.error('connectionData attempts failed', { meta: { attempts } });\n            throw err1 || err2 || err3;\n          }\n        }\n      }\n      const user = resp.data?.authenticatedUser ?? {};\n      // Tolerant identity extraction: accept string or numeric id, and look\n      // for several possible unique-name fields used across Azure DevOps and TFS.\n      const resolvedId =\n        typeof user.id === 'string' || typeof user.id === 'number'\n          ? String(user.id)\n          : typeof user.descriptor === 'string'\n            ? user.descriptor\n            : typeof user.subjectDescriptor === 'string'\n              ? user.subjectDescriptor\n              : undefined;\n      const displayName =\n        typeof user.providerDisplayName === 'string'\n          ? user.providerDisplayName\n          : typeof user.displayName === 'string'\n            ? user.displayName\n            : undefined;\n      const uniqueName =\n        typeof user.uniqueName === 'string'\n          ? user.uniqueName\n          : typeof user.unique_name === 'string'\n            ? user.unique_name\n            : typeof user.mailAddress === 'string'\n              ? user.mailAddress\n              : typeof user.email === 'string'\n                ? user.email\n                : typeof user.principalName === 'string'\n                  ? user.principalName\n                  : typeof user.subjectDescriptor === 'string'\n                    ? user.subjectDescriptor\n                    : typeof user.descriptor === 'string'\n                      ? user.descriptor\n                      : undefined;\n\n      const identity = {\n        id: resolvedId,\n        displayName,\n        uniqueName,\n      };\n      this.cachedIdentity = identity;\n      try {\n        logger.debug('Resolved identity object', { meta: identity });\n      } catch {\n        /* ignore stringify errors */\n      }\n\n      // If we still don't have a uniqueName and identityName was provided (for on-prem),\n      // use identityName as the fallback uniqueName\n      if (!this.cachedIdentity.uniqueName && this.identityName) {\n        logger.debug('Using provided identityName as fallback', {\n          meta: { identityName: this.identityName },\n        });\n        this.cachedIdentity.uniqueName = this.identityName;\n      }\n\n      return this.cachedIdentity;\n    } catch (e) {\n      logger.error('Error fetching authenticated user identity', { meta: e });\n      // If connectionData fails entirely and we have identityName, use it as a fallback\n      if (this.identityName) {\n        logger.debug('connectionData failed, using identityName fallback', {\n          meta: { identityName: this.identityName },\n        });\n        this.cachedIdentity = {\n          uniqueName: this.identityName,\n        };\n        return this.cachedIdentity;\n      }\n      return null;\n    }\n  }\n  private _shouldRetryConnectionDataVersion(error: any): boolean {\n    const status = error?.response?.status;\n    if (status !== 400) {\n      return false;\n    }\n    const message = String(\n      error?.response?.data?.message ||\n        error?.response?.data?.error?.message ||\n        error?.response?.data ||\n        error?.message ||\n        ''\n    );\n    return /preview/i.test(message) || /api[- ]?version/i.test(message);\n  }\n\n  /**\n   * Normalize query name to canonical form for consistent caching and matching\n   * Known query names are matched case-insensitively\n   *\n   * @param query - The query name to normalize\n   * @returns The normalized query name in canonical form, or the original trimmed input for custom WIQL\n   * @throws {Error} If query is null, undefined, not a string, empty, or only whitespace\n   */\n  private _normalizeQueryName(query: string): string {\n    // Explicitly validate input type\n    if (query === null || query === undefined || typeof query !== 'string') {\n      throw new Error(`Invalid query parameter: expected non-empty string, got ${typeof query}`);\n    }\n\n    const trimmed = query.trim();\n\n    // Explicitly reject empty or whitespace-only strings\n    if (trimmed.length === 0) {\n      throw new Error('Query name cannot be empty or contain only whitespace');\n    }\n\n    const knownQueries = [\n      'My Activity',\n      'Assigned to me',\n      'My Work Items',\n      'Recently Updated',\n      'All Active',\n      'All Work Items',\n      'Current Sprint',\n      'Created By Me',\n      'Following',\n      'Mentioned',\n    ];\n\n    // Find case-insensitive match\n    const normalized = knownQueries.find((q) => q.toLowerCase() === trimmed.toLowerCase());\n\n    // Return canonical form if found, otherwise return original (might be custom WIQL)\n    return normalized || trimmed;\n  }\n\n  buildWIQL(queryNameOrText: string) {\n    // Use capability cache to decide whether to include [System.StateCategory]\n    return this._buildWIQL(queryNameOrText, this.preferStateCategory);\n  }\n\n  private _selectFields() {\n    return `[System.Id], [System.Title], [System.State], [System.WorkItemType], \n                           [System.AssignedTo], [System.CreatedDate], [System.ChangedDate],\n                           [System.IterationPath], [System.Tags], [Microsoft.VSTS.Common.Priority]`;\n  }\n\n  private _buildWIQL(queryNameOrText: string, useStateCategory: boolean) {\n    const fields = this._selectFields();\n    const selectedSprint: string | null = null; // placeholder; inject externally if needed\n    const sprintClause = selectedSprint ? `AND [System.IterationPath] = '${selectedSprint}'` : '';\n    const activeFilter = this._activeStateFilter(useStateCategory);\n    switch (queryNameOrText) {\n      case 'My Activity':\n        return `SELECT ${fields} FROM WorkItems \n                        WHERE [System.TeamProject] = @Project\n                        AND ([System.AssignedTo] = @Me OR [System.CreatedBy] = @Me OR [System.ChangedBy] = @Me)\n                        ${activeFilter}\n                        ${sprintClause}\n                        ORDER BY [System.ChangedDate] DESC`;\n      case 'Assigned to me':\n      case 'My Work Items':\n        return `SELECT ${fields} FROM WorkItems \n                        WHERE [System.TeamProject] = @Project\n                        AND [System.AssignedTo] = @Me \n                        ${activeFilter}\n                        ${sprintClause}\n                        ORDER BY [System.ChangedDate] DESC`;\n      case 'Current Sprint':\n        return selectedSprint\n          ? `SELECT ${fields} FROM WorkItems \n                            WHERE [System.IterationPath] = '${selectedSprint}'\n                            ${activeFilter}\n                            ORDER BY [Microsoft.VSTS.Common.Priority] ASC, [System.Id] ASC`\n          : `SELECT ${fields} FROM WorkItems \n                        WHERE [System.IterationPath] UNDER @CurrentIteration \n                        ${activeFilter}\n                        ORDER BY [Microsoft.VSTS.Common.Priority] ASC, [System.Id] ASC`;\n      case 'All Active':\n        return `SELECT ${fields} FROM WorkItems \n                        WHERE [System.TeamProject] = @Project\n                        ${activeFilter}\n                        ${sprintClause}\n                        ORDER BY [System.ChangedDate] DESC`;\n      case 'All Work Items':\n        // Include all work items including closed/completed ones (only exclude Removed)\n        return `SELECT ${fields} FROM WorkItems \n                        WHERE [System.TeamProject] = @Project\n                        AND [System.State] <> 'Removed'\n                        ${sprintClause}\n                        ORDER BY [System.ChangedDate] DESC`;\n      case 'Recently Updated':\n        return `SELECT ${fields} FROM WorkItems \n                        WHERE [System.TeamProject] = @Project\n                        AND [System.ChangedDate] >= @Today - 3\n                        ${activeFilter}\n                        ${sprintClause}\n                        ORDER BY [System.ChangedDate] DESC`;\n      case 'Created By Me':\n      case 'Created by Me':\n      case 'Created by me':\n        return `SELECT ${fields} FROM WorkItems \n                        WHERE [System.TeamProject] = @Project\n                        AND [System.CreatedBy] = @Me \n                        ${activeFilter}\n                        ${sprintClause}\n                        ORDER BY [System.ChangedDate] DESC`;\n      default:\n        return queryNameOrText;\n    }\n  }\n\n  private _activeStateFilter(useStateCategory: boolean) {\n    if (useStateCategory) {\n      return `AND [System.StateCategory] <> 'Completed' AND [System.State] <> 'Removed'`;\n    }\n    // Legacy fallback: exclude common terminal states across Basic/Agile/Scrum\n    return `AND [System.State] NOT IN ('Closed','Done','Resolved','Removed')`;\n  }\n\n  private _isTooManyResultsError(err: any): boolean {\n    const status = err?.response?.status;\n    if (status !== 400) return false;\n    const message = String(\n      err?.response?.data?.message || err?.response?.data?.value?.Message || err?.message || ''\n    );\n    return (\n      /exceeds the size limit/i.test(message) ||\n      /WorkItemTrackingQueryResultSizeLimitExceededException/i.test(message) ||\n      /VS402337/i.test(message)\n    );\n  }\n\n  private _mapRawWorkItems(rawItems: any[]): WorkItem[] {\n    if (!Array.isArray(rawItems)) return [];\n    return rawItems\n      .filter((item: any) => item && typeof item.id === 'number')\n      .map((item: any) => {\n        const mapped: WorkItem = {\n          id: item.id,\n          fields: item.fields || {},\n        };\n\n        if (Array.isArray(item.relations) && item.relations.length > 0) {\n          const relations = item.relations\n            .filter((rel: any) => rel && typeof rel === 'object')\n            .map((rel: any) => {\n              const attributes =\n                rel.attributes && typeof rel.attributes === 'object'\n                  ? { ...rel.attributes }\n                  : undefined;\n              return {\n                url: typeof rel.url === 'string' ? rel.url : undefined,\n                rel: typeof rel.rel === 'string' ? rel.rel : undefined,\n                attributes,\n              };\n            })\n            .filter(Boolean);\n\n          if (relations.length > 0) {\n            mapped.relations = relations;\n          }\n        }\n\n        return mapped;\n      });\n  }\n\n  private async _fetchWorkItemsByIds(ids: number[]): Promise<WorkItem[]> {\n    if (!Array.isArray(ids) || ids.length === 0) return [];\n    const uniqueIds = Array.from(new Set(ids.filter((id) => Number.isFinite(id)))) as number[];\n    if (uniqueIds.length === 0) return [];\n    const results: WorkItem[] = [];\n    const chunkSize = 200;\n    for (let i = 0; i < uniqueIds.length; i += chunkSize) {\n      const chunk = uniqueIds.slice(i, i + chunkSize);\n      if (chunk.length === 0) continue;\n      try {\n        const resp = await this.axios.get(\n          `/wit/workitems?ids=${chunk.join(',')}&$expand=all&api-version=7.1`\n        );\n        const rawItems: any[] = resp.data?.value || [];\n        results.push(...this._mapRawWorkItems(rawItems));\n      } catch (err: any) {\n        logger.warn('Failed to expand work item chunk', { meta: { error: err?.message || err } });\n      }\n    }\n    return results;\n  }\n\n  private _filterItemsForProject(items: WorkItem[]): WorkItem[] {\n    if (!Array.isArray(items) || !this.project) return Array.isArray(items) ? [...items] : [];\n    const target = this.project.trim().toLowerCase();\n    return items.filter((item) => {\n      const projectName = item?.fields?.['System.TeamProject'];\n      if (!projectName || typeof projectName !== 'string') return true;\n      return projectName.trim().toLowerCase() === target;\n    });\n  }\n\n  private _sortByChangedDateDesc(items: WorkItem[]): WorkItem[] {\n    return [...items].sort((a, b) => {\n      const aDate = new Date(a?.fields?.['System.ChangedDate'] || 0).getTime();\n      const bDate = new Date(b?.fields?.['System.ChangedDate'] || 0).getTime();\n      return bDate - aDate;\n    });\n  }\n\n  private async _getFollowedWorkItems(): Promise<WorkItem[]> {\n    try {\n      const resp = await this.axios.get('/work/workitems/favorites?api-version=7.1');\n      const entries = Array.isArray(resp.data?.value) ? resp.data.value : [];\n      const ids = entries\n        .map((entry: any) => {\n          if (typeof entry?.workItemId === 'number') return entry.workItemId;\n          if (typeof entry?.id === 'number') return entry.id;\n          const nested = entry?.workItem?.id;\n          return typeof nested === 'number' ? nested : NaN;\n        })\n        .filter((id: number) => Number.isFinite(id)) as number[];\n      if (ids.length === 0) return [];\n      const items = await this._fetchWorkItemsByIds(ids);\n      const filtered = this._filterItemsForProject(items);\n      return this._sortByChangedDateDesc(filtered);\n    } catch (err: any) {\n      logger.warn('Failed to fetch followed work items', { meta: { error: err?.message || err } });\n      return [];\n    }\n  }\n\n  private async _getMentionedWorkItems(): Promise<WorkItem[]> {\n    const identity = await this._getAuthenticatedIdentity();\n    if (!identity) return [];\n    const terms = new Set<string>();\n    if (typeof identity.displayName === 'string' && identity.displayName.trim()) {\n      terms.add(identity.displayName.trim());\n    }\n    if (typeof identity.uniqueName === 'string' && identity.uniqueName.trim()) {\n      terms.add(identity.uniqueName.trim());\n    }\n    if (terms.size === 0) return [];\n    const clauses = Array.from(terms).map(\n      (term) => `[System.History] CONTAINS '${this._escapeWIQL(term)}'`\n    );\n    const fields = this._selectFields();\n    const stateFilter = this._activeStateFilter(this.preferStateCategory);\n    const query = `SELECT ${fields} FROM WorkItems \n                        WHERE [System.TeamProject] = @Project\n                        AND (${clauses.join(' OR ')})\n                        ${stateFilter}\n                        ORDER BY [System.ChangedDate] DESC`;\n    try {\n      return await this.runWIQL(query);\n    } catch (err: any) {\n      logger.warn('Failed to fetch mentioned work items', { meta: { error: err?.message || err } });\n      return [];\n    }\n  }\n\n  async getWorkItems(query: string): Promise<WorkItem[]> {\n    return await measureAsync('getWorkItems', async () => {\n      let wiql = ''; // Declare outside try block for error reporting\n      let wiqlToSend = '';\n      try {\n        // Normalize query name for consistent caching and matching\n        // Known query names should be case-insensitive\n        const normalizedQuery = this._normalizeQueryName(query);\n\n        // Check cache first (use normalized query for cache key)\n        const cacheKey = WorkItemCache.generateWorkItemsKey(\n          `${this.organization}-${this.project}`,\n          normalizedQuery,\n          { team: this.team }\n        );\n\n        const cached = workItemCache.get(cacheKey);\n        if (cached) {\n          logger.debug('Cache hit for query', { meta: { query, normalizedQuery } });\n          return cached;\n        }\n\n        if (normalizedQuery === 'Following') {\n          const result = await this._getFollowedWorkItems();\n          workItemCache.setWorkItems(cacheKey, result);\n          return result;\n        }\n        if (normalizedQuery === 'Mentioned') {\n          const result = await this._getMentionedWorkItems();\n          workItemCache.setWorkItems(cacheKey, result);\n          return result;\n        }\n        wiql = this.buildWIQL(normalizedQuery);\n        // If querying Current Sprint, prefer resolving the explicit current iteration path for configured team\n        if (normalizedQuery === 'Current Sprint') {\n          try {\n            const cur = await this.getCurrentIteration();\n            const iterPath = cur?.path;\n            if (iterPath && typeof iterPath === 'string') {\n              const safePath = this._escapeWIQL(iterPath);\n              wiql = `SELECT [System.Id], [System.Title], [System.State], [System.WorkItemType], [System.AssignedTo], [System.CreatedDate], [System.ChangedDate], [System.IterationPath], [System.Tags], [Microsoft.VSTS.Common.Priority] FROM WorkItems WHERE [System.IterationPath] UNDER '${safePath}' AND [System.State] <> 'Closed' AND [System.State] <> 'Removed' ORDER BY [Microsoft.VSTS.Common.Priority] ASC, [System.Id] ASC`;\n            }\n          } catch (e) {\n            // Fallback to @CurrentIteration-based WIQL already produced\n            logger.warn('getCurrentIteration failed, using @CurrentIteration', { meta: e });\n          }\n        }\n        logger.debug('Fetching work items with query', {\n          meta: { wiql, apiBaseUrl: this.axios.defaults.baseURL },\n        });\n\n        // Prepare the WIQL to send\n        // For cloud Azure DevOps, use @Me directly (it's reliable and handles identity matching correctly)\n        // Only replace @Me for on-prem/TFS servers that don't support it\n        wiqlToSend = wiql;\n\n        // For queries that might return many results, add a hard limit via client-side limiting\n        // User-scoped queries (My Activity, Assigned to me) don't need limits as they're naturally bounded\n        const knownUserScopedQueries = ['My Activity', 'Assigned to me', 'My Work Items'];\n        const isKnownQuery = [\n          'Recently Updated',\n          'All Active',\n          'Current Sprint',\n          ...knownUserScopedQueries,\n        ].includes(normalizedQuery);\n        const needsLimit =\n          !knownUserScopedQueries.includes(normalizedQuery) &&\n          (['Recently Updated', 'All Active', 'Current Sprint'].includes(normalizedQuery) ||\n            !isKnownQuery);\n\n        if (needsLimit) {\n          logger.debug('Applying hard limit of 100 items for query', { meta: { query } });\n        }\n\n        // Only replace @Me if we have identityName configured (indicates on-prem/TFS)\n        // For cloud Azure DevOps, @Me works reliably and handles identity matching better\n        if (/@Me\\b/i.test(wiql) && this.identityName) {\n          try {\n            const resolved = await this._getAuthenticatedIdentity();\n            if (resolved) {\n              const idVal =\n                resolved.uniqueName || resolved.displayName || resolved.id || this.identityName;\n              if (idVal) {\n                const escaped = this._escapeWIQL(String(idVal));\n                wiqlToSend = wiql.replace(/@Me\\b/g, `'${escaped}'`);\n                logger.debug('Replacing @Me with explicit identity for on-prem compatibility', {\n                  meta: { idVal, reason: 'identityName configured' },\n                });\n              }\n            }\n          } catch (identErr) {\n            logger.warn('Failed resolving identity for @Me replacement', { meta: identErr });\n          }\n        } else if (/@Me\\b/i.test(wiql)) {\n          logger.debug('Using @Me token directly (cloud Azure DevOps)', {\n            meta: { hasIdentityName: !!this.identityName },\n          });\n        }\n\n        // First, try the WIQL query\n        const wiqlEndpoint = '/wit/wiql?api-version=7.1';\n\n        let wiqlResp;\n        try {\n          wiqlResp = await this.axios.post(wiqlEndpoint, { query: wiqlToSend });\n        } catch (err: any) {\n          if (this._isMissingStateCategoryError(err)) {\n            logger.warn('StateCategory unsupported in WIQL. Retrying with legacy state filters.');\n            // Update capability cache so future queries avoid the failing path for this client lifetime\n            this.preferStateCategory = false;\n            // Rebuild the WIQL with legacy state filters and retry\n            const wiqlLegacy = this._buildWIQL(normalizedQuery, false);\n            logger.debug('Fallback WIQL', { meta: { wiqlLegacy } });\n            // Apply the same @Me replacement logic to the legacy WIQL as well\n            let legacyToSend = wiqlLegacy;\n            // Only replace @Me if identityName is configured (on-prem/TFS)\n            if (/@Me\\b/i.test(wiqlLegacy) && this.identityName) {\n              try {\n                const resolved2 = await this._getAuthenticatedIdentity();\n                if (resolved2) {\n                  const idVal2 =\n                    resolved2.uniqueName ||\n                    resolved2.displayName ||\n                    resolved2.id ||\n                    this.identityName;\n                  if (idVal2) {\n                    legacyToSend = wiqlLegacy.replace(\n                      /@Me\\b/g,\n                      `'${this._escapeWIQL(String(idVal2))}'`\n                    );\n                    logger.debug('Replacing @Me in fallback WIQL with explicit identity', {\n                      meta: { idVal2 },\n                    });\n                  }\n                }\n              } catch (e) {\n                logger.warn('Identity resolution failed for fallback WIQL', { meta: e });\n              }\n            }\n\n            wiqlResp = await this.axios.post(wiqlEndpoint, { query: legacyToSend });\n            // Also update wiql for subsequent logs/context\n            wiql = wiqlLegacy;\n          } else if (this._isTooManyResultsError(err)) {\n            // Server indicates the result set is too large (e.g., >20k).\n            // Retry with progressively shorter date windows to stay under limit.\n            // Try 1 day first (most restrictive), then fail if still too large.\n            const DAYS = 1;\n            const idx = wiqlToSend.lastIndexOf('ORDER BY');\n            const head = idx > -1 ? wiqlToSend.slice(0, idx).trimEnd() : wiqlToSend;\n            const tail = idx > -1 ? wiqlToSend.slice(idx) : 'ORDER BY [System.ChangedDate] DESC';\n            let bounded = `${head}\\nAND [System.ChangedDate] >= @Today - ${DAYS}\\n${tail}`;\n            // Apply @Me replacement again if present (only for on-prem/TFS)\n            if (/@Me\\b/i.test(bounded) && this.identityName) {\n              try {\n                const resolved3 = await this._getAuthenticatedIdentity();\n                if (resolved3) {\n                  const idVal3 =\n                    resolved3.uniqueName ||\n                    resolved3.displayName ||\n                    resolved3.id ||\n                    this.identityName;\n                  if (idVal3) {\n                    bounded = bounded.replace(/@Me\\b/g, `'${this._escapeWIQL(String(idVal3))}'`);\n                  }\n                }\n              } catch {\n                /* ignore */\n              }\n            }\n            logger.warn('Result too large; retrying WIQL with shorter ChangedDate bound', {\n              meta: { days: DAYS, query },\n            });\n            try {\n              wiqlResp = await this.axios.post(wiqlEndpoint, { query: bounded });\n              wiql = bounded;\n            } catch (retryErr: any) {\n              // If retry still fails, throw original error with helpful message\n              if (this._isTooManyResultsError(retryErr)) {\n                throw new Error(\n                  `Query \"${query}\" returns too many work items (>20,000). ` +\n                    `Try filtering by a specific area path, iteration, or work item type to narrow results.`\n                );\n              }\n              throw retryErr;\n            }\n          } else {\n            throw err;\n          }\n        }\n        logger.debug('WIQL response status', { meta: { status: wiqlResp.status } });\n        // Diagnostic: dump a truncated version of the response body to help debug empty results\n        try {\n          const bodySnippet = JSON.stringify(wiqlResp.data).slice(0, 2000);\n          logger.debug('WIQL response body (truncated)', { meta: { bodySnippet } });\n        } catch {\n          /* ignore */\n        }\n\n        let refs = wiqlResp.data?.workItems || [];\n        logger.debug('WIQL reference count', { meta: { count: refs.length } });\n\n        // Apply client-side limiting for queries that might return many results\n        if (needsLimit && refs.length > 100) {\n          refs = refs.slice(0, 100);\n          logger.debug('Applied client-side limit', { meta: { reducedTo: refs.length } });\n        }\n\n        if (refs.length === 0) {\n          // For user-scoped queries, 0 results is legitimate (user might not have assigned items)\n          // Don't fall back to a simple query that would show all work items\n          const isUserScopedQuery = knownUserScopedQueries.includes(normalizedQuery);\n          if (isUserScopedQuery) {\n            // Log detailed diagnostics to help debug why query returned 0 results\n            const hadMeToken = /@Me\\b/i.test(wiql);\n            const meWasReplaced = hadMeToken && wiqlToSend !== wiql;\n            const identityInfo = hadMeToken\n              ? await this._getAuthenticatedIdentity().catch(() => null)\n              : null;\n            logger.debug('User-scoped query returned 0 results', {\n              meta: {\n                query,\n                normalizedQuery,\n                originalWIQL: wiql,\n                sentWIQL: wiqlToSend,\n                hadMeToken,\n                meWasReplaced,\n                usingMeDirectly: hadMeToken && !meWasReplaced,\n                identityInfo: identityInfo\n                  ? {\n                      id: identityInfo.id,\n                      displayName: identityInfo.displayName,\n                      uniqueName: identityInfo.uniqueName,\n                    }\n                  : null,\n                wiqlEndpoint,\n                responseStatus: wiqlResp?.status,\n              },\n            });\n            // Still return empty - 0 results is legitimate for user-scoped queries\n            // But the detailed logging will help diagnose if there's an actual issue\n            return [];\n          }\n\n          logger.debug('No work items matched query. Trying simpler query...');\n\n          // Try a safer, bounded simple query to test authentication and data access\n          // Bound by project, recent activity window, and exclude completed states to avoid server-side 20k limits\n          const simpleWiql = `SELECT [System.Id], [System.Title] FROM WorkItems \n            WHERE [System.TeamProject] = @Project\n            AND [System.ChangedDate] >= @Today - 90\n            AND [System.State] NOT IN ('Closed','Done','Resolved','Removed')\n            ORDER BY [System.ChangedDate] DESC`;\n          const simpleResp = await this.axios.post('/wit/wiql?api-version=7.1', {\n            query: simpleWiql,\n          });\n          // Diagnostic: log simple query response snippet\n          try {\n            const simpleSnippet = JSON.stringify(simpleResp.data).slice(0, 1500);\n            logger.debug('simpleWIQL response body (truncated)', { meta: { simpleSnippet } });\n          } catch {\n            /* ignore */\n          }\n          const simpleRefs = simpleResp.data?.workItems || [];\n          logger.debug('Simple query returned work items', { meta: { count: simpleRefs.length } });\n\n          if (simpleRefs.length === 0) {\n            logger.debug('No work items in project at all.');\n            return [];\n          }\n\n          // Work items exist - fetch and return them instead of returning empty\n          logger.debug('Original query matched nothing, fetching simple query results...');\n\n          // Use simpleRefs instead of refs to fetch the work items (chunked)\n          let simpleIdsArr = simpleRefs\n            .map((w: any) => Number(w.id))\n            .filter((id: any) => Number.isFinite(id)) as number[];\n          if (simpleIdsArr.length === 0) {\n            logger.debug('No valid IDs in simple query results.');\n            return [];\n          }\n\n          if (simpleIdsArr.length > 200) {\n            simpleIdsArr = simpleIdsArr.slice(0, 200);\n            logger.debug('Applied limit to simple query IDs', {\n              meta: { reducedTo: simpleIdsArr.length },\n            });\n          }\n          logger.debug('Expanding simple query IDs (chunked)', {\n            meta: { count: simpleIdsArr.length },\n          });\n          const fallbackItems: WorkItem[] = await this._fetchWorkItemsByIds(simpleIdsArr);\n\n          logger.debug('Returning work items from simple query fallback', {\n            meta: { count: fallbackItems.length },\n          });\n\n          // Cache the fallback result\n          workItemCache.setWorkItems(cacheKey, fallbackItems);\n          return fallbackItems;\n        }\n\n        // Apply a global hard cap to protect expansion and UI even for user-scoped queries\n        if (refs.length > 500) {\n          refs = refs.slice(0, 500);\n          logger.debug('Applied global client-side limit', { meta: { reducedTo: refs.length } });\n        }\n        // Expand IDs using chunked requests to avoid very long URLs (HTTP 414)\n        const idsArray = refs\n          .map((w: any) => Number(w.id))\n          .filter((id: any) => Number.isFinite(id)) as number[];\n        logger.debug('Expanding IDs (chunked)', { meta: { count: idsArray.length } });\n        const items: WorkItem[] = await this._fetchWorkItemsByIds(idsArray);\n\n        logger.debug('Returning mapped work items', { meta: { count: items.length } });\n\n        // Cache the result\n        workItemCache.setWorkItems(cacheKey, items);\n        return items;\n      } catch (err: any) {\n        logger.error('GETWI error', { meta: { error: err?.message || err } });\n\n        // Build detailed error message for users\n        let errorMessage = 'Failed to fetch work items';\n        const status = err?.response?.status;\n\n        if (status === 401 || status === 403) {\n          errorMessage =\n            `Authentication failed (${status}). Please check:\\n` +\n            '\u2022 Your Personal Access Token (PAT) is valid and not expired\\n' +\n            '\u2022 The PAT has \"Work Items (Read)\" permission\\n' +\n            '\u2022 You have access to this project';\n        } else if (status === 404) {\n          // Log 404 details for debugging\n          logger.debug('GETWI 404 Not Found', {\n            meta: {\n              organization: this.organization,\n              project: this.project,\n              authType: this.authType,\n              url: err?.request?.url || err?.config?.url,\n            },\n          });\n\n          // For both PAT and Entra ID, treat 404 as project/access issue, not auth failure\n          // Auth failures should return 401, not 404\n          errorMessage =\n            `Project not found (404). Please verify:\\n` +\n            `\u2022 Organization: \"${this.organization}\"\\n` +\n            `\u2022 Project: \"${this.project}\"\\n` +\n            '\u2022 The project name matches exactly (case-sensitive)';\n        } else if (status === 400) {\n          // 400 Bad Request - likely WIQL syntax or field name issue\n          const apiError = err?.response?.data?.message || err?.response?.data?.value?.Message;\n          if (apiError) {\n            errorMessage = `Invalid query (400): ${apiError}`;\n          } else {\n            errorMessage = `Invalid query (400). The WIQL query may contain unsupported fields or syntax for this project.\\nQuery name: \"${query}\"`;\n          }\n          // Log the actual WIQL that failed for debugging\n          logger.error('WIQL that failed', { meta: { wiql: wiqlToSend || wiql } });\n        } else if (status >= 500) {\n          errorMessage = `Azure DevOps server error (${status}). The service may be temporarily unavailable.`;\n        } else if (err?.code === 'ENOTFOUND' || err?.code === 'ECONNREFUSED') {\n          errorMessage =\n            `Network error: Cannot reach Azure DevOps.\\n` +\n            '\u2022 Check your internet connection\\n' +\n            '\u2022 Verify your base URL is correct\\n' +\n            `\u2022 Current URL: ${this.axios.defaults.baseURL}`;\n        } else if (err?.message) {\n          errorMessage = `${errorMessage}: ${err.message}`;\n        }\n\n        if (err?.response) {\n          logger.error('GETWI HTTP status', { meta: { status } });\n          try {\n            logger.error('GETWI response data', {\n              meta: { data: JSON.stringify(err.response.data).slice(0, 600) },\n            });\n          } catch {\n            /* ignore */\n          }\n        }\n\n        // Re-throw with detailed message instead of silently returning []\n        throw new Error(errorMessage);\n      }\n    });\n  }\n\n  private _isMissingStateCategoryError(err: any) {\n    const status = err?.response?.status;\n    const bodyMessage = String(\n      err?.response?.data?.message || err?.response?.data || err?.message || ''\n    );\n    // Some server versions or languages may return different wording. Test for 'statecategory' anywhere in the message.\n    if (status === 400 && /statecategory/i.test(bodyMessage)) return true;\n    // Also handle server responses where the error mentions an unknown field name without the exact 'System.StateCategory' token\n    if (\n      status === 400 &&\n      /\\bSystem\\.State\\b/i.test(bodyMessage) &&\n      /not found|unknown|does not exist|is not valid/i.test(bodyMessage)\n    )\n      return true;\n    return false;\n  }\n\n  async getWorkItemById(id: number): Promise<WorkItem | null> {\n    try {\n      const resp = await this.axios.get(`/wit/workitems/${id}?$expand=all&api-version=7.1`);\n      return { id: resp.data.id, fields: resp.data.fields } as WorkItem;\n    } catch (err) {\n      logger.error('Error fetching work item by id', { meta: err });\n      return null;\n    }\n  }\n\n  async runWIQL(wiql: string): Promise<WorkItem[]> {\n    try {\n      const wiqlResp = await this.axios.post('/wit/wiql?api-version=7.1', { query: wiql });\n      if (!wiqlResp.data.workItems || wiqlResp.data.workItems.length === 0) return [];\n      const idsArray = wiqlResp.data.workItems\n        .map((w: any) => Number(w.id))\n        .filter((id: any) => Number.isFinite(id)) as number[];\n      const limited = idsArray.length > 500 ? idsArray.slice(0, 500) : idsArray;\n      return await this._fetchWorkItemsByIds(limited);\n    } catch (err) {\n      logger.error('runWIQL failed', { meta: err });\n      return [];\n    }\n  }\n\n  async searchWorkItems(term: string): Promise<WorkItem[]> {\n    if (!term?.trim()) return [];\n    const safe = this._escapeWIQL(term.trim());\n    const wiql = `SELECT [System.Id], [System.Title], [System.State] FROM WorkItems \n                 WHERE [System.Title] CONTAINS '${safe}' OR [System.Id] = '${safe}'\n                 ORDER BY [System.ChangedDate] DESC`;\n    return this.runWIQL(wiql);\n  }\n\n  async filterWorkItems(filter: any): Promise<WorkItem[]> {\n    const base =\n      'SELECT [System.Id], [System.Title], [System.State], [System.WorkItemType], [System.AssignedTo], [System.IterationPath] FROM WorkItems WHERE ';\n    const clauses: string[] = [];\n    if (filter?.sprint && filter.sprint !== 'All') {\n      if (filter.sprint === '@CurrentIteration')\n        clauses.push('[System.IterationPath] UNDER @CurrentIteration');\n      else clauses.push(`[System.IterationPath] = '${this._escapeWIQL(filter.sprint)}'`);\n    }\n    if (filter?.includeState)\n      clauses.push(`[System.State] = '${this._escapeWIQL(filter.includeState)}'`);\n    else if (Array.isArray(filter?.excludeStates) && filter.excludeStates.length) {\n      filter.excludeStates.forEach((st: string) =>\n        clauses.push(`[System.State] <> '${this._escapeWIQL(st)}'`)\n      );\n    }\n    if (filter?.type && filter.type !== 'All')\n      clauses.push(`[System.WorkItemType] = '${this._escapeWIQL(filter.type)}'`);\n    if (filter?.assignedTo === 'Me') clauses.push('[System.AssignedTo] = @Me');\n    else if (filter?.assignedTo === 'Unassigned') clauses.push('[System.AssignedTo] = \"\"');\n    if (clauses.length === 0) clauses.push('[System.State] <> \"Removed\"');\n    const wiql = base + clauses.join(' AND ') + ' ORDER BY [System.ChangedDate] DESC';\n    return this.runWIQL(wiql);\n  }\n\n  async createWorkItem(\n    type: string,\n    title: string,\n    description?: string,\n    assignedTo?: string,\n    extraFields?: Record<string, unknown>\n  ): Promise<WorkItem> {\n    logger.debug('Creating work item', { meta: { type, title: title.substring(0, 50) + '...' } });\n\n    const patch: any[] = [{ op: 'add', path: '/fields/System.Title', value: title }];\n    if (description)\n      patch.push({ op: 'add', path: '/fields/System.Description', value: description });\n    if (assignedTo) patch.push({ op: 'add', path: '/fields/System.AssignedTo', value: assignedTo });\n    if (extraFields && typeof extraFields === 'object') {\n      for (const [field, value] of Object.entries(extraFields)) {\n        if (value === undefined || value === null || value === '') continue;\n        patch.push({ op: 'add', path: `/fields/${field}`, value });\n      }\n    }\n\n    try {\n      const resp = await this.axios.post(`/wit/workitems/$${type}?api-version=7.1`, patch, {\n        headers: { 'Content-Type': 'application/json-patch+json' },\n      });\n\n      logger.info('Work item created successfully', { meta: { workItemId: resp.data.id } });\n      logger.debug('Authentication has work item WRITE permissions');\n      logger.debug('Required permission: vso.work_write (for PAT) or equivalent scope (for OAuth)');\n\n      return { id: resp.data.id, fields: resp.data.fields } as WorkItem;\n    } catch (error: any) {\n      logger.error('Work item creation failed', {\n        meta: { status: error.response?.status, statusText: error.response?.statusText },\n      });\n      if (error.response?.status === 403) {\n        logger.error('Permission denied - authentication lacks work item write permissions');\n        logger.error('Check your PAT scopes or Azure AD permissions');\n      }\n      throw error;\n    }\n  }\n\n  async updateWorkItem(id: number, patchOps: any[]): Promise<WorkItem> {\n    const resp = await this.axios.patch(`/wit/workitems/${id}?api-version=7.1`, patchOps, {\n      headers: { 'Content-Type': 'application/json-patch+json' },\n    });\n    return { id: resp.data.id, fields: resp.data.fields } as WorkItem;\n  }\n\n  async addWorkItemComment(id: number, text: string) {\n    const resp = await this.axios.post(`/wit/workitems/${id}/comments?api-version=7.0-preview.3`, {\n      text,\n    });\n    return resp.data; // comment response shape not forced into WorkItem\n  }\n\n  async addTimeEntry(id: number, hours: number, note?: string) {\n    if (typeof hours !== 'number' || hours <= 0) throw new Error('hours must be positive number');\n    const patch = [\n      { op: 'add', path: '/fields/Microsoft.VSTS.Scheduling.CompletedWork', value: hours },\n    ];\n    await this.updateWorkItem(id, patch);\n    if (note) await this.addWorkItemComment(id, `Time tracked: ${hours} hours. ${note}`);\n  }\n\n  async getWorkItemTypes(): Promise<any[]> {\n    try {\n      const resp = await this.axios.get(`/wit/workitemtypes?api-version=7.1`);\n      return resp.data.value || [];\n    } catch (e) {\n      logger.error('Error fetching work item types', { meta: e });\n      return [];\n    }\n  }\n\n  async getWorkItemTypeStates(workItemType: string): Promise<string[]> {\n    try {\n      const resp = await this.axios.get(\n        `/wit/workitemtypes/${encodeURIComponent(workItemType)}?api-version=7.1`\n      );\n      const states = resp.data.states || [];\n      return states.map((state: any) => state.name || state);\n    } catch (e) {\n      logger.error(`Error fetching states for work item type ${workItemType}`, { meta: e });\n      return [];\n    }\n  }\n\n  async getIterations() {\n    try {\n      const url = this.buildTeamApiUrl('/work/teamsettings/iterations?api-version=7.1');\n      const resp = await this.axios.get(url);\n      return resp.data.value || [];\n    } catch (err) {\n      logger.error('Error fetching iterations', { meta: err });\n      return [];\n    }\n  }\n\n  async getCurrentIteration() {\n    return await measureAsync('getCurrentIteration', async () => {\n      try {\n        // Check cache first\n        const cacheKey = WorkItemCache.generateMetadataKey(\n          `${this.organization}-${this.project}`,\n          `currentIteration-${this.team || 'default'}`\n        );\n\n        const cached = workItemCache.get(cacheKey);\n        if (cached) {\n          return cached;\n        }\n\n        const url = this.buildTeamApiUrl(\n          '/work/teamsettings/iterations?$timeframe=current&api-version=7.1'\n        );\n        const resp = await this.axios.get(url);\n        const result = resp.data.value?.[0] || null;\n\n        // Cache the result\n        workItemCache.setMetadata(cacheKey, result);\n        return result;\n      } catch (err) {\n        logger.error('Error fetching current iteration', { meta: err });\n        return null;\n      }\n    });\n  }\n\n  private _escapeWIQL(value: string) {\n    return String(value).replace(/'/g, \"''\");\n  }\n\n  // ---------------- Git & PR Helpers ----------------\n  async getTeams() {\n    return await measureAsync('getTeams', async () => {\n      try {\n        // Check cache first\n        const cacheKey = WorkItemCache.generateMetadataKey(\n          `${this.organization}-${this.project}`,\n          'teams'\n        );\n\n        const cached = workItemCache.get(cacheKey);\n        if (cached) {\n          return cached;\n        }\n\n        // Call the org-level projects API directly using the configured baseUrl so we target\n        // the correct host regardless of axios.baseURL (which may include project/_apis).\n        const orgTeamsUrl =\n          this.baseUrl.replace(/\\/$/, '') +\n          `/_apis/projects/${this.encodedProject}/teams?api-version=7.1`;\n        // Note: build the absolute URL so axios will call the intended host rather than prefixing baseURL.\n        const resp = await this.axios.get(orgTeamsUrl);\n        const result = resp.data?.value || [];\n\n        // Cache the result\n        workItemCache.setMetadata(cacheKey, result);\n        return result;\n      } catch (e) {\n        logger.error('Error fetching teams', { meta: e });\n        return [];\n      }\n    });\n  }\n  async getRepositories(force = false) {\n    return await measureAsync('getRepositories', async () => {\n      if (this._repoCache && !force) return this._repoCache;\n\n      // Check cache first\n      const cacheKey = WorkItemCache.generateMetadataKey(\n        `${this.organization}-${this.project}`,\n        'repositories'\n      );\n\n      if (!force) {\n        const cached = workItemCache.get(cacheKey);\n        if (cached) {\n          this._repoCache = cached;\n          return cached;\n        }\n      }\n\n      try {\n        const resp = await this.axios.get(`/git/repositories`);\n        this._repoCache = resp.data.value || [];\n\n        // Cache the result\n        workItemCache.setMetadata(cacheKey, this._repoCache);\n        return this._repoCache;\n      } catch (e) {\n        logger.error('Error fetching repositories', { meta: e });\n        return [];\n      }\n    });\n  }\n\n  async getDefaultRepository() {\n    const repos = await this.getRepositories();\n    return Array.isArray(repos) ? repos[0] : undefined;\n  }\n\n  async getPullRequests(repositoryId: string, status: string = 'active') {\n    try {\n      const resp = await this.axios.get(`/git/pullrequests`, {\n        params: { 'searchCriteria.repositoryId': repositoryId, 'searchCriteria.status': status },\n      });\n      const prs = resp.data.value || [];\n      return prs.map((pr: any) => ({\n        id: pr.pullRequestId,\n        title: pr.title,\n        status: pr.status,\n        createdBy: pr.createdBy?.displayName,\n        sourceRefName: pr.sourceRefName,\n        targetRefName: pr.targetRefName,\n        repository: pr.repository?.name,\n        webUrl:\n          pr._links?.web?.href ||\n          this.getBrowserUrl(\n            `/_git/${encodeURIComponent(pr.repository?.name)}/pullrequest/${pr.pullRequestId}`\n          ),\n      }));\n    } catch (e) {\n      logger.error('Error fetching pull requests', { meta: e });\n      return [];\n    }\n  }\n\n  /**\n   * Fetch pull requests across all repositories in the project, filtered by creator or reviewer = current user.\n   * Merges results for authored and reviewing PRs to emulate an OR filter. Duplicates are de-duplicated by PR id.\n   */\n  async getMyPullRequestsAcrossRepos(status: string = 'active') {\n    const me = await this.getAuthenticatedUserId();\n    if (!me) {\n      logger.warn('Could not determine authenticated user id; returning empty PR list');\n      return [] as Array<{\n        id: number;\n        title: string;\n        status: string;\n        createdBy?: string;\n        sourceRefName?: string;\n        targetRefName?: string;\n        repository?: string;\n        webUrl?: string;\n      }>;\n    }\n\n    try {\n      // Query without repositoryId to search across all repos in the project\n      const [authoredResp, reviewingResp] = await Promise.all([\n        this.axios.get(`/git/pullrequests`, {\n          params: { 'searchCriteria.creatorId': me, 'searchCriteria.status': status },\n        }),\n        this.axios.get(`/git/pullrequests`, {\n          params: { 'searchCriteria.reviewerId': me, 'searchCriteria.status': status },\n        }),\n      ]);\n      const authored = authoredResp.data?.value || [];\n      const reviewing = reviewingResp.data?.value || [];\n      const combined = [...authored, ...reviewing];\n      const seen = new Set<number>();\n      const mapped = combined\n        .filter((pr: any) => pr && typeof pr.pullRequestId === 'number')\n        .filter((pr: any) => {\n          if (seen.has(pr.pullRequestId)) return false;\n          seen.add(pr.pullRequestId);\n          return true;\n        })\n        .map((pr: any) => ({\n          id: pr.pullRequestId,\n          title: pr.title,\n          status: pr.status,\n          createdBy: pr.createdBy?.displayName,\n          sourceRefName: pr.sourceRefName,\n          targetRefName: pr.targetRefName,\n          repository: pr.repository?.name,\n          webUrl:\n            pr._links?.web?.href ||\n            this.getBrowserUrl(\n              `/_git/${encodeURIComponent(pr.repository?.name)}/pullrequest/${pr.pullRequestId}`\n            ),\n          createdDate: pr.creationDate,\n        }));\n      // Sort by creation date desc if available\n      mapped.sort((a: any, b: any) => {\n        const at = a.createdDate ? new Date(a.createdDate).getTime() : 0;\n        const bt = b.createdDate ? new Date(b.createdDate).getTime() : 0;\n        return bt - at;\n      });\n      return mapped;\n    } catch (e) {\n      logger.error('Error fetching my pull requests across repos', { meta: e });\n      return [];\n    }\n  }\n\n  async createPullRequest(\n    repositoryId: string,\n    sourceRefName: string,\n    targetRefName: string,\n    title: string,\n    description?: string\n  ) {\n    try {\n      const payload: any = { sourceRefName, targetRefName, title };\n      if (description) payload.description = description;\n      const resp = await this.axios.post(\n        `/git/repositories/${repositoryId}/pullrequests?api-version=7.1`,\n        payload\n      );\n      return resp.data;\n    } catch (e) {\n      logger.error('Error creating pull request', { meta: e });\n      throw e;\n    }\n  }\n\n  // ---------------- Build Helpers ----------------\n  async getRecentBuilds(\n    options: {\n      top?: number;\n      branchName?: string;\n      repositoryId?: string;\n      definitions?: number | number[];\n      resultFilter?: string;\n      statusFilter?: string;\n    } = {}\n  ): Promise<WorkItemBuildSummary[]> {\n    const { top = 10, branchName, repositoryId, definitions, resultFilter, statusFilter } = options;\n\n    try {\n      const params: Record<string, any> = {\n        $top: top,\n        queryOrder: 'finishTimeDescending',\n        'api-version': '7.0',\n      };\n      if (branchName) params.branchName = branchName;\n      if (repositoryId) params.repositoryId = repositoryId;\n      if (definitions !== undefined) {\n        params.definitions = Array.isArray(definitions) ? definitions.join(',') : definitions;\n      }\n      if (resultFilter) params.resultFilter = resultFilter;\n      if (statusFilter) params.statusFilter = statusFilter;\n\n      const resp = await this.axios.get(`/build/builds`, { params });\n      const values = Array.isArray(resp.data?.value) ? resp.data.value : [];\n      return values.map((b: any) => ({\n        id: b.id,\n        buildNumber: b.buildNumber,\n        status: b.status,\n        result: b.result,\n        definition: b.definition?.name,\n        queueTime: b.queueTime,\n        finishTime: b.finishTime,\n        webUrl: b._links?.web?.href,\n      })) as WorkItemBuildSummary[];\n    } catch (e) {\n      logger.error('Error fetching builds', { meta: e });\n      return [];\n    }\n  }\n}\n\n// Backward-compatible alias for extensions / docs still referencing AzureDevOpsClient\n// Deprecated: prefer AzureDevOpsIntClient going forward.\nexport const AzureDevOpsClient = AzureDevOpsIntClient;\nexport default AzureDevOpsIntClient;\n", "/* STAGED FOR DELETION - snapshot preserved in .delete/src.azureClient.js.txt\n   Reason: This file is an ESM re-export stub duplicating TypeScript source (src/azureClient.ts).\n   Action: Convert imports to use extensionless TypeScript resolution or keep a single maintained stub. See ./.delete/README.md for details.\n*/\n\nexport * from './azureClient.ts';\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    AccountCache,\n    IdTokenCache,\n    AccessTokenCache,\n    RefreshTokenCache,\n    AppMetadataCache,\n} from \"@azure/msal-common/node\";\nimport {\n    InMemoryCache,\n    JsonCache,\n    SerializedAccountEntity,\n    SerializedIdTokenEntity,\n    SerializedAccessTokenEntity,\n    SerializedRefreshTokenEntity,\n    SerializedAppMetadataEntity,\n} from \"./SerializerTypes.js\";\n\n/**\n * This class serializes cache entities to be saved into in-memory object types defined internally\n * @internal\n */\nexport class Serializer {\n    /**\n     * serialize the JSON blob\n     * @param data - JSON blob cache\n     */\n    static serializeJSONBlob(data: JsonCache): string {\n        return JSON.stringify(data);\n    }\n\n    /**\n     * Serialize Accounts\n     * @param accCache - cache of accounts\n     */\n    static serializeAccounts(\n        accCache: AccountCache\n    ): Record<string, SerializedAccountEntity> {\n        const accounts: Record<string, SerializedAccountEntity> = {};\n        Object.keys(accCache).map(function (key) {\n            const accountEntity = accCache[key];\n            accounts[key] = {\n                home_account_id: accountEntity.homeAccountId,\n                environment: accountEntity.environment,\n                realm: accountEntity.realm,\n                local_account_id: accountEntity.localAccountId,\n                username: accountEntity.username,\n                authority_type: accountEntity.authorityType,\n                name: accountEntity.name,\n                client_info: accountEntity.clientInfo,\n                last_modification_time: accountEntity.lastModificationTime,\n                last_modification_app: accountEntity.lastModificationApp,\n                tenantProfiles: accountEntity.tenantProfiles?.map(\n                    (tenantProfile) => {\n                        return JSON.stringify(tenantProfile);\n                    }\n                ),\n            };\n        });\n\n        return accounts;\n    }\n\n    /**\n     * Serialize IdTokens\n     * @param idTCache - cache of ID tokens\n     */\n    static serializeIdTokens(\n        idTCache: IdTokenCache\n    ): Record<string, SerializedIdTokenEntity> {\n        const idTokens: Record<string, SerializedIdTokenEntity> = {};\n        Object.keys(idTCache).map(function (key) {\n            const idTEntity = idTCache[key];\n            idTokens[key] = {\n                home_account_id: idTEntity.homeAccountId,\n                environment: idTEntity.environment,\n                credential_type: idTEntity.credentialType,\n                client_id: idTEntity.clientId,\n                secret: idTEntity.secret,\n                realm: idTEntity.realm,\n            };\n        });\n\n        return idTokens;\n    }\n\n    /**\n     * Serializes AccessTokens\n     * @param atCache - cache of access tokens\n     */\n    static serializeAccessTokens(\n        atCache: AccessTokenCache\n    ): Record<string, SerializedAccessTokenEntity> {\n        const accessTokens: Record<string, SerializedAccessTokenEntity> = {};\n        Object.keys(atCache).map(function (key) {\n            const atEntity = atCache[key];\n            accessTokens[key] = {\n                home_account_id: atEntity.homeAccountId,\n                environment: atEntity.environment,\n                credential_type: atEntity.credentialType,\n                client_id: atEntity.clientId,\n                secret: atEntity.secret,\n                realm: atEntity.realm,\n                target: atEntity.target,\n                cached_at: atEntity.cachedAt,\n                expires_on: atEntity.expiresOn,\n                extended_expires_on: atEntity.extendedExpiresOn,\n                refresh_on: atEntity.refreshOn,\n                key_id: atEntity.keyId,\n                token_type: atEntity.tokenType,\n                requestedClaims: atEntity.requestedClaims,\n                requestedClaimsHash: atEntity.requestedClaimsHash,\n                userAssertionHash: atEntity.userAssertionHash,\n            };\n        });\n\n        return accessTokens;\n    }\n\n    /**\n     * Serialize refreshTokens\n     * @param rtCache - cache of refresh tokens\n     */\n    static serializeRefreshTokens(\n        rtCache: RefreshTokenCache\n    ): Record<string, SerializedRefreshTokenEntity> {\n        const refreshTokens: Record<string, SerializedRefreshTokenEntity> = {};\n        Object.keys(rtCache).map(function (key) {\n            const rtEntity = rtCache[key];\n            refreshTokens[key] = {\n                home_account_id: rtEntity.homeAccountId,\n                environment: rtEntity.environment,\n                credential_type: rtEntity.credentialType,\n                client_id: rtEntity.clientId,\n                secret: rtEntity.secret,\n                family_id: rtEntity.familyId,\n                target: rtEntity.target,\n                realm: rtEntity.realm,\n            };\n        });\n\n        return refreshTokens;\n    }\n\n    /**\n     * Serialize amdtCache\n     * @param amdtCache - cache of app metadata\n     */\n    static serializeAppMetadata(\n        amdtCache: AppMetadataCache\n    ): Record<string, SerializedAppMetadataEntity> {\n        const appMetadata: Record<string, SerializedAppMetadataEntity> = {};\n        Object.keys(amdtCache).map(function (key) {\n            const amdtEntity = amdtCache[key];\n            appMetadata[key] = {\n                client_id: amdtEntity.clientId,\n                environment: amdtEntity.environment,\n                family_id: amdtEntity.familyId,\n            };\n        });\n\n        return appMetadata;\n    }\n\n    /**\n     * Serialize the cache\n     * @param inMemCache - itemised cache read from the JSON\n     */\n    static serializeAllCache(inMemCache: InMemoryCache): JsonCache {\n        return {\n            Account: this.serializeAccounts(inMemCache.accounts),\n            IdToken: this.serializeIdTokens(inMemCache.idTokens),\n            AccessToken: this.serializeAccessTokens(inMemCache.accessTokens),\n            RefreshToken: this.serializeRefreshTokens(inMemCache.refreshTokens),\n            AppMetadata: this.serializeAppMetadata(inMemCache.appMetadata),\n        };\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nexport const Constants = {\n    LIBRARY_NAME: \"MSAL.JS\",\n    SKU: \"msal.js.common\",\n    // default authority\n    DEFAULT_AUTHORITY: \"https://login.microsoftonline.com/common/\",\n    DEFAULT_AUTHORITY_HOST: \"login.microsoftonline.com\",\n    DEFAULT_COMMON_TENANT: \"common\",\n    // ADFS String\n    ADFS: \"adfs\",\n    DSTS: \"dstsv2\",\n    // Default AAD Instance Discovery Endpoint\n    AAD_INSTANCE_DISCOVERY_ENDPT:\n        \"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=\",\n    // CIAM URL\n    CIAM_AUTH_URL: \".ciamlogin.com\",\n    AAD_TENANT_DOMAIN_SUFFIX: \".onmicrosoft.com\",\n    // Resource delimiter - used for certain cache entries\n    RESOURCE_DELIM: \"|\",\n    // Placeholder for non-existent account ids/objects\n    NO_ACCOUNT: \"NO_ACCOUNT\",\n    // Claims\n    CLAIMS: \"claims\",\n    // Consumer UTID\n    CONSUMER_UTID: \"9188040d-6c67-4c5b-b112-36a304b66dad\",\n    // Default scopes\n    OPENID_SCOPE: \"openid\",\n    PROFILE_SCOPE: \"profile\",\n    OFFLINE_ACCESS_SCOPE: \"offline_access\",\n    EMAIL_SCOPE: \"email\",\n    CODE_GRANT_TYPE: \"authorization_code\",\n    RT_GRANT_TYPE: \"refresh_token\",\n    S256_CODE_CHALLENGE_METHOD: \"S256\",\n    URL_FORM_CONTENT_TYPE: \"application/x-www-form-urlencoded;charset=utf-8\",\n    AUTHORIZATION_PENDING: \"authorization_pending\",\n    NOT_DEFINED: \"not_defined\",\n    EMPTY_STRING: \"\",\n    NOT_APPLICABLE: \"N/A\",\n    NOT_AVAILABLE: \"Not Available\",\n    FORWARD_SLASH: \"/\",\n    IMDS_ENDPOINT: \"http://169.254.169.254/metadata/instance/compute/location\",\n    IMDS_VERSION: \"2020-06-01\",\n    IMDS_TIMEOUT: 2000,\n    AZURE_REGION_AUTO_DISCOVER_FLAG: \"TryAutoDetect\",\n    REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX: \"login.microsoft.com\",\n    KNOWN_PUBLIC_CLOUDS: [\n        \"login.microsoftonline.com\",\n        \"login.windows.net\",\n        \"login.microsoft.com\",\n        \"sts.windows.net\",\n    ],\n    SHR_NONCE_VALIDITY: 240,\n    INVALID_INSTANCE: \"invalid_instance\",\n};\n\nexport const HttpStatus = {\n    SUCCESS: 200,\n    SUCCESS_RANGE_START: 200,\n    SUCCESS_RANGE_END: 299,\n    REDIRECT: 302,\n    CLIENT_ERROR: 400,\n    CLIENT_ERROR_RANGE_START: 400,\n    BAD_REQUEST: 400,\n    UNAUTHORIZED: 401,\n    NOT_FOUND: 404,\n    REQUEST_TIMEOUT: 408,\n    GONE: 410,\n    TOO_MANY_REQUESTS: 429,\n    CLIENT_ERROR_RANGE_END: 499,\n    SERVER_ERROR: 500,\n    SERVER_ERROR_RANGE_START: 500,\n    SERVICE_UNAVAILABLE: 503,\n    GATEWAY_TIMEOUT: 504,\n    SERVER_ERROR_RANGE_END: 599,\n    MULTI_SIDED_ERROR: 600,\n} as const;\nexport type HttpStatus = (typeof HttpStatus)[keyof typeof HttpStatus];\n\nexport const HttpMethod = {\n    GET: \"GET\",\n    POST: \"POST\",\n} as const;\nexport type HttpMethod = (typeof HttpMethod)[keyof typeof HttpMethod];\n\nexport const OIDC_DEFAULT_SCOPES = [\n    Constants.OPENID_SCOPE,\n    Constants.PROFILE_SCOPE,\n    Constants.OFFLINE_ACCESS_SCOPE,\n];\n\nexport const OIDC_SCOPES = [...OIDC_DEFAULT_SCOPES, Constants.EMAIL_SCOPE];\n\n/**\n * Request header names\n */\nexport const HeaderNames = {\n    CONTENT_TYPE: \"Content-Type\",\n    CONTENT_LENGTH: \"Content-Length\",\n    RETRY_AFTER: \"Retry-After\",\n    CCS_HEADER: \"X-AnchorMailbox\",\n    WWWAuthenticate: \"WWW-Authenticate\",\n    AuthenticationInfo: \"Authentication-Info\",\n    X_MS_REQUEST_ID: \"x-ms-request-id\",\n    X_MS_HTTP_VERSION: \"x-ms-httpver\",\n} as const;\nexport type HeaderNames = (typeof HeaderNames)[keyof typeof HeaderNames];\n\n/**\n * Persistent cache keys MSAL which stay while user is logged in.\n */\nexport const PersistentCacheKeys = {\n    ACTIVE_ACCOUNT_FILTERS: \"active-account-filters\", // new cache entry for active_account for a more robust version for browser\n} as const;\nexport type PersistentCacheKeys =\n    (typeof PersistentCacheKeys)[keyof typeof PersistentCacheKeys];\n\n/**\n * String constants related to AAD Authority\n */\nexport const AADAuthorityConstants = {\n    COMMON: \"common\",\n    ORGANIZATIONS: \"organizations\",\n    CONSUMERS: \"consumers\",\n} as const;\nexport type AADAuthorityConstants =\n    (typeof AADAuthorityConstants)[keyof typeof AADAuthorityConstants];\n\n/**\n * Claims request keys\n */\nexport const ClaimsRequestKeys = {\n    ACCESS_TOKEN: \"access_token\",\n    XMS_CC: \"xms_cc\",\n} as const;\nexport type ClaimsRequestKeys =\n    (typeof ClaimsRequestKeys)[keyof typeof ClaimsRequestKeys];\n\n/**\n * we considered making this \"enum\" in the request instead of string, however it looks like the allowed list of\n * prompt values kept changing over past couple of years. There are some undocumented prompt values for some\n * internal partners too, hence the choice of generic \"string\" type instead of the \"enum\"\n */\nexport const PromptValue = {\n    LOGIN: \"login\",\n    SELECT_ACCOUNT: \"select_account\",\n    CONSENT: \"consent\",\n    NONE: \"none\",\n    CREATE: \"create\",\n    NO_SESSION: \"no_session\",\n};\n\n/**\n * allowed values for codeVerifier\n */\nexport const CodeChallengeMethodValues = {\n    PLAIN: \"plain\",\n    S256: \"S256\",\n};\n\n/**\n * Allowed values for response_type\n */\nexport const OAuthResponseType = {\n    CODE: \"code\",\n    IDTOKEN_TOKEN: \"id_token token\",\n    IDTOKEN_TOKEN_REFRESHTOKEN: \"id_token token refresh_token\",\n} as const;\nexport type OAuthResponseType =\n    (typeof OAuthResponseType)[keyof typeof OAuthResponseType];\n\n/**\n * allowed values for server response type\n * @deprecated Use ResponseMode instead\n */\nexport const ServerResponseType = {\n    QUERY: \"query\",\n    FRAGMENT: \"fragment\",\n} as const;\nexport type ServerResponseType =\n    (typeof ServerResponseType)[keyof typeof ServerResponseType];\n\n/**\n * allowed values for response_mode\n */\nexport const ResponseMode = {\n    QUERY: \"query\",\n    FRAGMENT: \"fragment\",\n    FORM_POST: \"form_post\",\n} as const;\nexport type ResponseMode = (typeof ResponseMode)[keyof typeof ResponseMode];\n\n/**\n * allowed grant_type\n */\nexport const GrantType = {\n    IMPLICIT_GRANT: \"implicit\",\n    AUTHORIZATION_CODE_GRANT: \"authorization_code\",\n    CLIENT_CREDENTIALS_GRANT: \"client_credentials\",\n    RESOURCE_OWNER_PASSWORD_GRANT: \"password\",\n    REFRESH_TOKEN_GRANT: \"refresh_token\",\n    DEVICE_CODE_GRANT: \"device_code\",\n    JWT_BEARER: \"urn:ietf:params:oauth:grant-type:jwt-bearer\",\n} as const;\nexport type GrantType = (typeof GrantType)[keyof typeof GrantType];\n\n/**\n * Account types in Cache\n */\nexport const CacheAccountType = {\n    MSSTS_ACCOUNT_TYPE: \"MSSTS\",\n    ADFS_ACCOUNT_TYPE: \"ADFS\",\n    MSAV1_ACCOUNT_TYPE: \"MSA\",\n    GENERIC_ACCOUNT_TYPE: \"Generic\", // NTLM, Kerberos, FBA, Basic etc\n} as const;\nexport type CacheAccountType =\n    (typeof CacheAccountType)[keyof typeof CacheAccountType];\n\n/**\n * Separators used in cache\n */\nexport const Separators = {\n    CACHE_KEY_SEPARATOR: \"-\",\n    CLIENT_INFO_SEPARATOR: \".\",\n} as const;\nexport type Separators = (typeof Separators)[keyof typeof Separators];\n\n/**\n * Credential Type stored in the cache\n */\nexport const CredentialType = {\n    ID_TOKEN: \"IdToken\",\n    ACCESS_TOKEN: \"AccessToken\",\n    ACCESS_TOKEN_WITH_AUTH_SCHEME: \"AccessToken_With_AuthScheme\",\n    REFRESH_TOKEN: \"RefreshToken\",\n} as const;\nexport type CredentialType =\n    (typeof CredentialType)[keyof typeof CredentialType];\n\n/**\n * Combine all cache types\n */\nexport const CacheType = {\n    ADFS: 1001,\n    MSA: 1002,\n    MSSTS: 1003,\n    GENERIC: 1004,\n    ACCESS_TOKEN: 2001,\n    REFRESH_TOKEN: 2002,\n    ID_TOKEN: 2003,\n    APP_METADATA: 3001,\n    UNDEFINED: 9999,\n} as const;\nexport type CacheType = (typeof CacheType)[keyof typeof CacheType];\n\n/**\n * More Cache related constants\n */\nexport const APP_METADATA = \"appmetadata\";\nexport const CLIENT_INFO = \"client_info\";\nexport const THE_FAMILY_ID = \"1\";\n\nexport const AUTHORITY_METADATA_CONSTANTS = {\n    CACHE_KEY: \"authority-metadata\",\n    REFRESH_TIME_SECONDS: 3600 * 24, // 24 Hours\n};\n\nexport const AuthorityMetadataSource = {\n    CONFIG: \"config\",\n    CACHE: \"cache\",\n    NETWORK: \"network\",\n    HARDCODED_VALUES: \"hardcoded_values\",\n} as const;\nexport type AuthorityMetadataSource =\n    (typeof AuthorityMetadataSource)[keyof typeof AuthorityMetadataSource];\n\nexport const SERVER_TELEM_CONSTANTS = {\n    SCHEMA_VERSION: 5,\n    MAX_CUR_HEADER_BYTES: 80, // ESTS limit is 100B, set to 80 to provide a 20B buffer\n    MAX_LAST_HEADER_BYTES: 330, // ESTS limit is 350B, set to 330 to provide a 20B buffer,\n    MAX_CACHED_ERRORS: 50, // Limit the number of errors that can be stored to prevent uncontrolled size gains\n    CACHE_KEY: \"server-telemetry\",\n    CATEGORY_SEPARATOR: \"|\",\n    VALUE_SEPARATOR: \",\",\n    OVERFLOW_TRUE: \"1\",\n    OVERFLOW_FALSE: \"0\",\n    UNKNOWN_ERROR: \"unknown_error\",\n};\n\n/**\n * Type of the authentication request\n */\nexport const AuthenticationScheme = {\n    BEARER: \"Bearer\",\n    POP: \"pop\",\n    SSH: \"ssh-cert\",\n} as const;\nexport type AuthenticationScheme =\n    (typeof AuthenticationScheme)[keyof typeof AuthenticationScheme];\n\n/**\n * Constants related to throttling\n */\nexport const ThrottlingConstants = {\n    // Default time to throttle RequestThumbprint in seconds\n    DEFAULT_THROTTLE_TIME_SECONDS: 60,\n    // Default maximum time to throttle in seconds, overrides what the server sends back\n    DEFAULT_MAX_THROTTLE_TIME_SECONDS: 3600,\n    // Prefix for storing throttling entries\n    THROTTLING_PREFIX: \"throttling\",\n    // Value assigned to the x-ms-lib-capability header to indicate to the server the library supports throttling\n    X_MS_LIB_CAPABILITY_VALUE: \"retry-after, h429\",\n};\n\nexport const Errors = {\n    INVALID_GRANT_ERROR: \"invalid_grant\",\n    CLIENT_MISMATCH_ERROR: \"client_mismatch\",\n};\n\n/**\n * Password grant parameters\n */\nexport const PasswordGrantConstants = {\n    username: \"username\",\n    password: \"password\",\n} as const;\nexport type PasswordGrantConstants =\n    (typeof PasswordGrantConstants)[keyof typeof PasswordGrantConstants];\n\n/**\n * Region Discovery Sources\n */\nexport const RegionDiscoverySources = {\n    FAILED_AUTO_DETECTION: \"1\",\n    INTERNAL_CACHE: \"2\",\n    ENVIRONMENT_VARIABLE: \"3\",\n    IMDS: \"4\",\n} as const;\nexport type RegionDiscoverySources =\n    (typeof RegionDiscoverySources)[keyof typeof RegionDiscoverySources];\n\n/**\n * Region Discovery Outcomes\n */\nexport const RegionDiscoveryOutcomes = {\n    CONFIGURED_MATCHES_DETECTED: \"1\",\n    CONFIGURED_NO_AUTO_DETECTION: \"2\",\n    CONFIGURED_NOT_DETECTED: \"3\",\n    AUTO_DETECTION_REQUESTED_SUCCESSFUL: \"4\",\n    AUTO_DETECTION_REQUESTED_FAILED: \"5\",\n} as const;\nexport type RegionDiscoveryOutcomes =\n    (typeof RegionDiscoveryOutcomes)[keyof typeof RegionDiscoveryOutcomes];\n\n/**\n * Specifies the reason for fetching the access token from the identity provider\n */\nexport const CacheOutcome = {\n    // When a token is found in the cache or the cache is not supposed to be hit when making the request\n    NOT_APPLICABLE: \"0\",\n    // When the token request goes to the identity provider because force_refresh was set to true. Also occurs if claims were requested\n    FORCE_REFRESH_OR_CLAIMS: \"1\",\n    // When the token request goes to the identity provider because no cached access token exists\n    NO_CACHED_ACCESS_TOKEN: \"2\",\n    // When the token request goes to the identity provider because cached access token expired\n    CACHED_ACCESS_TOKEN_EXPIRED: \"3\",\n    // When the token request goes to the identity provider because refresh_in was used and the existing token needs to be refreshed\n    PROACTIVELY_REFRESHED: \"4\",\n} as const;\nexport type CacheOutcome = (typeof CacheOutcome)[keyof typeof CacheOutcome];\n\nexport const JsonWebTokenTypes = {\n    Jwt: \"JWT\",\n    Jwk: \"JWK\",\n    Pop: \"pop\",\n} as const;\nexport type JsonWebTokenTypes =\n    (typeof JsonWebTokenTypes)[keyof typeof JsonWebTokenTypes];\n\nexport const ONE_DAY_IN_MS = 86400000;\n\n// Token renewal offset default in seconds\nexport const DEFAULT_TOKEN_RENEWAL_OFFSET_SEC = 300;\n\nexport const EncodingTypes = {\n    BASE64: \"base64\",\n    HEX: \"hex\",\n    UTF8: \"utf-8\",\n} as const;\nexport type EncodingTypes = (typeof EncodingTypes)[keyof typeof EncodingTypes];\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\n/**\n * AuthErrorMessage class containing string constants used by error codes and messages.\n */\nexport const unexpectedError = \"unexpected_error\";\nexport const postRequestFailed = \"post_request_failed\";\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { Constants } from \"../utils/Constants.js\";\nimport * as AuthErrorCodes from \"./AuthErrorCodes.js\";\nimport type { PlatformBrokerError } from \"./PlatformBrokerError.js\";\nexport { AuthErrorCodes };\n\nexport const AuthErrorMessages = {\n    [AuthErrorCodes.unexpectedError]: \"Unexpected error in authentication.\",\n    [AuthErrorCodes.postRequestFailed]:\n        \"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details.\",\n};\n\n/**\n * AuthErrorMessage class containing string constants used by error codes and messages.\n * @deprecated Use AuthErrorCodes instead\n */\nexport const AuthErrorMessage = {\n    unexpectedError: {\n        code: AuthErrorCodes.unexpectedError,\n        desc: AuthErrorMessages[AuthErrorCodes.unexpectedError],\n    },\n    postRequestFailed: {\n        code: AuthErrorCodes.postRequestFailed,\n        desc: AuthErrorMessages[AuthErrorCodes.postRequestFailed],\n    },\n};\n\n/**\n * General error class thrown by the MSAL.js library.\n */\nexport class AuthError extends Error {\n    /**\n     * Short string denoting error\n     */\n    errorCode: string;\n\n    /**\n     * Detailed description of error\n     */\n    errorMessage: string;\n\n    /**\n     * Describes the subclass of an error\n     */\n    subError: string;\n\n    /**\n     * CorrelationId associated with the error\n     */\n    correlationId: string;\n\n    /**\n     * Default PlatformBrokerError from MsalNodeRuntime when broker is enabled\n     */\n    platformBrokerError?: PlatformBrokerError;\n\n    constructor(errorCode?: string, errorMessage?: string, suberror?: string) {\n        const errorString = errorMessage\n            ? `${errorCode}: ${errorMessage}`\n            : errorCode;\n        super(errorString);\n        Object.setPrototypeOf(this, AuthError.prototype);\n\n        this.errorCode = errorCode || Constants.EMPTY_STRING;\n        this.errorMessage = errorMessage || Constants.EMPTY_STRING;\n        this.subError = suberror || Constants.EMPTY_STRING;\n        this.name = \"AuthError\";\n    }\n\n    setCorrelationId(correlationId: string): void {\n        this.correlationId = correlationId;\n    }\n}\n\nexport function createAuthError(\n    code: string,\n    additionalMessage?: string\n): AuthError {\n    return new AuthError(\n        code,\n        additionalMessage\n            ? `${AuthErrorMessages[code]} ${additionalMessage}`\n            : AuthErrorMessages[code]\n    );\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nexport const clientInfoDecodingError = \"client_info_decoding_error\";\nexport const clientInfoEmptyError = \"client_info_empty_error\";\nexport const tokenParsingError = \"token_parsing_error\";\nexport const nullOrEmptyToken = \"null_or_empty_token\";\nexport const endpointResolutionError = \"endpoints_resolution_error\";\nexport const networkError = \"network_error\";\nexport const openIdConfigError = \"openid_config_error\";\nexport const hashNotDeserialized = \"hash_not_deserialized\";\nexport const invalidState = \"invalid_state\";\nexport const stateMismatch = \"state_mismatch\";\nexport const stateNotFound = \"state_not_found\";\nexport const nonceMismatch = \"nonce_mismatch\";\nexport const authTimeNotFound = \"auth_time_not_found\";\nexport const maxAgeTranspired = \"max_age_transpired\";\nexport const multipleMatchingTokens = \"multiple_matching_tokens\";\nexport const multipleMatchingAccounts = \"multiple_matching_accounts\";\nexport const multipleMatchingAppMetadata = \"multiple_matching_appMetadata\";\nexport const requestCannotBeMade = \"request_cannot_be_made\";\nexport const cannotRemoveEmptyScope = \"cannot_remove_empty_scope\";\nexport const cannotAppendScopeSet = \"cannot_append_scopeset\";\nexport const emptyInputScopeSet = \"empty_input_scopeset\";\nexport const deviceCodePollingCancelled = \"device_code_polling_cancelled\";\nexport const deviceCodeExpired = \"device_code_expired\";\nexport const deviceCodeUnknownError = \"device_code_unknown_error\";\nexport const noAccountInSilentRequest = \"no_account_in_silent_request\";\nexport const invalidCacheRecord = \"invalid_cache_record\";\nexport const invalidCacheEnvironment = \"invalid_cache_environment\";\nexport const noAccountFound = \"no_account_found\";\nexport const noCryptoObject = \"no_crypto_object\";\nexport const unexpectedCredentialType = \"unexpected_credential_type\";\nexport const invalidAssertion = \"invalid_assertion\";\nexport const invalidClientCredential = \"invalid_client_credential\";\nexport const tokenRefreshRequired = \"token_refresh_required\";\nexport const userTimeoutReached = \"user_timeout_reached\";\nexport const tokenClaimsCnfRequiredForSignedJwt =\n    \"token_claims_cnf_required_for_signedjwt\";\nexport const authorizationCodeMissingFromServerResponse =\n    \"authorization_code_missing_from_server_response\";\nexport const bindingKeyNotRemoved = \"binding_key_not_removed\";\nexport const endSessionEndpointNotSupported =\n    \"end_session_endpoint_not_supported\";\nexport const keyIdMissing = \"key_id_missing\";\nexport const noNetworkConnectivity = \"no_network_connectivity\";\nexport const userCanceled = \"user_canceled\";\nexport const missingTenantIdError = \"missing_tenant_id_error\";\nexport const methodNotImplemented = \"method_not_implemented\";\nexport const nestedAppAuthBridgeDisabled = \"nested_app_auth_bridge_disabled\";\nexport const platformBrokerError = \"platform_broker_error\";\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { AuthError } from \"./AuthError.js\";\nimport * as ClientAuthErrorCodes from \"./ClientAuthErrorCodes.js\";\nexport { ClientAuthErrorCodes }; // Allow importing as \"ClientAuthErrorCodes\";\n\n/**\n * ClientAuthErrorMessage class containing string constants used by error codes and messages.\n */\n\nexport const ClientAuthErrorMessages = {\n    [ClientAuthErrorCodes.clientInfoDecodingError]:\n        \"The client info could not be parsed/decoded correctly\",\n    [ClientAuthErrorCodes.clientInfoEmptyError]: \"The client info was empty\",\n    [ClientAuthErrorCodes.tokenParsingError]: \"Token cannot be parsed\",\n    [ClientAuthErrorCodes.nullOrEmptyToken]: \"The token is null or empty\",\n    [ClientAuthErrorCodes.endpointResolutionError]:\n        \"Endpoints cannot be resolved\",\n    [ClientAuthErrorCodes.networkError]: \"Network request failed\",\n    [ClientAuthErrorCodes.openIdConfigError]:\n        \"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.\",\n    [ClientAuthErrorCodes.hashNotDeserialized]:\n        \"The hash parameters could not be deserialized\",\n    [ClientAuthErrorCodes.invalidState]: \"State was not the expected format\",\n    [ClientAuthErrorCodes.stateMismatch]: \"State mismatch error\",\n    [ClientAuthErrorCodes.stateNotFound]: \"State not found\",\n    [ClientAuthErrorCodes.nonceMismatch]: \"Nonce mismatch error\",\n    [ClientAuthErrorCodes.authTimeNotFound]:\n        \"Max Age was requested and the ID token is missing the auth_time variable.\" +\n        \" auth_time is an optional claim and is not enabled by default - it must be enabled.\" +\n        \" See https://aka.ms/msaljs/optional-claims for more information.\",\n    [ClientAuthErrorCodes.maxAgeTranspired]:\n        \"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.\",\n    [ClientAuthErrorCodes.multipleMatchingTokens]:\n        \"The cache contains multiple tokens satisfying the requirements. \" +\n        \"Call AcquireToken again providing more requirements such as authority or account.\",\n    [ClientAuthErrorCodes.multipleMatchingAccounts]:\n        \"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account\",\n    [ClientAuthErrorCodes.multipleMatchingAppMetadata]:\n        \"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata\",\n    [ClientAuthErrorCodes.requestCannotBeMade]:\n        \"Token request cannot be made without authorization code or refresh token.\",\n    [ClientAuthErrorCodes.cannotRemoveEmptyScope]:\n        \"Cannot remove null or empty scope from ScopeSet\",\n    [ClientAuthErrorCodes.cannotAppendScopeSet]: \"Cannot append ScopeSet\",\n    [ClientAuthErrorCodes.emptyInputScopeSet]:\n        \"Empty input ScopeSet cannot be processed\",\n    [ClientAuthErrorCodes.deviceCodePollingCancelled]:\n        \"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.\",\n    [ClientAuthErrorCodes.deviceCodeExpired]: \"Device code is expired.\",\n    [ClientAuthErrorCodes.deviceCodeUnknownError]:\n        \"Device code stopped polling for unknown reasons.\",\n    [ClientAuthErrorCodes.noAccountInSilentRequest]:\n        \"Please pass an account object, silent flow is not supported without account information\",\n    [ClientAuthErrorCodes.invalidCacheRecord]:\n        \"Cache record object was null or undefined.\",\n    [ClientAuthErrorCodes.invalidCacheEnvironment]:\n        \"Invalid environment when attempting to create cache entry\",\n    [ClientAuthErrorCodes.noAccountFound]:\n        \"No account found in cache for given key.\",\n    [ClientAuthErrorCodes.noCryptoObject]: \"No crypto object detected.\",\n    [ClientAuthErrorCodes.unexpectedCredentialType]:\n        \"Unexpected credential type.\",\n    [ClientAuthErrorCodes.invalidAssertion]:\n        \"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515\",\n    [ClientAuthErrorCodes.invalidClientCredential]:\n        \"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential\",\n    [ClientAuthErrorCodes.tokenRefreshRequired]:\n        \"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.\",\n    [ClientAuthErrorCodes.userTimeoutReached]:\n        \"User defined timeout for device code polling reached\",\n    [ClientAuthErrorCodes.tokenClaimsCnfRequiredForSignedJwt]:\n        \"Cannot generate a POP jwt if the token_claims are not populated\",\n    [ClientAuthErrorCodes.authorizationCodeMissingFromServerResponse]:\n        \"Server response does not contain an authorization code to proceed\",\n    [ClientAuthErrorCodes.bindingKeyNotRemoved]:\n        \"Could not remove the credential's binding key from storage.\",\n    [ClientAuthErrorCodes.endSessionEndpointNotSupported]:\n        \"The provided authority does not support logout\",\n    [ClientAuthErrorCodes.keyIdMissing]:\n        \"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.\",\n    [ClientAuthErrorCodes.noNetworkConnectivity]:\n        \"No network connectivity. Check your internet connection.\",\n    [ClientAuthErrorCodes.userCanceled]: \"User cancelled the flow.\",\n    [ClientAuthErrorCodes.missingTenantIdError]:\n        \"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.\",\n    [ClientAuthErrorCodes.methodNotImplemented]:\n        \"This method has not been implemented\",\n    [ClientAuthErrorCodes.nestedAppAuthBridgeDisabled]:\n        \"The nested app auth bridge is disabled\",\n    [ClientAuthErrorCodes.platformBrokerError]:\n        \"An error occurred in the native broker. See the platformBrokerError property for details.\",\n};\n\n/**\n * String constants used by error codes and messages.\n * @deprecated Use ClientAuthErrorCodes instead\n */\nexport const ClientAuthErrorMessage = {\n    clientInfoDecodingError: {\n        code: ClientAuthErrorCodes.clientInfoDecodingError,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.clientInfoDecodingError\n        ],\n    },\n    clientInfoEmptyError: {\n        code: ClientAuthErrorCodes.clientInfoEmptyError,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.clientInfoEmptyError\n        ],\n    },\n    tokenParsingError: {\n        code: ClientAuthErrorCodes.tokenParsingError,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.tokenParsingError],\n    },\n    nullOrEmptyToken: {\n        code: ClientAuthErrorCodes.nullOrEmptyToken,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.nullOrEmptyToken],\n    },\n    endpointResolutionError: {\n        code: ClientAuthErrorCodes.endpointResolutionError,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.endpointResolutionError\n        ],\n    },\n    networkError: {\n        code: ClientAuthErrorCodes.networkError,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.networkError],\n    },\n    unableToGetOpenidConfigError: {\n        code: ClientAuthErrorCodes.openIdConfigError,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.openIdConfigError],\n    },\n    hashNotDeserialized: {\n        code: ClientAuthErrorCodes.hashNotDeserialized,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.hashNotDeserialized],\n    },\n    invalidStateError: {\n        code: ClientAuthErrorCodes.invalidState,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.invalidState],\n    },\n    stateMismatchError: {\n        code: ClientAuthErrorCodes.stateMismatch,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.stateMismatch],\n    },\n    stateNotFoundError: {\n        code: ClientAuthErrorCodes.stateNotFound,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.stateNotFound],\n    },\n    nonceMismatchError: {\n        code: ClientAuthErrorCodes.nonceMismatch,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.nonceMismatch],\n    },\n    authTimeNotFoundError: {\n        code: ClientAuthErrorCodes.authTimeNotFound,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.authTimeNotFound],\n    },\n    maxAgeTranspired: {\n        code: ClientAuthErrorCodes.maxAgeTranspired,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.maxAgeTranspired],\n    },\n    multipleMatchingTokens: {\n        code: ClientAuthErrorCodes.multipleMatchingTokens,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.multipleMatchingTokens\n        ],\n    },\n    multipleMatchingAccounts: {\n        code: ClientAuthErrorCodes.multipleMatchingAccounts,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.multipleMatchingAccounts\n        ],\n    },\n    multipleMatchingAppMetadata: {\n        code: ClientAuthErrorCodes.multipleMatchingAppMetadata,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.multipleMatchingAppMetadata\n        ],\n    },\n    tokenRequestCannotBeMade: {\n        code: ClientAuthErrorCodes.requestCannotBeMade,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.requestCannotBeMade],\n    },\n    removeEmptyScopeError: {\n        code: ClientAuthErrorCodes.cannotRemoveEmptyScope,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.cannotRemoveEmptyScope\n        ],\n    },\n    appendScopeSetError: {\n        code: ClientAuthErrorCodes.cannotAppendScopeSet,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.cannotAppendScopeSet\n        ],\n    },\n    emptyInputScopeSetError: {\n        code: ClientAuthErrorCodes.emptyInputScopeSet,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.emptyInputScopeSet],\n    },\n    DeviceCodePollingCancelled: {\n        code: ClientAuthErrorCodes.deviceCodePollingCancelled,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.deviceCodePollingCancelled\n        ],\n    },\n    DeviceCodeExpired: {\n        code: ClientAuthErrorCodes.deviceCodeExpired,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.deviceCodeExpired],\n    },\n    DeviceCodeUnknownError: {\n        code: ClientAuthErrorCodes.deviceCodeUnknownError,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.deviceCodeUnknownError\n        ],\n    },\n    NoAccountInSilentRequest: {\n        code: ClientAuthErrorCodes.noAccountInSilentRequest,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.noAccountInSilentRequest\n        ],\n    },\n    invalidCacheRecord: {\n        code: ClientAuthErrorCodes.invalidCacheRecord,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.invalidCacheRecord],\n    },\n    invalidCacheEnvironment: {\n        code: ClientAuthErrorCodes.invalidCacheEnvironment,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.invalidCacheEnvironment\n        ],\n    },\n    noAccountFound: {\n        code: ClientAuthErrorCodes.noAccountFound,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.noAccountFound],\n    },\n    noCryptoObj: {\n        code: ClientAuthErrorCodes.noCryptoObject,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.noCryptoObject],\n    },\n    unexpectedCredentialType: {\n        code: ClientAuthErrorCodes.unexpectedCredentialType,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.unexpectedCredentialType\n        ],\n    },\n    invalidAssertion: {\n        code: ClientAuthErrorCodes.invalidAssertion,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.invalidAssertion],\n    },\n    invalidClientCredential: {\n        code: ClientAuthErrorCodes.invalidClientCredential,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.invalidClientCredential\n        ],\n    },\n    tokenRefreshRequired: {\n        code: ClientAuthErrorCodes.tokenRefreshRequired,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.tokenRefreshRequired\n        ],\n    },\n    userTimeoutReached: {\n        code: ClientAuthErrorCodes.userTimeoutReached,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.userTimeoutReached],\n    },\n    tokenClaimsRequired: {\n        code: ClientAuthErrorCodes.tokenClaimsCnfRequiredForSignedJwt,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.tokenClaimsCnfRequiredForSignedJwt\n        ],\n    },\n    noAuthorizationCodeFromServer: {\n        code: ClientAuthErrorCodes.authorizationCodeMissingFromServerResponse,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.authorizationCodeMissingFromServerResponse\n        ],\n    },\n    bindingKeyNotRemovedError: {\n        code: ClientAuthErrorCodes.bindingKeyNotRemoved,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.bindingKeyNotRemoved\n        ],\n    },\n    logoutNotSupported: {\n        code: ClientAuthErrorCodes.endSessionEndpointNotSupported,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.endSessionEndpointNotSupported\n        ],\n    },\n    keyIdMissing: {\n        code: ClientAuthErrorCodes.keyIdMissing,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.keyIdMissing],\n    },\n    noNetworkConnectivity: {\n        code: ClientAuthErrorCodes.noNetworkConnectivity,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.noNetworkConnectivity\n        ],\n    },\n    userCanceledError: {\n        code: ClientAuthErrorCodes.userCanceled,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.userCanceled],\n    },\n    missingTenantIdError: {\n        code: ClientAuthErrorCodes.missingTenantIdError,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.missingTenantIdError\n        ],\n    },\n    nestedAppAuthBridgeDisabled: {\n        code: ClientAuthErrorCodes.nestedAppAuthBridgeDisabled,\n        desc: ClientAuthErrorMessages[\n            ClientAuthErrorCodes.nestedAppAuthBridgeDisabled\n        ],\n    },\n    platformBrokerError: {\n        code: ClientAuthErrorCodes.platformBrokerError,\n        desc: ClientAuthErrorMessages[ClientAuthErrorCodes.platformBrokerError],\n    },\n};\n\n/**\n * Error thrown when there is an error in the client code running on the browser.\n */\nexport class ClientAuthError extends AuthError {\n    constructor(errorCode: string, additionalMessage?: string) {\n        super(\n            errorCode,\n            additionalMessage\n                ? `${ClientAuthErrorMessages[errorCode]}: ${additionalMessage}`\n                : ClientAuthErrorMessages[errorCode]\n        );\n        this.name = \"ClientAuthError\";\n\n        Object.setPrototypeOf(this, ClientAuthError.prototype);\n    }\n}\n\nexport function createClientAuthError(\n    errorCode: string,\n    additionalMessage?: string\n): ClientAuthError {\n    return new ClientAuthError(errorCode, additionalMessage);\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    ClientAuthErrorCodes,\n    createClientAuthError,\n} from \"../error/ClientAuthError.js\";\nimport type { BaseAuthRequest } from \"../request/BaseAuthRequest.js\";\nimport type { ShrOptions, SignedHttpRequest } from \"./SignedHttpRequest.js\";\n\n/**\n * The PkceCodes type describes the structure\n * of objects that contain PKCE code\n * challenge and verifier pairs\n */\nexport type PkceCodes = {\n    verifier: string;\n    challenge: string;\n};\n\nexport type SignedHttpRequestParameters = Pick<\n    BaseAuthRequest,\n    | \"resourceRequestMethod\"\n    | \"resourceRequestUri\"\n    | \"shrClaims\"\n    | \"shrNonce\"\n    | \"shrOptions\"\n> & {\n    correlationId?: string;\n};\n\n/**\n * Interface for crypto functions used by library\n */\nexport interface ICrypto {\n    /**\n     * Creates a guid randomly.\n     */\n    createNewGuid(): string;\n    /**\n     * base64 Encode string\n     * @param input\n     */\n    base64Encode(input: string): string;\n    /**\n     * base64 decode string\n     * @param input\n     */\n    base64Decode(input: string): string;\n    /**\n     * base64 URL safe encoded string\n     */\n    base64UrlEncode(input: string): string;\n    /**\n     * Stringifies and base64Url encodes input public key\n     * @param inputKid\n     * @returns Base64Url encoded public key\n     */\n    encodeKid(inputKid: string): string;\n    /**\n     * Generates an JWK RSA S256 Thumbprint\n     * @param request\n     */\n    getPublicKeyThumbprint(\n        request: SignedHttpRequestParameters\n    ): Promise<string>;\n    /**\n     * Removes cryptographic keypair from key store matching the keyId passed in\n     * @param kid\n     */\n    removeTokenBindingKey(kid: string): Promise<void>;\n    /**\n     * Removes all cryptographic keys from IndexedDB storage\n     */\n    clearKeystore(): Promise<boolean>;\n    /**\n     * Returns a signed proof-of-possession token with a given acces token that contains a cnf claim with the required kid.\n     * @param accessToken\n     */\n    signJwt(\n        payload: SignedHttpRequest,\n        kid: string,\n        shrOptions?: ShrOptions,\n        correlationId?: string\n    ): Promise<string>;\n    /**\n     * Returns the SHA-256 hash of an input string\n     * @param plainText\n     */\n    hashString(plainText: string): Promise<string>;\n}\n\nexport const DEFAULT_CRYPTO_IMPLEMENTATION: ICrypto = {\n    createNewGuid: (): string => {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    },\n    base64Decode: (): string => {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    },\n    base64Encode: (): string => {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    },\n    base64UrlEncode: (): string => {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    },\n    encodeKid: (): string => {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    },\n    async getPublicKeyThumbprint(): Promise<string> {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    },\n    async removeTokenBindingKey(): Promise<void> {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    },\n    async clearKeystore(): Promise<boolean> {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    },\n    async signJwt(): Promise<string> {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    },\n    async hashString(): Promise<string> {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    },\n};\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport type { LoggerOptions } from \"../config/ClientConfiguration.js\";\nimport { Constants } from \"../utils/Constants.js\";\n\n/**\n * Options for logger messages.\n */\nexport type LoggerMessageOptions = {\n    logLevel: LogLevel;\n    containsPii?: boolean;\n    context?: string;\n    correlationId?: string;\n};\n\n/**\n * Log message level.\n */\nexport enum LogLevel {\n    Error,\n    Warning,\n    Info,\n    Verbose,\n    Trace,\n}\n\n/**\n * Callback to send the messages to.\n */\nexport interface ILoggerCallback {\n    (level: LogLevel, message: string, containsPii: boolean): void;\n}\n\n/**\n * Class which facilitates logging of messages to a specific place.\n */\nexport class Logger {\n    // Correlation ID for request, usually set by user.\n    private correlationId: string;\n\n    // Current log level, defaults to info.\n    private level: LogLevel = LogLevel.Info;\n\n    // Boolean describing whether PII logging is allowed.\n    private piiLoggingEnabled: boolean;\n\n    // Callback to send messages to.\n    private localCallback: ILoggerCallback;\n\n    // Package name implementing this logger\n    private packageName: string;\n\n    // Package version implementing this logger\n    private packageVersion: string;\n\n    constructor(\n        loggerOptions: LoggerOptions,\n        packageName?: string,\n        packageVersion?: string\n    ) {\n        const defaultLoggerCallback = () => {\n            return;\n        };\n        const setLoggerOptions =\n            loggerOptions || Logger.createDefaultLoggerOptions();\n        this.localCallback =\n            setLoggerOptions.loggerCallback || defaultLoggerCallback;\n        this.piiLoggingEnabled = setLoggerOptions.piiLoggingEnabled || false;\n        this.level =\n            typeof setLoggerOptions.logLevel === \"number\"\n                ? setLoggerOptions.logLevel\n                : LogLevel.Info;\n        this.correlationId =\n            setLoggerOptions.correlationId || Constants.EMPTY_STRING;\n        this.packageName = packageName || Constants.EMPTY_STRING;\n        this.packageVersion = packageVersion || Constants.EMPTY_STRING;\n    }\n\n    private static createDefaultLoggerOptions(): LoggerOptions {\n        return {\n            loggerCallback: () => {\n                // allow users to not set loggerCallback\n            },\n            piiLoggingEnabled: false,\n            logLevel: LogLevel.Info,\n        };\n    }\n\n    /**\n     * Create new Logger with existing configurations.\n     */\n    public clone(\n        packageName: string,\n        packageVersion: string,\n        correlationId?: string\n    ): Logger {\n        return new Logger(\n            {\n                loggerCallback: this.localCallback,\n                piiLoggingEnabled: this.piiLoggingEnabled,\n                logLevel: this.level,\n                correlationId: correlationId || this.correlationId,\n            },\n            packageName,\n            packageVersion\n        );\n    }\n\n    /**\n     * Log message with required options.\n     */\n    private logMessage(\n        logMessage: string,\n        options: LoggerMessageOptions\n    ): void {\n        if (\n            options.logLevel > this.level ||\n            (!this.piiLoggingEnabled && options.containsPii)\n        ) {\n            return;\n        }\n        const timestamp = new Date().toUTCString();\n\n        // Add correlationId to logs if set, correlationId provided on log messages take precedence\n        const logHeader = `[${timestamp}] : [${\n            options.correlationId || this.correlationId || \"\"\n        }]`;\n\n        const log = `${logHeader} : ${this.packageName}@${\n            this.packageVersion\n        } : ${LogLevel[options.logLevel]} - ${logMessage}`;\n        // debug(`msal:${LogLevel[options.logLevel]}${options.containsPii ? \"-Pii\": Constants.EMPTY_STRING}${options.context ? `:${options.context}` : Constants.EMPTY_STRING}`)(logMessage);\n        this.executeCallback(\n            options.logLevel,\n            log,\n            options.containsPii || false\n        );\n    }\n\n    /**\n     * Execute callback with message.\n     */\n    executeCallback(\n        level: LogLevel,\n        message: string,\n        containsPii: boolean\n    ): void {\n        if (this.localCallback) {\n            this.localCallback(level, message, containsPii);\n        }\n    }\n\n    /**\n     * Logs error messages.\n     */\n    error(message: string, correlationId?: string): void {\n        this.logMessage(message, {\n            logLevel: LogLevel.Error,\n            containsPii: false,\n            correlationId: correlationId || Constants.EMPTY_STRING,\n        });\n    }\n\n    /**\n     * Logs error messages with PII.\n     */\n    errorPii(message: string, correlationId?: string): void {\n        this.logMessage(message, {\n            logLevel: LogLevel.Error,\n            containsPii: true,\n            correlationId: correlationId || Constants.EMPTY_STRING,\n        });\n    }\n\n    /**\n     * Logs warning messages.\n     */\n    warning(message: string, correlationId?: string): void {\n        this.logMessage(message, {\n            logLevel: LogLevel.Warning,\n            containsPii: false,\n            correlationId: correlationId || Constants.EMPTY_STRING,\n        });\n    }\n\n    /**\n     * Logs warning messages with PII.\n     */\n    warningPii(message: string, correlationId?: string): void {\n        this.logMessage(message, {\n            logLevel: LogLevel.Warning,\n            containsPii: true,\n            correlationId: correlationId || Constants.EMPTY_STRING,\n        });\n    }\n\n    /**\n     * Logs info messages.\n     */\n    info(message: string, correlationId?: string): void {\n        this.logMessage(message, {\n            logLevel: LogLevel.Info,\n            containsPii: false,\n            correlationId: correlationId || Constants.EMPTY_STRING,\n        });\n    }\n\n    /**\n     * Logs info messages with PII.\n     */\n    infoPii(message: string, correlationId?: string): void {\n        this.logMessage(message, {\n            logLevel: LogLevel.Info,\n            containsPii: true,\n            correlationId: correlationId || Constants.EMPTY_STRING,\n        });\n    }\n\n    /**\n     * Logs verbose messages.\n     */\n    verbose(message: string, correlationId?: string): void {\n        this.logMessage(message, {\n            logLevel: LogLevel.Verbose,\n            containsPii: false,\n            correlationId: correlationId || Constants.EMPTY_STRING,\n        });\n    }\n\n    /**\n     * Logs verbose messages with PII.\n     */\n    verbosePii(message: string, correlationId?: string): void {\n        this.logMessage(message, {\n            logLevel: LogLevel.Verbose,\n            containsPii: true,\n            correlationId: correlationId || Constants.EMPTY_STRING,\n        });\n    }\n\n    /**\n     * Logs trace messages.\n     */\n    trace(message: string, correlationId?: string): void {\n        this.logMessage(message, {\n            logLevel: LogLevel.Trace,\n            containsPii: false,\n            correlationId: correlationId || Constants.EMPTY_STRING,\n        });\n    }\n\n    /**\n     * Logs trace messages with PII.\n     */\n    tracePii(message: string, correlationId?: string): void {\n        this.logMessage(message, {\n            logLevel: LogLevel.Trace,\n            containsPii: true,\n            correlationId: correlationId || Constants.EMPTY_STRING,\n        });\n    }\n\n    /**\n     * Returns whether PII Logging is enabled or not.\n     */\n    isPiiLoggingEnabled(): boolean {\n        return this.piiLoggingEnabled || false;\n    }\n}\n", "/* eslint-disable header/header */\nexport const name = \"@azure/msal-common\";\nexport const version = \"15.13.3\";\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { ProtocolMode } from \"./ProtocolMode.js\";\nimport { OIDCOptions } from \"./OIDCOptions.js\";\nimport { AzureRegionConfiguration } from \"./AzureRegionConfiguration.js\";\nimport { CloudInstanceDiscoveryResponse } from \"./CloudInstanceDiscoveryResponse.js\";\n\nexport type AuthorityOptions = {\n    protocolMode: ProtocolMode;\n    OIDCOptions?: OIDCOptions | null;\n    knownAuthorities: Array<string>;\n    cloudDiscoveryMetadata: string;\n    authorityMetadata: string;\n    skipAuthorityMetadataCache?: boolean;\n    azureRegionConfiguration?: AzureRegionConfiguration;\n    authority?: string;\n};\n\nexport type StaticAuthorityOptions = Partial<\n    Pick<AuthorityOptions, \"knownAuthorities\">\n> & {\n    canonicalAuthority?: string;\n    cloudDiscoveryMetadata?: CloudInstanceDiscoveryResponse;\n};\n\nexport const AzureCloudInstance = {\n    // AzureCloudInstance is not specified.\n    None: \"none\",\n\n    // Microsoft Azure public cloud\n    AzurePublic: \"https://login.microsoftonline.com\",\n\n    // Microsoft PPE\n    AzurePpe: \"https://login.windows-ppe.net\",\n\n    // Microsoft Chinese national/regional cloud\n    AzureChina: \"https://login.chinacloudapi.cn\",\n\n    // Microsoft German national/regional cloud (\"Black Forest\")\n    AzureGermany: \"https://login.microsoftonline.de\",\n\n    // US Government cloud\n    AzureUsGovernment: \"https://login.microsoftonline.us\",\n} as const;\nexport type AzureCloudInstance =\n    (typeof AzureCloudInstance)[keyof typeof AzureCloudInstance];\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nexport const redirectUriEmpty = \"redirect_uri_empty\";\nexport const claimsRequestParsingError = \"claims_request_parsing_error\";\nexport const authorityUriInsecure = \"authority_uri_insecure\";\nexport const urlParseError = \"url_parse_error\";\nexport const urlEmptyError = \"empty_url_error\";\nexport const emptyInputScopesError = \"empty_input_scopes_error\";\nexport const invalidClaims = \"invalid_claims\";\nexport const tokenRequestEmpty = \"token_request_empty\";\nexport const logoutRequestEmpty = \"logout_request_empty\";\nexport const invalidCodeChallengeMethod = \"invalid_code_challenge_method\";\nexport const pkceParamsMissing = \"pkce_params_missing\";\nexport const invalidCloudDiscoveryMetadata = \"invalid_cloud_discovery_metadata\";\nexport const invalidAuthorityMetadata = \"invalid_authority_metadata\";\nexport const untrustedAuthority = \"untrusted_authority\";\nexport const missingSshJwk = \"missing_ssh_jwk\";\nexport const missingSshKid = \"missing_ssh_kid\";\nexport const missingNonceAuthenticationHeader =\n    \"missing_nonce_authentication_header\";\nexport const invalidAuthenticationHeader = \"invalid_authentication_header\";\nexport const cannotSetOIDCOptions = \"cannot_set_OIDCOptions\";\nexport const cannotAllowPlatformBroker = \"cannot_allow_platform_broker\";\nexport const authorityMismatch = \"authority_mismatch\";\nexport const invalidRequestMethodForEAR = \"invalid_request_method_for_EAR\";\nexport const invalidAuthorizePostBodyParameters =\n    \"invalid_authorize_post_body_parameters\";\nexport const invalidPlatformBrokerConfiguration =\n    \"invalid_platform_broker_configuration\";\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { AuthError } from \"./AuthError.js\";\nimport * as ClientConfigurationErrorCodes from \"./ClientConfigurationErrorCodes.js\";\nexport { ClientConfigurationErrorCodes };\n\nexport const ClientConfigurationErrorMessages = {\n    [ClientConfigurationErrorCodes.redirectUriEmpty]:\n        \"A redirect URI is required for all calls, and none has been set.\",\n    [ClientConfigurationErrorCodes.claimsRequestParsingError]:\n        \"Could not parse the given claims request object.\",\n    [ClientConfigurationErrorCodes.authorityUriInsecure]:\n        \"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options\",\n    [ClientConfigurationErrorCodes.urlParseError]:\n        \"URL could not be parsed into appropriate segments.\",\n    [ClientConfigurationErrorCodes.urlEmptyError]: \"URL was empty or null.\",\n    [ClientConfigurationErrorCodes.emptyInputScopesError]:\n        \"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.\",\n    [ClientConfigurationErrorCodes.invalidClaims]:\n        \"Given claims parameter must be a stringified JSON object.\",\n    [ClientConfigurationErrorCodes.tokenRequestEmpty]:\n        \"Token request was empty and not found in cache.\",\n    [ClientConfigurationErrorCodes.logoutRequestEmpty]:\n        \"The logout request was null or undefined.\",\n    [ClientConfigurationErrorCodes.invalidCodeChallengeMethod]:\n        'code_challenge_method passed is invalid. Valid values are \"plain\" and \"S256\".',\n    [ClientConfigurationErrorCodes.pkceParamsMissing]:\n        \"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request\",\n    [ClientConfigurationErrorCodes.invalidCloudDiscoveryMetadata]:\n        \"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields\",\n    [ClientConfigurationErrorCodes.invalidAuthorityMetadata]:\n        \"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.\",\n    [ClientConfigurationErrorCodes.untrustedAuthority]:\n        \"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.\",\n    [ClientConfigurationErrorCodes.missingSshJwk]:\n        \"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.\",\n    [ClientConfigurationErrorCodes.missingSshKid]:\n        \"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.\",\n    [ClientConfigurationErrorCodes.missingNonceAuthenticationHeader]:\n        \"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.\",\n    [ClientConfigurationErrorCodes.invalidAuthenticationHeader]:\n        \"Invalid authentication header provided\",\n    [ClientConfigurationErrorCodes.cannotSetOIDCOptions]:\n        \"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.\",\n    [ClientConfigurationErrorCodes.cannotAllowPlatformBroker]:\n        \"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.\",\n    [ClientConfigurationErrorCodes.authorityMismatch]:\n        \"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.\",\n    [ClientConfigurationErrorCodes.invalidAuthorizePostBodyParameters]:\n        \"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.\",\n    [ClientConfigurationErrorCodes.invalidRequestMethodForEAR]:\n        \"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST.\",\n    [ClientConfigurationErrorCodes.invalidPlatformBrokerConfiguration]:\n        \"Invalid platform broker configuration. `allowPlatformBrokerWithDOM` can only be enabled when `allowPlatformBroker` is enabled.\",\n};\n\n/**\n * ClientConfigurationErrorMessage class containing string constants used by error codes and messages.\n * @deprecated Use ClientConfigurationErrorCodes instead\n */\nexport const ClientConfigurationErrorMessage = {\n    redirectUriNotSet: {\n        code: ClientConfigurationErrorCodes.redirectUriEmpty,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.redirectUriEmpty\n        ],\n    },\n    claimsRequestParsingError: {\n        code: ClientConfigurationErrorCodes.claimsRequestParsingError,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.claimsRequestParsingError\n        ],\n    },\n    authorityUriInsecure: {\n        code: ClientConfigurationErrorCodes.authorityUriInsecure,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.authorityUriInsecure\n        ],\n    },\n    urlParseError: {\n        code: ClientConfigurationErrorCodes.urlParseError,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.urlParseError\n        ],\n    },\n    urlEmptyError: {\n        code: ClientConfigurationErrorCodes.urlEmptyError,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.urlEmptyError\n        ],\n    },\n    emptyScopesError: {\n        code: ClientConfigurationErrorCodes.emptyInputScopesError,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.emptyInputScopesError\n        ],\n    },\n    invalidClaimsRequest: {\n        code: ClientConfigurationErrorCodes.invalidClaims,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.invalidClaims\n        ],\n    },\n    tokenRequestEmptyError: {\n        code: ClientConfigurationErrorCodes.tokenRequestEmpty,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.tokenRequestEmpty\n        ],\n    },\n    logoutRequestEmptyError: {\n        code: ClientConfigurationErrorCodes.logoutRequestEmpty,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.logoutRequestEmpty\n        ],\n    },\n    invalidCodeChallengeMethod: {\n        code: ClientConfigurationErrorCodes.invalidCodeChallengeMethod,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.invalidCodeChallengeMethod\n        ],\n    },\n    invalidCodeChallengeParams: {\n        code: ClientConfigurationErrorCodes.pkceParamsMissing,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.pkceParamsMissing\n        ],\n    },\n    invalidCloudDiscoveryMetadata: {\n        code: ClientConfigurationErrorCodes.invalidCloudDiscoveryMetadata,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.invalidCloudDiscoveryMetadata\n        ],\n    },\n    invalidAuthorityMetadata: {\n        code: ClientConfigurationErrorCodes.invalidAuthorityMetadata,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.invalidAuthorityMetadata\n        ],\n    },\n    untrustedAuthority: {\n        code: ClientConfigurationErrorCodes.untrustedAuthority,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.untrustedAuthority\n        ],\n    },\n    missingSshJwk: {\n        code: ClientConfigurationErrorCodes.missingSshJwk,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.missingSshJwk\n        ],\n    },\n    missingSshKid: {\n        code: ClientConfigurationErrorCodes.missingSshKid,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.missingSshKid\n        ],\n    },\n    missingNonceAuthenticationHeader: {\n        code: ClientConfigurationErrorCodes.missingNonceAuthenticationHeader,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.missingNonceAuthenticationHeader\n        ],\n    },\n    invalidAuthenticationHeader: {\n        code: ClientConfigurationErrorCodes.invalidAuthenticationHeader,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.invalidAuthenticationHeader\n        ],\n    },\n    cannotSetOIDCOptions: {\n        code: ClientConfigurationErrorCodes.cannotSetOIDCOptions,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.cannotSetOIDCOptions\n        ],\n    },\n    cannotAllowPlatformBroker: {\n        code: ClientConfigurationErrorCodes.cannotAllowPlatformBroker,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.cannotAllowPlatformBroker\n        ],\n    },\n    authorityMismatch: {\n        code: ClientConfigurationErrorCodes.authorityMismatch,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.authorityMismatch\n        ],\n    },\n    invalidAuthorizePostBodyParameters: {\n        code: ClientConfigurationErrorCodes.invalidAuthorizePostBodyParameters,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.invalidAuthorizePostBodyParameters\n        ],\n    },\n    invalidRequestMethodForEAR: {\n        code: ClientConfigurationErrorCodes.invalidRequestMethodForEAR,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.invalidRequestMethodForEAR\n        ],\n    },\n    invalidPlatformBrokerConfiguration: {\n        code: ClientConfigurationErrorCodes.invalidPlatformBrokerConfiguration,\n        desc: ClientConfigurationErrorMessages[\n            ClientConfigurationErrorCodes.invalidPlatformBrokerConfiguration\n        ],\n    },\n};\n\n/**\n * Error thrown when there is an error in configuration of the MSAL.js library.\n */\nexport class ClientConfigurationError extends AuthError {\n    constructor(errorCode: string) {\n        super(errorCode, ClientConfigurationErrorMessages[errorCode]);\n        this.name = \"ClientConfigurationError\";\n        Object.setPrototypeOf(this, ClientConfigurationError.prototype);\n    }\n}\n\nexport function createClientConfigurationError(\n    errorCode: string\n): ClientConfigurationError {\n    return new ClientConfigurationError(errorCode);\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\n/**\n * @hidden\n */\nexport class StringUtils {\n    /**\n     * Check if stringified object is empty\n     * @param strObj\n     */\n    static isEmptyObj(strObj?: string): boolean {\n        if (strObj) {\n            try {\n                const obj = JSON.parse(strObj);\n                return Object.keys(obj).length === 0;\n            } catch (e) {}\n        }\n        return true;\n    }\n\n    static startsWith(str: string, search: string): boolean {\n        return str.indexOf(search) === 0;\n    }\n\n    static endsWith(str: string, search: string): boolean {\n        return (\n            str.length >= search.length &&\n            str.lastIndexOf(search) === str.length - search.length\n        );\n    }\n\n    /**\n     * Parses string into an object.\n     *\n     * @param query\n     */\n    static queryStringToObject<T>(query: string): T {\n        const obj: {} = {};\n        const params = query.split(\"&\");\n        const decode = (s: string) => decodeURIComponent(s.replace(/\\+/g, \" \"));\n        params.forEach((pair) => {\n            if (pair.trim()) {\n                const [key, value] = pair.split(/=(.+)/g, 2); // Split on the first occurence of the '=' character\n                if (key && value) {\n                    obj[decode(key)] = decode(value);\n                }\n            }\n        });\n        return obj as T;\n    }\n\n    /**\n     * Trims entries in an array.\n     *\n     * @param arr\n     */\n    static trimArrayEntries(arr: Array<string>): Array<string> {\n        return arr.map((entry) => entry.trim());\n    }\n\n    /**\n     * Removes empty strings from array\n     * @param arr\n     */\n    static removeEmptyStringsFromArray(arr: Array<string>): Array<string> {\n        return arr.filter((entry) => {\n            return !!entry;\n        });\n    }\n\n    /**\n     * Attempts to parse a string into JSON\n     * @param str\n     */\n    static jsonParseHelper<T>(str: string): T | null {\n        try {\n            return JSON.parse(str) as T;\n        } catch (e) {\n            return null;\n        }\n    }\n\n    /**\n     * Tests if a given string matches a given pattern, with support for wildcards and queries.\n     * @param pattern Wildcard pattern to string match. Supports \"*\" for wildcards and \"?\" for queries\n     * @param input String to match against\n     */\n    static matchPattern(pattern: string, input: string): boolean {\n        /**\n         * Wildcard support: https://stackoverflow.com/a/3117248/4888559\n         * Queries: replaces \"?\" in string with escaped \"\\?\" for regex test\n         */\n        // eslint-disable-next-line security/detect-non-literal-regexp\n        const regex: RegExp = new RegExp(\n            pattern\n                .replace(/\\\\/g, \"\\\\\\\\\")\n                .replace(/\\*/g, \"[^ ]*\")\n                .replace(/\\?/g, \"\\\\?\")\n        );\n\n        return regex.test(input);\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    createClientConfigurationError,\n    ClientConfigurationErrorCodes,\n} from \"../error/ClientConfigurationError.js\";\nimport { StringUtils } from \"../utils/StringUtils.js\";\nimport {\n    ClientAuthErrorCodes,\n    createClientAuthError,\n} from \"../error/ClientAuthError.js\";\nimport {\n    Constants,\n    OIDC_SCOPES,\n    OIDC_DEFAULT_SCOPES,\n} from \"../utils/Constants.js\";\n\n/**\n * The ScopeSet class creates a set of scopes. Scopes are case-insensitive, unique values, so the Set object in JS makes\n * the most sense to implement for this class. All scopes are trimmed and converted to lower case strings in intersection and union functions\n * to ensure uniqueness of strings.\n */\nexport class ScopeSet {\n    // Scopes as a Set of strings\n    private scopes: Set<string>;\n\n    constructor(inputScopes: Array<string>) {\n        // Filter empty string and null/undefined array items\n        const scopeArr = inputScopes\n            ? StringUtils.trimArrayEntries([...inputScopes])\n            : [];\n        const filteredInput = scopeArr\n            ? StringUtils.removeEmptyStringsFromArray(scopeArr)\n            : [];\n\n        // Check if scopes array has at least one member\n        if (!filteredInput || !filteredInput.length) {\n            throw createClientConfigurationError(\n                ClientConfigurationErrorCodes.emptyInputScopesError\n            );\n        }\n\n        this.scopes = new Set<string>(); // Iterator in constructor not supported by IE11\n        filteredInput.forEach((scope) => this.scopes.add(scope));\n    }\n\n    /**\n     * Factory method to create ScopeSet from space-delimited string\n     * @param inputScopeString\n     * @param appClientId\n     * @param scopesRequired\n     */\n    static fromString(inputScopeString: string): ScopeSet {\n        const scopeString = inputScopeString || Constants.EMPTY_STRING;\n        const inputScopes: Array<string> = scopeString.split(\" \");\n        return new ScopeSet(inputScopes);\n    }\n\n    /**\n     * Creates the set of scopes to search for in cache lookups\n     * @param inputScopeString\n     * @returns\n     */\n    static createSearchScopes(inputScopeString: Array<string>): ScopeSet {\n        // Handle empty scopes by using default OIDC scopes for cache lookup\n        const scopesToUse =\n            inputScopeString && inputScopeString.length > 0\n                ? inputScopeString\n                : [...OIDC_DEFAULT_SCOPES];\n\n        const scopeSet = new ScopeSet(scopesToUse);\n        if (!scopeSet.containsOnlyOIDCScopes()) {\n            scopeSet.removeOIDCScopes();\n        } else {\n            scopeSet.removeScope(Constants.OFFLINE_ACCESS_SCOPE);\n        }\n\n        return scopeSet;\n    }\n\n    /**\n     * Check if a given scope is present in this set of scopes.\n     * @param scope\n     */\n    containsScope(scope: string): boolean {\n        const lowerCaseScopes = this.printScopesLowerCase().split(\" \");\n        const lowerCaseScopesSet = new ScopeSet(lowerCaseScopes);\n        // compare lowercase scopes\n        return scope\n            ? lowerCaseScopesSet.scopes.has(scope.toLowerCase())\n            : false;\n    }\n\n    /**\n     * Check if a set of scopes is present in this set of scopes.\n     * @param scopeSet\n     */\n    containsScopeSet(scopeSet: ScopeSet): boolean {\n        if (!scopeSet || scopeSet.scopes.size <= 0) {\n            return false;\n        }\n\n        return (\n            this.scopes.size >= scopeSet.scopes.size &&\n            scopeSet.asArray().every((scope) => this.containsScope(scope))\n        );\n    }\n\n    /**\n     * Check if set of scopes contains only the defaults\n     */\n    containsOnlyOIDCScopes(): boolean {\n        let defaultScopeCount = 0;\n        OIDC_SCOPES.forEach((defaultScope: string) => {\n            if (this.containsScope(defaultScope)) {\n                defaultScopeCount += 1;\n            }\n        });\n\n        return this.scopes.size === defaultScopeCount;\n    }\n\n    /**\n     * Appends single scope if passed\n     * @param newScope\n     */\n    appendScope(newScope: string): void {\n        if (newScope) {\n            this.scopes.add(newScope.trim());\n        }\n    }\n\n    /**\n     * Appends multiple scopes if passed\n     * @param newScopes\n     */\n    appendScopes(newScopes: Array<string>): void {\n        try {\n            newScopes.forEach((newScope) => this.appendScope(newScope));\n        } catch (e) {\n            throw createClientAuthError(\n                ClientAuthErrorCodes.cannotAppendScopeSet\n            );\n        }\n    }\n\n    /**\n     * Removes element from set of scopes.\n     * @param scope\n     */\n    removeScope(scope: string): void {\n        if (!scope) {\n            throw createClientAuthError(\n                ClientAuthErrorCodes.cannotRemoveEmptyScope\n            );\n        }\n        this.scopes.delete(scope.trim());\n    }\n\n    /**\n     * Removes default scopes from set of scopes\n     * Primarily used to prevent cache misses if the default scopes are not returned from the server\n     */\n    removeOIDCScopes(): void {\n        OIDC_SCOPES.forEach((defaultScope: string) => {\n            this.scopes.delete(defaultScope);\n        });\n    }\n\n    /**\n     * Combines an array of scopes with the current set of scopes.\n     * @param otherScopes\n     */\n    unionScopeSets(otherScopes: ScopeSet): Set<string> {\n        if (!otherScopes) {\n            throw createClientAuthError(\n                ClientAuthErrorCodes.emptyInputScopeSet\n            );\n        }\n        const unionScopes = new Set<string>(); // Iterator in constructor not supported in IE11\n        otherScopes.scopes.forEach((scope) =>\n            unionScopes.add(scope.toLowerCase())\n        );\n        this.scopes.forEach((scope) => unionScopes.add(scope.toLowerCase()));\n        return unionScopes;\n    }\n\n    /**\n     * Check if scopes intersect between this set and another.\n     * @param otherScopes\n     */\n    intersectingScopeSets(otherScopes: ScopeSet): boolean {\n        if (!otherScopes) {\n            throw createClientAuthError(\n                ClientAuthErrorCodes.emptyInputScopeSet\n            );\n        }\n\n        // Do not allow OIDC scopes to be the only intersecting scopes\n        if (!otherScopes.containsOnlyOIDCScopes()) {\n            otherScopes.removeOIDCScopes();\n        }\n        const unionScopes = this.unionScopeSets(otherScopes);\n        const sizeOtherScopes = otherScopes.getScopeCount();\n        const sizeThisScopes = this.getScopeCount();\n        const sizeUnionScopes = unionScopes.size;\n        return sizeUnionScopes < sizeThisScopes + sizeOtherScopes;\n    }\n\n    /**\n     * Returns size of set of scopes.\n     */\n    getScopeCount(): number {\n        return this.scopes.size;\n    }\n\n    /**\n     * Returns the scopes as an array of string values\n     */\n    asArray(): Array<string> {\n        const array: Array<string> = [];\n        this.scopes.forEach((val) => array.push(val));\n        return array;\n    }\n\n    /**\n     * Prints scopes into a space-delimited string\n     */\n    printScopes(): string {\n        if (this.scopes) {\n            const scopeArr = this.asArray();\n            return scopeArr.join(\" \");\n        }\n        return Constants.EMPTY_STRING;\n    }\n\n    /**\n     * Prints scopes into a space-delimited lower-case string (used for caching)\n     */\n    printScopesLowerCase(): string {\n        return this.printScopes().toLowerCase();\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    createClientAuthError,\n    ClientAuthErrorCodes,\n} from \"../error/ClientAuthError.js\";\nimport { Separators, Constants } from \"../utils/Constants.js\";\n\n/**\n * Client info object which consists of:\n * uid: user id\n * utid: tenant id\n * xms_tdbr: optional, only for non-US tenants\n */\nexport type ClientInfo = {\n    uid: string;\n    utid: string;\n    xms_tdbr?: string;\n};\n\n/**\n * Function to build a client info object from server clientInfo string\n * @param rawClientInfo\n * @param crypto\n */\nexport function buildClientInfo(\n    rawClientInfo: string,\n    base64Decode: (input: string) => string\n): ClientInfo {\n    if (!rawClientInfo) {\n        throw createClientAuthError(ClientAuthErrorCodes.clientInfoEmptyError);\n    }\n\n    try {\n        const decodedClientInfo: string = base64Decode(rawClientInfo);\n        return JSON.parse(decodedClientInfo) as ClientInfo;\n    } catch (e) {\n        throw createClientAuthError(\n            ClientAuthErrorCodes.clientInfoDecodingError\n        );\n    }\n}\n\n/**\n * Function to build a client info object from cached homeAccountId string\n * @param homeAccountId\n */\nexport function buildClientInfoFromHomeAccountId(\n    homeAccountId: string\n): ClientInfo {\n    if (!homeAccountId) {\n        throw createClientAuthError(\n            ClientAuthErrorCodes.clientInfoDecodingError\n        );\n    }\n    const clientInfoParts: string[] = homeAccountId.split(\n        Separators.CLIENT_INFO_SEPARATOR,\n        2\n    );\n    return {\n        uid: clientInfoParts[0],\n        utid:\n            clientInfoParts.length < 2\n                ? Constants.EMPTY_STRING\n                : clientInfoParts[1],\n    };\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { TokenClaims } from \"./TokenClaims.js\";\n\nexport type DataBoundary = \"EU\" | \"None\";\n\n/**\n * Account object with the following signature:\n * - homeAccountId          - Home account identifier for this account object\n * - environment            - Entity which issued the token represented by the domain of the issuer (e.g. login.microsoftonline.com)\n * - tenantId               - Full tenant or organizational id that this account belongs to\n * - username               - preferred_username claim of the id_token that represents this account\n * - localAccountId         - Local, tenant-specific account identifer for this account object, usually used in legacy cases\n * - name                   - Full name for the account, including given name and family name\n * - idToken                - raw ID token\n * - idTokenClaims          - Object contains claims from ID token\n * - nativeAccountId        - The user's native account ID\n * - tenantProfiles         - Map of tenant profile objects for each tenant that the account has authenticated with in the browser\n * - dataBoundary           - Data boundary extracted from clientInfo\n */\nexport type AccountInfo = {\n    homeAccountId: string;\n    environment: string;\n    tenantId: string;\n    username: string;\n    localAccountId: string;\n    loginHint?: string;\n    name?: string;\n    idToken?: string;\n    idTokenClaims?: TokenClaims & {\n        [key: string]:\n            | string\n            | number\n            | string[]\n            | object\n            | undefined\n            | unknown;\n    };\n    nativeAccountId?: string;\n    authorityType?: string;\n    tenantProfiles?: Map<string, TenantProfile>;\n    dataBoundary?: DataBoundary;\n};\n\n/**\n * Account details that vary across tenants for the same user\n */\nexport type TenantProfile = Pick<\n    AccountInfo,\n    \"tenantId\" | \"localAccountId\" | \"name\" | \"username\" | \"loginHint\"\n> & {\n    /**\n     * - isHomeTenant           - True if this is the home tenant profile of the account, false if it's a guest tenant profile\n     */\n    isHomeTenant?: boolean;\n};\n\nexport type ActiveAccountFilters = {\n    homeAccountId: string;\n    localAccountId: string;\n    tenantId?: string;\n    lastUpdatedAt?: string;\n};\n\n/**\n * Returns true if tenantId matches the utid portion of homeAccountId\n * @param tenantId\n * @param homeAccountId\n * @returns\n */\nexport function tenantIdMatchesHomeTenant(\n    tenantId?: string,\n    homeAccountId?: string\n): boolean {\n    return (\n        !!tenantId &&\n        !!homeAccountId &&\n        tenantId === homeAccountId.split(\".\")[1]\n    );\n}\n\n/**\n * Build tenant profile\n * @param homeAccountId - Home account identifier for this account object\n * @param localAccountId - Local account identifer for this account object\n * @param tenantId - Full tenant or organizational id that this account belongs to\n * @param idTokenClaims - Claims from the ID token\n * @returns\n */\nexport function buildTenantProfile(\n    homeAccountId: string,\n    localAccountId: string,\n    tenantId: string,\n    idTokenClaims?: TokenClaims\n): TenantProfile {\n    if (idTokenClaims) {\n        const {\n            oid,\n            sub,\n            tid,\n            name,\n            tfp,\n            acr,\n            preferred_username,\n            upn,\n            login_hint,\n        } = idTokenClaims;\n\n        /**\n         * Since there is no way to determine if the authority is AAD or B2C, we exhaust all the possible claims that can serve as tenant ID with the following precedence:\n         * tid - TenantID claim that identifies the tenant that issued the token in AAD. Expected in all AAD ID tokens, not present in B2C ID Tokens.\n         * tfp - Trust Framework Policy claim that identifies the policy that was used to authenticate the user. Functions as tenant for B2C scenarios.\n         * acr - Authentication Context Class Reference claim used only with older B2C policies. Fallback in case tfp is not present, but likely won't be present anyway.\n         */\n        const tenantId = tid || tfp || acr || \"\";\n\n        return {\n            tenantId: tenantId,\n            localAccountId: oid || sub || \"\",\n            name: name,\n            username: preferred_username || upn || \"\",\n            loginHint: login_hint,\n            isHomeTenant: tenantIdMatchesHomeTenant(tenantId, homeAccountId),\n        };\n    } else {\n        return {\n            tenantId,\n            localAccountId,\n            username: \"\",\n            isHomeTenant: tenantIdMatchesHomeTenant(tenantId, homeAccountId),\n        };\n    }\n}\n\n/**\n * Replaces account info that varies by tenant profile sourced from the ID token claims passed in with the tenant-specific account info\n * @param baseAccountInfo\n * @param idTokenClaims\n * @returns\n */\nexport function updateAccountTenantProfileData(\n    baseAccountInfo: AccountInfo,\n    tenantProfile?: TenantProfile,\n    idTokenClaims?: TokenClaims,\n    idTokenSecret?: string\n): AccountInfo {\n    let updatedAccountInfo = baseAccountInfo;\n    // Tenant Profile overrides passed in account info\n    if (tenantProfile) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const { isHomeTenant, ...tenantProfileOverride } = tenantProfile;\n        updatedAccountInfo = { ...baseAccountInfo, ...tenantProfileOverride };\n    }\n\n    // ID token claims override passed in account info and tenant profile\n    if (idTokenClaims) {\n        // Ignore isHomeTenant, loginHint, and sid which are part of tenant profile but not base account info\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const { isHomeTenant, ...claimsSourcedTenantProfile } =\n            buildTenantProfile(\n                baseAccountInfo.homeAccountId,\n                baseAccountInfo.localAccountId,\n                baseAccountInfo.tenantId,\n                idTokenClaims\n            );\n\n        updatedAccountInfo = {\n            ...updatedAccountInfo,\n            ...claimsSourcedTenantProfile,\n            idTokenClaims: idTokenClaims,\n            idToken: idTokenSecret,\n        };\n\n        return updatedAccountInfo;\n    }\n\n    return updatedAccountInfo;\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\n/**\n * Authority types supported by MSAL.\n */\nexport const AuthorityType = {\n    Default: 0,\n    Adfs: 1,\n    Dsts: 2,\n    Ciam: 3,\n} as const;\nexport type AuthorityType = (typeof AuthorityType)[keyof typeof AuthorityType];\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\n/**\n * Type which describes Id Token claims known by MSAL.\n */\nexport type TokenClaims = {\n    /**\n     * Audience\n     */\n    aud?: string;\n    /**\n     * Issuer\n     */\n    iss?: string;\n    /**\n     * Issued at\n     */\n    iat?: number;\n    /**\n     * Not valid before\n     */\n    nbf?: number;\n    /**\n     * Immutable object identifier, this ID uniquely identifies the user across applications\n     */\n    oid?: string;\n    /**\n     * Immutable subject identifier, this is a pairwise identifier - it is unique to a particular application ID\n     */\n    sub?: string;\n    /**\n     * Users' tenant or '9188040d-6c67-4c5b-b112-36a304b66dad' for personal accounts.\n     */\n    tid?: string;\n    /**\n     * Trusted Framework Policy (B2C) The name of the policy that was used to acquire the ID token.\n     */\n    tfp?: string;\n    /**\n     * Authentication Context Class Reference (B2C) Used only with older policies.\n     */\n    acr?: string;\n    ver?: string;\n    upn?: string;\n    preferred_username?: string;\n    login_hint?: string;\n    /**\n     * Contains KMSI (Keep Me Signed In) status among other things\n     */\n    signin_state?: Array<string>;\n    emails?: string[];\n    name?: string;\n    nonce?: string;\n    /**\n     * Expiration\n     */\n    exp?: number;\n    home_oid?: string;\n    sid?: string;\n    cloud_instance_host_name?: string;\n    cnf?: {\n        kid: string;\n    };\n    x5c_ca?: string[];\n    ts?: number;\n    at?: string;\n    u?: string;\n    p?: string;\n    m?: string;\n    roles?: string[];\n    amr?: string[];\n    idp?: string;\n    auth_time?: number;\n    /**\n     * \tRegion of the resource tenant\n     */\n    tenant_region_scope?: string;\n    tenant_region_sub_scope?: string;\n};\n\n/**\n * Gets tenantId from available ID token claims to set as credential realm with the following precedence:\n * 1. tid - if the token is acquired from an Azure AD tenant tid will be present\n * 2. tfp - if the token is acquired from a modern B2C tenant tfp should be present\n * 3. acr - if the token is acquired from a legacy B2C tenant acr should be present\n * Downcased to match the realm case-insensitive comparison requirements\n * @param idTokenClaims\n * @returns\n */\nexport function getTenantIdFromIdTokenClaims(\n    idTokenClaims?: TokenClaims\n): string | null {\n    if (idTokenClaims) {\n        const tenantId =\n            idTokenClaims.tid || idTokenClaims.tfp || idTokenClaims.acr;\n        return tenantId || null;\n    }\n    return null;\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\n/**\n * Protocol modes supported by MSAL.\n */\nexport const ProtocolMode = {\n    /**\n     * Auth Code + PKCE with Entra ID (formerly AAD) specific optimizations and features\n     */\n    AAD: \"AAD\",\n    /**\n     * Auth Code + PKCE without Entra ID specific optimizations and features. For use only with non-Microsoft owned authorities.\n     * Support is limited for this mode.\n     */\n    OIDC: \"OIDC\",\n    /**\n     * Encrypted Authorize Response (EAR) with Entra ID specific optimizations and features\n     */\n    EAR: \"EAR\",\n} as const;\nexport type ProtocolMode = (typeof ProtocolMode)[keyof typeof ProtocolMode];\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { CacheAccountType } from \"../../utils/Constants.js\";\nimport type { Authority } from \"../../authority/Authority.js\";\nimport { ICrypto } from \"../../crypto/ICrypto.js\";\nimport { ClientInfo, buildClientInfo } from \"../../account/ClientInfo.js\";\nimport {\n    AccountInfo,\n    TenantProfile,\n    buildTenantProfile,\n    DataBoundary,\n} from \"../../account/AccountInfo.js\";\nimport {\n    createClientAuthError,\n    ClientAuthErrorCodes,\n} from \"../../error/ClientAuthError.js\";\nimport { AuthorityType } from \"../../authority/AuthorityType.js\";\nimport { Logger } from \"../../logger/Logger.js\";\nimport {\n    TokenClaims,\n    getTenantIdFromIdTokenClaims,\n} from \"../../account/TokenClaims.js\";\nimport { ProtocolMode } from \"../../authority/ProtocolMode.js\";\n\n/**\n * Type that defines required and optional parameters for an Account field (based on universal cache schema implemented by all MSALs).\n *\n * Key : Value Schema\n *\n * Key: <home_account_id>-<environment>-<realm*>\n *\n * Value Schema:\n * {\n *      homeAccountId: home account identifier for the auth scheme,\n *      environment: entity that issued the token, represented as a full host\n *      realm: Full tenant or organizational identifier that the account belongs to\n *      localAccountId: Original tenant-specific accountID, usually used for legacy cases\n *      username: primary username that represents the user, usually corresponds to preferred_username in the v2 endpt\n *      authorityType: Accounts authority type as a string\n *      name: Full name for the account, including given name and family name,\n *      lastModificationTime: last time this entity was modified in the cache\n *      lastModificationApp:\n *      nativeAccountId: Account identifier on the native device\n *      tenantProfiles: Array of tenant profile objects for each tenant that the account has authenticated with in the browser\n * }\n * @internal\n */\nexport class AccountEntity {\n    homeAccountId: string;\n    environment: string;\n    realm: string;\n    localAccountId: string;\n    username: string;\n    authorityType: string;\n    loginHint?: string;\n    clientInfo?: string;\n    name?: string;\n    lastModificationTime?: string;\n    lastModificationApp?: string;\n    cloudGraphHostName?: string;\n    msGraphHost?: string;\n    nativeAccountId?: string;\n    tenantProfiles?: Array<TenantProfile>;\n    lastUpdatedAt: string;\n    dataBoundary?: DataBoundary;\n\n    /**\n     * Returns the AccountInfo interface for this account.\n     */\n    static getAccountInfo(accountEntity: AccountEntity): AccountInfo {\n        return {\n            homeAccountId: accountEntity.homeAccountId,\n            environment: accountEntity.environment,\n            tenantId: accountEntity.realm,\n            username: accountEntity.username,\n            localAccountId: accountEntity.localAccountId,\n            loginHint: accountEntity.loginHint,\n            name: accountEntity.name,\n            nativeAccountId: accountEntity.nativeAccountId,\n            authorityType: accountEntity.authorityType,\n            // Deserialize tenant profiles array into a Map\n            tenantProfiles: new Map(\n                (accountEntity.tenantProfiles || []).map((tenantProfile) => {\n                    return [tenantProfile.tenantId, tenantProfile];\n                })\n            ),\n            dataBoundary: accountEntity.dataBoundary,\n        };\n    }\n\n    /**\n     * Returns true if the account entity is in single tenant format (outdated), false otherwise\n     */\n    isSingleTenant(): boolean {\n        return !this.tenantProfiles;\n    }\n\n    /**\n     * Build Account cache from IdToken, clientInfo and authority/policy. Associated with AAD.\n     * @param accountDetails\n     */\n    static createAccount(\n        accountDetails: {\n            homeAccountId: string;\n            idTokenClaims?: TokenClaims;\n            clientInfo?: string;\n            cloudGraphHostName?: string;\n            msGraphHost?: string;\n            environment?: string;\n            nativeAccountId?: string;\n            tenantProfiles?: Array<TenantProfile>;\n        },\n        authority: Authority,\n        base64Decode?: (input: string) => string\n    ): AccountEntity {\n        const account: AccountEntity = new AccountEntity();\n\n        if (authority.authorityType === AuthorityType.Adfs) {\n            account.authorityType = CacheAccountType.ADFS_ACCOUNT_TYPE;\n        } else if (authority.protocolMode === ProtocolMode.OIDC) {\n            account.authorityType = CacheAccountType.GENERIC_ACCOUNT_TYPE;\n        } else {\n            account.authorityType = CacheAccountType.MSSTS_ACCOUNT_TYPE;\n        }\n\n        let clientInfo: ClientInfo | undefined;\n\n        if (accountDetails.clientInfo && base64Decode) {\n            clientInfo = buildClientInfo(\n                accountDetails.clientInfo,\n                base64Decode\n            );\n            if (clientInfo.xms_tdbr) {\n                account.dataBoundary =\n                    clientInfo.xms_tdbr === \"EU\" ? \"EU\" : \"None\";\n            }\n        }\n\n        account.clientInfo = accountDetails.clientInfo;\n        account.homeAccountId = accountDetails.homeAccountId;\n        account.nativeAccountId = accountDetails.nativeAccountId;\n\n        const env =\n            accountDetails.environment ||\n            (authority && authority.getPreferredCache());\n\n        if (!env) {\n            throw createClientAuthError(\n                ClientAuthErrorCodes.invalidCacheEnvironment\n            );\n        }\n\n        account.environment = env;\n        // non AAD scenarios can have empty realm\n        account.realm =\n            clientInfo?.utid ||\n            getTenantIdFromIdTokenClaims(accountDetails.idTokenClaims) ||\n            \"\";\n\n        // How do you account for MSA CID here?\n        account.localAccountId =\n            clientInfo?.uid ||\n            accountDetails.idTokenClaims?.oid ||\n            accountDetails.idTokenClaims?.sub ||\n            \"\";\n\n        /*\n         * In B2C scenarios the emails claim is used instead of preferred_username and it is an array.\n         * In most cases it will contain a single email. This field should not be relied upon if a custom\n         * policy is configured to return more than 1 email.\n         */\n        const preferredUsername =\n            accountDetails.idTokenClaims?.preferred_username ||\n            accountDetails.idTokenClaims?.upn;\n        const email = accountDetails.idTokenClaims?.emails\n            ? accountDetails.idTokenClaims.emails[0]\n            : null;\n\n        account.username = preferredUsername || email || \"\";\n        account.loginHint = accountDetails.idTokenClaims?.login_hint;\n        account.name = accountDetails.idTokenClaims?.name || \"\";\n\n        account.cloudGraphHostName = accountDetails.cloudGraphHostName;\n        account.msGraphHost = accountDetails.msGraphHost;\n\n        if (accountDetails.tenantProfiles) {\n            account.tenantProfiles = accountDetails.tenantProfiles;\n        } else {\n            const tenantProfile = buildTenantProfile(\n                accountDetails.homeAccountId,\n                account.localAccountId,\n                account.realm,\n                accountDetails.idTokenClaims\n            );\n            account.tenantProfiles = [tenantProfile];\n        }\n\n        return account;\n    }\n\n    /**\n     * Creates an AccountEntity object from AccountInfo\n     * @param accountInfo\n     * @param cloudGraphHostName\n     * @param msGraphHost\n     * @returns\n     */\n    static createFromAccountInfo(\n        accountInfo: AccountInfo,\n        cloudGraphHostName?: string,\n        msGraphHost?: string\n    ): AccountEntity {\n        const account: AccountEntity = new AccountEntity();\n\n        account.authorityType =\n            accountInfo.authorityType || CacheAccountType.GENERIC_ACCOUNT_TYPE;\n        account.homeAccountId = accountInfo.homeAccountId;\n        account.localAccountId = accountInfo.localAccountId;\n        account.nativeAccountId = accountInfo.nativeAccountId;\n\n        account.realm = accountInfo.tenantId;\n        account.environment = accountInfo.environment;\n\n        account.username = accountInfo.username;\n        account.name = accountInfo.name;\n        account.loginHint = accountInfo.loginHint;\n\n        account.cloudGraphHostName = cloudGraphHostName;\n        account.msGraphHost = msGraphHost;\n        // Serialize tenant profiles map into an array\n        account.tenantProfiles = Array.from(\n            accountInfo.tenantProfiles?.values() || []\n        );\n        account.dataBoundary = accountInfo.dataBoundary;\n\n        return account;\n    }\n\n    /**\n     * Generate HomeAccountId from server response\n     * @param serverClientInfo\n     * @param authType\n     */\n    static generateHomeAccountId(\n        serverClientInfo: string,\n        authType: AuthorityType,\n        logger: Logger,\n        cryptoObj: ICrypto,\n        idTokenClaims?: TokenClaims\n    ): string {\n        // since ADFS/DSTS do not have tid and does not set client_info\n        if (\n            !(\n                authType === AuthorityType.Adfs ||\n                authType === AuthorityType.Dsts\n            )\n        ) {\n            // for cases where there is clientInfo\n            if (serverClientInfo) {\n                try {\n                    const clientInfo = buildClientInfo(\n                        serverClientInfo,\n                        cryptoObj.base64Decode\n                    );\n                    if (clientInfo.uid && clientInfo.utid) {\n                        return `${clientInfo.uid}.${clientInfo.utid}`;\n                    }\n                } catch (e) {}\n            }\n            logger.warning(\"No client info in response\");\n        }\n\n        // default to \"sub\" claim\n        return idTokenClaims?.sub || \"\";\n    }\n\n    /**\n     * Validates an entity: checks for all expected params\n     * @param entity\n     */\n    static isAccountEntity(entity: object): entity is AccountEntity {\n        if (!entity) {\n            return false;\n        }\n\n        return (\n            entity.hasOwnProperty(\"homeAccountId\") &&\n            entity.hasOwnProperty(\"environment\") &&\n            entity.hasOwnProperty(\"realm\") &&\n            entity.hasOwnProperty(\"localAccountId\") &&\n            entity.hasOwnProperty(\"username\") &&\n            entity.hasOwnProperty(\"authorityType\")\n        );\n    }\n\n    /**\n     * Helper function to determine whether 2 accountInfo objects represent the same account\n     * @param accountA\n     * @param accountB\n     * @param compareClaims - If set to true idTokenClaims will also be compared to determine account equality\n     */\n    static accountInfoIsEqual(\n        accountA: AccountInfo | null,\n        accountB: AccountInfo | null,\n        compareClaims?: boolean\n    ): boolean {\n        if (!accountA || !accountB) {\n            return false;\n        }\n\n        let claimsMatch = true; // default to true so as to not fail comparison below if compareClaims: false\n        if (compareClaims) {\n            const accountAClaims = (accountA.idTokenClaims ||\n                {}) as TokenClaims;\n            const accountBClaims = (accountB.idTokenClaims ||\n                {}) as TokenClaims;\n\n            // issued at timestamp and nonce are expected to change each time a new id token is acquired\n            claimsMatch =\n                accountAClaims.iat === accountBClaims.iat &&\n                accountAClaims.nonce === accountBClaims.nonce;\n        }\n\n        return (\n            accountA.homeAccountId === accountB.homeAccountId &&\n            accountA.localAccountId === accountB.localAccountId &&\n            accountA.username === accountB.username &&\n            accountA.tenantId === accountB.tenantId &&\n            accountA.loginHint === accountB.loginHint &&\n            accountA.environment === accountB.environment &&\n            accountA.nativeAccountId === accountB.nativeAccountId &&\n            claimsMatch\n        );\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { TokenClaims } from \"./TokenClaims.js\";\nimport {\n    createClientAuthError,\n    ClientAuthErrorCodes,\n} from \"../error/ClientAuthError.js\";\n\n/**\n * Extract token by decoding the rawToken\n *\n * @param encodedToken\n */\nexport function extractTokenClaims(\n    encodedToken: string,\n    base64Decode: (input: string) => string\n): TokenClaims {\n    const jswPayload = getJWSPayload(encodedToken);\n\n    // token will be decoded to get the username\n    try {\n        // base64Decode() should throw an error if there is an issue\n        const base64Decoded = base64Decode(jswPayload);\n        return JSON.parse(base64Decoded) as TokenClaims;\n    } catch (err) {\n        throw createClientAuthError(ClientAuthErrorCodes.tokenParsingError);\n    }\n}\n\n/**\n * Check if the signin_state claim contains \"kmsi\"\n * @param idTokenClaims\n * @returns\n */\nexport function isKmsi(idTokenClaims: TokenClaims): boolean {\n    if (!idTokenClaims.signin_state) {\n        return false;\n    }\n    /**\n     * Signin_state claim known values:\n     * dvc_mngd - device is managed\n     * dvc_dmjd - device is domain joined\n     * kmsi - user opted to \"keep me signed in\"\n     * inknownntwk - Request made inside a known network. Don't use this, use CAE instead.\n     */\n    const kmsiClaims = [\"kmsi\", \"dvc_dmjd\"]; // There are some cases where kmsi may not be returned but persistent storage is still OK - allow dvc_dmjd as well\n    const kmsi = idTokenClaims.signin_state.some((value) =>\n        kmsiClaims.includes(value.trim().toLowerCase())\n    );\n    return kmsi;\n}\n\n/**\n * decode a JWT\n *\n * @param authToken\n */\nexport function getJWSPayload(authToken: string): string {\n    if (!authToken) {\n        throw createClientAuthError(ClientAuthErrorCodes.nullOrEmptyToken);\n    }\n    const tokenPartsRegex = /^([^\\.\\s]*)\\.([^\\.\\s]+)\\.([^\\.\\s]*)$/;\n    const matches = tokenPartsRegex.exec(authToken);\n    if (!matches || matches.length < 4) {\n        throw createClientAuthError(ClientAuthErrorCodes.tokenParsingError);\n    }\n    /**\n     * const crackedToken = {\n     *  header: matches[1],\n     *  JWSPayload: matches[2],\n     *  JWSSig: matches[3],\n     * };\n     */\n\n    return matches[2];\n}\n\n/**\n * Determine if the token's max_age has transpired\n */\nexport function checkMaxAge(authTime: number, maxAge: number): void {\n    /*\n     * per https://openid.net/specs/openid-connect-core-1_0.html#AuthRequest\n     * To force an immediate re-authentication: If an app requires that a user re-authenticate prior to access,\n     * provide a value of 0 for the max_age parameter and the AS will force a fresh login.\n     */\n    const fiveMinuteSkew = 300000; // five minutes in milliseconds\n    if (maxAge === 0 || Date.now() - fiveMinuteSkew > authTime + maxAge) {\n        throw createClientAuthError(ClientAuthErrorCodes.maxAgeTranspired);\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { AuthorizeResponse } from \"../response/AuthorizeResponse.js\";\nimport {\n    ClientAuthErrorCodes,\n    createClientAuthError,\n} from \"../error/ClientAuthError.js\";\nimport { StringDict } from \"./MsalTypes.js\";\nimport { StringUtils } from \"./StringUtils.js\";\n\n/**\n * Canonicalizes a URL by making it lowercase and ensuring it ends with /\n * Inlined version of UrlString.canonicalizeUri to avoid circular dependency\n * @param url - URL to canonicalize\n * @returns Canonicalized URL\n */\nfunction canonicalizeUrl(url: string): string {\n    if (!url) {\n        return url;\n    }\n\n    let lowerCaseUrl = url.toLowerCase();\n\n    if (StringUtils.endsWith(lowerCaseUrl, \"?\")) {\n        lowerCaseUrl = lowerCaseUrl.slice(0, -1);\n    } else if (StringUtils.endsWith(lowerCaseUrl, \"?/\")) {\n        lowerCaseUrl = lowerCaseUrl.slice(0, -2);\n    }\n\n    if (!StringUtils.endsWith(lowerCaseUrl, \"/\")) {\n        lowerCaseUrl += \"/\";\n    }\n\n    return lowerCaseUrl;\n}\n\n/**\n * Parses hash string from given string. Returns empty string if no hash symbol is found.\n * @param hashString\n */\nexport function stripLeadingHashOrQuery(responseString: string): string {\n    if (responseString.startsWith(\"#/\")) {\n        return responseString.substring(2);\n    } else if (\n        responseString.startsWith(\"#\") ||\n        responseString.startsWith(\"?\")\n    ) {\n        return responseString.substring(1);\n    }\n\n    return responseString;\n}\n\n/**\n * Returns URL hash as server auth code response object.\n */\nexport function getDeserializedResponse(\n    responseString: string\n): AuthorizeResponse | null {\n    // Check if given hash is empty\n    if (!responseString || responseString.indexOf(\"=\") < 0) {\n        return null;\n    }\n    try {\n        // Strip the # or ? symbol if present\n        const normalizedResponse = stripLeadingHashOrQuery(responseString);\n        // If # symbol was not present, above will return empty string, so give original hash value\n        const deserializedHash: AuthorizeResponse = Object.fromEntries(\n            new URLSearchParams(normalizedResponse)\n        );\n\n        // Check for known response properties\n        if (\n            deserializedHash.code ||\n            deserializedHash.ear_jwe ||\n            deserializedHash.error ||\n            deserializedHash.error_description ||\n            deserializedHash.state\n        ) {\n            return deserializedHash;\n        }\n    } catch (e) {\n        throw createClientAuthError(ClientAuthErrorCodes.hashNotDeserialized);\n    }\n\n    return null;\n}\n\n/**\n * Utility to create a URL from the params map\n */\nexport function mapToQueryString(\n    parameters: Map<string, string>,\n    encodeExtraParams: boolean = true,\n    extraQueryParameters?: StringDict\n): string {\n    const queryParameterArray: Array<string> = new Array<string>();\n\n    parameters.forEach((value, key) => {\n        if (\n            !encodeExtraParams &&\n            extraQueryParameters &&\n            key in extraQueryParameters\n        ) {\n            queryParameterArray.push(`${key}=${value}`);\n        } else {\n            queryParameterArray.push(`${key}=${encodeURIComponent(value)}`);\n        }\n    });\n\n    return queryParameterArray.join(\"&\");\n}\n\n/**\n * Normalizes URLs for comparison by removing hash, canonicalizing,\n * and ensuring consistent URL encoding in query parameters.\n * This fixes redirect loops when URLs contain encoded characters like apostrophes (%27).\n * @param url - URL to normalize\n * @returns Normalized URL string for comparison\n */\nexport function normalizeUrlForComparison(url: string): string {\n    if (!url) {\n        return url;\n    }\n\n    // Remove hash first\n    const urlWithoutHash = url.split(\"#\")[0];\n\n    try {\n        // Parse the URL to handle encoding consistently\n        const urlObj = new URL(urlWithoutHash);\n\n        /*\n         * Reconstruct the URL with properly decoded query parameters\n         * This ensures that %27 and ' are treated as equivalent\n         */\n        const normalizedUrl = urlObj.origin + urlObj.pathname + urlObj.search;\n\n        // Apply canonicalization logic inline to avoid circular dependency\n        return canonicalizeUrl(normalizedUrl);\n    } catch (e) {\n        // Fallback to original logic if URL parsing fails\n        return canonicalizeUrl(urlWithoutHash);\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    createClientConfigurationError,\n    ClientConfigurationErrorCodes,\n} from \"../error/ClientConfigurationError.js\";\nimport { StringUtils } from \"../utils/StringUtils.js\";\nimport { IUri } from \"./IUri.js\";\nimport { AADAuthorityConstants, Constants } from \"../utils/Constants.js\";\nimport * as UrlUtils from \"../utils/UrlUtils.js\";\n\n/**\n * Url object class which can perform various transformations on url strings.\n */\nexport class UrlString {\n    // internal url string field\n    private _urlString: string;\n    public get urlString(): string {\n        return this._urlString;\n    }\n\n    constructor(url: string) {\n        this._urlString = url;\n        if (!this._urlString) {\n            // Throws error if url is empty\n            throw createClientConfigurationError(\n                ClientConfigurationErrorCodes.urlEmptyError\n            );\n        }\n\n        if (!url.includes(\"#\")) {\n            this._urlString = UrlString.canonicalizeUri(url);\n        }\n    }\n\n    /**\n     * Ensure urls are lower case and end with a / character.\n     * @param url\n     */\n    static canonicalizeUri(url: string): string {\n        if (url) {\n            let lowerCaseUrl = url.toLowerCase();\n\n            if (StringUtils.endsWith(lowerCaseUrl, \"?\")) {\n                lowerCaseUrl = lowerCaseUrl.slice(0, -1);\n            } else if (StringUtils.endsWith(lowerCaseUrl, \"?/\")) {\n                lowerCaseUrl = lowerCaseUrl.slice(0, -2);\n            }\n\n            if (!StringUtils.endsWith(lowerCaseUrl, \"/\")) {\n                lowerCaseUrl += \"/\";\n            }\n\n            return lowerCaseUrl;\n        }\n\n        return url;\n    }\n\n    /**\n     * Throws if urlString passed is not a valid authority URI string.\n     */\n    validateAsUri(): void {\n        // Attempts to parse url for uri components\n        let components;\n        try {\n            components = this.getUrlComponents();\n        } catch (e) {\n            throw createClientConfigurationError(\n                ClientConfigurationErrorCodes.urlParseError\n            );\n        }\n\n        // Throw error if URI or path segments are not parseable.\n        if (!components.HostNameAndPort || !components.PathSegments) {\n            throw createClientConfigurationError(\n                ClientConfigurationErrorCodes.urlParseError\n            );\n        }\n\n        // Throw error if uri is insecure.\n        if (\n            !components.Protocol ||\n            components.Protocol.toLowerCase() !== \"https:\"\n        ) {\n            throw createClientConfigurationError(\n                ClientConfigurationErrorCodes.authorityUriInsecure\n            );\n        }\n    }\n\n    /**\n     * Given a url and a query string return the url with provided query string appended\n     * @param url\n     * @param queryString\n     */\n    static appendQueryString(url: string, queryString: string): string {\n        if (!queryString) {\n            return url;\n        }\n\n        return url.indexOf(\"?\") < 0\n            ? `${url}?${queryString}`\n            : `${url}&${queryString}`;\n    }\n\n    /**\n     * Returns a url with the hash removed\n     * @param url\n     */\n    static removeHashFromUrl(url: string): string {\n        return UrlString.canonicalizeUri(url.split(\"#\")[0]);\n    }\n\n    /**\n     * Given a url like https://a:b/common/d?e=f#g, and a tenantId, returns https://a:b/tenantId/d\n     * @param href The url\n     * @param tenantId The tenant id to replace\n     */\n    replaceTenantPath(tenantId: string): UrlString {\n        const urlObject = this.getUrlComponents();\n        const pathArray = urlObject.PathSegments;\n        if (\n            tenantId &&\n            pathArray.length !== 0 &&\n            (pathArray[0] === AADAuthorityConstants.COMMON ||\n                pathArray[0] === AADAuthorityConstants.ORGANIZATIONS)\n        ) {\n            pathArray[0] = tenantId;\n        }\n        return UrlString.constructAuthorityUriFromObject(urlObject);\n    }\n\n    /**\n     * Parses out the components from a url string.\n     * @returns An object with the various components. Please cache this value insted of calling this multiple times on the same url.\n     */\n    getUrlComponents(): IUri {\n        // https://gist.github.com/curtisz/11139b2cfcaef4a261e0\n        const regEx = RegExp(\n            \"^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\\\?([^#]*))?(#(.*))?\"\n        );\n\n        // If url string does not match regEx, we throw an error\n        const match = this.urlString.match(regEx);\n        if (!match) {\n            throw createClientConfigurationError(\n                ClientConfigurationErrorCodes.urlParseError\n            );\n        }\n\n        // Url component object\n        const urlComponents = {\n            Protocol: match[1],\n            HostNameAndPort: match[4],\n            AbsolutePath: match[5],\n            QueryString: match[7],\n        } as IUri;\n\n        let pathSegments = urlComponents.AbsolutePath.split(\"/\");\n        pathSegments = pathSegments.filter((val) => val && val.length > 0); // remove empty elements\n        urlComponents.PathSegments = pathSegments;\n\n        if (\n            urlComponents.QueryString &&\n            urlComponents.QueryString.endsWith(\"/\")\n        ) {\n            urlComponents.QueryString = urlComponents.QueryString.substring(\n                0,\n                urlComponents.QueryString.length - 1\n            );\n        }\n        return urlComponents;\n    }\n\n    static getDomainFromUrl(url: string): string {\n        const regEx = RegExp(\"^([^:/?#]+://)?([^/?#]*)\");\n\n        const match = url.match(regEx);\n\n        if (!match) {\n            throw createClientConfigurationError(\n                ClientConfigurationErrorCodes.urlParseError\n            );\n        }\n\n        return match[2];\n    }\n\n    static getAbsoluteUrl(relativeUrl: string, baseUrl: string): string {\n        if (relativeUrl[0] === Constants.FORWARD_SLASH) {\n            const url = new UrlString(baseUrl);\n            const baseComponents = url.getUrlComponents();\n\n            return (\n                baseComponents.Protocol +\n                \"//\" +\n                baseComponents.HostNameAndPort +\n                relativeUrl\n            );\n        }\n\n        return relativeUrl;\n    }\n\n    static constructAuthorityUriFromObject(urlObject: IUri): UrlString {\n        return new UrlString(\n            urlObject.Protocol +\n                \"//\" +\n                urlObject.HostNameAndPort +\n                \"/\" +\n                urlObject.PathSegments.join(\"/\")\n        );\n    }\n\n    /**\n     * Check if the hash of the URL string contains known properties\n     * @deprecated This API will be removed in a future version\n     */\n    static hashContainsKnownProperties(response: string): boolean {\n        return !!UrlUtils.getDeserializedResponse(response);\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { Logger } from \"../logger/Logger.js\";\nimport { UrlString } from \"../url/UrlString.js\";\nimport { AuthorityMetadataSource } from \"../utils/Constants.js\";\nimport { StaticAuthorityOptions } from \"./AuthorityOptions.js\";\nimport { CloudDiscoveryMetadata } from \"./CloudDiscoveryMetadata.js\";\nimport { CloudInstanceDiscoveryResponse } from \"./CloudInstanceDiscoveryResponse.js\";\nimport { OpenIdConfigResponse } from \"./OpenIdConfigResponse.js\";\n\ntype RawMetadata = {\n    endpointMetadata: { [key: string]: OpenIdConfigResponse };\n    instanceDiscoveryMetadata: CloudInstanceDiscoveryResponse;\n};\n\nexport const rawMetdataJSON: RawMetadata = {\n    endpointMetadata: {\n        \"login.microsoftonline.com\": {\n            token_endpoint:\n                \"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token\",\n            jwks_uri:\n                \"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys\",\n            issuer: \"https://login.microsoftonline.com/{tenantid}/v2.0\",\n            authorization_endpoint:\n                \"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize\",\n            end_session_endpoint:\n                \"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout\",\n        },\n        \"login.chinacloudapi.cn\": {\n            token_endpoint:\n                \"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token\",\n            jwks_uri:\n                \"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys\",\n            issuer: \"https://login.partner.microsoftonline.cn/{tenantid}/v2.0\",\n            authorization_endpoint:\n                \"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize\",\n            end_session_endpoint:\n                \"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout\",\n        },\n        \"login.microsoftonline.us\": {\n            token_endpoint:\n                \"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token\",\n            jwks_uri:\n                \"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys\",\n            issuer: \"https://login.microsoftonline.us/{tenantid}/v2.0\",\n            authorization_endpoint:\n                \"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize\",\n            end_session_endpoint:\n                \"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout\",\n        },\n    },\n    instanceDiscoveryMetadata: {\n        tenant_discovery_endpoint:\n            \"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration\",\n        metadata: [\n            {\n                preferred_network: \"login.microsoftonline.com\",\n                preferred_cache: \"login.windows.net\",\n                aliases: [\n                    \"login.microsoftonline.com\",\n                    \"login.windows.net\",\n                    \"login.microsoft.com\",\n                    \"sts.windows.net\",\n                ],\n            },\n            {\n                preferred_network: \"login.partner.microsoftonline.cn\",\n                preferred_cache: \"login.partner.microsoftonline.cn\",\n                aliases: [\n                    \"login.partner.microsoftonline.cn\",\n                    \"login.chinacloudapi.cn\",\n                ],\n            },\n            {\n                preferred_network: \"login.microsoftonline.de\",\n                preferred_cache: \"login.microsoftonline.de\",\n                aliases: [\"login.microsoftonline.de\"],\n            },\n            {\n                preferred_network: \"login.microsoftonline.us\",\n                preferred_cache: \"login.microsoftonline.us\",\n                aliases: [\n                    \"login.microsoftonline.us\",\n                    \"login.usgovcloudapi.net\",\n                ],\n            },\n            {\n                preferred_network: \"login-us.microsoftonline.com\",\n                preferred_cache: \"login-us.microsoftonline.com\",\n                aliases: [\"login-us.microsoftonline.com\"],\n            },\n        ],\n    },\n};\n\nexport const EndpointMetadata = rawMetdataJSON.endpointMetadata;\nexport const InstanceDiscoveryMetadata =\n    rawMetdataJSON.instanceDiscoveryMetadata;\n\nexport const InstanceDiscoveryMetadataAliases: Set<String> = new Set();\nInstanceDiscoveryMetadata.metadata.forEach(\n    (metadataEntry: CloudDiscoveryMetadata) => {\n        metadataEntry.aliases.forEach((alias: string) => {\n            InstanceDiscoveryMetadataAliases.add(alias);\n        });\n    }\n);\n\n/**\n * Attempts to get an aliases array from the static authority metadata sources based on the canonical authority host\n * @param staticAuthorityOptions\n * @param logger\n * @returns\n */\nexport function getAliasesFromStaticSources(\n    staticAuthorityOptions: StaticAuthorityOptions,\n    logger?: Logger\n): string[] {\n    let staticAliases: string[] | undefined;\n    const canonicalAuthority = staticAuthorityOptions.canonicalAuthority;\n    if (canonicalAuthority) {\n        const authorityHost = new UrlString(\n            canonicalAuthority\n        ).getUrlComponents().HostNameAndPort;\n        staticAliases =\n            getAliasesFromMetadata(\n                authorityHost,\n                staticAuthorityOptions.cloudDiscoveryMetadata?.metadata,\n                AuthorityMetadataSource.CONFIG,\n                logger\n            ) ||\n            getAliasesFromMetadata(\n                authorityHost,\n                InstanceDiscoveryMetadata.metadata,\n                AuthorityMetadataSource.HARDCODED_VALUES,\n                logger\n            ) ||\n            staticAuthorityOptions.knownAuthorities;\n    }\n\n    return staticAliases || [];\n}\n\n/**\n * Returns aliases for from the raw cloud discovery metadata passed in\n * @param authorityHost\n * @param rawCloudDiscoveryMetadata\n * @returns\n */\nexport function getAliasesFromMetadata(\n    authorityHost?: string,\n    cloudDiscoveryMetadata?: CloudDiscoveryMetadata[],\n    source?: AuthorityMetadataSource,\n    logger?: Logger\n): string[] | null {\n    logger?.trace(`getAliasesFromMetadata called with source: ${source}`);\n    if (authorityHost && cloudDiscoveryMetadata) {\n        const metadata = getCloudDiscoveryMetadataFromNetworkResponse(\n            cloudDiscoveryMetadata,\n            authorityHost\n        );\n\n        if (metadata) {\n            logger?.trace(\n                `getAliasesFromMetadata: found cloud discovery metadata in ${source}, returning aliases`\n            );\n            return metadata.aliases;\n        } else {\n            logger?.trace(\n                `getAliasesFromMetadata: did not find cloud discovery metadata in ${source}`\n            );\n        }\n    }\n\n    return null;\n}\n\n/**\n * Get cloud discovery metadata for common authorities\n */\nexport function getCloudDiscoveryMetadataFromHardcodedValues(\n    authorityHost: string\n): CloudDiscoveryMetadata | null {\n    const metadata = getCloudDiscoveryMetadataFromNetworkResponse(\n        InstanceDiscoveryMetadata.metadata,\n        authorityHost\n    );\n    return metadata;\n}\n\n/**\n * Searches instance discovery network response for the entry that contains the host in the aliases list\n * @param response\n * @param authority\n */\nexport function getCloudDiscoveryMetadataFromNetworkResponse(\n    response: CloudDiscoveryMetadata[],\n    authorityHost: string\n): CloudDiscoveryMetadata | null {\n    for (let i = 0; i < response.length; i++) {\n        const metadata = response[i];\n        if (metadata.aliases.includes(authorityHost)) {\n            return metadata;\n        }\n    }\n\n    return null;\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nexport const cacheQuotaExceeded = \"cache_quota_exceeded\";\nexport const cacheErrorUnknown = \"cache_error_unknown\";\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { AuthError } from \"./AuthError.js\";\nimport * as CacheErrorCodes from \"./CacheErrorCodes.js\";\nexport { CacheErrorCodes };\n\nexport const CacheErrorMessages = {\n    [CacheErrorCodes.cacheQuotaExceeded]: \"Exceeded cache storage capacity.\",\n    [CacheErrorCodes.cacheErrorUnknown]:\n        \"Unexpected error occurred when using cache storage.\",\n};\n\n/**\n * Error thrown when there is an error with the cache\n */\nexport class CacheError extends AuthError {\n    /**\n     * Short string denoting error\n     */\n    errorCode: string;\n\n    /**\n     * Detailed description of error\n     */\n    errorMessage: string;\n\n    constructor(errorCode: string, errorMessage?: string) {\n        const message =\n            errorMessage ||\n            (CacheErrorMessages[errorCode]\n                ? CacheErrorMessages[errorCode]\n                : CacheErrorMessages[CacheErrorCodes.cacheErrorUnknown]);\n\n        super(`${errorCode}: ${message}`);\n        Object.setPrototypeOf(this, CacheError.prototype);\n\n        this.name = \"CacheError\";\n        this.errorCode = errorCode;\n        this.errorMessage = message;\n    }\n}\n\n/**\n * Helper function to wrap browser errors in a CacheError object\n * @param e\n * @returns\n */\nexport function createCacheError(e: unknown): CacheError {\n    if (!(e instanceof Error)) {\n        return new CacheError(CacheErrorCodes.cacheErrorUnknown);\n    }\n\n    if (\n        e.name === \"QuotaExceededError\" ||\n        e.name === \"NS_ERROR_DOM_QUOTA_REACHED\" ||\n        e.message.includes(\"exceeded the quota\")\n    ) {\n        return new CacheError(CacheErrorCodes.cacheQuotaExceeded);\n    } else {\n        return new CacheError(e.name, e.message);\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    AccountFilter,\n    CredentialFilter,\n    ValidCredentialType,\n    AppMetadataFilter,\n    AppMetadataCache,\n    TokenKeys,\n    TenantProfileFilter,\n} from \"./utils/CacheTypes.js\";\nimport { CacheRecord } from \"./entities/CacheRecord.js\";\nimport {\n    CredentialType,\n    APP_METADATA,\n    THE_FAMILY_ID,\n    AUTHORITY_METADATA_CONSTANTS,\n    AuthenticationScheme,\n} from \"../utils/Constants.js\";\nimport { CredentialEntity } from \"./entities/CredentialEntity.js\";\nimport { ScopeSet } from \"../request/ScopeSet.js\";\nimport { AccountEntity } from \"./entities/AccountEntity.js\";\nimport { AccessTokenEntity } from \"./entities/AccessTokenEntity.js\";\nimport { IdTokenEntity } from \"./entities/IdTokenEntity.js\";\nimport { RefreshTokenEntity } from \"./entities/RefreshTokenEntity.js\";\nimport { ICacheManager } from \"./interface/ICacheManager.js\";\nimport {\n    createClientAuthError,\n    ClientAuthErrorCodes,\n} from \"../error/ClientAuthError.js\";\nimport {\n    AccountInfo,\n    TenantProfile,\n    updateAccountTenantProfileData,\n} from \"../account/AccountInfo.js\";\nimport { AppMetadataEntity } from \"./entities/AppMetadataEntity.js\";\nimport { ServerTelemetryEntity } from \"./entities/ServerTelemetryEntity.js\";\nimport { ThrottlingEntity } from \"./entities/ThrottlingEntity.js\";\nimport { extractTokenClaims } from \"../account/AuthToken.js\";\nimport { ICrypto } from \"../crypto/ICrypto.js\";\nimport { AuthorityMetadataEntity } from \"./entities/AuthorityMetadataEntity.js\";\nimport { BaseAuthRequest } from \"../request/BaseAuthRequest.js\";\nimport { Logger } from \"../logger/Logger.js\";\nimport { name, version } from \"../packageMetadata.js\";\nimport { StoreInCache } from \"../request/StoreInCache.js\";\nimport { getAliasesFromStaticSources } from \"../authority/AuthorityMetadata.js\";\nimport { StaticAuthorityOptions } from \"../authority/AuthorityOptions.js\";\nimport { TokenClaims } from \"../account/TokenClaims.js\";\nimport { IPerformanceClient } from \"../telemetry/performance/IPerformanceClient.js\";\nimport { createCacheError } from \"../error/CacheError.js\";\nimport { AuthError } from \"../error/AuthError.js\";\n\n/**\n * Interface class which implement cache storage functions used by MSAL to perform validity checks, and store tokens.\n * @internal\n */\nexport abstract class CacheManager implements ICacheManager {\n    protected clientId: string;\n    protected cryptoImpl: ICrypto;\n    // Instance of logger for functions defined in the msal-common layer\n    private commonLogger: Logger;\n    private staticAuthorityOptions?: StaticAuthorityOptions;\n    protected performanceClient: IPerformanceClient;\n\n    constructor(\n        clientId: string,\n        cryptoImpl: ICrypto,\n        logger: Logger,\n        performanceClient: IPerformanceClient,\n        staticAuthorityOptions?: StaticAuthorityOptions\n    ) {\n        this.clientId = clientId;\n        this.cryptoImpl = cryptoImpl;\n        this.commonLogger = logger.clone(name, version);\n        this.staticAuthorityOptions = staticAuthorityOptions;\n        this.performanceClient = performanceClient;\n    }\n\n    /**\n     * fetch the account entity from the platform cache\n     *  @param accountKey\n     */\n    abstract getAccount(\n        accountKey: string,\n        correlationId: string\n    ): AccountEntity | null;\n\n    /**\n     * set account entity in the platform cache\n     * @param account\n     * @param correlationId\n     */\n    abstract setAccount(\n        account: AccountEntity,\n        correlationId: string,\n        kmsi: boolean\n    ): Promise<void>;\n\n    /**\n     * fetch the idToken entity from the platform cache\n     * @param idTokenKey\n     */\n    abstract getIdTokenCredential(\n        idTokenKey: string,\n        correlationId: string\n    ): IdTokenEntity | null;\n\n    /**\n     * set idToken entity to the platform cache\n     * @param idToken\n     * @param correlationId\n     */\n    abstract setIdTokenCredential(\n        idToken: IdTokenEntity,\n        correlationId: string,\n        kmsi: boolean\n    ): Promise<void>;\n\n    /**\n     * fetch the idToken entity from the platform cache\n     * @param accessTokenKey\n     */\n    abstract getAccessTokenCredential(\n        accessTokenKey: string,\n        correlationId: string\n    ): AccessTokenEntity | null;\n\n    /**\n     * set accessToken entity to the platform cache\n     * @param accessToken\n     * @param correlationId\n     */\n    abstract setAccessTokenCredential(\n        accessToken: AccessTokenEntity,\n        correlationId: string,\n        kmsi: boolean\n    ): Promise<void>;\n\n    /**\n     * fetch the idToken entity from the platform cache\n     * @param refreshTokenKey\n     */\n    abstract getRefreshTokenCredential(\n        refreshTokenKey: string,\n        correlationId: string\n    ): RefreshTokenEntity | null;\n\n    /**\n     * set refreshToken entity to the platform cache\n     * @param refreshToken\n     * @param correlationId\n     */\n    abstract setRefreshTokenCredential(\n        refreshToken: RefreshTokenEntity,\n        correlationId: string,\n        kmsi: boolean\n    ): Promise<void>;\n\n    /**\n     * fetch appMetadata entity from the platform cache\n     * @param appMetadataKey\n     */\n    abstract getAppMetadata(appMetadataKey: string): AppMetadataEntity | null;\n\n    /**\n     * set appMetadata entity to the platform cache\n     * @param appMetadata\n     */\n    abstract setAppMetadata(\n        appMetadata: AppMetadataEntity,\n        correlationId: string\n    ): void;\n\n    /**\n     * fetch server telemetry entity from the platform cache\n     * @param serverTelemetryKey\n     */\n    abstract getServerTelemetry(\n        serverTelemetryKey: string\n    ): ServerTelemetryEntity | null;\n\n    /**\n     * set server telemetry entity to the platform cache\n     * @param serverTelemetryKey\n     * @param serverTelemetry\n     */\n    abstract setServerTelemetry(\n        serverTelemetryKey: string,\n        serverTelemetry: ServerTelemetryEntity,\n        correlationId: string\n    ): void;\n\n    /**\n     * fetch cloud discovery metadata entity from the platform cache\n     * @param key\n     */\n    abstract getAuthorityMetadata(key: string): AuthorityMetadataEntity | null;\n\n    /**\n     *\n     */\n    abstract getAuthorityMetadataKeys(): Array<string>;\n\n    /**\n     * set cloud discovery metadata entity to the platform cache\n     * @param key\n     * @param value\n     */\n    abstract setAuthorityMetadata(\n        key: string,\n        value: AuthorityMetadataEntity\n    ): void;\n\n    /**\n     * fetch throttling entity from the platform cache\n     * @param throttlingCacheKey\n     */\n    abstract getThrottlingCache(\n        throttlingCacheKey: string\n    ): ThrottlingEntity | null;\n\n    /**\n     * set throttling entity to the platform cache\n     * @param throttlingCacheKey\n     * @param throttlingCache\n     */\n    abstract setThrottlingCache(\n        throttlingCacheKey: string,\n        throttlingCache: ThrottlingEntity,\n        correlationId: string\n    ): void;\n\n    /**\n     * Function to remove an item from cache given its key.\n     * @param key\n     */\n    abstract removeItem(key: string, correlationId: string): void;\n\n    /**\n     * Function which retrieves all current keys from the cache.\n     */\n    abstract getKeys(): string[];\n\n    /**\n     * Function which retrieves all account keys from the cache\n     */\n    abstract getAccountKeys(): string[];\n\n    /**\n     * Function which retrieves all token keys from the cache\n     */\n    abstract getTokenKeys(): TokenKeys;\n\n    /**\n     * Returns credential cache key from the entity\n     * @param credential\n     */\n    abstract generateCredentialKey(credential: CredentialEntity): string;\n\n    /**\n     * Returns the account cache key from the account info\n     * @param account\n     */\n    abstract generateAccountKey(account: AccountInfo): string;\n\n    /**\n     * Returns all the accounts in the cache that match the optional filter. If no filter is provided, all accounts are returned.\n     * @param accountFilter - (Optional) filter to narrow down the accounts returned\n     * @returns Array of AccountInfo objects in cache\n     */\n    getAllAccounts(\n        accountFilter: AccountFilter,\n        correlationId: string\n    ): AccountInfo[] {\n        return this.buildTenantProfiles(\n            this.getAccountsFilteredBy(accountFilter, correlationId),\n            correlationId,\n            accountFilter\n        );\n    }\n\n    /**\n     * Gets first tenanted AccountInfo object found based on provided filters\n     */\n    getAccountInfoFilteredBy(\n        accountFilter: AccountFilter,\n        correlationId: string\n    ): AccountInfo | null {\n        if (\n            Object.keys(accountFilter).length === 0 ||\n            Object.values(accountFilter).every((value) => !value)\n        ) {\n            this.commonLogger.warning(\n                \"getAccountInfoFilteredBy: Account filter is empty or invalid, returning null\"\n            );\n            return null;\n        }\n        const allAccounts = this.getAllAccounts(accountFilter, correlationId);\n        if (allAccounts.length > 1) {\n            // If one or more accounts are found, prioritize accounts that have an ID token\n            const sortedAccounts = allAccounts.sort((account) => {\n                return account.idTokenClaims ? -1 : 1;\n            });\n            return sortedAccounts[0];\n        } else if (allAccounts.length === 1) {\n            // If only one account is found, return it regardless of whether a matching ID token was found\n            return allAccounts[0];\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * Returns a single matching\n     * @param accountFilter\n     * @returns\n     */\n    getBaseAccountInfo(\n        accountFilter: AccountFilter,\n        correlationId: string\n    ): AccountInfo | null {\n        const accountEntities = this.getAccountsFilteredBy(\n            accountFilter,\n            correlationId\n        );\n        if (accountEntities.length > 0) {\n            return AccountEntity.getAccountInfo(accountEntities[0]);\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * Matches filtered account entities with cached ID tokens that match the tenant profile-specific account filters\n     * and builds the account info objects from the matching ID token's claims\n     * @param cachedAccounts\n     * @param accountFilter\n     * @returns Array of AccountInfo objects that match account and tenant profile filters\n     */\n    private buildTenantProfiles(\n        cachedAccounts: AccountEntity[],\n        correlationId: string,\n        accountFilter?: AccountFilter\n    ): AccountInfo[] {\n        return cachedAccounts.flatMap((accountEntity) => {\n            return this.getTenantProfilesFromAccountEntity(\n                accountEntity,\n                correlationId,\n                accountFilter?.tenantId,\n                accountFilter\n            );\n        });\n    }\n\n    private getTenantedAccountInfoByFilter(\n        accountInfo: AccountInfo,\n        tokenKeys: TokenKeys,\n        tenantProfile: TenantProfile,\n        correlationId: string,\n        tenantProfileFilter?: TenantProfileFilter\n    ): AccountInfo | null {\n        let tenantedAccountInfo: AccountInfo | null = null;\n        let idTokenClaims: TokenClaims | undefined;\n\n        if (tenantProfileFilter) {\n            if (\n                !this.tenantProfileMatchesFilter(\n                    tenantProfile,\n                    tenantProfileFilter\n                )\n            ) {\n                return null;\n            }\n        }\n\n        const idToken = this.getIdToken(\n            accountInfo,\n            correlationId,\n            tokenKeys,\n            tenantProfile.tenantId\n        );\n\n        if (idToken) {\n            idTokenClaims = extractTokenClaims(\n                idToken.secret,\n                this.cryptoImpl.base64Decode\n            );\n\n            if (\n                !this.idTokenClaimsMatchTenantProfileFilter(\n                    idTokenClaims,\n                    tenantProfileFilter\n                )\n            ) {\n                // ID token sourced claims don't match so this tenant profile is not a match\n                return null;\n            }\n        }\n\n        // Expand tenant profile into account info based on matching tenant profile and if available matching ID token claims\n        tenantedAccountInfo = updateAccountTenantProfileData(\n            accountInfo,\n            tenantProfile,\n            idTokenClaims,\n            idToken?.secret\n        );\n\n        return tenantedAccountInfo;\n    }\n\n    private getTenantProfilesFromAccountEntity(\n        accountEntity: AccountEntity,\n        correlationId: string,\n        targetTenantId?: string,\n        tenantProfileFilter?: TenantProfileFilter\n    ): AccountInfo[] {\n        const accountInfo = AccountEntity.getAccountInfo(accountEntity);\n        let searchTenantProfiles: Map<string, TenantProfile> =\n            accountInfo.tenantProfiles || new Map<string, TenantProfile>();\n        const tokenKeys = this.getTokenKeys();\n\n        // If a tenant ID was provided, only return the tenant profile for that tenant ID if it exists\n        if (targetTenantId) {\n            const tenantProfile = searchTenantProfiles.get(targetTenantId);\n            if (tenantProfile) {\n                // Reduce search field to just this tenant profile\n                searchTenantProfiles = new Map<string, TenantProfile>([\n                    [targetTenantId, tenantProfile],\n                ]);\n            } else {\n                // No tenant profile for search tenant ID, return empty array\n                return [];\n            }\n        }\n\n        const matchingTenantProfiles: AccountInfo[] = [];\n        searchTenantProfiles.forEach((tenantProfile: TenantProfile) => {\n            const tenantedAccountInfo = this.getTenantedAccountInfoByFilter(\n                accountInfo,\n                tokenKeys,\n                tenantProfile,\n                correlationId,\n                tenantProfileFilter\n            );\n            if (tenantedAccountInfo) {\n                matchingTenantProfiles.push(tenantedAccountInfo);\n            }\n        });\n\n        return matchingTenantProfiles;\n    }\n\n    private tenantProfileMatchesFilter(\n        tenantProfile: TenantProfile,\n        tenantProfileFilter: TenantProfileFilter\n    ): boolean {\n        if (\n            !!tenantProfileFilter.localAccountId &&\n            !this.matchLocalAccountIdFromTenantProfile(\n                tenantProfile,\n                tenantProfileFilter.localAccountId\n            )\n        ) {\n            return false;\n        }\n\n        if (\n            !!tenantProfileFilter.name &&\n            !(tenantProfile.name === tenantProfileFilter.name)\n        ) {\n            return false;\n        }\n\n        if (\n            tenantProfileFilter.isHomeTenant !== undefined &&\n            !(tenantProfile.isHomeTenant === tenantProfileFilter.isHomeTenant)\n        ) {\n            return false;\n        }\n\n        return true;\n    }\n\n    private idTokenClaimsMatchTenantProfileFilter(\n        idTokenClaims: TokenClaims,\n        tenantProfileFilter?: TenantProfileFilter\n    ): boolean {\n        // Tenant Profile filtering\n        if (tenantProfileFilter) {\n            if (\n                !!tenantProfileFilter.localAccountId &&\n                !this.matchLocalAccountIdFromTokenClaims(\n                    idTokenClaims,\n                    tenantProfileFilter.localAccountId\n                )\n            ) {\n                return false;\n            }\n\n            if (\n                !!tenantProfileFilter.loginHint &&\n                !this.matchLoginHintFromTokenClaims(\n                    idTokenClaims,\n                    tenantProfileFilter.loginHint\n                )\n            ) {\n                return false;\n            }\n\n            if (\n                !!tenantProfileFilter.username &&\n                !this.matchUsername(\n                    idTokenClaims.preferred_username,\n                    tenantProfileFilter.username\n                )\n            ) {\n                return false;\n            }\n\n            if (\n                !!tenantProfileFilter.name &&\n                !this.matchName(idTokenClaims, tenantProfileFilter.name)\n            ) {\n                return false;\n            }\n\n            if (\n                !!tenantProfileFilter.sid &&\n                !this.matchSid(idTokenClaims, tenantProfileFilter.sid)\n            ) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * saves a cache record\n     * @param cacheRecord {CacheRecord}\n     * @param correlationId {?string} correlation id\n     * @param kmsi - Keep Me Signed In\n     * @param storeInCache {?StoreInCache}\n     */\n    async saveCacheRecord(\n        cacheRecord: CacheRecord,\n        correlationId: string,\n        kmsi: boolean,\n        storeInCache?: StoreInCache\n    ): Promise<void> {\n        if (!cacheRecord) {\n            throw createClientAuthError(\n                ClientAuthErrorCodes.invalidCacheRecord\n            );\n        }\n\n        try {\n            if (!!cacheRecord.account) {\n                await this.setAccount(cacheRecord.account, correlationId, kmsi);\n            }\n\n            if (!!cacheRecord.idToken && storeInCache?.idToken !== false) {\n                await this.setIdTokenCredential(\n                    cacheRecord.idToken,\n                    correlationId,\n                    kmsi\n                );\n            }\n\n            if (\n                !!cacheRecord.accessToken &&\n                storeInCache?.accessToken !== false\n            ) {\n                await this.saveAccessToken(\n                    cacheRecord.accessToken,\n                    correlationId,\n                    kmsi\n                );\n            }\n\n            if (\n                !!cacheRecord.refreshToken &&\n                storeInCache?.refreshToken !== false\n            ) {\n                await this.setRefreshTokenCredential(\n                    cacheRecord.refreshToken,\n                    correlationId,\n                    kmsi\n                );\n            }\n\n            if (!!cacheRecord.appMetadata) {\n                this.setAppMetadata(cacheRecord.appMetadata, correlationId);\n            }\n        } catch (e: unknown) {\n            this.commonLogger?.error(`CacheManager.saveCacheRecord: failed`);\n            if (e instanceof AuthError) {\n                throw e;\n            } else {\n                throw createCacheError(e);\n            }\n        }\n    }\n\n    /**\n     * saves access token credential\n     * @param credential\n     */\n    private async saveAccessToken(\n        credential: AccessTokenEntity,\n        correlationId: string,\n        kmsi: boolean\n    ): Promise<void> {\n        const accessTokenFilter: CredentialFilter = {\n            clientId: credential.clientId,\n            credentialType: credential.credentialType,\n            environment: credential.environment,\n            homeAccountId: credential.homeAccountId,\n            realm: credential.realm,\n            tokenType: credential.tokenType,\n            requestedClaimsHash: credential.requestedClaimsHash,\n        };\n\n        const tokenKeys = this.getTokenKeys();\n        const currentScopes = ScopeSet.fromString(credential.target);\n\n        tokenKeys.accessToken.forEach((key) => {\n            if (\n                !this.accessTokenKeyMatchesFilter(key, accessTokenFilter, false)\n            ) {\n                return;\n            }\n\n            const tokenEntity = this.getAccessTokenCredential(\n                key,\n                correlationId\n            );\n\n            if (\n                tokenEntity &&\n                this.credentialMatchesFilter(tokenEntity, accessTokenFilter)\n            ) {\n                const tokenScopeSet = ScopeSet.fromString(tokenEntity.target);\n                if (tokenScopeSet.intersectingScopeSets(currentScopes)) {\n                    this.removeAccessToken(key, correlationId);\n                }\n            }\n        });\n        await this.setAccessTokenCredential(credential, correlationId, kmsi);\n    }\n\n    /**\n     * Retrieve account entities matching all provided tenant-agnostic filters; if no filter is set, get all account entities in the cache\n     * Not checking for casing as keys are all generated in lower case, remember to convert to lower case if object properties are compared\n     * @param accountFilter - An object containing Account properties to filter by\n     */\n    getAccountsFilteredBy(\n        accountFilter: AccountFilter,\n        correlationId: string\n    ): AccountEntity[] {\n        const allAccountKeys = this.getAccountKeys();\n        const matchingAccounts: AccountEntity[] = [];\n        allAccountKeys.forEach((cacheKey) => {\n            const entity: AccountEntity | null = this.getAccount(\n                cacheKey,\n                correlationId\n            );\n\n            // Match base account fields\n\n            if (!entity) {\n                return;\n            }\n\n            if (\n                !!accountFilter.homeAccountId &&\n                !this.matchHomeAccountId(entity, accountFilter.homeAccountId)\n            ) {\n                return;\n            }\n\n            if (\n                !!accountFilter.username &&\n                !this.matchUsername(entity.username, accountFilter.username)\n            ) {\n                return;\n            }\n\n            if (\n                !!accountFilter.environment &&\n                !this.matchEnvironment(entity, accountFilter.environment)\n            ) {\n                return;\n            }\n\n            if (\n                !!accountFilter.realm &&\n                !this.matchRealm(entity, accountFilter.realm)\n            ) {\n                return;\n            }\n\n            if (\n                !!accountFilter.nativeAccountId &&\n                !this.matchNativeAccountId(\n                    entity,\n                    accountFilter.nativeAccountId\n                )\n            ) {\n                return;\n            }\n\n            if (\n                !!accountFilter.authorityType &&\n                !this.matchAuthorityType(entity, accountFilter.authorityType)\n            ) {\n                return;\n            }\n\n            // If at least one tenant profile matches the tenant profile filter, add the account to the list of matching accounts\n            const tenantProfileFilter: TenantProfileFilter = {\n                localAccountId: accountFilter?.localAccountId,\n                name: accountFilter?.name,\n            };\n\n            const matchingTenantProfiles = entity.tenantProfiles?.filter(\n                (tenantProfile: TenantProfile) => {\n                    return this.tenantProfileMatchesFilter(\n                        tenantProfile,\n                        tenantProfileFilter\n                    );\n                }\n            );\n\n            if (matchingTenantProfiles && matchingTenantProfiles.length === 0) {\n                // No tenant profile for this account matches filter, don't add to list of matching accounts\n                return;\n            }\n\n            matchingAccounts.push(entity);\n        });\n\n        return matchingAccounts;\n    }\n\n    /**\n     * Returns whether or not the given credential entity matches the filter\n     * @param entity\n     * @param filter\n     * @returns\n     */\n    credentialMatchesFilter(\n        entity: ValidCredentialType,\n        filter: CredentialFilter\n    ): boolean {\n        if (!!filter.clientId && !this.matchClientId(entity, filter.clientId)) {\n            return false;\n        }\n\n        if (\n            !!filter.userAssertionHash &&\n            !this.matchUserAssertionHash(entity, filter.userAssertionHash)\n        ) {\n            return false;\n        }\n\n        /*\n         * homeAccountId can be undefined, and we want to filter out cached items that have a homeAccountId of \"\"\n         * because we don't want a client_credential request to return a cached token that has a homeAccountId\n         */\n        if (\n            typeof filter.homeAccountId === \"string\" &&\n            !this.matchHomeAccountId(entity, filter.homeAccountId)\n        ) {\n            return false;\n        }\n\n        if (\n            !!filter.environment &&\n            !this.matchEnvironment(entity, filter.environment)\n        ) {\n            return false;\n        }\n\n        if (!!filter.realm && !this.matchRealm(entity, filter.realm)) {\n            return false;\n        }\n\n        if (\n            !!filter.credentialType &&\n            !this.matchCredentialType(entity, filter.credentialType)\n        ) {\n            return false;\n        }\n\n        if (!!filter.familyId && !this.matchFamilyId(entity, filter.familyId)) {\n            return false;\n        }\n\n        /*\n         * idTokens do not have \"target\", target specific refreshTokens do exist for some types of authentication\n         * Resource specific refresh tokens case will be added when the support is deemed necessary\n         */\n        if (!!filter.target && !this.matchTarget(entity, filter.target)) {\n            return false;\n        }\n\n        // If request OR cached entity has requested Claims Hash, check if they match\n        if (filter.requestedClaimsHash || entity.requestedClaimsHash) {\n            // Don't match if either is undefined or they are different\n            if (entity.requestedClaimsHash !== filter.requestedClaimsHash) {\n                return false;\n            }\n        }\n\n        // Access Token with Auth Scheme specific matching\n        if (\n            entity.credentialType ===\n            CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME\n        ) {\n            if (\n                !!filter.tokenType &&\n                !this.matchTokenType(entity, filter.tokenType)\n            ) {\n                return false;\n            }\n\n            // KeyId (sshKid) in request must match cached SSH certificate keyId because SSH cert is bound to a specific key\n            if (filter.tokenType === AuthenticationScheme.SSH) {\n                if (filter.keyId && !this.matchKeyId(entity, filter.keyId)) {\n                    return false;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * retrieve appMetadata matching all provided filters; if no filter is set, get all appMetadata\n     * @param filter\n     */\n    getAppMetadataFilteredBy(filter: AppMetadataFilter): AppMetadataCache {\n        const allCacheKeys = this.getKeys();\n        const matchingAppMetadata: AppMetadataCache = {};\n\n        allCacheKeys.forEach((cacheKey) => {\n            // don't parse any non-appMetadata type cache entities\n            if (!this.isAppMetadata(cacheKey)) {\n                return;\n            }\n\n            // Attempt retrieval\n            const entity = this.getAppMetadata(cacheKey);\n\n            if (!entity) {\n                return;\n            }\n\n            if (\n                !!filter.environment &&\n                !this.matchEnvironment(entity, filter.environment)\n            ) {\n                return;\n            }\n\n            if (\n                !!filter.clientId &&\n                !this.matchClientId(entity, filter.clientId)\n            ) {\n                return;\n            }\n\n            matchingAppMetadata[cacheKey] = entity;\n        });\n\n        return matchingAppMetadata;\n    }\n\n    /**\n     * retrieve authorityMetadata that contains a matching alias\n     * @param filter\n     */\n    getAuthorityMetadataByAlias(host: string): AuthorityMetadataEntity | null {\n        const allCacheKeys = this.getAuthorityMetadataKeys();\n        let matchedEntity = null;\n\n        allCacheKeys.forEach((cacheKey) => {\n            // don't parse any non-authorityMetadata type cache entities\n            if (\n                !this.isAuthorityMetadata(cacheKey) ||\n                cacheKey.indexOf(this.clientId) === -1\n            ) {\n                return;\n            }\n\n            // Attempt retrieval\n            const entity = this.getAuthorityMetadata(cacheKey);\n\n            if (!entity) {\n                return;\n            }\n\n            if (entity.aliases.indexOf(host) === -1) {\n                return;\n            }\n\n            matchedEntity = entity;\n        });\n\n        return matchedEntity;\n    }\n\n    /**\n     * Removes all accounts and related tokens from cache.\n     */\n    removeAllAccounts(correlationId: string): void {\n        const accounts = this.getAllAccounts({}, correlationId);\n        accounts.forEach((account) => {\n            this.removeAccount(account, correlationId);\n        });\n    }\n\n    /**\n     * Removes the account and related tokens for a given account key\n     * @param account\n     */\n    removeAccount(account: AccountInfo, correlationId: string): void {\n        this.removeAccountContext(account, correlationId);\n        const accountKeys = this.getAccountKeys();\n        const keyFilter = (key: string): boolean => {\n            return (\n                key.includes(account.homeAccountId) &&\n                key.includes(account.environment)\n            );\n        };\n        accountKeys.filter(keyFilter).forEach((key) => {\n            this.removeItem(key, correlationId);\n            this.performanceClient.incrementFields(\n                { accountsRemoved: 1 },\n                correlationId\n            );\n        });\n    }\n\n    /**\n     * Removes credentials associated with the provided account\n     * @param account\n     */\n    removeAccountContext(account: AccountInfo, correlationId: string): void {\n        const allTokenKeys = this.getTokenKeys();\n        const keyFilter = (key: string): boolean => {\n            return (\n                key.includes(account.homeAccountId) &&\n                key.includes(account.environment)\n            );\n        };\n\n        allTokenKeys.idToken.filter(keyFilter).forEach((key) => {\n            this.removeIdToken(key, correlationId);\n        });\n\n        allTokenKeys.accessToken.filter(keyFilter).forEach((key) => {\n            this.removeAccessToken(key, correlationId);\n        });\n\n        allTokenKeys.refreshToken.filter(keyFilter).forEach((key) => {\n            this.removeRefreshToken(key, correlationId);\n        });\n    }\n\n    /**\n     * Removes accessToken from the cache\n     * @param key\n     * @param correlationId\n     */\n    removeAccessToken(key: string, correlationId: string): void {\n        const credential = this.getAccessTokenCredential(key, correlationId);\n        this.removeItem(key, correlationId);\n        this.performanceClient.incrementFields(\n            { accessTokensRemoved: 1 },\n            correlationId\n        );\n\n        if (\n            !credential ||\n            credential.credentialType.toLowerCase() !==\n                CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase() ||\n            credential.tokenType !== AuthenticationScheme.POP\n        ) {\n            // If the credential is not a PoP token, we can return\n            return;\n        }\n\n        // Remove Token Binding Key from key store for PoP Tokens Credentials\n        const kid = credential.keyId;\n\n        if (kid) {\n            void this.cryptoImpl.removeTokenBindingKey(kid).catch(() => {\n                this.commonLogger.error(\n                    `Failed to remove token binding key ${kid}`,\n                    correlationId\n                );\n                this.performanceClient?.incrementFields(\n                    { removeTokenBindingKeyFailure: 1 },\n                    correlationId\n                );\n            });\n        }\n    }\n\n    /**\n     * Removes all app metadata objects from cache.\n     */\n    removeAppMetadata(correlationId: string): boolean {\n        const allCacheKeys = this.getKeys();\n        allCacheKeys.forEach((cacheKey) => {\n            if (this.isAppMetadata(cacheKey)) {\n                this.removeItem(cacheKey, correlationId);\n            }\n        });\n\n        return true;\n    }\n\n    /**\n     * Retrieve IdTokenEntity from cache\n     * @param account {AccountInfo}\n     * @param tokenKeys {?TokenKeys}\n     * @param targetRealm {?string}\n     * @param performanceClient {?IPerformanceClient}\n     * @param correlationId {?string}\n     */\n    getIdToken(\n        account: AccountInfo,\n        correlationId: string,\n        tokenKeys?: TokenKeys,\n        targetRealm?: string,\n        performanceClient?: IPerformanceClient\n    ): IdTokenEntity | null {\n        this.commonLogger.trace(\"CacheManager - getIdToken called\");\n        const idTokenFilter: CredentialFilter = {\n            homeAccountId: account.homeAccountId,\n            environment: account.environment,\n            credentialType: CredentialType.ID_TOKEN,\n            clientId: this.clientId,\n            realm: targetRealm,\n        };\n\n        const idTokenMap: Map<string, IdTokenEntity> = this.getIdTokensByFilter(\n            idTokenFilter,\n            correlationId,\n            tokenKeys\n        );\n\n        const numIdTokens = idTokenMap.size;\n\n        if (numIdTokens < 1) {\n            this.commonLogger.info(\"CacheManager:getIdToken - No token found\");\n            return null;\n        } else if (numIdTokens > 1) {\n            let tokensToBeRemoved: Map<string, IdTokenEntity> = idTokenMap;\n            // Multiple tenant profiles and no tenant specified, pick home account\n            if (!targetRealm) {\n                const homeIdTokenMap: Map<string, IdTokenEntity> = new Map<\n                    string,\n                    IdTokenEntity\n                >();\n                idTokenMap.forEach((idToken, key) => {\n                    if (idToken.realm === account.tenantId) {\n                        homeIdTokenMap.set(key, idToken);\n                    }\n                });\n                const numHomeIdTokens = homeIdTokenMap.size;\n                if (numHomeIdTokens < 1) {\n                    this.commonLogger.info(\n                        \"CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result\"\n                    );\n                    return idTokenMap.values().next().value;\n                } else if (numHomeIdTokens === 1) {\n                    this.commonLogger.info(\n                        \"CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile\"\n                    );\n                    return homeIdTokenMap.values().next().value;\n                } else {\n                    // Multiple ID tokens for home tenant profile, remove all and return null\n                    tokensToBeRemoved = homeIdTokenMap;\n                }\n            }\n            // Multiple tokens for a single tenant profile, remove all and return null\n            this.commonLogger.info(\n                \"CacheManager:getIdToken - Multiple matching ID tokens found, clearing them\"\n            );\n            tokensToBeRemoved.forEach((idToken, key) => {\n                this.removeIdToken(key, correlationId);\n            });\n            if (performanceClient && correlationId) {\n                performanceClient.addFields(\n                    { multiMatchedID: idTokenMap.size },\n                    correlationId\n                );\n            }\n            return null;\n        }\n\n        this.commonLogger.info(\"CacheManager:getIdToken - Returning ID token\");\n        return idTokenMap.values().next().value;\n    }\n\n    /**\n     * Gets all idTokens matching the given filter\n     * @param filter\n     * @returns\n     */\n    getIdTokensByFilter(\n        filter: CredentialFilter,\n        correlationId: string,\n        tokenKeys?: TokenKeys\n    ): Map<string, IdTokenEntity> {\n        const idTokenKeys =\n            (tokenKeys && tokenKeys.idToken) || this.getTokenKeys().idToken;\n\n        const idTokens: Map<string, IdTokenEntity> = new Map<\n            string,\n            IdTokenEntity\n        >();\n        idTokenKeys.forEach((key) => {\n            if (\n                !this.idTokenKeyMatchesFilter(key, {\n                    clientId: this.clientId,\n                    ...filter,\n                })\n            ) {\n                return;\n            }\n            const idToken = this.getIdTokenCredential(key, correlationId);\n            if (idToken && this.credentialMatchesFilter(idToken, filter)) {\n                idTokens.set(key, idToken);\n            }\n        });\n\n        return idTokens;\n    }\n\n    /**\n     * Validate the cache key against filter before retrieving and parsing cache value\n     * @param key\n     * @param filter\n     * @returns\n     */\n    idTokenKeyMatchesFilter(\n        inputKey: string,\n        filter: CredentialFilter\n    ): boolean {\n        const key = inputKey.toLowerCase();\n        if (\n            filter.clientId &&\n            key.indexOf(filter.clientId.toLowerCase()) === -1\n        ) {\n            return false;\n        }\n\n        if (\n            filter.homeAccountId &&\n            key.indexOf(filter.homeAccountId.toLowerCase()) === -1\n        ) {\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Removes idToken from the cache\n     * @param key\n     */\n    removeIdToken(key: string, correlationId: string): void {\n        this.removeItem(key, correlationId);\n    }\n\n    /**\n     * Removes refresh token from the cache\n     * @param key\n     */\n    removeRefreshToken(key: string, correlationId: string): void {\n        this.removeItem(key, correlationId);\n    }\n\n    /**\n     * Retrieve AccessTokenEntity from cache\n     * @param account {AccountInfo}\n     * @param request {BaseAuthRequest}\n     * @param correlationId {?string}\n     * @param tokenKeys {?TokenKeys}\n     * @param performanceClient {?IPerformanceClient}\n     */\n    getAccessToken(\n        account: AccountInfo,\n        request: BaseAuthRequest,\n        tokenKeys?: TokenKeys,\n        targetRealm?: string\n    ): AccessTokenEntity | null {\n        const correlationId = request.correlationId;\n        this.commonLogger.trace(\n            \"CacheManager - getAccessToken called\",\n            correlationId\n        );\n        const scopes = ScopeSet.createSearchScopes(request.scopes);\n        const authScheme =\n            request.authenticationScheme || AuthenticationScheme.BEARER;\n        /*\n         * Distinguish between Bearer and PoP/SSH token cache types\n         * Cast to lowercase to handle \"bearer\" from ADFS\n         */\n        const credentialType =\n            authScheme &&\n            authScheme.toLowerCase() !==\n                AuthenticationScheme.BEARER.toLowerCase()\n                ? CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME\n                : CredentialType.ACCESS_TOKEN;\n\n        const accessTokenFilter: CredentialFilter = {\n            homeAccountId: account.homeAccountId,\n            environment: account.environment,\n            credentialType: credentialType,\n            clientId: this.clientId,\n            realm: targetRealm || account.tenantId,\n            target: scopes,\n            tokenType: authScheme,\n            keyId: request.sshKid,\n            requestedClaimsHash: request.requestedClaimsHash,\n        };\n\n        const accessTokenKeys =\n            (tokenKeys && tokenKeys.accessToken) ||\n            this.getTokenKeys().accessToken;\n        const accessTokens: AccessTokenEntity[] = [];\n\n        accessTokenKeys.forEach((key) => {\n            // Validate key\n            if (\n                this.accessTokenKeyMatchesFilter(key, accessTokenFilter, true)\n            ) {\n                const accessToken = this.getAccessTokenCredential(\n                    key,\n                    correlationId\n                );\n\n                // Validate value\n                if (\n                    accessToken &&\n                    this.credentialMatchesFilter(accessToken, accessTokenFilter)\n                ) {\n                    accessTokens.push(accessToken);\n                }\n            }\n        });\n\n        const numAccessTokens = accessTokens.length;\n        if (numAccessTokens < 1) {\n            this.commonLogger.info(\n                \"CacheManager:getAccessToken - No token found\",\n                correlationId\n            );\n            return null;\n        } else if (numAccessTokens > 1) {\n            this.commonLogger.info(\n                \"CacheManager:getAccessToken - Multiple access tokens found, clearing them\",\n                correlationId\n            );\n            accessTokens.forEach((accessToken) => {\n                this.removeAccessToken(\n                    this.generateCredentialKey(accessToken),\n                    correlationId\n                );\n            });\n            this.performanceClient.addFields(\n                { multiMatchedAT: accessTokens.length },\n                correlationId\n            );\n            return null;\n        }\n\n        this.commonLogger.info(\n            \"CacheManager:getAccessToken - Returning access token\",\n            correlationId\n        );\n        return accessTokens[0];\n    }\n\n    /**\n     * Validate the cache key against filter before retrieving and parsing cache value\n     * @param key\n     * @param filter\n     * @param keyMustContainAllScopes\n     * @returns\n     */\n    accessTokenKeyMatchesFilter(\n        inputKey: string,\n        filter: CredentialFilter,\n        keyMustContainAllScopes: boolean\n    ): boolean {\n        const key = inputKey.toLowerCase();\n        if (\n            filter.clientId &&\n            key.indexOf(filter.clientId.toLowerCase()) === -1\n        ) {\n            return false;\n        }\n\n        if (\n            filter.homeAccountId &&\n            key.indexOf(filter.homeAccountId.toLowerCase()) === -1\n        ) {\n            return false;\n        }\n\n        if (filter.realm && key.indexOf(filter.realm.toLowerCase()) === -1) {\n            return false;\n        }\n\n        if (\n            filter.requestedClaimsHash &&\n            key.indexOf(filter.requestedClaimsHash.toLowerCase()) === -1\n        ) {\n            return false;\n        }\n\n        if (filter.target) {\n            const scopes = filter.target.asArray();\n            for (let i = 0; i < scopes.length; i++) {\n                if (\n                    keyMustContainAllScopes &&\n                    !key.includes(scopes[i].toLowerCase())\n                ) {\n                    // When performing a cache lookup a missing scope would be a cache miss\n                    return false;\n                } else if (\n                    !keyMustContainAllScopes &&\n                    key.includes(scopes[i].toLowerCase())\n                ) {\n                    // When performing a cache write, any token with a subset of requested scopes should be replaced\n                    return true;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * Gets all access tokens matching the filter\n     * @param filter\n     * @returns\n     */\n    getAccessTokensByFilter(\n        filter: CredentialFilter,\n        correlationId: string\n    ): AccessTokenEntity[] {\n        const tokenKeys = this.getTokenKeys();\n\n        const accessTokens: AccessTokenEntity[] = [];\n        tokenKeys.accessToken.forEach((key) => {\n            if (!this.accessTokenKeyMatchesFilter(key, filter, true)) {\n                return;\n            }\n\n            const accessToken = this.getAccessTokenCredential(\n                key,\n                correlationId\n            );\n            if (\n                accessToken &&\n                this.credentialMatchesFilter(accessToken, filter)\n            ) {\n                accessTokens.push(accessToken);\n            }\n        });\n\n        return accessTokens;\n    }\n\n    /**\n     * Helper to retrieve the appropriate refresh token from cache\n     * @param account {AccountInfo}\n     * @param familyRT {boolean}\n     * @param correlationId {?string}\n     * @param tokenKeys {?TokenKeys}\n     * @param performanceClient {?IPerformanceClient}\n     */\n    getRefreshToken(\n        account: AccountInfo,\n        familyRT: boolean,\n        correlationId: string,\n        tokenKeys?: TokenKeys,\n        performanceClient?: IPerformanceClient\n    ): RefreshTokenEntity | null {\n        this.commonLogger.trace(\"CacheManager - getRefreshToken called\");\n        const id = familyRT ? THE_FAMILY_ID : undefined;\n        const refreshTokenFilter: CredentialFilter = {\n            homeAccountId: account.homeAccountId,\n            environment: account.environment,\n            credentialType: CredentialType.REFRESH_TOKEN,\n            clientId: this.clientId,\n            familyId: id,\n        };\n\n        const refreshTokenKeys =\n            (tokenKeys && tokenKeys.refreshToken) ||\n            this.getTokenKeys().refreshToken;\n        const refreshTokens: RefreshTokenEntity[] = [];\n\n        refreshTokenKeys.forEach((key) => {\n            // Validate key\n            if (this.refreshTokenKeyMatchesFilter(key, refreshTokenFilter)) {\n                const refreshToken = this.getRefreshTokenCredential(\n                    key,\n                    correlationId\n                );\n                // Validate value\n                if (\n                    refreshToken &&\n                    this.credentialMatchesFilter(\n                        refreshToken,\n                        refreshTokenFilter\n                    )\n                ) {\n                    refreshTokens.push(refreshToken);\n                }\n            }\n        });\n\n        const numRefreshTokens = refreshTokens.length;\n        if (numRefreshTokens < 1) {\n            this.commonLogger.info(\n                \"CacheManager:getRefreshToken - No refresh token found.\"\n            );\n            return null;\n        }\n        // address the else case after remove functions address environment aliases\n\n        if (numRefreshTokens > 1 && performanceClient && correlationId) {\n            performanceClient.addFields(\n                { multiMatchedRT: numRefreshTokens },\n                correlationId\n            );\n        }\n\n        this.commonLogger.info(\n            \"CacheManager:getRefreshToken - returning refresh token\"\n        );\n        return refreshTokens[0] as RefreshTokenEntity;\n    }\n\n    /**\n     * Validate the cache key against filter before retrieving and parsing cache value\n     * @param key\n     * @param filter\n     */\n    refreshTokenKeyMatchesFilter(\n        inputKey: string,\n        filter: CredentialFilter\n    ): boolean {\n        const key = inputKey.toLowerCase();\n        if (\n            filter.familyId &&\n            key.indexOf(filter.familyId.toLowerCase()) === -1\n        ) {\n            return false;\n        }\n\n        // If familyId is used, clientId is not in the key\n        if (\n            !filter.familyId &&\n            filter.clientId &&\n            key.indexOf(filter.clientId.toLowerCase()) === -1\n        ) {\n            return false;\n        }\n\n        if (\n            filter.homeAccountId &&\n            key.indexOf(filter.homeAccountId.toLowerCase()) === -1\n        ) {\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Retrieve AppMetadataEntity from cache\n     */\n    readAppMetadataFromCache(environment: string): AppMetadataEntity | null {\n        const appMetadataFilter: AppMetadataFilter = {\n            environment,\n            clientId: this.clientId,\n        };\n\n        const appMetadata: AppMetadataCache =\n            this.getAppMetadataFilteredBy(appMetadataFilter);\n        const appMetadataEntries: AppMetadataEntity[] = Object.keys(\n            appMetadata\n        ).map((key) => appMetadata[key]);\n\n        const numAppMetadata = appMetadataEntries.length;\n        if (numAppMetadata < 1) {\n            return null;\n        } else if (numAppMetadata > 1) {\n            throw createClientAuthError(\n                ClientAuthErrorCodes.multipleMatchingAppMetadata\n            );\n        }\n\n        return appMetadataEntries[0] as AppMetadataEntity;\n    }\n\n    /**\n     * Return the family_id value associated  with FOCI\n     * @param environment\n     * @param clientId\n     */\n    isAppMetadataFOCI(environment: string): boolean {\n        const appMetadata = this.readAppMetadataFromCache(environment);\n        return !!(appMetadata && appMetadata.familyId === THE_FAMILY_ID);\n    }\n\n    /**\n     * helper to match account ids\n     * @param value\n     * @param homeAccountId\n     */\n    private matchHomeAccountId(\n        entity: AccountEntity | CredentialEntity,\n        homeAccountId: string\n    ): boolean {\n        return !!(\n            typeof entity.homeAccountId === \"string\" &&\n            homeAccountId === entity.homeAccountId\n        );\n    }\n\n    /**\n     * helper to match account ids\n     * @param entity\n     * @param localAccountId\n     * @returns\n     */\n    private matchLocalAccountIdFromTokenClaims(\n        tokenClaims: TokenClaims,\n        localAccountId: string\n    ): boolean {\n        const idTokenLocalAccountId = tokenClaims.oid || tokenClaims.sub;\n        return localAccountId === idTokenLocalAccountId;\n    }\n\n    private matchLocalAccountIdFromTenantProfile(\n        tenantProfile: TenantProfile,\n        localAccountId: string\n    ): boolean {\n        return tenantProfile.localAccountId === localAccountId;\n    }\n\n    /**\n     * helper to match names\n     * @param entity\n     * @param name\n     * @returns true if the downcased name properties are present and match in the filter and the entity\n     */\n    private matchName(claims: TokenClaims, name: string): boolean {\n        return !!(name.toLowerCase() === claims.name?.toLowerCase());\n    }\n\n    /**\n     * helper to match usernames\n     * @param entity\n     * @param username\n     * @returns\n     */\n    private matchUsername(\n        cachedUsername?: string,\n        filterUsername?: string\n    ): boolean {\n        return !!(\n            cachedUsername &&\n            typeof cachedUsername === \"string\" &&\n            filterUsername?.toLowerCase() === cachedUsername.toLowerCase()\n        );\n    }\n\n    /**\n     * helper to match assertion\n     * @param value\n     * @param oboAssertion\n     */\n    private matchUserAssertionHash(\n        entity: CredentialEntity,\n        userAssertionHash: string\n    ): boolean {\n        return !!(\n            entity.userAssertionHash &&\n            userAssertionHash === entity.userAssertionHash\n        );\n    }\n\n    /**\n     * helper to match environment\n     * @param value\n     * @param environment\n     */\n    private matchEnvironment(\n        entity: AccountEntity | CredentialEntity | AppMetadataEntity,\n        environment: string\n    ): boolean {\n        // Check static authority options first for cases where authority metadata has not been resolved and cached yet\n        if (this.staticAuthorityOptions) {\n            const staticAliases = getAliasesFromStaticSources(\n                this.staticAuthorityOptions,\n                this.commonLogger\n            );\n            if (\n                staticAliases.includes(environment) &&\n                staticAliases.includes(entity.environment)\n            ) {\n                return true;\n            }\n        }\n\n        // Query metadata cache if no static authority configuration has aliases that match enviroment\n        const cloudMetadata = this.getAuthorityMetadataByAlias(environment);\n        if (\n            cloudMetadata &&\n            cloudMetadata.aliases.indexOf(entity.environment) > -1\n        ) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * helper to match credential type\n     * @param entity\n     * @param credentialType\n     */\n    private matchCredentialType(\n        entity: CredentialEntity,\n        credentialType: string\n    ): boolean {\n        return (\n            entity.credentialType &&\n            credentialType.toLowerCase() === entity.credentialType.toLowerCase()\n        );\n    }\n\n    /**\n     * helper to match client ids\n     * @param entity\n     * @param clientId\n     */\n    private matchClientId(\n        entity: CredentialEntity | AppMetadataEntity,\n        clientId: string\n    ): boolean {\n        return !!(entity.clientId && clientId === entity.clientId);\n    }\n\n    /**\n     * helper to match family ids\n     * @param entity\n     * @param familyId\n     */\n    private matchFamilyId(\n        entity: CredentialEntity | AppMetadataEntity,\n        familyId: string\n    ): boolean {\n        return !!(entity.familyId && familyId === entity.familyId);\n    }\n\n    /**\n     * helper to match realm\n     * @param entity\n     * @param realm\n     */\n    private matchRealm(\n        entity: AccountEntity | CredentialEntity,\n        realm: string\n    ): boolean {\n        return !!(entity.realm?.toLowerCase() === realm.toLowerCase());\n    }\n\n    /**\n     * helper to match nativeAccountId\n     * @param entity\n     * @param nativeAccountId\n     * @returns boolean indicating the match result\n     */\n    private matchNativeAccountId(\n        entity: AccountEntity,\n        nativeAccountId: string\n    ): boolean {\n        return !!(\n            entity.nativeAccountId && nativeAccountId === entity.nativeAccountId\n        );\n    }\n\n    /**\n     * helper to match loginHint which can be either:\n     * 1. login_hint ID token claim\n     * 2. username in cached account object\n     * 3. upn in ID token claims\n     * @param entity\n     * @param loginHint\n     * @returns\n     */\n    private matchLoginHintFromTokenClaims(\n        tokenClaims: TokenClaims,\n        loginHint: string\n    ): boolean {\n        if (tokenClaims.login_hint === loginHint) {\n            return true;\n        }\n\n        if (tokenClaims.preferred_username === loginHint) {\n            return true;\n        }\n\n        if (tokenClaims.upn === loginHint) {\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * Helper to match sid\n     * @param entity\n     * @param sid\n     * @returns true if the sid claim is present and matches the filter\n     */\n    private matchSid(idTokenClaims: TokenClaims, sid: string): boolean {\n        return idTokenClaims.sid === sid;\n    }\n\n    private matchAuthorityType(\n        entity: AccountEntity,\n        authorityType: string\n    ): boolean {\n        return !!(\n            entity.authorityType &&\n            authorityType.toLowerCase() === entity.authorityType.toLowerCase()\n        );\n    }\n\n    /**\n     * Returns true if the target scopes are a subset of the current entity's scopes, false otherwise.\n     * @param entity\n     * @param target\n     */\n    private matchTarget(entity: CredentialEntity, target: ScopeSet): boolean {\n        const isNotAccessTokenCredential =\n            entity.credentialType !== CredentialType.ACCESS_TOKEN &&\n            entity.credentialType !==\n                CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME;\n\n        if (isNotAccessTokenCredential || !entity.target) {\n            return false;\n        }\n\n        const entityScopeSet: ScopeSet = ScopeSet.fromString(entity.target);\n\n        return entityScopeSet.containsScopeSet(target);\n    }\n\n    /**\n     * Returns true if the credential's tokenType or Authentication Scheme matches the one in the request, false otherwise\n     * @param entity\n     * @param tokenType\n     */\n    private matchTokenType(\n        entity: CredentialEntity,\n        tokenType: AuthenticationScheme\n    ): boolean {\n        return !!(entity.tokenType && entity.tokenType === tokenType);\n    }\n\n    /**\n     * Returns true if the credential's keyId matches the one in the request, false otherwise\n     * @param entity\n     * @param keyId\n     */\n    private matchKeyId(entity: CredentialEntity, keyId: string): boolean {\n        return !!(entity.keyId && entity.keyId === keyId);\n    }\n\n    /**\n     * returns if a given cache entity is of the type appmetadata\n     * @param key\n     */\n    private isAppMetadata(key: string): boolean {\n        return key.indexOf(APP_METADATA) !== -1;\n    }\n\n    /**\n     * returns if a given cache entity is of the type authoritymetadata\n     * @param key\n     */\n    protected isAuthorityMetadata(key: string): boolean {\n        return key.indexOf(AUTHORITY_METADATA_CONSTANTS.CACHE_KEY) !== -1;\n    }\n\n    /**\n     * returns cache key used for cloud instance metadata\n     */\n    generateAuthorityMetadataCacheKey(authority: string): string {\n        return `${AUTHORITY_METADATA_CONSTANTS.CACHE_KEY}-${this.clientId}-${authority}`;\n    }\n\n    /**\n     * Helper to convert serialized data to object\n     * @param obj\n     * @param json\n     */\n    static toObject<T>(obj: T, json: object): T {\n        for (const propertyName in json) {\n            obj[propertyName] = json[propertyName];\n        }\n        return obj;\n    }\n}\n\n/** @internal */\nexport class DefaultStorageClass extends CacheManager {\n    async setAccount(): Promise<void> {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    getAccount(): AccountEntity {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    async setIdTokenCredential(): Promise<void> {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    getIdTokenCredential(): IdTokenEntity {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    async setAccessTokenCredential(): Promise<void> {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    getAccessTokenCredential(): AccessTokenEntity {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    async setRefreshTokenCredential(): Promise<void> {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    getRefreshTokenCredential(): RefreshTokenEntity {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    setAppMetadata(): void {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    getAppMetadata(): AppMetadataEntity {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    setServerTelemetry(): void {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    getServerTelemetry(): ServerTelemetryEntity {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    setAuthorityMetadata(): void {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    getAuthorityMetadata(): AuthorityMetadataEntity | null {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    getAuthorityMetadataKeys(): Array<string> {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    setThrottlingCache(): void {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    getThrottlingCache(): ThrottlingEntity {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    removeItem(): boolean {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    getKeys(): string[] {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    getAccountKeys(): string[] {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    getTokenKeys(): TokenKeys {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    generateCredentialKey(): string {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n    generateAccountKey(): string {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { DataBoundary } from \"../../account/AccountInfo.js\";\n\n/**\n * Enumeration of operations that are instrumented by have their performance measured by the PerformanceClient.\n *\n * @export\n * @enum {number}\n */\nexport const PerformanceEvents = {\n    /**\n     * acquireTokenByCode API (msal-browser and msal-node).\n     * Used to acquire tokens by trading an authorization code against the token endpoint.\n     */\n    AcquireTokenByCode: \"acquireTokenByCode\",\n\n    /**\n     * acquireTokenByRefreshToken API (msal-browser and msal-node).\n     * Used to renew an access token using a refresh token against the token endpoint.\n     */\n    AcquireTokenByRefreshToken: \"acquireTokenByRefreshToken\",\n\n    /**\n     * acquireTokenSilent API (msal-browser and msal-node).\n     * Used to silently acquire a new access token (from the cache or the network).\n     */\n    AcquireTokenSilent: \"acquireTokenSilent\",\n\n    /**\n     * acquireTokenSilentAsync (msal-browser).\n     * Internal API for acquireTokenSilent.\n     */\n    AcquireTokenSilentAsync: \"acquireTokenSilentAsync\",\n\n    /**\n     * acquireTokenPopup (msal-browser).\n     * Used to acquire a new access token interactively through pop ups\n     */\n    AcquireTokenPopup: \"acquireTokenPopup\",\n\n    /**\n     * acquireTokenPreRedirect (msal-browser).\n     * First part of the redirect flow.\n     * Used to acquire a new access token interactively through redirects.\n     */\n    AcquireTokenPreRedirect: \"acquireTokenPreRedirect\",\n\n    /**\n     * acquireTokenRedirect (msal-browser).\n     * Second part of the redirect flow.\n     * Used to acquire a new access token interactively through redirects.\n     */\n    AcquireTokenRedirect: \"acquireTokenRedirect\",\n\n    /**\n     * getPublicKeyThumbprint API in CryptoOpts class (msal-browser).\n     * Used to generate a public/private keypair and generate a public key thumbprint for pop requests.\n     */\n    CryptoOptsGetPublicKeyThumbprint: \"cryptoOptsGetPublicKeyThumbprint\",\n\n    /**\n     * signJwt API in CryptoOpts class (msal-browser).\n     * Used to signed a pop token.\n     */\n    CryptoOptsSignJwt: \"cryptoOptsSignJwt\",\n\n    /**\n     * acquireToken API in the SilentCacheClient class (msal-browser).\n     * Used to read access tokens from the cache.\n     */\n    SilentCacheClientAcquireToken: \"silentCacheClientAcquireToken\",\n\n    /**\n     * acquireToken API in the SilentIframeClient class (msal-browser).\n     * Used to acquire a new set of tokens from the authorize endpoint in a hidden iframe.\n     */\n    SilentIframeClientAcquireToken: \"silentIframeClientAcquireToken\",\n    AwaitConcurrentIframe: \"awaitConcurrentIframe\", // Time spent waiting for a concurrent iframe to complete\n\n    /**\n     * acquireToken API in SilentRereshClient (msal-browser).\n     * Used to acquire a new set of tokens from the token endpoint using a refresh token.\n     */\n    SilentRefreshClientAcquireToken: \"silentRefreshClientAcquireToken\",\n\n    /**\n     * ssoSilent API (msal-browser).\n     * Used to silently acquire an authorization code and set of tokens using a hidden iframe.\n     */\n    SsoSilent: \"ssoSilent\",\n\n    /**\n     * getDiscoveredAuthority API in StandardInteractionClient class (msal-browser).\n     * Used to load authority metadata for a request.\n     */\n    StandardInteractionClientGetDiscoveredAuthority:\n        \"standardInteractionClientGetDiscoveredAuthority\",\n\n    /**\n     * acquireToken APIs in msal-browser.\n     * Used to make an /authorize endpoint call with native brokering enabled.\n     */\n    FetchAccountIdWithNativeBroker: \"fetchAccountIdWithNativeBroker\",\n\n    /**\n     * acquireToken API in NativeInteractionClient class (msal-browser).\n     * Used to acquire a token from Native component when native brokering is enabled.\n     */\n    NativeInteractionClientAcquireToken: \"nativeInteractionClientAcquireToken\",\n    /**\n     * Time spent creating default headers for requests to token endpoint\n     */\n    BaseClientCreateTokenRequestHeaders: \"baseClientCreateTokenRequestHeaders\",\n    /**\n     * Time spent sending/waiting for the response of a request to the token endpoint\n     */\n    NetworkClientSendPostRequestAsync: \"networkClientSendPostRequestAsync\",\n    RefreshTokenClientExecutePostToTokenEndpoint:\n        \"refreshTokenClientExecutePostToTokenEndpoint\",\n    AuthorizationCodeClientExecutePostToTokenEndpoint:\n        \"authorizationCodeClientExecutePostToTokenEndpoint\",\n    /**\n     * Used to measure the time taken for completing embedded-broker handshake (PW-Broker).\n     */\n    BrokerHandhshake: \"brokerHandshake\",\n    /**\n     * acquireTokenByRefreshToken API in BrokerClientApplication (PW-Broker) .\n     */\n    AcquireTokenByRefreshTokenInBroker: \"acquireTokenByRefreshTokenInBroker\",\n    /**\n     * Time taken for token acquisition by broker\n     */\n    AcquireTokenByBroker: \"acquireTokenByBroker\",\n\n    /**\n     * Time spent on the network for refresh token acquisition\n     */\n    RefreshTokenClientExecuteTokenRequest:\n        \"refreshTokenClientExecuteTokenRequest\",\n\n    /**\n     * Time taken for acquiring refresh token , records RT size\n     */\n    RefreshTokenClientAcquireToken: \"refreshTokenClientAcquireToken\",\n\n    /**\n     * Time taken for acquiring cached refresh token\n     */\n    RefreshTokenClientAcquireTokenWithCachedRefreshToken:\n        \"refreshTokenClientAcquireTokenWithCachedRefreshToken\",\n\n    /**\n     * acquireTokenByRefreshToken API in RefreshTokenClient (msal-common).\n     */\n    RefreshTokenClientAcquireTokenByRefreshToken:\n        \"refreshTokenClientAcquireTokenByRefreshToken\",\n\n    /**\n     * Helper function to create token request body in RefreshTokenClient (msal-common).\n     */\n    RefreshTokenClientCreateTokenRequestBody:\n        \"refreshTokenClientCreateTokenRequestBody\",\n\n    /**\n     * acquireTokenFromCache (msal-browser).\n     * Internal API for acquiring token from cache\n     */\n    AcquireTokenFromCache: \"acquireTokenFromCache\",\n    SilentFlowClientAcquireCachedToken: \"silentFlowClientAcquireCachedToken\",\n    SilentFlowClientGenerateResultFromCacheRecord:\n        \"silentFlowClientGenerateResultFromCacheRecord\",\n\n    /**\n     * acquireTokenBySilentIframe (msal-browser).\n     * Internal API for acquiring token by silent Iframe\n     */\n    AcquireTokenBySilentIframe: \"acquireTokenBySilentIframe\",\n\n    /**\n     * Internal API for initializing base request in BaseInteractionClient (msal-browser)\n     */\n    InitializeBaseRequest: \"initializeBaseRequest\",\n\n    /**\n     * Internal API for initializing silent request in SilentCacheClient (msal-browser)\n     */\n    InitializeSilentRequest: \"initializeSilentRequest\",\n\n    InitializeClientApplication: \"initializeClientApplication\",\n\n    InitializeCache: \"initializeCache\",\n\n    /**\n     * Helper function in SilentIframeClient class (msal-browser).\n     */\n    SilentIframeClientTokenHelper: \"silentIframeClientTokenHelper\",\n\n    /**\n     * SilentHandler\n     */\n    SilentHandlerInitiateAuthRequest: \"silentHandlerInitiateAuthRequest\",\n    SilentHandlerMonitorIframeForHash: \"silentHandlerMonitorIframeForHash\",\n    SilentHandlerLoadFrame: \"silentHandlerLoadFrame\",\n    SilentHandlerLoadFrameSync: \"silentHandlerLoadFrameSync\",\n\n    /**\n     * Helper functions in StandardInteractionClient class (msal-browser)\n     */\n    StandardInteractionClientCreateAuthCodeClient:\n        \"standardInteractionClientCreateAuthCodeClient\",\n    StandardInteractionClientGetClientConfiguration:\n        \"standardInteractionClientGetClientConfiguration\",\n    StandardInteractionClientInitializeAuthorizationRequest:\n        \"standardInteractionClientInitializeAuthorizationRequest\",\n\n    /**\n     * getAuthCodeUrl API (msal-browser and msal-node).\n     */\n    GetAuthCodeUrl: \"getAuthCodeUrl\",\n    GetStandardParams: \"getStandardParams\",\n\n    /**\n     * Functions from InteractionHandler (msal-browser)\n     */\n    HandleCodeResponseFromServer: \"handleCodeResponseFromServer\",\n    HandleCodeResponse: \"handleCodeResponse\",\n    HandleResponseEar: \"handleResponseEar\",\n    HandleResponsePlatformBroker: \"handleResponsePlatformBroker\",\n    HandleResponseCode: \"handleResponseCode\",\n    UpdateTokenEndpointAuthority: \"updateTokenEndpointAuthority\",\n\n    /**\n     * APIs in Authorization Code Client (msal-common)\n     */\n    AuthClientAcquireToken: \"authClientAcquireToken\",\n    AuthClientExecuteTokenRequest: \"authClientExecuteTokenRequest\",\n    AuthClientCreateTokenRequestBody: \"authClientCreateTokenRequestBody\",\n\n    /**\n     * Generate functions in PopTokenGenerator (msal-common)\n     */\n    PopTokenGenerateCnf: \"popTokenGenerateCnf\",\n    PopTokenGenerateKid: \"popTokenGenerateKid\",\n\n    /**\n     * handleServerTokenResponse API in ResponseHandler (msal-common)\n     */\n    HandleServerTokenResponse: \"handleServerTokenResponse\",\n    DeserializeResponse: \"deserializeResponse\",\n\n    /**\n     * Authority functions\n     */\n    AuthorityFactoryCreateDiscoveredInstance:\n        \"authorityFactoryCreateDiscoveredInstance\",\n    AuthorityResolveEndpointsAsync: \"authorityResolveEndpointsAsync\",\n    AuthorityResolveEndpointsFromLocalSources:\n        \"authorityResolveEndpointsFromLocalSources\",\n    AuthorityGetCloudDiscoveryMetadataFromNetwork:\n        \"authorityGetCloudDiscoveryMetadataFromNetwork\",\n    AuthorityUpdateCloudDiscoveryMetadata:\n        \"authorityUpdateCloudDiscoveryMetadata\",\n    AuthorityGetEndpointMetadataFromNetwork:\n        \"authorityGetEndpointMetadataFromNetwork\",\n    AuthorityUpdateEndpointMetadata: \"authorityUpdateEndpointMetadata\",\n    AuthorityUpdateMetadataWithRegionalInformation:\n        \"authorityUpdateMetadataWithRegionalInformation\",\n\n    /**\n     * Region Discovery functions\n     */\n    RegionDiscoveryDetectRegion: \"regionDiscoveryDetectRegion\",\n    RegionDiscoveryGetRegionFromIMDS: \"regionDiscoveryGetRegionFromIMDS\",\n    RegionDiscoveryGetCurrentVersion: \"regionDiscoveryGetCurrentVersion\",\n\n    AcquireTokenByCodeAsync: \"acquireTokenByCodeAsync\",\n\n    GetEndpointMetadataFromNetwork: \"getEndpointMetadataFromNetwork\",\n    GetCloudDiscoveryMetadataFromNetworkMeasurement:\n        \"getCloudDiscoveryMetadataFromNetworkMeasurement\",\n\n    HandleRedirectPromiseMeasurement: \"handleRedirectPromise\",\n    HandleNativeRedirectPromiseMeasurement: \"handleNativeRedirectPromise\",\n\n    UpdateCloudDiscoveryMetadataMeasurement:\n        \"updateCloudDiscoveryMetadataMeasurement\",\n\n    UsernamePasswordClientAcquireToken: \"usernamePasswordClientAcquireToken\",\n\n    NativeMessageHandlerHandshake: \"nativeMessageHandlerHandshake\",\n\n    NativeGenerateAuthResult: \"nativeGenerateAuthResult\",\n\n    RemoveHiddenIframe: \"removeHiddenIframe\",\n\n    /**\n     * Cache operations\n     */\n    ClearTokensAndKeysWithClaims: \"clearTokensAndKeysWithClaims\",\n    CacheManagerGetRefreshToken: \"cacheManagerGetRefreshToken\",\n    ImportExistingCache: \"importExistingCache\",\n    SetUserData: \"setUserData\",\n    LocalStorageUpdated: \"localStorageUpdated\",\n\n    /**\n     * Crypto Operations\n     */\n    GeneratePkceCodes: \"generatePkceCodes\",\n    GenerateCodeVerifier: \"generateCodeVerifier\",\n    GenerateCodeChallengeFromVerifier: \"generateCodeChallengeFromVerifier\",\n    Sha256Digest: \"sha256Digest\",\n    GetRandomValues: \"getRandomValues\",\n    GenerateHKDF: \"generateHKDF\",\n    GenerateBaseKey: \"generateBaseKey\",\n    Base64Decode: \"base64Decode\",\n    UrlEncodeArr: \"urlEncodeArr\",\n    Encrypt: \"encrypt\",\n    Decrypt: \"decrypt\",\n    GenerateEarKey: \"generateEarKey\",\n    DecryptEarResponse: \"decryptEarResponse\",\n} as const;\nexport type PerformanceEvents =\n    (typeof PerformanceEvents)[keyof typeof PerformanceEvents];\n\nexport const PerformanceEventAbbreviations: ReadonlyMap<string, string> =\n    new Map([\n        [PerformanceEvents.AcquireTokenByCode, \"ATByCode\"],\n        [PerformanceEvents.AcquireTokenByRefreshToken, \"ATByRT\"],\n        [PerformanceEvents.AcquireTokenSilent, \"ATS\"],\n        [PerformanceEvents.AcquireTokenSilentAsync, \"ATSAsync\"],\n        [PerformanceEvents.AcquireTokenPopup, \"ATPopup\"],\n        [PerformanceEvents.AcquireTokenRedirect, \"ATRedirect\"],\n        [\n            PerformanceEvents.CryptoOptsGetPublicKeyThumbprint,\n            \"CryptoGetPKThumb\",\n        ],\n        [PerformanceEvents.CryptoOptsSignJwt, \"CryptoSignJwt\"],\n        [PerformanceEvents.SilentCacheClientAcquireToken, \"SltCacheClientAT\"],\n        [PerformanceEvents.SilentIframeClientAcquireToken, \"SltIframeClientAT\"],\n        [PerformanceEvents.SilentRefreshClientAcquireToken, \"SltRClientAT\"],\n        [PerformanceEvents.SsoSilent, \"SsoSlt\"],\n        [\n            PerformanceEvents.StandardInteractionClientGetDiscoveredAuthority,\n            \"StdIntClientGetDiscAuth\",\n        ],\n        [\n            PerformanceEvents.FetchAccountIdWithNativeBroker,\n            \"FetchAccIdWithNtvBroker\",\n        ],\n        [\n            PerformanceEvents.NativeInteractionClientAcquireToken,\n            \"NtvIntClientAT\",\n        ],\n        [\n            PerformanceEvents.BaseClientCreateTokenRequestHeaders,\n            \"BaseClientCreateTReqHead\",\n        ],\n        [\n            PerformanceEvents.NetworkClientSendPostRequestAsync,\n            \"NetClientSendPost\",\n        ],\n        [\n            PerformanceEvents.RefreshTokenClientExecutePostToTokenEndpoint,\n            \"RTClientExecPost\",\n        ],\n        [\n            PerformanceEvents.AuthorizationCodeClientExecutePostToTokenEndpoint,\n            \"AuthCodeClientExecPost\",\n        ],\n        [PerformanceEvents.BrokerHandhshake, \"BrokerHandshake\"],\n        [\n            PerformanceEvents.AcquireTokenByRefreshTokenInBroker,\n            \"ATByRTInBroker\",\n        ],\n        [PerformanceEvents.AcquireTokenByBroker, \"ATByBroker\"],\n        [\n            PerformanceEvents.RefreshTokenClientExecuteTokenRequest,\n            \"RTClientExecTReq\",\n        ],\n        [PerformanceEvents.RefreshTokenClientAcquireToken, \"RTClientAT\"],\n        [\n            PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,\n            \"RTClientATWithCachedRT\",\n        ],\n        [\n            PerformanceEvents.RefreshTokenClientAcquireTokenByRefreshToken,\n            \"RTClientATByRT\",\n        ],\n        [\n            PerformanceEvents.RefreshTokenClientCreateTokenRequestBody,\n            \"RTClientCreateTReqBody\",\n        ],\n        [PerformanceEvents.AcquireTokenFromCache, \"ATFromCache\"],\n        [\n            PerformanceEvents.SilentFlowClientAcquireCachedToken,\n            \"SltFlowClientATCached\",\n        ],\n        [\n            PerformanceEvents.SilentFlowClientGenerateResultFromCacheRecord,\n            \"SltFlowClientGenResFromCache\",\n        ],\n        [PerformanceEvents.AcquireTokenBySilentIframe, \"ATBySltIframe\"],\n        [PerformanceEvents.InitializeBaseRequest, \"InitBaseReq\"],\n        [PerformanceEvents.InitializeSilentRequest, \"InitSltReq\"],\n        [\n            PerformanceEvents.InitializeClientApplication,\n            \"InitClientApplication\",\n        ],\n        [PerformanceEvents.InitializeCache, \"InitCache\"],\n        [PerformanceEvents.ImportExistingCache, \"importCache\"],\n        [PerformanceEvents.SetUserData, \"setUserData\"],\n        [PerformanceEvents.LocalStorageUpdated, \"localStorageUpdated\"],\n        [PerformanceEvents.SilentIframeClientTokenHelper, \"SIClientTHelper\"],\n        [\n            PerformanceEvents.SilentHandlerInitiateAuthRequest,\n            \"SHandlerInitAuthReq\",\n        ],\n        [\n            PerformanceEvents.SilentHandlerMonitorIframeForHash,\n            \"SltHandlerMonitorIframeForHash\",\n        ],\n        [PerformanceEvents.SilentHandlerLoadFrame, \"SHandlerLoadFrame\"],\n        [PerformanceEvents.SilentHandlerLoadFrameSync, \"SHandlerLoadFrameSync\"],\n\n        [\n            PerformanceEvents.StandardInteractionClientCreateAuthCodeClient,\n            \"StdIntClientCreateAuthCodeClient\",\n        ],\n        [\n            PerformanceEvents.StandardInteractionClientGetClientConfiguration,\n            \"StdIntClientGetClientConf\",\n        ],\n        [\n            PerformanceEvents.StandardInteractionClientInitializeAuthorizationRequest,\n            \"StdIntClientInitAuthReq\",\n        ],\n\n        [PerformanceEvents.GetAuthCodeUrl, \"GetAuthCodeUrl\"],\n\n        [\n            PerformanceEvents.HandleCodeResponseFromServer,\n            \"HandleCodeResFromServer\",\n        ],\n        [PerformanceEvents.HandleCodeResponse, \"HandleCodeResp\"],\n        [PerformanceEvents.HandleResponseEar, \"HandleRespEar\"],\n        [PerformanceEvents.HandleResponseCode, \"HandleRespCode\"],\n        [\n            PerformanceEvents.HandleResponsePlatformBroker,\n            \"HandleRespPlatBroker\",\n        ],\n        [PerformanceEvents.UpdateTokenEndpointAuthority, \"UpdTEndpointAuth\"],\n\n        [PerformanceEvents.AuthClientAcquireToken, \"AuthClientAT\"],\n        [PerformanceEvents.AuthClientExecuteTokenRequest, \"AuthClientExecTReq\"],\n        [\n            PerformanceEvents.AuthClientCreateTokenRequestBody,\n            \"AuthClientCreateTReqBody\",\n        ],\n        [PerformanceEvents.PopTokenGenerateCnf, \"PopTGenCnf\"],\n        [PerformanceEvents.PopTokenGenerateKid, \"PopTGenKid\"],\n        [PerformanceEvents.HandleServerTokenResponse, \"HandleServerTRes\"],\n        [PerformanceEvents.DeserializeResponse, \"DeserializeRes\"],\n        [\n            PerformanceEvents.AuthorityFactoryCreateDiscoveredInstance,\n            \"AuthFactCreateDiscInst\",\n        ],\n        [\n            PerformanceEvents.AuthorityResolveEndpointsAsync,\n            \"AuthResolveEndpointsAsync\",\n        ],\n        [\n            PerformanceEvents.AuthorityResolveEndpointsFromLocalSources,\n            \"AuthResolveEndpointsFromLocal\",\n        ],\n        [\n            PerformanceEvents.AuthorityGetCloudDiscoveryMetadataFromNetwork,\n            \"AuthGetCDMetaFromNet\",\n        ],\n        [\n            PerformanceEvents.AuthorityUpdateCloudDiscoveryMetadata,\n            \"AuthUpdCDMeta\",\n        ],\n        [\n            PerformanceEvents.AuthorityGetEndpointMetadataFromNetwork,\n            \"AuthUpdCDMetaFromNet\",\n        ],\n        [\n            PerformanceEvents.AuthorityUpdateEndpointMetadata,\n            \"AuthUpdEndpointMeta\",\n        ],\n        [\n            PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation,\n            \"AuthUpdMetaWithRegInfo\",\n        ],\n        [PerformanceEvents.RegionDiscoveryDetectRegion, \"RegDiscDetectReg\"],\n        [\n            PerformanceEvents.RegionDiscoveryGetRegionFromIMDS,\n            \"RegDiscGetRegFromIMDS\",\n        ],\n        [\n            PerformanceEvents.RegionDiscoveryGetCurrentVersion,\n            \"RegDiscGetCurrentVer\",\n        ],\n        [PerformanceEvents.AcquireTokenByCodeAsync, \"ATByCodeAsync\"],\n        [\n            PerformanceEvents.GetEndpointMetadataFromNetwork,\n            \"GetEndpointMetaFromNet\",\n        ],\n        [\n            PerformanceEvents.GetCloudDiscoveryMetadataFromNetworkMeasurement,\n            \"GetCDMetaFromNet\",\n        ],\n        [\n            PerformanceEvents.HandleRedirectPromiseMeasurement,\n            \"HandleRedirectPromise\",\n        ],\n        [\n            PerformanceEvents.HandleNativeRedirectPromiseMeasurement,\n            \"HandleNtvRedirectPromise\",\n        ],\n        [\n            PerformanceEvents.UpdateCloudDiscoveryMetadataMeasurement,\n            \"UpdateCDMeta\",\n        ],\n        [\n            PerformanceEvents.UsernamePasswordClientAcquireToken,\n            \"UserPassClientAT\",\n        ],\n        [\n            PerformanceEvents.NativeMessageHandlerHandshake,\n            \"NtvMsgHandlerHandshake\",\n        ],\n        [PerformanceEvents.NativeGenerateAuthResult, \"NtvGenAuthRes\"],\n        [PerformanceEvents.RemoveHiddenIframe, \"RemoveHiddenIframe\"],\n        [\n            PerformanceEvents.ClearTokensAndKeysWithClaims,\n            \"ClearTAndKeysWithClaims\",\n        ],\n        [PerformanceEvents.CacheManagerGetRefreshToken, \"CacheManagerGetRT\"],\n        [PerformanceEvents.GeneratePkceCodes, \"GenPkceCodes\"],\n        [PerformanceEvents.GenerateCodeVerifier, \"GenCodeVerifier\"],\n        [\n            PerformanceEvents.GenerateCodeChallengeFromVerifier,\n            \"GenCodeChallengeFromVerifier\",\n        ],\n        [PerformanceEvents.Sha256Digest, \"Sha256Digest\"],\n        [PerformanceEvents.GetRandomValues, \"GetRandomValues\"],\n        [PerformanceEvents.GenerateHKDF, \"genHKDF\"],\n        [PerformanceEvents.GenerateBaseKey, \"genBaseKey\"],\n        [PerformanceEvents.Base64Decode, \"b64Decode\"],\n        [PerformanceEvents.UrlEncodeArr, \"urlEncArr\"],\n        [PerformanceEvents.Encrypt, \"encrypt\"],\n        [PerformanceEvents.Decrypt, \"decrypt\"],\n        [PerformanceEvents.GenerateEarKey, \"genEarKey\"],\n        [PerformanceEvents.DecryptEarResponse, \"decryptEarResp\"],\n    ]);\n\n/**\n * State of the performance event.\n *\n * @export\n * @enum {number}\n */\nexport const PerformanceEventStatus = {\n    NotStarted: 0,\n    InProgress: 1,\n    Completed: 2,\n} as const;\nexport type PerformanceEventStatus =\n    (typeof PerformanceEventStatus)[keyof typeof PerformanceEventStatus];\n\nexport type SubMeasurement = {\n    name: string;\n    startTimeMs: number;\n};\n\n/**\n * Performance measurement taken by the library, including metadata about the request and application.\n *\n * @export\n * @typedef {PerformanceEvent}\n */\nexport type PerformanceEvent = {\n    /**\n     * Unique id for the event\n     *\n     * @type {string}\n     */\n    eventId: string;\n\n    /**\n     * State of the perforance measure.\n     *\n     * @type {PerformanceEventStatus}\n     */\n    status: PerformanceEventStatus;\n\n    /**\n     * Login authority used for the request\n     *\n     * @type {string}\n     */\n    authority: string;\n\n    /**\n     * Client id for the application\n     *\n     * @type {string}\n     */\n    clientId: string;\n\n    /**\n     * Correlation ID used for the request\n     *\n     * @type {string}\n     */\n    correlationId: string;\n\n    /**\n     * End-to-end duration in milliseconds.\n     * @date 3/22/2022 - 3:40:05 PM\n     *\n     * @type {number}\n     */\n    durationMs?: number;\n\n    /**\n     * Visibility of the page when the event completed.\n     * Read from: https://developer.mozilla.org/docs/Web/API/Page_Visibility_API\n     *\n     * @type {?(string | null)}\n     */\n    endPageVisibility?: string | null;\n\n    /**\n     * Whether the result was retrieved from the cache.\n     *\n     * @type {(boolean | null)}\n     */\n    fromCache?: boolean | null;\n\n    /**\n     * Event name (usually in the form of classNameFunctionName)\n     *\n     * @type {string}\n     */\n    name: string;\n\n    /**\n     * Visibility of the page when the event completed.\n     * Read from: https://developer.mozilla.org/docs/Web/API/Page_Visibility_API\n     *\n     * @type {?(string | null)}\n     */\n    startPageVisibility?: string | null;\n\n    /**\n     * Unix millisecond timestamp when the event was initiated.\n     *\n     * @type {number}\n     */\n    startTimeMs: number;\n\n    /**\n     * Whether or the operation completed successfully.\n     *\n     * @type {(boolean | null)}\n     */\n    success?: boolean | null;\n\n    /**\n     * Add specific error code in case of failure\n     *\n     * @type {string}\n     */\n    errorCode?: string;\n\n    /**\n     * Add specific sub error code in case of failure\n     *\n     * @type {string}\n     */\n    subErrorCode?: string;\n\n    /**\n     * Server error number\n     */\n    serverErrorNo?: string;\n\n    /**\n     * Name of the library used for the operation.\n     *\n     * @type {string}\n     */\n    libraryName: string;\n\n    /**\n     * Version of the library used for the operation.\n     *\n     * @type {string}\n     */\n    libraryVersion: string;\n\n    /**\n     * Version of the library used last. Used to track upgrades and downgrades\n     */\n    previousLibraryVersion?: string;\n\n    /**\n     * Whether the response is from a native component (e.g., WAM)\n     *\n     * @type {?boolean}\n     */\n    isNativeBroker?: boolean;\n\n    /**\n     * Platform-specific fields, when calling STS and/or broker for token requests\n     */\n    isPlatformAuthorizeRequest?: boolean;\n    isPlatformBrokerRequest?: boolean;\n    brokerErrorName?: string;\n    brokerErrorCode?: string;\n\n    /**\n     * Request ID returned from the response\n     *\n     * @type {?string}\n     */\n    requestId?: string;\n\n    /**\n     * Cache lookup policy\n     *\n     * @type {?number}\n     */\n    cacheLookupPolicy?: number | undefined;\n\n    /**\n     * Cache Outcome\n     * @type {?number}\n     */\n    cacheOutcome?: number;\n\n    /**\n     * Amount of time spent in the JS queue in milliseconds.\n     *\n     * @type {?number}\n     */\n    queuedTimeMs?: number;\n\n    /**\n     * Sub-measurements for internal use. To be deleted before flushing.\n     */\n    incompleteSubMeasurements?: Map<string, SubMeasurement>;\n\n    visibilityChangeCount?: number;\n    incompleteSubsCount?: number;\n\n    /**\n     * CorrelationId of the in progress iframe request that was awaited\n     */\n    awaitIframeCorrelationId?: string;\n    /**\n     * Amount of times queued in the JS event queue.\n     *\n     * @type {?number}\n     */\n    queuedCount?: number;\n    /**\n     * Amount of manually completed queue events.\n     *\n     * @type {?number}\n     */\n    queuedManuallyCompletedCount?: number;\n\n    /**\n     * Size of the id token\n     *\n     * @type {number}\n     */\n    idTokenSize?: number;\n\n    /**\n     *\n     * Size of the access token\n     *\n     * @type {number}\n     */\n\n    accessTokenSize?: number;\n\n    /**\n     *\n     * Size of the refresh token\n     *\n     * @type {number}\n     */\n\n    refreshTokenSize?: number | undefined;\n\n    /**\n     * Application name as specified by the app.\n     *\n     * @type {?string}\n     */\n    appName?: string;\n\n    /**\n     * Application version as specified by the app.\n     *\n     * @type {?string}\n     */\n    appVersion?: string;\n\n    /**\n     * The following are fields that may be emitted in native broker scenarios\n     */\n    extensionId?: string;\n    extensionVersion?: string;\n    matsBrokerVersion?: string;\n    matsAccountJoinOnStart?: string;\n    matsAccountJoinOnEnd?: string;\n    matsDeviceJoin?: string;\n    matsPromptBehavior?: string;\n    matsApiErrorCode?: number;\n    matsUiVisible?: boolean;\n    matsSilentCode?: number;\n    matsSilentBiSubCode?: number;\n    matsSilentMessage?: string;\n    matsSilentStatus?: number;\n    matsHttpStatus?: number;\n    matsHttpEventCount?: number;\n\n    /**\n     * Http POST metadata\n     */\n    httpVerToken?: string;\n    httpStatus?: number;\n    contentTypeHeader?: string;\n    contentLengthHeader?: string;\n\n    /**\n     * Platform broker fields\n     */\n    allowPlatformBroker?: boolean;\n    extensionInstalled?: boolean;\n    extensionHandshakeTimeoutMs?: number;\n    extensionHandshakeTimedOut?: boolean;\n\n    /**\n     * Nested App Auth Fields\n     */\n    nestedAppAuthRequest?: boolean;\n\n    /**\n     * Multiple matched access/id/refresh tokens in the cache\n     */\n    multiMatchedAT?: number;\n    multiMatchedID?: number;\n    multiMatchedRT?: number;\n\n    errorName?: string;\n    errorStack?: string[];\n\n    // Event context as JSON string\n    context?: string;\n\n    // Cache Data\n    cacheLocation?: string;\n    cacheRetentionDays?: number;\n\n    // Number of tokens in the cache to be reported when cache quota is exceeded\n    cacheRtCount?: number;\n    cacheIdCount?: number;\n    cacheAtCount?: number;\n\n    // Scenario id to track custom user prompts\n    scenarioId?: string;\n\n    accountType?: \"AAD\" | \"MSA\" | \"B2C\";\n\n    /**\n     * Server error that triggers a request retry\n     *\n     * @type {string}\n     */\n    retryError?: string;\n\n    embeddedClientId?: string;\n    embeddedRedirectUri?: string;\n\n    isAsyncPopup?: boolean;\n\n    rtExpiresOnMs?: number;\n\n    sidFromClaims?: boolean;\n    sidFromRequest?: boolean;\n    loginHintFromRequest?: boolean;\n    loginHintFromUpn?: boolean;\n    loginHintFromClaim?: boolean;\n    domainHintFromRequest?: boolean;\n\n    prompt?: string;\n\n    usePreGeneratedPkce?: boolean;\n\n    // Number of MSAL JS instances in the frame\n    msalInstanceCount?: number;\n    // Number of MSAL JS instances using the same client id in the frame\n    sameClientIdInstanceCount?: number;\n\n    navigateCallbackResult?: boolean;\n\n    dataBoundary?: DataBoundary;\n};\n\nexport type PerformanceEventContext = {\n    dur?: number;\n    err?: string;\n    subErr?: string;\n    fail?: number;\n};\n\nexport type PerformanceEventStackedContext = PerformanceEventContext & {\n    name?: string;\n    childErr?: string;\n};\n\nexport const IntFields: ReadonlySet<string> = new Set([\n    \"accessTokenSize\",\n    \"durationMs\",\n    \"idTokenSize\",\n    \"matsSilentStatus\",\n    \"matsHttpStatus\",\n    \"refreshTokenSize\",\n    \"queuedTimeMs\",\n    \"startTimeMs\",\n    \"status\",\n    \"multiMatchedAT\",\n    \"multiMatchedID\",\n    \"multiMatchedRT\",\n    \"unencryptedCacheCount\",\n    \"encryptedCacheExpiredCount\",\n    \"oldAccountCount\",\n    \"oldAccessCount\",\n    \"oldIdCount\",\n    \"oldRefreshCount\",\n    \"currAccountCount\",\n    \"currAccessCount\",\n    \"currIdCount\",\n    \"currRefreshCount\",\n    \"expiredCacheRemovedCount\",\n    \"upgradedCacheCount\",\n]);\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    IPerformanceClient,\n    InProgressPerformanceEvent,\n} from \"./IPerformanceClient.js\";\nimport { IPerformanceMeasurement } from \"./IPerformanceMeasurement.js\";\nimport {\n    PerformanceEvent,\n    PerformanceEventStatus,\n} from \"./PerformanceEvent.js\";\n\nexport class StubPerformanceMeasurement implements IPerformanceMeasurement {\n    startMeasurement(): void {\n        return;\n    }\n    endMeasurement(): void {\n        return;\n    }\n    flushMeasurement(): number | null {\n        return null;\n    }\n}\n\nexport class StubPerformanceClient implements IPerformanceClient {\n    generateId(): string {\n        return \"callback-id\";\n    }\n\n    startMeasurement(\n        measureName: string,\n        correlationId?: string | undefined\n    ): InProgressPerformanceEvent {\n        return {\n            end: () => null,\n            discard: () => {},\n            add: () => {},\n            increment: () => {},\n            event: {\n                eventId: this.generateId(),\n                status: PerformanceEventStatus.InProgress,\n                authority: \"\",\n                libraryName: \"\",\n                libraryVersion: \"\",\n                clientId: \"\",\n                name: measureName,\n                startTimeMs: Date.now(),\n                correlationId: correlationId || \"\",\n            },\n            measurement: new StubPerformanceMeasurement(),\n        };\n    }\n\n    startPerformanceMeasurement(): IPerformanceMeasurement {\n        return new StubPerformanceMeasurement();\n    }\n    calculateQueuedTime(): number {\n        return 0;\n    }\n\n    addQueueMeasurement(): void {\n        return;\n    }\n\n    setPreQueueTime(): void {\n        return;\n    }\n\n    endMeasurement(): PerformanceEvent | null {\n        return null;\n    }\n\n    discardMeasurements(): void {\n        return;\n    }\n\n    removePerformanceCallback(): boolean {\n        return true;\n    }\n\n    addPerformanceCallback(): string {\n        return \"\";\n    }\n\n    emitEvents(): void {\n        return;\n    }\n\n    addFields(): void {\n        return;\n    }\n\n    incrementFields(): void {\n        return;\n    }\n\n    cacheEventByCorrelationId(): void {\n        return;\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { INetworkModule } from \"../network/INetworkModule.js\";\nimport { DEFAULT_CRYPTO_IMPLEMENTATION, ICrypto } from \"../crypto/ICrypto.js\";\nimport { ILoggerCallback, Logger, LogLevel } from \"../logger/Logger.js\";\nimport {\n    Constants,\n    DEFAULT_TOKEN_RENEWAL_OFFSET_SEC,\n} from \"../utils/Constants.js\";\nimport { version } from \"../packageMetadata.js\";\nimport type { Authority } from \"../authority/Authority.js\";\nimport { AzureCloudInstance } from \"../authority/AuthorityOptions.js\";\nimport { CacheManager, DefaultStorageClass } from \"../cache/CacheManager.js\";\nimport { ServerTelemetryManager } from \"../telemetry/server/ServerTelemetryManager.js\";\nimport { ICachePlugin } from \"../cache/interface/ICachePlugin.js\";\nimport { ISerializableTokenCache } from \"../cache/interface/ISerializableTokenCache.js\";\nimport { ClientCredentials } from \"../account/ClientCredentials.js\";\nimport { ProtocolMode } from \"../authority/ProtocolMode.js\";\nimport {\n    ClientAuthErrorCodes,\n    createClientAuthError,\n} from \"../error/ClientAuthError.js\";\nimport { StubPerformanceClient } from \"../telemetry/performance/StubPerformanceClient.js\";\n\n/**\n * Use the configuration object to configure MSAL Modules and initialize the base interfaces for MSAL.\n *\n * This object allows you to configure important elements of MSAL functionality:\n * - authOptions                - Authentication for application\n * - cryptoInterface            - Implementation of crypto functions\n * - libraryInfo                - Library metadata\n * - telemetry                  - Telemetry options and data\n * - loggerOptions              - Logging for application\n * - networkInterface           - Network implementation\n * - storageInterface           - Storage implementation\n * - systemOptions              - Additional library options\n * - clientCredentials          - Credentials options for confidential clients\n * @internal\n */\nexport type ClientConfiguration = {\n    authOptions: AuthOptions;\n    systemOptions?: SystemOptions;\n    loggerOptions?: LoggerOptions;\n    cacheOptions?: CacheOptions;\n    storageInterface?: CacheManager;\n    networkInterface?: INetworkModule;\n    cryptoInterface?: ICrypto;\n    clientCredentials?: ClientCredentials;\n    libraryInfo?: LibraryInfo;\n    telemetry?: TelemetryOptions;\n    serverTelemetryManager?: ServerTelemetryManager | null;\n    persistencePlugin?: ICachePlugin | null;\n    serializableCache?: ISerializableTokenCache | null;\n};\n\nexport type CommonClientConfiguration = {\n    authOptions: Required<AuthOptions>;\n    systemOptions: Required<SystemOptions>;\n    loggerOptions: Required<LoggerOptions>;\n    cacheOptions: Required<CacheOptions>;\n    storageInterface: CacheManager;\n    networkInterface: INetworkModule;\n    cryptoInterface: Required<ICrypto>;\n    libraryInfo: LibraryInfo;\n    telemetry: Required<TelemetryOptions>;\n    serverTelemetryManager: ServerTelemetryManager | null;\n    clientCredentials: ClientCredentials;\n    persistencePlugin: ICachePlugin | null;\n    serializableCache: ISerializableTokenCache | null;\n};\n\n/**\n * Use this to configure the auth options in the ClientConfiguration object\n *\n * - clientId                    - Client ID of your app registered with our Application registration portal : https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/RegisteredAppsPreview in Microsoft Identity Platform\n * - authority                   - You can configure a specific authority, defaults to \" \" or \"https://login.microsoftonline.com/common\"\n * - knownAuthorities            - An array of URIs that are known to be valid. Used in B2C scenarios.\n * - cloudDiscoveryMetadata      - A string containing the cloud discovery response. Used in AAD scenarios.\n * - clientCapabilities          - Array of capabilities which will be added to the claims.access_token.xms_cc request property on every network request.\n * - protocolMode                - Enum that represents the protocol that msal follows. Used for configuring proper endpoints.\n * - skipAuthorityMetadataCache  - A flag to choose whether to use or not use the local metadata cache during authority initialization. Defaults to false.\n * - instanceAware               - A flag of whether the STS will send back additional parameters to specify where the tokens should be retrieved from.\n * - redirectUri                 - The redirect URI where authentication responses can be received by your application. It must exactly match one of the redirect URIs registered in the Azure portal.\n * - encodeExtraQueryParams      - A flag to choose whether to encode the extra query parameters or not. Defaults to false.\n * @internal\n */\nexport type AuthOptions = {\n    clientId: string;\n    authority: Authority;\n    redirectUri: string;\n    clientCapabilities?: Array<string>;\n    azureCloudOptions?: AzureCloudOptions;\n    skipAuthorityMetadataCache?: boolean;\n    instanceAware?: boolean;\n    /**\n     * @deprecated This flag is deprecated and will be removed in the next major version where all extra query params will be encoded by default.\n     */\n    encodeExtraQueryParams?: boolean;\n};\n\n/**\n * Use this to configure token renewal info in the Configuration object\n *\n * - tokenRenewalOffsetSeconds    - Sets the window of offset needed to renew the token before expiry\n */\nexport type SystemOptions = {\n    tokenRenewalOffsetSeconds?: number;\n    preventCorsPreflight?: boolean;\n};\n\n/**\n *  Use this to configure the logging that MSAL does, by configuring logger options in the Configuration object\n *\n * - loggerCallback                - Callback for logger\n * - piiLoggingEnabled             - Sets whether pii logging is enabled\n * - logLevel                      - Sets the level at which logging happens\n * - correlationId                 - Sets the correlationId printed by the logger\n */\nexport type LoggerOptions = {\n    loggerCallback?: ILoggerCallback;\n    piiLoggingEnabled?: boolean;\n    logLevel?: LogLevel;\n    correlationId?: string;\n};\n\n/**\n *  Use this to configure credential cache preferences in the ClientConfiguration object\n *\n * - claimsBasedCachingEnabled   - Sets whether tokens should be cached based on the claims hash. Default is false.\n */\nexport type CacheOptions = {\n    /**\n     * @deprecated claimsBasedCachingEnabled is deprecated and will be removed in the next major version.\n     */\n    claimsBasedCachingEnabled?: boolean;\n};\n\n/**\n * Library-specific options\n */\nexport type LibraryInfo = {\n    sku: string;\n    version: string;\n    cpu: string;\n    os: string;\n};\n\n/**\n * AzureCloudInstance specific options\n *\n * - azureCloudInstance             - string enum providing short notation for soverign and public cloud authorities\n * - tenant                         - provision to provide the tenant info\n */\nexport type AzureCloudOptions = {\n    azureCloudInstance: AzureCloudInstance;\n    tenant?: string;\n};\n\nexport type TelemetryOptions = {\n    application: ApplicationTelemetry;\n};\n\n/**\n * Telemetry information sent on request\n * - appName: Unique string name of an application\n * - appVersion: Version of the application using MSAL\n */\nexport type ApplicationTelemetry = {\n    appName: string;\n    appVersion: string;\n};\n\nexport const DEFAULT_SYSTEM_OPTIONS: Required<SystemOptions> = {\n    tokenRenewalOffsetSeconds: DEFAULT_TOKEN_RENEWAL_OFFSET_SEC,\n    preventCorsPreflight: false,\n};\n\nconst DEFAULT_LOGGER_IMPLEMENTATION: Required<LoggerOptions> = {\n    loggerCallback: () => {\n        // allow users to not set loggerCallback\n    },\n    piiLoggingEnabled: false,\n    logLevel: LogLevel.Info,\n    correlationId: Constants.EMPTY_STRING,\n};\n\nconst DEFAULT_CACHE_OPTIONS: Required<CacheOptions> = {\n    claimsBasedCachingEnabled: false,\n};\n\nconst DEFAULT_NETWORK_IMPLEMENTATION: INetworkModule = {\n    async sendGetRequestAsync<T>(): Promise<T> {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    },\n    async sendPostRequestAsync<T>(): Promise<T> {\n        throw createClientAuthError(ClientAuthErrorCodes.methodNotImplemented);\n    },\n};\n\nconst DEFAULT_LIBRARY_INFO: LibraryInfo = {\n    sku: Constants.SKU,\n    version: version,\n    cpu: Constants.EMPTY_STRING,\n    os: Constants.EMPTY_STRING,\n};\n\nconst DEFAULT_CLIENT_CREDENTIALS: ClientCredentials = {\n    clientSecret: Constants.EMPTY_STRING,\n    clientAssertion: undefined,\n};\n\nconst DEFAULT_AZURE_CLOUD_OPTIONS: AzureCloudOptions = {\n    azureCloudInstance: AzureCloudInstance.None,\n    tenant: `${Constants.DEFAULT_COMMON_TENANT}`,\n};\n\nconst DEFAULT_TELEMETRY_OPTIONS: Required<TelemetryOptions> = {\n    application: {\n        appName: \"\",\n        appVersion: \"\",\n    },\n};\n\n/**\n * Function that sets the default options when not explicitly configured from app developer\n *\n * @param Configuration\n *\n * @returns Configuration\n */\nexport function buildClientConfiguration({\n    authOptions: userAuthOptions,\n    systemOptions: userSystemOptions,\n    loggerOptions: userLoggerOption,\n    cacheOptions: userCacheOptions,\n    storageInterface: storageImplementation,\n    networkInterface: networkImplementation,\n    cryptoInterface: cryptoImplementation,\n    clientCredentials: clientCredentials,\n    libraryInfo: libraryInfo,\n    telemetry: telemetry,\n    serverTelemetryManager: serverTelemetryManager,\n    persistencePlugin: persistencePlugin,\n    serializableCache: serializableCache,\n}: ClientConfiguration): CommonClientConfiguration {\n    const loggerOptions = {\n        ...DEFAULT_LOGGER_IMPLEMENTATION,\n        ...userLoggerOption,\n    };\n\n    return {\n        authOptions: buildAuthOptions(userAuthOptions),\n        systemOptions: { ...DEFAULT_SYSTEM_OPTIONS, ...userSystemOptions },\n        loggerOptions: loggerOptions,\n        cacheOptions: { ...DEFAULT_CACHE_OPTIONS, ...userCacheOptions },\n        storageInterface:\n            storageImplementation ||\n            new DefaultStorageClass(\n                userAuthOptions.clientId,\n                DEFAULT_CRYPTO_IMPLEMENTATION,\n                new Logger(loggerOptions),\n                new StubPerformanceClient()\n            ),\n        networkInterface:\n            networkImplementation || DEFAULT_NETWORK_IMPLEMENTATION,\n        cryptoInterface: cryptoImplementation || DEFAULT_CRYPTO_IMPLEMENTATION,\n        clientCredentials: clientCredentials || DEFAULT_CLIENT_CREDENTIALS,\n        libraryInfo: { ...DEFAULT_LIBRARY_INFO, ...libraryInfo },\n        telemetry: { ...DEFAULT_TELEMETRY_OPTIONS, ...telemetry },\n        serverTelemetryManager: serverTelemetryManager || null,\n        persistencePlugin: persistencePlugin || null,\n        serializableCache: serializableCache || null,\n    };\n}\n\n/**\n * Construct authoptions from the client and platform passed values\n * @param authOptions\n */\nfunction buildAuthOptions(authOptions: AuthOptions): Required<AuthOptions> {\n    return {\n        clientCapabilities: [],\n        azureCloudOptions: DEFAULT_AZURE_CLOUD_OPTIONS,\n        skipAuthorityMetadataCache: false,\n        instanceAware: false,\n        encodeExtraQueryParams: false,\n        ...authOptions,\n    };\n}\n\n/**\n * Returns true if config has protocolMode set to ProtocolMode.OIDC, false otherwise\n * @param ClientConfiguration\n */\nexport function isOidcProtocolMode(config: ClientConfiguration): boolean {\n    return (\n        config.authOptions.authority.options.protocolMode === ProtocolMode.OIDC\n    );\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nexport type CcsCredential = {\n    credential: string;\n    type: CcsCredentialType;\n};\n\nexport const CcsCredentialType = {\n    HOME_ACCOUNT_ID: \"home_account_id\",\n    UPN: \"UPN\",\n} as const;\nexport type CcsCredentialType =\n    (typeof CcsCredentialType)[keyof typeof CcsCredentialType];\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nexport const CLIENT_ID = \"client_id\";\nexport const REDIRECT_URI = \"redirect_uri\";\nexport const RESPONSE_TYPE = \"response_type\";\nexport const RESPONSE_MODE = \"response_mode\";\nexport const GRANT_TYPE = \"grant_type\";\nexport const CLAIMS = \"claims\";\nexport const SCOPE = \"scope\";\nexport const ERROR = \"error\";\nexport const ERROR_DESCRIPTION = \"error_description\";\nexport const ACCESS_TOKEN = \"access_token\";\nexport const ID_TOKEN = \"id_token\";\nexport const REFRESH_TOKEN = \"refresh_token\";\nexport const EXPIRES_IN = \"expires_in\";\nexport const REFRESH_TOKEN_EXPIRES_IN = \"refresh_token_expires_in\";\nexport const STATE = \"state\";\nexport const NONCE = \"nonce\";\nexport const PROMPT = \"prompt\";\nexport const SESSION_STATE = \"session_state\";\nexport const CLIENT_INFO = \"client_info\";\nexport const CODE = \"code\";\nexport const CODE_CHALLENGE = \"code_challenge\";\nexport const CODE_CHALLENGE_METHOD = \"code_challenge_method\";\nexport const CODE_VERIFIER = \"code_verifier\";\nexport const CLIENT_REQUEST_ID = \"client-request-id\";\nexport const X_CLIENT_SKU = \"x-client-SKU\";\nexport const X_CLIENT_VER = \"x-client-VER\";\nexport const X_CLIENT_OS = \"x-client-OS\";\nexport const X_CLIENT_CPU = \"x-client-CPU\";\nexport const X_CLIENT_CURR_TELEM = \"x-client-current-telemetry\";\nexport const X_CLIENT_LAST_TELEM = \"x-client-last-telemetry\";\nexport const X_MS_LIB_CAPABILITY = \"x-ms-lib-capability\";\nexport const X_APP_NAME = \"x-app-name\";\nexport const X_APP_VER = \"x-app-ver\";\nexport const POST_LOGOUT_URI = \"post_logout_redirect_uri\";\nexport const ID_TOKEN_HINT = \"id_token_hint\";\nexport const DEVICE_CODE = \"device_code\";\nexport const CLIENT_SECRET = \"client_secret\";\nexport const CLIENT_ASSERTION = \"client_assertion\";\nexport const CLIENT_ASSERTION_TYPE = \"client_assertion_type\";\nexport const TOKEN_TYPE = \"token_type\";\nexport const REQ_CNF = \"req_cnf\";\nexport const OBO_ASSERTION = \"assertion\";\nexport const REQUESTED_TOKEN_USE = \"requested_token_use\";\nexport const ON_BEHALF_OF = \"on_behalf_of\";\nexport const FOCI = \"foci\";\nexport const CCS_HEADER = \"X-AnchorMailbox\";\nexport const RETURN_SPA_CODE = \"return_spa_code\";\nexport const NATIVE_BROKER = \"nativebroker\";\nexport const LOGOUT_HINT = \"logout_hint\";\nexport const SID = \"sid\";\nexport const LOGIN_HINT = \"login_hint\";\nexport const DOMAIN_HINT = \"domain_hint\";\nexport const X_CLIENT_EXTRA_SKU = \"x-client-xtra-sku\";\nexport const BROKER_CLIENT_ID = \"brk_client_id\";\nexport const BROKER_REDIRECT_URI = \"brk_redirect_uri\";\nexport const INSTANCE_AWARE = \"instance_aware\";\nexport const EAR_JWK = \"ear_jwk\";\nexport const EAR_JWE_CRYPTO = \"ear_jwe_crypto\";\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    ResponseMode,\n    CLIENT_INFO,\n    AuthenticationScheme,\n    ClaimsRequestKeys,\n    PasswordGrantConstants,\n    OIDC_DEFAULT_SCOPES,\n    ThrottlingConstants,\n    HeaderNames,\n    OAuthResponseType,\n} from \"../utils/Constants.js\";\nimport * as AADServerParamKeys from \"../constants/AADServerParamKeys.js\";\nimport { ScopeSet } from \"./ScopeSet.js\";\nimport {\n    createClientConfigurationError,\n    ClientConfigurationErrorCodes,\n} from \"../error/ClientConfigurationError.js\";\nimport { StringDict } from \"../utils/MsalTypes.js\";\nimport {\n    ApplicationTelemetry,\n    LibraryInfo,\n} from \"../config/ClientConfiguration.js\";\nimport { ServerTelemetryManager } from \"../telemetry/server/ServerTelemetryManager.js\";\nimport { ClientInfo } from \"../account/ClientInfo.js\";\nimport { IPerformanceClient } from \"../telemetry/performance/IPerformanceClient.js\";\n\nexport function instrumentBrokerParams(\n    parameters: Map<string, string>,\n    correlationId?: string,\n    performanceClient?: IPerformanceClient\n): void {\n    if (!correlationId) {\n        return;\n    }\n\n    const clientId = parameters.get(AADServerParamKeys.CLIENT_ID);\n    if (clientId && parameters.has(AADServerParamKeys.BROKER_CLIENT_ID)) {\n        performanceClient?.addFields(\n            {\n                embeddedClientId: clientId,\n                embeddedRedirectUri: parameters.get(\n                    AADServerParamKeys.REDIRECT_URI\n                ),\n            },\n            correlationId\n        );\n    }\n}\n\n/**\n * Add the given response_type\n * @param parameters\n * @param responseType\n */\nexport function addResponseType(\n    parameters: Map<string, string>,\n    responseType: OAuthResponseType\n): void {\n    parameters.set(AADServerParamKeys.RESPONSE_TYPE, responseType);\n}\n\n/**\n * add response_mode. defaults to query.\n * @param responseMode\n */\nexport function addResponseMode(\n    parameters: Map<string, string>,\n    responseMode?: ResponseMode\n): void {\n    parameters.set(\n        AADServerParamKeys.RESPONSE_MODE,\n        responseMode ? responseMode : ResponseMode.QUERY\n    );\n}\n\n/**\n * Add flag to indicate STS should attempt to use WAM if available\n */\nexport function addNativeBroker(parameters: Map<string, string>): void {\n    parameters.set(AADServerParamKeys.NATIVE_BROKER, \"1\");\n}\n\n/**\n * add scopes. set addOidcScopes to false to prevent default scopes in non-user scenarios\n * @param scopeSet\n * @param addOidcScopes\n */\nexport function addScopes(\n    parameters: Map<string, string>,\n    scopes: string[],\n    addOidcScopes: boolean = true,\n    defaultScopes: Array<string> = OIDC_DEFAULT_SCOPES\n): void {\n    // Always add openid to the scopes when adding OIDC scopes\n    if (\n        addOidcScopes &&\n        !defaultScopes.includes(\"openid\") &&\n        !scopes.includes(\"openid\")\n    ) {\n        defaultScopes.push(\"openid\");\n    }\n    const requestScopes = addOidcScopes\n        ? [...(scopes || []), ...defaultScopes]\n        : scopes || [];\n    const scopeSet = new ScopeSet(requestScopes);\n    parameters.set(AADServerParamKeys.SCOPE, scopeSet.printScopes());\n}\n\n/**\n * add clientId\n * @param clientId\n */\nexport function addClientId(\n    parameters: Map<string, string>,\n    clientId: string\n): void {\n    parameters.set(AADServerParamKeys.CLIENT_ID, clientId);\n}\n\n/**\n * add redirect_uri\n * @param redirectUri\n */\nexport function addRedirectUri(\n    parameters: Map<string, string>,\n    redirectUri: string\n): void {\n    parameters.set(AADServerParamKeys.REDIRECT_URI, redirectUri);\n}\n\n/**\n * add post logout redirectUri\n * @param redirectUri\n */\nexport function addPostLogoutRedirectUri(\n    parameters: Map<string, string>,\n    redirectUri: string\n): void {\n    parameters.set(AADServerParamKeys.POST_LOGOUT_URI, redirectUri);\n}\n\n/**\n * add id_token_hint to logout request\n * @param idTokenHint\n */\nexport function addIdTokenHint(\n    parameters: Map<string, string>,\n    idTokenHint: string\n): void {\n    parameters.set(AADServerParamKeys.ID_TOKEN_HINT, idTokenHint);\n}\n\n/**\n * add domain_hint\n * @param domainHint\n */\nexport function addDomainHint(\n    parameters: Map<string, string>,\n    domainHint: string\n): void {\n    parameters.set(AADServerParamKeys.DOMAIN_HINT, domainHint);\n}\n\n/**\n * add login_hint\n * @param loginHint\n */\nexport function addLoginHint(\n    parameters: Map<string, string>,\n    loginHint: string\n): void {\n    parameters.set(AADServerParamKeys.LOGIN_HINT, loginHint);\n}\n\n/**\n * Adds the CCS (Cache Credential Service) query parameter for login_hint\n * @param loginHint\n */\nexport function addCcsUpn(\n    parameters: Map<string, string>,\n    loginHint: string\n): void {\n    parameters.set(HeaderNames.CCS_HEADER, `UPN:${loginHint}`);\n}\n\n/**\n * Adds the CCS (Cache Credential Service) query parameter for account object\n * @param loginHint\n */\nexport function addCcsOid(\n    parameters: Map<string, string>,\n    clientInfo: ClientInfo\n): void {\n    parameters.set(\n        HeaderNames.CCS_HEADER,\n        `Oid:${clientInfo.uid}@${clientInfo.utid}`\n    );\n}\n\n/**\n * add sid\n * @param sid\n */\nexport function addSid(parameters: Map<string, string>, sid: string): void {\n    parameters.set(AADServerParamKeys.SID, sid);\n}\n\n/**\n * add claims\n * @param claims\n */\nexport function addClaims(\n    parameters: Map<string, string>,\n    claims?: string,\n    clientCapabilities?: Array<string>\n): void {\n    const mergedClaims = addClientCapabilitiesToClaims(\n        claims,\n        clientCapabilities\n    );\n    try {\n        JSON.parse(mergedClaims);\n    } catch (e) {\n        throw createClientConfigurationError(\n            ClientConfigurationErrorCodes.invalidClaims\n        );\n    }\n    parameters.set(AADServerParamKeys.CLAIMS, mergedClaims);\n}\n\n/**\n * add correlationId\n * @param correlationId\n */\nexport function addCorrelationId(\n    parameters: Map<string, string>,\n    correlationId: string\n): void {\n    parameters.set(AADServerParamKeys.CLIENT_REQUEST_ID, correlationId);\n}\n\n/**\n * add library info query params\n * @param libraryInfo\n */\nexport function addLibraryInfo(\n    parameters: Map<string, string>,\n    libraryInfo: LibraryInfo\n): void {\n    // Telemetry Info\n    parameters.set(AADServerParamKeys.X_CLIENT_SKU, libraryInfo.sku);\n    parameters.set(AADServerParamKeys.X_CLIENT_VER, libraryInfo.version);\n    if (libraryInfo.os) {\n        parameters.set(AADServerParamKeys.X_CLIENT_OS, libraryInfo.os);\n    }\n    if (libraryInfo.cpu) {\n        parameters.set(AADServerParamKeys.X_CLIENT_CPU, libraryInfo.cpu);\n    }\n}\n\n/**\n * Add client telemetry parameters\n * @param appTelemetry\n */\nexport function addApplicationTelemetry(\n    parameters: Map<string, string>,\n    appTelemetry: ApplicationTelemetry\n): void {\n    if (appTelemetry?.appName) {\n        parameters.set(AADServerParamKeys.X_APP_NAME, appTelemetry.appName);\n    }\n\n    if (appTelemetry?.appVersion) {\n        parameters.set(AADServerParamKeys.X_APP_VER, appTelemetry.appVersion);\n    }\n}\n\n/**\n * add prompt\n * @param prompt\n */\nexport function addPrompt(\n    parameters: Map<string, string>,\n    prompt: string\n): void {\n    parameters.set(AADServerParamKeys.PROMPT, prompt);\n}\n\n/**\n * add state\n * @param state\n */\nexport function addState(parameters: Map<string, string>, state: string): void {\n    if (state) {\n        parameters.set(AADServerParamKeys.STATE, state);\n    }\n}\n\n/**\n * add nonce\n * @param nonce\n */\nexport function addNonce(parameters: Map<string, string>, nonce: string): void {\n    parameters.set(AADServerParamKeys.NONCE, nonce);\n}\n\n/**\n * add code_challenge and code_challenge_method\n * - throw if either of them are not passed\n * @param codeChallenge\n * @param codeChallengeMethod\n */\nexport function addCodeChallengeParams(\n    parameters: Map<string, string>,\n    codeChallenge?: string,\n    codeChallengeMethod?: string\n): void {\n    if (codeChallenge && codeChallengeMethod) {\n        parameters.set(AADServerParamKeys.CODE_CHALLENGE, codeChallenge);\n        parameters.set(\n            AADServerParamKeys.CODE_CHALLENGE_METHOD,\n            codeChallengeMethod\n        );\n    } else {\n        throw createClientConfigurationError(\n            ClientConfigurationErrorCodes.pkceParamsMissing\n        );\n    }\n}\n\n/**\n * add the `authorization_code` passed by the user to exchange for a token\n * @param code\n */\nexport function addAuthorizationCode(\n    parameters: Map<string, string>,\n    code: string\n): void {\n    parameters.set(AADServerParamKeys.CODE, code);\n}\n\n/**\n * add the `authorization_code` passed by the user to exchange for a token\n * @param code\n */\nexport function addDeviceCode(\n    parameters: Map<string, string>,\n    code: string\n): void {\n    parameters.set(AADServerParamKeys.DEVICE_CODE, code);\n}\n\n/**\n * add the `refreshToken` passed by the user\n * @param refreshToken\n */\nexport function addRefreshToken(\n    parameters: Map<string, string>,\n    refreshToken: string\n): void {\n    parameters.set(AADServerParamKeys.REFRESH_TOKEN, refreshToken);\n}\n\n/**\n * add the `code_verifier` passed by the user to exchange for a token\n * @param codeVerifier\n */\nexport function addCodeVerifier(\n    parameters: Map<string, string>,\n    codeVerifier: string\n): void {\n    parameters.set(AADServerParamKeys.CODE_VERIFIER, codeVerifier);\n}\n\n/**\n * add client_secret\n * @param clientSecret\n */\nexport function addClientSecret(\n    parameters: Map<string, string>,\n    clientSecret: string\n): void {\n    parameters.set(AADServerParamKeys.CLIENT_SECRET, clientSecret);\n}\n\n/**\n * add clientAssertion for confidential client flows\n * @param clientAssertion\n */\nexport function addClientAssertion(\n    parameters: Map<string, string>,\n    clientAssertion: string\n): void {\n    if (clientAssertion) {\n        parameters.set(AADServerParamKeys.CLIENT_ASSERTION, clientAssertion);\n    }\n}\n\n/**\n * add clientAssertionType for confidential client flows\n * @param clientAssertionType\n */\nexport function addClientAssertionType(\n    parameters: Map<string, string>,\n    clientAssertionType: string\n): void {\n    if (clientAssertionType) {\n        parameters.set(\n            AADServerParamKeys.CLIENT_ASSERTION_TYPE,\n            clientAssertionType\n        );\n    }\n}\n\n/**\n * add OBO assertion for confidential client flows\n * @param clientAssertion\n */\nexport function addOboAssertion(\n    parameters: Map<string, string>,\n    oboAssertion: string\n): void {\n    parameters.set(AADServerParamKeys.OBO_ASSERTION, oboAssertion);\n}\n\n/**\n * add grant type\n * @param grantType\n */\nexport function addRequestTokenUse(\n    parameters: Map<string, string>,\n    tokenUse: string\n): void {\n    parameters.set(AADServerParamKeys.REQUESTED_TOKEN_USE, tokenUse);\n}\n\n/**\n * add grant type\n * @param grantType\n */\nexport function addGrantType(\n    parameters: Map<string, string>,\n    grantType: string\n): void {\n    parameters.set(AADServerParamKeys.GRANT_TYPE, grantType);\n}\n\n/**\n * add client info\n *\n */\nexport function addClientInfo(parameters: Map<string, string>): void {\n    parameters.set(CLIENT_INFO, \"1\");\n}\n\nexport function addInstanceAware(parameters: Map<string, string>): void {\n    if (!parameters.has(AADServerParamKeys.INSTANCE_AWARE)) {\n        parameters.set(AADServerParamKeys.INSTANCE_AWARE, \"true\");\n    }\n}\n\n/**\n * add extraQueryParams\n * @param eQParams\n */\nexport function addExtraQueryParameters(\n    parameters: Map<string, string>,\n    eQParams: StringDict\n): void {\n    Object.entries(eQParams).forEach(([key, value]) => {\n        if (!parameters.has(key) && value) {\n            parameters.set(key, value);\n        }\n    });\n}\n\nexport function addClientCapabilitiesToClaims(\n    claims?: string,\n    clientCapabilities?: Array<string>\n): string {\n    let mergedClaims: object;\n\n    // Parse provided claims into JSON object or initialize empty object\n    if (!claims) {\n        mergedClaims = {};\n    } else {\n        try {\n            mergedClaims = JSON.parse(claims);\n        } catch (e) {\n            throw createClientConfigurationError(\n                ClientConfigurationErrorCodes.invalidClaims\n            );\n        }\n    }\n\n    if (clientCapabilities && clientCapabilities.length > 0) {\n        if (!mergedClaims.hasOwnProperty(ClaimsRequestKeys.ACCESS_TOKEN)) {\n            // Add access_token key to claims object\n            mergedClaims[ClaimsRequestKeys.ACCESS_TOKEN] = {};\n        }\n\n        // Add xms_cc claim with provided clientCapabilities to access_token key\n        mergedClaims[ClaimsRequestKeys.ACCESS_TOKEN][ClaimsRequestKeys.XMS_CC] =\n            {\n                values: clientCapabilities,\n            };\n    }\n\n    return JSON.stringify(mergedClaims);\n}\n\n/**\n * adds `username` for Password Grant flow\n * @param username\n */\nexport function addUsername(\n    parameters: Map<string, string>,\n    username: string\n): void {\n    parameters.set(PasswordGrantConstants.username, username);\n}\n\n/**\n * adds `password` for Password Grant flow\n * @param password\n */\nexport function addPassword(\n    parameters: Map<string, string>,\n    password: string\n): void {\n    parameters.set(PasswordGrantConstants.password, password);\n}\n\n/**\n * add pop_jwk to query params\n * @param cnfString\n */\nexport function addPopToken(\n    parameters: Map<string, string>,\n    cnfString: string\n): void {\n    if (cnfString) {\n        parameters.set(AADServerParamKeys.TOKEN_TYPE, AuthenticationScheme.POP);\n        parameters.set(AADServerParamKeys.REQ_CNF, cnfString);\n    }\n}\n\n/**\n * add SSH JWK and key ID to query params\n */\nexport function addSshJwk(\n    parameters: Map<string, string>,\n    sshJwkString: string\n): void {\n    if (sshJwkString) {\n        parameters.set(AADServerParamKeys.TOKEN_TYPE, AuthenticationScheme.SSH);\n        parameters.set(AADServerParamKeys.REQ_CNF, sshJwkString);\n    }\n}\n\n/**\n * add server telemetry fields\n * @param serverTelemetryManager\n */\nexport function addServerTelemetry(\n    parameters: Map<string, string>,\n    serverTelemetryManager: ServerTelemetryManager\n): void {\n    parameters.set(\n        AADServerParamKeys.X_CLIENT_CURR_TELEM,\n        serverTelemetryManager.generateCurrentRequestHeaderValue()\n    );\n    parameters.set(\n        AADServerParamKeys.X_CLIENT_LAST_TELEM,\n        serverTelemetryManager.generateLastRequestHeaderValue()\n    );\n}\n\n/**\n * Adds parameter that indicates to the server that throttling is supported\n */\nexport function addThrottling(parameters: Map<string, string>): void {\n    parameters.set(\n        AADServerParamKeys.X_MS_LIB_CAPABILITY,\n        ThrottlingConstants.X_MS_LIB_CAPABILITY_VALUE\n    );\n}\n\n/**\n * Adds logout_hint parameter for \"silent\" logout which prevent server account picker\n */\nexport function addLogoutHint(\n    parameters: Map<string, string>,\n    logoutHint: string\n): void {\n    parameters.set(AADServerParamKeys.LOGOUT_HINT, logoutHint);\n}\n\nexport function addBrokerParameters(\n    parameters: Map<string, string>,\n    brokerClientId: string,\n    brokerRedirectUri: string\n): void {\n    if (!parameters.has(AADServerParamKeys.BROKER_CLIENT_ID)) {\n        parameters.set(AADServerParamKeys.BROKER_CLIENT_ID, brokerClientId);\n    }\n    if (!parameters.has(AADServerParamKeys.BROKER_REDIRECT_URI)) {\n        parameters.set(\n            AADServerParamKeys.BROKER_REDIRECT_URI,\n            brokerRedirectUri\n        );\n    }\n}\n\n/**\n * Add EAR (Encrypted Authorize Response) request parameters\n * @param parameters\n * @param jwk\n */\nexport function addEARParameters(\n    parameters: Map<string, string>,\n    jwk: string\n): void {\n    parameters.set(AADServerParamKeys.EAR_JWK, encodeURIComponent(jwk));\n\n    // ear_jwe_crypto will always have value: {\"alg\":\"dir\",\"enc\":\"A256GCM\"} so we can hardcode this\n    const jweCryptoB64Encoded = \"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0\";\n    parameters.set(AADServerParamKeys.EAR_JWE_CRYPTO, jweCryptoB64Encoded);\n}\n\n/**\n * Adds authorize body parameters to the request parameters\n * @param parameters\n * @param bodyParameters\n */\nexport function addPostBodyParameters(\n    parameters: Map<string, string>,\n    bodyParameters: StringDict\n): void {\n    Object.entries(bodyParameters).forEach(([key, value]) => {\n        if (value) {\n            parameters.set(key, value);\n        }\n    });\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\n/**\n * Tenant Discovery Response which contains the relevant OAuth endpoints and data needed for authentication and authorization.\n */\nexport type OpenIdConfigResponse = {\n    authorization_endpoint: string;\n    token_endpoint: string;\n    end_session_endpoint?: string;\n    issuer: string;\n    jwks_uri: string;\n};\n\nexport function isOpenIdConfigResponse(response: object): boolean {\n    return (\n        response.hasOwnProperty(\"authorization_endpoint\") &&\n        response.hasOwnProperty(\"token_endpoint\") &&\n        response.hasOwnProperty(\"issuer\") &&\n        response.hasOwnProperty(\"jwks_uri\")\n    );\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { CloudDiscoveryMetadata } from \"./CloudDiscoveryMetadata.js\";\n\n/**\n * The OpenID Configuration Endpoint Response type. Used by the authority class to get relevant OAuth endpoints.\n */\nexport type CloudInstanceDiscoveryResponse = {\n    tenant_discovery_endpoint: string;\n    metadata: Array<CloudDiscoveryMetadata>;\n};\n\nexport function isCloudInstanceDiscoveryResponse(response: object): boolean {\n    return (\n        response.hasOwnProperty(\"tenant_discovery_endpoint\") &&\n        response.hasOwnProperty(\"metadata\")\n    );\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\n/**\n * The OpenID Configuration Endpoint Response type. Used by the authority class to get relevant OAuth endpoints.\n */\nexport type CloudInstanceDiscoveryErrorResponse = {\n    error: String;\n    error_description: String;\n    error_codes?: Array<Number>;\n    timestamp?: String;\n    trace_id?: String;\n    correlation_id?: String;\n    error_uri?: String;\n};\n\nexport function isCloudInstanceDiscoveryErrorResponse(\n    response: object\n): boolean {\n    return (\n        response.hasOwnProperty(\"error\") &&\n        response.hasOwnProperty(\"error_description\")\n    );\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { Logger } from \"../logger/Logger.js\";\nimport { IPerformanceClient } from \"../telemetry/performance/IPerformanceClient.js\";\n\n/**\n * Wraps a function with a performance measurement.\n * Usage: invoke(functionToCall, performanceClient, \"EventName\", \"correlationId\")(...argsToPassToFunction)\n * @param callback\n * @param eventName\n * @param logger\n * @param telemetryClient\n * @param correlationId\n * @returns\n * @internal\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const invoke = <T extends Array<any>, U>(\n    callback: (...args: T) => U,\n    eventName: string,\n    logger: Logger,\n    telemetryClient?: IPerformanceClient,\n    correlationId?: string\n) => {\n    return (...args: T): U => {\n        logger.trace(`Executing function ${eventName}`);\n        const inProgressEvent = telemetryClient?.startMeasurement(\n            eventName,\n            correlationId\n        );\n        if (correlationId) {\n            // Track number of times this API is called in a single request\n            const eventCount = eventName + \"CallCount\";\n            telemetryClient?.incrementFields(\n                { [eventCount]: 1 },\n                correlationId\n            );\n        }\n        try {\n            const result = callback(...args);\n            inProgressEvent?.end({\n                success: true,\n            });\n            logger.trace(`Returning result from ${eventName}`);\n            return result;\n        } catch (e) {\n            logger.trace(`Error occurred in ${eventName}`);\n            try {\n                logger.trace(JSON.stringify(e));\n            } catch (e) {\n                logger.trace(\"Unable to print error message.\");\n            }\n            inProgressEvent?.end(\n                {\n                    success: false,\n                },\n                e\n            );\n            throw e;\n        }\n    };\n};\n\n/**\n * Wraps an async function with a performance measurement.\n * Usage: invokeAsync(functionToCall, performanceClient, \"EventName\", \"correlationId\")(...argsToPassToFunction)\n * @param callback\n * @param eventName\n * @param logger\n * @param telemetryClient\n * @param correlationId\n * @returns\n * @internal\n *\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const invokeAsync = <T extends Array<any>, U>(\n    callback: (...args: T) => Promise<U>,\n    eventName: string,\n    logger: Logger,\n    telemetryClient?: IPerformanceClient,\n    correlationId?: string\n) => {\n    return (...args: T): Promise<U> => {\n        logger.trace(`Executing function ${eventName}`);\n        const inProgressEvent = telemetryClient?.startMeasurement(\n            eventName,\n            correlationId\n        );\n        if (correlationId) {\n            // Track number of times this API is called in a single request\n            const eventCount = eventName + \"CallCount\";\n            telemetryClient?.incrementFields(\n                { [eventCount]: 1 },\n                correlationId\n            );\n        }\n        telemetryClient?.setPreQueueTime(eventName, correlationId);\n        return callback(...args)\n            .then((response) => {\n                logger.trace(`Returning result from ${eventName}`);\n                inProgressEvent?.end({\n                    success: true,\n                });\n                return response;\n            })\n            .catch((e) => {\n                logger.trace(`Error occurred in ${eventName}`);\n                try {\n                    logger.trace(JSON.stringify(e));\n                } catch (e) {\n                    logger.trace(\"Unable to print error message.\");\n                }\n                inProgressEvent?.end(\n                    {\n                        success: false,\n                    },\n                    e\n                );\n                throw e;\n            });\n    };\n};\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { INetworkModule } from \"../network/INetworkModule.js\";\nimport { NetworkResponse } from \"../network/NetworkResponse.js\";\nimport { IMDSBadResponse } from \"../response/IMDSBadResponse.js\";\nimport {\n    Constants,\n    HttpStatus,\n    RegionDiscoverySources,\n} from \"../utils/Constants.js\";\nimport { RegionDiscoveryMetadata } from \"./RegionDiscoveryMetadata.js\";\nimport { ImdsOptions } from \"./ImdsOptions.js\";\nimport { IPerformanceClient } from \"../telemetry/performance/IPerformanceClient.js\";\nimport { PerformanceEvents } from \"../telemetry/performance/PerformanceEvent.js\";\nimport { invokeAsync } from \"../utils/FunctionWrappers.js\";\nimport { Logger } from \"../logger/Logger.js\";\n\nexport class RegionDiscovery {\n    // Network interface to make requests with.\n    protected networkInterface: INetworkModule;\n    // Logger\n    private logger: Logger;\n    // Performance client\n    protected performanceClient: IPerformanceClient | undefined;\n    // CorrelationId\n    protected correlationId: string | undefined;\n    // Options for the IMDS endpoint request\n    protected static IMDS_OPTIONS: ImdsOptions = {\n        headers: {\n            Metadata: \"true\",\n        },\n    };\n\n    constructor(\n        networkInterface: INetworkModule,\n        logger: Logger,\n        performanceClient?: IPerformanceClient,\n        correlationId?: string\n    ) {\n        this.networkInterface = networkInterface;\n        this.logger = logger;\n        this.performanceClient = performanceClient;\n        this.correlationId = correlationId;\n    }\n\n    /**\n     * Detect the region from the application's environment.\n     *\n     * @returns Promise<string | null>\n     */\n    public async detectRegion(\n        environmentRegion: string | undefined,\n        regionDiscoveryMetadata: RegionDiscoveryMetadata\n    ): Promise<string | null> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.RegionDiscoveryDetectRegion,\n            this.correlationId\n        );\n\n        // Initialize auto detected region with the region from the envrionment\n        let autodetectedRegionName = environmentRegion;\n\n        // Check if a region was detected from the environment, if not, attempt to get the region from IMDS\n        if (!autodetectedRegionName) {\n            const options = RegionDiscovery.IMDS_OPTIONS;\n\n            try {\n                const localIMDSVersionResponse = await invokeAsync(\n                    this.getRegionFromIMDS.bind(this),\n                    PerformanceEvents.RegionDiscoveryGetRegionFromIMDS,\n                    this.logger,\n                    this.performanceClient,\n                    this.correlationId\n                )(Constants.IMDS_VERSION, options);\n                if (localIMDSVersionResponse.status === HttpStatus.SUCCESS) {\n                    autodetectedRegionName = localIMDSVersionResponse.body;\n                    regionDiscoveryMetadata.region_source =\n                        RegionDiscoverySources.IMDS;\n                }\n\n                // If the response using the local IMDS version failed, try to fetch the current version of IMDS and retry.\n                if (\n                    localIMDSVersionResponse.status === HttpStatus.BAD_REQUEST\n                ) {\n                    const currentIMDSVersion = await invokeAsync(\n                        this.getCurrentVersion.bind(this),\n                        PerformanceEvents.RegionDiscoveryGetCurrentVersion,\n                        this.logger,\n                        this.performanceClient,\n                        this.correlationId\n                    )(options);\n                    if (!currentIMDSVersion) {\n                        regionDiscoveryMetadata.region_source =\n                            RegionDiscoverySources.FAILED_AUTO_DETECTION;\n                        return null;\n                    }\n\n                    const currentIMDSVersionResponse = await invokeAsync(\n                        this.getRegionFromIMDS.bind(this),\n                        PerformanceEvents.RegionDiscoveryGetRegionFromIMDS,\n                        this.logger,\n                        this.performanceClient,\n                        this.correlationId\n                    )(currentIMDSVersion, options);\n                    if (\n                        currentIMDSVersionResponse.status === HttpStatus.SUCCESS\n                    ) {\n                        autodetectedRegionName =\n                            currentIMDSVersionResponse.body;\n                        regionDiscoveryMetadata.region_source =\n                            RegionDiscoverySources.IMDS;\n                    }\n                }\n            } catch (e) {\n                regionDiscoveryMetadata.region_source =\n                    RegionDiscoverySources.FAILED_AUTO_DETECTION;\n                return null;\n            }\n        } else {\n            regionDiscoveryMetadata.region_source =\n                RegionDiscoverySources.ENVIRONMENT_VARIABLE;\n        }\n\n        // If no region was auto detected from the environment or from the IMDS endpoint, mark the attempt as a FAILED_AUTO_DETECTION\n        if (!autodetectedRegionName) {\n            regionDiscoveryMetadata.region_source =\n                RegionDiscoverySources.FAILED_AUTO_DETECTION;\n        }\n\n        return autodetectedRegionName || null;\n    }\n\n    /**\n     * Make the call to the IMDS endpoint\n     *\n     * @param imdsEndpointUrl\n     * @returns Promise<NetworkResponse<string>>\n     */\n    private async getRegionFromIMDS(\n        version: string,\n        options: ImdsOptions\n    ): Promise<NetworkResponse<string>> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.RegionDiscoveryGetRegionFromIMDS,\n            this.correlationId\n        );\n        return this.networkInterface.sendGetRequestAsync<string>(\n            `${Constants.IMDS_ENDPOINT}?api-version=${version}&format=text`,\n            options,\n            Constants.IMDS_TIMEOUT\n        );\n    }\n\n    /**\n     * Get the most recent version of the IMDS endpoint available\n     *\n     * @returns Promise<string | null>\n     */\n    private async getCurrentVersion(\n        options: ImdsOptions\n    ): Promise<string | null> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.RegionDiscoveryGetCurrentVersion,\n            this.correlationId\n        );\n        try {\n            const response =\n                await this.networkInterface.sendGetRequestAsync<IMDSBadResponse>(\n                    `${Constants.IMDS_ENDPOINT}?format=json`,\n                    options\n                );\n\n            // When IMDS endpoint is called without the api version query param, bad request response comes back with latest version.\n            if (\n                response.status === HttpStatus.BAD_REQUEST &&\n                response.body &&\n                response.body[\"newest-versions\"] &&\n                response.body[\"newest-versions\"].length > 0\n            ) {\n                return response.body[\"newest-versions\"][0];\n            }\n\n            return null;\n        } catch (e) {\n            return null;\n        }\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\n/**\n * Utility functions for managing date and time operations.\n */\n\n/**\n * return the current time in Unix time (seconds).\n */\nexport function nowSeconds(): number {\n    // Date.getTime() returns in milliseconds.\n    return Math.round(new Date().getTime() / 1000.0);\n}\n\n/**\n * Converts JS Date object to seconds\n * @param date Date\n */\nexport function toSecondsFromDate(date: Date): number {\n    // Convert date to seconds\n    return date.getTime() / 1000;\n}\n\n/**\n * Convert seconds to JS Date object. Seconds can be in a number or string format or undefined (will still return a date).\n * @param seconds\n */\nexport function toDateFromSeconds(seconds: number | string | undefined): Date {\n    if (seconds) {\n        return new Date(Number(seconds) * 1000);\n    }\n    return new Date();\n}\n\n/**\n * check if a token is expired based on given UTC time in seconds.\n * @param expiresOn\n */\nexport function isTokenExpired(expiresOn: string, offset: number): boolean {\n    // check for access token expiry\n    const expirationSec = Number(expiresOn) || 0;\n    const offsetCurrentTimeSec = nowSeconds() + offset;\n\n    // If current time + offset is greater than token expiration time, then token is expired.\n    return offsetCurrentTimeSec > expirationSec;\n}\n\n/**\n * Checks if a cache entry is expired based on the last updated time and cache retention days.\n * @param lastUpdatedAt\n * @param cacheRetentionDays\n * @returns\n */\nexport function isCacheExpired(\n    lastUpdatedAt: string,\n    cacheRetentionDays: number\n): boolean {\n    const cacheExpirationTimestamp =\n        Number(lastUpdatedAt) + cacheRetentionDays * 24 * 60 * 60 * 1000;\n    return Date.now() > cacheExpirationTimestamp;\n}\n\n/**\n * If the current time is earlier than the time that a token was cached at, we must discard the token\n * i.e. The system clock was turned back after acquiring the cached token\n * @param cachedAt\n * @param offset\n */\nexport function wasClockTurnedBack(cachedAt: string): boolean {\n    const cachedAtSec = Number(cachedAt);\n\n    return cachedAtSec > nowSeconds();\n}\n\n/**\n * Waits for t number of milliseconds\n * @param t number\n * @param value T\n */\nexport function delay<T>(t: number, value?: T): Promise<T | void> {\n    return new Promise((resolve) => setTimeout(() => resolve(value), t));\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { extractTokenClaims } from \"../../account/AuthToken.js\";\nimport { TokenClaims } from \"../../account/TokenClaims.js\";\nimport { CloudDiscoveryMetadata } from \"../../authority/CloudDiscoveryMetadata.js\";\nimport { OpenIdConfigResponse } from \"../../authority/OpenIdConfigResponse.js\";\nimport {\n    ClientAuthErrorCodes,\n    createClientAuthError,\n} from \"../../error/ClientAuthError.js\";\nimport {\n    APP_METADATA,\n    AUTHORITY_METADATA_CONSTANTS,\n    AuthenticationScheme,\n    CredentialType,\n    SERVER_TELEM_CONSTANTS,\n    Separators,\n    ThrottlingConstants,\n} from \"../../utils/Constants.js\";\nimport * as TimeUtils from \"../../utils/TimeUtils.js\";\nimport { AccessTokenEntity } from \"../entities/AccessTokenEntity.js\";\nimport { AppMetadataEntity } from \"../entities/AppMetadataEntity.js\";\nimport { AuthorityMetadataEntity } from \"../entities/AuthorityMetadataEntity.js\";\nimport { CredentialEntity } from \"../entities/CredentialEntity.js\";\nimport { IdTokenEntity } from \"../entities/IdTokenEntity.js\";\nimport { RefreshTokenEntity } from \"../entities/RefreshTokenEntity.js\";\n\n/**\n * Create IdTokenEntity\n * @param homeAccountId\n * @param authenticationResult\n * @param clientId\n * @param authority\n */\nexport function createIdTokenEntity(\n    homeAccountId: string,\n    environment: string,\n    idToken: string,\n    clientId: string,\n    tenantId: string\n): IdTokenEntity {\n    const idTokenEntity: IdTokenEntity = {\n        credentialType: CredentialType.ID_TOKEN,\n        homeAccountId: homeAccountId,\n        environment: environment,\n        clientId: clientId,\n        secret: idToken,\n        realm: tenantId,\n        lastUpdatedAt: Date.now().toString(), // Set the last updated time to now\n    };\n\n    return idTokenEntity;\n}\n\n/**\n * Create AccessTokenEntity\n * @param homeAccountId\n * @param environment\n * @param accessToken\n * @param clientId\n * @param tenantId\n * @param scopes\n * @param expiresOn\n * @param extExpiresOn\n */\nexport function createAccessTokenEntity(\n    homeAccountId: string,\n    environment: string,\n    accessToken: string,\n    clientId: string,\n    tenantId: string,\n    scopes: string,\n    expiresOn: number,\n    extExpiresOn: number,\n    base64Decode: (input: string) => string,\n    refreshOn?: number,\n    tokenType?: AuthenticationScheme,\n    userAssertionHash?: string,\n    keyId?: string,\n    requestedClaims?: string,\n    requestedClaimsHash?: string\n): AccessTokenEntity {\n    const atEntity: AccessTokenEntity = {\n        homeAccountId: homeAccountId,\n        credentialType: CredentialType.ACCESS_TOKEN,\n        secret: accessToken,\n        cachedAt: TimeUtils.nowSeconds().toString(),\n        expiresOn: expiresOn.toString(),\n        extendedExpiresOn: extExpiresOn.toString(),\n        environment: environment,\n        clientId: clientId,\n        realm: tenantId,\n        target: scopes,\n        tokenType: tokenType || AuthenticationScheme.BEARER,\n        lastUpdatedAt: Date.now().toString(), // Set the last updated time to now\n    };\n\n    if (userAssertionHash) {\n        atEntity.userAssertionHash = userAssertionHash;\n    }\n\n    if (refreshOn) {\n        atEntity.refreshOn = refreshOn.toString();\n    }\n\n    if (requestedClaims) {\n        atEntity.requestedClaims = requestedClaims;\n        atEntity.requestedClaimsHash = requestedClaimsHash;\n    }\n\n    /*\n     * Create Access Token With Auth Scheme instead of regular access token\n     * Cast to lower to handle \"bearer\" from ADFS\n     */\n    if (\n        atEntity.tokenType?.toLowerCase() !==\n        AuthenticationScheme.BEARER.toLowerCase()\n    ) {\n        atEntity.credentialType = CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME;\n        switch (atEntity.tokenType) {\n            case AuthenticationScheme.POP:\n                // Make sure keyId is present and add it to credential\n                const tokenClaims: TokenClaims | null = extractTokenClaims(\n                    accessToken,\n                    base64Decode\n                );\n                if (!tokenClaims?.cnf?.kid) {\n                    throw createClientAuthError(\n                        ClientAuthErrorCodes.tokenClaimsCnfRequiredForSignedJwt\n                    );\n                }\n                atEntity.keyId = tokenClaims.cnf.kid;\n                break;\n            case AuthenticationScheme.SSH:\n                atEntity.keyId = keyId;\n        }\n    }\n\n    return atEntity;\n}\n\n/**\n * Create RefreshTokenEntity\n * @param homeAccountId\n * @param authenticationResult\n * @param clientId\n * @param authority\n */\nexport function createRefreshTokenEntity(\n    homeAccountId: string,\n    environment: string,\n    refreshToken: string,\n    clientId: string,\n    familyId?: string,\n    userAssertionHash?: string,\n    expiresOn?: number\n): RefreshTokenEntity {\n    const rtEntity: RefreshTokenEntity = {\n        credentialType: CredentialType.REFRESH_TOKEN,\n        homeAccountId: homeAccountId,\n        environment: environment,\n        clientId: clientId,\n        secret: refreshToken,\n        lastUpdatedAt: Date.now().toString(),\n    };\n\n    if (userAssertionHash) {\n        rtEntity.userAssertionHash = userAssertionHash;\n    }\n\n    if (familyId) {\n        rtEntity.familyId = familyId;\n    }\n\n    if (expiresOn) {\n        rtEntity.expiresOn = expiresOn.toString();\n    }\n\n    return rtEntity;\n}\n\nexport function isCredentialEntity(entity: object): entity is CredentialEntity {\n    return (\n        entity.hasOwnProperty(\"homeAccountId\") &&\n        entity.hasOwnProperty(\"environment\") &&\n        entity.hasOwnProperty(\"credentialType\") &&\n        entity.hasOwnProperty(\"clientId\") &&\n        entity.hasOwnProperty(\"secret\")\n    );\n}\n\n/**\n * Validates an entity: checks for all expected params\n * @param entity\n */\nexport function isAccessTokenEntity(\n    entity: object\n): entity is AccessTokenEntity {\n    if (!entity) {\n        return false;\n    }\n\n    return (\n        isCredentialEntity(entity) &&\n        entity.hasOwnProperty(\"realm\") &&\n        entity.hasOwnProperty(\"target\") &&\n        (entity[\"credentialType\"] === CredentialType.ACCESS_TOKEN ||\n            entity[\"credentialType\"] ===\n                CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME)\n    );\n}\n\n/**\n * Validates an entity: checks for all expected params\n * @param entity\n */\nexport function isIdTokenEntity(entity: object): entity is IdTokenEntity {\n    if (!entity) {\n        return false;\n    }\n\n    return (\n        isCredentialEntity(entity) &&\n        entity.hasOwnProperty(\"realm\") &&\n        entity[\"credentialType\"] === CredentialType.ID_TOKEN\n    );\n}\n\n/**\n * Validates an entity: checks for all expected params\n * @param entity\n */\nexport function isRefreshTokenEntity(\n    entity: object\n): entity is RefreshTokenEntity {\n    if (!entity) {\n        return false;\n    }\n\n    return (\n        isCredentialEntity(entity) &&\n        entity[\"credentialType\"] === CredentialType.REFRESH_TOKEN\n    );\n}\n\n/**\n * validates if a given cache entry is \"Telemetry\", parses <key,value>\n * @param key\n * @param entity\n */\nexport function isServerTelemetryEntity(key: string, entity?: object): boolean {\n    const validateKey: boolean =\n        key.indexOf(SERVER_TELEM_CONSTANTS.CACHE_KEY) === 0;\n    let validateEntity: boolean = true;\n\n    if (entity) {\n        validateEntity =\n            entity.hasOwnProperty(\"failedRequests\") &&\n            entity.hasOwnProperty(\"errors\") &&\n            entity.hasOwnProperty(\"cacheHits\");\n    }\n\n    return validateKey && validateEntity;\n}\n\n/**\n * validates if a given cache entry is \"Throttling\", parses <key,value>\n * @param key\n * @param entity\n */\nexport function isThrottlingEntity(key: string, entity?: object): boolean {\n    let validateKey: boolean = false;\n    if (key) {\n        validateKey = key.indexOf(ThrottlingConstants.THROTTLING_PREFIX) === 0;\n    }\n\n    let validateEntity: boolean = true;\n    if (entity) {\n        validateEntity = entity.hasOwnProperty(\"throttleTime\");\n    }\n\n    return validateKey && validateEntity;\n}\n\n/**\n * Generate AppMetadata Cache Key as per the schema: appmetadata-<environment>-<client_id>\n */\nexport function generateAppMetadataKey({\n    environment,\n    clientId,\n}: AppMetadataEntity): string {\n    const appMetaDataKeyArray: Array<string> = [\n        APP_METADATA,\n        environment,\n        clientId,\n    ];\n    return appMetaDataKeyArray\n        .join(Separators.CACHE_KEY_SEPARATOR)\n        .toLowerCase();\n}\n\n/*\n * Validates an entity: checks for all expected params\n * @param entity\n */\nexport function isAppMetadataEntity(key: string, entity: object): boolean {\n    if (!entity) {\n        return false;\n    }\n\n    return (\n        key.indexOf(APP_METADATA) === 0 &&\n        entity.hasOwnProperty(\"clientId\") &&\n        entity.hasOwnProperty(\"environment\")\n    );\n}\n\n/**\n * Validates an entity: checks for all expected params\n * @param entity\n */\nexport function isAuthorityMetadataEntity(\n    key: string,\n    entity: object\n): boolean {\n    if (!entity) {\n        return false;\n    }\n\n    return (\n        key.indexOf(AUTHORITY_METADATA_CONSTANTS.CACHE_KEY) === 0 &&\n        entity.hasOwnProperty(\"aliases\") &&\n        entity.hasOwnProperty(\"preferred_cache\") &&\n        entity.hasOwnProperty(\"preferred_network\") &&\n        entity.hasOwnProperty(\"canonical_authority\") &&\n        entity.hasOwnProperty(\"authorization_endpoint\") &&\n        entity.hasOwnProperty(\"token_endpoint\") &&\n        entity.hasOwnProperty(\"issuer\") &&\n        entity.hasOwnProperty(\"aliasesFromNetwork\") &&\n        entity.hasOwnProperty(\"endpointsFromNetwork\") &&\n        entity.hasOwnProperty(\"expiresAt\") &&\n        entity.hasOwnProperty(\"jwks_uri\")\n    );\n}\n\n/**\n * Reset the exiresAt value\n */\nexport function generateAuthorityMetadataExpiresAt(): number {\n    return (\n        TimeUtils.nowSeconds() +\n        AUTHORITY_METADATA_CONSTANTS.REFRESH_TIME_SECONDS\n    );\n}\n\nexport function updateAuthorityEndpointMetadata(\n    authorityMetadata: AuthorityMetadataEntity,\n    updatedValues: OpenIdConfigResponse,\n    fromNetwork: boolean\n): void {\n    authorityMetadata.authorization_endpoint =\n        updatedValues.authorization_endpoint;\n    authorityMetadata.token_endpoint = updatedValues.token_endpoint;\n    authorityMetadata.end_session_endpoint = updatedValues.end_session_endpoint;\n    authorityMetadata.issuer = updatedValues.issuer;\n    authorityMetadata.endpointsFromNetwork = fromNetwork;\n    authorityMetadata.jwks_uri = updatedValues.jwks_uri;\n}\n\nexport function updateCloudDiscoveryMetadata(\n    authorityMetadata: AuthorityMetadataEntity,\n    updatedValues: CloudDiscoveryMetadata,\n    fromNetwork: boolean\n): void {\n    authorityMetadata.aliases = updatedValues.aliases;\n    authorityMetadata.preferred_cache = updatedValues.preferred_cache;\n    authorityMetadata.preferred_network = updatedValues.preferred_network;\n    authorityMetadata.aliasesFromNetwork = fromNetwork;\n}\n\n/**\n * Returns whether or not the data needs to be refreshed\n */\nexport function isAuthorityMetadataExpired(\n    metadata: AuthorityMetadataEntity\n): boolean {\n    return metadata.expiresAt <= TimeUtils.nowSeconds();\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { AuthorityType } from \"./AuthorityType.js\";\nimport {\n    isOpenIdConfigResponse,\n    OpenIdConfigResponse,\n} from \"./OpenIdConfigResponse.js\";\nimport { UrlString } from \"../url/UrlString.js\";\nimport { IUri } from \"../url/IUri.js\";\nimport {\n    createClientAuthError,\n    ClientAuthErrorCodes,\n} from \"../error/ClientAuthError.js\";\nimport { INetworkModule } from \"../network/INetworkModule.js\";\nimport {\n    AADAuthorityConstants,\n    AuthorityMetadataSource,\n    Constants,\n    RegionDiscoveryOutcomes,\n} from \"../utils/Constants.js\";\nimport {\n    EndpointMetadata,\n    getCloudDiscoveryMetadataFromHardcodedValues,\n    getCloudDiscoveryMetadataFromNetworkResponse,\n    InstanceDiscoveryMetadataAliases,\n} from \"./AuthorityMetadata.js\";\nimport {\n    createClientConfigurationError,\n    ClientConfigurationErrorCodes,\n} from \"../error/ClientConfigurationError.js\";\nimport { ProtocolMode } from \"./ProtocolMode.js\";\nimport { ICacheManager } from \"../cache/interface/ICacheManager.js\";\nimport { AuthorityMetadataEntity } from \"../cache/entities/AuthorityMetadataEntity.js\";\nimport {\n    AuthorityOptions,\n    AzureCloudInstance,\n    StaticAuthorityOptions,\n} from \"./AuthorityOptions.js\";\nimport {\n    CloudInstanceDiscoveryResponse,\n    isCloudInstanceDiscoveryResponse,\n} from \"./CloudInstanceDiscoveryResponse.js\";\nimport {\n    CloudInstanceDiscoveryErrorResponse,\n    isCloudInstanceDiscoveryErrorResponse,\n} from \"./CloudInstanceDiscoveryErrorResponse.js\";\nimport { CloudDiscoveryMetadata } from \"./CloudDiscoveryMetadata.js\";\nimport { RegionDiscovery } from \"./RegionDiscovery.js\";\nimport { RegionDiscoveryMetadata } from \"./RegionDiscoveryMetadata.js\";\nimport { ImdsOptions } from \"./ImdsOptions.js\";\nimport type { AzureCloudOptions } from \"../config/ClientConfiguration.js\";\nimport { Logger } from \"../logger/Logger.js\";\nimport { AuthError } from \"../error/AuthError.js\";\nimport { IPerformanceClient } from \"../telemetry/performance/IPerformanceClient.js\";\nimport { PerformanceEvents } from \"../telemetry/performance/PerformanceEvent.js\";\nimport { invokeAsync } from \"../utils/FunctionWrappers.js\";\nimport * as CacheHelpers from \"../cache/utils/CacheHelpers.js\";\n\n/**\n * The authority class validates the authority URIs used by the user, and retrieves the OpenID Configuration Data from the\n * endpoint. It will store the pertinent config data in this object for use during token calls.\n * @internal\n */\nexport class Authority {\n    // Canonical authority url string\n    private _canonicalAuthority: UrlString;\n    // Canonicaly authority url components\n    private _canonicalAuthorityUrlComponents: IUri | null;\n    // Network interface to make requests with.\n    protected networkInterface: INetworkModule;\n    // Cache Manager to cache network responses\n    protected cacheManager: ICacheManager;\n    // Protocol mode to construct endpoints\n    private authorityOptions: AuthorityOptions;\n    // Authority metadata\n    private metadata: AuthorityMetadataEntity;\n    // Region discovery service\n    private regionDiscovery: RegionDiscovery;\n    // Region discovery metadata\n    public regionDiscoveryMetadata: RegionDiscoveryMetadata;\n    // Logger object\n    private logger: Logger;\n    // Performance client\n    protected performanceClient: IPerformanceClient | undefined;\n    // Correlation Id\n    protected correlationId: string;\n    // Indicates if the authority is fake, for the purpose of a Managed Identity Application\n    private managedIdentity: boolean;\n    // Reserved tenant domain names that will not be replaced with tenant id\n    private static reservedTenantDomains: Set<string> = new Set([\n        \"{tenant}\",\n        \"{tenantid}\",\n        AADAuthorityConstants.COMMON,\n        AADAuthorityConstants.CONSUMERS,\n        AADAuthorityConstants.ORGANIZATIONS,\n    ]);\n\n    constructor(\n        authority: string,\n        networkInterface: INetworkModule,\n        cacheManager: ICacheManager,\n        authorityOptions: AuthorityOptions,\n        logger: Logger,\n        correlationId: string,\n        performanceClient?: IPerformanceClient,\n        managedIdentity?: boolean\n    ) {\n        this.canonicalAuthority = authority;\n        this._canonicalAuthority.validateAsUri();\n        this.networkInterface = networkInterface;\n        this.cacheManager = cacheManager;\n        this.authorityOptions = authorityOptions;\n        this.regionDiscoveryMetadata = {\n            region_used: undefined,\n            region_source: undefined,\n            region_outcome: undefined,\n        };\n        this.logger = logger;\n        this.performanceClient = performanceClient;\n        this.correlationId = correlationId;\n        this.managedIdentity = managedIdentity || false;\n        this.regionDiscovery = new RegionDiscovery(\n            networkInterface,\n            this.logger,\n            this.performanceClient,\n            this.correlationId\n        );\n    }\n\n    /**\n     * Get {@link AuthorityType}\n     * @param authorityUri {@link IUri}\n     * @private\n     */\n    private getAuthorityType(authorityUri: IUri): AuthorityType {\n        // CIAM auth url pattern is being standardized as: <tenant>.ciamlogin.com\n        if (authorityUri.HostNameAndPort.endsWith(Constants.CIAM_AUTH_URL)) {\n            return AuthorityType.Ciam;\n        }\n\n        const pathSegments = authorityUri.PathSegments;\n        if (pathSegments.length) {\n            switch (pathSegments[0].toLowerCase()) {\n                case Constants.ADFS:\n                    return AuthorityType.Adfs;\n                case Constants.DSTS:\n                    return AuthorityType.Dsts;\n                default:\n                    break;\n            }\n        }\n        return AuthorityType.Default;\n    }\n\n    // See above for AuthorityType\n    public get authorityType(): AuthorityType {\n        return this.getAuthorityType(this.canonicalAuthorityUrlComponents);\n    }\n\n    /**\n     * ProtocolMode enum representing the way endpoints are constructed.\n     */\n    public get protocolMode(): ProtocolMode {\n        return this.authorityOptions.protocolMode;\n    }\n\n    /**\n     * Returns authorityOptions which can be used to reinstantiate a new authority instance\n     */\n    public get options(): AuthorityOptions {\n        return this.authorityOptions;\n    }\n\n    /**\n     * A URL that is the authority set by the developer\n     */\n    public get canonicalAuthority(): string {\n        return this._canonicalAuthority.urlString;\n    }\n\n    /**\n     * Sets canonical authority.\n     */\n    public set canonicalAuthority(url: string) {\n        this._canonicalAuthority = new UrlString(url);\n        this._canonicalAuthority.validateAsUri();\n        this._canonicalAuthorityUrlComponents = null;\n    }\n\n    /**\n     * Get authority components.\n     */\n    public get canonicalAuthorityUrlComponents(): IUri {\n        if (!this._canonicalAuthorityUrlComponents) {\n            this._canonicalAuthorityUrlComponents =\n                this._canonicalAuthority.getUrlComponents();\n        }\n\n        return this._canonicalAuthorityUrlComponents;\n    }\n\n    /**\n     * Get hostname and port i.e. login.microsoftonline.com\n     */\n    public get hostnameAndPort(): string {\n        return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase();\n    }\n\n    /**\n     * Get tenant for authority.\n     */\n    public get tenant(): string {\n        return this.canonicalAuthorityUrlComponents.PathSegments[0];\n    }\n\n    /**\n     * OAuth /authorize endpoint for requests\n     */\n    public get authorizationEndpoint(): string {\n        if (this.discoveryComplete()) {\n            return this.replacePath(this.metadata.authorization_endpoint);\n        } else {\n            throw createClientAuthError(\n                ClientAuthErrorCodes.endpointResolutionError\n            );\n        }\n    }\n\n    /**\n     * OAuth /token endpoint for requests\n     */\n    public get tokenEndpoint(): string {\n        if (this.discoveryComplete()) {\n            return this.replacePath(this.metadata.token_endpoint);\n        } else {\n            throw createClientAuthError(\n                ClientAuthErrorCodes.endpointResolutionError\n            );\n        }\n    }\n\n    public get deviceCodeEndpoint(): string {\n        if (this.discoveryComplete()) {\n            return this.replacePath(\n                this.metadata.token_endpoint.replace(\"/token\", \"/devicecode\")\n            );\n        } else {\n            throw createClientAuthError(\n                ClientAuthErrorCodes.endpointResolutionError\n            );\n        }\n    }\n\n    /**\n     * OAuth logout endpoint for requests\n     */\n    public get endSessionEndpoint(): string {\n        if (this.discoveryComplete()) {\n            // ROPC policies may not have end_session_endpoint set\n            if (!this.metadata.end_session_endpoint) {\n                throw createClientAuthError(\n                    ClientAuthErrorCodes.endSessionEndpointNotSupported\n                );\n            }\n            return this.replacePath(this.metadata.end_session_endpoint);\n        } else {\n            throw createClientAuthError(\n                ClientAuthErrorCodes.endpointResolutionError\n            );\n        }\n    }\n\n    /**\n     * OAuth issuer for requests\n     */\n    public get selfSignedJwtAudience(): string {\n        if (this.discoveryComplete()) {\n            return this.replacePath(this.metadata.issuer);\n        } else {\n            throw createClientAuthError(\n                ClientAuthErrorCodes.endpointResolutionError\n            );\n        }\n    }\n\n    /**\n     * Jwks_uri for token signing keys\n     */\n    public get jwksUri(): string {\n        if (this.discoveryComplete()) {\n            return this.replacePath(this.metadata.jwks_uri);\n        } else {\n            throw createClientAuthError(\n                ClientAuthErrorCodes.endpointResolutionError\n            );\n        }\n    }\n\n    /**\n     * Returns a flag indicating that tenant name can be replaced in authority {@link IUri}\n     * @param authorityUri {@link IUri}\n     * @private\n     */\n    private canReplaceTenant(authorityUri: IUri): boolean {\n        return (\n            authorityUri.PathSegments.length === 1 &&\n            !Authority.reservedTenantDomains.has(\n                authorityUri.PathSegments[0]\n            ) &&\n            this.getAuthorityType(authorityUri) === AuthorityType.Default &&\n            this.protocolMode !== ProtocolMode.OIDC\n        );\n    }\n\n    /**\n     * Replaces tenant in url path with current tenant. Defaults to common.\n     * @param urlString\n     */\n    private replaceTenant(urlString: string): string {\n        return urlString.replace(/{tenant}|{tenantid}/g, this.tenant);\n    }\n\n    /**\n     * Replaces path such as tenant or policy with the current tenant or policy.\n     * @param urlString\n     */\n    private replacePath(urlString: string): string {\n        let endpoint = urlString;\n        const cachedAuthorityUrl = new UrlString(\n            this.metadata.canonical_authority\n        );\n        const cachedAuthorityUrlComponents =\n            cachedAuthorityUrl.getUrlComponents();\n        const cachedAuthorityParts = cachedAuthorityUrlComponents.PathSegments;\n        const currentAuthorityParts =\n            this.canonicalAuthorityUrlComponents.PathSegments;\n\n        currentAuthorityParts.forEach((currentPart, index) => {\n            let cachedPart = cachedAuthorityParts[index];\n            if (\n                index === 0 &&\n                this.canReplaceTenant(cachedAuthorityUrlComponents)\n            ) {\n                const tenantId = new UrlString(\n                    this.metadata.authorization_endpoint\n                ).getUrlComponents().PathSegments[0];\n                /**\n                 * Check if AAD canonical authority contains tenant domain name, for example \"testdomain.onmicrosoft.com\",\n                 * by comparing its first path segment to the corresponding authorization endpoint path segment, which is\n                 * always resolved with tenant id by OIDC.\n                 */\n                if (cachedPart !== tenantId) {\n                    this.logger.verbose(\n                        `Replacing tenant domain name ${cachedPart} with id ${tenantId}`\n                    );\n                    cachedPart = tenantId;\n                }\n            }\n            if (currentPart !== cachedPart) {\n                endpoint = endpoint.replace(\n                    `/${cachedPart}/`,\n                    `/${currentPart}/`\n                );\n            }\n        });\n\n        return this.replaceTenant(endpoint);\n    }\n\n    /**\n     * The default open id configuration endpoint for any canonical authority.\n     */\n    protected get defaultOpenIdConfigurationEndpoint(): string {\n        const canonicalAuthorityHost = this.hostnameAndPort;\n        if (\n            this.canonicalAuthority.endsWith(\"v2.0/\") ||\n            this.authorityType === AuthorityType.Adfs ||\n            (this.protocolMode === ProtocolMode.OIDC &&\n                !this.isAliasOfKnownMicrosoftAuthority(canonicalAuthorityHost))\n        ) {\n            return `${this.canonicalAuthority}.well-known/openid-configuration`;\n        }\n        return `${this.canonicalAuthority}v2.0/.well-known/openid-configuration`;\n    }\n\n    /**\n     * Boolean that returns whether or not tenant discovery has been completed.\n     */\n    discoveryComplete(): boolean {\n        return !!this.metadata;\n    }\n\n    /**\n     * Perform endpoint discovery to discover aliases, preferred_cache, preferred_network\n     * and the /authorize, /token and logout endpoints.\n     */\n    public async resolveEndpointsAsync(): Promise<void> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.AuthorityResolveEndpointsAsync,\n            this.correlationId\n        );\n\n        const metadataEntity = this.getCurrentMetadataEntity();\n\n        const cloudDiscoverySource = await invokeAsync(\n            this.updateCloudDiscoveryMetadata.bind(this),\n            PerformanceEvents.AuthorityUpdateCloudDiscoveryMetadata,\n            this.logger,\n            this.performanceClient,\n            this.correlationId\n        )(metadataEntity);\n        this.canonicalAuthority = this.canonicalAuthority.replace(\n            this.hostnameAndPort,\n            metadataEntity.preferred_network\n        );\n        const endpointSource = await invokeAsync(\n            this.updateEndpointMetadata.bind(this),\n            PerformanceEvents.AuthorityUpdateEndpointMetadata,\n            this.logger,\n            this.performanceClient,\n            this.correlationId\n        )(metadataEntity);\n        this.updateCachedMetadata(metadataEntity, cloudDiscoverySource, {\n            source: endpointSource,\n        });\n        this.performanceClient?.addFields(\n            {\n                cloudDiscoverySource: cloudDiscoverySource,\n                authorityEndpointSource: endpointSource,\n            },\n            this.correlationId\n        );\n    }\n\n    /**\n     * Returns metadata entity from cache if it exists, otherwiser returns a new metadata entity built\n     * from the configured canonical authority\n     * @returns\n     */\n    private getCurrentMetadataEntity(): AuthorityMetadataEntity {\n        let metadataEntity: AuthorityMetadataEntity | null =\n            this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);\n\n        if (!metadataEntity) {\n            metadataEntity = {\n                aliases: [],\n                preferred_cache: this.hostnameAndPort,\n                preferred_network: this.hostnameAndPort,\n                canonical_authority: this.canonicalAuthority,\n                authorization_endpoint: \"\",\n                token_endpoint: \"\",\n                end_session_endpoint: \"\",\n                issuer: \"\",\n                aliasesFromNetwork: false,\n                endpointsFromNetwork: false,\n                expiresAt: CacheHelpers.generateAuthorityMetadataExpiresAt(),\n                jwks_uri: \"\",\n            };\n        }\n        return metadataEntity;\n    }\n\n    /**\n     * Updates cached metadata based on metadata source and sets the instance's metadata\n     * property to the same value\n     * @param metadataEntity\n     * @param cloudDiscoverySource\n     * @param endpointMetadataResult\n     */\n    private updateCachedMetadata(\n        metadataEntity: AuthorityMetadataEntity,\n        cloudDiscoverySource: AuthorityMetadataSource | null,\n        endpointMetadataResult: {\n            source: AuthorityMetadataSource;\n            metadata?: OpenIdConfigResponse;\n        } | null\n    ): void {\n        if (\n            cloudDiscoverySource !== AuthorityMetadataSource.CACHE &&\n            endpointMetadataResult?.source !== AuthorityMetadataSource.CACHE\n        ) {\n            // Reset the expiration time unless both values came from a successful cache lookup\n            metadataEntity.expiresAt =\n                CacheHelpers.generateAuthorityMetadataExpiresAt();\n            metadataEntity.canonical_authority = this.canonicalAuthority;\n        }\n\n        const cacheKey = this.cacheManager.generateAuthorityMetadataCacheKey(\n            metadataEntity.preferred_cache\n        );\n        this.cacheManager.setAuthorityMetadata(cacheKey, metadataEntity);\n        this.metadata = metadataEntity;\n    }\n\n    /**\n     * Update AuthorityMetadataEntity with new endpoints and return where the information came from\n     * @param metadataEntity\n     */\n    private async updateEndpointMetadata(\n        metadataEntity: AuthorityMetadataEntity\n    ): Promise<AuthorityMetadataSource> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.AuthorityUpdateEndpointMetadata,\n            this.correlationId\n        );\n\n        const localMetadata =\n            this.updateEndpointMetadataFromLocalSources(metadataEntity);\n\n        // Further update may be required for hardcoded metadata if regional metadata is preferred\n        if (localMetadata) {\n            if (\n                localMetadata.source ===\n                AuthorityMetadataSource.HARDCODED_VALUES\n            ) {\n                // If the user prefers to use an azure region replace the global endpoints with regional information.\n                if (\n                    this.authorityOptions.azureRegionConfiguration?.azureRegion\n                ) {\n                    if (localMetadata.metadata) {\n                        const hardcodedMetadata = await invokeAsync(\n                            this.updateMetadataWithRegionalInformation.bind(\n                                this\n                            ),\n                            PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation,\n                            this.logger,\n                            this.performanceClient,\n                            this.correlationId\n                        )(localMetadata.metadata);\n                        CacheHelpers.updateAuthorityEndpointMetadata(\n                            metadataEntity,\n                            hardcodedMetadata,\n                            false\n                        );\n                        metadataEntity.canonical_authority =\n                            this.canonicalAuthority;\n                    }\n                }\n            }\n            return localMetadata.source;\n        }\n\n        // Get metadata from network if local sources aren't available\n        let metadata = await invokeAsync(\n            this.getEndpointMetadataFromNetwork.bind(this),\n            PerformanceEvents.AuthorityGetEndpointMetadataFromNetwork,\n            this.logger,\n            this.performanceClient,\n            this.correlationId\n        )();\n        if (metadata) {\n            // If the user prefers to use an azure region replace the global endpoints with regional information.\n            if (this.authorityOptions.azureRegionConfiguration?.azureRegion) {\n                metadata = await invokeAsync(\n                    this.updateMetadataWithRegionalInformation.bind(this),\n                    PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation,\n                    this.logger,\n                    this.performanceClient,\n                    this.correlationId\n                )(metadata);\n            }\n\n            CacheHelpers.updateAuthorityEndpointMetadata(\n                metadataEntity,\n                metadata,\n                true\n            );\n            return AuthorityMetadataSource.NETWORK;\n        } else {\n            // Metadata could not be obtained from the config, cache, network or hardcoded values\n            throw createClientAuthError(\n                ClientAuthErrorCodes.openIdConfigError,\n                this.defaultOpenIdConfigurationEndpoint\n            );\n        }\n    }\n\n    /**\n     * Updates endpoint metadata from local sources and returns where the information was retrieved from and the metadata config\n     * response if the source is hardcoded metadata\n     * @param metadataEntity\n     * @returns\n     */\n    private updateEndpointMetadataFromLocalSources(\n        metadataEntity: AuthorityMetadataEntity\n    ): {\n        source: AuthorityMetadataSource;\n        metadata?: OpenIdConfigResponse;\n    } | null {\n        this.logger.verbose(\n            \"Attempting to get endpoint metadata from authority configuration\"\n        );\n        const configMetadata = this.getEndpointMetadataFromConfig();\n        if (configMetadata) {\n            this.logger.verbose(\n                \"Found endpoint metadata in authority configuration\"\n            );\n            CacheHelpers.updateAuthorityEndpointMetadata(\n                metadataEntity,\n                configMetadata,\n                false\n            );\n            return {\n                source: AuthorityMetadataSource.CONFIG,\n            };\n        }\n\n        this.logger.verbose(\n            \"Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values.\"\n        );\n\n        // skipAuthorityMetadataCache is used to bypass hardcoded authority metadata and force a network metadata cache lookup and network metadata request if no cached response is available.\n        if (this.authorityOptions.skipAuthorityMetadataCache) {\n            this.logger.verbose(\n                \"Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.\"\n            );\n        } else {\n            const hardcodedMetadata =\n                this.getEndpointMetadataFromHardcodedValues();\n            if (hardcodedMetadata) {\n                CacheHelpers.updateAuthorityEndpointMetadata(\n                    metadataEntity,\n                    hardcodedMetadata,\n                    false\n                );\n                return {\n                    source: AuthorityMetadataSource.HARDCODED_VALUES,\n                    metadata: hardcodedMetadata,\n                };\n            } else {\n                this.logger.verbose(\n                    \"Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.\"\n                );\n            }\n        }\n\n        // Check cached metadata entity expiration status\n        const metadataEntityExpired =\n            CacheHelpers.isAuthorityMetadataExpired(metadataEntity);\n        if (\n            this.isAuthoritySameType(metadataEntity) &&\n            metadataEntity.endpointsFromNetwork &&\n            !metadataEntityExpired\n        ) {\n            // No need to update\n            this.logger.verbose(\"Found endpoint metadata in the cache.\");\n            return { source: AuthorityMetadataSource.CACHE };\n        } else if (metadataEntityExpired) {\n            this.logger.verbose(\"The metadata entity is expired.\");\n        }\n\n        return null;\n    }\n\n    /**\n     * Compares the number of url components after the domain to determine if the cached\n     * authority metadata can be used for the requested authority. Protects against same domain different\n     * authority such as login.microsoftonline.com/tenant and login.microsoftonline.com/tfp/tenant/policy\n     * @param metadataEntity\n     */\n    private isAuthoritySameType(\n        metadataEntity: AuthorityMetadataEntity\n    ): boolean {\n        const cachedAuthorityUrl = new UrlString(\n            metadataEntity.canonical_authority\n        );\n        const cachedParts = cachedAuthorityUrl.getUrlComponents().PathSegments;\n\n        return (\n            cachedParts.length ===\n            this.canonicalAuthorityUrlComponents.PathSegments.length\n        );\n    }\n\n    /**\n     * Parse authorityMetadata config option\n     */\n    private getEndpointMetadataFromConfig(): OpenIdConfigResponse | null {\n        if (this.authorityOptions.authorityMetadata) {\n            try {\n                return JSON.parse(\n                    this.authorityOptions.authorityMetadata\n                ) as OpenIdConfigResponse;\n            } catch (e) {\n                throw createClientConfigurationError(\n                    ClientConfigurationErrorCodes.invalidAuthorityMetadata\n                );\n            }\n        }\n\n        return null;\n    }\n\n    /**\n     * Gets OAuth endpoints from the given OpenID configuration endpoint.\n     *\n     * @param hasHardcodedMetadata boolean\n     */\n    private async getEndpointMetadataFromNetwork(): Promise<OpenIdConfigResponse | null> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.AuthorityGetEndpointMetadataFromNetwork,\n            this.correlationId\n        );\n\n        const options: ImdsOptions = {};\n\n        /*\n         * TODO: Add a timeout if the authority exists in our library's\n         * hardcoded list of metadata\n         */\n\n        const openIdConfigurationEndpoint =\n            this.defaultOpenIdConfigurationEndpoint;\n        this.logger.verbose(\n            `Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${openIdConfigurationEndpoint}`\n        );\n\n        try {\n            const response =\n                await this.networkInterface.sendGetRequestAsync<OpenIdConfigResponse>(\n                    openIdConfigurationEndpoint,\n                    options\n                );\n            const isValidResponse = isOpenIdConfigResponse(response.body);\n            if (isValidResponse) {\n                return response.body;\n            } else {\n                this.logger.verbose(\n                    `Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration`\n                );\n                return null;\n            }\n        } catch (e) {\n            this.logger.verbose(\n                `Authority.getEndpointMetadataFromNetwork: ${e}`\n            );\n            return null;\n        }\n    }\n\n    /**\n     * Get OAuth endpoints for common authorities.\n     */\n    private getEndpointMetadataFromHardcodedValues(): OpenIdConfigResponse | null {\n        if (this.hostnameAndPort in EndpointMetadata) {\n            return EndpointMetadata[this.hostnameAndPort];\n        }\n\n        return null;\n    }\n\n    /**\n     * Update the retrieved metadata with regional information.\n     * User selected Azure region will be used if configured.\n     */\n    private async updateMetadataWithRegionalInformation(\n        metadata: OpenIdConfigResponse\n    ): Promise<OpenIdConfigResponse> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.AuthorityUpdateMetadataWithRegionalInformation,\n            this.correlationId\n        );\n\n        const userConfiguredAzureRegion =\n            this.authorityOptions.azureRegionConfiguration?.azureRegion;\n\n        if (userConfiguredAzureRegion) {\n            if (\n                userConfiguredAzureRegion !==\n                Constants.AZURE_REGION_AUTO_DISCOVER_FLAG\n            ) {\n                this.regionDiscoveryMetadata.region_outcome =\n                    RegionDiscoveryOutcomes.CONFIGURED_NO_AUTO_DETECTION;\n                this.regionDiscoveryMetadata.region_used =\n                    userConfiguredAzureRegion;\n                return Authority.replaceWithRegionalInformation(\n                    metadata,\n                    userConfiguredAzureRegion\n                );\n            }\n\n            const autodetectedRegionName = await invokeAsync(\n                this.regionDiscovery.detectRegion.bind(this.regionDiscovery),\n                PerformanceEvents.RegionDiscoveryDetectRegion,\n                this.logger,\n                this.performanceClient,\n                this.correlationId\n            )(\n                this.authorityOptions.azureRegionConfiguration\n                    ?.environmentRegion,\n                this.regionDiscoveryMetadata\n            );\n\n            if (autodetectedRegionName) {\n                this.regionDiscoveryMetadata.region_outcome =\n                    RegionDiscoveryOutcomes.AUTO_DETECTION_REQUESTED_SUCCESSFUL;\n                this.regionDiscoveryMetadata.region_used =\n                    autodetectedRegionName;\n                return Authority.replaceWithRegionalInformation(\n                    metadata,\n                    autodetectedRegionName\n                );\n            }\n\n            this.regionDiscoveryMetadata.region_outcome =\n                RegionDiscoveryOutcomes.AUTO_DETECTION_REQUESTED_FAILED;\n        }\n\n        return metadata;\n    }\n\n    /**\n     * Updates the AuthorityMetadataEntity with new aliases, preferred_network and preferred_cache\n     * and returns where the information was retrieved from\n     * @param metadataEntity\n     * @returns AuthorityMetadataSource\n     */\n    private async updateCloudDiscoveryMetadata(\n        metadataEntity: AuthorityMetadataEntity\n    ): Promise<AuthorityMetadataSource> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.AuthorityUpdateCloudDiscoveryMetadata,\n            this.correlationId\n        );\n        const localMetadataSource =\n            this.updateCloudDiscoveryMetadataFromLocalSources(metadataEntity);\n        if (localMetadataSource) {\n            return localMetadataSource;\n        }\n\n        // Fallback to network as metadata source\n        const metadata = await invokeAsync(\n            this.getCloudDiscoveryMetadataFromNetwork.bind(this),\n            PerformanceEvents.AuthorityGetCloudDiscoveryMetadataFromNetwork,\n            this.logger,\n            this.performanceClient,\n            this.correlationId\n        )();\n\n        if (metadata) {\n            CacheHelpers.updateCloudDiscoveryMetadata(\n                metadataEntity,\n                metadata,\n                true\n            );\n            return AuthorityMetadataSource.NETWORK;\n        }\n\n        // Metadata could not be obtained from the config, cache, network or hardcoded values\n        throw createClientConfigurationError(\n            ClientConfigurationErrorCodes.untrustedAuthority\n        );\n    }\n\n    private updateCloudDiscoveryMetadataFromLocalSources(\n        metadataEntity: AuthorityMetadataEntity\n    ): AuthorityMetadataSource | null {\n        this.logger.verbose(\n            \"Attempting to get cloud discovery metadata  from authority configuration\"\n        );\n        this.logger.verbosePii(\n            `Known Authorities: ${\n                this.authorityOptions.knownAuthorities ||\n                Constants.NOT_APPLICABLE\n            }`\n        );\n        this.logger.verbosePii(\n            `Authority Metadata: ${\n                this.authorityOptions.authorityMetadata ||\n                Constants.NOT_APPLICABLE\n            }`\n        );\n        this.logger.verbosePii(\n            `Canonical Authority: ${\n                metadataEntity.canonical_authority || Constants.NOT_APPLICABLE\n            }`\n        );\n        const metadata = this.getCloudDiscoveryMetadataFromConfig();\n        if (metadata) {\n            this.logger.verbose(\n                \"Found cloud discovery metadata in authority configuration\"\n            );\n            CacheHelpers.updateCloudDiscoveryMetadata(\n                metadataEntity,\n                metadata,\n                false\n            );\n            return AuthorityMetadataSource.CONFIG;\n        }\n\n        // If the cached metadata came from config but that config was not passed to this instance, we must go to hardcoded values\n        this.logger.verbose(\n            \"Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values.\"\n        );\n\n        if (this.options.skipAuthorityMetadataCache) {\n            this.logger.verbose(\n                \"Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.\"\n            );\n        } else {\n            const hardcodedMetadata =\n                getCloudDiscoveryMetadataFromHardcodedValues(\n                    this.hostnameAndPort\n                );\n            if (hardcodedMetadata) {\n                this.logger.verbose(\n                    \"Found cloud discovery metadata from hardcoded values.\"\n                );\n                CacheHelpers.updateCloudDiscoveryMetadata(\n                    metadataEntity,\n                    hardcodedMetadata,\n                    false\n                );\n                return AuthorityMetadataSource.HARDCODED_VALUES;\n            }\n\n            this.logger.verbose(\n                \"Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.\"\n            );\n        }\n\n        const metadataEntityExpired =\n            CacheHelpers.isAuthorityMetadataExpired(metadataEntity);\n        if (\n            this.isAuthoritySameType(metadataEntity) &&\n            metadataEntity.aliasesFromNetwork &&\n            !metadataEntityExpired\n        ) {\n            this.logger.verbose(\"Found cloud discovery metadata in the cache.\");\n            // No need to update\n            return AuthorityMetadataSource.CACHE;\n        } else if (metadataEntityExpired) {\n            this.logger.verbose(\"The metadata entity is expired.\");\n        }\n\n        return null;\n    }\n\n    /**\n     * Parse cloudDiscoveryMetadata config or check knownAuthorities\n     */\n    private getCloudDiscoveryMetadataFromConfig(): CloudDiscoveryMetadata | null {\n        // CIAM does not support cloud discovery metadata\n        if (this.authorityType === AuthorityType.Ciam) {\n            this.logger.verbose(\n                \"CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host.\"\n            );\n            return Authority.createCloudDiscoveryMetadataFromHost(\n                this.hostnameAndPort\n            );\n        }\n\n        // Check if network response was provided in config\n        if (this.authorityOptions.cloudDiscoveryMetadata) {\n            this.logger.verbose(\n                \"The cloud discovery metadata has been provided as a network response, in the config.\"\n            );\n            try {\n                this.logger.verbose(\n                    \"Attempting to parse the cloud discovery metadata.\"\n                );\n                const parsedResponse = JSON.parse(\n                    this.authorityOptions.cloudDiscoveryMetadata\n                ) as CloudInstanceDiscoveryResponse;\n                const metadata = getCloudDiscoveryMetadataFromNetworkResponse(\n                    parsedResponse.metadata,\n                    this.hostnameAndPort\n                );\n                this.logger.verbose(\"Parsed the cloud discovery metadata.\");\n                if (metadata) {\n                    this.logger.verbose(\n                        \"There is returnable metadata attached to the parsed cloud discovery metadata.\"\n                    );\n                    return metadata;\n                } else {\n                    this.logger.verbose(\n                        \"There is no metadata attached to the parsed cloud discovery metadata.\"\n                    );\n                }\n            } catch (e) {\n                this.logger.verbose(\n                    \"Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error.\"\n                );\n                throw createClientConfigurationError(\n                    ClientConfigurationErrorCodes.invalidCloudDiscoveryMetadata\n                );\n            }\n        }\n\n        // If cloudDiscoveryMetadata is empty or does not contain the host, check knownAuthorities\n        if (this.isInKnownAuthorities()) {\n            this.logger.verbose(\n                \"The host is included in knownAuthorities. Creating new cloud discovery metadata from the host.\"\n            );\n            return Authority.createCloudDiscoveryMetadataFromHost(\n                this.hostnameAndPort\n            );\n        }\n\n        return null;\n    }\n\n    /**\n     * Called to get metadata from network if CloudDiscoveryMetadata was not populated by config\n     *\n     * @param hasHardcodedMetadata boolean\n     */\n    private async getCloudDiscoveryMetadataFromNetwork(): Promise<CloudDiscoveryMetadata | null> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.AuthorityGetCloudDiscoveryMetadataFromNetwork,\n            this.correlationId\n        );\n        const instanceDiscoveryEndpoint = `${Constants.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`;\n        const options: ImdsOptions = {};\n\n        /*\n         * TODO: Add a timeout if the authority exists in our library's\n         * hardcoded list of metadata\n         */\n\n        let match = null;\n        try {\n            const response = await this.networkInterface.sendGetRequestAsync<\n                | CloudInstanceDiscoveryResponse\n                | CloudInstanceDiscoveryErrorResponse\n            >(instanceDiscoveryEndpoint, options);\n            let typedResponseBody:\n                | CloudInstanceDiscoveryResponse\n                | CloudInstanceDiscoveryErrorResponse;\n            let metadata: Array<CloudDiscoveryMetadata>;\n            if (isCloudInstanceDiscoveryResponse(response.body)) {\n                typedResponseBody =\n                    response.body as CloudInstanceDiscoveryResponse;\n                metadata = typedResponseBody.metadata;\n\n                this.logger.verbosePii(\n                    `tenant_discovery_endpoint is: ${typedResponseBody.tenant_discovery_endpoint}`\n                );\n            } else if (isCloudInstanceDiscoveryErrorResponse(response.body)) {\n                this.logger.warning(\n                    `A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${response.status}`\n                );\n\n                typedResponseBody =\n                    response.body as CloudInstanceDiscoveryErrorResponse;\n                if (typedResponseBody.error === Constants.INVALID_INSTANCE) {\n                    this.logger.error(\n                        \"The CloudInstanceDiscoveryErrorResponse error is invalid_instance.\"\n                    );\n                    return null;\n                }\n\n                this.logger.warning(\n                    `The CloudInstanceDiscoveryErrorResponse error is ${typedResponseBody.error}`\n                );\n                this.logger.warning(\n                    `The CloudInstanceDiscoveryErrorResponse error description is ${typedResponseBody.error_description}`\n                );\n\n                this.logger.warning(\n                    \"Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []\"\n                );\n                metadata = [];\n            } else {\n                this.logger.error(\n                    \"AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse\"\n                );\n                return null;\n            }\n\n            this.logger.verbose(\n                \"Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request.\"\n            );\n            match = getCloudDiscoveryMetadataFromNetworkResponse(\n                metadata,\n                this.hostnameAndPort\n            );\n        } catch (error) {\n            if (error instanceof AuthError) {\n                this.logger.error(\n                    `There was a network error while attempting to get the cloud discovery instance metadata.\\nError: ${error.errorCode}\\nError Description: ${error.errorMessage}`\n                );\n            } else {\n                const typedError = error as Error;\n                this.logger.error(\n                    `A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\\nError: ${typedError.name}\\nError Description: ${typedError.message}`\n                );\n            }\n\n            return null;\n        }\n\n        // Custom Domain scenario, host is trusted because Instance Discovery call succeeded\n        if (!match) {\n            this.logger.warning(\n                \"The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request.\"\n            );\n            this.logger.verbose(\n                \"Creating custom Authority for custom domain scenario.\"\n            );\n\n            match = Authority.createCloudDiscoveryMetadataFromHost(\n                this.hostnameAndPort\n            );\n        }\n        return match;\n    }\n\n    /**\n     * Helper function to determine if this host is included in the knownAuthorities config option\n     */\n    private isInKnownAuthorities(): boolean {\n        const matches = this.authorityOptions.knownAuthorities.filter(\n            (authority) => {\n                return (\n                    authority &&\n                    UrlString.getDomainFromUrl(authority).toLowerCase() ===\n                        this.hostnameAndPort\n                );\n            }\n        );\n        return matches.length > 0;\n    }\n\n    /**\n     * helper function to populate the authority based on azureCloudOptions\n     * @param authorityString\n     * @param azureCloudOptions\n     */\n    static generateAuthority(\n        authorityString: string,\n        azureCloudOptions?: AzureCloudOptions\n    ): string {\n        let authorityAzureCloudInstance;\n\n        if (\n            azureCloudOptions &&\n            azureCloudOptions.azureCloudInstance !== AzureCloudInstance.None\n        ) {\n            const tenant = azureCloudOptions.tenant\n                ? azureCloudOptions.tenant\n                : Constants.DEFAULT_COMMON_TENANT;\n            authorityAzureCloudInstance = `${azureCloudOptions.azureCloudInstance}/${tenant}/`;\n        }\n\n        return authorityAzureCloudInstance\n            ? authorityAzureCloudInstance\n            : authorityString;\n    }\n\n    /**\n     * Creates cloud discovery metadata object from a given host\n     * @param host\n     */\n    static createCloudDiscoveryMetadataFromHost(\n        host: string\n    ): CloudDiscoveryMetadata {\n        return {\n            preferred_network: host,\n            preferred_cache: host,\n            aliases: [host],\n        };\n    }\n\n    /**\n     * helper function to generate environment from authority object\n     */\n    getPreferredCache(): string {\n        if (this.managedIdentity) {\n            return Constants.DEFAULT_AUTHORITY_HOST;\n        } else if (this.discoveryComplete()) {\n            return this.metadata.preferred_cache;\n        } else {\n            throw createClientAuthError(\n                ClientAuthErrorCodes.endpointResolutionError\n            );\n        }\n    }\n\n    /**\n     * Returns whether or not the provided host is an alias of this authority instance\n     * @param host\n     */\n    isAlias(host: string): boolean {\n        return this.metadata.aliases.indexOf(host) > -1;\n    }\n\n    /**\n     * Returns whether or not the provided host is an alias of a known Microsoft authority for purposes of endpoint discovery\n     * @param host\n     */\n    isAliasOfKnownMicrosoftAuthority(host: string): boolean {\n        return InstanceDiscoveryMetadataAliases.has(host);\n    }\n\n    /**\n     * Checks whether the provided host is that of a public cloud authority\n     *\n     * @param authority string\n     * @returns bool\n     */\n    static isPublicCloudAuthority(host: string): boolean {\n        return Constants.KNOWN_PUBLIC_CLOUDS.indexOf(host) >= 0;\n    }\n\n    /**\n     * Rebuild the authority string with the region\n     *\n     * @param host string\n     * @param region string\n     */\n    static buildRegionalAuthorityString(\n        host: string,\n        region: string,\n        queryString?: string\n    ): string {\n        // Create and validate a Url string object with the initial authority string\n        const authorityUrlInstance = new UrlString(host);\n        authorityUrlInstance.validateAsUri();\n\n        const authorityUrlParts = authorityUrlInstance.getUrlComponents();\n\n        let hostNameAndPort = `${region}.${authorityUrlParts.HostNameAndPort}`;\n\n        if (this.isPublicCloudAuthority(authorityUrlParts.HostNameAndPort)) {\n            hostNameAndPort = `${region}.${Constants.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`;\n        }\n\n        // Include the query string portion of the url\n        const url = UrlString.constructAuthorityUriFromObject({\n            ...authorityUrlInstance.getUrlComponents(),\n            HostNameAndPort: hostNameAndPort,\n        }).urlString;\n\n        // Add the query string if a query string was provided\n        if (queryString) return `${url}?${queryString}`;\n\n        return url;\n    }\n\n    /**\n     * Replace the endpoints in the metadata object with their regional equivalents.\n     *\n     * @param metadata OpenIdConfigResponse\n     * @param azureRegion string\n     */\n    static replaceWithRegionalInformation(\n        metadata: OpenIdConfigResponse,\n        azureRegion: string\n    ): OpenIdConfigResponse {\n        const regionalMetadata = { ...metadata };\n        regionalMetadata.authorization_endpoint =\n            Authority.buildRegionalAuthorityString(\n                regionalMetadata.authorization_endpoint,\n                azureRegion\n            );\n\n        regionalMetadata.token_endpoint =\n            Authority.buildRegionalAuthorityString(\n                regionalMetadata.token_endpoint,\n                azureRegion\n            );\n\n        if (regionalMetadata.end_session_endpoint) {\n            regionalMetadata.end_session_endpoint =\n                Authority.buildRegionalAuthorityString(\n                    regionalMetadata.end_session_endpoint,\n                    azureRegion\n                );\n        }\n\n        return regionalMetadata;\n    }\n\n    /**\n     * Transform CIAM_AUTHORIY as per the below rules:\n     * If no path segments found and it is a CIAM authority (hostname ends with .ciamlogin.com), then transform it\n     *\n     * NOTE: The transformation path should go away once STS supports CIAM with the format: `tenantIdorDomain.ciamlogin.com`\n     * `ciamlogin.com` can also change in the future and we should accommodate the same\n     *\n     * @param authority\n     */\n    static transformCIAMAuthority(authority: string): string {\n        let ciamAuthority = authority;\n        const authorityUrl = new UrlString(authority);\n        const authorityUrlComponents = authorityUrl.getUrlComponents();\n\n        // check if transformation is needed\n        if (\n            authorityUrlComponents.PathSegments.length === 0 &&\n            authorityUrlComponents.HostNameAndPort.endsWith(\n                Constants.CIAM_AUTH_URL\n            )\n        ) {\n            const tenantIdOrDomain =\n                authorityUrlComponents.HostNameAndPort.split(\".\")[0];\n            ciamAuthority = `${ciamAuthority}${tenantIdOrDomain}${Constants.AAD_TENANT_DOMAIN_SUFFIX}`;\n        }\n\n        return ciamAuthority;\n    }\n}\n\n/**\n * Extract tenantId from authority\n */\nexport function getTenantFromAuthorityString(\n    authority: string\n): string | undefined {\n    const authorityUrl = new UrlString(authority);\n    const authorityUrlComponents = authorityUrl.getUrlComponents();\n    /**\n     * For credential matching purposes, tenantId is the last path segment of the authority URL:\n     *  AAD Authority - domain/tenantId -> Credentials are cached with realm = tenantId\n     *  B2C Authority - domain/{tenantId}?/.../policy -> Credentials are cached with realm = policy\n     *  tenantId is downcased because B2C policies can have mixed case but tfp claim is downcased\n     *\n     * Note that we may not have any path segments in certain OIDC scenarios.\n     */\n    const tenantId =\n        authorityUrlComponents.PathSegments.slice(-1)[0]?.toLowerCase();\n\n    switch (tenantId) {\n        case AADAuthorityConstants.COMMON:\n        case AADAuthorityConstants.ORGANIZATIONS:\n        case AADAuthorityConstants.CONSUMERS:\n            return undefined;\n        default:\n            return tenantId;\n    }\n}\n\nexport function formatAuthorityUri(authorityUri: string): string {\n    return authorityUri.endsWith(Constants.FORWARD_SLASH)\n        ? authorityUri\n        : `${authorityUri}${Constants.FORWARD_SLASH}`;\n}\n\nexport function buildStaticAuthorityOptions(\n    authOptions: Partial<AuthorityOptions>\n): StaticAuthorityOptions {\n    const rawCloudDiscoveryMetadata = authOptions.cloudDiscoveryMetadata;\n    let cloudDiscoveryMetadata: CloudInstanceDiscoveryResponse | undefined =\n        undefined;\n    if (rawCloudDiscoveryMetadata) {\n        try {\n            cloudDiscoveryMetadata = JSON.parse(rawCloudDiscoveryMetadata);\n        } catch (e) {\n            throw createClientConfigurationError(\n                ClientConfigurationErrorCodes.invalidCloudDiscoveryMetadata\n            );\n        }\n    }\n    return {\n        canonicalAuthority: authOptions.authority\n            ? formatAuthorityUri(authOptions.authority)\n            : undefined,\n        knownAuthorities: authOptions.knownAuthorities,\n        cloudDiscoveryMetadata: cloudDiscoveryMetadata,\n    };\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { Authority, formatAuthorityUri } from \"./Authority.js\";\nimport { INetworkModule } from \"../network/INetworkModule.js\";\nimport {\n    createClientAuthError,\n    ClientAuthErrorCodes,\n} from \"../error/ClientAuthError.js\";\nimport { ICacheManager } from \"../cache/interface/ICacheManager.js\";\nimport { AuthorityOptions } from \"./AuthorityOptions.js\";\nimport { Logger } from \"../logger/Logger.js\";\nimport { IPerformanceClient } from \"../telemetry/performance/IPerformanceClient.js\";\nimport { PerformanceEvents } from \"../telemetry/performance/PerformanceEvent.js\";\nimport { invokeAsync } from \"../utils/FunctionWrappers.js\";\n\n/**\n * Create an authority object of the correct type based on the url\n * Performs basic authority validation - checks to see if the authority is of a valid type (i.e. aad, b2c, adfs)\n *\n * Also performs endpoint discovery.\n *\n * @param authorityUri\n * @param networkClient\n * @param protocolMode\n * @internal\n */\nexport async function createDiscoveredInstance(\n    authorityUri: string,\n    networkClient: INetworkModule,\n    cacheManager: ICacheManager,\n    authorityOptions: AuthorityOptions,\n    logger: Logger,\n    correlationId: string,\n    performanceClient?: IPerformanceClient\n): Promise<Authority> {\n    performanceClient?.addQueueMeasurement(\n        PerformanceEvents.AuthorityFactoryCreateDiscoveredInstance,\n        correlationId\n    );\n    const authorityUriFinal = Authority.transformCIAMAuthority(\n        formatAuthorityUri(authorityUri)\n    );\n\n    // Initialize authority and perform discovery endpoint check.\n    const acquireTokenAuthority: Authority = new Authority(\n        authorityUriFinal,\n        networkClient,\n        cacheManager,\n        authorityOptions,\n        logger,\n        correlationId,\n        performanceClient\n    );\n\n    try {\n        await invokeAsync(\n            acquireTokenAuthority.resolveEndpointsAsync.bind(\n                acquireTokenAuthority\n            ),\n            PerformanceEvents.AuthorityResolveEndpointsAsync,\n            logger,\n            performanceClient,\n            correlationId\n        )();\n        return acquireTokenAuthority;\n    } catch (e) {\n        throw createClientAuthError(\n            ClientAuthErrorCodes.endpointResolutionError\n        );\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { AuthError } from \"./AuthError.js\";\n\n/**\n * Error thrown when there is an error with the server code, for example, unavailability.\n */\nexport class ServerError extends AuthError {\n    /**\n     * Server error number;\n     */\n    readonly errorNo?: string;\n\n    /**\n     * Http status number;\n     */\n    readonly status?: number;\n\n    constructor(\n        errorCode?: string,\n        errorMessage?: string,\n        subError?: string,\n        errorNo?: string,\n        status?: number\n    ) {\n        super(errorCode, errorMessage, subError);\n        this.name = \"ServerError\";\n        this.errorNo = errorNo;\n        this.status = status;\n\n        Object.setPrototypeOf(this, ServerError.prototype);\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { ShrOptions } from \"../crypto/SignedHttpRequest.js\";\nimport { BaseAuthRequest } from \"../request/BaseAuthRequest.js\";\nimport { AuthenticationScheme } from \"../utils/Constants.js\";\n\n/**\n * Type representing a unique request thumbprint.\n */\nexport type RequestThumbprint = {\n    clientId: string;\n    authority: string;\n    scopes: Array<string>;\n    homeAccountIdentifier?: string;\n    claims?: string;\n    authenticationScheme?: AuthenticationScheme;\n    resourceRequestMethod?: string;\n    resourceRequestUri?: string;\n    shrClaims?: string;\n    sshKid?: string;\n    shrOptions?: ShrOptions;\n    embeddedClientId?: string;\n};\n\nexport function getRequestThumbprint(\n    clientId: string,\n    request: BaseAuthRequest,\n    homeAccountId?: string\n): RequestThumbprint {\n    return {\n        clientId: clientId,\n        authority: request.authority,\n        scopes: request.scopes,\n        homeAccountIdentifier: homeAccountId,\n        claims: request.claims,\n        authenticationScheme: request.authenticationScheme,\n        resourceRequestMethod: request.resourceRequestMethod,\n        resourceRequestUri: request.resourceRequestUri,\n        shrClaims: request.shrClaims,\n        sshKid: request.sshKid,\n        embeddedClientId:\n            request.embeddedClientId || request.tokenBodyParameters?.clientId,\n    };\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { NetworkResponse } from \"./NetworkResponse.js\";\nimport { ServerAuthorizationTokenResponse } from \"../response/ServerAuthorizationTokenResponse.js\";\nimport {\n    HeaderNames,\n    ThrottlingConstants,\n    Constants,\n} from \"../utils/Constants.js\";\nimport { CacheManager } from \"../cache/CacheManager.js\";\nimport { ServerError } from \"../error/ServerError.js\";\nimport {\n    getRequestThumbprint,\n    RequestThumbprint,\n} from \"./RequestThumbprint.js\";\nimport { ThrottlingEntity } from \"../cache/entities/ThrottlingEntity.js\";\nimport { BaseAuthRequest } from \"../request/BaseAuthRequest.js\";\n\n/** @internal */\nexport class ThrottlingUtils {\n    /**\n     * Prepares a RequestThumbprint to be stored as a key.\n     * @param thumbprint\n     */\n    static generateThrottlingStorageKey(thumbprint: RequestThumbprint): string {\n        return `${ThrottlingConstants.THROTTLING_PREFIX}.${JSON.stringify(\n            thumbprint\n        )}`;\n    }\n\n    /**\n     * Performs necessary throttling checks before a network request.\n     * @param cacheManager\n     * @param thumbprint\n     */\n    static preProcess(\n        cacheManager: CacheManager,\n        thumbprint: RequestThumbprint,\n        correlationId: string\n    ): void {\n        const key = ThrottlingUtils.generateThrottlingStorageKey(thumbprint);\n        const value = cacheManager.getThrottlingCache(key);\n\n        if (value) {\n            if (value.throttleTime < Date.now()) {\n                cacheManager.removeItem(key, correlationId);\n                return;\n            }\n            throw new ServerError(\n                value.errorCodes?.join(\" \") || Constants.EMPTY_STRING,\n                value.errorMessage,\n                value.subError\n            );\n        }\n    }\n\n    /**\n     * Performs necessary throttling checks after a network request.\n     * @param cacheManager\n     * @param thumbprint\n     * @param response\n     */\n    static postProcess(\n        cacheManager: CacheManager,\n        thumbprint: RequestThumbprint,\n        response: NetworkResponse<ServerAuthorizationTokenResponse>,\n        correlationId: string\n    ): void {\n        if (\n            ThrottlingUtils.checkResponseStatus(response) ||\n            ThrottlingUtils.checkResponseForRetryAfter(response)\n        ) {\n            const thumbprintValue: ThrottlingEntity = {\n                throttleTime: ThrottlingUtils.calculateThrottleTime(\n                    parseInt(response.headers[HeaderNames.RETRY_AFTER])\n                ),\n                error: response.body.error,\n                errorCodes: response.body.error_codes,\n                errorMessage: response.body.error_description,\n                subError: response.body.suberror,\n            };\n            cacheManager.setThrottlingCache(\n                ThrottlingUtils.generateThrottlingStorageKey(thumbprint),\n                thumbprintValue,\n                correlationId\n            );\n        }\n    }\n\n    /**\n     * Checks a NetworkResponse object's status codes against 429 or 5xx\n     * @param response\n     */\n    static checkResponseStatus(\n        response: NetworkResponse<ServerAuthorizationTokenResponse>\n    ): boolean {\n        return (\n            response.status === 429 ||\n            (response.status >= 500 && response.status < 600)\n        );\n    }\n\n    /**\n     * Checks a NetworkResponse object's RetryAfter header\n     * @param response\n     */\n    static checkResponseForRetryAfter(\n        response: NetworkResponse<ServerAuthorizationTokenResponse>\n    ): boolean {\n        if (response.headers) {\n            return (\n                response.headers.hasOwnProperty(HeaderNames.RETRY_AFTER) &&\n                (response.status < 200 || response.status >= 300)\n            );\n        }\n        return false;\n    }\n\n    /**\n     * Calculates the Unix-time value for a throttle to expire given throttleTime in seconds.\n     * @param throttleTime\n     */\n    static calculateThrottleTime(throttleTime: number): number {\n        const time = throttleTime <= 0 ? 0 : throttleTime;\n\n        const currentSeconds = Date.now() / 1000;\n        return Math.floor(\n            Math.min(\n                currentSeconds +\n                    (time || ThrottlingConstants.DEFAULT_THROTTLE_TIME_SECONDS),\n                currentSeconds +\n                    ThrottlingConstants.DEFAULT_MAX_THROTTLE_TIME_SECONDS\n            ) * 1000\n        );\n    }\n\n    static removeThrottle(\n        cacheManager: CacheManager,\n        clientId: string,\n        request: BaseAuthRequest,\n        homeAccountIdentifier?: string\n    ): void {\n        const thumbprint = getRequestThumbprint(\n            clientId,\n            request,\n            homeAccountIdentifier\n        );\n        const key = this.generateThrottlingStorageKey(thumbprint);\n        cacheManager.removeItem(key, request.correlationId);\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { AuthError } from \"./AuthError.js\";\n\n/**\n * Represents network related errors\n */\nexport class NetworkError extends AuthError {\n    error: AuthError;\n    httpStatus?: number;\n    responseHeaders?: Record<string, string>;\n\n    constructor(\n        error: AuthError,\n        httpStatus?: number,\n        responseHeaders?: Record<string, string>\n    ) {\n        super(error.errorCode, error.errorMessage, error.subError);\n\n        Object.setPrototypeOf(this, NetworkError.prototype);\n        this.name = \"NetworkError\";\n        this.error = error;\n        this.httpStatus = httpStatus;\n        this.responseHeaders = responseHeaders;\n    }\n}\n\n/**\n * Creates NetworkError object for a failed network request\n * @param error - Error to be thrown back to the caller\n * @param httpStatus - Status code of the network request\n * @param responseHeaders - Response headers of the network request, when available\n * @returns NetworkError object\n */\nexport function createNetworkError(\n    error: AuthError,\n    httpStatus?: number,\n    responseHeaders?: Record<string, string>,\n    additionalError?: Error\n): NetworkError {\n    error.errorMessage = `${error.errorMessage}, additionalErrorInfo: error.name:${additionalError?.name}, error.message:${additionalError?.message}`;\n    return new NetworkError(error, httpStatus, responseHeaders);\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    ClientConfiguration,\n    buildClientConfiguration,\n    CommonClientConfiguration,\n} from \"../config/ClientConfiguration.js\";\nimport {\n    INetworkModule,\n    NetworkRequestOptions,\n} from \"../network/INetworkModule.js\";\nimport { NetworkResponse } from \"../network/NetworkResponse.js\";\nimport { ICrypto } from \"../crypto/ICrypto.js\";\nimport { Authority } from \"../authority/Authority.js\";\nimport { Logger } from \"../logger/Logger.js\";\nimport { Constants, HeaderNames } from \"../utils/Constants.js\";\nimport { ServerAuthorizationTokenResponse } from \"../response/ServerAuthorizationTokenResponse.js\";\nimport { CacheManager } from \"../cache/CacheManager.js\";\nimport { ServerTelemetryManager } from \"../telemetry/server/ServerTelemetryManager.js\";\nimport { RequestThumbprint } from \"../network/RequestThumbprint.js\";\nimport { version, name } from \"../packageMetadata.js\";\nimport { CcsCredential, CcsCredentialType } from \"../account/CcsCredential.js\";\nimport { buildClientInfoFromHomeAccountId } from \"../account/ClientInfo.js\";\nimport { IPerformanceClient } from \"../telemetry/performance/IPerformanceClient.js\";\nimport * as RequestParameterBuilder from \"../request/RequestParameterBuilder.js\";\nimport * as UrlUtils from \"../utils/UrlUtils.js\";\nimport { BaseAuthRequest } from \"../request/BaseAuthRequest.js\";\nimport { createDiscoveredInstance } from \"../authority/AuthorityFactory.js\";\nimport { PerformanceEvents } from \"../telemetry/performance/PerformanceEvent.js\";\nimport { ThrottlingUtils } from \"../network/ThrottlingUtils.js\";\nimport { AuthError } from \"../error/AuthError.js\";\nimport {\n    ClientAuthErrorCodes,\n    createClientAuthError,\n} from \"../error/ClientAuthError.js\";\nimport { NetworkError } from \"../error/NetworkError.js\";\nimport { invokeAsync } from \"../utils/FunctionWrappers.js\";\n\n/**\n * Base application class which will construct requests to send to and handle responses from the Microsoft STS using the authorization code flow.\n * @internal\n */\nexport abstract class BaseClient {\n    // Logger object\n    public logger: Logger;\n\n    // Application config\n    protected config: CommonClientConfiguration;\n\n    // Crypto Interface\n    protected cryptoUtils: ICrypto;\n\n    // Storage Interface\n    protected cacheManager: CacheManager;\n\n    // Network Interface\n    protected networkClient: INetworkModule;\n\n    // Server Telemetry Manager\n    protected serverTelemetryManager: ServerTelemetryManager | null;\n\n    // Default authority object\n    public authority: Authority;\n\n    // Performance telemetry client\n    protected performanceClient?: IPerformanceClient;\n\n    protected constructor(\n        configuration: ClientConfiguration,\n        performanceClient?: IPerformanceClient\n    ) {\n        // Set the configuration\n        this.config = buildClientConfiguration(configuration);\n\n        // Initialize the logger\n        this.logger = new Logger(this.config.loggerOptions, name, version);\n\n        // Initialize crypto\n        this.cryptoUtils = this.config.cryptoInterface;\n\n        // Initialize storage interface\n        this.cacheManager = this.config.storageInterface;\n\n        // Set the network interface\n        this.networkClient = this.config.networkInterface;\n\n        // Set TelemetryManager\n        this.serverTelemetryManager = this.config.serverTelemetryManager;\n\n        // set Authority\n        this.authority = this.config.authOptions.authority;\n\n        // set performance telemetry client\n        this.performanceClient = performanceClient;\n    }\n\n    /**\n     * Creates default headers for requests to token endpoint\n     */\n    protected createTokenRequestHeaders(\n        ccsCred?: CcsCredential\n    ): Record<string, string> {\n        const headers: Record<string, string> = {};\n        headers[HeaderNames.CONTENT_TYPE] = Constants.URL_FORM_CONTENT_TYPE;\n        if (!this.config.systemOptions.preventCorsPreflight && ccsCred) {\n            switch (ccsCred.type) {\n                case CcsCredentialType.HOME_ACCOUNT_ID:\n                    try {\n                        const clientInfo = buildClientInfoFromHomeAccountId(\n                            ccsCred.credential\n                        );\n                        headers[\n                            HeaderNames.CCS_HEADER\n                        ] = `Oid:${clientInfo.uid}@${clientInfo.utid}`;\n                    } catch (e) {\n                        this.logger.verbose(\n                            \"Could not parse home account ID for CCS Header: \" +\n                                e\n                        );\n                    }\n                    break;\n                case CcsCredentialType.UPN:\n                    headers[\n                        HeaderNames.CCS_HEADER\n                    ] = `UPN: ${ccsCred.credential}`;\n                    break;\n            }\n        }\n        return headers;\n    }\n\n    /**\n     * Http post to token endpoint\n     * @param tokenEndpoint\n     * @param queryString\n     * @param headers\n     * @param thumbprint\n     */\n    protected async executePostToTokenEndpoint(\n        tokenEndpoint: string,\n        queryString: string,\n        headers: Record<string, string>,\n        thumbprint: RequestThumbprint,\n        correlationId: string,\n        queuedEvent?: string\n    ): Promise<NetworkResponse<ServerAuthorizationTokenResponse>> {\n        if (queuedEvent) {\n            this.performanceClient?.addQueueMeasurement(\n                queuedEvent,\n                correlationId\n            );\n        }\n\n        const response =\n            await this.sendPostRequest<ServerAuthorizationTokenResponse>(\n                thumbprint,\n                tokenEndpoint,\n                { body: queryString, headers: headers },\n                correlationId\n            );\n\n        if (\n            this.config.serverTelemetryManager &&\n            response.status < 500 &&\n            response.status !== 429\n        ) {\n            // Telemetry data successfully logged by server, clear Telemetry cache\n            this.config.serverTelemetryManager.clearTelemetryCache();\n        }\n\n        return response;\n    }\n\n    /**\n     * Wraps sendPostRequestAsync with necessary preflight and postflight logic\n     * @param thumbprint - Request thumbprint for throttling\n     * @param tokenEndpoint - Endpoint to make the POST to\n     * @param options - Body and Headers to include on the POST request\n     * @param correlationId - CorrelationId for telemetry\n     */\n    async sendPostRequest<T extends ServerAuthorizationTokenResponse>(\n        thumbprint: RequestThumbprint,\n        tokenEndpoint: string,\n        options: NetworkRequestOptions,\n        correlationId: string\n    ): Promise<NetworkResponse<T>> {\n        ThrottlingUtils.preProcess(\n            this.cacheManager,\n            thumbprint,\n            correlationId\n        );\n\n        let response;\n        try {\n            response = await invokeAsync(\n                this.networkClient.sendPostRequestAsync.bind(\n                    this.networkClient\n                )<T>,\n                PerformanceEvents.NetworkClientSendPostRequestAsync,\n                this.logger,\n                this.performanceClient,\n                correlationId\n            )(tokenEndpoint, options);\n            const responseHeaders = response.headers || {};\n            this.performanceClient?.addFields(\n                {\n                    refreshTokenSize: response.body.refresh_token?.length || 0,\n                    httpVerToken:\n                        responseHeaders[HeaderNames.X_MS_HTTP_VERSION] || \"\",\n                    requestId:\n                        responseHeaders[HeaderNames.X_MS_REQUEST_ID] || \"\",\n                },\n                correlationId\n            );\n        } catch (e) {\n            if (e instanceof NetworkError) {\n                const responseHeaders = e.responseHeaders;\n                if (responseHeaders) {\n                    this.performanceClient?.addFields(\n                        {\n                            httpVerToken:\n                                responseHeaders[\n                                    HeaderNames.X_MS_HTTP_VERSION\n                                ] || \"\",\n                            requestId:\n                                responseHeaders[HeaderNames.X_MS_REQUEST_ID] ||\n                                \"\",\n                            contentTypeHeader:\n                                responseHeaders[HeaderNames.CONTENT_TYPE] ||\n                                undefined,\n                            contentLengthHeader:\n                                responseHeaders[HeaderNames.CONTENT_LENGTH] ||\n                                undefined,\n                            httpStatus: e.httpStatus,\n                        },\n                        correlationId\n                    );\n                }\n                throw e.error;\n            }\n            if (e instanceof AuthError) {\n                throw e;\n            } else {\n                throw createClientAuthError(ClientAuthErrorCodes.networkError);\n            }\n        }\n\n        ThrottlingUtils.postProcess(\n            this.cacheManager,\n            thumbprint,\n            response,\n            correlationId\n        );\n\n        return response;\n    }\n\n    /**\n     * Updates the authority object of the client. Endpoint discovery must be completed.\n     * @param updatedAuthority\n     */\n    async updateAuthority(\n        cloudInstanceHostname: string,\n        correlationId: string\n    ): Promise<void> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.UpdateTokenEndpointAuthority,\n            correlationId\n        );\n        const cloudInstanceAuthorityUri = `https://${cloudInstanceHostname}/${this.authority.tenant}/`;\n        const cloudInstanceAuthority = await createDiscoveredInstance(\n            cloudInstanceAuthorityUri,\n            this.networkClient,\n            this.cacheManager,\n            this.authority.options,\n            this.logger,\n            correlationId,\n            this.performanceClient\n        );\n        this.authority = cloudInstanceAuthority;\n    }\n\n    /**\n     * Creates query string for the /token request\n     * @param request\n     */\n    createTokenQueryParameters(request: BaseAuthRequest): string {\n        const parameters = new Map<string, string>();\n\n        if (request.embeddedClientId) {\n            RequestParameterBuilder.addBrokerParameters(\n                parameters,\n                this.config.authOptions.clientId,\n                this.config.authOptions.redirectUri\n            );\n        }\n\n        if (request.tokenQueryParameters) {\n            RequestParameterBuilder.addExtraQueryParameters(\n                parameters,\n                request.tokenQueryParameters\n            );\n        }\n\n        RequestParameterBuilder.addCorrelationId(\n            parameters,\n            request.correlationId\n        );\n\n        RequestParameterBuilder.instrumentBrokerParams(\n            parameters,\n            request.correlationId,\n            this.performanceClient\n        );\n        return UrlUtils.mapToQueryString(parameters);\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\n// Codes defined by MSAL\nexport const noTokensFound = \"no_tokens_found\";\nexport const nativeAccountUnavailable = \"native_account_unavailable\";\nexport const refreshTokenExpired = \"refresh_token_expired\";\nexport const uxNotAllowed = \"ux_not_allowed\";\n\n// Codes potentially returned by server\nexport const interactionRequired = \"interaction_required\";\nexport const consentRequired = \"consent_required\";\nexport const loginRequired = \"login_required\";\nexport const badToken = \"bad_token\";\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { Constants } from \"../utils/Constants.js\";\nimport { AuthError } from \"./AuthError.js\";\nimport * as InteractionRequiredAuthErrorCodes from \"./InteractionRequiredAuthErrorCodes.js\";\nexport { InteractionRequiredAuthErrorCodes };\n\n/**\n * InteractionRequiredServerErrorMessage contains string constants used by error codes and messages returned by the server indicating interaction is required\n */\nexport const InteractionRequiredServerErrorMessage = [\n    InteractionRequiredAuthErrorCodes.interactionRequired,\n    InteractionRequiredAuthErrorCodes.consentRequired,\n    InteractionRequiredAuthErrorCodes.loginRequired,\n    InteractionRequiredAuthErrorCodes.badToken,\n    InteractionRequiredAuthErrorCodes.uxNotAllowed,\n];\n\nexport const InteractionRequiredAuthSubErrorMessage = [\n    \"message_only\",\n    \"additional_action\",\n    \"basic_action\",\n    \"user_password_expired\",\n    \"consent_required\",\n    \"bad_token\",\n];\n\nconst InteractionRequiredAuthErrorMessages = {\n    [InteractionRequiredAuthErrorCodes.noTokensFound]:\n        \"No refresh token found in the cache. Please sign-in.\",\n    [InteractionRequiredAuthErrorCodes.nativeAccountUnavailable]:\n        \"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.\",\n    [InteractionRequiredAuthErrorCodes.refreshTokenExpired]:\n        \"Refresh token has expired.\",\n    [InteractionRequiredAuthErrorCodes.badToken]:\n        \"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.\",\n    [InteractionRequiredAuthErrorCodes.uxNotAllowed]:\n        \"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve.\",\n};\n\n/**\n * Interaction required errors defined by the SDK\n * @deprecated Use InteractionRequiredAuthErrorCodes instead\n */\nexport const InteractionRequiredAuthErrorMessage = {\n    noTokensFoundError: {\n        code: InteractionRequiredAuthErrorCodes.noTokensFound,\n        desc: InteractionRequiredAuthErrorMessages[\n            InteractionRequiredAuthErrorCodes.noTokensFound\n        ],\n    },\n    native_account_unavailable: {\n        code: InteractionRequiredAuthErrorCodes.nativeAccountUnavailable,\n        desc: InteractionRequiredAuthErrorMessages[\n            InteractionRequiredAuthErrorCodes.nativeAccountUnavailable\n        ],\n    },\n    bad_token: {\n        code: InteractionRequiredAuthErrorCodes.badToken,\n        desc: InteractionRequiredAuthErrorMessages[\n            InteractionRequiredAuthErrorCodes.badToken\n        ],\n    },\n};\n\n/**\n * Error thrown when user interaction is required.\n */\nexport class InteractionRequiredAuthError extends AuthError {\n    /**\n     * The time the error occured at\n     */\n    timestamp: string;\n\n    /**\n     * TraceId associated with the error\n     */\n    traceId: string;\n\n    /**\n     * https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-common/docs/claims-challenge.md\n     *\n     * A string with extra claims needed for the token request to succeed\n     * web site: redirect the user to the authorization page and set the extra claims\n     * web api: include the claims in the WWW-Authenticate header that are sent back to the client so that it knows to request a token with the extra claims\n     * desktop application or browser context: include the claims when acquiring the token interactively\n     * app to app context (client_credentials): include the claims in the AcquireTokenByClientCredential request\n     */\n    claims: string;\n\n    /**\n     * Server error number;\n     */\n    readonly errorNo?: string;\n\n    constructor(\n        errorCode?: string,\n        errorMessage?: string,\n        subError?: string,\n        timestamp?: string,\n        traceId?: string,\n        correlationId?: string,\n        claims?: string,\n        errorNo?: string\n    ) {\n        super(errorCode, errorMessage, subError);\n        Object.setPrototypeOf(this, InteractionRequiredAuthError.prototype);\n\n        this.timestamp = timestamp || Constants.EMPTY_STRING;\n        this.traceId = traceId || Constants.EMPTY_STRING;\n        this.correlationId = correlationId || Constants.EMPTY_STRING;\n        this.claims = claims || Constants.EMPTY_STRING;\n        this.name = \"InteractionRequiredAuthError\";\n        this.errorNo = errorNo;\n    }\n}\n\n/**\n * Helper function used to determine if an error thrown by the server requires interaction to resolve\n * @param errorCode\n * @param errorString\n * @param subError\n */\nexport function isInteractionRequiredError(\n    errorCode?: string,\n    errorString?: string,\n    subError?: string\n): boolean {\n    const isInteractionRequiredErrorCode =\n        !!errorCode &&\n        InteractionRequiredServerErrorMessage.indexOf(errorCode) > -1;\n    const isInteractionRequiredSubError =\n        !!subError &&\n        InteractionRequiredAuthSubErrorMessage.indexOf(subError) > -1;\n    const isInteractionRequiredErrorDesc =\n        !!errorString &&\n        InteractionRequiredServerErrorMessage.some((irErrorCode) => {\n            return errorString.indexOf(irErrorCode) > -1;\n        });\n\n    return (\n        isInteractionRequiredErrorCode ||\n        isInteractionRequiredErrorDesc ||\n        isInteractionRequiredSubError\n    );\n}\n\n/**\n * Creates an InteractionRequiredAuthError\n */\nexport function createInteractionRequiredAuthError(\n    errorCode: string\n): InteractionRequiredAuthError {\n    return new InteractionRequiredAuthError(\n        errorCode,\n        InteractionRequiredAuthErrorMessages[errorCode]\n    );\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { Constants } from \"./Constants.js\";\nimport { ICrypto } from \"../crypto/ICrypto.js\";\nimport {\n    ClientAuthErrorCodes,\n    createClientAuthError,\n} from \"../error/ClientAuthError.js\";\n\n/**\n * Type which defines the object that is stringified, encoded and sent in the state value.\n * Contains the following:\n * - id - unique identifier for this request\n * - ts - timestamp for the time the request was made. Used to ensure that token expiration is not calculated incorrectly.\n * - platformState - string value sent from the platform.\n */\nexport type LibraryStateObject = {\n    id: string;\n    meta?: Record<string, string>;\n};\n\n/**\n * Type which defines the stringified and encoded object sent to the service in the authorize request.\n */\nexport type RequestStateObject = {\n    userRequestState: string;\n    libraryState: LibraryStateObject;\n};\n\n/**\n * Class which provides helpers for OAuth 2.0 protocol specific values\n */\nexport class ProtocolUtils {\n    /**\n     * Appends user state with random guid, or returns random guid.\n     * @param userState\n     * @param randomGuid\n     */\n    static setRequestState(\n        cryptoObj: ICrypto,\n        userState?: string,\n        meta?: Record<string, string>\n    ): string {\n        const libraryState = ProtocolUtils.generateLibraryState(\n            cryptoObj,\n            meta\n        );\n        return userState\n            ? `${libraryState}${Constants.RESOURCE_DELIM}${userState}`\n            : libraryState;\n    }\n\n    /**\n     * Generates the state value used by the common library.\n     * @param randomGuid\n     * @param cryptoObj\n     */\n    static generateLibraryState(\n        cryptoObj: ICrypto,\n        meta?: Record<string, string>\n    ): string {\n        if (!cryptoObj) {\n            throw createClientAuthError(ClientAuthErrorCodes.noCryptoObject);\n        }\n\n        // Create a state object containing a unique id and the timestamp of the request creation\n        const stateObj: LibraryStateObject = {\n            id: cryptoObj.createNewGuid(),\n        };\n\n        if (meta) {\n            stateObj.meta = meta;\n        }\n\n        const stateString = JSON.stringify(stateObj);\n\n        return cryptoObj.base64Encode(stateString);\n    }\n\n    /**\n     * Parses the state into the RequestStateObject, which contains the LibraryState info and the state passed by the user.\n     * @param state\n     * @param cryptoObj\n     */\n    static parseRequestState(\n        cryptoObj: ICrypto,\n        state: string\n    ): RequestStateObject {\n        if (!cryptoObj) {\n            throw createClientAuthError(ClientAuthErrorCodes.noCryptoObject);\n        }\n\n        if (!state) {\n            throw createClientAuthError(ClientAuthErrorCodes.invalidState);\n        }\n\n        try {\n            // Split the state between library state and user passed state and decode them separately\n            const splitState = state.split(Constants.RESOURCE_DELIM);\n            const libraryState = splitState[0];\n            const userState =\n                splitState.length > 1\n                    ? splitState.slice(1).join(Constants.RESOURCE_DELIM)\n                    : Constants.EMPTY_STRING;\n            const libraryStateString = cryptoObj.base64Decode(libraryState);\n            const libraryStateObj = JSON.parse(\n                libraryStateString\n            ) as LibraryStateObject;\n            return {\n                userRequestState: userState || Constants.EMPTY_STRING,\n                libraryState: libraryStateObj,\n            };\n        } catch (e) {\n            throw createClientAuthError(ClientAuthErrorCodes.invalidState);\n        }\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { ICrypto, SignedHttpRequestParameters } from \"./ICrypto.js\";\nimport * as TimeUtils from \"../utils/TimeUtils.js\";\nimport { UrlString } from \"../url/UrlString.js\";\nimport { IPerformanceClient } from \"../telemetry/performance/IPerformanceClient.js\";\nimport { PerformanceEvents } from \"../telemetry/performance/PerformanceEvent.js\";\nimport { invokeAsync } from \"../utils/FunctionWrappers.js\";\nimport { Logger } from \"../logger/Logger.js\";\n\n/**\n * See eSTS docs for more info.\n * - A kid element, with the value containing an RFC 7638-compliant JWK thumbprint that is base64 encoded.\n * -  xms_ksl element, representing the storage location of the key's secret component on the client device. One of two values:\n *      - sw: software storage\n *      - uhw: hardware storage\n */\ntype ReqCnf = {\n    kid: string;\n    xms_ksl: KeyLocation;\n};\n\nexport type ReqCnfData = {\n    kid: string;\n    reqCnfString: string;\n};\n\nconst KeyLocation = {\n    SW: \"sw\",\n    UHW: \"uhw\",\n} as const;\nexport type KeyLocation = (typeof KeyLocation)[keyof typeof KeyLocation];\n\n/** @internal */\nexport class PopTokenGenerator {\n    private cryptoUtils: ICrypto;\n    private performanceClient?: IPerformanceClient;\n\n    constructor(cryptoUtils: ICrypto, performanceClient?: IPerformanceClient) {\n        this.cryptoUtils = cryptoUtils;\n        this.performanceClient = performanceClient;\n    }\n\n    /**\n     * Generates the req_cnf validated at the RP in the POP protocol for SHR parameters\n     * and returns an object containing the keyid, the full req_cnf string and the req_cnf string hash\n     * @param request\n     * @returns\n     */\n    async generateCnf(\n        request: SignedHttpRequestParameters,\n        logger: Logger\n    ): Promise<ReqCnfData> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.PopTokenGenerateCnf,\n            request.correlationId\n        );\n\n        const reqCnf = await invokeAsync(\n            this.generateKid.bind(this),\n            PerformanceEvents.PopTokenGenerateCnf,\n            logger,\n            this.performanceClient,\n            request.correlationId\n        )(request);\n        const reqCnfString: string = this.cryptoUtils.base64UrlEncode(\n            JSON.stringify(reqCnf)\n        );\n\n        return {\n            kid: reqCnf.kid,\n            reqCnfString,\n        };\n    }\n\n    /**\n     * Generates key_id for a SHR token request\n     * @param request\n     * @returns\n     */\n    async generateKid(request: SignedHttpRequestParameters): Promise<ReqCnf> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.PopTokenGenerateKid,\n            request.correlationId\n        );\n\n        const kidThumbprint = await this.cryptoUtils.getPublicKeyThumbprint(\n            request\n        );\n\n        return {\n            kid: kidThumbprint,\n            xms_ksl: KeyLocation.SW,\n        };\n    }\n\n    /**\n     * Signs the POP access_token with the local generated key-pair\n     * @param accessToken\n     * @param request\n     * @returns\n     */\n    async signPopToken(\n        accessToken: string,\n        keyId: string,\n        request: SignedHttpRequestParameters\n    ): Promise<string> {\n        return this.signPayload(accessToken, keyId, request);\n    }\n\n    /**\n     * Utility function to generate the signed JWT for an access_token\n     * @param payload\n     * @param kid\n     * @param request\n     * @param claims\n     * @returns\n     */\n    async signPayload(\n        payload: string,\n        keyId: string,\n        request: SignedHttpRequestParameters,\n        claims?: object\n    ): Promise<string> {\n        // Deconstruct request to extract SHR parameters\n        const {\n            resourceRequestMethod,\n            resourceRequestUri,\n            shrClaims,\n            shrNonce,\n            shrOptions,\n        } = request;\n\n        const resourceUrlString = resourceRequestUri\n            ? new UrlString(resourceRequestUri)\n            : undefined;\n        const resourceUrlComponents = resourceUrlString?.getUrlComponents();\n        return this.cryptoUtils.signJwt(\n            {\n                at: payload,\n                ts: TimeUtils.nowSeconds(),\n                m: resourceRequestMethod?.toUpperCase(),\n                u: resourceUrlComponents?.HostNameAndPort,\n                nonce: shrNonce || this.cryptoUtils.createNewGuid(),\n                p: resourceUrlComponents?.AbsolutePath,\n                q: resourceUrlComponents?.QueryString\n                    ? [[], resourceUrlComponents.QueryString]\n                    : undefined,\n                client_claims: shrClaims || undefined,\n                ...claims,\n            },\n            keyId,\n            shrOptions,\n            request.correlationId\n        );\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { ISerializableTokenCache } from \"../interface/ISerializableTokenCache.js\";\n\n/**\n * This class instance helps track the memory changes facilitating\n * decisions to read from and write to the persistent cache\n */ export class TokenCacheContext {\n    /**\n     * boolean indicating cache change\n     */\n    hasChanged: boolean;\n    /**\n     * serializable token cache interface\n     */\n    cache: ISerializableTokenCache;\n\n    constructor(tokenCache: ISerializableTokenCache, hasChanged: boolean) {\n        this.cache = tokenCache;\n        this.hasChanged = hasChanged;\n    }\n\n    /**\n     * boolean which indicates the changes in cache\n     */\n    get cacheHasChanged(): boolean {\n        return this.hasChanged;\n    }\n\n    /**\n     * function to retrieve the token cache\n     */\n    get tokenCache(): ISerializableTokenCache {\n        return this.cache;\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { ServerAuthorizationTokenResponse } from \"./ServerAuthorizationTokenResponse.js\";\nimport { ICrypto } from \"../crypto/ICrypto.js\";\nimport {\n    ClientAuthErrorCodes,\n    createClientAuthError,\n} from \"../error/ClientAuthError.js\";\nimport { Logger } from \"../logger/Logger.js\";\nimport { ServerError } from \"../error/ServerError.js\";\nimport { ScopeSet } from \"../request/ScopeSet.js\";\nimport { AuthenticationResult } from \"./AuthenticationResult.js\";\nimport { AccountEntity } from \"../cache/entities/AccountEntity.js\";\nimport { Authority } from \"../authority/Authority.js\";\nimport { IdTokenEntity } from \"../cache/entities/IdTokenEntity.js\";\nimport { AccessTokenEntity } from \"../cache/entities/AccessTokenEntity.js\";\nimport { RefreshTokenEntity } from \"../cache/entities/RefreshTokenEntity.js\";\nimport {\n    InteractionRequiredAuthError,\n    isInteractionRequiredError,\n} from \"../error/InteractionRequiredAuthError.js\";\nimport { CacheRecord } from \"../cache/entities/CacheRecord.js\";\nimport { CacheManager } from \"../cache/CacheManager.js\";\nimport { ProtocolUtils, RequestStateObject } from \"../utils/ProtocolUtils.js\";\nimport {\n    AuthenticationScheme,\n    Constants,\n    THE_FAMILY_ID,\n    HttpStatus,\n} from \"../utils/Constants.js\";\nimport { PopTokenGenerator } from \"../crypto/PopTokenGenerator.js\";\nimport { AppMetadataEntity } from \"../cache/entities/AppMetadataEntity.js\";\nimport { ICachePlugin } from \"../cache/interface/ICachePlugin.js\";\nimport { TokenCacheContext } from \"../cache/persistence/TokenCacheContext.js\";\nimport { ISerializableTokenCache } from \"../cache/interface/ISerializableTokenCache.js\";\nimport { AuthorizationCodePayload } from \"./AuthorizationCodePayload.js\";\nimport { BaseAuthRequest } from \"../request/BaseAuthRequest.js\";\nimport { IPerformanceClient } from \"../telemetry/performance/IPerformanceClient.js\";\nimport { PerformanceEvents } from \"../telemetry/performance/PerformanceEvent.js\";\nimport {\n    checkMaxAge,\n    extractTokenClaims,\n    isKmsi,\n} from \"../account/AuthToken.js\";\nimport {\n    TokenClaims,\n    getTenantIdFromIdTokenClaims,\n} from \"../account/TokenClaims.js\";\nimport {\n    AccountInfo,\n    buildTenantProfile,\n    updateAccountTenantProfileData,\n} from \"../account/AccountInfo.js\";\nimport * as CacheHelpers from \"../cache/utils/CacheHelpers.js\";\nimport * as TimeUtils from \"../utils/TimeUtils.js\";\n\n/**\n * Class that handles response parsing.\n * @internal\n */\nexport class ResponseHandler {\n    private clientId: string;\n    private cacheStorage: CacheManager;\n    private cryptoObj: ICrypto;\n    private logger: Logger;\n    private homeAccountIdentifier: string;\n    private serializableCache: ISerializableTokenCache | null;\n    private persistencePlugin: ICachePlugin | null;\n    private performanceClient?: IPerformanceClient;\n\n    constructor(\n        clientId: string,\n        cacheStorage: CacheManager,\n        cryptoObj: ICrypto,\n        logger: Logger,\n        serializableCache: ISerializableTokenCache | null,\n        persistencePlugin: ICachePlugin | null,\n        performanceClient?: IPerformanceClient\n    ) {\n        this.clientId = clientId;\n        this.cacheStorage = cacheStorage;\n        this.cryptoObj = cryptoObj;\n        this.logger = logger;\n        this.serializableCache = serializableCache;\n        this.persistencePlugin = persistencePlugin;\n        this.performanceClient = performanceClient;\n    }\n\n    /**\n     * Function which validates server authorization token response.\n     * @param serverResponse\n     * @param refreshAccessToken\n     */\n    validateTokenResponse(\n        serverResponse: ServerAuthorizationTokenResponse,\n        refreshAccessToken?: boolean\n    ): void {\n        // Check for error\n        if (\n            serverResponse.error ||\n            serverResponse.error_description ||\n            serverResponse.suberror\n        ) {\n            const errString = `Error(s): ${\n                serverResponse.error_codes || Constants.NOT_AVAILABLE\n            } - Timestamp: ${\n                serverResponse.timestamp || Constants.NOT_AVAILABLE\n            } - Description: ${\n                serverResponse.error_description || Constants.NOT_AVAILABLE\n            } - Correlation ID: ${\n                serverResponse.correlation_id || Constants.NOT_AVAILABLE\n            } - Trace ID: ${\n                serverResponse.trace_id || Constants.NOT_AVAILABLE\n            }`;\n            const serverErrorNo = serverResponse.error_codes?.length\n                ? serverResponse.error_codes[0]\n                : undefined;\n            const serverError = new ServerError(\n                serverResponse.error,\n                errString,\n                serverResponse.suberror,\n                serverErrorNo,\n                serverResponse.status\n            );\n\n            // check if 500 error\n            if (\n                refreshAccessToken &&\n                serverResponse.status &&\n                serverResponse.status >= HttpStatus.SERVER_ERROR_RANGE_START &&\n                serverResponse.status <= HttpStatus.SERVER_ERROR_RANGE_END\n            ) {\n                this.logger.warning(\n                    `executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\\n${serverError}`\n                );\n\n                // don't throw an exception, but alert the user via a log that the token was unable to be refreshed\n                return;\n                // check if 400 error\n            } else if (\n                refreshAccessToken &&\n                serverResponse.status &&\n                serverResponse.status >= HttpStatus.CLIENT_ERROR_RANGE_START &&\n                serverResponse.status <= HttpStatus.CLIENT_ERROR_RANGE_END\n            ) {\n                this.logger.warning(\n                    `executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\\n${serverError}`\n                );\n\n                // don't throw an exception, but alert the user via a log that the token was unable to be refreshed\n                return;\n            }\n\n            if (\n                isInteractionRequiredError(\n                    serverResponse.error,\n                    serverResponse.error_description,\n                    serverResponse.suberror\n                )\n            ) {\n                throw new InteractionRequiredAuthError(\n                    serverResponse.error,\n                    serverResponse.error_description,\n                    serverResponse.suberror,\n                    serverResponse.timestamp || Constants.EMPTY_STRING,\n                    serverResponse.trace_id || Constants.EMPTY_STRING,\n                    serverResponse.correlation_id || Constants.EMPTY_STRING,\n                    serverResponse.claims || Constants.EMPTY_STRING,\n                    serverErrorNo\n                );\n            }\n\n            throw serverError;\n        }\n    }\n\n    /**\n     * Returns a constructed token response based on given string. Also manages the cache updates and cleanups.\n     * @param serverTokenResponse\n     * @param authority\n     */\n    async handleServerTokenResponse(\n        serverTokenResponse: ServerAuthorizationTokenResponse,\n        authority: Authority,\n        reqTimestamp: number,\n        request: BaseAuthRequest,\n        authCodePayload?: AuthorizationCodePayload,\n        userAssertionHash?: string,\n        handlingRefreshTokenResponse?: boolean,\n        forceCacheRefreshTokenResponse?: boolean,\n        serverRequestId?: string\n    ): Promise<AuthenticationResult> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.HandleServerTokenResponse,\n            serverTokenResponse.correlation_id\n        );\n\n        // create an idToken object (not entity)\n        let idTokenClaims: TokenClaims | undefined;\n        if (serverTokenResponse.id_token) {\n            idTokenClaims = extractTokenClaims(\n                serverTokenResponse.id_token || Constants.EMPTY_STRING,\n                this.cryptoObj.base64Decode\n            );\n\n            // token nonce check (TODO: Add a warning if no nonce is given?)\n            if (authCodePayload && authCodePayload.nonce) {\n                if (idTokenClaims.nonce !== authCodePayload.nonce) {\n                    throw createClientAuthError(\n                        ClientAuthErrorCodes.nonceMismatch\n                    );\n                }\n            }\n\n            // token max_age check\n            if (request.maxAge || request.maxAge === 0) {\n                const authTime = idTokenClaims.auth_time;\n                if (!authTime) {\n                    throw createClientAuthError(\n                        ClientAuthErrorCodes.authTimeNotFound\n                    );\n                }\n\n                checkMaxAge(authTime, request.maxAge);\n            }\n        }\n\n        // generate homeAccountId\n        this.homeAccountIdentifier = AccountEntity.generateHomeAccountId(\n            serverTokenResponse.client_info || Constants.EMPTY_STRING,\n            authority.authorityType,\n            this.logger,\n            this.cryptoObj,\n            idTokenClaims\n        );\n\n        // save the response tokens\n        let requestStateObj: RequestStateObject | undefined;\n        if (!!authCodePayload && !!authCodePayload.state) {\n            requestStateObj = ProtocolUtils.parseRequestState(\n                this.cryptoObj,\n                authCodePayload.state\n            );\n        }\n\n        // Add keyId from request to serverTokenResponse if defined\n        serverTokenResponse.key_id =\n            serverTokenResponse.key_id || request.sshKid || undefined;\n\n        const cacheRecord = this.generateCacheRecord(\n            serverTokenResponse,\n            authority,\n            reqTimestamp,\n            request,\n            idTokenClaims,\n            userAssertionHash,\n            authCodePayload\n        );\n        let cacheContext;\n        try {\n            if (this.persistencePlugin && this.serializableCache) {\n                this.logger.verbose(\n                    \"Persistence enabled, calling beforeCacheAccess\"\n                );\n                cacheContext = new TokenCacheContext(\n                    this.serializableCache,\n                    true\n                );\n                await this.persistencePlugin.beforeCacheAccess(cacheContext);\n            }\n            /*\n             * When saving a refreshed tokens to the cache, it is expected that the account that was used is present in the cache.\n             * If not present, we should return null, as it's the case that another application called removeAccount in between\n             * the calls to getAllAccounts and acquireTokenSilent. We should not overwrite that removal, unless explicitly flagged by\n             * the developer, as in the case of refresh token flow used in ADAL Node to MSAL Node migration.\n             */\n            if (\n                handlingRefreshTokenResponse &&\n                !forceCacheRefreshTokenResponse &&\n                cacheRecord.account\n            ) {\n                const key = this.cacheStorage.generateAccountKey(\n                    AccountEntity.getAccountInfo(cacheRecord.account)\n                );\n                const account = this.cacheStorage.getAccount(\n                    key,\n                    request.correlationId\n                );\n                if (!account) {\n                    this.logger.warning(\n                        \"Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache\"\n                    );\n                    return await ResponseHandler.generateAuthenticationResult(\n                        this.cryptoObj,\n                        authority,\n                        cacheRecord,\n                        false,\n                        request,\n                        idTokenClaims,\n                        requestStateObj,\n                        undefined,\n                        serverRequestId\n                    );\n                }\n            }\n            await this.cacheStorage.saveCacheRecord(\n                cacheRecord,\n                request.correlationId,\n                isKmsi(idTokenClaims || {}),\n                request.storeInCache\n            );\n        } finally {\n            if (\n                this.persistencePlugin &&\n                this.serializableCache &&\n                cacheContext\n            ) {\n                this.logger.verbose(\n                    \"Persistence enabled, calling afterCacheAccess\"\n                );\n                await this.persistencePlugin.afterCacheAccess(cacheContext);\n            }\n        }\n\n        return ResponseHandler.generateAuthenticationResult(\n            this.cryptoObj,\n            authority,\n            cacheRecord,\n            false,\n            request,\n            idTokenClaims,\n            requestStateObj,\n            serverTokenResponse,\n            serverRequestId\n        );\n    }\n\n    /**\n     * Generates CacheRecord\n     * @param serverTokenResponse\n     * @param idTokenObj\n     * @param authority\n     */\n    private generateCacheRecord(\n        serverTokenResponse: ServerAuthorizationTokenResponse,\n        authority: Authority,\n        reqTimestamp: number,\n        request: BaseAuthRequest,\n        idTokenClaims?: TokenClaims,\n        userAssertionHash?: string,\n        authCodePayload?: AuthorizationCodePayload\n    ): CacheRecord {\n        const env = authority.getPreferredCache();\n        if (!env) {\n            throw createClientAuthError(\n                ClientAuthErrorCodes.invalidCacheEnvironment\n            );\n        }\n\n        const claimsTenantId = getTenantIdFromIdTokenClaims(idTokenClaims);\n\n        // IdToken: non AAD scenarios can have empty realm\n        let cachedIdToken: IdTokenEntity | undefined;\n        let cachedAccount: AccountEntity | undefined;\n        if (serverTokenResponse.id_token && !!idTokenClaims) {\n            cachedIdToken = CacheHelpers.createIdTokenEntity(\n                this.homeAccountIdentifier,\n                env,\n                serverTokenResponse.id_token,\n                this.clientId,\n                claimsTenantId || \"\"\n            );\n\n            cachedAccount = buildAccountToCache(\n                this.cacheStorage,\n                authority,\n                this.homeAccountIdentifier,\n                this.cryptoObj.base64Decode,\n                request.correlationId,\n                idTokenClaims,\n                serverTokenResponse.client_info,\n                env,\n                claimsTenantId,\n                authCodePayload,\n                undefined, // nativeAccountId\n                this.logger\n            );\n        }\n\n        // AccessToken\n        let cachedAccessToken: AccessTokenEntity | null = null;\n        if (serverTokenResponse.access_token) {\n            // If scopes not returned in server response, use request scopes\n            const responseScopes = serverTokenResponse.scope\n                ? ScopeSet.fromString(serverTokenResponse.scope)\n                : new ScopeSet(request.scopes || []);\n\n            /*\n             * Use timestamp calculated before request\n             * Server may return timestamps as strings, parse to numbers if so.\n             */\n            const expiresIn: number =\n                (typeof serverTokenResponse.expires_in === \"string\"\n                    ? parseInt(serverTokenResponse.expires_in, 10)\n                    : serverTokenResponse.expires_in) || 0;\n            const extExpiresIn: number =\n                (typeof serverTokenResponse.ext_expires_in === \"string\"\n                    ? parseInt(serverTokenResponse.ext_expires_in, 10)\n                    : serverTokenResponse.ext_expires_in) || 0;\n            const refreshIn: number | undefined =\n                (typeof serverTokenResponse.refresh_in === \"string\"\n                    ? parseInt(serverTokenResponse.refresh_in, 10)\n                    : serverTokenResponse.refresh_in) || undefined;\n            const tokenExpirationSeconds = reqTimestamp + expiresIn;\n            const extendedTokenExpirationSeconds =\n                tokenExpirationSeconds + extExpiresIn;\n            const refreshOnSeconds =\n                refreshIn && refreshIn > 0\n                    ? reqTimestamp + refreshIn\n                    : undefined;\n\n            // non AAD scenarios can have empty realm\n            cachedAccessToken = CacheHelpers.createAccessTokenEntity(\n                this.homeAccountIdentifier,\n                env,\n                serverTokenResponse.access_token,\n                this.clientId,\n                claimsTenantId || authority.tenant || \"\",\n                responseScopes.printScopes(),\n                tokenExpirationSeconds,\n                extendedTokenExpirationSeconds,\n                this.cryptoObj.base64Decode,\n                refreshOnSeconds,\n                serverTokenResponse.token_type,\n                userAssertionHash,\n                serverTokenResponse.key_id,\n                request.claims,\n                request.requestedClaimsHash\n            );\n        }\n\n        // refreshToken\n        let cachedRefreshToken: RefreshTokenEntity | null = null;\n        if (serverTokenResponse.refresh_token) {\n            let rtExpiresOn: number | undefined;\n            if (serverTokenResponse.refresh_token_expires_in) {\n                const rtExpiresIn: number =\n                    typeof serverTokenResponse.refresh_token_expires_in ===\n                    \"string\"\n                        ? parseInt(\n                              serverTokenResponse.refresh_token_expires_in,\n                              10\n                          )\n                        : serverTokenResponse.refresh_token_expires_in;\n                rtExpiresOn = reqTimestamp + rtExpiresIn;\n            }\n            cachedRefreshToken = CacheHelpers.createRefreshTokenEntity(\n                this.homeAccountIdentifier,\n                env,\n                serverTokenResponse.refresh_token,\n                this.clientId,\n                serverTokenResponse.foci,\n                userAssertionHash,\n                rtExpiresOn\n            );\n        }\n\n        // appMetadata\n        let cachedAppMetadata: AppMetadataEntity | null = null;\n        if (serverTokenResponse.foci) {\n            cachedAppMetadata = {\n                clientId: this.clientId,\n                environment: env,\n                familyId: serverTokenResponse.foci,\n            };\n        }\n\n        return {\n            account: cachedAccount,\n            idToken: cachedIdToken,\n            accessToken: cachedAccessToken,\n            refreshToken: cachedRefreshToken,\n            appMetadata: cachedAppMetadata,\n        };\n    }\n\n    /**\n     * Creates an @AuthenticationResult from @CacheRecord , @IdToken , and a boolean that states whether or not the result is from cache.\n     *\n     * Optionally takes a state string that is set as-is in the response.\n     *\n     * @param cacheRecord\n     * @param idTokenObj\n     * @param fromTokenCache\n     * @param stateString\n     */\n    static async generateAuthenticationResult(\n        cryptoObj: ICrypto,\n        authority: Authority,\n        cacheRecord: CacheRecord,\n        fromTokenCache: boolean,\n        request: BaseAuthRequest,\n        idTokenClaims?: TokenClaims,\n        requestState?: RequestStateObject,\n        serverTokenResponse?: ServerAuthorizationTokenResponse,\n        requestId?: string\n    ): Promise<AuthenticationResult> {\n        let accessToken: string = Constants.EMPTY_STRING;\n        let responseScopes: Array<string> = [];\n        let expiresOn: Date | null = null;\n        let extExpiresOn: Date | undefined;\n        let refreshOn: Date | undefined;\n        let familyId: string = Constants.EMPTY_STRING;\n\n        if (cacheRecord.accessToken) {\n            /*\n             * if the request object has `popKid` property, `signPopToken` will be set to false and\n             * the token will be returned unsigned\n             */\n            if (\n                cacheRecord.accessToken.tokenType ===\n                    AuthenticationScheme.POP &&\n                !request.popKid\n            ) {\n                const popTokenGenerator: PopTokenGenerator =\n                    new PopTokenGenerator(cryptoObj);\n                const { secret, keyId } = cacheRecord.accessToken;\n\n                if (!keyId) {\n                    throw createClientAuthError(\n                        ClientAuthErrorCodes.keyIdMissing\n                    );\n                }\n\n                accessToken = await popTokenGenerator.signPopToken(\n                    secret,\n                    keyId,\n                    request\n                );\n            } else {\n                accessToken = cacheRecord.accessToken.secret;\n            }\n            responseScopes = ScopeSet.fromString(\n                cacheRecord.accessToken.target\n            ).asArray();\n            // Access token expiresOn cached in seconds, converting to Date for AuthenticationResult\n            expiresOn = TimeUtils.toDateFromSeconds(\n                cacheRecord.accessToken.expiresOn\n            );\n            extExpiresOn = TimeUtils.toDateFromSeconds(\n                cacheRecord.accessToken.extendedExpiresOn\n            );\n            if (cacheRecord.accessToken.refreshOn) {\n                refreshOn = TimeUtils.toDateFromSeconds(\n                    cacheRecord.accessToken.refreshOn\n                );\n            }\n        }\n\n        if (cacheRecord.appMetadata) {\n            familyId =\n                cacheRecord.appMetadata.familyId === THE_FAMILY_ID\n                    ? THE_FAMILY_ID\n                    : \"\";\n        }\n        const uid = idTokenClaims?.oid || idTokenClaims?.sub || \"\";\n        const tid = idTokenClaims?.tid || \"\";\n\n        // for hybrid + native bridge enablement, send back the native account Id\n        if (serverTokenResponse?.spa_accountid && !!cacheRecord.account) {\n            cacheRecord.account.nativeAccountId =\n                serverTokenResponse?.spa_accountid;\n        }\n\n        const accountInfo: AccountInfo | null = cacheRecord.account\n            ? updateAccountTenantProfileData(\n                  AccountEntity.getAccountInfo(cacheRecord.account),\n                  undefined, // tenantProfile optional\n                  idTokenClaims,\n                  cacheRecord.idToken?.secret\n              )\n            : null;\n\n        return {\n            authority: authority.canonicalAuthority,\n            uniqueId: uid,\n            tenantId: tid,\n            scopes: responseScopes,\n            account: accountInfo,\n            idToken: cacheRecord?.idToken?.secret || \"\",\n            idTokenClaims: idTokenClaims || {},\n            accessToken: accessToken,\n            fromCache: fromTokenCache,\n            expiresOn: expiresOn,\n            extExpiresOn: extExpiresOn,\n            refreshOn: refreshOn,\n            correlationId: request.correlationId,\n            requestId: requestId || Constants.EMPTY_STRING,\n            familyId: familyId,\n            tokenType:\n                cacheRecord.accessToken?.tokenType || Constants.EMPTY_STRING,\n            state: requestState\n                ? requestState.userRequestState\n                : Constants.EMPTY_STRING,\n            cloudGraphHostName:\n                cacheRecord.account?.cloudGraphHostName ||\n                Constants.EMPTY_STRING,\n            msGraphHost:\n                cacheRecord.account?.msGraphHost || Constants.EMPTY_STRING,\n            code: serverTokenResponse?.spa_code,\n            fromNativeBroker: false,\n        };\n    }\n}\n\nexport function buildAccountToCache(\n    cacheStorage: CacheManager,\n    authority: Authority,\n    homeAccountId: string,\n    base64Decode: (input: string) => string,\n    correlationId: string,\n    idTokenClaims?: TokenClaims,\n    clientInfo?: string,\n    environment?: string,\n    claimsTenantId?: string | null,\n    authCodePayload?: AuthorizationCodePayload,\n    nativeAccountId?: string,\n    logger?: Logger\n): AccountEntity {\n    logger?.verbose(\"setCachedAccount called\");\n\n    // Check if base account is already cached\n    const accountKeys = cacheStorage.getAccountKeys();\n    const baseAccountKey = accountKeys.find((accountKey: string) => {\n        return accountKey.startsWith(homeAccountId);\n    });\n\n    let cachedAccount: AccountEntity | null = null;\n    if (baseAccountKey) {\n        cachedAccount = cacheStorage.getAccount(baseAccountKey, correlationId);\n    }\n\n    const baseAccount =\n        cachedAccount ||\n        AccountEntity.createAccount(\n            {\n                homeAccountId,\n                idTokenClaims,\n                clientInfo,\n                environment,\n                cloudGraphHostName: authCodePayload?.cloud_graph_host_name,\n                msGraphHost: authCodePayload?.msgraph_host,\n                nativeAccountId: nativeAccountId,\n            },\n            authority,\n            base64Decode\n        );\n\n    const tenantProfiles = baseAccount.tenantProfiles || [];\n    const tenantId = claimsTenantId || baseAccount.realm;\n    if (\n        tenantId &&\n        !tenantProfiles.find((tenantProfile) => {\n            return tenantProfile.tenantId === tenantId;\n        })\n    ) {\n        const newTenantProfile = buildTenantProfile(\n            homeAccountId,\n            baseAccount.localAccountId,\n            tenantId,\n            idTokenClaims\n        );\n        tenantProfiles.push(newTenantProfile);\n    }\n    baseAccount.tenantProfiles = tenantProfiles;\n\n    return baseAccount;\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    ClientAssertionCallback,\n    ClientAssertionConfig,\n} from \"../account/ClientCredentials.js\";\n\nexport async function getClientAssertion(\n    clientAssertion: string | ClientAssertionCallback,\n    clientId: string,\n    tokenEndpoint?: string\n): Promise<string> {\n    if (typeof clientAssertion === \"string\") {\n        return clientAssertion;\n    } else {\n        const config: ClientAssertionConfig = {\n            clientId: clientId,\n            tokenEndpoint: tokenEndpoint,\n        };\n        return clientAssertion(config);\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { BaseClient } from \"./BaseClient.js\";\nimport { CommonAuthorizationCodeRequest } from \"../request/CommonAuthorizationCodeRequest.js\";\nimport { Authority } from \"../authority/Authority.js\";\nimport * as RequestParameterBuilder from \"../request/RequestParameterBuilder.js\";\nimport * as UrlUtils from \"../utils/UrlUtils.js\";\nimport {\n    GrantType,\n    AuthenticationScheme,\n    Separators,\n    HeaderNames,\n} from \"../utils/Constants.js\";\nimport * as AADServerParamKeys from \"../constants/AADServerParamKeys.js\";\nimport {\n    ClientConfiguration,\n    isOidcProtocolMode,\n} from \"../config/ClientConfiguration.js\";\nimport { ServerAuthorizationTokenResponse } from \"../response/ServerAuthorizationTokenResponse.js\";\nimport { NetworkResponse } from \"../network/NetworkResponse.js\";\nimport { ResponseHandler } from \"../response/ResponseHandler.js\";\nimport { AuthenticationResult } from \"../response/AuthenticationResult.js\";\nimport { StringUtils } from \"../utils/StringUtils.js\";\nimport {\n    ClientAuthErrorCodes,\n    createClientAuthError,\n} from \"../error/ClientAuthError.js\";\nimport { UrlString } from \"../url/UrlString.js\";\nimport { CommonEndSessionRequest } from \"../request/CommonEndSessionRequest.js\";\nimport { PopTokenGenerator } from \"../crypto/PopTokenGenerator.js\";\nimport { AuthorizationCodePayload } from \"../response/AuthorizationCodePayload.js\";\nimport * as TimeUtils from \"../utils/TimeUtils.js\";\nimport {\n    buildClientInfoFromHomeAccountId,\n    buildClientInfo,\n} from \"../account/ClientInfo.js\";\nimport { CcsCredentialType, CcsCredential } from \"../account/CcsCredential.js\";\nimport {\n    createClientConfigurationError,\n    ClientConfigurationErrorCodes,\n} from \"../error/ClientConfigurationError.js\";\nimport { IPerformanceClient } from \"../telemetry/performance/IPerformanceClient.js\";\nimport { PerformanceEvents } from \"../telemetry/performance/PerformanceEvent.js\";\nimport { invokeAsync } from \"../utils/FunctionWrappers.js\";\nimport { ClientAssertion } from \"../account/ClientCredentials.js\";\nimport { getClientAssertion } from \"../utils/ClientAssertionUtils.js\";\nimport { getRequestThumbprint } from \"../network/RequestThumbprint.js\";\n\n/**\n * Oauth2.0 Authorization Code client\n * @internal\n */\nexport class AuthorizationCodeClient extends BaseClient {\n    // Flag to indicate if client is for hybrid spa auth code redemption\n    protected includeRedirectUri: boolean = true;\n    private oidcDefaultScopes;\n\n    constructor(\n        configuration: ClientConfiguration,\n        performanceClient?: IPerformanceClient\n    ) {\n        super(configuration, performanceClient);\n        this.oidcDefaultScopes =\n            this.config.authOptions.authority.options.OIDCOptions?.defaultScopes;\n    }\n\n    /**\n     * API to acquire a token in exchange of 'authorization_code` acquired by the user in the first leg of the\n     * authorization_code_grant\n     * @param request\n     */\n    async acquireToken(\n        request: CommonAuthorizationCodeRequest,\n        authCodePayload?: AuthorizationCodePayload\n    ): Promise<AuthenticationResult> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.AuthClientAcquireToken,\n            request.correlationId\n        );\n\n        if (!request.code) {\n            throw createClientAuthError(\n                ClientAuthErrorCodes.requestCannotBeMade\n            );\n        }\n\n        const reqTimestamp = TimeUtils.nowSeconds();\n        const response = await invokeAsync(\n            this.executeTokenRequest.bind(this),\n            PerformanceEvents.AuthClientExecuteTokenRequest,\n            this.logger,\n            this.performanceClient,\n            request.correlationId\n        )(this.authority, request);\n\n        // Retrieve requestId from response headers\n        const requestId = response.headers?.[HeaderNames.X_MS_REQUEST_ID];\n\n        const responseHandler = new ResponseHandler(\n            this.config.authOptions.clientId,\n            this.cacheManager,\n            this.cryptoUtils,\n            this.logger,\n            this.config.serializableCache,\n            this.config.persistencePlugin,\n            this.performanceClient\n        );\n\n        // Validate response. This function throws a server error if an error is returned by the server.\n        responseHandler.validateTokenResponse(response.body);\n\n        return invokeAsync(\n            responseHandler.handleServerTokenResponse.bind(responseHandler),\n            PerformanceEvents.HandleServerTokenResponse,\n            this.logger,\n            this.performanceClient,\n            request.correlationId\n        )(\n            response.body,\n            this.authority,\n            reqTimestamp,\n            request,\n            authCodePayload,\n            undefined,\n            undefined,\n            undefined,\n            requestId\n        );\n    }\n\n    /**\n     * Used to log out the current user, and redirect the user to the postLogoutRedirectUri.\n     * Default behaviour is to redirect the user to `window.location.href`.\n     * @param authorityUri\n     */\n    getLogoutUri(logoutRequest: CommonEndSessionRequest): string {\n        // Throw error if logoutRequest is null/undefined\n        if (!logoutRequest) {\n            throw createClientConfigurationError(\n                ClientConfigurationErrorCodes.logoutRequestEmpty\n            );\n        }\n        const queryString = this.createLogoutUrlQueryString(logoutRequest);\n\n        // Construct logout URI\n        return UrlString.appendQueryString(\n            this.authority.endSessionEndpoint,\n            queryString\n        );\n    }\n\n    /**\n     * Executes POST request to token endpoint\n     * @param authority\n     * @param request\n     */\n    private async executeTokenRequest(\n        authority: Authority,\n        request: CommonAuthorizationCodeRequest\n    ): Promise<NetworkResponse<ServerAuthorizationTokenResponse>> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.AuthClientExecuteTokenRequest,\n            request.correlationId\n        );\n\n        const queryParametersString = this.createTokenQueryParameters(request);\n        const endpoint = UrlString.appendQueryString(\n            authority.tokenEndpoint,\n            queryParametersString\n        );\n\n        const requestBody = await invokeAsync(\n            this.createTokenRequestBody.bind(this),\n            PerformanceEvents.AuthClientCreateTokenRequestBody,\n            this.logger,\n            this.performanceClient,\n            request.correlationId\n        )(request);\n\n        let ccsCredential: CcsCredential | undefined = undefined;\n        if (request.clientInfo) {\n            try {\n                const clientInfo = buildClientInfo(\n                    request.clientInfo,\n                    this.cryptoUtils.base64Decode\n                );\n                ccsCredential = {\n                    credential: `${clientInfo.uid}${Separators.CLIENT_INFO_SEPARATOR}${clientInfo.utid}`,\n                    type: CcsCredentialType.HOME_ACCOUNT_ID,\n                };\n            } catch (e) {\n                this.logger.verbose(\n                    \"Could not parse client info for CCS Header: \" + e\n                );\n            }\n        }\n        const headers: Record<string, string> = this.createTokenRequestHeaders(\n            ccsCredential || request.ccsCredential\n        );\n\n        const thumbprint = getRequestThumbprint(\n            this.config.authOptions.clientId,\n            request\n        );\n\n        return invokeAsync(\n            this.executePostToTokenEndpoint.bind(this),\n            PerformanceEvents.AuthorizationCodeClientExecutePostToTokenEndpoint,\n            this.logger,\n            this.performanceClient,\n            request.correlationId\n        )(\n            endpoint,\n            requestBody,\n            headers,\n            thumbprint,\n            request.correlationId,\n            PerformanceEvents.AuthorizationCodeClientExecutePostToTokenEndpoint\n        );\n    }\n\n    /**\n     * Generates a map for all the params to be sent to the service\n     * @param request\n     */\n    private async createTokenRequestBody(\n        request: CommonAuthorizationCodeRequest\n    ): Promise<string> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.AuthClientCreateTokenRequestBody,\n            request.correlationId\n        );\n\n        const parameters = new Map<string, string>();\n\n        RequestParameterBuilder.addClientId(\n            parameters,\n            request.embeddedClientId ||\n                request.tokenBodyParameters?.[AADServerParamKeys.CLIENT_ID] ||\n                this.config.authOptions.clientId\n        );\n\n        /*\n         * For hybrid spa flow, there will be a code but no verifier\n         * In this scenario, don't include redirect uri as auth code will not be bound to redirect URI\n         */\n        if (!this.includeRedirectUri) {\n            // Just validate\n            if (!request.redirectUri) {\n                throw createClientConfigurationError(\n                    ClientConfigurationErrorCodes.redirectUriEmpty\n                );\n            }\n        } else {\n            // Validate and include redirect uri\n            RequestParameterBuilder.addRedirectUri(\n                parameters,\n                request.redirectUri\n            );\n        }\n\n        // Add scope array, parameter builder will add default scopes and dedupe\n        RequestParameterBuilder.addScopes(\n            parameters,\n            request.scopes,\n            true,\n            this.oidcDefaultScopes\n        );\n\n        // add code: user set, not validated\n        RequestParameterBuilder.addAuthorizationCode(parameters, request.code);\n\n        // Add library metadata\n        RequestParameterBuilder.addLibraryInfo(\n            parameters,\n            this.config.libraryInfo\n        );\n        RequestParameterBuilder.addApplicationTelemetry(\n            parameters,\n            this.config.telemetry.application\n        );\n        RequestParameterBuilder.addThrottling(parameters);\n\n        if (this.serverTelemetryManager && !isOidcProtocolMode(this.config)) {\n            RequestParameterBuilder.addServerTelemetry(\n                parameters,\n                this.serverTelemetryManager\n            );\n        }\n\n        // add code_verifier if passed\n        if (request.codeVerifier) {\n            RequestParameterBuilder.addCodeVerifier(\n                parameters,\n                request.codeVerifier\n            );\n        }\n\n        if (this.config.clientCredentials.clientSecret) {\n            RequestParameterBuilder.addClientSecret(\n                parameters,\n                this.config.clientCredentials.clientSecret\n            );\n        }\n\n        if (this.config.clientCredentials.clientAssertion) {\n            const clientAssertion: ClientAssertion =\n                this.config.clientCredentials.clientAssertion;\n\n            RequestParameterBuilder.addClientAssertion(\n                parameters,\n                await getClientAssertion(\n                    clientAssertion.assertion,\n                    this.config.authOptions.clientId,\n                    request.resourceRequestUri\n                )\n            );\n            RequestParameterBuilder.addClientAssertionType(\n                parameters,\n                clientAssertion.assertionType\n            );\n        }\n\n        RequestParameterBuilder.addGrantType(\n            parameters,\n            GrantType.AUTHORIZATION_CODE_GRANT\n        );\n        RequestParameterBuilder.addClientInfo(parameters);\n\n        if (request.authenticationScheme === AuthenticationScheme.POP) {\n            const popTokenGenerator = new PopTokenGenerator(\n                this.cryptoUtils,\n                this.performanceClient\n            );\n\n            let reqCnfData;\n            if (!request.popKid) {\n                const generatedReqCnfData = await invokeAsync(\n                    popTokenGenerator.generateCnf.bind(popTokenGenerator),\n                    PerformanceEvents.PopTokenGenerateCnf,\n                    this.logger,\n                    this.performanceClient,\n                    request.correlationId\n                )(request, this.logger);\n                reqCnfData = generatedReqCnfData.reqCnfString;\n            } else {\n                reqCnfData = this.cryptoUtils.encodeKid(request.popKid);\n            }\n\n            // SPA PoP requires full Base64Url encoded req_cnf string (unhashed)\n            RequestParameterBuilder.addPopToken(parameters, reqCnfData);\n        } else if (request.authenticationScheme === AuthenticationScheme.SSH) {\n            if (request.sshJwk) {\n                RequestParameterBuilder.addSshJwk(parameters, request.sshJwk);\n            } else {\n                throw createClientConfigurationError(\n                    ClientConfigurationErrorCodes.missingSshJwk\n                );\n            }\n        }\n\n        if (\n            !StringUtils.isEmptyObj(request.claims) ||\n            (this.config.authOptions.clientCapabilities &&\n                this.config.authOptions.clientCapabilities.length > 0)\n        ) {\n            RequestParameterBuilder.addClaims(\n                parameters,\n                request.claims,\n                this.config.authOptions.clientCapabilities\n            );\n        }\n\n        let ccsCred: CcsCredential | undefined = undefined;\n        if (request.clientInfo) {\n            try {\n                const clientInfo = buildClientInfo(\n                    request.clientInfo,\n                    this.cryptoUtils.base64Decode\n                );\n                ccsCred = {\n                    credential: `${clientInfo.uid}${Separators.CLIENT_INFO_SEPARATOR}${clientInfo.utid}`,\n                    type: CcsCredentialType.HOME_ACCOUNT_ID,\n                };\n            } catch (e) {\n                this.logger.verbose(\n                    \"Could not parse client info for CCS Header: \" + e\n                );\n            }\n        } else {\n            ccsCred = request.ccsCredential;\n        }\n\n        // Adds these as parameters in the request instead of headers to prevent CORS preflight request\n        if (this.config.systemOptions.preventCorsPreflight && ccsCred) {\n            switch (ccsCred.type) {\n                case CcsCredentialType.HOME_ACCOUNT_ID:\n                    try {\n                        const clientInfo = buildClientInfoFromHomeAccountId(\n                            ccsCred.credential\n                        );\n                        RequestParameterBuilder.addCcsOid(\n                            parameters,\n                            clientInfo\n                        );\n                    } catch (e) {\n                        this.logger.verbose(\n                            \"Could not parse home account ID for CCS Header: \" +\n                                e\n                        );\n                    }\n                    break;\n                case CcsCredentialType.UPN:\n                    RequestParameterBuilder.addCcsUpn(\n                        parameters,\n                        ccsCred.credential\n                    );\n                    break;\n            }\n        }\n\n        if (request.embeddedClientId) {\n            RequestParameterBuilder.addBrokerParameters(\n                parameters,\n                this.config.authOptions.clientId,\n                this.config.authOptions.redirectUri\n            );\n        }\n\n        if (request.tokenBodyParameters) {\n            RequestParameterBuilder.addExtraQueryParameters(\n                parameters,\n                request.tokenBodyParameters\n            );\n        }\n\n        // Add hybrid spa parameters if not already provided\n        if (\n            request.enableSpaAuthorizationCode &&\n            (!request.tokenBodyParameters ||\n                !request.tokenBodyParameters[\n                    AADServerParamKeys.RETURN_SPA_CODE\n                ])\n        ) {\n            RequestParameterBuilder.addExtraQueryParameters(parameters, {\n                [AADServerParamKeys.RETURN_SPA_CODE]: \"1\",\n            });\n        }\n\n        RequestParameterBuilder.instrumentBrokerParams(\n            parameters,\n            request.correlationId,\n            this.performanceClient\n        );\n        return UrlUtils.mapToQueryString(parameters);\n    }\n\n    /**\n     * This API validates the `EndSessionRequest` and creates a URL\n     * @param request\n     */\n    private createLogoutUrlQueryString(\n        request: CommonEndSessionRequest\n    ): string {\n        const parameters = new Map<string, string>();\n\n        if (request.postLogoutRedirectUri) {\n            RequestParameterBuilder.addPostLogoutRedirectUri(\n                parameters,\n                request.postLogoutRedirectUri\n            );\n        }\n\n        if (request.correlationId) {\n            RequestParameterBuilder.addCorrelationId(\n                parameters,\n                request.correlationId\n            );\n        }\n\n        if (request.idTokenHint) {\n            RequestParameterBuilder.addIdTokenHint(\n                parameters,\n                request.idTokenHint\n            );\n        }\n\n        if (request.state) {\n            RequestParameterBuilder.addState(parameters, request.state);\n        }\n\n        if (request.logoutHint) {\n            RequestParameterBuilder.addLogoutHint(\n                parameters,\n                request.logoutHint\n            );\n        }\n\n        if (request.extraQueryParameters) {\n            RequestParameterBuilder.addExtraQueryParameters(\n                parameters,\n                request.extraQueryParameters\n            );\n        }\n\n        if (this.config.authOptions.instanceAware) {\n            RequestParameterBuilder.addInstanceAware(parameters);\n        }\n\n        return UrlUtils.mapToQueryString(\n            parameters,\n            this.config.authOptions.encodeExtraQueryParams,\n            request.extraQueryParameters\n        );\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    ClientConfiguration,\n    isOidcProtocolMode,\n} from \"../config/ClientConfiguration.js\";\nimport { BaseClient } from \"./BaseClient.js\";\nimport { CommonRefreshTokenRequest } from \"../request/CommonRefreshTokenRequest.js\";\nimport { Authority } from \"../authority/Authority.js\";\nimport { ServerAuthorizationTokenResponse } from \"../response/ServerAuthorizationTokenResponse.js\";\nimport * as RequestParameterBuilder from \"../request/RequestParameterBuilder.js\";\nimport * as UrlUtils from \"../utils/UrlUtils.js\";\nimport {\n    GrantType,\n    AuthenticationScheme,\n    Errors,\n    HeaderNames,\n} from \"../utils/Constants.js\";\nimport * as AADServerParamKeys from \"../constants/AADServerParamKeys.js\";\nimport { ResponseHandler } from \"../response/ResponseHandler.js\";\nimport { AuthenticationResult } from \"../response/AuthenticationResult.js\";\nimport { PopTokenGenerator } from \"../crypto/PopTokenGenerator.js\";\nimport { StringUtils } from \"../utils/StringUtils.js\";\nimport { NetworkResponse } from \"../network/NetworkResponse.js\";\nimport { CommonSilentFlowRequest } from \"../request/CommonSilentFlowRequest.js\";\nimport {\n    createClientConfigurationError,\n    ClientConfigurationErrorCodes,\n} from \"../error/ClientConfigurationError.js\";\nimport {\n    createClientAuthError,\n    ClientAuthErrorCodes,\n} from \"../error/ClientAuthError.js\";\nimport { ServerError } from \"../error/ServerError.js\";\nimport * as TimeUtils from \"../utils/TimeUtils.js\";\nimport { UrlString } from \"../url/UrlString.js\";\nimport { CcsCredentialType } from \"../account/CcsCredential.js\";\nimport { buildClientInfoFromHomeAccountId } from \"../account/ClientInfo.js\";\nimport {\n    InteractionRequiredAuthError,\n    InteractionRequiredAuthErrorCodes,\n    createInteractionRequiredAuthError,\n} from \"../error/InteractionRequiredAuthError.js\";\nimport { PerformanceEvents } from \"../telemetry/performance/PerformanceEvent.js\";\nimport { IPerformanceClient } from \"../telemetry/performance/IPerformanceClient.js\";\nimport { invoke, invokeAsync } from \"../utils/FunctionWrappers.js\";\nimport { ClientAssertion } from \"../account/ClientCredentials.js\";\nimport { getClientAssertion } from \"../utils/ClientAssertionUtils.js\";\nimport { getRequestThumbprint } from \"../network/RequestThumbprint.js\";\n\nconst DEFAULT_REFRESH_TOKEN_EXPIRATION_OFFSET_SECONDS = 300; // 5 Minutes\n\n/**\n * OAuth2.0 refresh token client\n * @internal\n */\nexport class RefreshTokenClient extends BaseClient {\n    constructor(\n        configuration: ClientConfiguration,\n        performanceClient?: IPerformanceClient\n    ) {\n        super(configuration, performanceClient);\n    }\n    public async acquireToken(\n        request: CommonRefreshTokenRequest\n    ): Promise<AuthenticationResult> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.RefreshTokenClientAcquireToken,\n            request.correlationId\n        );\n\n        const reqTimestamp = TimeUtils.nowSeconds();\n        const response = await invokeAsync(\n            this.executeTokenRequest.bind(this),\n            PerformanceEvents.RefreshTokenClientExecuteTokenRequest,\n            this.logger,\n            this.performanceClient,\n            request.correlationId\n        )(request, this.authority);\n\n        // Retrieve requestId from response headers\n        const requestId = response.headers?.[HeaderNames.X_MS_REQUEST_ID];\n        const responseHandler = new ResponseHandler(\n            this.config.authOptions.clientId,\n            this.cacheManager,\n            this.cryptoUtils,\n            this.logger,\n            this.config.serializableCache,\n            this.config.persistencePlugin\n        );\n        responseHandler.validateTokenResponse(response.body);\n\n        return invokeAsync(\n            responseHandler.handleServerTokenResponse.bind(responseHandler),\n            PerformanceEvents.HandleServerTokenResponse,\n            this.logger,\n            this.performanceClient,\n            request.correlationId\n        )(\n            response.body,\n            this.authority,\n            reqTimestamp,\n            request,\n            undefined,\n            undefined,\n            true,\n            request.forceCache,\n            requestId\n        );\n    }\n\n    /**\n     * Gets cached refresh token and attaches to request, then calls acquireToken API\n     * @param request\n     */\n    public async acquireTokenByRefreshToken(\n        request: CommonSilentFlowRequest\n    ): Promise<AuthenticationResult> {\n        // Cannot renew token if no request object is given.\n        if (!request) {\n            throw createClientConfigurationError(\n                ClientConfigurationErrorCodes.tokenRequestEmpty\n            );\n        }\n\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.RefreshTokenClientAcquireTokenByRefreshToken,\n            request.correlationId\n        );\n\n        // We currently do not support silent flow for account === null use cases; This will be revisited for confidential flow usecases\n        if (!request.account) {\n            throw createClientAuthError(\n                ClientAuthErrorCodes.noAccountInSilentRequest\n            );\n        }\n\n        // try checking if FOCI is enabled for the given application\n        const isFOCI = this.cacheManager.isAppMetadataFOCI(\n            request.account.environment\n        );\n\n        // if the app is part of the family, retrive a Family refresh token if present and make a refreshTokenRequest\n        if (isFOCI) {\n            try {\n                return await invokeAsync(\n                    this.acquireTokenWithCachedRefreshToken.bind(this),\n                    PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,\n                    this.logger,\n                    this.performanceClient,\n                    request.correlationId\n                )(request, true);\n            } catch (e) {\n                const noFamilyRTInCache =\n                    e instanceof InteractionRequiredAuthError &&\n                    e.errorCode ===\n                        InteractionRequiredAuthErrorCodes.noTokensFound;\n                const clientMismatchErrorWithFamilyRT =\n                    e instanceof ServerError &&\n                    e.errorCode === Errors.INVALID_GRANT_ERROR &&\n                    e.subError === Errors.CLIENT_MISMATCH_ERROR;\n\n                // if family Refresh Token (FRT) cache acquisition fails or if client_mismatch error is seen with FRT, reattempt with application Refresh Token (ART)\n                if (noFamilyRTInCache || clientMismatchErrorWithFamilyRT) {\n                    return invokeAsync(\n                        this.acquireTokenWithCachedRefreshToken.bind(this),\n                        PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,\n                        this.logger,\n                        this.performanceClient,\n                        request.correlationId\n                    )(request, false);\n                    // throw in all other cases\n                } else {\n                    throw e;\n                }\n            }\n        }\n        // fall back to application refresh token acquisition\n        return invokeAsync(\n            this.acquireTokenWithCachedRefreshToken.bind(this),\n            PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,\n            this.logger,\n            this.performanceClient,\n            request.correlationId\n        )(request, false);\n    }\n\n    /**\n     * makes a network call to acquire tokens by exchanging RefreshToken available in userCache; throws if refresh token is not cached\n     * @param request\n     */\n    private async acquireTokenWithCachedRefreshToken(\n        request: CommonSilentFlowRequest,\n        foci: boolean\n    ) {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.RefreshTokenClientAcquireTokenWithCachedRefreshToken,\n            request.correlationId\n        );\n\n        // fetches family RT or application RT based on FOCI value\n        const refreshToken = invoke(\n            this.cacheManager.getRefreshToken.bind(this.cacheManager),\n            PerformanceEvents.CacheManagerGetRefreshToken,\n            this.logger,\n            this.performanceClient,\n            request.correlationId\n        )(\n            request.account,\n            foci,\n            request.correlationId,\n            undefined,\n            this.performanceClient\n        );\n\n        if (!refreshToken) {\n            throw createInteractionRequiredAuthError(\n                InteractionRequiredAuthErrorCodes.noTokensFound\n            );\n        }\n\n        if (\n            refreshToken.expiresOn &&\n            TimeUtils.isTokenExpired(\n                refreshToken.expiresOn,\n                request.refreshTokenExpirationOffsetSeconds ||\n                    DEFAULT_REFRESH_TOKEN_EXPIRATION_OFFSET_SECONDS\n            )\n        ) {\n            this.performanceClient?.addFields(\n                { rtExpiresOnMs: Number(refreshToken.expiresOn) },\n                request.correlationId\n            );\n            throw createInteractionRequiredAuthError(\n                InteractionRequiredAuthErrorCodes.refreshTokenExpired\n            );\n        }\n        // attach cached RT size to the current measurement\n\n        const refreshTokenRequest: CommonRefreshTokenRequest = {\n            ...request,\n            refreshToken: refreshToken.secret,\n            authenticationScheme:\n                request.authenticationScheme || AuthenticationScheme.BEARER,\n            ccsCredential: {\n                credential: request.account.homeAccountId,\n                type: CcsCredentialType.HOME_ACCOUNT_ID,\n            },\n        };\n\n        try {\n            return await invokeAsync(\n                this.acquireToken.bind(this),\n                PerformanceEvents.RefreshTokenClientAcquireToken,\n                this.logger,\n                this.performanceClient,\n                request.correlationId\n            )(refreshTokenRequest);\n        } catch (e) {\n            if (e instanceof InteractionRequiredAuthError) {\n                this.performanceClient?.addFields(\n                    { rtExpiresOnMs: Number(refreshToken.expiresOn) },\n                    request.correlationId\n                );\n\n                if (e.subError === InteractionRequiredAuthErrorCodes.badToken) {\n                    // Remove bad refresh token from cache\n                    this.logger.verbose(\n                        \"acquireTokenWithRefreshToken: bad refresh token, removing from cache\"\n                    );\n                    const badRefreshTokenKey =\n                        this.cacheManager.generateCredentialKey(refreshToken);\n                    this.cacheManager.removeRefreshToken(\n                        badRefreshTokenKey,\n                        request.correlationId\n                    );\n                }\n            }\n\n            throw e;\n        }\n    }\n\n    /**\n     * Constructs the network message and makes a NW call to the underlying secure token service\n     * @param request\n     * @param authority\n     */\n    private async executeTokenRequest(\n        request: CommonRefreshTokenRequest,\n        authority: Authority\n    ): Promise<NetworkResponse<ServerAuthorizationTokenResponse>> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.RefreshTokenClientExecuteTokenRequest,\n            request.correlationId\n        );\n\n        const queryParametersString = this.createTokenQueryParameters(request);\n        const endpoint = UrlString.appendQueryString(\n            authority.tokenEndpoint,\n            queryParametersString\n        );\n\n        const requestBody = await invokeAsync(\n            this.createTokenRequestBody.bind(this),\n            PerformanceEvents.RefreshTokenClientCreateTokenRequestBody,\n            this.logger,\n            this.performanceClient,\n            request.correlationId\n        )(request);\n        const headers: Record<string, string> = this.createTokenRequestHeaders(\n            request.ccsCredential\n        );\n\n        const thumbprint = getRequestThumbprint(\n            this.config.authOptions.clientId,\n            request\n        );\n\n        return invokeAsync(\n            this.executePostToTokenEndpoint.bind(this),\n            PerformanceEvents.RefreshTokenClientExecutePostToTokenEndpoint,\n            this.logger,\n            this.performanceClient,\n            request.correlationId\n        )(\n            endpoint,\n            requestBody,\n            headers,\n            thumbprint,\n            request.correlationId,\n            PerformanceEvents.RefreshTokenClientExecutePostToTokenEndpoint\n        );\n    }\n\n    /**\n     * Helper function to create the token request body\n     * @param request\n     */\n    private async createTokenRequestBody(\n        request: CommonRefreshTokenRequest\n    ): Promise<string> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.RefreshTokenClientCreateTokenRequestBody,\n            request.correlationId\n        );\n\n        const parameters = new Map<string, string>();\n\n        RequestParameterBuilder.addClientId(\n            parameters,\n            request.embeddedClientId ||\n                request.tokenBodyParameters?.[AADServerParamKeys.CLIENT_ID] ||\n                this.config.authOptions.clientId\n        );\n\n        if (request.redirectUri) {\n            RequestParameterBuilder.addRedirectUri(\n                parameters,\n                request.redirectUri\n            );\n        }\n\n        RequestParameterBuilder.addScopes(\n            parameters,\n            request.scopes,\n            true,\n            this.config.authOptions.authority.options.OIDCOptions?.defaultScopes\n        );\n\n        RequestParameterBuilder.addGrantType(\n            parameters,\n            GrantType.REFRESH_TOKEN_GRANT\n        );\n\n        RequestParameterBuilder.addClientInfo(parameters);\n\n        RequestParameterBuilder.addLibraryInfo(\n            parameters,\n            this.config.libraryInfo\n        );\n        RequestParameterBuilder.addApplicationTelemetry(\n            parameters,\n            this.config.telemetry.application\n        );\n        RequestParameterBuilder.addThrottling(parameters);\n\n        if (this.serverTelemetryManager && !isOidcProtocolMode(this.config)) {\n            RequestParameterBuilder.addServerTelemetry(\n                parameters,\n                this.serverTelemetryManager\n            );\n        }\n\n        RequestParameterBuilder.addRefreshToken(\n            parameters,\n            request.refreshToken\n        );\n\n        if (this.config.clientCredentials.clientSecret) {\n            RequestParameterBuilder.addClientSecret(\n                parameters,\n                this.config.clientCredentials.clientSecret\n            );\n        }\n\n        if (this.config.clientCredentials.clientAssertion) {\n            const clientAssertion: ClientAssertion =\n                this.config.clientCredentials.clientAssertion;\n\n            RequestParameterBuilder.addClientAssertion(\n                parameters,\n                await getClientAssertion(\n                    clientAssertion.assertion,\n                    this.config.authOptions.clientId,\n                    request.resourceRequestUri\n                )\n            );\n            RequestParameterBuilder.addClientAssertionType(\n                parameters,\n                clientAssertion.assertionType\n            );\n        }\n\n        if (request.authenticationScheme === AuthenticationScheme.POP) {\n            const popTokenGenerator = new PopTokenGenerator(\n                this.cryptoUtils,\n                this.performanceClient\n            );\n\n            let reqCnfData;\n            if (!request.popKid) {\n                const generatedReqCnfData = await invokeAsync(\n                    popTokenGenerator.generateCnf.bind(popTokenGenerator),\n                    PerformanceEvents.PopTokenGenerateCnf,\n                    this.logger,\n                    this.performanceClient,\n                    request.correlationId\n                )(request, this.logger);\n\n                reqCnfData = generatedReqCnfData.reqCnfString;\n            } else {\n                reqCnfData = this.cryptoUtils.encodeKid(request.popKid);\n            }\n\n            // SPA PoP requires full Base64Url encoded req_cnf string (unhashed)\n            RequestParameterBuilder.addPopToken(parameters, reqCnfData);\n        } else if (request.authenticationScheme === AuthenticationScheme.SSH) {\n            if (request.sshJwk) {\n                RequestParameterBuilder.addSshJwk(parameters, request.sshJwk);\n            } else {\n                throw createClientConfigurationError(\n                    ClientConfigurationErrorCodes.missingSshJwk\n                );\n            }\n        }\n\n        if (\n            !StringUtils.isEmptyObj(request.claims) ||\n            (this.config.authOptions.clientCapabilities &&\n                this.config.authOptions.clientCapabilities.length > 0)\n        ) {\n            RequestParameterBuilder.addClaims(\n                parameters,\n                request.claims,\n                this.config.authOptions.clientCapabilities\n            );\n        }\n\n        if (\n            this.config.systemOptions.preventCorsPreflight &&\n            request.ccsCredential\n        ) {\n            switch (request.ccsCredential.type) {\n                case CcsCredentialType.HOME_ACCOUNT_ID:\n                    try {\n                        const clientInfo = buildClientInfoFromHomeAccountId(\n                            request.ccsCredential.credential\n                        );\n                        RequestParameterBuilder.addCcsOid(\n                            parameters,\n                            clientInfo\n                        );\n                    } catch (e) {\n                        this.logger.verbose(\n                            \"Could not parse home account ID for CCS Header: \" +\n                                e\n                        );\n                    }\n                    break;\n                case CcsCredentialType.UPN:\n                    RequestParameterBuilder.addCcsUpn(\n                        parameters,\n                        request.ccsCredential.credential\n                    );\n                    break;\n            }\n        }\n\n        if (request.embeddedClientId) {\n            RequestParameterBuilder.addBrokerParameters(\n                parameters,\n                this.config.authOptions.clientId,\n                this.config.authOptions.redirectUri\n            );\n        }\n\n        if (request.tokenBodyParameters) {\n            RequestParameterBuilder.addExtraQueryParameters(\n                parameters,\n                request.tokenBodyParameters\n            );\n        }\n\n        RequestParameterBuilder.instrumentBrokerParams(\n            parameters,\n            request.correlationId,\n            this.performanceClient\n        );\n        return UrlUtils.mapToQueryString(parameters);\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { BaseClient } from \"./BaseClient.js\";\nimport { ClientConfiguration } from \"../config/ClientConfiguration.js\";\nimport { CommonSilentFlowRequest } from \"../request/CommonSilentFlowRequest.js\";\nimport { AuthenticationResult } from \"../response/AuthenticationResult.js\";\nimport * as TimeUtils from \"../utils/TimeUtils.js\";\nimport {\n    ClientAuthErrorCodes,\n    createClientAuthError,\n} from \"../error/ClientAuthError.js\";\nimport { ResponseHandler } from \"../response/ResponseHandler.js\";\nimport { CacheRecord } from \"../cache/entities/CacheRecord.js\";\nimport { CacheOutcome } from \"../utils/Constants.js\";\nimport { IPerformanceClient } from \"../telemetry/performance/IPerformanceClient.js\";\nimport { StringUtils } from \"../utils/StringUtils.js\";\nimport { checkMaxAge, extractTokenClaims } from \"../account/AuthToken.js\";\nimport { TokenClaims } from \"../account/TokenClaims.js\";\nimport { PerformanceEvents } from \"../telemetry/performance/PerformanceEvent.js\";\nimport { invokeAsync } from \"../utils/FunctionWrappers.js\";\nimport { getTenantFromAuthorityString } from \"../authority/Authority.js\";\n\n/** @internal */\nexport class SilentFlowClient extends BaseClient {\n    constructor(\n        configuration: ClientConfiguration,\n        performanceClient?: IPerformanceClient\n    ) {\n        super(configuration, performanceClient);\n    }\n\n    /**\n     * Retrieves token from cache or throws an error if it must be refreshed.\n     * @param request\n     */\n    async acquireCachedToken(\n        request: CommonSilentFlowRequest\n    ): Promise<[AuthenticationResult, CacheOutcome]> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.SilentFlowClientAcquireCachedToken,\n            request.correlationId\n        );\n        let lastCacheOutcome: CacheOutcome = CacheOutcome.NOT_APPLICABLE;\n\n        if (\n            request.forceRefresh ||\n            (!this.config.cacheOptions.claimsBasedCachingEnabled &&\n                !StringUtils.isEmptyObj(request.claims))\n        ) {\n            // Must refresh due to present force_refresh flag.\n            this.setCacheOutcome(\n                CacheOutcome.FORCE_REFRESH_OR_CLAIMS,\n                request.correlationId\n            );\n            throw createClientAuthError(\n                ClientAuthErrorCodes.tokenRefreshRequired\n            );\n        }\n\n        // We currently do not support silent flow for account === null use cases; This will be revisited for confidential flow usecases\n        if (!request.account) {\n            throw createClientAuthError(\n                ClientAuthErrorCodes.noAccountInSilentRequest\n            );\n        }\n\n        const requestTenantId =\n            request.account.tenantId ||\n            getTenantFromAuthorityString(request.authority);\n        const tokenKeys = this.cacheManager.getTokenKeys();\n        const cachedAccessToken = this.cacheManager.getAccessToken(\n            request.account,\n            request,\n            tokenKeys,\n            requestTenantId\n        );\n\n        if (!cachedAccessToken) {\n            // must refresh due to non-existent access_token\n            this.setCacheOutcome(\n                CacheOutcome.NO_CACHED_ACCESS_TOKEN,\n                request.correlationId\n            );\n            throw createClientAuthError(\n                ClientAuthErrorCodes.tokenRefreshRequired\n            );\n        } else if (\n            TimeUtils.wasClockTurnedBack(cachedAccessToken.cachedAt) ||\n            TimeUtils.isTokenExpired(\n                cachedAccessToken.expiresOn,\n                this.config.systemOptions.tokenRenewalOffsetSeconds\n            )\n        ) {\n            // must refresh due to the expires_in value\n            this.setCacheOutcome(\n                CacheOutcome.CACHED_ACCESS_TOKEN_EXPIRED,\n                request.correlationId\n            );\n            throw createClientAuthError(\n                ClientAuthErrorCodes.tokenRefreshRequired\n            );\n        } else if (\n            cachedAccessToken.refreshOn &&\n            TimeUtils.isTokenExpired(cachedAccessToken.refreshOn, 0)\n        ) {\n            // must refresh (in the background) due to the refresh_in value\n            lastCacheOutcome = CacheOutcome.PROACTIVELY_REFRESHED;\n\n            // don't throw ClientAuthError.createRefreshRequiredError(), return cached token instead\n        }\n\n        const environment =\n            request.authority || this.authority.getPreferredCache();\n        const cacheRecord: CacheRecord = {\n            account: this.cacheManager.getAccount(\n                this.cacheManager.generateAccountKey(request.account),\n                request.correlationId\n            ),\n            accessToken: cachedAccessToken,\n            idToken: this.cacheManager.getIdToken(\n                request.account,\n                request.correlationId,\n                tokenKeys,\n                requestTenantId,\n                this.performanceClient\n            ),\n            refreshToken: null,\n            appMetadata:\n                this.cacheManager.readAppMetadataFromCache(environment),\n        };\n\n        this.setCacheOutcome(lastCacheOutcome, request.correlationId);\n\n        if (this.config.serverTelemetryManager) {\n            this.config.serverTelemetryManager.incrementCacheHits();\n        }\n\n        return [\n            await invokeAsync(\n                this.generateResultFromCacheRecord.bind(this),\n                PerformanceEvents.SilentFlowClientGenerateResultFromCacheRecord,\n                this.logger,\n                this.performanceClient,\n                request.correlationId\n            )(cacheRecord, request),\n            lastCacheOutcome,\n        ];\n    }\n\n    private setCacheOutcome(\n        cacheOutcome: CacheOutcome,\n        correlationId: string\n    ): void {\n        this.serverTelemetryManager?.setCacheOutcome(cacheOutcome);\n        this.performanceClient?.addFields(\n            {\n                cacheOutcome: cacheOutcome,\n            },\n            correlationId\n        );\n        if (cacheOutcome !== CacheOutcome.NOT_APPLICABLE) {\n            this.logger.info(\n                `Token refresh is required due to cache outcome: ${cacheOutcome}`\n            );\n        }\n    }\n\n    /**\n     * Helper function to build response object from the CacheRecord\n     * @param cacheRecord\n     */\n    private async generateResultFromCacheRecord(\n        cacheRecord: CacheRecord,\n        request: CommonSilentFlowRequest\n    ): Promise<AuthenticationResult> {\n        this.performanceClient?.addQueueMeasurement(\n            PerformanceEvents.SilentFlowClientGenerateResultFromCacheRecord,\n            request.correlationId\n        );\n        let idTokenClaims: TokenClaims | undefined;\n        if (cacheRecord.idToken) {\n            idTokenClaims = extractTokenClaims(\n                cacheRecord.idToken.secret,\n                this.config.cryptoInterface.base64Decode\n            );\n        }\n\n        // token max_age check\n        if (request.maxAge || request.maxAge === 0) {\n            const authTime = idTokenClaims?.auth_time;\n            if (!authTime) {\n                throw createClientAuthError(\n                    ClientAuthErrorCodes.authTimeNotFound\n                );\n            }\n\n            checkMaxAge(authTime, request.maxAge);\n        }\n\n        return ResponseHandler.generateAuthenticationResult(\n            this.cryptoUtils,\n            this.authority,\n            cacheRecord,\n            true,\n            request,\n            idTokenClaims\n        );\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { CommonAuthorizationUrlRequest } from \"../request/CommonAuthorizationUrlRequest.js\";\nimport * as RequestParameterBuilder from \"../request/RequestParameterBuilder.js\";\nimport { IPerformanceClient } from \"../telemetry/performance/IPerformanceClient.js\";\nimport * as AADServerParamKeys from \"../constants/AADServerParamKeys.js\";\nimport { AuthOptions } from \"../config/ClientConfiguration.js\";\nimport { PromptValue } from \"../utils/Constants.js\";\nimport { AccountInfo } from \"../account/AccountInfo.js\";\nimport { Logger } from \"../logger/Logger.js\";\nimport { buildClientInfoFromHomeAccountId } from \"../account/ClientInfo.js\";\nimport { Authority } from \"../authority/Authority.js\";\nimport { mapToQueryString } from \"../utils/UrlUtils.js\";\nimport { UrlString } from \"../url/UrlString.js\";\nimport { AuthorizationCodePayload } from \"../response/AuthorizationCodePayload.js\";\nimport { AuthorizeResponse } from \"../response/AuthorizeResponse.js\";\nimport {\n    ClientAuthErrorCodes,\n    createClientAuthError,\n} from \"../error/ClientAuthError.js\";\nimport {\n    InteractionRequiredAuthError,\n    isInteractionRequiredError,\n} from \"../error/InteractionRequiredAuthError.js\";\nimport { ServerError } from \"../error/ServerError.js\";\nimport { StringDict } from \"../utils/MsalTypes.js\";\n\n/**\n * Returns map of parameters that are applicable to all calls to /authorize whether using PKCE or EAR\n * @param config\n * @param request\n * @param logger\n * @param performanceClient\n * @returns\n */\nexport function getStandardAuthorizeRequestParameters(\n    authOptions: AuthOptions,\n    request: CommonAuthorizationUrlRequest,\n    logger: Logger,\n    performanceClient?: IPerformanceClient\n): Map<string, string> {\n    // generate the correlationId if not set by the user and add\n    const correlationId = request.correlationId;\n\n    const parameters = new Map<string, string>();\n\n    RequestParameterBuilder.addClientId(\n        parameters,\n        request.embeddedClientId ||\n            request.extraQueryParameters?.[AADServerParamKeys.CLIENT_ID] ||\n            authOptions.clientId\n    );\n\n    const requestScopes = [\n        ...(request.scopes || []),\n        ...(request.extraScopesToConsent || []),\n    ];\n    RequestParameterBuilder.addScopes(\n        parameters,\n        requestScopes,\n        true,\n        authOptions.authority.options.OIDCOptions?.defaultScopes\n    );\n\n    RequestParameterBuilder.addRedirectUri(parameters, request.redirectUri);\n\n    RequestParameterBuilder.addCorrelationId(parameters, correlationId);\n\n    // add response_mode. If not passed in it defaults to query.\n    RequestParameterBuilder.addResponseMode(parameters, request.responseMode);\n\n    // add client_info=1\n    RequestParameterBuilder.addClientInfo(parameters);\n\n    if (request.prompt) {\n        RequestParameterBuilder.addPrompt(parameters, request.prompt);\n        performanceClient?.addFields({ prompt: request.prompt }, correlationId);\n    }\n\n    if (request.domainHint) {\n        RequestParameterBuilder.addDomainHint(parameters, request.domainHint);\n        performanceClient?.addFields(\n            { domainHintFromRequest: true },\n            correlationId\n        );\n    }\n\n    // Add sid or loginHint with preference for login_hint claim (in request) -> sid -> loginHint (upn/email) -> username of AccountInfo object\n    if (request.prompt !== PromptValue.SELECT_ACCOUNT) {\n        // AAD will throw if prompt=select_account is passed with an account hint\n        if (request.sid && request.prompt === PromptValue.NONE) {\n            // SessionID is only used in silent calls\n            logger.verbose(\n                \"createAuthCodeUrlQueryString: Prompt is none, adding sid from request\"\n            );\n            RequestParameterBuilder.addSid(parameters, request.sid);\n            performanceClient?.addFields(\n                { sidFromRequest: true },\n                correlationId\n            );\n        } else if (request.account) {\n            const accountSid = extractAccountSid(request.account);\n            let accountLoginHintClaim = extractLoginHint(request.account);\n\n            if (accountLoginHintClaim && request.domainHint) {\n                logger.warning(\n                    `AuthorizationCodeClient.createAuthCodeUrlQueryString: \"domainHint\" param is set, skipping opaque \"login_hint\" claim. Please consider not passing domainHint`\n                );\n                accountLoginHintClaim = null;\n            }\n\n            // If login_hint claim is present, use it over sid/username\n            if (accountLoginHintClaim) {\n                logger.verbose(\n                    \"createAuthCodeUrlQueryString: login_hint claim present on account\"\n                );\n                RequestParameterBuilder.addLoginHint(\n                    parameters,\n                    accountLoginHintClaim\n                );\n                performanceClient?.addFields(\n                    { loginHintFromClaim: true },\n                    correlationId\n                );\n                try {\n                    const clientInfo = buildClientInfoFromHomeAccountId(\n                        request.account.homeAccountId\n                    );\n                    RequestParameterBuilder.addCcsOid(parameters, clientInfo);\n                } catch (e) {\n                    logger.verbose(\n                        \"createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header\"\n                    );\n                }\n            } else if (accountSid && request.prompt === PromptValue.NONE) {\n                /*\n                 * If account and loginHint are provided, we will check account first for sid before adding loginHint\n                 * SessionId is only used in silent calls\n                 */\n                logger.verbose(\n                    \"createAuthCodeUrlQueryString: Prompt is none, adding sid from account\"\n                );\n                RequestParameterBuilder.addSid(parameters, accountSid);\n                performanceClient?.addFields(\n                    { sidFromClaim: true },\n                    correlationId\n                );\n                try {\n                    const clientInfo = buildClientInfoFromHomeAccountId(\n                        request.account.homeAccountId\n                    );\n                    RequestParameterBuilder.addCcsOid(parameters, clientInfo);\n                } catch (e) {\n                    logger.verbose(\n                        \"createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header\"\n                    );\n                }\n            } else if (request.loginHint) {\n                logger.verbose(\n                    \"createAuthCodeUrlQueryString: Adding login_hint from request\"\n                );\n                RequestParameterBuilder.addLoginHint(\n                    parameters,\n                    request.loginHint\n                );\n                RequestParameterBuilder.addCcsUpn(\n                    parameters,\n                    request.loginHint\n                );\n                performanceClient?.addFields(\n                    { loginHintFromRequest: true },\n                    correlationId\n                );\n            } else if (request.account.username) {\n                // Fallback to account username if provided\n                logger.verbose(\n                    \"createAuthCodeUrlQueryString: Adding login_hint from account\"\n                );\n                RequestParameterBuilder.addLoginHint(\n                    parameters,\n                    request.account.username\n                );\n                performanceClient?.addFields(\n                    { loginHintFromUpn: true },\n                    correlationId\n                );\n                try {\n                    const clientInfo = buildClientInfoFromHomeAccountId(\n                        request.account.homeAccountId\n                    );\n                    RequestParameterBuilder.addCcsOid(parameters, clientInfo);\n                } catch (e) {\n                    logger.verbose(\n                        \"createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header\"\n                    );\n                }\n            }\n        } else if (request.loginHint) {\n            logger.verbose(\n                \"createAuthCodeUrlQueryString: No account, adding login_hint from request\"\n            );\n            RequestParameterBuilder.addLoginHint(parameters, request.loginHint);\n            RequestParameterBuilder.addCcsUpn(parameters, request.loginHint);\n            performanceClient?.addFields(\n                { loginHintFromRequest: true },\n                correlationId\n            );\n        }\n    } else {\n        logger.verbose(\n            \"createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints\"\n        );\n    }\n\n    if (request.nonce) {\n        RequestParameterBuilder.addNonce(parameters, request.nonce);\n    }\n\n    if (request.state) {\n        RequestParameterBuilder.addState(parameters, request.state);\n    }\n\n    if (\n        request.claims ||\n        (authOptions.clientCapabilities &&\n            authOptions.clientCapabilities.length > 0)\n    ) {\n        RequestParameterBuilder.addClaims(\n            parameters,\n            request.claims,\n            authOptions.clientCapabilities\n        );\n    }\n\n    if (request.embeddedClientId) {\n        RequestParameterBuilder.addBrokerParameters(\n            parameters,\n            authOptions.clientId,\n            authOptions.redirectUri\n        );\n    }\n\n    // If extraQueryParameters includes instance_aware its value will be added when extraQueryParameters are added\n    if (\n        authOptions.instanceAware &&\n        (!request.extraQueryParameters ||\n            !Object.keys(request.extraQueryParameters).includes(\n                AADServerParamKeys.INSTANCE_AWARE\n            ))\n    ) {\n        RequestParameterBuilder.addInstanceAware(parameters);\n    }\n\n    return parameters;\n}\n\n/**\n * Returns authorize endpoint with given request parameters in the query string\n * @param authority\n * @param requestParameters\n * @returns\n */\nexport function getAuthorizeUrl(\n    authority: Authority,\n    requestParameters: Map<string, string>,\n    encodeParams?: boolean,\n    extraQueryParameters?: StringDict | undefined\n): string {\n    const queryString = mapToQueryString(\n        requestParameters,\n        encodeParams,\n        extraQueryParameters\n    );\n    return UrlString.appendQueryString(\n        authority.authorizationEndpoint,\n        queryString\n    );\n}\n\n/**\n * Handles the hash fragment response from public client code request. Returns a code response used by\n * the client to exchange for a token in acquireToken.\n * @param serverParams\n * @param cachedState\n */\nexport function getAuthorizationCodePayload(\n    serverParams: AuthorizeResponse,\n    cachedState: string\n): AuthorizationCodePayload {\n    // Get code response\n    validateAuthorizationResponse(serverParams, cachedState);\n\n    // throw when there is no auth code in the response\n    if (!serverParams.code) {\n        throw createClientAuthError(\n            ClientAuthErrorCodes.authorizationCodeMissingFromServerResponse\n        );\n    }\n\n    return serverParams as AuthorizationCodePayload;\n}\n\n/**\n * Function which validates server authorization code response.\n * @param serverResponseHash\n * @param requestState\n */\nexport function validateAuthorizationResponse(\n    serverResponse: AuthorizeResponse,\n    requestState: string\n): void {\n    if (!serverResponse.state || !requestState) {\n        throw serverResponse.state\n            ? createClientAuthError(\n                  ClientAuthErrorCodes.stateNotFound,\n                  \"Cached State\"\n              )\n            : createClientAuthError(\n                  ClientAuthErrorCodes.stateNotFound,\n                  \"Server State\"\n              );\n    }\n\n    let decodedServerResponseState: string;\n    let decodedRequestState: string;\n\n    try {\n        decodedServerResponseState = decodeURIComponent(serverResponse.state);\n    } catch (e) {\n        throw createClientAuthError(\n            ClientAuthErrorCodes.invalidState,\n            serverResponse.state\n        );\n    }\n\n    try {\n        decodedRequestState = decodeURIComponent(requestState);\n    } catch (e) {\n        throw createClientAuthError(\n            ClientAuthErrorCodes.invalidState,\n            serverResponse.state\n        );\n    }\n\n    if (decodedServerResponseState !== decodedRequestState) {\n        throw createClientAuthError(ClientAuthErrorCodes.stateMismatch);\n    }\n\n    // Check for error\n    if (\n        serverResponse.error ||\n        serverResponse.error_description ||\n        serverResponse.suberror\n    ) {\n        const serverErrorNo = parseServerErrorNo(serverResponse);\n        if (\n            isInteractionRequiredError(\n                serverResponse.error,\n                serverResponse.error_description,\n                serverResponse.suberror\n            )\n        ) {\n            throw new InteractionRequiredAuthError(\n                serverResponse.error || \"\",\n                serverResponse.error_description,\n                serverResponse.suberror,\n                serverResponse.timestamp || \"\",\n                serverResponse.trace_id || \"\",\n                serverResponse.correlation_id || \"\",\n                serverResponse.claims || \"\",\n                serverErrorNo\n            );\n        }\n\n        throw new ServerError(\n            serverResponse.error || \"\",\n            serverResponse.error_description,\n            serverResponse.suberror,\n            serverErrorNo\n        );\n    }\n}\n\n/**\n * Get server error No from the error_uri\n * @param serverResponse\n * @returns\n */\nfunction parseServerErrorNo(\n    serverResponse: AuthorizeResponse\n): string | undefined {\n    const errorCodePrefix = \"code=\";\n    const errorCodePrefixIndex =\n        serverResponse.error_uri?.lastIndexOf(errorCodePrefix);\n    return errorCodePrefixIndex && errorCodePrefixIndex >= 0\n        ? serverResponse.error_uri?.substring(\n              errorCodePrefixIndex + errorCodePrefix.length\n          )\n        : undefined;\n}\n\n/**\n * Helper to get sid from account. Returns null if idTokenClaims are not present or sid is not present.\n * @param account\n */\nfunction extractAccountSid(account: AccountInfo): string | null {\n    return account.idTokenClaims?.sid || null;\n}\n\nfunction extractLoginHint(account: AccountInfo): string | null {\n    return account.loginHint || account.idTokenClaims?.login_hint || null;\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    SERVER_TELEM_CONSTANTS,\n    Separators,\n    CacheOutcome,\n    Constants,\n    RegionDiscoverySources,\n    RegionDiscoveryOutcomes,\n} from \"../../utils/Constants.js\";\nimport { CacheManager } from \"../../cache/CacheManager.js\";\nimport { AuthError } from \"../../error/AuthError.js\";\nimport { ServerTelemetryRequest } from \"./ServerTelemetryRequest.js\";\nimport { ServerTelemetryEntity } from \"../../cache/entities/ServerTelemetryEntity.js\";\nimport { RegionDiscoveryMetadata } from \"../../authority/RegionDiscoveryMetadata.js\";\n\nconst skuGroupSeparator = \",\";\nconst skuValueSeparator = \"|\";\n\ntype SkuParams = {\n    libraryName?: string;\n    libraryVersion?: string;\n    extensionName?: string;\n    extensionVersion?: string;\n    skus?: string;\n};\n\nfunction makeExtraSkuString(params: SkuParams): string {\n    const {\n        skus,\n        libraryName,\n        libraryVersion,\n        extensionName,\n        extensionVersion,\n    } = params;\n    const skuMap: Map<number, (string | undefined)[]> = new Map([\n        [0, [libraryName, libraryVersion]],\n        [2, [extensionName, extensionVersion]],\n    ]);\n    let skuArr: string[] = [];\n\n    if (skus?.length) {\n        skuArr = skus.split(skuGroupSeparator);\n\n        // Ignore invalid input sku param\n        if (skuArr.length < 4) {\n            return skus;\n        }\n    } else {\n        skuArr = Array.from({ length: 4 }, () => skuValueSeparator);\n    }\n\n    skuMap.forEach((value, key) => {\n        if (value.length === 2 && value[0]?.length && value[1]?.length) {\n            setSku({\n                skuArr,\n                index: key,\n                skuName: value[0],\n                skuVersion: value[1],\n            });\n        }\n    });\n\n    return skuArr.join(skuGroupSeparator);\n}\n\nfunction setSku(params: {\n    skuArr: string[];\n    index: number;\n    skuName: string;\n    skuVersion: string;\n}): void {\n    const { skuArr, index, skuName, skuVersion } = params;\n    if (index >= skuArr.length) {\n        return;\n    }\n    skuArr[index] = [skuName, skuVersion].join(skuValueSeparator);\n}\n\n/** @internal */\nexport class ServerTelemetryManager {\n    private cacheManager: CacheManager;\n    private apiId: number;\n    private correlationId: string;\n    private telemetryCacheKey: string;\n    private wrapperSKU: String;\n    private wrapperVer: String;\n    private regionUsed: string | undefined;\n    private regionSource: RegionDiscoverySources | undefined;\n    private regionOutcome: RegionDiscoveryOutcomes | undefined;\n    private cacheOutcome: CacheOutcome = CacheOutcome.NOT_APPLICABLE;\n\n    constructor(\n        telemetryRequest: ServerTelemetryRequest,\n        cacheManager: CacheManager\n    ) {\n        this.cacheManager = cacheManager;\n        this.apiId = telemetryRequest.apiId;\n        this.correlationId = telemetryRequest.correlationId;\n        this.wrapperSKU = telemetryRequest.wrapperSKU || Constants.EMPTY_STRING;\n        this.wrapperVer = telemetryRequest.wrapperVer || Constants.EMPTY_STRING;\n\n        this.telemetryCacheKey =\n            SERVER_TELEM_CONSTANTS.CACHE_KEY +\n            Separators.CACHE_KEY_SEPARATOR +\n            telemetryRequest.clientId;\n    }\n\n    /**\n     * API to add MSER Telemetry to request\n     */\n    generateCurrentRequestHeaderValue(): string {\n        const request = `${this.apiId}${SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR}${this.cacheOutcome}`;\n        const platformFieldsArr = [this.wrapperSKU, this.wrapperVer];\n        const nativeBrokerErrorCode = this.getNativeBrokerErrorCode();\n        if (nativeBrokerErrorCode?.length) {\n            platformFieldsArr.push(`broker_error=${nativeBrokerErrorCode}`);\n        }\n        const platformFields = platformFieldsArr.join(\n            SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR\n        );\n        const regionDiscoveryFields = this.getRegionDiscoveryFields();\n        const requestWithRegionDiscoveryFields = [\n            request,\n            regionDiscoveryFields,\n        ].join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);\n\n        return [\n            SERVER_TELEM_CONSTANTS.SCHEMA_VERSION,\n            requestWithRegionDiscoveryFields,\n            platformFields,\n        ].join(SERVER_TELEM_CONSTANTS.CATEGORY_SEPARATOR);\n    }\n\n    /**\n     * API to add MSER Telemetry for the last failed request\n     */\n    generateLastRequestHeaderValue(): string {\n        const lastRequests = this.getLastRequests();\n\n        const maxErrors = ServerTelemetryManager.maxErrorsToSend(lastRequests);\n        const failedRequests = lastRequests.failedRequests\n            .slice(0, 2 * maxErrors)\n            .join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);\n        const errors = lastRequests.errors\n            .slice(0, maxErrors)\n            .join(SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR);\n        const errorCount = lastRequests.errors.length;\n\n        // Indicate whether this header contains all data or partial data\n        const overflow =\n            maxErrors < errorCount\n                ? SERVER_TELEM_CONSTANTS.OVERFLOW_TRUE\n                : SERVER_TELEM_CONSTANTS.OVERFLOW_FALSE;\n        const platformFields = [errorCount, overflow].join(\n            SERVER_TELEM_CONSTANTS.VALUE_SEPARATOR\n        );\n\n        return [\n            SERVER_TELEM_CONSTANTS.SCHEMA_VERSION,\n            lastRequests.cacheHits,\n            failedRequests,\n            errors,\n            platformFields,\n        ].join(SERVER_TELEM_CONSTANTS.CATEGORY_SEPARATOR);\n    }\n\n    /**\n     * API to cache token failures for MSER data capture\n     * @param error\n     */\n    cacheFailedRequest(error: unknown): void {\n        const lastRequests = this.getLastRequests();\n        if (\n            lastRequests.errors.length >=\n            SERVER_TELEM_CONSTANTS.MAX_CACHED_ERRORS\n        ) {\n            // Remove a cached error to make room, first in first out\n            lastRequests.failedRequests.shift(); // apiId\n            lastRequests.failedRequests.shift(); // correlationId\n            lastRequests.errors.shift();\n        }\n\n        lastRequests.failedRequests.push(this.apiId, this.correlationId);\n\n        if (error instanceof Error && !!error && error.toString()) {\n            if (error instanceof AuthError) {\n                if (error.subError) {\n                    lastRequests.errors.push(error.subError);\n                } else if (error.errorCode) {\n                    lastRequests.errors.push(error.errorCode);\n                } else {\n                    lastRequests.errors.push(error.toString());\n                }\n            } else {\n                lastRequests.errors.push(error.toString());\n            }\n        } else {\n            lastRequests.errors.push(SERVER_TELEM_CONSTANTS.UNKNOWN_ERROR);\n        }\n\n        this.cacheManager.setServerTelemetry(\n            this.telemetryCacheKey,\n            lastRequests,\n            this.correlationId\n        );\n\n        return;\n    }\n\n    /**\n     * Update server telemetry cache entry by incrementing cache hit counter\n     */\n    incrementCacheHits(): number {\n        const lastRequests = this.getLastRequests();\n        lastRequests.cacheHits += 1;\n\n        this.cacheManager.setServerTelemetry(\n            this.telemetryCacheKey,\n            lastRequests,\n            this.correlationId\n        );\n        return lastRequests.cacheHits;\n    }\n\n    /**\n     * Get the server telemetry entity from cache or initialize a new one\n     */\n    getLastRequests(): ServerTelemetryEntity {\n        const initialValue: ServerTelemetryEntity = {\n            failedRequests: [],\n            errors: [],\n            cacheHits: 0,\n        };\n        const lastRequests = this.cacheManager.getServerTelemetry(\n            this.telemetryCacheKey\n        ) as ServerTelemetryEntity;\n\n        return lastRequests || initialValue;\n    }\n\n    /**\n     * Remove server telemetry cache entry\n     */\n    clearTelemetryCache(): void {\n        const lastRequests = this.getLastRequests();\n        const numErrorsFlushed =\n            ServerTelemetryManager.maxErrorsToSend(lastRequests);\n        const errorCount = lastRequests.errors.length;\n        if (numErrorsFlushed === errorCount) {\n            // All errors were sent on last request, clear Telemetry cache\n            this.cacheManager.removeItem(\n                this.telemetryCacheKey,\n                this.correlationId\n            );\n        } else {\n            // Partial data was flushed to server, construct a new telemetry cache item with errors that were not flushed\n            const serverTelemEntity: ServerTelemetryEntity = {\n                failedRequests: lastRequests.failedRequests.slice(\n                    numErrorsFlushed * 2\n                ), // failedRequests contains 2 items for each error\n                errors: lastRequests.errors.slice(numErrorsFlushed),\n                cacheHits: 0,\n            };\n\n            this.cacheManager.setServerTelemetry(\n                this.telemetryCacheKey,\n                serverTelemEntity,\n                this.correlationId\n            );\n        }\n    }\n\n    /**\n     * Returns the maximum number of errors that can be flushed to the server in the next network request\n     * @param serverTelemetryEntity\n     */\n    static maxErrorsToSend(\n        serverTelemetryEntity: ServerTelemetryEntity\n    ): number {\n        let i;\n        let maxErrors = 0;\n        let dataSize = 0;\n        const errorCount = serverTelemetryEntity.errors.length;\n        for (i = 0; i < errorCount; i++) {\n            // failedRequests parameter contains pairs of apiId and correlationId, multiply index by 2 to preserve pairs\n            const apiId =\n                serverTelemetryEntity.failedRequests[2 * i] ||\n                Constants.EMPTY_STRING;\n            const correlationId =\n                serverTelemetryEntity.failedRequests[2 * i + 1] ||\n                Constants.EMPTY_STRING;\n            const errorCode =\n                serverTelemetryEntity.errors[i] || Constants.EMPTY_STRING;\n\n            // Count number of characters that would be added to header, each character is 1 byte. Add 3 at the end to account for separators\n            dataSize +=\n                apiId.toString().length +\n                correlationId.toString().length +\n                errorCode.length +\n                3;\n\n            if (dataSize < SERVER_TELEM_CONSTANTS.MAX_LAST_HEADER_BYTES) {\n                // Adding this entry to the header would still keep header size below the limit\n                maxErrors += 1;\n            } else {\n                break;\n            }\n        }\n\n        return maxErrors;\n    }\n\n    /**\n     * Get the region discovery fields\n     *\n     * @returns string\n     */\n    getRegionDiscoveryFields(): string {\n        const regionDiscoveryFields: string[] = [];\n\n        regionDiscoveryFields.push(this.regionUsed || Constants.EMPTY_STRING);\n        regionDiscoveryFields.push(this.regionSource || Constants.EMPTY_STRING);\n        regionDiscoveryFields.push(\n            this.regionOutcome || Constants.EMPTY_STRING\n        );\n\n        return regionDiscoveryFields.join(\",\");\n    }\n\n    /**\n     * Update the region discovery metadata\n     *\n     * @param regionDiscoveryMetadata\n     * @returns void\n     */\n    updateRegionDiscoveryMetadata(\n        regionDiscoveryMetadata: RegionDiscoveryMetadata\n    ): void {\n        this.regionUsed = regionDiscoveryMetadata.region_used;\n        this.regionSource = regionDiscoveryMetadata.region_source;\n        this.regionOutcome = regionDiscoveryMetadata.region_outcome;\n    }\n\n    /**\n     * Set cache outcome\n     */\n    setCacheOutcome(cacheOutcome: CacheOutcome): void {\n        this.cacheOutcome = cacheOutcome;\n    }\n\n    setNativeBrokerErrorCode(errorCode: string): void {\n        const lastRequests = this.getLastRequests();\n        lastRequests.nativeBrokerErrorCode = errorCode;\n        this.cacheManager.setServerTelemetry(\n            this.telemetryCacheKey,\n            lastRequests,\n            this.correlationId\n        );\n    }\n\n    getNativeBrokerErrorCode(): string | undefined {\n        return this.getLastRequests().nativeBrokerErrorCode;\n    }\n\n    clearNativeBrokerErrorCode(): void {\n        const lastRequests = this.getLastRequests();\n        delete lastRequests.nativeBrokerErrorCode;\n        this.cacheManager.setServerTelemetry(\n            this.telemetryCacheKey,\n            lastRequests,\n            this.correlationId\n        );\n    }\n\n    static makeExtraSkuString(params: SkuParams): string {\n        return makeExtraSkuString(params);\n    }\n}\n", "/*! @azure/msal-common v15.13.3 2025-12-04 */\n'use strict';\nexport { AuthorizationCodeClient } from './client/AuthorizationCodeClient.mjs';\nexport { RefreshTokenClient } from './client/RefreshTokenClient.mjs';\nexport { SilentFlowClient } from './client/SilentFlowClient.mjs';\nexport { BaseClient } from './client/BaseClient.mjs';\nexport { DEFAULT_SYSTEM_OPTIONS } from './config/ClientConfiguration.mjs';\nexport { buildTenantProfile, tenantIdMatchesHomeTenant, updateAccountTenantProfileData } from './account/AccountInfo.mjs';\nexport { getTenantIdFromIdTokenClaims } from './account/TokenClaims.mjs';\nexport { CcsCredentialType } from './account/CcsCredential.mjs';\nexport { buildClientInfo, buildClientInfoFromHomeAccountId } from './account/ClientInfo.mjs';\nexport { Authority, buildStaticAuthorityOptions, formatAuthorityUri } from './authority/Authority.mjs';\nexport { AzureCloudInstance } from './authority/AuthorityOptions.mjs';\nexport { AuthorityType } from './authority/AuthorityType.mjs';\nexport { ProtocolMode } from './authority/ProtocolMode.mjs';\nexport { CacheManager, DefaultStorageClass } from './cache/CacheManager.mjs';\nexport { AccountEntity } from './cache/entities/AccountEntity.mjs';\nexport { StubbedNetworkModule } from './network/INetworkModule.mjs';\nexport { ThrottlingUtils } from './network/ThrottlingUtils.mjs';\nexport { getRequestThumbprint } from './network/RequestThumbprint.mjs';\nexport { UrlString } from './url/UrlString.mjs';\nexport { DEFAULT_CRYPTO_IMPLEMENTATION } from './crypto/ICrypto.mjs';\nimport * as Authorize from './protocol/Authorize.mjs';\nexport { Authorize as AuthorizeProtocol };\nimport * as RequestParameterBuilder from './request/RequestParameterBuilder.mjs';\nexport { RequestParameterBuilder };\nexport { ResponseHandler, buildAccountToCache } from './response/ResponseHandler.mjs';\nexport { ScopeSet } from './request/ScopeSet.mjs';\nexport { AuthenticationHeaderParser } from './request/AuthenticationHeaderParser.mjs';\nexport { LogLevel, Logger } from './logger/Logger.mjs';\nexport { InteractionRequiredAuthError, InteractionRequiredAuthErrorMessage, createInteractionRequiredAuthError } from './error/InteractionRequiredAuthError.mjs';\nimport * as InteractionRequiredAuthErrorCodes from './error/InteractionRequiredAuthErrorCodes.mjs';\nexport { InteractionRequiredAuthErrorCodes };\nexport { AuthError, AuthErrorMessage, createAuthError } from './error/AuthError.mjs';\nimport * as AuthErrorCodes from './error/AuthErrorCodes.mjs';\nexport { AuthErrorCodes };\nexport { PlatformBrokerError } from './error/PlatformBrokerError.mjs';\nexport { ServerError } from './error/ServerError.mjs';\nexport { NetworkError, createNetworkError } from './error/NetworkError.mjs';\nexport { CacheError, createCacheError } from './error/CacheError.mjs';\nimport * as CacheErrorCodes from './error/CacheErrorCodes.mjs';\nexport { CacheErrorCodes };\nexport { ClientAuthError, ClientAuthErrorMessage, createClientAuthError } from './error/ClientAuthError.mjs';\nimport * as ClientAuthErrorCodes from './error/ClientAuthErrorCodes.mjs';\nexport { ClientAuthErrorCodes };\nexport { ClientConfigurationError, ClientConfigurationErrorMessage, createClientConfigurationError } from './error/ClientConfigurationError.mjs';\nimport * as ClientConfigurationErrorCodes from './error/ClientConfigurationErrorCodes.mjs';\nexport { ClientConfigurationErrorCodes };\nexport { AADAuthorityConstants, AuthenticationScheme, CacheAccountType, CacheOutcome, CacheType, ClaimsRequestKeys, CodeChallengeMethodValues, Constants, CredentialType, DEFAULT_TOKEN_RENEWAL_OFFSET_SEC, EncodingTypes, Errors, GrantType, HeaderNames, HttpMethod, HttpStatus, JsonWebTokenTypes, OAuthResponseType, OIDC_DEFAULT_SCOPES, ONE_DAY_IN_MS, PasswordGrantConstants, PersistentCacheKeys, PromptValue, ResponseMode, ServerResponseType, THE_FAMILY_ID, ThrottlingConstants } from './utils/Constants.mjs';\nexport { StringUtils } from './utils/StringUtils.mjs';\nexport { ProtocolUtils } from './utils/ProtocolUtils.mjs';\nexport { ServerTelemetryManager } from './telemetry/server/ServerTelemetryManager.mjs';\nexport { version } from './packageMetadata.mjs';\nexport { invoke, invokeAsync } from './utils/FunctionWrappers.mjs';\nimport * as AuthToken from './account/AuthToken.mjs';\nexport { AuthToken };\nimport * as AuthorityFactory from './authority/AuthorityFactory.mjs';\nexport { AuthorityFactory };\nimport * as CacheHelpers from './cache/utils/CacheHelpers.mjs';\nexport { CacheHelpers };\nimport * as TimeUtils from './utils/TimeUtils.mjs';\nexport { TimeUtils };\nimport * as UrlUtils from './utils/UrlUtils.mjs';\nexport { UrlUtils };\nimport * as AADServerParamKeys from './constants/AADServerParamKeys.mjs';\nexport { AADServerParamKeys };\nexport { TokenCacheContext } from './cache/persistence/TokenCacheContext.mjs';\nimport * as ClientAssertionUtils from './utils/ClientAssertionUtils.mjs';\nexport { ClientAssertionUtils };\nexport { getClientAssertion } from './utils/ClientAssertionUtils.mjs';\n//# sourceMappingURL=index-node.mjs.map\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    AccountCache,\n    IdTokenCache,\n    AccessTokenCache,\n    RefreshTokenCache,\n    AppMetadataCache,\n    AccountEntity,\n    IdTokenEntity,\n    AccessTokenEntity,\n    RefreshTokenEntity,\n    CacheManager,\n    CredentialType,\n    AuthenticationScheme,\n} from \"@azure/msal-common/node\";\nimport {\n    JsonCache,\n    InMemoryCache,\n    SerializedAccountEntity,\n    SerializedIdTokenEntity,\n    SerializedAccessTokenEntity,\n    SerializedRefreshTokenEntity,\n    SerializedAppMetadataEntity,\n} from \"./SerializerTypes.js\";\n\n/**\n * This class deserializes cache entities read from the file into in-memory object types defined internally\n * @internal\n */\nexport class Deserializer {\n    /**\n     * Parse the JSON blob in memory and deserialize the content\n     * @param cachedJson - JSON blob cache\n     */\n    static deserializeJSONBlob(jsonFile: string): JsonCache {\n        const deserializedCache = !jsonFile ? {} : JSON.parse(jsonFile);\n        return deserializedCache;\n    }\n\n    /**\n     * Deserializes accounts to AccountEntity objects\n     * @param accounts - accounts of type SerializedAccountEntity\n     */\n    static deserializeAccounts(\n        accounts: Record<string, SerializedAccountEntity>\n    ): AccountCache {\n        const accountObjects: AccountCache = {};\n        if (accounts) {\n            Object.keys(accounts).map(function (key) {\n                const serializedAcc = accounts[key];\n                const mappedAcc = {\n                    homeAccountId: serializedAcc.home_account_id,\n                    environment: serializedAcc.environment,\n                    realm: serializedAcc.realm,\n                    localAccountId: serializedAcc.local_account_id,\n                    username: serializedAcc.username,\n                    authorityType: serializedAcc.authority_type,\n                    name: serializedAcc.name,\n                    clientInfo: serializedAcc.client_info,\n                    lastModificationTime: serializedAcc.last_modification_time,\n                    lastModificationApp: serializedAcc.last_modification_app,\n                    tenantProfiles: serializedAcc.tenantProfiles?.map(\n                        (serializedTenantProfile) => {\n                            return JSON.parse(serializedTenantProfile);\n                        }\n                    ),\n                    lastUpdatedAt: Date.now().toString(),\n                };\n                const account: AccountEntity = new AccountEntity();\n                CacheManager.toObject(account, mappedAcc);\n                accountObjects[key] = account;\n            });\n        }\n\n        return accountObjects;\n    }\n\n    /**\n     * Deserializes id tokens to IdTokenEntity objects\n     * @param idTokens - credentials of type SerializedIdTokenEntity\n     */\n    static deserializeIdTokens(\n        idTokens: Record<string, SerializedIdTokenEntity>\n    ): IdTokenCache {\n        const idObjects: IdTokenCache = {};\n        if (idTokens) {\n            Object.keys(idTokens).map(function (key) {\n                const serializedIdT = idTokens[key];\n                const idToken: IdTokenEntity = {\n                    homeAccountId: serializedIdT.home_account_id,\n                    environment: serializedIdT.environment,\n                    credentialType:\n                        serializedIdT.credential_type as CredentialType,\n                    clientId: serializedIdT.client_id,\n                    secret: serializedIdT.secret,\n                    realm: serializedIdT.realm,\n                    lastUpdatedAt: Date.now().toString(),\n                };\n                idObjects[key] = idToken;\n            });\n        }\n        return idObjects;\n    }\n\n    /**\n     * Deserializes access tokens to AccessTokenEntity objects\n     * @param accessTokens - access tokens of type SerializedAccessTokenEntity\n     */\n    static deserializeAccessTokens(\n        accessTokens: Record<string, SerializedAccessTokenEntity>\n    ): AccessTokenCache {\n        const atObjects: AccessTokenCache = {};\n        if (accessTokens) {\n            Object.keys(accessTokens).map(function (key) {\n                const serializedAT = accessTokens[key];\n                const accessToken: AccessTokenEntity = {\n                    homeAccountId: serializedAT.home_account_id,\n                    environment: serializedAT.environment,\n                    credentialType:\n                        serializedAT.credential_type as CredentialType,\n                    clientId: serializedAT.client_id,\n                    secret: serializedAT.secret,\n                    realm: serializedAT.realm,\n                    target: serializedAT.target,\n                    cachedAt: serializedAT.cached_at,\n                    expiresOn: serializedAT.expires_on,\n                    extendedExpiresOn: serializedAT.extended_expires_on,\n                    refreshOn: serializedAT.refresh_on,\n                    keyId: serializedAT.key_id,\n                    tokenType: serializedAT.token_type as AuthenticationScheme,\n                    requestedClaims: serializedAT.requestedClaims,\n                    requestedClaimsHash: serializedAT.requestedClaimsHash,\n                    userAssertionHash: serializedAT.userAssertionHash,\n                    lastUpdatedAt: Date.now().toString(),\n                };\n                atObjects[key] = accessToken;\n            });\n        }\n\n        return atObjects;\n    }\n\n    /**\n     * Deserializes refresh tokens to RefreshTokenEntity objects\n     * @param refreshTokens - refresh tokens of type SerializedRefreshTokenEntity\n     */\n    static deserializeRefreshTokens(\n        refreshTokens: Record<string, SerializedRefreshTokenEntity>\n    ): RefreshTokenCache {\n        const rtObjects: RefreshTokenCache = {};\n        if (refreshTokens) {\n            Object.keys(refreshTokens).map(function (key) {\n                const serializedRT = refreshTokens[key];\n                const refreshToken: RefreshTokenEntity = {\n                    homeAccountId: serializedRT.home_account_id,\n                    environment: serializedRT.environment,\n                    credentialType:\n                        serializedRT.credential_type as CredentialType,\n                    clientId: serializedRT.client_id,\n                    secret: serializedRT.secret,\n                    familyId: serializedRT.family_id,\n                    target: serializedRT.target,\n                    realm: serializedRT.realm,\n                    lastUpdatedAt: Date.now().toString(),\n                };\n                rtObjects[key] = refreshToken;\n            });\n        }\n\n        return rtObjects;\n    }\n\n    /**\n     * Deserializes appMetadata to AppMetaData objects\n     * @param appMetadata - app metadata of type SerializedAppMetadataEntity\n     */\n    static deserializeAppMetadata(\n        appMetadata: Record<string, SerializedAppMetadataEntity>\n    ): AppMetadataCache {\n        const appMetadataObjects: AppMetadataCache = {};\n        if (appMetadata) {\n            Object.keys(appMetadata).map(function (key) {\n                const serializedAmdt = appMetadata[key];\n                appMetadataObjects[key] = {\n                    clientId: serializedAmdt.client_id,\n                    environment: serializedAmdt.environment,\n                    familyId: serializedAmdt.family_id,\n                };\n            });\n        }\n\n        return appMetadataObjects;\n    }\n\n    /**\n     * Deserialize an inMemory Cache\n     * @param jsonCache - JSON blob cache\n     */\n    static deserializeAllCache(jsonCache: JsonCache): InMemoryCache {\n        return {\n            accounts: jsonCache.Account\n                ? this.deserializeAccounts(jsonCache.Account)\n                : {},\n            idTokens: jsonCache.IdToken\n                ? this.deserializeIdTokens(jsonCache.IdToken)\n                : {},\n            accessTokens: jsonCache.AccessToken\n                ? this.deserializeAccessTokens(jsonCache.AccessToken)\n                : {},\n            refreshTokens: jsonCache.RefreshToken\n                ? this.deserializeRefreshTokens(jsonCache.RefreshToken)\n                : {},\n            appMetadata: jsonCache.AppMetadata\n                ? this.deserializeAppMetadata(jsonCache.AppMetadata)\n                : {},\n        };\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { HttpStatus } from \"@azure/msal-common/node\";\nimport { DefaultManagedIdentityRetryPolicy } from \"../retry/DefaultManagedIdentityRetryPolicy.js\";\nimport { ImdsRetryPolicy } from \"../retry/ImdsRetryPolicy.js\";\n\n// MSI Constants. Docs for MSI are available here https://docs.microsoft.com/azure/app-service/overview-managed-identity\nexport const DEFAULT_MANAGED_IDENTITY_ID = \"system_assigned_managed_identity\";\nexport const MANAGED_IDENTITY_DEFAULT_TENANT = \"managed_identity\";\nexport const DEFAULT_AUTHORITY_FOR_MANAGED_IDENTITY = `https://login.microsoftonline.com/${MANAGED_IDENTITY_DEFAULT_TENANT}/`;\n\n/**\n * Managed Identity Headers - used in network requests\n */\nexport const ManagedIdentityHeaders = {\n    AUTHORIZATION_HEADER_NAME: \"Authorization\",\n    METADATA_HEADER_NAME: \"Metadata\",\n    APP_SERVICE_SECRET_HEADER_NAME: \"X-IDENTITY-HEADER\",\n    ML_AND_SF_SECRET_HEADER_NAME: \"secret\",\n} as const;\nexport type ManagedIdentityHeaders =\n    (typeof ManagedIdentityHeaders)[keyof typeof ManagedIdentityHeaders];\n\n/**\n * Managed Identity Query Parameters - used in network requests\n */\nexport const ManagedIdentityQueryParameters = {\n    API_VERSION: \"api-version\",\n    RESOURCE: \"resource\",\n    SHA256_TOKEN_TO_REFRESH: \"token_sha256_to_refresh\",\n    XMS_CC: \"xms_cc\",\n} as const;\nexport type ManagedIdentityQueryParameters =\n    (typeof ManagedIdentityQueryParameters)[keyof typeof ManagedIdentityQueryParameters];\n\n/**\n * Managed Identity Environment Variable Names\n */\nexport const ManagedIdentityEnvironmentVariableNames = {\n    AZURE_POD_IDENTITY_AUTHORITY_HOST: \"AZURE_POD_IDENTITY_AUTHORITY_HOST\",\n    DEFAULT_IDENTITY_CLIENT_ID: \"DEFAULT_IDENTITY_CLIENT_ID\",\n    IDENTITY_ENDPOINT: \"IDENTITY_ENDPOINT\",\n    IDENTITY_HEADER: \"IDENTITY_HEADER\",\n    IDENTITY_SERVER_THUMBPRINT: \"IDENTITY_SERVER_THUMBPRINT\",\n    IMDS_ENDPOINT: \"IMDS_ENDPOINT\",\n    MSI_ENDPOINT: \"MSI_ENDPOINT\",\n    MSI_SECRET: \"MSI_SECRET\",\n} as const;\nexport type ManagedIdentityEnvironmentVariableNames =\n    (typeof ManagedIdentityEnvironmentVariableNames)[keyof typeof ManagedIdentityEnvironmentVariableNames];\n\n/**\n * Managed Identity Source Names\n * @public\n */\nexport const ManagedIdentitySourceNames = {\n    APP_SERVICE: \"AppService\",\n    AZURE_ARC: \"AzureArc\",\n    CLOUD_SHELL: \"CloudShell\",\n    DEFAULT_TO_IMDS: \"DefaultToImds\",\n    IMDS: \"Imds\",\n    MACHINE_LEARNING: \"MachineLearning\",\n    SERVICE_FABRIC: \"ServiceFabric\",\n} as const;\n/**\n * The ManagedIdentitySourceNames type\n * @public\n */\nexport type ManagedIdentitySourceNames =\n    (typeof ManagedIdentitySourceNames)[keyof typeof ManagedIdentitySourceNames];\n\n/**\n * Managed Identity Ids\n */\nexport const ManagedIdentityIdType = {\n    SYSTEM_ASSIGNED: \"system-assigned\",\n    USER_ASSIGNED_CLIENT_ID: \"user-assigned-client-id\",\n    USER_ASSIGNED_RESOURCE_ID: \"user-assigned-resource-id\",\n    USER_ASSIGNED_OBJECT_ID: \"user-assigned-object-id\",\n} as const;\nexport type ManagedIdentityIdType =\n    (typeof ManagedIdentityIdType)[keyof typeof ManagedIdentityIdType];\n\n/**\n * http methods\n */\nexport const HttpMethod = {\n    GET: \"get\",\n    POST: \"post\",\n} as const;\nexport type HttpMethod = (typeof HttpMethod)[keyof typeof HttpMethod];\n\nexport const ProxyStatus = {\n    SUCCESS: HttpStatus.SUCCESS,\n    SUCCESS_RANGE_START: HttpStatus.SUCCESS_RANGE_START,\n    SUCCESS_RANGE_END: HttpStatus.SUCCESS_RANGE_END,\n    SERVER_ERROR: HttpStatus.SERVER_ERROR,\n} as const;\nexport type ProxyStatus = (typeof ProxyStatus)[keyof typeof ProxyStatus];\n\n/**\n * Constants used for region discovery\n */\nexport const REGION_ENVIRONMENT_VARIABLE = \"REGION_NAME\";\nexport const MSAL_FORCE_REGION = \"MSAL_FORCE_REGION\";\n\n/**\n * Constant used for PKCE\n */\nexport const RANDOM_OCTET_SIZE = 32;\n\n/**\n * Constants used in PKCE\n */\nexport const Hash = {\n    SHA256: \"sha256\",\n};\n\n/**\n * Constants for encoding schemes\n */\nexport const CharSet = {\n    CV_CHARSET:\n        \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~\",\n};\n\n/**\n * Cache Constants\n */\nexport const CACHE = {\n    FILE_CACHE: \"fileCache\",\n    EXTENSION_LIB: \"extenstion_library\",\n    KEY_SEPARATOR: \"-\",\n};\n\n/**\n * Constants\n */\nexport const Constants = {\n    MSAL_SKU: \"msal.js.node\",\n    JWT_BEARER_ASSERTION_TYPE:\n        \"urn:ietf:params:oauth:client-assertion-type:jwt-bearer\",\n    AUTHORIZATION_PENDING: \"authorization_pending\",\n    HTTP_PROTOCOL: \"http://\",\n    LOCALHOST: \"localhost\",\n};\n\n/**\n * API Codes for Telemetry purposes.\n * Before adding a new code you must claim it in the MSAL Telemetry tracker as these number spaces are shared across all MSALs\n * 0-99 Silent Flow\n * 600-699 Device Code Flow\n * 800-899 Auth Code Flow\n */\nexport const ApiId = {\n    acquireTokenSilent: 62,\n    acquireTokenByUsernamePassword: 371,\n    acquireTokenByDeviceCode: 671,\n    acquireTokenByClientCredential: 771,\n    acquireTokenByCode: 871,\n    acquireTokenByRefreshToken: 872,\n};\nexport type ApiId = (typeof ApiId)[keyof typeof ApiId];\n\n/**\n * JWT  constants\n */\nexport const JwtConstants = {\n    ALGORITHM: \"alg\",\n    RSA_256: \"RS256\",\n    PSS_256: \"PS256\",\n    X5T_256: \"x5t#S256\",\n    X5T: \"x5t\",\n    X5C: \"x5c\",\n    AUDIENCE: \"aud\",\n    EXPIRATION_TIME: \"exp\",\n    ISSUER: \"iss\",\n    SUBJECT: \"sub\",\n    NOT_BEFORE: \"nbf\",\n    JWT_ID: \"jti\",\n};\n\nexport const LOOPBACK_SERVER_CONSTANTS = {\n    INTERVAL_MS: 100,\n    TIMEOUT_MS: 5000,\n};\n\nexport const AZURE_ARC_SECRET_FILE_MAX_SIZE_BYTES: number = 4096; // 4 KB\n\nexport type RetryPolicies = DefaultManagedIdentityRetryPolicy | ImdsRetryPolicy;\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { NetworkResponse } from \"@azure/msal-common/node\";\n\nexport type UrlToHttpRequestOptions = {\n    protocol: string;\n    hostname: string;\n    hash: string;\n    search: string;\n    pathname: string;\n    path: string;\n    href: string;\n    port?: number;\n    auth?: string;\n};\n\nexport class NetworkUtils {\n    static getNetworkResponse<T>(\n        headers: Record<string, string>,\n        body: T,\n        statusCode: number\n    ): NetworkResponse<T> {\n        return {\n            headers: headers,\n            body: body,\n            status: statusCode,\n        };\n    }\n\n    /*\n     * Utility function that converts a URL object into an ordinary options object as expected by the\n     * http.request and https.request APIs.\n     * https://github.com/nodejs/node/blob/main/lib/internal/url.js#L1090\n     */\n    static urlToHttpOptions(url: URL): UrlToHttpRequestOptions {\n        const options: UrlToHttpRequestOptions = {\n            protocol: url.protocol,\n            hostname:\n                url.hostname && url.hostname.startsWith(\"[\")\n                    ? url.hostname.slice(1, -1)\n                    : url.hostname,\n            hash: url.hash,\n            search: url.search,\n            pathname: url.pathname,\n            path: `${url.pathname || \"\"}${url.search || \"\"}`,\n            href: url.href,\n        };\n        if (url.port !== \"\") {\n            options.port = Number(url.port);\n        }\n        if (url.username || url.password) {\n            options.auth = `${decodeURIComponent(\n                url.username\n            )}:${decodeURIComponent(url.password)}`;\n        }\n        return options;\n    }\n}\n", "/* eslint-disable header/header */\nexport const name = \"@azure/msal-node\";\nexport const version = \"3.8.4\";\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    INetworkModule,\n    NetworkRequestOptions,\n    NetworkResponse,\n    HttpStatus,\n    Logger,\n    LoggerOptions,\n} from \"@azure/msal-common/node\";\nimport { HttpMethod, Constants, ProxyStatus } from \"../utils/Constants.js\";\nimport { NetworkUtils } from \"../utils/NetworkUtils.js\";\nimport { name, version } from \"../packageMetadata.js\";\nimport http from \"http\";\nimport https from \"https\";\n\n/**\n * This class implements the API for network requests.\n */\nexport class HttpClient implements INetworkModule {\n    private proxyUrl: string;\n    private customAgentOptions: http.AgentOptions | https.AgentOptions;\n    private logger: Logger;\n    private isPiiEnabled: boolean;\n\n    constructor(\n        proxyUrl?: string,\n        customAgentOptions?: http.AgentOptions | https.AgentOptions,\n        loggerOptions?: LoggerOptions\n    ) {\n        this.proxyUrl = proxyUrl || \"\";\n        this.customAgentOptions = customAgentOptions || {};\n\n        this.logger = new Logger(loggerOptions || {}, name, version);\n        this.isPiiEnabled = this.logger.isPiiLoggingEnabled();\n    }\n\n    /**\n     * Http Get request\n     * @param url\n     * @param options\n     */\n    public async sendGetRequestAsync<T>(\n        url: string,\n        options?: NetworkRequestOptions,\n        timeout?: number\n    ): Promise<NetworkResponse<T>> {\n        if (this.proxyUrl) {\n            return this.networkRequestViaProxy(\n                HttpMethod.GET,\n                url,\n                options,\n                timeout\n            );\n        } else {\n            return this.networkRequestViaHttps(\n                HttpMethod.GET,\n                url,\n                options,\n                timeout\n            );\n        }\n    }\n\n    /**\n     * Http Post request\n     * @param url\n     * @param options\n     */\n    public async sendPostRequestAsync<T>(\n        url: string,\n        options?: NetworkRequestOptions\n    ): Promise<NetworkResponse<T>> {\n        if (this.proxyUrl) {\n            return this.networkRequestViaProxy(HttpMethod.POST, url, options);\n        } else {\n            return this.networkRequestViaHttps(HttpMethod.POST, url, options);\n        }\n    }\n\n    private networkRequestViaProxy = <T>(\n        httpMethod: string,\n        destinationUrlString: string,\n        options?: NetworkRequestOptions,\n        timeout?: number\n    ): Promise<NetworkResponse<T>> => {\n        const destinationUrl = new URL(destinationUrlString);\n        const proxyUrl = new URL(this.proxyUrl);\n\n        // \"method: connect\" must be used to establish a connection to the proxy\n        const headers = options?.headers || ({} as Record<string, string>);\n        const tunnelRequestOptions: https.RequestOptions = {\n            host: proxyUrl.hostname,\n            port: proxyUrl.port,\n            method: \"CONNECT\",\n            path: destinationUrl.hostname,\n            headers: headers,\n        };\n\n        if (\n            this.customAgentOptions &&\n            Object.keys(this.customAgentOptions).length\n        ) {\n            tunnelRequestOptions.agent = new http.Agent(\n                this.customAgentOptions\n            );\n        }\n\n        // compose a request string for the socket\n        let postRequestStringContent: string = \"\";\n        if (httpMethod === HttpMethod.POST) {\n            const body = options?.body || \"\";\n            postRequestStringContent =\n                \"Content-Type: application/x-www-form-urlencoded\\r\\n\" +\n                `Content-Length: ${body.length}\\r\\n` +\n                `\\r\\n${body}`;\n        } else {\n            // optional timeout is only for get requests (regionDiscovery, for example)\n            if (timeout) {\n                tunnelRequestOptions.timeout = timeout;\n            }\n        }\n        const outgoingRequestString =\n            `${httpMethod.toUpperCase()} ${destinationUrl.href} HTTP/1.1\\r\\n` +\n            `Host: ${destinationUrl.host}\\r\\n` +\n            \"Connection: close\\r\\n\" +\n            postRequestStringContent +\n            \"\\r\\n\";\n\n        return new Promise<NetworkResponse<T>>((resolve, reject) => {\n            const request = http.request(tunnelRequestOptions);\n\n            if (timeout) {\n                request.on(\"timeout\", () => {\n                    this.logUrlWithPiiAwareness(\n                        `Request timeout after ${timeout}ms for URL`,\n                        destinationUrlString\n                    );\n\n                    request.destroy();\n                    reject(new Error(`Request time out after ${timeout}ms`));\n                });\n            }\n\n            request.end();\n\n            // establish connection to the proxy\n            request.on(\"connect\", (response, socket) => {\n                const proxyStatusCode =\n                    response?.statusCode || ProxyStatus.SERVER_ERROR;\n                if (\n                    proxyStatusCode < ProxyStatus.SUCCESS_RANGE_START ||\n                    proxyStatusCode > ProxyStatus.SUCCESS_RANGE_END\n                ) {\n                    request.destroy();\n                    socket.destroy();\n                    reject(\n                        new Error(\n                            `Error connecting to proxy. Http status code: ${\n                                response.statusCode\n                            }. Http status message: ${\n                                response?.statusMessage || \"Unknown\"\n                            }`\n                        )\n                    );\n                }\n\n                // make a request over an HTTP tunnel\n                socket.write(outgoingRequestString);\n\n                const data: Buffer[] = [];\n                socket.on(\"data\", (chunk) => {\n                    data.push(chunk);\n                });\n\n                socket.on(\"end\", () => {\n                    // combine all received buffer streams into one buffer, and then into a string\n                    const dataString = Buffer.concat([...data]).toString();\n\n                    // separate each line into it's own entry in an arry\n                    const dataStringArray = dataString.split(\"\\r\\n\");\n                    // the first entry will contain the statusCode and statusMessage\n                    const httpStatusCode = parseInt(\n                        dataStringArray[0].split(\" \")[1]\n                    );\n                    // remove \"HTTP/1.1\" and the status code to get the status message\n                    const statusMessage = dataStringArray[0]\n                        .split(\" \")\n                        .slice(2)\n                        .join(\" \");\n                    // the last entry will contain the body\n                    const body = dataStringArray[dataStringArray.length - 1];\n\n                    // everything in between the first and last entries are the headers\n                    const headersArray = dataStringArray.slice(\n                        1,\n                        dataStringArray.length - 2\n                    );\n\n                    // build an object out of all the headers\n                    const entries = new Map();\n                    headersArray.forEach((header) => {\n                        /**\n                         * the header might look like \"Content-Length: 1531\", but that is just a string\n                         * it needs to be converted to a key/value pair\n                         * split the string at the first instance of \":\"\n                         * there may be more than one \":\" if the value of the header is supposed to be a JSON object\n                         */\n                        const headerKeyValue = header.split(\n                            new RegExp(/:\\s(.*)/s)\n                        );\n                        const headerKey = headerKeyValue[0];\n                        let headerValue = headerKeyValue[1];\n\n                        // check if the value of the header is supposed to be a JSON object\n                        try {\n                            const object = JSON.parse(headerValue);\n\n                            // if it is, then convert it from a string to a JSON object\n                            if (object && typeof object === \"object\") {\n                                headerValue = object;\n                            }\n                        } catch (e) {\n                            // otherwise, leave it as a string\n                        }\n\n                        entries.set(headerKey, headerValue);\n                    });\n                    const headers = Object.fromEntries(entries);\n\n                    const parsedHeaders = headers as Record<string, string>;\n                    const networkResponse = NetworkUtils.getNetworkResponse(\n                        parsedHeaders,\n                        this.parseBody(\n                            httpStatusCode,\n                            statusMessage,\n                            parsedHeaders,\n                            body\n                        ) as T,\n                        httpStatusCode\n                    );\n\n                    if (\n                        this.shouldDestroyRequest(\n                            httpStatusCode,\n                            networkResponse\n                        )\n                    ) {\n                        request.destroy();\n                    }\n                    resolve(networkResponse);\n                });\n\n                socket.on(\"error\", (chunk) => {\n                    request.destroy();\n                    socket.destroy();\n                    reject(new Error(chunk.toString()));\n                });\n            });\n\n            request.on(\"error\", (chunk) => {\n                this.logger.error(\n                    `HttpClient - Proxy request error: ${chunk.toString()}`,\n                    \"\"\n                );\n                this.logUrlWithPiiAwareness(\n                    \"Destination URL\",\n                    destinationUrlString\n                );\n                this.logUrlWithPiiAwareness(\"Proxy URL\", this.proxyUrl);\n                this.logger.error(`HttpClient - Method: ${httpMethod}`, \"\");\n                this.logger.errorPii(\n                    `HttpClient - Headers: ${JSON.stringify(headers)}`,\n                    \"\"\n                );\n\n                request.destroy();\n                reject(new Error(chunk.toString()));\n            });\n        });\n    };\n\n    private networkRequestViaHttps = <T>(\n        httpMethod: string,\n        urlString: string,\n        options?: NetworkRequestOptions,\n        timeout?: number\n    ): Promise<NetworkResponse<T>> => {\n        const isPostRequest = httpMethod === HttpMethod.POST;\n        const body: string = options?.body || \"\";\n\n        const url = new URL(urlString);\n        const headers = options?.headers || ({} as Record<string, string>);\n        const customOptions: https.RequestOptions = {\n            method: httpMethod,\n            headers: headers,\n            ...NetworkUtils.urlToHttpOptions(url),\n        };\n\n        if (\n            this.customAgentOptions &&\n            Object.keys(this.customAgentOptions).length\n        ) {\n            customOptions.agent = new https.Agent(this.customAgentOptions);\n        }\n\n        if (isPostRequest) {\n            // needed for post request to work\n            customOptions.headers = {\n                ...customOptions.headers,\n                \"Content-Length\": body.length,\n            };\n        } else {\n            // optional timeout is only for get requests (regionDiscovery, for example)\n            if (timeout) {\n                customOptions.timeout = timeout;\n            }\n        }\n\n        return new Promise<NetworkResponse<T>>((resolve, reject) => {\n            let request: http.ClientRequest;\n            // managed identity sources use http instead of https\n            if (customOptions.protocol === \"http:\") {\n                request = http.request(customOptions);\n            } else {\n                request = https.request(customOptions);\n            }\n\n            if (isPostRequest) {\n                request.write(body);\n            }\n\n            if (timeout) {\n                request.on(\"timeout\", () => {\n                    this.logUrlWithPiiAwareness(\n                        `HTTPS request timeout after ${timeout}ms for URL`,\n                        urlString\n                    );\n\n                    request.destroy();\n                    reject(new Error(`Request time out after ${timeout}ms`));\n                });\n            }\n\n            request.end();\n\n            request.on(\"response\", (response) => {\n                const headers = response.headers;\n                const statusCode = response.statusCode as number;\n                const statusMessage = response.statusMessage;\n\n                const data: Buffer[] = [];\n                response.on(\"data\", (chunk) => {\n                    data.push(chunk);\n                });\n\n                response.on(\"end\", () => {\n                    // combine all received buffer streams into one buffer, and then into a string\n                    const body = Buffer.concat([...data]).toString();\n\n                    const parsedHeaders = headers as Record<string, string>;\n                    const networkResponse = NetworkUtils.getNetworkResponse(\n                        parsedHeaders,\n                        this.parseBody(\n                            statusCode,\n                            statusMessage,\n                            parsedHeaders,\n                            body\n                        ) as T,\n                        statusCode\n                    );\n\n                    if (\n                        this.shouldDestroyRequest(statusCode, networkResponse)\n                    ) {\n                        request.destroy();\n                    }\n                    resolve(networkResponse);\n                });\n            });\n\n            request.on(\"error\", (chunk) => {\n                this.logger.error(\n                    `HttpClient - HTTPS request error: ${chunk.toString()}`,\n                    \"\"\n                );\n                this.logUrlWithPiiAwareness(\"URL\", urlString);\n                this.logger.error(`HttpClient - Method: ${httpMethod}`, \"\");\n                this.logger.errorPii(\n                    `HttpClient - Headers: ${JSON.stringify(headers)}`,\n                    \"\"\n                );\n\n                request.destroy();\n                reject(new Error(chunk.toString()));\n            });\n        });\n    };\n\n    /**\n     * Check if extra parsing is needed on the repsonse from the server\n     * @param statusCode {number} the status code of the response from the server\n     * @param statusMessage {string | undefined} the status message of the response from the server\n     * @param headers {Record<string, string>} the headers of the response from the server\n     * @param body {string} the body from the response of the server\n     * @returns {Object} JSON parsed body or error object\n     */\n    private parseBody = (\n        statusCode: number,\n        statusMessage: string | undefined,\n        headers: Record<string, string>,\n        body: string\n    ) => {\n        /*\n         * Informational responses (100 \u2013 199)\n         * Successful responses (200 \u2013 299)\n         * Redirection messages (300 \u2013 399)\n         * Client error responses (400 \u2013 499)\n         * Server error responses (500 \u2013 599)\n         */\n\n        let parsedBody;\n        try {\n            parsedBody = JSON.parse(body);\n        } catch (error) {\n            let errorType;\n            let errorDescriptionHelper;\n            if (\n                statusCode >= HttpStatus.CLIENT_ERROR_RANGE_START &&\n                statusCode <= HttpStatus.CLIENT_ERROR_RANGE_END\n            ) {\n                errorType = \"client_error\";\n                errorDescriptionHelper = \"A client\";\n            } else if (\n                statusCode >= HttpStatus.SERVER_ERROR_RANGE_START &&\n                statusCode <= HttpStatus.SERVER_ERROR_RANGE_END\n            ) {\n                errorType = \"server_error\";\n                errorDescriptionHelper = \"A server\";\n            } else {\n                errorType = \"unknown_error\";\n                errorDescriptionHelper = \"An unknown\";\n            }\n\n            parsedBody = {\n                error: errorType,\n                error_description: `${errorDescriptionHelper} error occured.\\nHttp status code: ${statusCode}\\nHttp status message: ${\n                    statusMessage || \"Unknown\"\n                }\\nHeaders: ${JSON.stringify(headers)}`,\n            };\n        }\n\n        return parsedBody;\n    };\n\n    /**\n     * Helper function to log a formatted message containing URLs, with PII-aware sanitization\n     * @param label {string} the label for the log message\n     * @param urlString {string} the URL to log\n     */\n    private logUrlWithPiiAwareness = (\n        label: string,\n        urlString: string\n    ): void => {\n        if (this.isPiiEnabled) {\n            this.logger.errorPii(`HttpClient - ${label}: ${urlString}`, \"\");\n        } else {\n            let urlHelper: string;\n            try {\n                const url = new URL(urlString);\n                urlHelper = `${url.protocol}//${url.host}${url.pathname}`;\n            } catch {\n                urlHelper = urlString.split(\"?\")[0] || \"unknown\";\n            }\n\n            this.logger.error(\n                `HttpClient - ${label}: ${urlHelper} [Enable PII logging to see additional details]`,\n                \"\"\n            );\n        }\n    };\n\n    /**\n     * Helper function to determine if a request should be destroyed based on status code and response body.\n     * Checks if the response is an error and not part of the device code flow (authorization_pending).\n     * @param statusCode {number} the status code of the response\n     * @param networkResponse {NetworkResponse<T>} the network response object\n     * @returns {boolean} true if the request should be destroyed, false otherwise\n     */\n    private shouldDestroyRequest = <T>(\n        statusCode: number,\n        networkResponse: NetworkResponse<T>\n    ): boolean => {\n        return (\n            (statusCode < HttpStatus.SUCCESS_RANGE_START ||\n                statusCode > HttpStatus.SUCCESS_RANGE_END) &&\n            // do not destroy the request for the device code flow\n            !(\n                networkResponse.body &&\n                typeof networkResponse.body === \"object\" &&\n                \"error\" in networkResponse.body &&\n                (networkResponse.body as { error: string }).error ===\n                    Constants.AUTHORIZATION_PENDING\n            )\n        );\n    };\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { ManagedIdentityEnvironmentVariableNames } from \"../utils/Constants.js\";\n\nexport const invalidFileExtension = \"invalid_file_extension\";\nexport const invalidFilePath = \"invalid_file_path\";\nexport const invalidManagedIdentityIdType = \"invalid_managed_identity_id_type\";\nexport const invalidSecret = \"invalid_secret\";\nexport const missingId = \"missing_client_id\";\nexport const networkUnavailable = \"network_unavailable\";\nexport const platformNotSupported = \"platform_not_supported\";\nexport const unableToCreateAzureArc = \"unable_to_create_azure_arc\";\nexport const unableToCreateCloudShell = \"unable_to_create_cloud_shell\";\nexport const unableToCreateSource = \"unable_to_create_source\";\nexport const unableToReadSecretFile = \"unable_to_read_secret_file\";\nexport const urlParseError = \"url_parse_error\";\nexport const userAssignedNotAvailableAtRuntime =\n    \"user_assigned_not_available_at_runtime\";\nexport const wwwAuthenticateHeaderMissing = \"www_authenticate_header_missing\";\nexport const wwwAuthenticateHeaderUnsupportedFormat =\n    \"www_authenticate_header_unsupported_format\";\n\nexport const MsiEnvironmentVariableUrlMalformedErrorCodes = {\n    [ManagedIdentityEnvironmentVariableNames.AZURE_POD_IDENTITY_AUTHORITY_HOST]:\n        \"azure_pod_identity_authority_host_url_malformed\",\n    [ManagedIdentityEnvironmentVariableNames.IDENTITY_ENDPOINT]:\n        \"identity_endpoint_url_malformed\",\n    [ManagedIdentityEnvironmentVariableNames.IMDS_ENDPOINT]:\n        \"imds_endpoint_url_malformed\",\n    [ManagedIdentityEnvironmentVariableNames.MSI_ENDPOINT]:\n        \"msi_endpoint_url_malformed\",\n} as const;\nexport type MsiEnvironmentVariableErrorCodes =\n    (typeof MsiEnvironmentVariableUrlMalformedErrorCodes)[keyof typeof MsiEnvironmentVariableUrlMalformedErrorCodes];\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { AuthError } from \"@azure/msal-common/node\";\nimport * as ManagedIdentityErrorCodes from \"./ManagedIdentityErrorCodes.js\";\nimport { ManagedIdentityEnvironmentVariableNames } from \"../utils/Constants.js\";\nexport { ManagedIdentityErrorCodes };\n\n/**\n * ManagedIdentityErrorMessage class containing string constants used by error codes and messages.\n */\nexport const ManagedIdentityErrorMessages = {\n    [ManagedIdentityErrorCodes.invalidFileExtension]:\n        \"The file path in the WWW-Authenticate header does not contain a .key file.\",\n    [ManagedIdentityErrorCodes.invalidFilePath]:\n        \"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.\",\n    [ManagedIdentityErrorCodes.invalidManagedIdentityIdType]:\n        \"More than one ManagedIdentityIdType was provided.\",\n    [ManagedIdentityErrorCodes.invalidSecret]:\n        \"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.\",\n    [ManagedIdentityErrorCodes.platformNotSupported]:\n        \"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.\",\n    [ManagedIdentityErrorCodes.missingId]:\n        \"A ManagedIdentityId id was not provided.\",\n    [ManagedIdentityErrorCodes.MsiEnvironmentVariableUrlMalformedErrorCodes\n        .AZURE_POD_IDENTITY_AUTHORITY_HOST]: `The Managed Identity's '${ManagedIdentityEnvironmentVariableNames.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,\n    [ManagedIdentityErrorCodes.MsiEnvironmentVariableUrlMalformedErrorCodes\n        .IDENTITY_ENDPOINT]: `The Managed Identity's '${ManagedIdentityEnvironmentVariableNames.IDENTITY_ENDPOINT}' environment variable is malformed.`,\n    [ManagedIdentityErrorCodes.MsiEnvironmentVariableUrlMalformedErrorCodes\n        .IMDS_ENDPOINT]: `The Managed Identity's '${ManagedIdentityEnvironmentVariableNames.IMDS_ENDPOINT}' environment variable is malformed.`,\n    [ManagedIdentityErrorCodes.MsiEnvironmentVariableUrlMalformedErrorCodes\n        .MSI_ENDPOINT]: `The Managed Identity's '${ManagedIdentityEnvironmentVariableNames.MSI_ENDPOINT}' environment variable is malformed.`,\n    [ManagedIdentityErrorCodes.networkUnavailable]:\n        \"Authentication unavailable. The request to the managed identity endpoint timed out.\",\n    [ManagedIdentityErrorCodes.unableToCreateAzureArc]:\n        \"Azure Arc Managed Identities can only be system assigned.\",\n    [ManagedIdentityErrorCodes.unableToCreateCloudShell]:\n        \"Cloud Shell Managed Identities can only be system assigned.\",\n    [ManagedIdentityErrorCodes.unableToCreateSource]:\n        \"Unable to create a Managed Identity source based on environment variables.\",\n    [ManagedIdentityErrorCodes.unableToReadSecretFile]:\n        \"Unable to read the secret file.\",\n    [ManagedIdentityErrorCodes.userAssignedNotAvailableAtRuntime]:\n        \"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.\",\n    [ManagedIdentityErrorCodes.wwwAuthenticateHeaderMissing]:\n        \"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.\",\n    [ManagedIdentityErrorCodes.wwwAuthenticateHeaderUnsupportedFormat]:\n        \"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format.\",\n};\n\nexport class ManagedIdentityError extends AuthError {\n    constructor(errorCode: string) {\n        super(errorCode, ManagedIdentityErrorMessages[errorCode]);\n        this.name = \"ManagedIdentityError\";\n        Object.setPrototypeOf(this, ManagedIdentityError.prototype);\n    }\n}\n\nexport function createManagedIdentityError(\n    errorCode: string\n): ManagedIdentityError {\n    return new ManagedIdentityError(errorCode);\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { AuthError } from \"@azure/msal-common/node\";\n\n/**\n * NodeAuthErrorMessage class containing string constants used by error codes and messages.\n */\nexport const NodeAuthErrorMessage = {\n    invalidLoopbackAddressType: {\n        code: \"invalid_loopback_server_address_type\",\n        desc: \"Loopback server address is not type string. This is unexpected.\",\n    },\n    unableToLoadRedirectUri: {\n        code: \"unable_to_load_redirectUrl\",\n        desc: \"Loopback server callback was invoked without a url. This is unexpected.\",\n    },\n    noAuthCodeInResponse: {\n        code: \"no_auth_code_in_response\",\n        desc: \"No auth code found in the server response. Please check your network trace to determine what happened.\",\n    },\n    noLoopbackServerExists: {\n        code: \"no_loopback_server_exists\",\n        desc: \"No loopback server exists yet.\",\n    },\n    loopbackServerAlreadyExists: {\n        code: \"loopback_server_already_exists\",\n        desc: \"Loopback server already exists. Cannot create another.\",\n    },\n    loopbackServerTimeout: {\n        code: \"loopback_server_timeout\",\n        desc: \"Timed out waiting for auth code listener to be registered.\",\n    },\n    stateNotFoundError: {\n        code: \"state_not_found\",\n        desc: \"State not found. Please verify that the request originated from msal.\",\n    },\n    thumbprintMissing: {\n        code: \"thumbprint_missing_from_client_certificate\",\n        desc: \"Client certificate does not contain a SHA-1 or SHA-256 thumbprint.\",\n    },\n    redirectUriNotSupported: {\n        code: \"redirect_uri_not_supported\",\n        desc: \"RedirectUri is not supported in this scenario. Please remove redirectUri from the request.\",\n    },\n};\n\nexport class NodeAuthError extends AuthError {\n    constructor(errorCode: string, errorMessage?: string) {\n        super(errorCode, errorMessage);\n        this.name = \"NodeAuthError\";\n    }\n\n    /**\n     * Creates an error thrown if loopback server address is of type string.\n     */\n    static createInvalidLoopbackAddressTypeError(): NodeAuthError {\n        return new NodeAuthError(\n            NodeAuthErrorMessage.invalidLoopbackAddressType.code,\n            `${NodeAuthErrorMessage.invalidLoopbackAddressType.desc}`\n        );\n    }\n\n    /**\n     * Creates an error thrown if the loopback server is unable to get a url.\n     */\n    static createUnableToLoadRedirectUrlError(): NodeAuthError {\n        return new NodeAuthError(\n            NodeAuthErrorMessage.unableToLoadRedirectUri.code,\n            `${NodeAuthErrorMessage.unableToLoadRedirectUri.desc}`\n        );\n    }\n\n    /**\n     * Creates an error thrown if the server response does not contain an auth code.\n     */\n    static createNoAuthCodeInResponseError(): NodeAuthError {\n        return new NodeAuthError(\n            NodeAuthErrorMessage.noAuthCodeInResponse.code,\n            `${NodeAuthErrorMessage.noAuthCodeInResponse.desc}`\n        );\n    }\n\n    /**\n     * Creates an error thrown if the loopback server has not been spun up yet.\n     */\n    static createNoLoopbackServerExistsError(): NodeAuthError {\n        return new NodeAuthError(\n            NodeAuthErrorMessage.noLoopbackServerExists.code,\n            `${NodeAuthErrorMessage.noLoopbackServerExists.desc}`\n        );\n    }\n\n    /**\n     * Creates an error thrown if a loopback server already exists when attempting to create another one.\n     */\n    static createLoopbackServerAlreadyExistsError(): NodeAuthError {\n        return new NodeAuthError(\n            NodeAuthErrorMessage.loopbackServerAlreadyExists.code,\n            `${NodeAuthErrorMessage.loopbackServerAlreadyExists.desc}`\n        );\n    }\n\n    /**\n     * Creates an error thrown if the loopback server times out registering the auth code listener.\n     */\n    static createLoopbackServerTimeoutError(): NodeAuthError {\n        return new NodeAuthError(\n            NodeAuthErrorMessage.loopbackServerTimeout.code,\n            `${NodeAuthErrorMessage.loopbackServerTimeout.desc}`\n        );\n    }\n\n    /**\n     * Creates an error thrown when the state is not present.\n     */\n    static createStateNotFoundError(): NodeAuthError {\n        return new NodeAuthError(\n            NodeAuthErrorMessage.stateNotFoundError.code,\n            NodeAuthErrorMessage.stateNotFoundError.desc\n        );\n    }\n\n    /**\n     * Creates an error thrown when client certificate was provided, but neither the SHA-1 or SHA-256 thumbprints were provided\n     */\n    static createThumbprintMissingError(): NodeAuthError {\n        return new NodeAuthError(\n            NodeAuthErrorMessage.thumbprintMissing.code,\n            NodeAuthErrorMessage.thumbprintMissing.desc\n        );\n    }\n\n    /**\n     * Creates an error thrown when redirectUri is provided in an unsupported scenario\n     */\n    static createRedirectUriNotSupportedError(): NodeAuthError {\n        return new NodeAuthError(\n            NodeAuthErrorMessage.redirectUriNotSupported.code,\n            NodeAuthErrorMessage.redirectUriNotSupported.desc\n        );\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    LoggerOptions,\n    INetworkModule,\n    LogLevel,\n    ProtocolMode,\n    ICachePlugin,\n    Constants,\n    AzureCloudInstance,\n    AzureCloudOptions,\n    ApplicationTelemetry,\n    INativeBrokerPlugin,\n    ClientAssertionCallback,\n} from \"@azure/msal-common/node\";\nimport { HttpClient } from \"../network/HttpClient.js\";\nimport http from \"http\";\nimport https from \"https\";\nimport { ManagedIdentityId } from \"./ManagedIdentityId.js\";\nimport { NodeAuthError } from \"../error/NodeAuthError.js\";\n\n/**\n * - clientId               - Client id of the application.\n * - authority              - Url of the authority. If no value is set, defaults to https://login.microsoftonline.com/common.\n * - knownAuthorities       - Needed for Azure B2C and ADFS. All authorities that will be used in the client application. Only the host of the authority should be passed in.\n * - clientSecret           - Secret string that the application uses when requesting a token. Only used in confidential client applications. Can be created in the Azure app registration portal.\n * - clientAssertion        - A ClientAssertion object containing an assertion string or a callback function that returns an assertion string that the application uses when requesting a token, as well as the assertion's type (urn:ietf:params:oauth:client-assertion-type:jwt-bearer). Only used in confidential client applications.\n * - clientCertificate      - Certificate that the application uses when requesting a token. Only used in confidential client applications. Requires hex encoded X.509 SHA-1 or SHA-256 thumbprint of the certificate, and the PEM encoded private key (string should contain -----BEGIN PRIVATE KEY----- ... -----END PRIVATE KEY----- )\n * - protocolMode           - Enum that represents the protocol that msal follows. Used for configuring proper endpoints.\n * - skipAuthorityMetadataCache - A flag to choose whether to use or not use the local metadata cache during authority initialization. Defaults to false.\n * - encodeExtraQueryParams - A flag to choose whether to encode extra query parameters in the request URL. Defaults to false.\n * @public\n */\nexport type NodeAuthOptions = {\n    clientId: string;\n    authority?: string;\n    clientSecret?: string;\n    clientAssertion?: string | ClientAssertionCallback;\n    clientCertificate?: {\n        /**\n         * @deprecated Use thumbprintSha2 property instead. Thumbprint needs to be computed with SHA-256 algorithm.\n         * SHA-1 is only needed for backwards compatibility with older versions of ADFS.\n         */\n        thumbprint?: string;\n        thumbprintSha256?: string;\n        privateKey: string;\n        x5c?: string;\n    };\n    knownAuthorities?: Array<string>;\n    cloudDiscoveryMetadata?: string;\n    authorityMetadata?: string;\n    clientCapabilities?: Array<string>;\n    protocolMode?: ProtocolMode;\n    azureCloudOptions?: AzureCloudOptions;\n    skipAuthorityMetadataCache?: boolean;\n    /**\n     * @deprecated This flag is deprecated and will be removed in the next major version where all extra query params will be encoded by default.\n     */\n    encodeExtraQueryParams?: boolean;\n};\n\n/**\n * Use this to configure the below cache configuration options:\n *\n * - cachePlugin   - Plugin for reading and writing token cache to disk.\n * @public\n */\nexport type CacheOptions = {\n    cachePlugin?: ICachePlugin;\n    /**\n     * @deprecated claims-based-caching functionality will be removed in the next version of MSALJS\n     */\n    claimsBasedCachingEnabled?: boolean;\n};\n\n/**\n * Use this to configure the below broker options:\n * - nativeBrokerPlugin - Native broker implementation (should be imported from msal-node-extensions)\n *\n * Note: These options are only available for PublicClientApplications using the Authorization Code Flow\n * @public\n */\nexport type BrokerOptions = {\n    nativeBrokerPlugin?: INativeBrokerPlugin;\n};\n\n/**\n * Type for configuring logger and http client options\n *\n * - logger                       - Used to initialize the Logger object; TODO: Expand on logger details or link to the documentation on logger\n * - networkClient                - Http client used for all http get and post calls. Defaults to using MSAL's default http client.\n * @public\n */\nexport type NodeSystemOptions = {\n    loggerOptions?: LoggerOptions;\n    networkClient?: INetworkModule;\n    proxyUrl?: string;\n    customAgentOptions?: http.AgentOptions | https.AgentOptions;\n    disableInternalRetries?: boolean;\n};\n\n/** @public */\nexport type NodeTelemetryOptions = {\n    application?: ApplicationTelemetry;\n};\n\n/**\n * Use the configuration object to configure MSAL and initialize the client application object\n *\n * - auth: this is where you configure auth elements like clientID, authority used for authenticating against the Microsoft Identity Platform\n * - broker: this is where you configure broker options\n * - cache: this is where you configure cache location\n * - system: this is where you can configure the network client, logger\n * - telemetry: this is where you can configure telemetry options\n * @public\n */\nexport type Configuration = {\n    auth: NodeAuthOptions;\n    broker?: BrokerOptions;\n    cache?: CacheOptions;\n    system?: NodeSystemOptions;\n    telemetry?: NodeTelemetryOptions;\n};\n\n/** @public */\nexport type ManagedIdentityIdParams = {\n    userAssignedClientId?: string;\n    userAssignedResourceId?: string;\n    userAssignedObjectId?: string;\n};\n\n/** @public */\nexport type ManagedIdentityConfiguration = {\n    clientCapabilities?: Array<string>;\n    managedIdentityIdParams?: ManagedIdentityIdParams;\n    system?: NodeSystemOptions;\n};\n\nconst DEFAULT_AUTH_OPTIONS: Required<NodeAuthOptions> = {\n    clientId: Constants.EMPTY_STRING,\n    authority: Constants.DEFAULT_AUTHORITY,\n    clientSecret: Constants.EMPTY_STRING,\n    clientAssertion: Constants.EMPTY_STRING,\n    clientCertificate: {\n        thumbprint: Constants.EMPTY_STRING,\n        thumbprintSha256: Constants.EMPTY_STRING,\n        privateKey: Constants.EMPTY_STRING,\n        x5c: Constants.EMPTY_STRING,\n    },\n    knownAuthorities: [],\n    cloudDiscoveryMetadata: Constants.EMPTY_STRING,\n    authorityMetadata: Constants.EMPTY_STRING,\n    clientCapabilities: [],\n    protocolMode: ProtocolMode.AAD,\n    azureCloudOptions: {\n        azureCloudInstance: AzureCloudInstance.None,\n        tenant: Constants.EMPTY_STRING,\n    },\n    skipAuthorityMetadataCache: false,\n    encodeExtraQueryParams: false,\n};\n\nconst DEFAULT_CACHE_OPTIONS: CacheOptions = {\n    claimsBasedCachingEnabled: false,\n};\n\nconst DEFAULT_LOGGER_OPTIONS: LoggerOptions = {\n    loggerCallback: (): void => {\n        // allow users to not set logger call back\n    },\n    piiLoggingEnabled: false,\n    logLevel: LogLevel.Info,\n};\n\nconst DEFAULT_SYSTEM_OPTIONS: Required<NodeSystemOptions> = {\n    loggerOptions: DEFAULT_LOGGER_OPTIONS,\n    networkClient: new HttpClient(),\n    proxyUrl: Constants.EMPTY_STRING,\n    customAgentOptions: {} as http.AgentOptions | https.AgentOptions,\n    disableInternalRetries: false,\n};\n\nconst DEFAULT_TELEMETRY_OPTIONS: Required<NodeTelemetryOptions> = {\n    application: {\n        appName: Constants.EMPTY_STRING,\n        appVersion: Constants.EMPTY_STRING,\n    },\n};\n\n/** @internal */\nexport type NodeConfiguration = {\n    auth: Required<NodeAuthOptions>;\n    broker: BrokerOptions;\n    cache: CacheOptions;\n    system: Required<NodeSystemOptions>;\n    telemetry: Required<NodeTelemetryOptions>;\n};\n\n/**\n * Sets the default options when not explicitly configured from app developer\n *\n * @param auth - Authentication options\n * @param cache - Cache options\n * @param system - System options\n * @param telemetry - Telemetry options\n *\n * @returns Configuration\n * @internal\n */\nexport function buildAppConfiguration({\n    auth,\n    broker,\n    cache,\n    system,\n    telemetry,\n}: Configuration): NodeConfiguration {\n    const systemOptions: Required<NodeSystemOptions> = {\n        ...DEFAULT_SYSTEM_OPTIONS,\n        networkClient: new HttpClient(\n            system?.proxyUrl,\n            system?.customAgentOptions as http.AgentOptions | https.AgentOptions\n        ),\n        loggerOptions: system?.loggerOptions || DEFAULT_LOGGER_OPTIONS,\n        disableInternalRetries: system?.disableInternalRetries || false,\n    };\n\n    // if client certificate was provided, ensure that at least one of the SHA-1 or SHA-256 thumbprints were provided\n    if (\n        !!auth.clientCertificate &&\n        !!!auth.clientCertificate.thumbprint &&\n        !!!auth.clientCertificate.thumbprintSha256\n    ) {\n        throw NodeAuthError.createStateNotFoundError();\n    }\n\n    return {\n        auth: { ...DEFAULT_AUTH_OPTIONS, ...auth },\n        broker: { ...broker },\n        cache: { ...DEFAULT_CACHE_OPTIONS, ...cache },\n        system: { ...systemOptions, ...system },\n        telemetry: { ...DEFAULT_TELEMETRY_OPTIONS, ...telemetry },\n    };\n}\n\n/** @internal */\nexport type ManagedIdentityNodeConfiguration = {\n    clientCapabilities?: Array<string>;\n    disableInternalRetries: boolean;\n    managedIdentityId: ManagedIdentityId;\n    system: Required<\n        Pick<NodeSystemOptions, \"loggerOptions\" | \"networkClient\">\n    >;\n};\n\nexport function buildManagedIdentityConfiguration({\n    clientCapabilities,\n    managedIdentityIdParams,\n    system,\n}: ManagedIdentityConfiguration): ManagedIdentityNodeConfiguration {\n    const managedIdentityId: ManagedIdentityId = new ManagedIdentityId(\n        managedIdentityIdParams\n    );\n\n    const loggerOptions: LoggerOptions =\n        system?.loggerOptions || DEFAULT_LOGGER_OPTIONS;\n\n    let networkClient: INetworkModule;\n    // use developer provided network client if passed in\n    if (system?.networkClient) {\n        networkClient = system.networkClient;\n        // otherwise, create a new one\n    } else {\n        networkClient = new HttpClient(\n            system?.proxyUrl,\n            system?.customAgentOptions as http.AgentOptions | https.AgentOptions\n        );\n    }\n\n    return {\n        clientCapabilities: clientCapabilities || [],\n        managedIdentityId: managedIdentityId,\n        system: {\n            loggerOptions,\n            networkClient,\n        },\n        disableInternalRetries: system?.disableInternalRetries || false,\n    };\n}\n", "import crypto from 'crypto';\nconst rnds8Pool = new Uint8Array(256); // # of random values to pre-allocate\n\nlet poolPtr = rnds8Pool.length;\nexport default function rng() {\n  if (poolPtr > rnds8Pool.length - 16) {\n    crypto.randomFillSync(rnds8Pool);\n    poolPtr = 0;\n  }\n\n  return rnds8Pool.slice(poolPtr, poolPtr += 16);\n}", "export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;", "import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;", "import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  const uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;", "import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;", "export { default as v1 } from './v1.js';\nexport { default as v3 } from './v3.js';\nexport { default as v4 } from './v4.js';\nexport { default as v5 } from './v5.js';\nexport { default as NIL } from './nil.js';\nexport { default as version } from './version.js';\nexport { default as validate } from './validate.js';\nexport { default as stringify } from './stringify.js';\nexport { default as parse } from './parse.js';", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { IGuidGenerator } from \"@azure/msal-common/node\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nexport class GuidGenerator implements IGuidGenerator {\n    /**\n     *\n     * RFC4122: The version 4 UUID is meant for generating UUIDs from truly-random or pseudo-random numbers.\n     * uuidv4 generates guids from cryprtographically-string random\n     */\n    generateGuid(): string {\n        return uuidv4();\n    }\n\n    /**\n     * verifies if a string is  GUID\n     * @param guid\n     */\n    isGuid(guid: string): boolean {\n        const regexGuid =\n            /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n        return regexGuid.test(guid);\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { Constants, EncodingTypes } from \"@azure/msal-common/node\";\n\nexport class EncodingUtils {\n    /**\n     * 'utf8': Multibyte encoded Unicode characters. Many web pages and other document formats use UTF-8.\n     * 'base64': Base64 encoding.\n     *\n     * @param str text\n     */\n    static base64Encode(str: string, encoding?: BufferEncoding): string {\n        return Buffer.from(str, encoding).toString(EncodingTypes.BASE64);\n    }\n\n    /**\n     * encode a URL\n     * @param str\n     */\n    static base64EncodeUrl(str: string, encoding?: BufferEncoding): string {\n        return EncodingUtils.base64Encode(str, encoding)\n            .replace(/=/g, Constants.EMPTY_STRING)\n            .replace(/\\+/g, \"-\")\n            .replace(/\\//g, \"_\");\n    }\n\n    /**\n     * 'utf8': Multibyte encoded Unicode characters. Many web pages and other document formats use UTF-8.\n     * 'base64': Base64 encoding.\n     *\n     * @param base64Str Base64 encoded text\n     */\n    static base64Decode(base64Str: string): string {\n        return Buffer.from(base64Str, EncodingTypes.BASE64).toString(\"utf8\");\n    }\n\n    /**\n     * @param base64Str Base64 encoded Url\n     */\n    static base64DecodeUrl(base64Str: string): string {\n        let str = base64Str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n        while (str.length % 4) {\n            str += \"=\";\n        }\n        return EncodingUtils.base64Decode(str);\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { Hash } from \"../utils/Constants.js\";\nimport crypto from \"crypto\";\n\nexport class HashUtils {\n    /**\n     * generate 'SHA256' hash\n     * @param buffer\n     */\n    sha256(buffer: string): Buffer {\n        return crypto.createHash(Hash.SHA256).update(buffer).digest();\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { Constants, EncodingTypes, PkceCodes } from \"@azure/msal-common/node\";\nimport { CharSet, RANDOM_OCTET_SIZE } from \"../utils/Constants.js\";\nimport { EncodingUtils } from \"../utils/EncodingUtils.js\";\nimport { HashUtils } from \"./HashUtils.js\";\nimport crypto from \"crypto\";\n\n/**\n * https://tools.ietf.org/html/rfc7636#page-8\n */\nexport class PkceGenerator {\n    private hashUtils: HashUtils;\n\n    constructor() {\n        this.hashUtils = new HashUtils();\n    }\n    /**\n     * generates the codeVerfier and the challenge from the codeVerfier\n     * reference: https://tools.ietf.org/html/rfc7636#section-4.1 and https://tools.ietf.org/html/rfc7636#section-4.2\n     */\n    async generatePkceCodes(): Promise<PkceCodes> {\n        const verifier = this.generateCodeVerifier();\n        const challenge = this.generateCodeChallengeFromVerifier(verifier);\n        return { verifier, challenge };\n    }\n\n    /**\n     * generates the codeVerfier; reference: https://tools.ietf.org/html/rfc7636#section-4.1\n     */\n    private generateCodeVerifier(): string {\n        const charArr = [];\n        const maxNumber = 256 - (256 % CharSet.CV_CHARSET.length);\n        while (charArr.length <= RANDOM_OCTET_SIZE) {\n            const byte = crypto.randomBytes(1)[0];\n            if (byte >= maxNumber) {\n                /*\n                 * Ignore this number to maintain randomness.\n                 * Including it would result in an unequal distribution of characters after doing the modulo\n                 */\n                continue;\n            }\n            const index = byte % CharSet.CV_CHARSET.length;\n            charArr.push(CharSet.CV_CHARSET[index]);\n        }\n        const verifier: string = charArr.join(Constants.EMPTY_STRING);\n        return EncodingUtils.base64EncodeUrl(verifier);\n    }\n\n    /**\n     * generate the challenge from the codeVerfier; reference: https://tools.ietf.org/html/rfc7636#section-4.2\n     * @param codeVerifier\n     */\n    private generateCodeChallengeFromVerifier(codeVerifier: string): string {\n        return EncodingUtils.base64EncodeUrl(\n            this.hashUtils.sha256(codeVerifier).toString(EncodingTypes.BASE64),\n            EncodingTypes.BASE64\n        );\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { EncodingTypes, ICrypto, PkceCodes } from \"@azure/msal-common/node\";\nimport { GuidGenerator } from \"./GuidGenerator.js\";\nimport { EncodingUtils } from \"../utils/EncodingUtils.js\";\nimport { PkceGenerator } from \"./PkceGenerator.js\";\nimport { HashUtils } from \"./HashUtils.js\";\n\n/**\n * This class implements MSAL node's crypto interface, which allows it to perform base64 encoding and decoding, generating cryptographically random GUIDs and\n * implementing Proof Key for Code Exchange specs for the OAuth Authorization Code Flow using PKCE (rfc here: https://tools.ietf.org/html/rfc7636).\n * @public\n */\nexport class CryptoProvider implements ICrypto {\n    private pkceGenerator: PkceGenerator;\n    private guidGenerator: GuidGenerator;\n    private hashUtils: HashUtils;\n\n    constructor() {\n        // Browser crypto needs to be validated first before any other classes can be set.\n        this.pkceGenerator = new PkceGenerator();\n        this.guidGenerator = new GuidGenerator();\n        this.hashUtils = new HashUtils();\n    }\n\n    /**\n     * base64 URL safe encoded string\n     */\n    base64UrlEncode(): string {\n        throw new Error(\"Method not implemented.\");\n    }\n    /**\n     * Stringifies and base64Url encodes input public key\n     * @param inputKid - public key id\n     * @returns Base64Url encoded public key\n     */\n    encodeKid(): string {\n        throw new Error(\"Method not implemented.\");\n    }\n\n    /**\n     * Creates a new random GUID - used to populate state and nonce.\n     * @returns string (GUID)\n     */\n    createNewGuid(): string {\n        return this.guidGenerator.generateGuid();\n    }\n\n    /**\n     * Encodes input string to base64.\n     * @param input - string to be encoded\n     */\n    base64Encode(input: string): string {\n        return EncodingUtils.base64Encode(input);\n    }\n\n    /**\n     * Decodes input string from base64.\n     * @param input - string to be decoded\n     */\n    base64Decode(input: string): string {\n        return EncodingUtils.base64Decode(input);\n    }\n\n    /**\n     * Generates PKCE codes used in Authorization Code Flow.\n     */\n    generatePkceCodes(): Promise<PkceCodes> {\n        return this.pkceGenerator.generatePkceCodes();\n    }\n\n    /**\n     * Generates a keypair, stores it and returns a thumbprint - not yet implemented for node\n     */\n    getPublicKeyThumbprint(): Promise<string> {\n        throw new Error(\"Method not implemented.\");\n    }\n\n    /**\n     * Removes cryptographic keypair from key store matching the keyId passed in\n     * @param kid - public key id\n     */\n    removeTokenBindingKey(): Promise<void> {\n        throw new Error(\"Method not implemented.\");\n    }\n\n    /**\n     * Removes all cryptographic keys from Keystore\n     */\n    clearKeystore(): Promise<boolean> {\n        throw new Error(\"Method not implemented.\");\n    }\n\n    /**\n     * Signs the given object as a jwt payload with private key retrieved by given kid - currently not implemented for node\n     */\n    signJwt(): Promise<string> {\n        throw new Error(\"Method not implemented.\");\n    }\n\n    /**\n     * Returns the SHA-256 hash of an input string\n     */\n    async hashString(plainText: string): Promise<string> {\n        return EncodingUtils.base64EncodeUrl(\n            this.hashUtils.sha256(plainText).toString(EncodingTypes.BASE64),\n            EncodingTypes.BASE64\n        );\n    }\n}\n", "/*! @azure/msal-common v15.13.3 2025-12-04 */\n'use strict';\nexport { AuthorizationCodeClient } from './client/AuthorizationCodeClient.mjs';\nexport { RefreshTokenClient } from './client/RefreshTokenClient.mjs';\nexport { SilentFlowClient } from './client/SilentFlowClient.mjs';\nexport { BaseClient } from './client/BaseClient.mjs';\nexport { DEFAULT_SYSTEM_OPTIONS } from './config/ClientConfiguration.mjs';\nexport { buildTenantProfile, tenantIdMatchesHomeTenant, updateAccountTenantProfileData } from './account/AccountInfo.mjs';\nexport { getTenantIdFromIdTokenClaims } from './account/TokenClaims.mjs';\nexport { CcsCredentialType } from './account/CcsCredential.mjs';\nexport { buildClientInfo, buildClientInfoFromHomeAccountId } from './account/ClientInfo.mjs';\nexport { Authority, buildStaticAuthorityOptions, formatAuthorityUri } from './authority/Authority.mjs';\nexport { AzureCloudInstance } from './authority/AuthorityOptions.mjs';\nexport { AuthorityType } from './authority/AuthorityType.mjs';\nexport { ProtocolMode } from './authority/ProtocolMode.mjs';\nexport { CacheManager, DefaultStorageClass } from './cache/CacheManager.mjs';\nexport { AccountEntity } from './cache/entities/AccountEntity.mjs';\nexport { StubbedNetworkModule } from './network/INetworkModule.mjs';\nexport { ThrottlingUtils } from './network/ThrottlingUtils.mjs';\nexport { getRequestThumbprint } from './network/RequestThumbprint.mjs';\nexport { UrlString } from './url/UrlString.mjs';\nexport { DEFAULT_CRYPTO_IMPLEMENTATION } from './crypto/ICrypto.mjs';\nimport * as Authorize from './protocol/Authorize.mjs';\nexport { Authorize as AuthorizeProtocol };\nimport * as RequestParameterBuilder from './request/RequestParameterBuilder.mjs';\nexport { RequestParameterBuilder };\nexport { ResponseHandler, buildAccountToCache } from './response/ResponseHandler.mjs';\nexport { ScopeSet } from './request/ScopeSet.mjs';\nexport { AuthenticationHeaderParser } from './request/AuthenticationHeaderParser.mjs';\nexport { LogLevel, Logger } from './logger/Logger.mjs';\nexport { InteractionRequiredAuthError, InteractionRequiredAuthErrorMessage, createInteractionRequiredAuthError } from './error/InteractionRequiredAuthError.mjs';\nimport * as InteractionRequiredAuthErrorCodes from './error/InteractionRequiredAuthErrorCodes.mjs';\nexport { InteractionRequiredAuthErrorCodes };\nexport { AuthError, AuthErrorMessage, createAuthError } from './error/AuthError.mjs';\nimport * as AuthErrorCodes from './error/AuthErrorCodes.mjs';\nexport { AuthErrorCodes };\nexport { PlatformBrokerError } from './error/PlatformBrokerError.mjs';\nexport { ServerError } from './error/ServerError.mjs';\nexport { NetworkError, createNetworkError } from './error/NetworkError.mjs';\nexport { CacheError, createCacheError } from './error/CacheError.mjs';\nimport * as CacheErrorCodes from './error/CacheErrorCodes.mjs';\nexport { CacheErrorCodes };\nexport { ClientAuthError, ClientAuthErrorMessage, createClientAuthError } from './error/ClientAuthError.mjs';\nimport * as ClientAuthErrorCodes from './error/ClientAuthErrorCodes.mjs';\nexport { ClientAuthErrorCodes };\nexport { ClientConfigurationError, ClientConfigurationErrorMessage, createClientConfigurationError } from './error/ClientConfigurationError.mjs';\nimport * as ClientConfigurationErrorCodes from './error/ClientConfigurationErrorCodes.mjs';\nexport { ClientConfigurationErrorCodes };\nexport { AADAuthorityConstants, AuthenticationScheme, CacheAccountType, CacheOutcome, CacheType, ClaimsRequestKeys, CodeChallengeMethodValues, Constants, CredentialType, DEFAULT_TOKEN_RENEWAL_OFFSET_SEC, EncodingTypes, Errors, GrantType, HeaderNames, HttpMethod, HttpStatus, JsonWebTokenTypes, OAuthResponseType, OIDC_DEFAULT_SCOPES, ONE_DAY_IN_MS, PasswordGrantConstants, PersistentCacheKeys, PromptValue, ResponseMode, ServerResponseType, THE_FAMILY_ID, ThrottlingConstants } from './utils/Constants.mjs';\nexport { StringUtils } from './utils/StringUtils.mjs';\nexport { ProtocolUtils } from './utils/ProtocolUtils.mjs';\nexport { ServerTelemetryManager } from './telemetry/server/ServerTelemetryManager.mjs';\nexport { version } from './packageMetadata.mjs';\nexport { invoke, invokeAsync } from './utils/FunctionWrappers.mjs';\nimport * as AuthToken from './account/AuthToken.mjs';\nexport { AuthToken };\nimport * as AuthorityFactory from './authority/AuthorityFactory.mjs';\nexport { AuthorityFactory };\nimport * as CacheHelpers from './cache/utils/CacheHelpers.mjs';\nexport { CacheHelpers };\nimport * as TimeUtils from './utils/TimeUtils.mjs';\nexport { TimeUtils };\nimport * as UrlUtils from './utils/UrlUtils.mjs';\nexport { UrlUtils };\nimport * as AADServerParamKeys from './constants/AADServerParamKeys.mjs';\nexport { AADServerParamKeys };\nexport { JoseHeader } from './crypto/JoseHeader.mjs';\nexport { IntFields, PerformanceEventStatus, PerformanceEvents } from './telemetry/performance/PerformanceEvent.mjs';\nexport { PerformanceClient } from './telemetry/performance/PerformanceClient.mjs';\nexport { StubPerformanceClient } from './telemetry/performance/StubPerformanceClient.mjs';\nexport { PopTokenGenerator } from './crypto/PopTokenGenerator.mjs';\nexport { TokenCacheContext } from './cache/persistence/TokenCacheContext.mjs';\nimport * as ClientAssertionUtils from './utils/ClientAssertionUtils.mjs';\nexport { ClientAssertionUtils };\nexport { getClientAssertion } from './utils/ClientAssertionUtils.mjs';\n//# sourceMappingURL=index.mjs.map\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    AccountInfo,\n    AuthenticationScheme,\n    CredentialEntity,\n    CredentialType,\n} from \"@azure/msal-common/node\";\nimport { CACHE } from \"../utils/Constants.js\";\n\nexport function generateCredentialKey(credential: CredentialEntity): string {\n    const familyId =\n        (credential.credentialType === CredentialType.REFRESH_TOKEN &&\n            credential.familyId) ||\n        credential.clientId;\n    const scheme =\n        credential.tokenType &&\n        credential.tokenType.toLowerCase() !==\n            AuthenticationScheme.BEARER.toLowerCase()\n            ? credential.tokenType.toLowerCase()\n            : \"\";\n    const credentialKey = [\n        credential.homeAccountId,\n        credential.environment,\n        credential.credentialType,\n        familyId,\n        credential.realm || \"\",\n        credential.target || \"\",\n        credential.requestedClaimsHash || \"\",\n        scheme,\n    ];\n\n    return credentialKey.join(CACHE.KEY_SEPARATOR).toLowerCase();\n}\n\nexport function generateAccountKey(account: AccountInfo): string {\n    const homeTenantId = account.homeAccountId.split(\".\")[1];\n    const accountKey = [\n        account.homeAccountId,\n        account.environment,\n        homeTenantId || account.tenantId || \"\",\n    ];\n\n    return accountKey.join(CACHE.KEY_SEPARATOR).toLowerCase();\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    TokenKeys,\n    AccountEntity,\n    IdTokenEntity,\n    AccessTokenEntity,\n    RefreshTokenEntity,\n    AppMetadataEntity,\n    ServerTelemetryEntity,\n    ThrottlingEntity,\n    CacheManager,\n    Logger,\n    ValidCacheType,\n    ICrypto,\n    AuthorityMetadataEntity,\n    ValidCredentialType,\n    StaticAuthorityOptions,\n    CacheHelpers,\n    CredentialEntity,\n    AccountInfo,\n} from \"@azure/msal-common/node\";\n\nimport { Deserializer } from \"./serializer/Deserializer.js\";\nimport { Serializer } from \"./serializer/Serializer.js\";\nimport {\n    InMemoryCache,\n    JsonCache,\n    CacheKVStore,\n} from \"./serializer/SerializerTypes.js\";\nimport { StubPerformanceClient } from \"@azure/msal-common\";\nimport { generateAccountKey, generateCredentialKey } from \"./CacheHelpers.js\";\n\n/**\n * This class implements Storage for node, reading cache from user specified storage location or an  extension library\n * @public\n */\nexport class NodeStorage extends CacheManager {\n    // Cache configuration, either set by user or default values.\n    private logger: Logger;\n    private cache: CacheKVStore = {};\n    private changeEmitters: Array<Function> = [];\n\n    constructor(\n        logger: Logger,\n        clientId: string,\n        cryptoImpl: ICrypto,\n        staticAuthorityOptions?: StaticAuthorityOptions\n    ) {\n        super(\n            clientId,\n            cryptoImpl,\n            logger,\n            new StubPerformanceClient(),\n            staticAuthorityOptions\n        );\n        this.logger = logger;\n    }\n\n    /**\n     * Queue up callbacks\n     * @param func - a callback function for cache change indication\n     */\n    registerChangeEmitter(func: () => void): void {\n        this.changeEmitters.push(func);\n    }\n\n    /**\n     * Invoke the callback when cache changes\n     */\n    emitChange(): void {\n        this.changeEmitters.forEach((func) => func.call(null));\n    }\n\n    /**\n     * Converts cacheKVStore to InMemoryCache\n     * @param cache - key value store\n     */\n    cacheToInMemoryCache(cache: CacheKVStore): InMemoryCache {\n        const inMemoryCache: InMemoryCache = {\n            accounts: {},\n            idTokens: {},\n            accessTokens: {},\n            refreshTokens: {},\n            appMetadata: {},\n        };\n\n        for (const key in cache) {\n            const value = cache[key];\n            if (typeof value !== \"object\") {\n                continue;\n            }\n            if (value instanceof AccountEntity) {\n                inMemoryCache.accounts[key] = value as AccountEntity;\n            } else if (CacheHelpers.isIdTokenEntity(value)) {\n                inMemoryCache.idTokens[key] = value as IdTokenEntity;\n            } else if (CacheHelpers.isAccessTokenEntity(value)) {\n                inMemoryCache.accessTokens[key] = value as AccessTokenEntity;\n            } else if (CacheHelpers.isRefreshTokenEntity(value)) {\n                inMemoryCache.refreshTokens[key] = value as RefreshTokenEntity;\n            } else if (CacheHelpers.isAppMetadataEntity(key, value)) {\n                inMemoryCache.appMetadata[key] = value as AppMetadataEntity;\n            } else {\n                continue;\n            }\n        }\n\n        return inMemoryCache;\n    }\n\n    /**\n     * converts inMemoryCache to CacheKVStore\n     * @param inMemoryCache - kvstore map for inmemory\n     */\n    inMemoryCacheToCache(inMemoryCache: InMemoryCache): CacheKVStore {\n        // convert in memory cache to a flat Key-Value map\n        let cache = this.getCache();\n\n        cache = {\n            ...cache,\n            ...inMemoryCache.accounts,\n            ...inMemoryCache.idTokens,\n            ...inMemoryCache.accessTokens,\n            ...inMemoryCache.refreshTokens,\n            ...inMemoryCache.appMetadata,\n        };\n\n        // convert in memory cache to a flat Key-Value map\n        return cache;\n    }\n\n    /**\n     * gets the current in memory cache for the client\n     */\n    getInMemoryCache(): InMemoryCache {\n        this.logger.trace(\"Getting in-memory cache\");\n\n        // convert the cache key value store to inMemoryCache\n        const inMemoryCache = this.cacheToInMemoryCache(this.getCache());\n        return inMemoryCache;\n    }\n\n    /**\n     * sets the current in memory cache for the client\n     * @param inMemoryCache - key value map in memory\n     */\n    setInMemoryCache(inMemoryCache: InMemoryCache): void {\n        this.logger.trace(\"Setting in-memory cache\");\n\n        // convert and append the inMemoryCache to cacheKVStore\n        const cache = this.inMemoryCacheToCache(inMemoryCache);\n        this.setCache(cache);\n\n        this.emitChange();\n    }\n\n    /**\n     * get the current cache key-value store\n     */\n    getCache(): CacheKVStore {\n        this.logger.trace(\"Getting cache key-value store\");\n        return this.cache;\n    }\n\n    /**\n     * sets the current cache (key value store)\n     * @param cacheMap - key value map\n     */\n    setCache(cache: CacheKVStore): void {\n        this.logger.trace(\"Setting cache key value store\");\n        this.cache = cache;\n\n        // mark change in cache\n        this.emitChange();\n    }\n\n    /**\n     * Gets cache item with given key.\n     * @param key - lookup key for the cache entry\n     */\n    getItem(key: string): ValidCacheType {\n        this.logger.tracePii(`Item key: ${key}`);\n\n        // read cache\n        const cache = this.getCache();\n        return cache[key];\n    }\n\n    /**\n     * Gets cache item with given key-value\n     * @param key - lookup key for the cache entry\n     * @param value - value of the cache entry\n     */\n    setItem(key: string, value: ValidCacheType): void {\n        this.logger.tracePii(`Item key: ${key}`);\n\n        // read cache\n        const cache = this.getCache();\n        cache[key] = value;\n\n        // write to cache\n        this.setCache(cache);\n    }\n\n    generateCredentialKey(credential: CredentialEntity): string {\n        return generateCredentialKey(credential);\n    }\n\n    generateAccountKey(account: AccountInfo): string {\n        return generateAccountKey(account);\n    }\n\n    getAccountKeys(): string[] {\n        const inMemoryCache = this.getInMemoryCache();\n        const accountKeys = Object.keys(inMemoryCache.accounts);\n\n        return accountKeys;\n    }\n\n    getTokenKeys(): TokenKeys {\n        const inMemoryCache = this.getInMemoryCache();\n        const tokenKeys = {\n            idToken: Object.keys(inMemoryCache.idTokens),\n            accessToken: Object.keys(inMemoryCache.accessTokens),\n            refreshToken: Object.keys(inMemoryCache.refreshTokens),\n        };\n\n        return tokenKeys;\n    }\n\n    /**\n     * Reads account from cache, builds it into an account entity and returns it.\n     * @param accountKey - lookup key to fetch cache type AccountEntity\n     * @returns\n     */\n    getAccount(accountKey: string): AccountEntity | null {\n        const cachedAccount = this.getItem(accountKey);\n        return cachedAccount\n            ? Object.assign(new AccountEntity(), this.getItem(accountKey))\n            : null;\n    }\n\n    /**\n     * set account entity\n     * @param account - cache value to be set of type AccountEntity\n     */\n    async setAccount(account: AccountEntity): Promise<void> {\n        const accountKey = this.generateAccountKey(\n            AccountEntity.getAccountInfo(account)\n        );\n        this.setItem(accountKey, account);\n    }\n\n    /**\n     * fetch the idToken credential\n     * @param idTokenKey - lookup key to fetch cache type IdTokenEntity\n     */\n    getIdTokenCredential(idTokenKey: string): IdTokenEntity | null {\n        const idToken = this.getItem(idTokenKey) as IdTokenEntity;\n        if (CacheHelpers.isIdTokenEntity(idToken)) {\n            return idToken;\n        }\n        return null;\n    }\n\n    /**\n     * set idToken credential\n     * @param idToken - cache value to be set of type IdTokenEntity\n     */\n    async setIdTokenCredential(idToken: IdTokenEntity): Promise<void> {\n        const idTokenKey = this.generateCredentialKey(idToken);\n        this.setItem(idTokenKey, idToken);\n    }\n\n    /**\n     * fetch the accessToken credential\n     * @param accessTokenKey - lookup key to fetch cache type AccessTokenEntity\n     */\n    getAccessTokenCredential(accessTokenKey: string): AccessTokenEntity | null {\n        const accessToken = this.getItem(accessTokenKey) as AccessTokenEntity;\n        if (CacheHelpers.isAccessTokenEntity(accessToken)) {\n            return accessToken;\n        }\n        return null;\n    }\n\n    /**\n     * set accessToken credential\n     * @param accessToken -  cache value to be set of type AccessTokenEntity\n     */\n    async setAccessTokenCredential(\n        accessToken: AccessTokenEntity\n    ): Promise<void> {\n        const accessTokenKey = this.generateCredentialKey(accessToken);\n        this.setItem(accessTokenKey, accessToken);\n    }\n\n    /**\n     * fetch the refreshToken credential\n     * @param refreshTokenKey - lookup key to fetch cache type RefreshTokenEntity\n     */\n    getRefreshTokenCredential(\n        refreshTokenKey: string\n    ): RefreshTokenEntity | null {\n        const refreshToken = this.getItem(\n            refreshTokenKey\n        ) as RefreshTokenEntity;\n        if (CacheHelpers.isRefreshTokenEntity(refreshToken)) {\n            return refreshToken as RefreshTokenEntity;\n        }\n        return null;\n    }\n\n    /**\n     * set refreshToken credential\n     * @param refreshToken - cache value to be set of type RefreshTokenEntity\n     */\n    async setRefreshTokenCredential(\n        refreshToken: RefreshTokenEntity\n    ): Promise<void> {\n        const refreshTokenKey = this.generateCredentialKey(refreshToken);\n        this.setItem(refreshTokenKey, refreshToken);\n    }\n\n    /**\n     * fetch appMetadata entity from the platform cache\n     * @param appMetadataKey - lookup key to fetch cache type AppMetadataEntity\n     */\n    getAppMetadata(appMetadataKey: string): AppMetadataEntity | null {\n        const appMetadata: AppMetadataEntity = this.getItem(\n            appMetadataKey\n        ) as AppMetadataEntity;\n        if (CacheHelpers.isAppMetadataEntity(appMetadataKey, appMetadata)) {\n            return appMetadata;\n        }\n        return null;\n    }\n\n    /**\n     * set appMetadata entity to the platform cache\n     * @param appMetadata - cache value to be set of type AppMetadataEntity\n     */\n    setAppMetadata(appMetadata: AppMetadataEntity): void {\n        const appMetadataKey = CacheHelpers.generateAppMetadataKey(appMetadata);\n        this.setItem(appMetadataKey, appMetadata);\n    }\n\n    /**\n     * fetch server telemetry entity from the platform cache\n     * @param serverTelemetrykey - lookup key to fetch cache type ServerTelemetryEntity\n     */\n    getServerTelemetry(\n        serverTelemetrykey: string\n    ): ServerTelemetryEntity | null {\n        const serverTelemetryEntity: ServerTelemetryEntity = this.getItem(\n            serverTelemetrykey\n        ) as ServerTelemetryEntity;\n        if (\n            serverTelemetryEntity &&\n            CacheHelpers.isServerTelemetryEntity(\n                serverTelemetrykey,\n                serverTelemetryEntity\n            )\n        ) {\n            return serverTelemetryEntity;\n        }\n        return null;\n    }\n\n    /**\n     * set server telemetry entity to the platform cache\n     * @param serverTelemetryKey - lookup key to fetch cache type ServerTelemetryEntity\n     * @param serverTelemetry - cache value to be set of type ServerTelemetryEntity\n     */\n    setServerTelemetry(\n        serverTelemetryKey: string,\n        serverTelemetry: ServerTelemetryEntity\n    ): void {\n        this.setItem(serverTelemetryKey, serverTelemetry);\n    }\n\n    /**\n     * fetch authority metadata entity from the platform cache\n     * @param key - lookup key to fetch cache type AuthorityMetadataEntity\n     */\n    getAuthorityMetadata(key: string): AuthorityMetadataEntity | null {\n        const authorityMetadataEntity: AuthorityMetadataEntity = this.getItem(\n            key\n        ) as AuthorityMetadataEntity;\n        if (\n            authorityMetadataEntity &&\n            CacheHelpers.isAuthorityMetadataEntity(key, authorityMetadataEntity)\n        ) {\n            return authorityMetadataEntity;\n        }\n        return null;\n    }\n\n    /**\n     * Get all authority metadata keys\n     */\n    getAuthorityMetadataKeys(): Array<string> {\n        return this.getKeys().filter((key) => {\n            return this.isAuthorityMetadata(key);\n        });\n    }\n\n    /**\n     * set authority metadata entity to the platform cache\n     * @param key - lookup key to fetch cache type AuthorityMetadataEntity\n     * @param metadata - cache value to be set of type AuthorityMetadataEntity\n     */\n    setAuthorityMetadata(key: string, metadata: AuthorityMetadataEntity): void {\n        this.setItem(key, metadata);\n    }\n\n    /**\n     * fetch throttling entity from the platform cache\n     * @param throttlingCacheKey - lookup key to fetch cache type ThrottlingEntity\n     */\n    getThrottlingCache(throttlingCacheKey: string): ThrottlingEntity | null {\n        const throttlingCache: ThrottlingEntity = this.getItem(\n            throttlingCacheKey\n        ) as ThrottlingEntity;\n        if (\n            throttlingCache &&\n            CacheHelpers.isThrottlingEntity(throttlingCacheKey, throttlingCache)\n        ) {\n            return throttlingCache;\n        }\n        return null;\n    }\n\n    /**\n     * set throttling entity to the platform cache\n     * @param throttlingCacheKey - lookup key to fetch cache type ThrottlingEntity\n     * @param throttlingCache - cache value to be set of type ThrottlingEntity\n     */\n    setThrottlingCache(\n        throttlingCacheKey: string,\n        throttlingCache: ThrottlingEntity\n    ): void {\n        this.setItem(throttlingCacheKey, throttlingCache);\n    }\n\n    /**\n     * Removes the cache item from memory with the given key.\n     * @param key - lookup key to remove a cache entity\n     * @param inMemory - key value map of the cache\n     */\n    removeItem(key: string): boolean {\n        this.logger.tracePii(`Item key: ${key}`);\n\n        // read inMemoryCache\n        let result: boolean = false;\n        const cache = this.getCache();\n\n        if (!!cache[key]) {\n            delete cache[key];\n            result = true;\n        }\n\n        // write to the cache after removal\n        if (result) {\n            this.setCache(cache);\n            this.emitChange();\n        }\n        return result;\n    }\n\n    /**\n     * Remove account entity from the platform cache if it's outdated\n     * @param accountKey - lookup key to fetch cache type AccountEntity\n     */\n    removeOutdatedAccount(accountKey: string): void {\n        this.removeItem(accountKey);\n    }\n\n    /**\n     * Checks whether key is in cache.\n     * @param key - look up key for a cache entity\n     */\n    containsKey(key: string): boolean {\n        return this.getKeys().includes(key);\n    }\n\n    /**\n     * Gets all keys in window.\n     */\n    getKeys(): string[] {\n        this.logger.trace(\"Retrieving all cache keys\");\n\n        // read cache\n        const cache = this.getCache();\n        return [...Object.keys(cache)];\n    }\n\n    /**\n     * Clears all cache entries created by MSAL (except tokens).\n     */\n    clear(): void {\n        this.logger.trace(\"Clearing cache entries created by MSAL\");\n\n        // read inMemoryCache\n        const cacheKeys = this.getKeys();\n\n        // delete each element\n        cacheKeys.forEach((key) => {\n            this.removeItem(key);\n        });\n        this.emitChange();\n    }\n\n    /**\n     * Initialize in memory cache from an exisiting cache vault\n     * @param cache - blob formatted cache (JSON)\n     */\n    static generateInMemoryCache(cache: string): InMemoryCache {\n        return Deserializer.deserializeAllCache(\n            Deserializer.deserializeJSONBlob(cache)\n        );\n    }\n\n    /**\n     * retrieves the final JSON\n     * @param inMemoryCache - itemised cache read from the JSON\n     */\n    static generateJsonCache(inMemoryCache: InMemoryCache): JsonCache {\n        return Serializer.serializeAllCache(inMemoryCache);\n    }\n\n    /**\n     * Updates a credential's cache key if the current cache key is outdated\n     */\n    updateCredentialCacheKey(\n        currentCacheKey: string,\n        credential: ValidCredentialType\n    ): string {\n        const updatedCacheKey = this.generateCredentialKey(credential);\n\n        if (currentCacheKey !== updatedCacheKey) {\n            const cacheItem = this.getItem(currentCacheKey);\n            if (cacheItem) {\n                this.removeItem(currentCacheKey);\n                this.setItem(updatedCacheKey, cacheItem);\n                this.logger.verbose(\n                    `Updated an outdated ${credential.credentialType} cache key`\n                );\n                return updatedCacheKey;\n            } else {\n                this.logger.error(\n                    `Attempted to update an outdated ${credential.credentialType} cache key but no item matching the outdated key was found in storage`\n                );\n            }\n        }\n\n        return currentCacheKey;\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { NodeStorage } from \"./NodeStorage.js\";\nimport {\n    AccountInfo,\n    Logger,\n    ISerializableTokenCache,\n    ICachePlugin,\n    TokenCacheContext,\n} from \"@azure/msal-common/node\";\nimport {\n    InMemoryCache,\n    JsonCache,\n    SerializedAccountEntity,\n    SerializedAccessTokenEntity,\n    SerializedRefreshTokenEntity,\n    SerializedIdTokenEntity,\n    SerializedAppMetadataEntity,\n    CacheKVStore,\n} from \"./serializer/SerializerTypes.js\";\nimport { Deserializer } from \"./serializer/Deserializer.js\";\nimport { Serializer } from \"./serializer/Serializer.js\";\nimport { ITokenCache } from \"./ITokenCache.js\";\nimport { CryptoProvider } from \"../crypto/CryptoProvider.js\";\nimport { GuidGenerator } from \"../crypto/GuidGenerator.js\";\n\nconst defaultSerializedCache: JsonCache = {\n    Account: {},\n    IdToken: {},\n    AccessToken: {},\n    RefreshToken: {},\n    AppMetadata: {},\n};\n\n/**\n * In-memory token cache manager\n * @public\n */\nexport class TokenCache implements ISerializableTokenCache, ITokenCache {\n    private storage: NodeStorage;\n    private cacheHasChanged: boolean;\n    private cacheSnapshot: string;\n    public readonly persistence: ICachePlugin;\n    private logger: Logger;\n\n    constructor(\n        storage: NodeStorage,\n        logger: Logger,\n        cachePlugin?: ICachePlugin\n    ) {\n        this.cacheHasChanged = false;\n        this.storage = storage;\n        this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this));\n        if (cachePlugin) {\n            this.persistence = cachePlugin;\n        }\n        this.logger = logger;\n    }\n\n    /**\n     * Set to true if cache state has changed since last time serialize or writeToPersistence was called\n     */\n    hasChanged(): boolean {\n        return this.cacheHasChanged;\n    }\n\n    /**\n     * Serializes in memory cache to JSON\n     */\n    serialize(): string {\n        this.logger.trace(\"Serializing in-memory cache\");\n        let finalState = Serializer.serializeAllCache(\n            this.storage.getInMemoryCache() as InMemoryCache\n        );\n\n        // if cacheSnapshot not null or empty, merge\n        if (this.cacheSnapshot) {\n            this.logger.trace(\"Reading cache snapshot from disk\");\n            finalState = this.mergeState(\n                JSON.parse(this.cacheSnapshot),\n                finalState\n            );\n        } else {\n            this.logger.trace(\"No cache snapshot to merge\");\n        }\n        this.cacheHasChanged = false;\n\n        return JSON.stringify(finalState);\n    }\n\n    /**\n     * Deserializes JSON to in-memory cache. JSON should be in MSAL cache schema format\n     * @param cache - blob formatted cache\n     */\n    deserialize(cache: string): void {\n        this.logger.trace(\"Deserializing JSON to in-memory cache\");\n        this.cacheSnapshot = cache;\n\n        if (this.cacheSnapshot) {\n            this.logger.trace(\"Reading cache snapshot from disk\");\n            const deserializedCache = Deserializer.deserializeAllCache(\n                this.overlayDefaults(JSON.parse(this.cacheSnapshot))\n            );\n            this.storage.setInMemoryCache(deserializedCache);\n        } else {\n            this.logger.trace(\"No cache snapshot to deserialize\");\n        }\n    }\n\n    /**\n     * Fetches the cache key-value map\n     */\n    getKVStore(): CacheKVStore {\n        return this.storage.getCache();\n    }\n\n    /**\n     * Gets cache snapshot in CacheKVStore format\n     */\n    getCacheSnapshot(): CacheKVStore {\n        const deserializedPersistentStorage = NodeStorage.generateInMemoryCache(\n            this.cacheSnapshot\n        );\n        return this.storage.inMemoryCacheToCache(deserializedPersistentStorage);\n    }\n\n    /**\n     * API that retrieves all accounts currently in cache to the user\n     */\n    async getAllAccounts(\n        correlationId: string = new CryptoProvider().createNewGuid()\n    ): Promise<AccountInfo[]> {\n        this.logger.trace(\"getAllAccounts called\");\n        let cacheContext;\n        try {\n            if (this.persistence) {\n                cacheContext = new TokenCacheContext(this, false);\n                await this.persistence.beforeCacheAccess(cacheContext);\n            }\n            return this.storage.getAllAccounts({}, correlationId);\n        } finally {\n            if (this.persistence && cacheContext) {\n                await this.persistence.afterCacheAccess(cacheContext);\n            }\n        }\n    }\n\n    /**\n     * Returns the signed in account matching homeAccountId.\n     * (the account object is created at the time of successful login)\n     * or null when no matching account is found\n     * @param homeAccountId - unique identifier for an account (uid.utid)\n     */\n    async getAccountByHomeId(\n        homeAccountId: string\n    ): Promise<AccountInfo | null> {\n        const allAccounts = await this.getAllAccounts();\n        if (homeAccountId && allAccounts && allAccounts.length) {\n            return (\n                allAccounts.filter(\n                    (accountObj) => accountObj.homeAccountId === homeAccountId\n                )[0] || null\n            );\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * Returns the signed in account matching localAccountId.\n     * (the account object is created at the time of successful login)\n     * or null when no matching account is found\n     * @param localAccountId - unique identifier of an account (sub/obj when homeAccountId cannot be populated)\n     */\n    async getAccountByLocalId(\n        localAccountId: string\n    ): Promise<AccountInfo | null> {\n        const allAccounts = await this.getAllAccounts();\n        if (localAccountId && allAccounts && allAccounts.length) {\n            return (\n                allAccounts.filter(\n                    (accountObj) => accountObj.localAccountId === localAccountId\n                )[0] || null\n            );\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * API to remove a specific account and the relevant data from cache\n     * @param account - AccountInfo passed by the user\n     */\n    async removeAccount(\n        account: AccountInfo,\n        correlationId?: string\n    ): Promise<void> {\n        this.logger.trace(\"removeAccount called\");\n        let cacheContext;\n        try {\n            if (this.persistence) {\n                cacheContext = new TokenCacheContext(this, true);\n                await this.persistence.beforeCacheAccess(cacheContext);\n            }\n            this.storage.removeAccount(\n                account,\n                correlationId || new GuidGenerator().generateGuid()\n            );\n        } finally {\n            if (this.persistence && cacheContext) {\n                await this.persistence.afterCacheAccess(cacheContext);\n            }\n        }\n    }\n\n    /**\n     * Overwrites in-memory cache with persistent cache\n     */\n    async overwriteCache(): Promise<void> {\n        if (!this.persistence) {\n            this.logger.info(\n                \"No persistence layer specified, cache cannot be overwritten\"\n            );\n            return;\n        }\n        this.logger.info(\"Overwriting in-memory cache with persistent cache\");\n        this.storage.clear();\n        const cacheContext = new TokenCacheContext(this, false);\n        await this.persistence.beforeCacheAccess(cacheContext);\n        const cacheSnapshot = this.getCacheSnapshot();\n        this.storage.setCache(cacheSnapshot);\n        await this.persistence.afterCacheAccess(cacheContext);\n    }\n\n    /**\n     * Called when the cache has changed state.\n     */\n    private handleChangeEvent() {\n        this.cacheHasChanged = true;\n    }\n\n    /**\n     * Merge in memory cache with the cache snapshot.\n     * @param oldState - cache before changes\n     * @param currentState - current cache state in the library\n     */\n    private mergeState(\n        oldState: JsonCache,\n        currentState: JsonCache\n    ): JsonCache {\n        this.logger.trace(\"Merging in-memory cache with cache snapshot\");\n        const stateAfterRemoval = this.mergeRemovals(oldState, currentState);\n        return this.mergeUpdates(stateAfterRemoval, currentState);\n    }\n\n    /**\n     * Deep update of oldState based on newState values\n     * @param oldState - cache before changes\n     * @param newState - updated cache\n     */\n    private mergeUpdates(oldState: object, newState: object): JsonCache {\n        Object.keys(newState).forEach((newKey: string) => {\n            const newValue = newState[newKey];\n\n            // if oldState does not contain value but newValue does, add it\n            if (!oldState.hasOwnProperty(newKey)) {\n                if (newValue !== null) {\n                    oldState[newKey] = newValue;\n                }\n            } else {\n                // both oldState and newState contain the key, do deep update\n                const newValueNotNull = newValue !== null;\n                const newValueIsObject = typeof newValue === \"object\";\n                const newValueIsNotArray = !Array.isArray(newValue);\n                const oldStateNotUndefinedOrNull =\n                    typeof oldState[newKey] !== \"undefined\" &&\n                    oldState[newKey] !== null;\n\n                if (\n                    newValueNotNull &&\n                    newValueIsObject &&\n                    newValueIsNotArray &&\n                    oldStateNotUndefinedOrNull\n                ) {\n                    this.mergeUpdates(oldState[newKey], newValue);\n                } else {\n                    oldState[newKey] = newValue;\n                }\n            }\n        });\n\n        return oldState as JsonCache;\n    }\n\n    /**\n     * Removes entities in oldState that the were removed from newState. If there are any unknown values in root of\n     * oldState that are not recognized, they are left untouched.\n     * @param oldState - cache before changes\n     * @param newState - updated cache\n     */\n    private mergeRemovals(oldState: JsonCache, newState: JsonCache): JsonCache {\n        this.logger.trace(\"Remove updated entries in cache\");\n        const accounts = oldState.Account\n            ? this.mergeRemovalsDict<SerializedAccountEntity>(\n                  oldState.Account,\n                  newState.Account\n              )\n            : oldState.Account;\n        const accessTokens = oldState.AccessToken\n            ? this.mergeRemovalsDict<SerializedAccessTokenEntity>(\n                  oldState.AccessToken,\n                  newState.AccessToken\n              )\n            : oldState.AccessToken;\n        const refreshTokens = oldState.RefreshToken\n            ? this.mergeRemovalsDict<SerializedRefreshTokenEntity>(\n                  oldState.RefreshToken,\n                  newState.RefreshToken\n              )\n            : oldState.RefreshToken;\n        const idTokens = oldState.IdToken\n            ? this.mergeRemovalsDict<SerializedIdTokenEntity>(\n                  oldState.IdToken,\n                  newState.IdToken\n              )\n            : oldState.IdToken;\n        const appMetadata = oldState.AppMetadata\n            ? this.mergeRemovalsDict<SerializedAppMetadataEntity>(\n                  oldState.AppMetadata,\n                  newState.AppMetadata\n              )\n            : oldState.AppMetadata;\n\n        return {\n            ...oldState,\n            Account: accounts,\n            AccessToken: accessTokens,\n            RefreshToken: refreshTokens,\n            IdToken: idTokens,\n            AppMetadata: appMetadata,\n        };\n    }\n\n    /**\n     * Helper to merge new cache with the old one\n     * @param oldState - cache before changes\n     * @param newState - updated cache\n     */\n    private mergeRemovalsDict<T>(\n        oldState: Record<string, T>,\n        newState?: Record<string, T>\n    ): Record<string, T> {\n        const finalState = { ...oldState };\n        Object.keys(oldState).forEach((oldKey) => {\n            if (!newState || !newState.hasOwnProperty(oldKey)) {\n                delete finalState[oldKey];\n            }\n        });\n        return finalState;\n    }\n\n    /**\n     * Helper to overlay as a part of cache merge\n     * @param passedInCache - cache read from the blob\n     */\n    private overlayDefaults(passedInCache: JsonCache): JsonCache {\n        this.logger.trace(\"Overlaying input cache with the default cache\");\n        return {\n            Account: {\n                ...defaultSerializedCache.Account,\n                ...passedInCache.Account,\n            },\n            IdToken: {\n                ...defaultSerializedCache.IdToken,\n                ...passedInCache.IdToken,\n            },\n            AccessToken: {\n                ...defaultSerializedCache.AccessToken,\n                ...passedInCache.AccessToken,\n            },\n            RefreshToken: {\n                ...defaultSerializedCache.RefreshToken,\n                ...passedInCache.RefreshToken,\n            },\n            AppMetadata: {\n                ...defaultSerializedCache.AppMetadata,\n                ...passedInCache.AppMetadata,\n            },\n        };\n    }\n}\n", "/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n", "/*global module, process*/\nvar Buffer = require('safe-buffer').Buffer;\nvar Stream = require('stream');\nvar util = require('util');\n\nfunction DataStream(data) {\n  this.buffer = null;\n  this.writable = true;\n  this.readable = true;\n\n  // No input\n  if (!data) {\n    this.buffer = Buffer.alloc(0);\n    return this;\n  }\n\n  // Stream\n  if (typeof data.pipe === 'function') {\n    this.buffer = Buffer.alloc(0);\n    data.pipe(this);\n    return this;\n  }\n\n  // Buffer or String\n  // or Object (assumedly a passworded key)\n  if (data.length || typeof data === 'object') {\n    this.buffer = data;\n    this.writable = false;\n    process.nextTick(function () {\n      this.emit('end', data);\n      this.readable = false;\n      this.emit('close');\n    }.bind(this));\n    return this;\n  }\n\n  throw new TypeError('Unexpected data type ('+ typeof data + ')');\n}\nutil.inherits(DataStream, Stream);\n\nDataStream.prototype.write = function write(data) {\n  this.buffer = Buffer.concat([this.buffer, Buffer.from(data)]);\n  this.emit('data', data);\n};\n\nDataStream.prototype.end = function end(data) {\n  if (data)\n    this.write(data);\n  this.emit('end', data);\n  this.emit('close');\n  this.writable = false;\n  this.readable = false;\n};\n\nmodule.exports = DataStream;\n", "'use strict';\n\nfunction getParamSize(keySize) {\n\tvar result = ((keySize / 8) | 0) + (keySize % 8 === 0 ? 0 : 1);\n\treturn result;\n}\n\nvar paramBytesForAlg = {\n\tES256: getParamSize(256),\n\tES384: getParamSize(384),\n\tES512: getParamSize(521)\n};\n\nfunction getParamBytesForAlg(alg) {\n\tvar paramBytes = paramBytesForAlg[alg];\n\tif (paramBytes) {\n\t\treturn paramBytes;\n\t}\n\n\tthrow new Error('Unknown algorithm \"' + alg + '\"');\n}\n\nmodule.exports = getParamBytesForAlg;\n", "'use strict';\n\nvar Buffer = require('safe-buffer').Buffer;\n\nvar getParamBytesForAlg = require('./param-bytes-for-alg');\n\nvar MAX_OCTET = 0x80,\n\tCLASS_UNIVERSAL = 0,\n\tPRIMITIVE_BIT = 0x20,\n\tTAG_SEQ = 0x10,\n\tTAG_INT = 0x02,\n\tENCODED_TAG_SEQ = (TAG_SEQ | PRIMITIVE_BIT) | (CLASS_UNIVERSAL << 6),\n\tENCODED_TAG_INT = TAG_INT | (CLASS_UNIVERSAL << 6);\n\nfunction base64Url(base64) {\n\treturn base64\n\t\t.replace(/=/g, '')\n\t\t.replace(/\\+/g, '-')\n\t\t.replace(/\\//g, '_');\n}\n\nfunction signatureAsBuffer(signature) {\n\tif (Buffer.isBuffer(signature)) {\n\t\treturn signature;\n\t} else if ('string' === typeof signature) {\n\t\treturn Buffer.from(signature, 'base64');\n\t}\n\n\tthrow new TypeError('ECDSA signature must be a Base64 string or a Buffer');\n}\n\nfunction derToJose(signature, alg) {\n\tsignature = signatureAsBuffer(signature);\n\tvar paramBytes = getParamBytesForAlg(alg);\n\n\t// the DER encoded param should at most be the param size, plus a padding\n\t// zero, since due to being a signed integer\n\tvar maxEncodedParamLength = paramBytes + 1;\n\n\tvar inputLength = signature.length;\n\n\tvar offset = 0;\n\tif (signature[offset++] !== ENCODED_TAG_SEQ) {\n\t\tthrow new Error('Could not find expected \"seq\"');\n\t}\n\n\tvar seqLength = signature[offset++];\n\tif (seqLength === (MAX_OCTET | 1)) {\n\t\tseqLength = signature[offset++];\n\t}\n\n\tif (inputLength - offset < seqLength) {\n\t\tthrow new Error('\"seq\" specified length of \"' + seqLength + '\", only \"' + (inputLength - offset) + '\" remaining');\n\t}\n\n\tif (signature[offset++] !== ENCODED_TAG_INT) {\n\t\tthrow new Error('Could not find expected \"int\" for \"r\"');\n\t}\n\n\tvar rLength = signature[offset++];\n\n\tif (inputLength - offset - 2 < rLength) {\n\t\tthrow new Error('\"r\" specified length of \"' + rLength + '\", only \"' + (inputLength - offset - 2) + '\" available');\n\t}\n\n\tif (maxEncodedParamLength < rLength) {\n\t\tthrow new Error('\"r\" specified length of \"' + rLength + '\", max of \"' + maxEncodedParamLength + '\" is acceptable');\n\t}\n\n\tvar rOffset = offset;\n\toffset += rLength;\n\n\tif (signature[offset++] !== ENCODED_TAG_INT) {\n\t\tthrow new Error('Could not find expected \"int\" for \"s\"');\n\t}\n\n\tvar sLength = signature[offset++];\n\n\tif (inputLength - offset !== sLength) {\n\t\tthrow new Error('\"s\" specified length of \"' + sLength + '\", expected \"' + (inputLength - offset) + '\"');\n\t}\n\n\tif (maxEncodedParamLength < sLength) {\n\t\tthrow new Error('\"s\" specified length of \"' + sLength + '\", max of \"' + maxEncodedParamLength + '\" is acceptable');\n\t}\n\n\tvar sOffset = offset;\n\toffset += sLength;\n\n\tif (offset !== inputLength) {\n\t\tthrow new Error('Expected to consume entire buffer, but \"' + (inputLength - offset) + '\" bytes remain');\n\t}\n\n\tvar rPadding = paramBytes - rLength,\n\t\tsPadding = paramBytes - sLength;\n\n\tvar dst = Buffer.allocUnsafe(rPadding + rLength + sPadding + sLength);\n\n\tfor (offset = 0; offset < rPadding; ++offset) {\n\t\tdst[offset] = 0;\n\t}\n\tsignature.copy(dst, offset, rOffset + Math.max(-rPadding, 0), rOffset + rLength);\n\n\toffset = paramBytes;\n\n\tfor (var o = offset; offset < o + sPadding; ++offset) {\n\t\tdst[offset] = 0;\n\t}\n\tsignature.copy(dst, offset, sOffset + Math.max(-sPadding, 0), sOffset + sLength);\n\n\tdst = dst.toString('base64');\n\tdst = base64Url(dst);\n\n\treturn dst;\n}\n\nfunction countPadding(buf, start, stop) {\n\tvar padding = 0;\n\twhile (start + padding < stop && buf[start + padding] === 0) {\n\t\t++padding;\n\t}\n\n\tvar needsSign = buf[start + padding] >= MAX_OCTET;\n\tif (needsSign) {\n\t\t--padding;\n\t}\n\n\treturn padding;\n}\n\nfunction joseToDer(signature, alg) {\n\tsignature = signatureAsBuffer(signature);\n\tvar paramBytes = getParamBytesForAlg(alg);\n\n\tvar signatureBytes = signature.length;\n\tif (signatureBytes !== paramBytes * 2) {\n\t\tthrow new TypeError('\"' + alg + '\" signatures must be \"' + paramBytes * 2 + '\" bytes, saw \"' + signatureBytes + '\"');\n\t}\n\n\tvar rPadding = countPadding(signature, 0, paramBytes);\n\tvar sPadding = countPadding(signature, paramBytes, signature.length);\n\tvar rLength = paramBytes - rPadding;\n\tvar sLength = paramBytes - sPadding;\n\n\tvar rsBytes = 1 + 1 + rLength + 1 + 1 + sLength;\n\n\tvar shortLength = rsBytes < MAX_OCTET;\n\n\tvar dst = Buffer.allocUnsafe((shortLength ? 2 : 3) + rsBytes);\n\n\tvar offset = 0;\n\tdst[offset++] = ENCODED_TAG_SEQ;\n\tif (shortLength) {\n\t\t// Bit 8 has value \"0\"\n\t\t// bits 7-1 give the length.\n\t\tdst[offset++] = rsBytes;\n\t} else {\n\t\t// Bit 8 of first octet has value \"1\"\n\t\t// bits 7-1 give the number of additional length octets.\n\t\tdst[offset++] = MAX_OCTET\t| 1;\n\t\t// length, base 256\n\t\tdst[offset++] = rsBytes & 0xff;\n\t}\n\tdst[offset++] = ENCODED_TAG_INT;\n\tdst[offset++] = rLength;\n\tif (rPadding < 0) {\n\t\tdst[offset++] = 0;\n\t\toffset += signature.copy(dst, offset, 0, paramBytes);\n\t} else {\n\t\toffset += signature.copy(dst, offset, rPadding, paramBytes);\n\t}\n\tdst[offset++] = ENCODED_TAG_INT;\n\tdst[offset++] = sLength;\n\tif (sPadding < 0) {\n\t\tdst[offset++] = 0;\n\t\tsignature.copy(dst, offset, paramBytes);\n\t} else {\n\t\tsignature.copy(dst, offset, paramBytes + sPadding);\n\t}\n\n\treturn dst;\n}\n\nmodule.exports = {\n\tderToJose: derToJose,\n\tjoseToDer: joseToDer\n};\n", "/*jshint node:true */\n'use strict';\nvar Buffer = require('buffer').Buffer; // browserify\nvar SlowBuffer = require('buffer').SlowBuffer;\n\nmodule.exports = bufferEq;\n\nfunction bufferEq(a, b) {\n\n  // shortcutting on type is necessary for correctness\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    return false;\n  }\n\n  // buffer sizes should be well-known information, so despite this\n  // shortcutting, it doesn't leak any information about the *contents* of the\n  // buffers.\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  var c = 0;\n  for (var i = 0; i < a.length; i++) {\n    /*jshint bitwise:false */\n    c |= a[i] ^ b[i]; // XOR\n  }\n  return c === 0;\n}\n\nbufferEq.install = function() {\n  Buffer.prototype.equal = SlowBuffer.prototype.equal = function equal(that) {\n    return bufferEq(this, that);\n  };\n};\n\nvar origBufEqual = Buffer.prototype.equal;\nvar origSlowBufEqual = SlowBuffer.prototype.equal;\nbufferEq.restore = function() {\n  Buffer.prototype.equal = origBufEqual;\n  SlowBuffer.prototype.equal = origSlowBufEqual;\n};\n", "var Buffer = require('safe-buffer').Buffer;\nvar crypto = require('crypto');\nvar formatEcdsa = require('ecdsa-sig-formatter');\nvar util = require('util');\n\nvar MSG_INVALID_ALGORITHM = '\"%s\" is not a valid algorithm.\\n  Supported algorithms are:\\n  \"HS256\", \"HS384\", \"HS512\", \"RS256\", \"RS384\", \"RS512\", \"PS256\", \"PS384\", \"PS512\", \"ES256\", \"ES384\", \"ES512\" and \"none\".'\nvar MSG_INVALID_SECRET = 'secret must be a string or buffer';\nvar MSG_INVALID_VERIFIER_KEY = 'key must be a string or a buffer';\nvar MSG_INVALID_SIGNER_KEY = 'key must be a string, a buffer or an object';\n\nvar supportsKeyObjects = typeof crypto.createPublicKey === 'function';\nif (supportsKeyObjects) {\n  MSG_INVALID_VERIFIER_KEY += ' or a KeyObject';\n  MSG_INVALID_SECRET += 'or a KeyObject';\n}\n\nfunction checkIsPublicKey(key) {\n  if (Buffer.isBuffer(key)) {\n    return;\n  }\n\n  if (typeof key === 'string') {\n    return;\n  }\n\n  if (!supportsKeyObjects) {\n    throw typeError(MSG_INVALID_VERIFIER_KEY);\n  }\n\n  if (typeof key !== 'object') {\n    throw typeError(MSG_INVALID_VERIFIER_KEY);\n  }\n\n  if (typeof key.type !== 'string') {\n    throw typeError(MSG_INVALID_VERIFIER_KEY);\n  }\n\n  if (typeof key.asymmetricKeyType !== 'string') {\n    throw typeError(MSG_INVALID_VERIFIER_KEY);\n  }\n\n  if (typeof key.export !== 'function') {\n    throw typeError(MSG_INVALID_VERIFIER_KEY);\n  }\n};\n\nfunction checkIsPrivateKey(key) {\n  if (Buffer.isBuffer(key)) {\n    return;\n  }\n\n  if (typeof key === 'string') {\n    return;\n  }\n\n  if (typeof key === 'object') {\n    return;\n  }\n\n  throw typeError(MSG_INVALID_SIGNER_KEY);\n};\n\nfunction checkIsSecretKey(key) {\n  if (Buffer.isBuffer(key)) {\n    return;\n  }\n\n  if (typeof key === 'string') {\n    return key;\n  }\n\n  if (!supportsKeyObjects) {\n    throw typeError(MSG_INVALID_SECRET);\n  }\n\n  if (typeof key !== 'object') {\n    throw typeError(MSG_INVALID_SECRET);\n  }\n\n  if (key.type !== 'secret') {\n    throw typeError(MSG_INVALID_SECRET);\n  }\n\n  if (typeof key.export !== 'function') {\n    throw typeError(MSG_INVALID_SECRET);\n  }\n}\n\nfunction fromBase64(base64) {\n  return base64\n    .replace(/=/g, '')\n    .replace(/\\+/g, '-')\n    .replace(/\\//g, '_');\n}\n\nfunction toBase64(base64url) {\n  base64url = base64url.toString();\n\n  var padding = 4 - base64url.length % 4;\n  if (padding !== 4) {\n    for (var i = 0; i < padding; ++i) {\n      base64url += '=';\n    }\n  }\n\n  return base64url\n    .replace(/\\-/g, '+')\n    .replace(/_/g, '/');\n}\n\nfunction typeError(template) {\n  var args = [].slice.call(arguments, 1);\n  var errMsg = util.format.bind(util, template).apply(null, args);\n  return new TypeError(errMsg);\n}\n\nfunction bufferOrString(obj) {\n  return Buffer.isBuffer(obj) || typeof obj === 'string';\n}\n\nfunction normalizeInput(thing) {\n  if (!bufferOrString(thing))\n    thing = JSON.stringify(thing);\n  return thing;\n}\n\nfunction createHmacSigner(bits) {\n  return function sign(thing, secret) {\n    checkIsSecretKey(secret);\n    thing = normalizeInput(thing);\n    var hmac = crypto.createHmac('sha' + bits, secret);\n    var sig = (hmac.update(thing), hmac.digest('base64'))\n    return fromBase64(sig);\n  }\n}\n\nvar bufferEqual;\nvar timingSafeEqual = 'timingSafeEqual' in crypto ? function timingSafeEqual(a, b) {\n  if (a.byteLength !== b.byteLength) {\n    return false;\n  }\n\n  return crypto.timingSafeEqual(a, b)\n} : function timingSafeEqual(a, b) {\n  if (!bufferEqual) {\n    bufferEqual = require('buffer-equal-constant-time');\n  }\n\n  return bufferEqual(a, b)\n}\n\nfunction createHmacVerifier(bits) {\n  return function verify(thing, signature, secret) {\n    var computedSig = createHmacSigner(bits)(thing, secret);\n    return timingSafeEqual(Buffer.from(signature), Buffer.from(computedSig));\n  }\n}\n\nfunction createKeySigner(bits) {\n return function sign(thing, privateKey) {\n    checkIsPrivateKey(privateKey);\n    thing = normalizeInput(thing);\n    // Even though we are specifying \"RSA\" here, this works with ECDSA\n    // keys as well.\n    var signer = crypto.createSign('RSA-SHA' + bits);\n    var sig = (signer.update(thing), signer.sign(privateKey, 'base64'));\n    return fromBase64(sig);\n  }\n}\n\nfunction createKeyVerifier(bits) {\n  return function verify(thing, signature, publicKey) {\n    checkIsPublicKey(publicKey);\n    thing = normalizeInput(thing);\n    signature = toBase64(signature);\n    var verifier = crypto.createVerify('RSA-SHA' + bits);\n    verifier.update(thing);\n    return verifier.verify(publicKey, signature, 'base64');\n  }\n}\n\nfunction createPSSKeySigner(bits) {\n  return function sign(thing, privateKey) {\n    checkIsPrivateKey(privateKey);\n    thing = normalizeInput(thing);\n    var signer = crypto.createSign('RSA-SHA' + bits);\n    var sig = (signer.update(thing), signer.sign({\n      key: privateKey,\n      padding: crypto.constants.RSA_PKCS1_PSS_PADDING,\n      saltLength: crypto.constants.RSA_PSS_SALTLEN_DIGEST\n    }, 'base64'));\n    return fromBase64(sig);\n  }\n}\n\nfunction createPSSKeyVerifier(bits) {\n  return function verify(thing, signature, publicKey) {\n    checkIsPublicKey(publicKey);\n    thing = normalizeInput(thing);\n    signature = toBase64(signature);\n    var verifier = crypto.createVerify('RSA-SHA' + bits);\n    verifier.update(thing);\n    return verifier.verify({\n      key: publicKey,\n      padding: crypto.constants.RSA_PKCS1_PSS_PADDING,\n      saltLength: crypto.constants.RSA_PSS_SALTLEN_DIGEST\n    }, signature, 'base64');\n  }\n}\n\nfunction createECDSASigner(bits) {\n  var inner = createKeySigner(bits);\n  return function sign() {\n    var signature = inner.apply(null, arguments);\n    signature = formatEcdsa.derToJose(signature, 'ES' + bits);\n    return signature;\n  };\n}\n\nfunction createECDSAVerifer(bits) {\n  var inner = createKeyVerifier(bits);\n  return function verify(thing, signature, publicKey) {\n    signature = formatEcdsa.joseToDer(signature, 'ES' + bits).toString('base64');\n    var result = inner(thing, signature, publicKey);\n    return result;\n  };\n}\n\nfunction createNoneSigner() {\n  return function sign() {\n    return '';\n  }\n}\n\nfunction createNoneVerifier() {\n  return function verify(thing, signature) {\n    return signature === '';\n  }\n}\n\nmodule.exports = function jwa(algorithm) {\n  var signerFactories = {\n    hs: createHmacSigner,\n    rs: createKeySigner,\n    ps: createPSSKeySigner,\n    es: createECDSASigner,\n    none: createNoneSigner,\n  }\n  var verifierFactories = {\n    hs: createHmacVerifier,\n    rs: createKeyVerifier,\n    ps: createPSSKeyVerifier,\n    es: createECDSAVerifer,\n    none: createNoneVerifier,\n  }\n  var match = algorithm.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);\n  if (!match)\n    throw typeError(MSG_INVALID_ALGORITHM, algorithm);\n  var algo = (match[1] || match[3]).toLowerCase();\n  var bits = match[2];\n\n  return {\n    sign: signerFactories[algo](bits),\n    verify: verifierFactories[algo](bits),\n  }\n};\n", "/*global module*/\nvar Buffer = require('buffer').Buffer;\n\nmodule.exports = function toString(obj) {\n  if (typeof obj === 'string')\n    return obj;\n  if (typeof obj === 'number' || Buffer.isBuffer(obj))\n    return obj.toString();\n  return JSON.stringify(obj);\n};\n", "/*global module*/\nvar Buffer = require('safe-buffer').Buffer;\nvar DataStream = require('./data-stream');\nvar jwa = require('jwa');\nvar Stream = require('stream');\nvar toString = require('./tostring');\nvar util = require('util');\n\nfunction base64url(string, encoding) {\n  return Buffer\n    .from(string, encoding)\n    .toString('base64')\n    .replace(/=/g, '')\n    .replace(/\\+/g, '-')\n    .replace(/\\//g, '_');\n}\n\nfunction jwsSecuredInput(header, payload, encoding) {\n  encoding = encoding || 'utf8';\n  var encodedHeader = base64url(toString(header), 'binary');\n  var encodedPayload = base64url(toString(payload), encoding);\n  return util.format('%s.%s', encodedHeader, encodedPayload);\n}\n\nfunction jwsSign(opts) {\n  var header = opts.header;\n  var payload = opts.payload;\n  var secretOrKey = opts.secret || opts.privateKey;\n  var encoding = opts.encoding;\n  var algo = jwa(header.alg);\n  var securedInput = jwsSecuredInput(header, payload, encoding);\n  var signature = algo.sign(securedInput, secretOrKey);\n  return util.format('%s.%s', securedInput, signature);\n}\n\nfunction SignStream(opts) {\n  var secret = opts.secret;\n  secret = secret == null ? opts.privateKey : secret;\n  secret = secret == null ? opts.key : secret;\n  if (/^hs/i.test(opts.header.alg) === true && secret == null) {\n    throw new TypeError('secret must be a string or buffer or a KeyObject')\n  }\n  var secretStream = new DataStream(secret);\n  this.readable = true;\n  this.header = opts.header;\n  this.encoding = opts.encoding;\n  this.secret = this.privateKey = this.key = secretStream;\n  this.payload = new DataStream(opts.payload);\n  this.secret.once('close', function () {\n    if (!this.payload.writable && this.readable)\n      this.sign();\n  }.bind(this));\n\n  this.payload.once('close', function () {\n    if (!this.secret.writable && this.readable)\n      this.sign();\n  }.bind(this));\n}\nutil.inherits(SignStream, Stream);\n\nSignStream.prototype.sign = function sign() {\n  try {\n    var signature = jwsSign({\n      header: this.header,\n      payload: this.payload.buffer,\n      secret: this.secret.buffer,\n      encoding: this.encoding\n    });\n    this.emit('done', signature);\n    this.emit('data', signature);\n    this.emit('end');\n    this.readable = false;\n    return signature;\n  } catch (e) {\n    this.readable = false;\n    this.emit('error', e);\n    this.emit('close');\n  }\n};\n\nSignStream.sign = jwsSign;\n\nmodule.exports = SignStream;\n", "/*global module*/\nvar Buffer = require('safe-buffer').Buffer;\nvar DataStream = require('./data-stream');\nvar jwa = require('jwa');\nvar Stream = require('stream');\nvar toString = require('./tostring');\nvar util = require('util');\nvar JWS_REGEX = /^[a-zA-Z0-9\\-_]+?\\.[a-zA-Z0-9\\-_]+?\\.([a-zA-Z0-9\\-_]+)?$/;\n\nfunction isObject(thing) {\n  return Object.prototype.toString.call(thing) === '[object Object]';\n}\n\nfunction safeJsonParse(thing) {\n  if (isObject(thing))\n    return thing;\n  try { return JSON.parse(thing); }\n  catch (e) { return undefined; }\n}\n\nfunction headerFromJWS(jwsSig) {\n  var encodedHeader = jwsSig.split('.', 1)[0];\n  return safeJsonParse(Buffer.from(encodedHeader, 'base64').toString('binary'));\n}\n\nfunction securedInputFromJWS(jwsSig) {\n  return jwsSig.split('.', 2).join('.');\n}\n\nfunction signatureFromJWS(jwsSig) {\n  return jwsSig.split('.')[2];\n}\n\nfunction payloadFromJWS(jwsSig, encoding) {\n  encoding = encoding || 'utf8';\n  var payload = jwsSig.split('.')[1];\n  return Buffer.from(payload, 'base64').toString(encoding);\n}\n\nfunction isValidJws(string) {\n  return JWS_REGEX.test(string) && !!headerFromJWS(string);\n}\n\nfunction jwsVerify(jwsSig, algorithm, secretOrKey) {\n  if (!algorithm) {\n    var err = new Error(\"Missing algorithm parameter for jws.verify\");\n    err.code = \"MISSING_ALGORITHM\";\n    throw err;\n  }\n  jwsSig = toString(jwsSig);\n  var signature = signatureFromJWS(jwsSig);\n  var securedInput = securedInputFromJWS(jwsSig);\n  var algo = jwa(algorithm);\n  return algo.verify(securedInput, signature, secretOrKey);\n}\n\nfunction jwsDecode(jwsSig, opts) {\n  opts = opts || {};\n  jwsSig = toString(jwsSig);\n\n  if (!isValidJws(jwsSig))\n    return null;\n\n  var header = headerFromJWS(jwsSig);\n\n  if (!header)\n    return null;\n\n  var payload = payloadFromJWS(jwsSig);\n  if (header.typ === 'JWT' || opts.json)\n    payload = JSON.parse(payload, opts.encoding);\n\n  return {\n    header: header,\n    payload: payload,\n    signature: signatureFromJWS(jwsSig)\n  };\n}\n\nfunction VerifyStream(opts) {\n  opts = opts || {};\n  var secretOrKey = opts.secret;\n  secretOrKey = secretOrKey == null ? opts.publicKey : secretOrKey;\n  secretOrKey = secretOrKey == null ? opts.key : secretOrKey;\n  if (/^hs/i.test(opts.algorithm) === true && secretOrKey == null) {\n    throw new TypeError('secret must be a string or buffer or a KeyObject')\n  }\n  var secretStream = new DataStream(secretOrKey);\n  this.readable = true;\n  this.algorithm = opts.algorithm;\n  this.encoding = opts.encoding;\n  this.secret = this.publicKey = this.key = secretStream;\n  this.signature = new DataStream(opts.signature);\n  this.secret.once('close', function () {\n    if (!this.signature.writable && this.readable)\n      this.verify();\n  }.bind(this));\n\n  this.signature.once('close', function () {\n    if (!this.secret.writable && this.readable)\n      this.verify();\n  }.bind(this));\n}\nutil.inherits(VerifyStream, Stream);\nVerifyStream.prototype.verify = function verify() {\n  try {\n    var valid = jwsVerify(this.signature.buffer, this.algorithm, this.key.buffer);\n    var obj = jwsDecode(this.signature.buffer, this.encoding);\n    this.emit('done', valid, obj);\n    this.emit('data', valid);\n    this.emit('end');\n    this.readable = false;\n    return valid;\n  } catch (e) {\n    this.readable = false;\n    this.emit('error', e);\n    this.emit('close');\n  }\n};\n\nVerifyStream.decode = jwsDecode;\nVerifyStream.isValid = isValidJws;\nVerifyStream.verify = jwsVerify;\n\nmodule.exports = VerifyStream;\n", "/*global exports*/\nvar SignStream = require('./lib/sign-stream');\nvar VerifyStream = require('./lib/verify-stream');\n\nvar ALGORITHMS = [\n  'HS256', 'HS384', 'HS512',\n  'RS256', 'RS384', 'RS512',\n  'PS256', 'PS384', 'PS512',\n  'ES256', 'ES384', 'ES512'\n];\n\nexports.ALGORITHMS = ALGORITHMS;\nexports.sign = SignStream.sign;\nexports.verify = VerifyStream.verify;\nexports.decode = VerifyStream.decode;\nexports.isValid = VerifyStream.isValid;\nexports.createSign = function createSign(opts) {\n  return new SignStream(opts);\n};\nexports.createVerify = function createVerify(opts) {\n  return new VerifyStream(opts);\n};\n", "var jws = require('jws');\n\nmodule.exports = function (jwt, options) {\n  options = options || {};\n  var decoded = jws.decode(jwt, options);\n  if (!decoded) { return null; }\n  var payload = decoded.payload;\n\n  //try parse the payload\n  if(typeof payload === 'string') {\n    try {\n      var obj = JSON.parse(payload);\n      if(obj !== null && typeof obj === 'object') {\n        payload = obj;\n      }\n    } catch (e) { }\n  }\n\n  //return header if `complete` option is enabled.  header includes claims\n  //such as `kid` and `alg` used to select the key within a JWKS needed to\n  //verify the signature\n  if (options.complete === true) {\n    return {\n      header: decoded.header,\n      payload: payload,\n      signature: decoded.signature\n    };\n  }\n  return payload;\n};\n", "var JsonWebTokenError = function (message, error) {\n  Error.call(this, message);\n  if(Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor);\n  }\n  this.name = 'JsonWebTokenError';\n  this.message = message;\n  if (error) this.inner = error;\n};\n\nJsonWebTokenError.prototype = Object.create(Error.prototype);\nJsonWebTokenError.prototype.constructor = JsonWebTokenError;\n\nmodule.exports = JsonWebTokenError;\n", "var JsonWebTokenError = require('./JsonWebTokenError');\n\nvar NotBeforeError = function (message, date) {\n  JsonWebTokenError.call(this, message);\n  this.name = 'NotBeforeError';\n  this.date = date;\n};\n\nNotBeforeError.prototype = Object.create(JsonWebTokenError.prototype);\n\nNotBeforeError.prototype.constructor = NotBeforeError;\n\nmodule.exports = NotBeforeError;", "var JsonWebTokenError = require('./JsonWebTokenError');\n\nvar TokenExpiredError = function (message, expiredAt) {\n  JsonWebTokenError.call(this, message);\n  this.name = 'TokenExpiredError';\n  this.expiredAt = expiredAt;\n};\n\nTokenExpiredError.prototype = Object.create(JsonWebTokenError.prototype);\n\nTokenExpiredError.prototype.constructor = TokenExpiredError;\n\nmodule.exports = TokenExpiredError;", "var ms = require('ms');\n\nmodule.exports = function (time, iat) {\n  var timestamp = iat || Math.floor(Date.now() / 1000);\n\n  if (typeof time === 'string') {\n    var milliseconds = ms(time);\n    if (typeof milliseconds === 'undefined') {\n      return;\n    }\n    return Math.floor(timestamp + milliseconds / 1000);\n  } else if (typeof time === 'number') {\n    return timestamp + time;\n  } else {\n    return;\n  }\n\n};", "'use strict'\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n", "'use strict'\n\nconst debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n", "'use strict'\n\nconst {\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_LENGTH,\n} = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst safeSrc = exports.safeSrc = []\nconst t = exports.t = {}\nlet R = 0\n\nconst LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nconst safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nconst makeSafeRegex = (value) => {\n  for (const [token, max] of safeRegexReplacements) {\n    value = value\n      .split(`${token}*`).join(`${token}{0,${max}}`)\n      .split(`${token}+`).join(`${token}{1,${max}}`)\n  }\n  return value\n}\n\nconst createToken = (name, value, isGlobal) => {\n  const safe = makeSafeRegex(value)\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  safeSrc[index] = safe\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`)\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n// Non-numberic identifiers include numberic identifiers but can be longer.\n// Therefore non-numberic identifiers must go first.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NONNUMERICIDENTIFIER]\n}|${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NONNUMERICIDENTIFIER]\n}|${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`)\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCEPLAIN', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`)\ncreateToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`)\ncreateToken('COERCEFULL', src[t.COERCEPLAIN] +\n              `(?:${src[t.PRERELEASE]})?` +\n              `(?:${src[t.BUILD]})?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\ncreateToken('COERCERTLFULL', src[t.COERCEFULL], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n", "'use strict'\n\n// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n", "'use strict'\n\nconst numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  if (typeof a === 'number' && typeof b === 'number') {\n    return a === b ? 0 : a < b ? -1 : 1\n  }\n\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n", "'use strict'\n\nconst debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n        version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    if (this.major < other.major) {\n      return -1\n    }\n    if (this.major > other.major) {\n      return 1\n    }\n    if (this.minor < other.minor) {\n      return -1\n    }\n    if (this.minor > other.minor) {\n      return 1\n    }\n    if (this.patch < other.patch) {\n      return -1\n    }\n    if (this.patch > other.patch) {\n      return 1\n    }\n    return 0\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('build compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    if (release.startsWith('pre')) {\n      if (!identifier && identifierBase === false) {\n        throw new Error('invalid increment argument: identifier is empty')\n      }\n      // Avoid an invalid semver results\n      if (identifier) {\n        const match = `-${identifier}`.match(this.options.loose ? re[t.PRERELEASELOOSE] : re[t.PRERELEASE])\n        if (!match || match[1] !== identifier) {\n          throw new Error(`invalid identifier: ${identifier}`)\n        }\n      }\n    }\n\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'release':\n        if (this.prerelease.length === 0) {\n          throw new Error(`version ${this.raw} is not a prerelease`)\n        }\n        this.prerelease.length = 0\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst parse = (version, options, throwErrors = false) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    if (!throwErrors) {\n      return null\n    }\n    throw er\n  }\n}\n\nmodule.exports = parse\n", "'use strict'\n\nconst parse = require('./parse')\nconst valid = (version, options) => {\n  const v = parse(version, options)\n  return v ? v.version : null\n}\nmodule.exports = valid\n", "'use strict'\n\nconst parse = require('./parse')\nconst clean = (version, options) => {\n  const s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\nmodule.exports = clean\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\n\nconst inc = (version, release, options, identifier, identifierBase) => {\n  if (typeof (options) === 'string') {\n    identifierBase = identifier\n    identifier = options\n    options = undefined\n  }\n\n  try {\n    return new SemVer(\n      version instanceof SemVer ? version.version : version,\n      options\n    ).inc(release, identifier, identifierBase).version\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = inc\n", "'use strict'\n\nconst parse = require('./parse.js')\n\nconst diff = (version1, version2) => {\n  const v1 = parse(version1, null, true)\n  const v2 = parse(version2, null, true)\n  const comparison = v1.compare(v2)\n\n  if (comparison === 0) {\n    return null\n  }\n\n  const v1Higher = comparison > 0\n  const highVersion = v1Higher ? v1 : v2\n  const lowVersion = v1Higher ? v2 : v1\n  const highHasPre = !!highVersion.prerelease.length\n  const lowHasPre = !!lowVersion.prerelease.length\n\n  if (lowHasPre && !highHasPre) {\n    // Going from prerelease -> no prerelease requires some special casing\n\n    // If the low version has only a major, then it will always be a major\n    // Some examples:\n    // 1.0.0-1 -> 1.0.0\n    // 1.0.0-1 -> 1.1.1\n    // 1.0.0-1 -> 2.0.0\n    if (!lowVersion.patch && !lowVersion.minor) {\n      return 'major'\n    }\n\n    // If the main part has no difference\n    if (lowVersion.compareMain(highVersion) === 0) {\n      if (lowVersion.minor && !lowVersion.patch) {\n        return 'minor'\n      }\n      return 'patch'\n    }\n  }\n\n  // add the `pre` prefix if we are going to a prerelease version\n  const prefix = highHasPre ? 'pre' : ''\n\n  if (v1.major !== v2.major) {\n    return prefix + 'major'\n  }\n\n  if (v1.minor !== v2.minor) {\n    return prefix + 'minor'\n  }\n\n  if (v1.patch !== v2.patch) {\n    return prefix + 'patch'\n  }\n\n  // high and low are preleases\n  return 'prerelease'\n}\n\nmodule.exports = diff\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst major = (a, loose) => new SemVer(a, loose).major\nmodule.exports = major\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst minor = (a, loose) => new SemVer(a, loose).minor\nmodule.exports = minor\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst patch = (a, loose) => new SemVer(a, loose).patch\nmodule.exports = patch\n", "'use strict'\n\nconst parse = require('./parse')\nconst prerelease = (version, options) => {\n  const parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\nmodule.exports = prerelease\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n", "'use strict'\n\nconst compare = require('./compare')\nconst rcompare = (a, b, loose) => compare(b, a, loose)\nmodule.exports = rcompare\n", "'use strict'\n\nconst compare = require('./compare')\nconst compareLoose = (a, b) => compare(a, b, true)\nmodule.exports = compareLoose\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst compareBuild = (a, b, loose) => {\n  const versionA = new SemVer(a, loose)\n  const versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\nmodule.exports = compareBuild\n", "'use strict'\n\nconst compareBuild = require('./compare-build')\nconst sort = (list, loose) => list.sort((a, b) => compareBuild(a, b, loose))\nmodule.exports = sort\n", "'use strict'\n\nconst compareBuild = require('./compare-build')\nconst rsort = (list, loose) => list.sort((a, b) => compareBuild(b, a, loose))\nmodule.exports = rsort\n", "'use strict'\n\nconst compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n", "'use strict'\n\nconst compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n", "'use strict'\n\nconst compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n", "'use strict'\n\nconst compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n", "'use strict'\n\nconst compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n", "'use strict'\n\nconst compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n", "'use strict'\n\nconst eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst parse = require('./parse')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst coerce = (version, options) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  let match = null\n  if (!options.rtl) {\n    match = version.match(options.includePrerelease ? re[t.COERCEFULL] : re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    // With includePrerelease option set, '1.2.3.4-rc' wants to coerce '2.3.4-rc', not '2.3.4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    const coerceRtlRegex = options.includePrerelease ? re[t.COERCERTLFULL] : re[t.COERCERTL]\n    let next\n    while ((next = coerceRtlRegex.exec(version)) &&\n        (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n            next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      coerceRtlRegex.lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    coerceRtlRegex.lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  const major = match[2]\n  const minor = match[3] || '0'\n  const patch = match[4] || '0'\n  const prerelease = options.includePrerelease && match[5] ? `-${match[5]}` : ''\n  const build = options.includePrerelease && match[6] ? `+${match[6]}` : ''\n\n  return parse(`${major}.${minor}.${patch}${prerelease}${build}`, options)\n}\nmodule.exports = coerce\n", "'use strict'\n\nclass LRUCache {\n  constructor () {\n    this.max = 1000\n    this.map = new Map()\n  }\n\n  get (key) {\n    const value = this.map.get(key)\n    if (value === undefined) {\n      return undefined\n    } else {\n      // Remove the key from the map and add it to the end\n      this.map.delete(key)\n      this.map.set(key, value)\n      return value\n    }\n  }\n\n  delete (key) {\n    return this.map.delete(key)\n  }\n\n  set (key, value) {\n    const deleted = this.delete(key)\n\n    if (!deleted && value !== undefined) {\n      // If cache is full, delete the least recently used item\n      if (this.map.size >= this.max) {\n        const firstKey = this.map.keys().next().value\n        this.delete(firstKey)\n      }\n\n      this.map.set(key, value)\n    }\n\n    return this\n  }\n}\n\nmodule.exports = LRUCache\n", "'use strict'\n\nconst SPACE_CHARACTERS = /\\s+/g\n\n// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.formatted = undefined\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First reduce all whitespace as much as possible so we do not have to rely\n    // on potentially slow regexes like \\s*. This is then stored and used for\n    // future error messages as well.\n    this.raw = range.trim().replace(SPACE_CHARACTERS, ' ')\n\n    // First, split on ||\n    this.set = this.raw\n      .split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${this.raw}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0) {\n        this.set = [first]\n      } else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.formatted = undefined\n  }\n\n  get range () {\n    if (this.formatted === undefined) {\n      this.formatted = ''\n      for (let i = 0; i < this.set.length; i++) {\n        if (i > 0) {\n          this.formatted += '||'\n        }\n        const comps = this.set[i]\n        for (let k = 0; k < comps.length; k++) {\n          if (k > 0) {\n            this.formatted += ' '\n          }\n          this.formatted += comps[k].toString().trim()\n        }\n      }\n    }\n    return this.formatted\n  }\n\n  format () {\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts =\n      (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) |\n      (this.options.loose && FLAG_LOOSE)\n    const memoKey = memoOpts + ':' + range\n    const cached = cache.get(memoKey)\n    if (cached) {\n      return cached\n    }\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range)\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n    debug('tilde trim', range)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n    debug('caret trim', range)\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    let rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n\n    if (loose) {\n      // in loose mode, throw out any that are not valid comparators\n      rangeList = rangeList.filter(comp => {\n        debug('loose invalid filter', comp, this.options)\n        return !!comp.match(re[t.COMPARATORLOOSE])\n      })\n    }\n    debug('range list', rangeList)\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const rangeMap = new Map()\n    const comparators = rangeList.map(comp => new Comparator(comp, this.options))\n    for (const comp of comparators) {\n      if (isNullSet(comp)) {\n        return [comp]\n      }\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has('')) {\n      rangeMap.delete('')\n    }\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\nmodule.exports = Range\n\nconst LRU = require('../internal/lrucache')\nconst cache = new LRU()\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  safeRe: re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace,\n} = require('../internal/re')\nconst { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require('../internal/constants')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  comp = comp.replace(re[t.BUILD], '')\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n// ~0.0.1 --> >=0.0.1 <0.1.0-0\nconst replaceTildes = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceTilde(c, options))\n    .join(' ')\n}\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n// ^0.0.1 --> >=0.0.1 <0.0.2-0\n// ^0.1.0 --> >=0.1.0 <0.2.0-0\nconst replaceCarets = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceCaret(c, options))\n    .join(' ')\n}\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp\n    .split(/\\s+/)\n    .map((c) => replaceXRange(c, options))\n    .join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<') {\n        pr = '-0'\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp\n    .trim()\n    .replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp\n    .trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\n// TODO build?\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return `${from} ${to}`.trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n", "'use strict'\n\nconst ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    comp = comp.trim().split(/\\s+/).join(' ')\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    options = parseOptions(options)\n\n    // Special cases where nothing can possibly be lower\n    if (options.includePrerelease &&\n      (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n      return false\n    }\n    if (!options.includePrerelease &&\n      (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n      return false\n    }\n\n    // Same direction increasing (> or >=)\n    if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n      return true\n    }\n    // Same direction decreasing (< or <=)\n    if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // same SemVer and both sides are inclusive (<= or >=)\n    if (\n      (this.semver.version === comp.semver.version) &&\n      this.operator.includes('=') && comp.operator.includes('=')) {\n      return true\n    }\n    // opposite directions less than\n    if (cmp(this.semver, '<', comp.semver, options) &&\n      this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // opposite directions greater than\n    if (cmp(this.semver, '>', comp.semver, options) &&\n      this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n      return true\n    }\n    return false\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst { safeRe: re, t } = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n", "'use strict'\n\nconst Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n", "'use strict'\n\nconst Range = require('../classes/range')\n\n// Mostly just for testing and legacy API reasons\nconst toComparators = (range, options) =>\n  new Range(range, options).set\n    .map(comp => comp.map(c => c.value).join(' ').trim().split(' '))\n\nmodule.exports = toComparators\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\n\nconst maxSatisfying = (versions, range, options) => {\n  let max = null\n  let maxSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\nmodule.exports = maxSatisfying\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst minSatisfying = (versions, range, options) => {\n  let min = null\n  let minSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\nmodule.exports = minSatisfying\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst gt = require('../functions/gt')\n\nconst minVersion = (range, loose) => {\n  range = new Range(range, loose)\n\n  let minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let setMin = null\n    comparators.forEach((comparator) => {\n      // Clone to avoid manipulating the comparator's semver object.\n      const compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!setMin || gt(compver, setMin)) {\n            setMin = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error(`Unexpected operation: ${comparator.operator}`)\n      }\n    })\n    if (setMin && (!minver || gt(minver, setMin))) {\n      minver = setMin\n    }\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\nmodule.exports = minVersion\n", "'use strict'\n\nconst Range = require('../classes/range')\nconst validRange = (range, options) => {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = validRange\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Comparator = require('../classes/comparator')\nconst { ANY } = Comparator\nconst Range = require('../classes/range')\nconst satisfies = require('../functions/satisfies')\nconst gt = require('../functions/gt')\nconst lt = require('../functions/lt')\nconst lte = require('../functions/lte')\nconst gte = require('../functions/gte')\n\nconst outside = (version, range, hilo, options) => {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  let gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisfies the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let high = null\n    let low = null\n\n    comparators.forEach((comparator) => {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nmodule.exports = outside\n", "'use strict'\n\n// Determine if version is greater than all the versions possible in the range.\nconst outside = require('./outside')\nconst gtr = (version, range, options) => outside(version, range, '>', options)\nmodule.exports = gtr\n", "'use strict'\n\nconst outside = require('./outside')\n// Determine if version is less than all the versions possible in the range\nconst ltr = (version, range, options) => outside(version, range, '<', options)\nmodule.exports = ltr\n", "'use strict'\n\nconst Range = require('../classes/range')\nconst intersects = (r1, r2, options) => {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2, options)\n}\nmodule.exports = intersects\n", "'use strict'\n\n// given a set of versions and a range, create a \"simplified\" range\n// that includes the same versions that the original range does\n// If the original range is shorter than the simplified one, return that.\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\nmodule.exports = (versions, range, options) => {\n  const set = []\n  let first = null\n  let prev = null\n  const v = versions.sort((a, b) => compare(a, b, options))\n  for (const version of v) {\n    const included = satisfies(version, range, options)\n    if (included) {\n      prev = version\n      if (!first) {\n        first = version\n      }\n    } else {\n      if (prev) {\n        set.push([first, prev])\n      }\n      prev = null\n      first = null\n    }\n  }\n  if (first) {\n    set.push([first, null])\n  }\n\n  const ranges = []\n  for (const [min, max] of set) {\n    if (min === max) {\n      ranges.push(min)\n    } else if (!max && min === v[0]) {\n      ranges.push('*')\n    } else if (!max) {\n      ranges.push(`>=${min}`)\n    } else if (min === v[0]) {\n      ranges.push(`<=${max}`)\n    } else {\n      ranges.push(`${min} - ${max}`)\n    }\n  }\n  const simplified = ranges.join(' || ')\n  const original = typeof range.raw === 'string' ? range.raw : String(range)\n  return simplified.length < original.length ? simplified : range\n}\n", "'use strict'\n\nconst Range = require('../classes/range.js')\nconst Comparator = require('../classes/comparator.js')\nconst { ANY } = Comparator\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\n\n// Complex range `r1 || r2 || ...` is a subset of `R1 || R2 || ...` iff:\n// - Every simple range `r1, r2, ...` is a null set, OR\n// - Every simple range `r1, r2, ...` which is not a null set is a subset of\n//   some `R1, R2, ...`\n//\n// Simple range `c1 c2 ...` is a subset of simple range `C1 C2 ...` iff:\n// - If c is only the ANY comparator\n//   - If C is only the ANY comparator, return true\n//   - Else if in prerelease mode, return false\n//   - else replace c with `[>=0.0.0]`\n// - If C is only the ANY comparator\n//   - if in prerelease mode, return true\n//   - else replace C with `[>=0.0.0]`\n// - Let EQ be the set of = comparators in c\n// - If EQ is more than one, return true (null set)\n// - Let GT be the highest > or >= comparator in c\n// - Let LT be the lowest < or <= comparator in c\n// - If GT and LT, and GT.semver > LT.semver, return true (null set)\n// - If any C is a = range, and GT or LT are set, return false\n// - If EQ\n//   - If GT, and EQ does not satisfy GT, return true (null set)\n//   - If LT, and EQ does not satisfy LT, return true (null set)\n//   - If EQ satisfies every C, return true\n//   - Else return false\n// - If GT\n//   - If GT.semver is lower than any > or >= comp in C, return false\n//   - If GT is >=, and GT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the GT.semver tuple, return false\n// - If LT\n//   - If LT.semver is greater than any < or <= comp in C, return false\n//   - If LT is <=, and LT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the LT.semver tuple, return false\n// - Else return true\n\nconst subset = (sub, dom, options = {}) => {\n  if (sub === dom) {\n    return true\n  }\n\n  sub = new Range(sub, options)\n  dom = new Range(dom, options)\n  let sawNonNull = false\n\n  OUTER: for (const simpleSub of sub.set) {\n    for (const simpleDom of dom.set) {\n      const isSub = simpleSubset(simpleSub, simpleDom, options)\n      sawNonNull = sawNonNull || isSub !== null\n      if (isSub) {\n        continue OUTER\n      }\n    }\n    // the null set is a subset of everything, but null simple ranges in\n    // a complex range should be ignored.  so if we saw a non-null range,\n    // then we know this isn't a subset, but if EVERY simple range was null,\n    // then it is a subset.\n    if (sawNonNull) {\n      return false\n    }\n  }\n  return true\n}\n\nconst minimumVersionWithPreRelease = [new Comparator('>=0.0.0-0')]\nconst minimumVersion = [new Comparator('>=0.0.0')]\n\nconst simpleSubset = (sub, dom, options) => {\n  if (sub === dom) {\n    return true\n  }\n\n  if (sub.length === 1 && sub[0].semver === ANY) {\n    if (dom.length === 1 && dom[0].semver === ANY) {\n      return true\n    } else if (options.includePrerelease) {\n      sub = minimumVersionWithPreRelease\n    } else {\n      sub = minimumVersion\n    }\n  }\n\n  if (dom.length === 1 && dom[0].semver === ANY) {\n    if (options.includePrerelease) {\n      return true\n    } else {\n      dom = minimumVersion\n    }\n  }\n\n  const eqSet = new Set()\n  let gt, lt\n  for (const c of sub) {\n    if (c.operator === '>' || c.operator === '>=') {\n      gt = higherGT(gt, c, options)\n    } else if (c.operator === '<' || c.operator === '<=') {\n      lt = lowerLT(lt, c, options)\n    } else {\n      eqSet.add(c.semver)\n    }\n  }\n\n  if (eqSet.size > 1) {\n    return null\n  }\n\n  let gtltComp\n  if (gt && lt) {\n    gtltComp = compare(gt.semver, lt.semver, options)\n    if (gtltComp > 0) {\n      return null\n    } else if (gtltComp === 0 && (gt.operator !== '>=' || lt.operator !== '<=')) {\n      return null\n    }\n  }\n\n  // will iterate one or zero times\n  for (const eq of eqSet) {\n    if (gt && !satisfies(eq, String(gt), options)) {\n      return null\n    }\n\n    if (lt && !satisfies(eq, String(lt), options)) {\n      return null\n    }\n\n    for (const c of dom) {\n      if (!satisfies(eq, String(c), options)) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  let higher, lower\n  let hasDomLT, hasDomGT\n  // if the subset has a prerelease, we need a comparator in the superset\n  // with the same tuple and a prerelease, or it's not a subset\n  let needDomLTPre = lt &&\n    !options.includePrerelease &&\n    lt.semver.prerelease.length ? lt.semver : false\n  let needDomGTPre = gt &&\n    !options.includePrerelease &&\n    gt.semver.prerelease.length ? gt.semver : false\n  // exception: <1.2.3-0 is the same as <1.2.3\n  if (needDomLTPre && needDomLTPre.prerelease.length === 1 &&\n      lt.operator === '<' && needDomLTPre.prerelease[0] === 0) {\n    needDomLTPre = false\n  }\n\n  for (const c of dom) {\n    hasDomGT = hasDomGT || c.operator === '>' || c.operator === '>='\n    hasDomLT = hasDomLT || c.operator === '<' || c.operator === '<='\n    if (gt) {\n      if (needDomGTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomGTPre.major &&\n            c.semver.minor === needDomGTPre.minor &&\n            c.semver.patch === needDomGTPre.patch) {\n          needDomGTPre = false\n        }\n      }\n      if (c.operator === '>' || c.operator === '>=') {\n        higher = higherGT(gt, c, options)\n        if (higher === c && higher !== gt) {\n          return false\n        }\n      } else if (gt.operator === '>=' && !satisfies(gt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (lt) {\n      if (needDomLTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomLTPre.major &&\n            c.semver.minor === needDomLTPre.minor &&\n            c.semver.patch === needDomLTPre.patch) {\n          needDomLTPre = false\n        }\n      }\n      if (c.operator === '<' || c.operator === '<=') {\n        lower = lowerLT(lt, c, options)\n        if (lower === c && lower !== lt) {\n          return false\n        }\n      } else if (lt.operator === '<=' && !satisfies(lt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (!c.operator && (lt || gt) && gtltComp !== 0) {\n      return false\n    }\n  }\n\n  // if there was a < or >, and nothing in the dom, then must be false\n  // UNLESS it was limited by another range in the other direction.\n  // Eg, >1.0.0 <1.0.1 is still a subset of <2.0.0\n  if (gt && hasDomLT && !lt && gtltComp !== 0) {\n    return false\n  }\n\n  if (lt && hasDomGT && !gt && gtltComp !== 0) {\n    return false\n  }\n\n  // we needed a prerelease range in a specific tuple, but didn't get one\n  // then this isn't a subset.  eg >=1.2.3-pre is not a subset of >=1.0.0,\n  // because it includes prereleases in the 1.2.3 tuple\n  if (needDomGTPre || needDomLTPre) {\n    return false\n  }\n\n  return true\n}\n\n// >=1.2.3 is lower than >1.2.3\nconst higherGT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp > 0 ? a\n    : comp < 0 ? b\n    : b.operator === '>' && a.operator === '>=' ? b\n    : a\n}\n\n// <=1.2.3 is higher than <1.2.3\nconst lowerLT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp < 0 ? a\n    : comp > 0 ? b\n    : b.operator === '<' && a.operator === '<=' ? b\n    : a\n}\n\nmodule.exports = subset\n", "'use strict'\n\n// just pre-load all the stuff that index.js lazily exports\nconst internalRe = require('./internal/re')\nconst constants = require('./internal/constants')\nconst SemVer = require('./classes/semver')\nconst identifiers = require('./internal/identifiers')\nconst parse = require('./functions/parse')\nconst valid = require('./functions/valid')\nconst clean = require('./functions/clean')\nconst inc = require('./functions/inc')\nconst diff = require('./functions/diff')\nconst major = require('./functions/major')\nconst minor = require('./functions/minor')\nconst patch = require('./functions/patch')\nconst prerelease = require('./functions/prerelease')\nconst compare = require('./functions/compare')\nconst rcompare = require('./functions/rcompare')\nconst compareLoose = require('./functions/compare-loose')\nconst compareBuild = require('./functions/compare-build')\nconst sort = require('./functions/sort')\nconst rsort = require('./functions/rsort')\nconst gt = require('./functions/gt')\nconst lt = require('./functions/lt')\nconst eq = require('./functions/eq')\nconst neq = require('./functions/neq')\nconst gte = require('./functions/gte')\nconst lte = require('./functions/lte')\nconst cmp = require('./functions/cmp')\nconst coerce = require('./functions/coerce')\nconst Comparator = require('./classes/comparator')\nconst Range = require('./classes/range')\nconst satisfies = require('./functions/satisfies')\nconst toComparators = require('./ranges/to-comparators')\nconst maxSatisfying = require('./ranges/max-satisfying')\nconst minSatisfying = require('./ranges/min-satisfying')\nconst minVersion = require('./ranges/min-version')\nconst validRange = require('./ranges/valid')\nconst outside = require('./ranges/outside')\nconst gtr = require('./ranges/gtr')\nconst ltr = require('./ranges/ltr')\nconst intersects = require('./ranges/intersects')\nconst simplifyRange = require('./ranges/simplify')\nconst subset = require('./ranges/subset')\nmodule.exports = {\n  parse,\n  valid,\n  clean,\n  inc,\n  diff,\n  major,\n  minor,\n  patch,\n  prerelease,\n  compare,\n  rcompare,\n  compareLoose,\n  compareBuild,\n  sort,\n  rsort,\n  gt,\n  lt,\n  eq,\n  neq,\n  gte,\n  lte,\n  cmp,\n  coerce,\n  Comparator,\n  Range,\n  satisfies,\n  toComparators,\n  maxSatisfying,\n  minSatisfying,\n  minVersion,\n  validRange,\n  outside,\n  gtr,\n  ltr,\n  intersects,\n  simplifyRange,\n  subset,\n  SemVer,\n  re: internalRe.re,\n  src: internalRe.src,\n  tokens: internalRe.t,\n  SEMVER_SPEC_VERSION: constants.SEMVER_SPEC_VERSION,\n  RELEASE_TYPES: constants.RELEASE_TYPES,\n  compareIdentifiers: identifiers.compareIdentifiers,\n  rcompareIdentifiers: identifiers.rcompareIdentifiers,\n}\n", "const semver = require('semver');\n\nmodule.exports = semver.satisfies(process.version, '>=15.7.0');\n", "const semver = require('semver');\n\nmodule.exports = semver.satisfies(process.version, '>=16.9.0');\n", "const ASYMMETRIC_KEY_DETAILS_SUPPORTED = require('./asymmetricKeyDetailsSupported');\nconst RSA_PSS_KEY_DETAILS_SUPPORTED = require('./rsaPssKeyDetailsSupported');\n\nconst allowedAlgorithmsForKeys = {\n  'ec': ['ES256', 'ES384', 'ES512'],\n  'rsa': ['RS256', 'PS256', 'RS384', 'PS384', 'RS512', 'PS512'],\n  'rsa-pss': ['PS256', 'PS384', 'PS512']\n};\n\nconst allowedCurves = {\n  ES256: 'prime256v1',\n  ES384: 'secp384r1',\n  ES512: 'secp521r1',\n};\n\nmodule.exports = function(algorithm, key) {\n  if (!algorithm || !key) return;\n\n  const keyType = key.asymmetricKeyType;\n  if (!keyType) return;\n\n  const allowedAlgorithms = allowedAlgorithmsForKeys[keyType];\n\n  if (!allowedAlgorithms) {\n    throw new Error(`Unknown key type \"${keyType}\".`);\n  }\n\n  if (!allowedAlgorithms.includes(algorithm)) {\n    throw new Error(`\"alg\" parameter for \"${keyType}\" key type must be one of: ${allowedAlgorithms.join(', ')}.`)\n  }\n\n  /*\n   * Ignore the next block from test coverage because it gets executed\n   * conditionally depending on the Node version. Not ignoring it would\n   * prevent us from reaching the target % of coverage for versions of\n   * Node under 15.7.0.\n   */\n  /* istanbul ignore next */\n  if (ASYMMETRIC_KEY_DETAILS_SUPPORTED) {\n    switch (keyType) {\n    case 'ec':\n      const keyCurve = key.asymmetricKeyDetails.namedCurve;\n      const allowedCurve = allowedCurves[algorithm];\n\n      if (keyCurve !== allowedCurve) {\n        throw new Error(`\"alg\" parameter \"${algorithm}\" requires curve \"${allowedCurve}\".`);\n      }\n      break;\n\n    case 'rsa-pss':\n      if (RSA_PSS_KEY_DETAILS_SUPPORTED) {\n        const length = parseInt(algorithm.slice(-3), 10);\n        const { hashAlgorithm, mgf1HashAlgorithm, saltLength } = key.asymmetricKeyDetails;\n\n        if (hashAlgorithm !== `sha${length}` || mgf1HashAlgorithm !== hashAlgorithm) {\n          throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of \"alg\" ${algorithm}.`);\n        }\n\n        if (saltLength !== undefined && saltLength > length >> 3) {\n          throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of \"alg\" ${algorithm}.`)\n        }\n      }\n      break;\n    }\n  }\n}\n", "var semver = require('semver');\n\nmodule.exports = semver.satisfies(process.version, '^6.12.0 || >=8.0.0');\n", "const JsonWebTokenError = require('./lib/JsonWebTokenError');\nconst NotBeforeError = require('./lib/NotBeforeError');\nconst TokenExpiredError = require('./lib/TokenExpiredError');\nconst decode = require('./decode');\nconst timespan = require('./lib/timespan');\nconst validateAsymmetricKey = require('./lib/validateAsymmetricKey');\nconst PS_SUPPORTED = require('./lib/psSupported');\nconst jws = require('jws');\nconst {KeyObject, createSecretKey, createPublicKey} = require(\"crypto\");\n\nconst PUB_KEY_ALGS = ['RS256', 'RS384', 'RS512'];\nconst EC_KEY_ALGS = ['ES256', 'ES384', 'ES512'];\nconst RSA_KEY_ALGS = ['RS256', 'RS384', 'RS512'];\nconst HS_ALGS = ['HS256', 'HS384', 'HS512'];\n\nif (PS_SUPPORTED) {\n  PUB_KEY_ALGS.splice(PUB_KEY_ALGS.length, 0, 'PS256', 'PS384', 'PS512');\n  RSA_KEY_ALGS.splice(RSA_KEY_ALGS.length, 0, 'PS256', 'PS384', 'PS512');\n}\n\nmodule.exports = function (jwtString, secretOrPublicKey, options, callback) {\n  if ((typeof options === 'function') && !callback) {\n    callback = options;\n    options = {};\n  }\n\n  if (!options) {\n    options = {};\n  }\n\n  //clone this object since we are going to mutate it.\n  options = Object.assign({}, options);\n\n  let done;\n\n  if (callback) {\n    done = callback;\n  } else {\n    done = function(err, data) {\n      if (err) throw err;\n      return data;\n    };\n  }\n\n  if (options.clockTimestamp && typeof options.clockTimestamp !== 'number') {\n    return done(new JsonWebTokenError('clockTimestamp must be a number'));\n  }\n\n  if (options.nonce !== undefined && (typeof options.nonce !== 'string' || options.nonce.trim() === '')) {\n    return done(new JsonWebTokenError('nonce must be a non-empty string'));\n  }\n\n  if (options.allowInvalidAsymmetricKeyTypes !== undefined && typeof options.allowInvalidAsymmetricKeyTypes !== 'boolean') {\n    return done(new JsonWebTokenError('allowInvalidAsymmetricKeyTypes must be a boolean'));\n  }\n\n  const clockTimestamp = options.clockTimestamp || Math.floor(Date.now() / 1000);\n\n  if (!jwtString){\n    return done(new JsonWebTokenError('jwt must be provided'));\n  }\n\n  if (typeof jwtString !== 'string') {\n    return done(new JsonWebTokenError('jwt must be a string'));\n  }\n\n  const parts = jwtString.split('.');\n\n  if (parts.length !== 3){\n    return done(new JsonWebTokenError('jwt malformed'));\n  }\n\n  let decodedToken;\n\n  try {\n    decodedToken = decode(jwtString, { complete: true });\n  } catch(err) {\n    return done(err);\n  }\n\n  if (!decodedToken) {\n    return done(new JsonWebTokenError('invalid token'));\n  }\n\n  const header = decodedToken.header;\n  let getSecret;\n\n  if(typeof secretOrPublicKey === 'function') {\n    if(!callback) {\n      return done(new JsonWebTokenError('verify must be called asynchronous if secret or public key is provided as a callback'));\n    }\n\n    getSecret = secretOrPublicKey;\n  }\n  else {\n    getSecret = function(header, secretCallback) {\n      return secretCallback(null, secretOrPublicKey);\n    };\n  }\n\n  return getSecret(header, function(err, secretOrPublicKey) {\n    if(err) {\n      return done(new JsonWebTokenError('error in secret or public key callback: ' + err.message));\n    }\n\n    const hasSignature = parts[2].trim() !== '';\n\n    if (!hasSignature && secretOrPublicKey){\n      return done(new JsonWebTokenError('jwt signature is required'));\n    }\n\n    if (hasSignature && !secretOrPublicKey) {\n      return done(new JsonWebTokenError('secret or public key must be provided'));\n    }\n\n    if (!hasSignature && !options.algorithms) {\n      return done(new JsonWebTokenError('please specify \"none\" in \"algorithms\" to verify unsigned tokens'));\n    }\n\n    if (secretOrPublicKey != null && !(secretOrPublicKey instanceof KeyObject)) {\n      try {\n        secretOrPublicKey = createPublicKey(secretOrPublicKey);\n      } catch (_) {\n        try {\n          secretOrPublicKey = createSecretKey(typeof secretOrPublicKey === 'string' ? Buffer.from(secretOrPublicKey) : secretOrPublicKey);\n        } catch (_) {\n          return done(new JsonWebTokenError('secretOrPublicKey is not valid key material'))\n        }\n      }\n    }\n\n    if (!options.algorithms) {\n      if (secretOrPublicKey.type === 'secret') {\n        options.algorithms = HS_ALGS;\n      } else if (['rsa', 'rsa-pss'].includes(secretOrPublicKey.asymmetricKeyType)) {\n        options.algorithms = RSA_KEY_ALGS\n      } else if (secretOrPublicKey.asymmetricKeyType === 'ec') {\n        options.algorithms = EC_KEY_ALGS\n      } else {\n        options.algorithms = PUB_KEY_ALGS\n      }\n    }\n\n    if (options.algorithms.indexOf(decodedToken.header.alg) === -1) {\n      return done(new JsonWebTokenError('invalid algorithm'));\n    }\n\n    if (header.alg.startsWith('HS') && secretOrPublicKey.type !== 'secret') {\n      return done(new JsonWebTokenError((`secretOrPublicKey must be a symmetric key when using ${header.alg}`)))\n    } else if (/^(?:RS|PS|ES)/.test(header.alg) && secretOrPublicKey.type !== 'public') {\n      return done(new JsonWebTokenError((`secretOrPublicKey must be an asymmetric key when using ${header.alg}`)))\n    }\n\n    if (!options.allowInvalidAsymmetricKeyTypes) {\n      try {\n        validateAsymmetricKey(header.alg, secretOrPublicKey);\n      } catch (e) {\n        return done(e);\n      }\n    }\n\n    let valid;\n\n    try {\n      valid = jws.verify(jwtString, decodedToken.header.alg, secretOrPublicKey);\n    } catch (e) {\n      return done(e);\n    }\n\n    if (!valid) {\n      return done(new JsonWebTokenError('invalid signature'));\n    }\n\n    const payload = decodedToken.payload;\n\n    if (typeof payload.nbf !== 'undefined' && !options.ignoreNotBefore) {\n      if (typeof payload.nbf !== 'number') {\n        return done(new JsonWebTokenError('invalid nbf value'));\n      }\n      if (payload.nbf > clockTimestamp + (options.clockTolerance || 0)) {\n        return done(new NotBeforeError('jwt not active', new Date(payload.nbf * 1000)));\n      }\n    }\n\n    if (typeof payload.exp !== 'undefined' && !options.ignoreExpiration) {\n      if (typeof payload.exp !== 'number') {\n        return done(new JsonWebTokenError('invalid exp value'));\n      }\n      if (clockTimestamp >= payload.exp + (options.clockTolerance || 0)) {\n        return done(new TokenExpiredError('jwt expired', new Date(payload.exp * 1000)));\n      }\n    }\n\n    if (options.audience) {\n      const audiences = Array.isArray(options.audience) ? options.audience : [options.audience];\n      const target = Array.isArray(payload.aud) ? payload.aud : [payload.aud];\n\n      const match = target.some(function (targetAudience) {\n        return audiences.some(function (audience) {\n          return audience instanceof RegExp ? audience.test(targetAudience) : audience === targetAudience;\n        });\n      });\n\n      if (!match) {\n        return done(new JsonWebTokenError('jwt audience invalid. expected: ' + audiences.join(' or ')));\n      }\n    }\n\n    if (options.issuer) {\n      const invalid_issuer =\n              (typeof options.issuer === 'string' && payload.iss !== options.issuer) ||\n              (Array.isArray(options.issuer) && options.issuer.indexOf(payload.iss) === -1);\n\n      if (invalid_issuer) {\n        return done(new JsonWebTokenError('jwt issuer invalid. expected: ' + options.issuer));\n      }\n    }\n\n    if (options.subject) {\n      if (payload.sub !== options.subject) {\n        return done(new JsonWebTokenError('jwt subject invalid. expected: ' + options.subject));\n      }\n    }\n\n    if (options.jwtid) {\n      if (payload.jti !== options.jwtid) {\n        return done(new JsonWebTokenError('jwt jwtid invalid. expected: ' + options.jwtid));\n      }\n    }\n\n    if (options.nonce) {\n      if (payload.nonce !== options.nonce) {\n        return done(new JsonWebTokenError('jwt nonce invalid. expected: ' + options.nonce));\n      }\n    }\n\n    if (options.maxAge) {\n      if (typeof payload.iat !== 'number') {\n        return done(new JsonWebTokenError('iat required when maxAge is specified'));\n      }\n\n      const maxAgeTimestamp = timespan(options.maxAge, payload.iat);\n      if (typeof maxAgeTimestamp === 'undefined') {\n        return done(new JsonWebTokenError('\"maxAge\" should be a number of seconds or string representing a timespan eg: \"1d\", \"20h\", 60'));\n      }\n      if (clockTimestamp >= maxAgeTimestamp + (options.clockTolerance || 0)) {\n        return done(new TokenExpiredError('maxAge exceeded', new Date(maxAgeTimestamp * 1000)));\n      }\n    }\n\n    if (options.complete === true) {\n      const signature = decodedToken.signature;\n\n      return done(null, {\n        header: header,\n        payload: payload,\n        signature: signature\n      });\n    }\n\n    return done(null, payload);\n  });\n};\n", "/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991,\n    MAX_INTEGER = 1.7976931348623157e+308,\n    NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  if (value !== value) {\n    return baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object),\n    nativeMax = Math.max;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Checks if `value` is in `collection`. If `collection` is a string, it's\n * checked for a substring of `value`, otherwise\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * is used for equality comparisons. If `fromIndex` is negative, it's used as\n * the offset from the end of `collection`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object|string} collection The collection to inspect.\n * @param {*} value The value to search for.\n * @param {number} [fromIndex=0] The index to search from.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n * @returns {boolean} Returns `true` if `value` is found, else `false`.\n * @example\n *\n * _.includes([1, 2, 3], 1);\n * // => true\n *\n * _.includes([1, 2, 3], 1, 2);\n * // => false\n *\n * _.includes({ 'a': 1, 'b': 2 }, 1);\n * // => true\n *\n * _.includes('abcd', 'bc');\n * // => true\n */\nfunction includes(collection, value, fromIndex, guard) {\n  collection = isArrayLike(collection) ? collection : values(collection);\n  fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;\n\n  var length = collection.length;\n  if (fromIndex < 0) {\n    fromIndex = nativeMax(length + fromIndex, 0);\n  }\n  return isString(collection)\n    ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)\n    : (!!length && baseIndexOf(collection, value, fromIndex) > -1);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && objectToString.call(value) == stringTag);\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object ? baseValues(object, keys(object)) : [];\n}\n\nmodule.exports = includes;\n", "/**\n * lodash 3.0.3 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a boolean primitive or object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isBoolean(false);\n * // => true\n *\n * _.isBoolean(null);\n * // => false\n */\nfunction isBoolean(value) {\n  return value === true || value === false ||\n    (isObjectLike(value) && objectToString.call(value) == boolTag);\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\nmodule.exports = isBoolean;\n", "/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308,\n    NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is an integer.\n *\n * **Note:** This method is based on\n * [`Number.isInteger`](https://mdn.io/Number/isInteger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an integer, else `false`.\n * @example\n *\n * _.isInteger(3);\n * // => true\n *\n * _.isInteger(Number.MIN_VALUE);\n * // => false\n *\n * _.isInteger(Infinity);\n * // => false\n *\n * _.isInteger('3');\n * // => false\n */\nfunction isInteger(value) {\n  return typeof value == 'number' && value == toInteger(value);\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = isInteger;\n", "/**\n * lodash 3.0.3 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are classified\n * as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isNumber(3);\n * // => true\n *\n * _.isNumber(Number.MIN_VALUE);\n * // => true\n *\n * _.isNumber(Infinity);\n * // => true\n *\n * _.isNumber('3');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' ||\n    (isObjectLike(value) && objectToString.call(value) == numberTag);\n}\n\nmodule.exports = isNumber;\n", "/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) ||\n      objectToString.call(value) != objectTag || isHostObject(value)) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return (typeof Ctor == 'function' &&\n    Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString);\n}\n\nmodule.exports = isPlainObject;\n", "/**\n * lodash 4.0.1 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @type Function\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && objectToString.call(value) == stringTag);\n}\n\nmodule.exports = isString;\n", "/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308,\n    NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Creates a function that invokes `func`, with the `this` binding and arguments\n * of the created function, while it's called less than `n` times. Subsequent\n * calls to the created function return the result of the last `func` invocation.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {number} n The number of calls at which `func` is no longer invoked.\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new restricted function.\n * @example\n *\n * jQuery(element).on('click', _.before(5, addContactToList));\n * // => Allows adding up to 4 contacts to the list.\n */\nfunction before(n, func) {\n  var result;\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  n = toInteger(n);\n  return function() {\n    if (--n > 0) {\n      result = func.apply(this, arguments);\n    }\n    if (n <= 1) {\n      func = undefined;\n    }\n    return result;\n  };\n}\n\n/**\n * Creates a function that is restricted to invoking `func` once. Repeat calls\n * to the function return the value of the first invocation. The `func` is\n * invoked with the `this` binding and arguments of the created function.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new restricted function.\n * @example\n *\n * var initialize = _.once(createApplication);\n * initialize();\n * initialize();\n * // => `createApplication` is invoked once\n */\nfunction once(func) {\n  return before(2, func);\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = once;\n", "const timespan = require('./lib/timespan');\nconst PS_SUPPORTED = require('./lib/psSupported');\nconst validateAsymmetricKey = require('./lib/validateAsymmetricKey');\nconst jws = require('jws');\nconst includes = require('lodash.includes');\nconst isBoolean = require('lodash.isboolean');\nconst isInteger = require('lodash.isinteger');\nconst isNumber = require('lodash.isnumber');\nconst isPlainObject = require('lodash.isplainobject');\nconst isString = require('lodash.isstring');\nconst once = require('lodash.once');\nconst { KeyObject, createSecretKey, createPrivateKey } = require('crypto')\n\nconst SUPPORTED_ALGS = ['RS256', 'RS384', 'RS512', 'ES256', 'ES384', 'ES512', 'HS256', 'HS384', 'HS512', 'none'];\nif (PS_SUPPORTED) {\n  SUPPORTED_ALGS.splice(3, 0, 'PS256', 'PS384', 'PS512');\n}\n\nconst sign_options_schema = {\n  expiresIn: { isValid: function(value) { return isInteger(value) || (isString(value) && value); }, message: '\"expiresIn\" should be a number of seconds or string representing a timespan' },\n  notBefore: { isValid: function(value) { return isInteger(value) || (isString(value) && value); }, message: '\"notBefore\" should be a number of seconds or string representing a timespan' },\n  audience: { isValid: function(value) { return isString(value) || Array.isArray(value); }, message: '\"audience\" must be a string or array' },\n  algorithm: { isValid: includes.bind(null, SUPPORTED_ALGS), message: '\"algorithm\" must be a valid string enum value' },\n  header: { isValid: isPlainObject, message: '\"header\" must be an object' },\n  encoding: { isValid: isString, message: '\"encoding\" must be a string' },\n  issuer: { isValid: isString, message: '\"issuer\" must be a string' },\n  subject: { isValid: isString, message: '\"subject\" must be a string' },\n  jwtid: { isValid: isString, message: '\"jwtid\" must be a string' },\n  noTimestamp: { isValid: isBoolean, message: '\"noTimestamp\" must be a boolean' },\n  keyid: { isValid: isString, message: '\"keyid\" must be a string' },\n  mutatePayload: { isValid: isBoolean, message: '\"mutatePayload\" must be a boolean' },\n  allowInsecureKeySizes: { isValid: isBoolean, message: '\"allowInsecureKeySizes\" must be a boolean'},\n  allowInvalidAsymmetricKeyTypes: { isValid: isBoolean, message: '\"allowInvalidAsymmetricKeyTypes\" must be a boolean'}\n};\n\nconst registered_claims_schema = {\n  iat: { isValid: isNumber, message: '\"iat\" should be a number of seconds' },\n  exp: { isValid: isNumber, message: '\"exp\" should be a number of seconds' },\n  nbf: { isValid: isNumber, message: '\"nbf\" should be a number of seconds' }\n};\n\nfunction validate(schema, allowUnknown, object, parameterName) {\n  if (!isPlainObject(object)) {\n    throw new Error('Expected \"' + parameterName + '\" to be a plain object.');\n  }\n  Object.keys(object)\n    .forEach(function(key) {\n      const validator = schema[key];\n      if (!validator) {\n        if (!allowUnknown) {\n          throw new Error('\"' + key + '\" is not allowed in \"' + parameterName + '\"');\n        }\n        return;\n      }\n      if (!validator.isValid(object[key])) {\n        throw new Error(validator.message);\n      }\n    });\n}\n\nfunction validateOptions(options) {\n  return validate(sign_options_schema, false, options, 'options');\n}\n\nfunction validatePayload(payload) {\n  return validate(registered_claims_schema, true, payload, 'payload');\n}\n\nconst options_to_payload = {\n  'audience': 'aud',\n  'issuer': 'iss',\n  'subject': 'sub',\n  'jwtid': 'jti'\n};\n\nconst options_for_objects = [\n  'expiresIn',\n  'notBefore',\n  'noTimestamp',\n  'audience',\n  'issuer',\n  'subject',\n  'jwtid',\n];\n\nmodule.exports = function (payload, secretOrPrivateKey, options, callback) {\n  if (typeof options === 'function') {\n    callback = options;\n    options = {};\n  } else {\n    options = options || {};\n  }\n\n  const isObjectPayload = typeof payload === 'object' &&\n                        !Buffer.isBuffer(payload);\n\n  const header = Object.assign({\n    alg: options.algorithm || 'HS256',\n    typ: isObjectPayload ? 'JWT' : undefined,\n    kid: options.keyid\n  }, options.header);\n\n  function failure(err) {\n    if (callback) {\n      return callback(err);\n    }\n    throw err;\n  }\n\n  if (!secretOrPrivateKey && options.algorithm !== 'none') {\n    return failure(new Error('secretOrPrivateKey must have a value'));\n  }\n\n  if (secretOrPrivateKey != null && !(secretOrPrivateKey instanceof KeyObject)) {\n    try {\n      secretOrPrivateKey = createPrivateKey(secretOrPrivateKey)\n    } catch (_) {\n      try {\n        secretOrPrivateKey = createSecretKey(typeof secretOrPrivateKey === 'string' ? Buffer.from(secretOrPrivateKey) : secretOrPrivateKey)\n      } catch (_) {\n        return failure(new Error('secretOrPrivateKey is not valid key material'));\n      }\n    }\n  }\n\n  if (header.alg.startsWith('HS') && secretOrPrivateKey.type !== 'secret') {\n    return failure(new Error((`secretOrPrivateKey must be a symmetric key when using ${header.alg}`)))\n  } else if (/^(?:RS|PS|ES)/.test(header.alg)) {\n    if (secretOrPrivateKey.type !== 'private') {\n      return failure(new Error((`secretOrPrivateKey must be an asymmetric key when using ${header.alg}`)))\n    }\n    if (!options.allowInsecureKeySizes &&\n      !header.alg.startsWith('ES') &&\n      secretOrPrivateKey.asymmetricKeyDetails !== undefined && //KeyObject.asymmetricKeyDetails is supported in Node 15+\n      secretOrPrivateKey.asymmetricKeyDetails.modulusLength < 2048) {\n      return failure(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${header.alg}`));\n    }\n  }\n\n  if (typeof payload === 'undefined') {\n    return failure(new Error('payload is required'));\n  } else if (isObjectPayload) {\n    try {\n      validatePayload(payload);\n    }\n    catch (error) {\n      return failure(error);\n    }\n    if (!options.mutatePayload) {\n      payload = Object.assign({},payload);\n    }\n  } else {\n    const invalid_options = options_for_objects.filter(function (opt) {\n      return typeof options[opt] !== 'undefined';\n    });\n\n    if (invalid_options.length > 0) {\n      return failure(new Error('invalid ' + invalid_options.join(',') + ' option for ' + (typeof payload ) + ' payload'));\n    }\n  }\n\n  if (typeof payload.exp !== 'undefined' && typeof options.expiresIn !== 'undefined') {\n    return failure(new Error('Bad \"options.expiresIn\" option the payload already has an \"exp\" property.'));\n  }\n\n  if (typeof payload.nbf !== 'undefined' && typeof options.notBefore !== 'undefined') {\n    return failure(new Error('Bad \"options.notBefore\" option the payload already has an \"nbf\" property.'));\n  }\n\n  try {\n    validateOptions(options);\n  }\n  catch (error) {\n    return failure(error);\n  }\n\n  if (!options.allowInvalidAsymmetricKeyTypes) {\n    try {\n      validateAsymmetricKey(header.alg, secretOrPrivateKey);\n    } catch (error) {\n      return failure(error);\n    }\n  }\n\n  const timestamp = payload.iat || Math.floor(Date.now() / 1000);\n\n  if (options.noTimestamp) {\n    delete payload.iat;\n  } else if (isObjectPayload) {\n    payload.iat = timestamp;\n  }\n\n  if (typeof options.notBefore !== 'undefined') {\n    try {\n      payload.nbf = timespan(options.notBefore, timestamp);\n    }\n    catch (err) {\n      return failure(err);\n    }\n    if (typeof payload.nbf === 'undefined') {\n      return failure(new Error('\"notBefore\" should be a number of seconds or string representing a timespan eg: \"1d\", \"20h\", 60'));\n    }\n  }\n\n  if (typeof options.expiresIn !== 'undefined' && typeof payload === 'object') {\n    try {\n      payload.exp = timespan(options.expiresIn, timestamp);\n    }\n    catch (err) {\n      return failure(err);\n    }\n    if (typeof payload.exp === 'undefined') {\n      return failure(new Error('\"expiresIn\" should be a number of seconds or string representing a timespan eg: \"1d\", \"20h\", 60'));\n    }\n  }\n\n  Object.keys(options_to_payload).forEach(function (key) {\n    const claim = options_to_payload[key];\n    if (typeof options[key] !== 'undefined') {\n      if (typeof payload[claim] !== 'undefined') {\n        return failure(new Error('Bad \"options.' + key + '\" option. The payload already has an \"' + claim + '\" property.'));\n      }\n      payload[claim] = options[key];\n    }\n  });\n\n  const encoding = options.encoding || 'utf8';\n\n  if (typeof callback === 'function') {\n    callback = callback && once(callback);\n\n    jws.createSign({\n      header: header,\n      privateKey: secretOrPrivateKey,\n      payload: payload,\n      encoding: encoding\n    }).once('error', callback)\n      .once('done', function (signature) {\n        // TODO: Remove in favor of the modulus length check before signing once node 15+ is the minimum supported version\n        if(!options.allowInsecureKeySizes && /^(?:RS|PS)/.test(header.alg) && signature.length < 256) {\n          return callback(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${header.alg}`))\n        }\n        callback(null, signature);\n      });\n  } else {\n    let signature = jws.sign({header: header, payload: payload, secret: secretOrPrivateKey, encoding: encoding});\n    // TODO: Remove in favor of the modulus length check before signing once node 15+ is the minimum supported version\n    if(!options.allowInsecureKeySizes && /^(?:RS|PS)/.test(header.alg) && signature.length < 256) {\n      throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${header.alg}`)\n    }\n    return signature\n  }\n};\n", "module.exports = {\n  decode: require('./decode'),\n  verify: require('./verify'),\n  sign: require('./sign'),\n  JsonWebTokenError: require('./lib/JsonWebTokenError'),\n  NotBeforeError: require('./lib/NotBeforeError'),\n  TokenExpiredError: require('./lib/TokenExpiredError'),\n};\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport jwt from \"jsonwebtoken\";\nimport {\n    TimeUtils,\n    Constants,\n    createClientAuthError,\n    ClientAuthErrorCodes,\n    EncodingTypes,\n} from \"@azure/msal-common/node\";\nimport { CryptoProvider } from \"../crypto/CryptoProvider.js\";\nimport { EncodingUtils } from \"../utils/EncodingUtils.js\";\nimport { JwtConstants } from \"../utils/Constants.js\";\n\n/**\n * Client assertion of type jwt-bearer used in confidential client flows\n * @public\n */\nexport class ClientAssertion {\n    private jwt: string;\n    private privateKey: string;\n    private thumbprint: string;\n    private useSha256: boolean;\n    private expirationTime: number;\n    private issuer: string;\n    private jwtAudience: string;\n    private publicCertificate: Array<string>;\n\n    /**\n     * Initialize the ClientAssertion class from the clientAssertion passed by the user\n     * @param assertion - refer https://tools.ietf.org/html/rfc7521\n     */\n    public static fromAssertion(assertion: string): ClientAssertion {\n        const clientAssertion = new ClientAssertion();\n        clientAssertion.jwt = assertion;\n        return clientAssertion;\n    }\n\n    /**\n     * @deprecated Use fromCertificateWithSha256Thumbprint instead, with a SHA-256 thumprint\n     * Initialize the ClientAssertion class from the certificate passed by the user\n     * @param thumbprint - identifier of a certificate\n     * @param privateKey - secret key\n     * @param publicCertificate - electronic document provided to prove the ownership of the public key\n     */\n    public static fromCertificate(\n        thumbprint: string,\n        privateKey: string,\n        publicCertificate?: string\n    ): ClientAssertion {\n        const clientAssertion = new ClientAssertion();\n        clientAssertion.privateKey = privateKey;\n        clientAssertion.thumbprint = thumbprint;\n        clientAssertion.useSha256 = false;\n        if (publicCertificate) {\n            clientAssertion.publicCertificate =\n                this.parseCertificate(publicCertificate);\n        }\n        return clientAssertion;\n    }\n\n    /**\n     * Initialize the ClientAssertion class from the certificate passed by the user\n     * @param thumbprint - identifier of a certificate\n     * @param privateKey - secret key\n     * @param publicCertificate - electronic document provided to prove the ownership of the public key\n     */\n    public static fromCertificateWithSha256Thumbprint(\n        thumbprint: string,\n        privateKey: string,\n        publicCertificate?: string\n    ): ClientAssertion {\n        const clientAssertion = new ClientAssertion();\n        clientAssertion.privateKey = privateKey;\n        clientAssertion.thumbprint = thumbprint;\n        clientAssertion.useSha256 = true;\n        if (publicCertificate) {\n            clientAssertion.publicCertificate =\n                this.parseCertificate(publicCertificate);\n        }\n        return clientAssertion;\n    }\n\n    /**\n     * Update JWT for certificate based clientAssertion, if passed by the user, uses it as is\n     * @param cryptoProvider - library's crypto helper\n     * @param issuer - iss claim\n     * @param jwtAudience - aud claim\n     */\n    public getJwt(\n        cryptoProvider: CryptoProvider,\n        issuer: string,\n        jwtAudience: string\n    ): string {\n        // if assertion was created from certificate, check if jwt is expired and create new one.\n        if (this.privateKey && this.thumbprint) {\n            if (\n                this.jwt &&\n                !this.isExpired() &&\n                issuer === this.issuer &&\n                jwtAudience === this.jwtAudience\n            ) {\n                return this.jwt;\n            }\n\n            return this.createJwt(cryptoProvider, issuer, jwtAudience);\n        }\n\n        /*\n         * if assertion was created by caller, then we just append it. It is up to the caller to\n         * ensure that it contains necessary claims and that it is not expired.\n         */\n        if (this.jwt) {\n            return this.jwt;\n        }\n\n        throw createClientAuthError(ClientAuthErrorCodes.invalidAssertion);\n    }\n\n    /**\n     * JWT format and required claims specified: https://tools.ietf.org/html/rfc7523#section-3\n     */\n    private createJwt(\n        cryptoProvider: CryptoProvider,\n        issuer: string,\n        jwtAudience: string\n    ): string {\n        this.issuer = issuer;\n        this.jwtAudience = jwtAudience;\n        const issuedAt = TimeUtils.nowSeconds();\n        this.expirationTime = issuedAt + 600;\n\n        const algorithm = this.useSha256\n            ? JwtConstants.PSS_256\n            : JwtConstants.RSA_256;\n        const header: jwt.JwtHeader = {\n            alg: algorithm,\n        };\n\n        const thumbprintHeader = this.useSha256\n            ? JwtConstants.X5T_256\n            : JwtConstants.X5T;\n        Object.assign(header, {\n            [thumbprintHeader]: EncodingUtils.base64EncodeUrl(\n                this.thumbprint,\n                EncodingTypes.HEX\n            ),\n        } as Partial<jwt.JwtHeader>);\n\n        if (this.publicCertificate) {\n            Object.assign(header, {\n                [JwtConstants.X5C]: this.publicCertificate,\n            } as Partial<jwt.JwtHeader>);\n        }\n\n        const payload = {\n            [JwtConstants.AUDIENCE]: this.jwtAudience,\n            [JwtConstants.EXPIRATION_TIME]: this.expirationTime,\n            [JwtConstants.ISSUER]: this.issuer,\n            [JwtConstants.SUBJECT]: this.issuer,\n            [JwtConstants.NOT_BEFORE]: issuedAt,\n            [JwtConstants.JWT_ID]: cryptoProvider.createNewGuid(),\n        };\n\n        this.jwt = jwt.sign(payload, this.privateKey, { header });\n        return this.jwt;\n    }\n\n    /**\n     * Utility API to check expiration\n     */\n    private isExpired(): boolean {\n        return this.expirationTime < TimeUtils.nowSeconds();\n    }\n\n    /**\n     * Extracts the raw certs from a given certificate string and returns them in an array.\n     * @param publicCertificate - electronic document provided to prove the ownership of the public key\n     */\n    public static parseCertificate(publicCertificate: string): Array<string> {\n        /**\n         * This is regex to identify the certs in a given certificate string.\n         * We want to look for the contents between the BEGIN and END certificate strings, without the associated newlines.\n         * The information in parens \"(.+?)\" is the capture group to represent the cert we want isolated.\n         * \".\" means any string character, \"+\" means match 1 or more times, and \"?\" means the shortest match.\n         * The \"g\" at the end of the regex means search the string globally, and the \"s\" enables the \".\" to match newlines.\n         */\n        const regexToFindCerts =\n            /-----BEGIN CERTIFICATE-----\\r*\\n(.+?)\\r*\\n-----END CERTIFICATE-----/gs;\n        const certs: string[] = [];\n\n        let matches;\n        while ((matches = regexToFindCerts.exec(publicCertificate)) !== null) {\n            // matches[1] represents the first parens capture group in the regex.\n            certs.push(matches[1].replace(/\\r*\\n/g, Constants.EMPTY_STRING));\n        }\n\n        return certs;\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    AuthenticationResult,\n    Authority,\n    BaseClient,\n    CcsCredentialType,\n    ClientAssertion,\n    ClientConfiguration,\n    CommonUsernamePasswordRequest,\n    GrantType,\n    NetworkResponse,\n    OAuthResponseType,\n    RequestParameterBuilder,\n    RequestThumbprint,\n    ResponseHandler,\n    ServerAuthorizationTokenResponse,\n    StringUtils,\n    TimeUtils,\n    UrlString,\n    UrlUtils,\n    getClientAssertion,\n} from \"@azure/msal-common/node\";\n\n/**\n * Oauth2.0 Password grant client\n * Note: We are only supporting public clients for password grant and for purely testing purposes\n * @public\n * @deprecated - Use a more secure flow instead\n */\nexport class UsernamePasswordClient extends BaseClient {\n    constructor(configuration: ClientConfiguration) {\n        super(configuration);\n    }\n\n    /**\n     * API to acquire a token by passing the username and password to the service in exchage of credentials\n     * password_grant\n     * @param request - CommonUsernamePasswordRequest\n     */\n    async acquireToken(\n        request: CommonUsernamePasswordRequest\n    ): Promise<AuthenticationResult | null> {\n        this.logger.info(\"in acquireToken call in username-password client\");\n\n        const reqTimestamp = TimeUtils.nowSeconds();\n        const response = await this.executeTokenRequest(\n            this.authority,\n            request\n        );\n\n        const responseHandler = new ResponseHandler(\n            this.config.authOptions.clientId,\n            this.cacheManager,\n            this.cryptoUtils,\n            this.logger,\n            this.config.serializableCache,\n            this.config.persistencePlugin\n        );\n\n        // Validate response. This function throws a server error if an error is returned by the server.\n        responseHandler.validateTokenResponse(response.body);\n        const tokenResponse = responseHandler.handleServerTokenResponse(\n            response.body,\n            this.authority,\n            reqTimestamp,\n            request\n        );\n\n        return tokenResponse;\n    }\n\n    /**\n     * Executes POST request to token endpoint\n     * @param authority - authority object\n     * @param request - CommonUsernamePasswordRequest provided by the developer\n     */\n    private async executeTokenRequest(\n        authority: Authority,\n        request: CommonUsernamePasswordRequest\n    ): Promise<NetworkResponse<ServerAuthorizationTokenResponse>> {\n        const queryParametersString = this.createTokenQueryParameters(request);\n        const endpoint = UrlString.appendQueryString(\n            authority.tokenEndpoint,\n            queryParametersString\n        );\n        const requestBody = await this.createTokenRequestBody(request);\n        const headers: Record<string, string> = this.createTokenRequestHeaders({\n            credential: request.username,\n            type: CcsCredentialType.UPN,\n        });\n        const thumbprint: RequestThumbprint = {\n            clientId: this.config.authOptions.clientId,\n            authority: authority.canonicalAuthority,\n            scopes: request.scopes,\n            claims: request.claims,\n            authenticationScheme: request.authenticationScheme,\n            resourceRequestMethod: request.resourceRequestMethod,\n            resourceRequestUri: request.resourceRequestUri,\n            shrClaims: request.shrClaims,\n            sshKid: request.sshKid,\n        };\n\n        return this.executePostToTokenEndpoint(\n            endpoint,\n            requestBody,\n            headers,\n            thumbprint,\n            request.correlationId\n        );\n    }\n\n    /**\n     * Generates a map for all the params to be sent to the service\n     * @param request - CommonUsernamePasswordRequest provided by the developer\n     */\n    private async createTokenRequestBody(\n        request: CommonUsernamePasswordRequest\n    ): Promise<string> {\n        const parameters = new Map<string, string>();\n\n        RequestParameterBuilder.addClientId(\n            parameters,\n            this.config.authOptions.clientId\n        );\n        RequestParameterBuilder.addUsername(parameters, request.username);\n        RequestParameterBuilder.addPassword(parameters, request.password);\n\n        RequestParameterBuilder.addScopes(parameters, request.scopes);\n\n        RequestParameterBuilder.addResponseType(\n            parameters,\n            OAuthResponseType.IDTOKEN_TOKEN\n        );\n\n        RequestParameterBuilder.addGrantType(\n            parameters,\n            GrantType.RESOURCE_OWNER_PASSWORD_GRANT\n        );\n        RequestParameterBuilder.addClientInfo(parameters);\n\n        RequestParameterBuilder.addLibraryInfo(\n            parameters,\n            this.config.libraryInfo\n        );\n        RequestParameterBuilder.addApplicationTelemetry(\n            parameters,\n            this.config.telemetry.application\n        );\n        RequestParameterBuilder.addThrottling(parameters);\n\n        if (this.serverTelemetryManager) {\n            RequestParameterBuilder.addServerTelemetry(\n                parameters,\n                this.serverTelemetryManager\n            );\n        }\n\n        const correlationId =\n            request.correlationId ||\n            this.config.cryptoInterface.createNewGuid();\n        RequestParameterBuilder.addCorrelationId(parameters, correlationId);\n\n        if (this.config.clientCredentials.clientSecret) {\n            RequestParameterBuilder.addClientSecret(\n                parameters,\n                this.config.clientCredentials.clientSecret\n            );\n        }\n\n        const clientAssertion: ClientAssertion | undefined =\n            this.config.clientCredentials.clientAssertion;\n\n        if (clientAssertion) {\n            RequestParameterBuilder.addClientAssertion(\n                parameters,\n                await getClientAssertion(\n                    clientAssertion.assertion,\n                    this.config.authOptions.clientId,\n                    request.resourceRequestUri\n                )\n            );\n            RequestParameterBuilder.addClientAssertionType(\n                parameters,\n                clientAssertion.assertionType\n            );\n        }\n\n        if (\n            !StringUtils.isEmptyObj(request.claims) ||\n            (this.config.authOptions.clientCapabilities &&\n                this.config.authOptions.clientCapabilities.length > 0)\n        ) {\n            RequestParameterBuilder.addClaims(\n                parameters,\n                request.claims,\n                this.config.authOptions.clientCapabilities\n            );\n        }\n\n        if (\n            this.config.systemOptions.preventCorsPreflight &&\n            request.username\n        ) {\n            RequestParameterBuilder.addCcsUpn(parameters, request.username);\n        }\n\n        return UrlUtils.mapToQueryString(parameters);\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    Authority,\n    AuthorizeProtocol,\n    CommonAuthorizationUrlRequest,\n    Logger,\n    OAuthResponseType,\n    ProtocolMode,\n    RequestParameterBuilder,\n} from \"@azure/msal-common/node\";\nimport { NodeConfiguration } from \"../config/Configuration.js\";\nimport { Constants as NodeConstants } from \"../utils/Constants.js\";\nimport { version } from \"../packageMetadata.js\";\n\n/**\n * Constructs the full /authorize URL with request parameters\n * @param config\n * @param authority\n * @param request\n * @param logger\n * @returns\n */\nexport function getAuthCodeRequestUrl(\n    config: NodeConfiguration,\n    authority: Authority,\n    request: CommonAuthorizationUrlRequest,\n    logger: Logger\n): string {\n    const parameters = AuthorizeProtocol.getStandardAuthorizeRequestParameters(\n        {\n            ...config.auth,\n            authority: authority,\n            redirectUri: request.redirectUri || \"\",\n        },\n        request,\n        logger\n    );\n    RequestParameterBuilder.addLibraryInfo(parameters, {\n        sku: NodeConstants.MSAL_SKU,\n        version: version,\n        cpu: process.arch || \"\",\n        os: process.platform || \"\",\n    });\n    if (config.auth.protocolMode !== ProtocolMode.OIDC) {\n        RequestParameterBuilder.addApplicationTelemetry(\n            parameters,\n            config.telemetry.application\n        );\n    }\n    RequestParameterBuilder.addResponseType(parameters, OAuthResponseType.CODE);\n    if (request.codeChallenge && request.codeChallengeMethod) {\n        RequestParameterBuilder.addCodeChallengeParams(\n            parameters,\n            request.codeChallenge,\n            request.codeChallengeMethod\n        );\n    }\n\n    RequestParameterBuilder.addExtraQueryParameters(\n        parameters,\n        request.extraQueryParameters || {}\n    );\n\n    return AuthorizeProtocol.getAuthorizeUrl(\n        authority,\n        parameters,\n        config.auth.encodeExtraQueryParams,\n        request.extraQueryParameters\n    );\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    AuthorizationCodeClient,\n    ClientConfiguration,\n    RefreshTokenClient,\n    AuthenticationResult,\n    Authority,\n    AuthorityFactory,\n    BaseAuthRequest,\n    SilentFlowClient,\n    Logger,\n    ServerTelemetryManager,\n    ServerTelemetryRequest,\n    CommonSilentFlowRequest,\n    CommonRefreshTokenRequest,\n    CommonAuthorizationCodeRequest,\n    CommonAuthorizationUrlRequest,\n    CommonUsernamePasswordRequest,\n    AuthenticationScheme,\n    ResponseMode,\n    AuthorityOptions,\n    OIDC_DEFAULT_SCOPES,\n    AzureRegionConfiguration,\n    AuthError,\n    AzureCloudOptions,\n    AuthorizationCodePayload,\n    Constants,\n    StringUtils,\n    createClientAuthError,\n    ClientAuthErrorCodes,\n    buildStaticAuthorityOptions,\n    ClientAssertion as ClientAssertionType,\n    getClientAssertion,\n    ClientAssertionCallback,\n    CacheOutcome,\n    ClientAuthError,\n} from \"@azure/msal-common/node\";\nimport {\n    Configuration,\n    buildAppConfiguration,\n    NodeConfiguration,\n} from \"../config/Configuration.js\";\nimport { CryptoProvider } from \"../crypto/CryptoProvider.js\";\nimport { NodeStorage } from \"../cache/NodeStorage.js\";\nimport { Constants as NodeConstants, ApiId } from \"../utils/Constants.js\";\nimport { TokenCache } from \"../cache/TokenCache.js\";\nimport { ClientAssertion } from \"./ClientAssertion.js\";\nimport { AuthorizationUrlRequest } from \"../request/AuthorizationUrlRequest.js\";\nimport { AuthorizationCodeRequest } from \"../request/AuthorizationCodeRequest.js\";\nimport { RefreshTokenRequest } from \"../request/RefreshTokenRequest.js\";\nimport { SilentFlowRequest } from \"../request/SilentFlowRequest.js\";\nimport { version, name } from \"../packageMetadata.js\";\nimport { UsernamePasswordRequest } from \"../request/UsernamePasswordRequest.js\";\nimport { NodeAuthError } from \"../error/NodeAuthError.js\";\nimport { UsernamePasswordClient } from \"./UsernamePasswordClient.js\";\nimport { getAuthCodeRequestUrl } from \"../protocol/Authorize.js\";\n\n/**\n * Base abstract class for all ClientApplications - public and confidential\n * @public\n */\nexport abstract class ClientApplication {\n    protected readonly cryptoProvider: CryptoProvider;\n    private tokenCache: TokenCache;\n\n    /**\n     * Platform storage object\n     */\n    protected storage: NodeStorage;\n    /**\n     * Logger object to log the application flow\n     */\n    protected logger: Logger;\n    /**\n     * Platform configuration initialized by the application\n     */\n    protected config: NodeConfiguration;\n    /**\n     * Client assertion passed by the user for confidential client flows\n     */\n    protected clientAssertion: ClientAssertion;\n    protected developerProvidedClientAssertion:\n        | string\n        | ClientAssertionCallback;\n    /**\n     * Client secret passed by the user for confidential client flows\n     */\n    protected clientSecret: string;\n\n    /**\n     * Constructor for the ClientApplication\n     */\n    protected constructor(configuration: Configuration) {\n        this.config = buildAppConfiguration(configuration);\n        this.cryptoProvider = new CryptoProvider();\n        this.logger = new Logger(\n            this.config.system.loggerOptions,\n            name,\n            version\n        );\n        this.storage = new NodeStorage(\n            this.logger,\n            this.config.auth.clientId,\n            this.cryptoProvider,\n            buildStaticAuthorityOptions(this.config.auth)\n        );\n        this.tokenCache = new TokenCache(\n            this.storage,\n            this.logger,\n            this.config.cache.cachePlugin\n        );\n    }\n\n    /**\n     * Creates the URL of the authorization request, letting the user input credentials and consent to the\n     * application. The URL targets the /authorize endpoint of the authority configured in the\n     * application object.\n     *\n     * Once the user inputs their credentials and consents, the authority will send a response to the redirect URI\n     * sent in the request and should contain an authorization code, which can then be used to acquire tokens via\n     * `acquireTokenByCode(AuthorizationCodeRequest)`.\n     */\n    async getAuthCodeUrl(request: AuthorizationUrlRequest): Promise<string> {\n        this.logger.info(\"getAuthCodeUrl called\", request.correlationId);\n        const validRequest: CommonAuthorizationUrlRequest = {\n            ...request,\n            ...(await this.initializeBaseRequest(request)),\n            responseMode: request.responseMode || ResponseMode.QUERY,\n            authenticationScheme: AuthenticationScheme.BEARER,\n            state: request.state || \"\",\n            nonce: request.nonce || \"\",\n        };\n\n        const discoveredAuthority = await this.createAuthority(\n            validRequest.authority,\n            validRequest.correlationId,\n            undefined,\n            request.azureCloudOptions\n        );\n        return getAuthCodeRequestUrl(\n            this.config,\n            discoveredAuthority,\n            validRequest,\n            this.logger\n        );\n    }\n\n    /**\n     * Acquires a token by exchanging the Authorization Code received from the first step of OAuth2.0\n     * Authorization Code flow.\n     *\n     * `getAuthCodeUrl(AuthorizationCodeUrlRequest)` can be used to create the URL for the first step of OAuth2.0\n     * Authorization Code flow. Ensure that values for redirectUri and scopes in AuthorizationCodeUrlRequest and\n     * AuthorizationCodeRequest are the same.\n     */\n    async acquireTokenByCode(\n        request: AuthorizationCodeRequest,\n        authCodePayLoad?: AuthorizationCodePayload\n    ): Promise<AuthenticationResult> {\n        this.logger.info(\"acquireTokenByCode called\");\n        if (request.state && authCodePayLoad) {\n            this.logger.info(\"acquireTokenByCode - validating state\");\n            this.validateState(request.state, authCodePayLoad.state || \"\");\n            // eslint-disable-next-line no-param-reassign\n            authCodePayLoad = { ...authCodePayLoad, state: \"\" };\n        }\n        const validRequest: CommonAuthorizationCodeRequest = {\n            ...request,\n            ...(await this.initializeBaseRequest(request)),\n            authenticationScheme: AuthenticationScheme.BEARER,\n        };\n\n        const serverTelemetryManager = this.initializeServerTelemetryManager(\n            ApiId.acquireTokenByCode,\n            validRequest.correlationId\n        );\n        try {\n            const discoveredAuthority = await this.createAuthority(\n                validRequest.authority,\n                validRequest.correlationId,\n                undefined,\n                request.azureCloudOptions\n            );\n            const authClientConfig = await this.buildOauthClientConfiguration(\n                discoveredAuthority,\n                validRequest.correlationId,\n                validRequest.redirectUri,\n                serverTelemetryManager\n            );\n            const authorizationCodeClient = new AuthorizationCodeClient(\n                authClientConfig\n            );\n            this.logger.verbose(\n                \"Auth code client created\",\n                validRequest.correlationId\n            );\n            return await authorizationCodeClient.acquireToken(\n                validRequest,\n                authCodePayLoad\n            );\n        } catch (e) {\n            if (e instanceof AuthError) {\n                e.setCorrelationId(validRequest.correlationId);\n            }\n            serverTelemetryManager.cacheFailedRequest(e);\n            throw e;\n        }\n    }\n\n    /**\n     * Acquires a token by exchanging the refresh token provided for a new set of tokens.\n     *\n     * This API is provided only for scenarios where you would like to migrate from ADAL to MSAL. Otherwise, it is\n     * recommended that you use `acquireTokenSilent()` for silent scenarios. When using `acquireTokenSilent()`, MSAL will\n     * handle the caching and refreshing of tokens automatically.\n     */\n    async acquireTokenByRefreshToken(\n        request: RefreshTokenRequest\n    ): Promise<AuthenticationResult | null> {\n        this.logger.info(\n            \"acquireTokenByRefreshToken called\",\n            request.correlationId\n        );\n        const validRequest: CommonRefreshTokenRequest = {\n            ...request,\n            ...(await this.initializeBaseRequest(request)),\n            authenticationScheme: AuthenticationScheme.BEARER,\n        };\n\n        const serverTelemetryManager = this.initializeServerTelemetryManager(\n            ApiId.acquireTokenByRefreshToken,\n            validRequest.correlationId\n        );\n        try {\n            const discoveredAuthority = await this.createAuthority(\n                validRequest.authority,\n                validRequest.correlationId,\n                undefined,\n                request.azureCloudOptions\n            );\n            const refreshTokenClientConfig =\n                await this.buildOauthClientConfiguration(\n                    discoveredAuthority,\n                    validRequest.correlationId,\n                    validRequest.redirectUri || \"\",\n                    serverTelemetryManager\n                );\n            const refreshTokenClient = new RefreshTokenClient(\n                refreshTokenClientConfig\n            );\n            this.logger.verbose(\n                \"Refresh token client created\",\n                validRequest.correlationId\n            );\n            return await refreshTokenClient.acquireToken(validRequest);\n        } catch (e) {\n            if (e instanceof AuthError) {\n                e.setCorrelationId(validRequest.correlationId);\n            }\n            serverTelemetryManager.cacheFailedRequest(e);\n            throw e;\n        }\n    }\n\n    /**\n     * Acquires a token silently when a user specifies the account the token is requested for.\n     *\n     * This API expects the user to provide an account object and looks into the cache to retrieve the token if present.\n     * There is also an optional \"forceRefresh\" boolean the user can send to bypass the cache for access_token and id_token.\n     * In case the refresh_token is expired or not found, an error is thrown\n     * and the guidance is for the user to call any interactive token acquisition API (eg: `acquireTokenByCode()`).\n     */\n    async acquireTokenSilent(\n        request: SilentFlowRequest\n    ): Promise<AuthenticationResult> {\n        const validRequest: CommonSilentFlowRequest = {\n            ...request,\n            ...(await this.initializeBaseRequest(request)),\n            forceRefresh: request.forceRefresh || false,\n        };\n\n        const serverTelemetryManager = this.initializeServerTelemetryManager(\n            ApiId.acquireTokenSilent,\n            validRequest.correlationId,\n            validRequest.forceRefresh\n        );\n\n        try {\n            const discoveredAuthority = await this.createAuthority(\n                validRequest.authority,\n                validRequest.correlationId,\n                undefined,\n                request.azureCloudOptions\n            );\n            const clientConfiguration =\n                await this.buildOauthClientConfiguration(\n                    discoveredAuthority,\n                    validRequest.correlationId,\n                    validRequest.redirectUri || \"\",\n                    serverTelemetryManager\n                );\n            const silentFlowClient = new SilentFlowClient(clientConfiguration);\n            this.logger.verbose(\n                \"Silent flow client created\",\n                validRequest.correlationId\n            );\n            try {\n                // always overwrite the in-memory cache with the persistence cache (if it exists) before a cache lookup\n                await this.tokenCache.overwriteCache();\n                return await this.acquireCachedTokenSilent(\n                    validRequest,\n                    silentFlowClient,\n                    clientConfiguration\n                );\n            } catch (error) {\n                if (\n                    error instanceof ClientAuthError &&\n                    error.errorCode ===\n                        ClientAuthErrorCodes.tokenRefreshRequired\n                ) {\n                    const refreshTokenClient = new RefreshTokenClient(\n                        clientConfiguration\n                    );\n                    return refreshTokenClient.acquireTokenByRefreshToken(\n                        validRequest\n                    );\n                }\n                throw error;\n            }\n        } catch (error) {\n            if (error instanceof AuthError) {\n                error.setCorrelationId(validRequest.correlationId);\n            }\n            serverTelemetryManager.cacheFailedRequest(error);\n            throw error;\n        }\n    }\n\n    private async acquireCachedTokenSilent(\n        validRequest: CommonSilentFlowRequest,\n        silentFlowClient: SilentFlowClient,\n        clientConfiguration: ClientConfiguration\n    ): Promise<AuthenticationResult> {\n        const [authResponse, cacheOutcome] =\n            await silentFlowClient.acquireCachedToken({\n                ...validRequest,\n                scopes: validRequest.scopes?.length\n                    ? validRequest.scopes\n                    : [...OIDC_DEFAULT_SCOPES],\n            });\n\n        if (cacheOutcome === CacheOutcome.PROACTIVELY_REFRESHED) {\n            this.logger.info(\n                \"ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.\"\n            );\n            // refresh the access token in the background\n            const refreshTokenClient = new RefreshTokenClient(\n                clientConfiguration\n            );\n\n            try {\n                await refreshTokenClient.acquireTokenByRefreshToken(\n                    validRequest\n                );\n            } catch {\n                // do nothing, this is running in the background and no action is to be taken upon success or failure\n            }\n        }\n\n        // return the cached token\n        return authResponse;\n    }\n\n    /**\n     * Acquires tokens with password grant by exchanging client applications username and password for credentials\n     *\n     * The latest OAuth 2.0 Security Best Current Practice disallows the password grant entirely.\n     * More details on this recommendation at https://tools.ietf.org/html/draft-ietf-oauth-security-topics-13#section-3.4\n     * Microsoft's documentation and recommendations are at:\n     * https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-authentication-flows#usernamepassword\n     *\n     * @param request - UsenamePasswordRequest\n     * @deprecated - Use a more secure flow instead\n     */\n    async acquireTokenByUsernamePassword(\n        request: UsernamePasswordRequest\n    ): Promise<AuthenticationResult | null> {\n        this.logger.info(\n            \"acquireTokenByUsernamePassword called\",\n            request.correlationId\n        );\n        const validRequest: CommonUsernamePasswordRequest = {\n            ...request,\n            ...(await this.initializeBaseRequest(request)),\n        };\n        const serverTelemetryManager = this.initializeServerTelemetryManager(\n            ApiId.acquireTokenByUsernamePassword,\n            validRequest.correlationId\n        );\n        try {\n            const discoveredAuthority = await this.createAuthority(\n                validRequest.authority,\n                validRequest.correlationId,\n                undefined,\n                request.azureCloudOptions\n            );\n            const usernamePasswordClientConfig =\n                await this.buildOauthClientConfiguration(\n                    discoveredAuthority,\n                    validRequest.correlationId,\n                    \"\",\n                    serverTelemetryManager\n                );\n            const usernamePasswordClient = new UsernamePasswordClient(\n                usernamePasswordClientConfig\n            );\n            this.logger.verbose(\n                \"Username password client created\",\n                validRequest.correlationId\n            );\n            return await usernamePasswordClient.acquireToken(validRequest);\n        } catch (e) {\n            if (e instanceof AuthError) {\n                e.setCorrelationId(validRequest.correlationId);\n            }\n            serverTelemetryManager.cacheFailedRequest(e);\n            throw e;\n        }\n    }\n\n    /**\n     * Gets the token cache for the application.\n     */\n    getTokenCache(): TokenCache {\n        this.logger.info(\"getTokenCache called\");\n        return this.tokenCache;\n    }\n\n    /**\n     * Validates OIDC state by comparing the user cached state with the state received from the server.\n     *\n     * This API is provided for scenarios where you would use OAuth2.0 state parameter to mitigate against\n     * CSRF attacks.\n     * For more information about state, visit https://datatracker.ietf.org/doc/html/rfc6819#section-3.6.\n     * @param state - Unique GUID generated by the user that is cached by the user and sent to the server during the first leg of the flow\n     * @param cachedState - This string is sent back by the server with the authorization code\n     */\n    protected validateState(state: string, cachedState: string): void {\n        if (!state) {\n            throw NodeAuthError.createStateNotFoundError();\n        }\n\n        if (state !== cachedState) {\n            throw createClientAuthError(ClientAuthErrorCodes.stateMismatch);\n        }\n    }\n\n    /**\n     * Returns the logger instance\n     */\n    getLogger(): Logger {\n        return this.logger;\n    }\n\n    /**\n     * Replaces the default logger set in configurations with new Logger with new configurations\n     * @param logger - Logger instance\n     */\n    setLogger(logger: Logger): void {\n        this.logger = logger;\n    }\n\n    /**\n     * Builds the common configuration to be passed to the common component based on the platform configurarion\n     * @param authority - user passed authority in configuration\n     * @param serverTelemetryManager - initializes servertelemetry if passed\n     */\n    protected async buildOauthClientConfiguration(\n        discoveredAuthority: Authority,\n        requestCorrelationId: string,\n        redirectUri: string,\n        serverTelemetryManager?: ServerTelemetryManager\n    ): Promise<ClientConfiguration> {\n        this.logger.verbose(\n            \"buildOauthClientConfiguration called\",\n            requestCorrelationId\n        );\n\n        this.logger.info(\n            `Building oauth client configuration with the following authority: ${discoveredAuthority.tokenEndpoint}.`,\n            requestCorrelationId\n        );\n\n        serverTelemetryManager?.updateRegionDiscoveryMetadata(\n            discoveredAuthority.regionDiscoveryMetadata\n        );\n\n        const clientConfiguration: ClientConfiguration = {\n            authOptions: {\n                clientId: this.config.auth.clientId,\n                authority: discoveredAuthority,\n                clientCapabilities: this.config.auth.clientCapabilities,\n                redirectUri,\n            },\n            loggerOptions: {\n                logLevel: this.config.system.loggerOptions.logLevel,\n                loggerCallback: this.config.system.loggerOptions.loggerCallback,\n                piiLoggingEnabled:\n                    this.config.system.loggerOptions.piiLoggingEnabled,\n                correlationId: requestCorrelationId,\n            },\n            cacheOptions: {\n                claimsBasedCachingEnabled:\n                    this.config.cache.claimsBasedCachingEnabled,\n            },\n            cryptoInterface: this.cryptoProvider,\n            networkInterface: this.config.system.networkClient,\n            storageInterface: this.storage,\n            serverTelemetryManager: serverTelemetryManager,\n            clientCredentials: {\n                clientSecret: this.clientSecret,\n                clientAssertion: await this.getClientAssertion(\n                    discoveredAuthority\n                ),\n            },\n            libraryInfo: {\n                sku: NodeConstants.MSAL_SKU,\n                version: version,\n                cpu: process.arch || Constants.EMPTY_STRING,\n                os: process.platform || Constants.EMPTY_STRING,\n            },\n            telemetry: this.config.telemetry,\n            persistencePlugin: this.config.cache.cachePlugin,\n            serializableCache: this.tokenCache,\n        };\n\n        return clientConfiguration;\n    }\n\n    private async getClientAssertion(\n        authority: Authority\n    ): Promise<ClientAssertionType> {\n        if (this.developerProvidedClientAssertion) {\n            this.clientAssertion = ClientAssertion.fromAssertion(\n                await getClientAssertion(\n                    this.developerProvidedClientAssertion,\n                    this.config.auth.clientId,\n                    authority.tokenEndpoint\n                )\n            );\n        }\n\n        return (\n            this.clientAssertion && {\n                assertion: this.clientAssertion.getJwt(\n                    this.cryptoProvider,\n                    this.config.auth.clientId,\n                    authority.tokenEndpoint\n                ),\n                assertionType: NodeConstants.JWT_BEARER_ASSERTION_TYPE,\n            }\n        );\n    }\n\n    /**\n     * Generates a request with the default scopes & generates a correlationId.\n     * @param authRequest - BaseAuthRequest for initialization\n     */\n    protected async initializeBaseRequest(\n        authRequest: Partial<BaseAuthRequest>\n    ): Promise<BaseAuthRequest> {\n        this.logger.verbose(\n            \"initializeRequestScopes called\",\n            authRequest.correlationId\n        );\n        // Default authenticationScheme to Bearer, log that POP isn't supported yet\n        if (\n            authRequest.authenticationScheme &&\n            authRequest.authenticationScheme === AuthenticationScheme.POP\n        ) {\n            this.logger.verbose(\n                \"Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request\",\n                authRequest.correlationId\n            );\n        }\n\n        authRequest.authenticationScheme = AuthenticationScheme.BEARER;\n\n        // Set requested claims hash if claims-based caching is enabled and claims were requested\n        if (\n            this.config.cache.claimsBasedCachingEnabled &&\n            authRequest.claims &&\n            // Checks for empty stringified object \"{}\" which doesn't qualify as requested claims\n            !StringUtils.isEmptyObj(authRequest.claims)\n        ) {\n            authRequest.requestedClaimsHash =\n                await this.cryptoProvider.hashString(authRequest.claims);\n        }\n\n        return {\n            ...authRequest,\n            scopes: [\n                ...((authRequest && authRequest.scopes) || []),\n                ...OIDC_DEFAULT_SCOPES,\n            ],\n            correlationId:\n                (authRequest && authRequest.correlationId) ||\n                this.cryptoProvider.createNewGuid(),\n            authority: authRequest.authority || this.config.auth.authority,\n        };\n    }\n\n    /**\n     * Initializes the server telemetry payload\n     * @param apiId - Id for a specific request\n     * @param correlationId - GUID\n     * @param forceRefresh - boolean to indicate network call\n     */\n    protected initializeServerTelemetryManager(\n        apiId: number,\n        correlationId: string,\n        forceRefresh?: boolean\n    ): ServerTelemetryManager {\n        const telemetryPayload: ServerTelemetryRequest = {\n            clientId: this.config.auth.clientId,\n            correlationId: correlationId,\n            apiId: apiId,\n            forceRefresh: forceRefresh || false,\n        };\n\n        return new ServerTelemetryManager(telemetryPayload, this.storage);\n    }\n\n    /**\n     * Create authority instance. If authority not passed in request, default to authority set on the application\n     * object. If no authority set in application object, then default to common authority.\n     * @param authorityString - authority from user configuration\n     */\n    protected async createAuthority(\n        authorityString: string,\n        requestCorrelationId: string,\n        azureRegionConfiguration?: AzureRegionConfiguration,\n        azureCloudOptions?: AzureCloudOptions\n    ): Promise<Authority> {\n        this.logger.verbose(\"createAuthority called\", requestCorrelationId);\n\n        // build authority string based on auth params - azureCloudInstance is prioritized if provided\n        const authorityUrl = Authority.generateAuthority(\n            authorityString,\n            azureCloudOptions || this.config.auth.azureCloudOptions\n        );\n\n        const authorityOptions: AuthorityOptions = {\n            protocolMode: this.config.auth.protocolMode,\n            knownAuthorities: this.config.auth.knownAuthorities,\n            cloudDiscoveryMetadata: this.config.auth.cloudDiscoveryMetadata,\n            authorityMetadata: this.config.auth.authorityMetadata,\n            azureRegionConfiguration,\n            skipAuthorityMetadataCache:\n                this.config.auth.skipAuthorityMetadataCache,\n        };\n\n        return AuthorityFactory.createDiscoveredInstance(\n            authorityUrl,\n            this.config.system.networkClient,\n            this.storage,\n            authorityOptions,\n            this.logger,\n            requestCorrelationId\n        );\n    }\n\n    /**\n     * Clear the cache\n     */\n    clearCache(): void {\n        this.storage.clear();\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    Constants as CommonConstants,\n    AuthorizeResponse,\n    HttpStatus,\n    UrlUtils,\n} from \"@azure/msal-common/node\";\nimport http from \"http\";\nimport { NodeAuthError } from \"../error/NodeAuthError.js\";\nimport { Constants } from \"../utils/Constants.js\";\nimport { ILoopbackClient } from \"./ILoopbackClient.js\";\n\nexport class LoopbackClient implements ILoopbackClient {\n    private server: http.Server | undefined;\n\n    /**\n     * Spins up a loopback server which returns the server response when the localhost redirectUri is hit\n     * @param successTemplate\n     * @param errorTemplate\n     * @returns\n     */\n    async listenForAuthCode(\n        successTemplate?: string,\n        errorTemplate?: string\n    ): Promise<AuthorizeResponse> {\n        if (this.server) {\n            throw NodeAuthError.createLoopbackServerAlreadyExistsError();\n        }\n\n        return new Promise<AuthorizeResponse>((resolve, reject) => {\n            this.server = http.createServer(\n                (req: http.IncomingMessage, res: http.ServerResponse) => {\n                    const url = req.url;\n                    if (!url) {\n                        res.end(\n                            errorTemplate ||\n                                \"Error occurred loading redirectUrl\"\n                        );\n                        reject(\n                            NodeAuthError.createUnableToLoadRedirectUrlError()\n                        );\n                        return;\n                    } else if (url === CommonConstants.FORWARD_SLASH) {\n                        res.end(\n                            successTemplate ||\n                                \"Auth code was successfully acquired. You can close this window now.\"\n                        );\n                        return;\n                    }\n\n                    const redirectUri = this.getRedirectUri();\n                    const parsedUrl = new URL(url, redirectUri);\n                    const authCodeResponse =\n                        UrlUtils.getDeserializedResponse(parsedUrl.search) ||\n                        {};\n                    if (authCodeResponse.code) {\n                        res.writeHead(HttpStatus.REDIRECT, {\n                            location: redirectUri,\n                        }); // Prevent auth code from being saved in the browser history\n                        res.end();\n                    }\n                    if (authCodeResponse.error) {\n                        res.end(\n                            errorTemplate ||\n                                `Error occurred: ${authCodeResponse.error}`\n                        );\n                    }\n                    resolve(authCodeResponse);\n                }\n            );\n            this.server.listen(0, \"127.0.0.1\"); // Listen on any available port\n        });\n    }\n\n    /**\n     * Get the port that the loopback server is running on\n     * @returns\n     */\n    getRedirectUri(): string {\n        if (!this.server || !this.server.listening) {\n            throw NodeAuthError.createNoLoopbackServerExistsError();\n        }\n\n        const address = this.server.address();\n        if (!address || typeof address === \"string\" || !address.port) {\n            this.closeServer();\n            throw NodeAuthError.createInvalidLoopbackAddressTypeError();\n        }\n\n        const port = address && address.port;\n\n        return `${Constants.HTTP_PROTOCOL}${Constants.LOCALHOST}:${port}`;\n    }\n\n    /**\n     * Close the loopback server\n     */\n    closeServer(): void {\n        if (this.server) {\n            // Only stops accepting new connections, server will close once open/idle connections are closed.\n            this.server.close();\n\n            if (typeof this.server.closeAllConnections === \"function\") {\n                /*\n                 * Close open/idle connections. This API is available in Node versions 18.2 and higher\n                 */\n                this.server.closeAllConnections();\n            }\n            this.server.unref();\n            this.server = undefined;\n        }\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    AuthErrorCodes,\n    AuthenticationResult,\n    BaseClient,\n    ClientAuthErrorCodes,\n    ClientConfiguration,\n    CommonDeviceCodeRequest,\n    Constants,\n    DeviceCodeResponse,\n    GrantType,\n    RequestParameterBuilder,\n    RequestThumbprint,\n    ResponseHandler,\n    ServerAuthorizationTokenResponse,\n    ServerDeviceCodeResponse,\n    StringUtils,\n    TimeUtils,\n    UrlString,\n    UrlUtils,\n    createAuthError,\n    createClientAuthError,\n} from \"@azure/msal-common/node\";\n\n/**\n * OAuth2.0 Device code client\n * @public\n */\nexport class DeviceCodeClient extends BaseClient {\n    constructor(configuration: ClientConfiguration) {\n        super(configuration);\n    }\n\n    /**\n     * Gets device code from device code endpoint, calls back to with device code response, and\n     * polls token endpoint to exchange device code for tokens\n     * @param request - developer provided CommonDeviceCodeRequest\n     */\n    public async acquireToken(\n        request: CommonDeviceCodeRequest\n    ): Promise<AuthenticationResult | null> {\n        const deviceCodeResponse: DeviceCodeResponse = await this.getDeviceCode(\n            request\n        );\n        request.deviceCodeCallback(deviceCodeResponse);\n        const reqTimestamp = TimeUtils.nowSeconds();\n        const response: ServerAuthorizationTokenResponse =\n            await this.acquireTokenWithDeviceCode(request, deviceCodeResponse);\n\n        const responseHandler = new ResponseHandler(\n            this.config.authOptions.clientId,\n            this.cacheManager,\n            this.cryptoUtils,\n            this.logger,\n            this.config.serializableCache,\n            this.config.persistencePlugin\n        );\n\n        // Validate response. This function throws a server error if an error is returned by the server.\n        responseHandler.validateTokenResponse(response);\n        return responseHandler.handleServerTokenResponse(\n            response,\n            this.authority,\n            reqTimestamp,\n            request\n        );\n    }\n\n    /**\n     * Creates device code request and executes http GET\n     * @param request - developer provided CommonDeviceCodeRequest\n     */\n    private async getDeviceCode(\n        request: CommonDeviceCodeRequest\n    ): Promise<DeviceCodeResponse> {\n        const queryParametersString = this.createExtraQueryParameters(request);\n        const endpoint = UrlString.appendQueryString(\n            this.authority.deviceCodeEndpoint,\n            queryParametersString\n        );\n        const queryString = this.createQueryString(request);\n        const headers = this.createTokenRequestHeaders();\n        const thumbprint: RequestThumbprint = {\n            clientId: this.config.authOptions.clientId,\n            authority: request.authority,\n            scopes: request.scopes,\n            claims: request.claims,\n            authenticationScheme: request.authenticationScheme,\n            resourceRequestMethod: request.resourceRequestMethod,\n            resourceRequestUri: request.resourceRequestUri,\n            shrClaims: request.shrClaims,\n            sshKid: request.sshKid,\n        };\n\n        return this.executePostRequestToDeviceCodeEndpoint(\n            endpoint,\n            queryString,\n            headers,\n            thumbprint,\n            request.correlationId\n        );\n    }\n\n    /**\n     * Creates query string for the device code request\n     * @param request - developer provided CommonDeviceCodeRequest\n     */\n    public createExtraQueryParameters(\n        request: CommonDeviceCodeRequest\n    ): string {\n        const parameters = new Map<string, string>();\n\n        if (request.extraQueryParameters) {\n            RequestParameterBuilder.addExtraQueryParameters(\n                parameters,\n                request.extraQueryParameters\n            );\n        }\n\n        return UrlUtils.mapToQueryString(parameters);\n    }\n\n    /**\n     * Executes POST request to device code endpoint\n     * @param deviceCodeEndpoint - token endpoint\n     * @param queryString - string to be used in the body of the request\n     * @param headers - headers for the request\n     * @param thumbprint - unique request thumbprint\n     * @param correlationId - correlation id to be used in the request\n     */\n    private async executePostRequestToDeviceCodeEndpoint(\n        deviceCodeEndpoint: string,\n        queryString: string,\n        headers: Record<string, string>,\n        thumbprint: RequestThumbprint,\n        correlationId: string\n    ): Promise<DeviceCodeResponse> {\n        const {\n            body: {\n                user_code: userCode,\n                device_code: deviceCode,\n                verification_uri: verificationUri,\n                expires_in: expiresIn,\n                interval,\n                message,\n            },\n        } = await this.sendPostRequest<ServerDeviceCodeResponse>(\n            thumbprint,\n            deviceCodeEndpoint,\n            {\n                body: queryString,\n                headers: headers,\n            },\n            correlationId\n        );\n\n        return {\n            userCode,\n            deviceCode,\n            verificationUri,\n            expiresIn,\n            interval,\n            message,\n        };\n    }\n\n    /**\n     * Create device code endpoint query parameters and returns string\n     * @param request - developer provided CommonDeviceCodeRequest\n     */\n    private createQueryString(request: CommonDeviceCodeRequest): string {\n        const parameters = new Map<string, string>();\n\n        RequestParameterBuilder.addScopes(parameters, request.scopes);\n        RequestParameterBuilder.addClientId(\n            parameters,\n            this.config.authOptions.clientId\n        );\n\n        if (request.extraQueryParameters) {\n            RequestParameterBuilder.addExtraQueryParameters(\n                parameters,\n                request.extraQueryParameters\n            );\n        }\n\n        if (\n            request.claims ||\n            (this.config.authOptions.clientCapabilities &&\n                this.config.authOptions.clientCapabilities.length > 0)\n        ) {\n            RequestParameterBuilder.addClaims(\n                parameters,\n                request.claims,\n                this.config.authOptions.clientCapabilities\n            );\n        }\n\n        return UrlUtils.mapToQueryString(parameters);\n    }\n\n    /**\n     * Breaks the polling with specific conditions\n     * @param deviceCodeExpirationTime - expiration time for the device code request\n     * @param userSpecifiedTimeout - developer provided timeout, to be compared against deviceCodeExpirationTime\n     * @param userSpecifiedCancelFlag - boolean indicating the developer would like to cancel the request\n     */\n    private continuePolling(\n        deviceCodeExpirationTime: number,\n        userSpecifiedTimeout?: number,\n        userSpecifiedCancelFlag?: boolean\n    ): boolean {\n        if (userSpecifiedCancelFlag) {\n            this.logger.error(\n                \"Token request cancelled by setting DeviceCodeRequest.cancel = true\"\n            );\n            throw createClientAuthError(\n                ClientAuthErrorCodes.deviceCodePollingCancelled\n            );\n        } else if (\n            userSpecifiedTimeout &&\n            userSpecifiedTimeout < deviceCodeExpirationTime &&\n            TimeUtils.nowSeconds() > userSpecifiedTimeout\n        ) {\n            this.logger.error(\n                `User defined timeout for device code polling reached. The timeout was set for ${userSpecifiedTimeout}`\n            );\n            throw createClientAuthError(\n                ClientAuthErrorCodes.userTimeoutReached\n            );\n        } else if (TimeUtils.nowSeconds() > deviceCodeExpirationTime) {\n            if (userSpecifiedTimeout) {\n                this.logger.verbose(\n                    `User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${userSpecifiedTimeout}`\n                );\n            }\n            this.logger.error(\n                `Device code expired. Expiration time of device code was ${deviceCodeExpirationTime}`\n            );\n            throw createClientAuthError(ClientAuthErrorCodes.deviceCodeExpired);\n        }\n        return true;\n    }\n\n    /**\n     * Creates token request with device code response and polls token endpoint at interval set by the device code response\n     * @param request - developer provided CommonDeviceCodeRequest\n     * @param deviceCodeResponse - DeviceCodeResponse returned by the security token service device code endpoint\n     */\n    private async acquireTokenWithDeviceCode(\n        request: CommonDeviceCodeRequest,\n        deviceCodeResponse: DeviceCodeResponse\n    ): Promise<ServerAuthorizationTokenResponse> {\n        const queryParametersString = this.createTokenQueryParameters(request);\n        const endpoint = UrlString.appendQueryString(\n            this.authority.tokenEndpoint,\n            queryParametersString\n        );\n        const requestBody = this.createTokenRequestBody(\n            request,\n            deviceCodeResponse\n        );\n        const headers: Record<string, string> =\n            this.createTokenRequestHeaders();\n\n        const userSpecifiedTimeout = request.timeout\n            ? TimeUtils.nowSeconds() + request.timeout\n            : undefined;\n        const deviceCodeExpirationTime =\n            TimeUtils.nowSeconds() + deviceCodeResponse.expiresIn;\n        const pollingIntervalMilli = deviceCodeResponse.interval * 1000;\n\n        /*\n         * Poll token endpoint while (device code is not expired AND operation has not been cancelled by\n         * setting CancellationToken.cancel = true). POST request is sent at interval set by pollingIntervalMilli\n         */\n        while (\n            this.continuePolling(\n                deviceCodeExpirationTime,\n                userSpecifiedTimeout,\n                request.cancel\n            )\n        ) {\n            const thumbprint: RequestThumbprint = {\n                clientId: this.config.authOptions.clientId,\n                authority: request.authority,\n                scopes: request.scopes,\n                claims: request.claims,\n                authenticationScheme: request.authenticationScheme,\n                resourceRequestMethod: request.resourceRequestMethod,\n                resourceRequestUri: request.resourceRequestUri,\n                shrClaims: request.shrClaims,\n                sshKid: request.sshKid,\n            };\n            const response = await this.executePostToTokenEndpoint(\n                endpoint,\n                requestBody,\n                headers,\n                thumbprint,\n                request.correlationId\n            );\n\n            if (response.body && response.body.error) {\n                // user authorization is pending. Sleep for polling interval and try again\n                if (response.body.error === Constants.AUTHORIZATION_PENDING) {\n                    this.logger.info(\n                        \"Authorization pending. Continue polling.\"\n                    );\n                    await TimeUtils.delay(pollingIntervalMilli);\n                } else {\n                    // for any other error, throw\n                    this.logger.info(\n                        \"Unexpected error in polling from the server\"\n                    );\n                    throw createAuthError(\n                        AuthErrorCodes.postRequestFailed,\n                        response.body.error\n                    );\n                }\n            } else {\n                this.logger.verbose(\n                    \"Authorization completed successfully. Polling stopped.\"\n                );\n                return response.body;\n            }\n        }\n\n        /*\n         * The above code should've thrown by this point, but to satisfy TypeScript,\n         * and in the rare case the conditionals in continuePolling() may not catch everything...\n         */\n        this.logger.error(\"Polling stopped for unknown reasons.\");\n        throw createClientAuthError(\n            ClientAuthErrorCodes.deviceCodeUnknownError\n        );\n    }\n\n    /**\n     * Creates query parameters and converts to string.\n     * @param request - developer provided CommonDeviceCodeRequest\n     * @param deviceCodeResponse - DeviceCodeResponse returned by the security token service device code endpoint\n     */\n    private createTokenRequestBody(\n        request: CommonDeviceCodeRequest,\n        deviceCodeResponse: DeviceCodeResponse\n    ): string {\n        const parameters = new Map<string, string>();\n\n        RequestParameterBuilder.addScopes(parameters, request.scopes);\n        RequestParameterBuilder.addClientId(\n            parameters,\n            this.config.authOptions.clientId\n        );\n        RequestParameterBuilder.addGrantType(\n            parameters,\n            GrantType.DEVICE_CODE_GRANT\n        );\n        RequestParameterBuilder.addDeviceCode(\n            parameters,\n            deviceCodeResponse.deviceCode\n        );\n        const correlationId =\n            request.correlationId ||\n            this.config.cryptoInterface.createNewGuid();\n        RequestParameterBuilder.addCorrelationId(parameters, correlationId);\n        RequestParameterBuilder.addClientInfo(parameters);\n        RequestParameterBuilder.addLibraryInfo(\n            parameters,\n            this.config.libraryInfo\n        );\n        RequestParameterBuilder.addApplicationTelemetry(\n            parameters,\n            this.config.telemetry.application\n        );\n        RequestParameterBuilder.addThrottling(parameters);\n        if (this.serverTelemetryManager) {\n            RequestParameterBuilder.addServerTelemetry(\n                parameters,\n                this.serverTelemetryManager\n            );\n        }\n\n        if (\n            !StringUtils.isEmptyObj(request.claims) ||\n            (this.config.authOptions.clientCapabilities &&\n                this.config.authOptions.clientCapabilities.length > 0)\n        ) {\n            RequestParameterBuilder.addClaims(\n                parameters,\n                request.claims,\n                this.config.authOptions.clientCapabilities\n            );\n        }\n        return UrlUtils.mapToQueryString(parameters);\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    ApiId,\n    Constants,\n    LOOPBACK_SERVER_CONSTANTS,\n} from \"../utils/Constants.js\";\nimport {\n    AuthenticationResult,\n    CommonDeviceCodeRequest,\n    AuthError,\n    ResponseMode,\n    OIDC_DEFAULT_SCOPES,\n    CodeChallengeMethodValues,\n    Constants as CommonConstants,\n    ServerError,\n    NativeRequest,\n    NativeSignOutRequest,\n    AccountInfo,\n    INativeBrokerPlugin,\n    AuthorizeResponse,\n    AADServerParamKeys,\n    ServerTelemetryManager,\n} from \"@azure/msal-common/node\";\nimport { Configuration } from \"../config/Configuration.js\";\nimport { ClientApplication } from \"./ClientApplication.js\";\nimport { IPublicClientApplication } from \"./IPublicClientApplication.js\";\nimport { DeviceCodeRequest } from \"../request/DeviceCodeRequest.js\";\nimport { AuthorizationUrlRequest } from \"../request/AuthorizationUrlRequest.js\";\nimport { AuthorizationCodeRequest } from \"../request/AuthorizationCodeRequest.js\";\nimport { InteractiveRequest } from \"../request/InteractiveRequest.js\";\nimport { NodeAuthError, NodeAuthErrorMessage } from \"../error/NodeAuthError.js\";\nimport { LoopbackClient } from \"../network/LoopbackClient.js\";\nimport { SilentFlowRequest } from \"../request/SilentFlowRequest.js\";\nimport { SignOutRequest } from \"../request/SignOutRequest.js\";\nimport { ILoopbackClient } from \"../network/ILoopbackClient.js\";\nimport { DeviceCodeClient } from \"./DeviceCodeClient.js\";\nimport { version } from \"../packageMetadata.js\";\n\n/**\n * This class is to be used to acquire tokens for public client applications (desktop, mobile). Public client applications\n * are not trusted to safely store application secrets, and therefore can only request tokens in the name of an user.\n * @public\n */\nexport class PublicClientApplication\n    extends ClientApplication\n    implements IPublicClientApplication\n{\n    private nativeBrokerPlugin?: INativeBrokerPlugin;\n    private readonly skus: string;\n    /**\n     * Important attributes in the Configuration object for auth are:\n     * - clientID: the application ID of your application. You can obtain one by registering your application with our Application registration portal.\n     * - authority: the authority URL for your application.\n     *\n     * AAD authorities are of the form https://login.microsoftonline.com/\\{Enter_the_Tenant_Info_Here\\}.\n     * - If your application supports Accounts in one organizational directory, replace \"Enter_the_Tenant_Info_Here\" value with the Tenant Id or Tenant name (for example, contoso.microsoft.com).\n     * - If your application supports Accounts in any organizational directory, replace \"Enter_the_Tenant_Info_Here\" value with organizations.\n     * - If your application supports Accounts in any organizational directory and personal Microsoft accounts, replace \"Enter_the_Tenant_Info_Here\" value with common.\n     * - To restrict support to Personal Microsoft accounts only, replace \"Enter_the_Tenant_Info_Here\" value with consumers.\n     *\n     * Azure B2C authorities are of the form https://\\{instance\\}/\\{tenant\\}/\\{policy\\}. Each policy is considered\n     * its own authority. You will have to set the all of the knownAuthorities at the time of the client application\n     * construction.\n     *\n     * ADFS authorities are of the form https://\\{instance\\}/adfs.\n     */\n    constructor(configuration: Configuration) {\n        super(configuration);\n        if (this.config.broker.nativeBrokerPlugin) {\n            if (this.config.broker.nativeBrokerPlugin.isBrokerAvailable) {\n                this.nativeBrokerPlugin = this.config.broker.nativeBrokerPlugin;\n                this.nativeBrokerPlugin.setLogger(\n                    this.config.system.loggerOptions\n                );\n            } else {\n                this.logger.warning(\n                    \"NativeBroker implementation was provided but the broker is unavailable.\"\n                );\n            }\n        }\n        this.skus = ServerTelemetryManager.makeExtraSkuString({\n            libraryName: Constants.MSAL_SKU,\n            libraryVersion: version,\n        });\n    }\n\n    /**\n     * Acquires a token from the authority using OAuth2.0 device code flow.\n     * This flow is designed for devices that do not have access to a browser or have input constraints.\n     * The authorization server issues a DeviceCode object with a verification code, an end-user code,\n     * and the end-user verification URI. The DeviceCode object is provided through a callback, and the end-user should be\n     * instructed to use another device to navigate to the verification URI to input credentials.\n     * Since the client cannot receive incoming requests, it polls the authorization server repeatedly\n     * until the end-user completes input of credentials.\n     */\n    public async acquireTokenByDeviceCode(\n        request: DeviceCodeRequest\n    ): Promise<AuthenticationResult | null> {\n        this.logger.info(\n            \"acquireTokenByDeviceCode called\",\n            request.correlationId\n        );\n        const validRequest: CommonDeviceCodeRequest = Object.assign(\n            request,\n            await this.initializeBaseRequest(request)\n        );\n        const serverTelemetryManager = this.initializeServerTelemetryManager(\n            ApiId.acquireTokenByDeviceCode,\n            validRequest.correlationId\n        );\n        try {\n            const discoveredAuthority = await this.createAuthority(\n                validRequest.authority,\n                validRequest.correlationId,\n                undefined,\n                request.azureCloudOptions\n            );\n            const deviceCodeConfig = await this.buildOauthClientConfiguration(\n                discoveredAuthority,\n                validRequest.correlationId,\n                \"\",\n                serverTelemetryManager\n            );\n            const deviceCodeClient = new DeviceCodeClient(deviceCodeConfig);\n            this.logger.verbose(\n                \"Device code client created\",\n                validRequest.correlationId\n            );\n            return await deviceCodeClient.acquireToken(validRequest);\n        } catch (e) {\n            if (e instanceof AuthError) {\n                e.setCorrelationId(validRequest.correlationId);\n            }\n            serverTelemetryManager.cacheFailedRequest(e as AuthError);\n            throw e;\n        }\n    }\n\n    /**\n     * Acquires a token interactively via the browser by requesting an authorization code then exchanging it for a token.\n     */\n    async acquireTokenInteractive(\n        request: InteractiveRequest\n    ): Promise<AuthenticationResult> {\n        const correlationId =\n            request.correlationId || this.cryptoProvider.createNewGuid();\n        this.logger.trace(\"acquireTokenInteractive called\", correlationId);\n        const {\n            openBrowser,\n            successTemplate,\n            errorTemplate,\n            windowHandle,\n            loopbackClient: customLoopbackClient,\n            ...remainingProperties\n        } = request;\n\n        if (this.nativeBrokerPlugin) {\n            const brokerRequest: NativeRequest = {\n                ...remainingProperties,\n                clientId: this.config.auth.clientId,\n                scopes: request.scopes || OIDC_DEFAULT_SCOPES,\n                redirectUri: request.redirectUri || \"\",\n                authority: request.authority || this.config.auth.authority,\n                correlationId: correlationId,\n                extraParameters: {\n                    ...remainingProperties.extraQueryParameters,\n                    ...remainingProperties.tokenQueryParameters,\n                    [AADServerParamKeys.X_CLIENT_EXTRA_SKU]: this.skus,\n                },\n                accountId: remainingProperties.account?.nativeAccountId,\n            };\n            return this.nativeBrokerPlugin.acquireTokenInteractive(\n                brokerRequest,\n                windowHandle\n            );\n        }\n\n        if (request.redirectUri) {\n            // If its not a broker fallback scenario, we throw a error\n            if (!this.config.broker.nativeBrokerPlugin) {\n                throw NodeAuthError.createRedirectUriNotSupportedError();\n            }\n            // If a redirect URI is provided for a broker flow but MSAL runtime startup failed, we fall back to the browser flow and will ignore the redirect URI provided for the broker flow\n            request.redirectUri = \"\";\n        }\n\n        const { verifier, challenge } =\n            await this.cryptoProvider.generatePkceCodes();\n\n        const loopbackClient: ILoopbackClient =\n            customLoopbackClient || new LoopbackClient();\n\n        let authCodeResponse: AuthorizeResponse = {};\n        let authCodeListenerError: AuthError | null = null;\n        try {\n            const authCodeListener = loopbackClient\n                .listenForAuthCode(successTemplate, errorTemplate)\n                .then((response) => {\n                    authCodeResponse = response;\n                })\n                .catch((e) => {\n                    // Store the promise instead of throwing so we can control when its thrown\n                    authCodeListenerError = e;\n                });\n\n            // Wait for server to be listening\n            const redirectUri = await this.waitForRedirectUri(loopbackClient);\n\n            const validRequest: AuthorizationUrlRequest = {\n                ...remainingProperties,\n                correlationId: correlationId,\n                scopes: request.scopes || OIDC_DEFAULT_SCOPES,\n                redirectUri: redirectUri,\n                responseMode: ResponseMode.QUERY,\n                codeChallenge: challenge,\n                codeChallengeMethod: CodeChallengeMethodValues.S256,\n            };\n\n            const authCodeUrl = await this.getAuthCodeUrl(validRequest);\n            await openBrowser(authCodeUrl);\n            await authCodeListener;\n            if (authCodeListenerError) {\n                throw authCodeListenerError;\n            }\n\n            if (authCodeResponse.error) {\n                throw new ServerError(\n                    authCodeResponse.error,\n                    authCodeResponse.error_description,\n                    authCodeResponse.suberror\n                );\n            } else if (!authCodeResponse.code) {\n                throw NodeAuthError.createNoAuthCodeInResponseError();\n            }\n\n            const clientInfo = authCodeResponse.client_info;\n            const tokenRequest: AuthorizationCodeRequest = {\n                code: authCodeResponse.code,\n                codeVerifier: verifier,\n                clientInfo: clientInfo || CommonConstants.EMPTY_STRING,\n                ...validRequest,\n            };\n            return await this.acquireTokenByCode(tokenRequest); // Await this so the server doesn't close prematurely\n        } finally {\n            loopbackClient.closeServer();\n        }\n    }\n\n    /**\n     * Returns a token retrieved either from the cache or by exchanging the refresh token for a fresh access token. If brokering is enabled the token request will be serviced by the broker.\n     * @param request - developer provided SilentFlowRequest\n     * @returns\n     */\n    async acquireTokenSilent(\n        request: SilentFlowRequest\n    ): Promise<AuthenticationResult> {\n        const correlationId =\n            request.correlationId || this.cryptoProvider.createNewGuid();\n        this.logger.trace(\"acquireTokenSilent called\", correlationId);\n\n        if (this.nativeBrokerPlugin) {\n            const brokerRequest: NativeRequest = {\n                ...request,\n                clientId: this.config.auth.clientId,\n                scopes: request.scopes || OIDC_DEFAULT_SCOPES,\n                redirectUri: request.redirectUri || \"\",\n                authority: request.authority || this.config.auth.authority,\n                correlationId: correlationId,\n                extraParameters: {\n                    ...request.tokenQueryParameters,\n                    [AADServerParamKeys.X_CLIENT_EXTRA_SKU]: this.skus,\n                },\n                accountId: request.account.nativeAccountId,\n                forceRefresh: request.forceRefresh || false,\n            };\n            return this.nativeBrokerPlugin.acquireTokenSilent(brokerRequest);\n        }\n\n        if (request.redirectUri) {\n            // If its not a broker fallback scenario, we throw a error\n            if (!this.config.broker.nativeBrokerPlugin) {\n                throw NodeAuthError.createRedirectUriNotSupportedError();\n            }\n            request.redirectUri = \"\";\n        }\n\n        return super.acquireTokenSilent(request);\n    }\n\n    /**\n     * Removes cache artifacts associated with the given account\n     * @param request - developer provided SignOutRequest\n     * @returns\n     */\n    async signOut(request: SignOutRequest): Promise<void> {\n        if (this.nativeBrokerPlugin && request.account.nativeAccountId) {\n            const signoutRequest: NativeSignOutRequest = {\n                clientId: this.config.auth.clientId,\n                accountId: request.account.nativeAccountId,\n                correlationId:\n                    request.correlationId ||\n                    this.cryptoProvider.createNewGuid(),\n            };\n            await this.nativeBrokerPlugin.signOut(signoutRequest);\n        }\n\n        await this.getTokenCache().removeAccount(\n            request.account,\n            request.correlationId\n        );\n    }\n\n    /**\n     * Returns all cached accounts for this application. If brokering is enabled this request will be serviced by the broker.\n     * @returns\n     */\n    async getAllAccounts(): Promise<AccountInfo[]> {\n        if (this.nativeBrokerPlugin) {\n            const correlationId = this.cryptoProvider.createNewGuid();\n            return this.nativeBrokerPlugin.getAllAccounts(\n                this.config.auth.clientId,\n                correlationId\n            );\n        }\n\n        return this.getTokenCache().getAllAccounts();\n    }\n\n    /**\n     * Attempts to retrieve the redirectUri from the loopback server. If the loopback server does not start listening for requests within the timeout this will throw.\n     * @param loopbackClient - developer provided custom loopback server implementation\n     * @returns\n     */\n    private async waitForRedirectUri(\n        loopbackClient: ILoopbackClient\n    ): Promise<string> {\n        return new Promise<string>((resolve, reject) => {\n            let ticks = 0;\n            const id = setInterval(() => {\n                if (\n                    LOOPBACK_SERVER_CONSTANTS.TIMEOUT_MS /\n                        LOOPBACK_SERVER_CONSTANTS.INTERVAL_MS <\n                    ticks\n                ) {\n                    clearInterval(id);\n                    reject(NodeAuthError.createLoopbackServerTimeoutError());\n                    return;\n                }\n\n                try {\n                    const r = loopbackClient.getRedirectUri();\n                    clearInterval(id);\n                    resolve(r);\n                    return;\n                } catch (e) {\n                    if (\n                        e instanceof AuthError &&\n                        e.errorCode ===\n                            NodeAuthErrorMessage.noLoopbackServerExists.code\n                    ) {\n                        // Loopback server is not listening yet\n                        ticks++;\n                        return;\n                    }\n                    clearInterval(id);\n                    reject(e);\n                    return;\n                }\n            }, LOOPBACK_SERVER_CONSTANTS.INTERVAL_MS);\n        });\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\n/**\n * @internal\n * Checks if a given date string is in ISO 8601 format.\n *\n * @param dateString - The date string to be checked.\n * @returns boolean - Returns true if the date string is in ISO 8601 format, otherwise false.\n */\nexport function isIso8601(dateString: number | string): boolean {\n    if (typeof dateString !== \"string\") {\n        return false;\n    }\n\n    const date = new Date(dateString);\n    return !isNaN(date.getTime()) && date.toISOString() === dateString;\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    HeaderNames,\n    INetworkModule,\n    Logger,\n    NetworkRequestOptions,\n    NetworkResponse,\n} from \"@azure/msal-common/node\";\nimport { IHttpRetryPolicy } from \"../retry/IHttpRetryPolicy.js\";\nimport { HttpMethod } from \"../utils/Constants.js\";\n\nexport class HttpClientWithRetries implements INetworkModule {\n    private httpClientNoRetries: INetworkModule;\n    private retryPolicy: IHttpRetryPolicy;\n    private logger: Logger;\n\n    constructor(\n        httpClientNoRetries: INetworkModule,\n        retryPolicy: IHttpRetryPolicy,\n        logger: Logger\n    ) {\n        this.httpClientNoRetries = httpClientNoRetries;\n        this.retryPolicy = retryPolicy;\n        this.logger = logger;\n    }\n\n    private async sendNetworkRequestAsyncHelper<T>(\n        httpMethod: HttpMethod,\n        url: string,\n        options?: NetworkRequestOptions\n    ): Promise<NetworkResponse<T>> {\n        if (httpMethod === HttpMethod.GET) {\n            return this.httpClientNoRetries.sendGetRequestAsync(url, options);\n        } else {\n            return this.httpClientNoRetries.sendPostRequestAsync(url, options);\n        }\n    }\n\n    private async sendNetworkRequestAsync<T>(\n        httpMethod: HttpMethod,\n        url: string,\n        options?: NetworkRequestOptions\n    ): Promise<NetworkResponse<T>> {\n        // the underlying network module (custom or HttpClient) will make the call\n        let response: NetworkResponse<T> =\n            await this.sendNetworkRequestAsyncHelper(httpMethod, url, options);\n\n        if (\"isNewRequest\" in this.retryPolicy) {\n            this.retryPolicy.isNewRequest = true;\n        }\n\n        let currentRetry: number = 0;\n        while (\n            await this.retryPolicy.pauseForRetry(\n                response.status,\n                currentRetry,\n                this.logger,\n                response.headers[HeaderNames.RETRY_AFTER]\n            )\n        ) {\n            response = await this.sendNetworkRequestAsyncHelper(\n                httpMethod,\n                url,\n                options\n            );\n            currentRetry++;\n        }\n\n        return response;\n    }\n\n    public async sendGetRequestAsync<T>(\n        url: string,\n        options?: NetworkRequestOptions\n    ): Promise<NetworkResponse<T>> {\n        return this.sendNetworkRequestAsync(HttpMethod.GET, url, options);\n    }\n\n    public async sendPostRequestAsync<T>(\n        url: string,\n        options?: NetworkRequestOptions\n    ): Promise<NetworkResponse<T>> {\n        return this.sendNetworkRequestAsync(HttpMethod.POST, url, options);\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    AuthError,\n    Authority,\n    ClientAuthErrorCodes,\n    Constants,\n    HeaderNames,\n    INetworkModule,\n    Logger,\n    NetworkRequestOptions,\n    NetworkResponse,\n    ResponseHandler,\n    ServerAuthorizationTokenResponse,\n    TimeUtils,\n    createClientAuthError,\n    AuthenticationResult,\n    UrlString,\n} from \"@azure/msal-common/node\";\nimport { ManagedIdentityId } from \"../../config/ManagedIdentityId.js\";\nimport { ManagedIdentityRequestParameters } from \"../../config/ManagedIdentityRequestParameters.js\";\nimport { CryptoProvider } from \"../../crypto/CryptoProvider.js\";\nimport { ManagedIdentityRequest } from \"../../request/ManagedIdentityRequest.js\";\nimport {\n    HttpMethod,\n    ManagedIdentityIdType,\n    ManagedIdentityQueryParameters,\n} from \"../../utils/Constants.js\";\nimport { ManagedIdentityTokenResponse } from \"../../response/ManagedIdentityTokenResponse.js\";\nimport { NodeStorage } from \"../../cache/NodeStorage.js\";\nimport {\n    ManagedIdentityErrorCodes,\n    createManagedIdentityError,\n} from \"../../error/ManagedIdentityError.js\";\nimport { isIso8601 } from \"../../utils/TimeUtils.js\";\nimport { HttpClientWithRetries } from \"../../network/HttpClientWithRetries.js\";\n\n/**\n * Managed Identity User Assigned Id Query Parameter Names\n */\nexport const ManagedIdentityUserAssignedIdQueryParameterNames = {\n    MANAGED_IDENTITY_CLIENT_ID_2017: \"clientid\", // 2017-09-01 API version\n    MANAGED_IDENTITY_CLIENT_ID: \"client_id\", // 2019+ API versions\n    MANAGED_IDENTITY_OBJECT_ID: \"object_id\",\n    MANAGED_IDENTITY_RESOURCE_ID_IMDS: \"msi_res_id\",\n    MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS: \"mi_res_id\",\n} as const;\nexport type ManagedIdentityUserAssignedIdQueryParameterNames =\n    (typeof ManagedIdentityUserAssignedIdQueryParameterNames)[keyof typeof ManagedIdentityUserAssignedIdQueryParameterNames];\n\n/**\n * Base class for all Managed Identity sources. Provides common functionality for\n * authenticating with Azure Managed Identity endpoints across different Azure services\n * including IMDS, App Service, Azure Arc, Service Fabric, Cloud Shell, and Machine Learning.\n *\n * This abstract class handles token acquisition, response processing, and network communication\n * while allowing concrete implementations to define source-specific request creation logic.\n */\nexport abstract class BaseManagedIdentitySource {\n    protected logger: Logger;\n    private nodeStorage: NodeStorage;\n    private networkClient: INetworkModule;\n    private cryptoProvider: CryptoProvider;\n    private disableInternalRetries: boolean;\n\n    /**\n     * Creates an instance of BaseManagedIdentitySource.\n     *\n     * @param logger - Logger instance for diagnostic information\n     * @param nodeStorage - Storage interface for caching tokens\n     * @param networkClient - Network client for making HTTP requests\n     * @param cryptoProvider - Cryptographic provider for token operations\n     * @param disableInternalRetries - Whether to disable automatic retry logic\n     */\n    constructor(\n        logger: Logger,\n        nodeStorage: NodeStorage,\n        networkClient: INetworkModule,\n        cryptoProvider: CryptoProvider,\n        disableInternalRetries: boolean\n    ) {\n        this.logger = logger;\n        this.nodeStorage = nodeStorage;\n        this.networkClient = networkClient;\n        this.cryptoProvider = cryptoProvider;\n        this.disableInternalRetries = disableInternalRetries;\n    }\n\n    /**\n     * Creates a managed identity request with source-specific parameters.\n     * This method must be implemented by concrete managed identity sources to define\n     * how requests are constructed for their specific endpoint requirements.\n     *\n     * @param resource - The Azure resource URI for which the access token is requested (e.g., \"https://vault.azure.net/\")\n     * @param managedIdentityId - The managed identity configuration specifying system-assigned or user-assigned identity details\n     *\n     * @returns Request parameters configured for the specific managed identity source\n     */\n    abstract createRequest(\n        resource: string,\n        managedIdentityId: ManagedIdentityId\n    ): ManagedIdentityRequestParameters;\n\n    /**\n     * Processes the network response and converts it to a standardized server token response.\n     * This async version allows for source-specific response processing logic while maintaining\n     * backward compatibility with the synchronous version.\n     *\n     * @param response - The network response containing the managed identity token\n     * @param _networkClient - Network client used for the request (unused in base implementation)\n     * @param _networkRequest - The original network request parameters (unused in base implementation)\n     * @param _networkRequestOptions - The network request options (unused in base implementation)\n     *\n     * @returns Promise resolving to a standardized server authorization token response\n     */\n    public async getServerTokenResponseAsync(\n        response: NetworkResponse<ManagedIdentityTokenResponse>,\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        _networkClient: INetworkModule,\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        _networkRequest: ManagedIdentityRequestParameters,\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        _networkRequestOptions: NetworkRequestOptions\n    ): Promise<ServerAuthorizationTokenResponse> {\n        return this.getServerTokenResponse(response);\n    }\n\n    /**\n     * Converts a managed identity token response to a standardized server authorization token response.\n     * Handles time format conversion, expiration calculation, and error mapping to ensure\n     * compatibility with the MSAL response handling pipeline.\n     *\n     * @param response - The network response containing the managed identity token\n     *\n     * @returns Standardized server authorization token response with normalized fields\n     */\n    public getServerTokenResponse(\n        response: NetworkResponse<ManagedIdentityTokenResponse>\n    ): ServerAuthorizationTokenResponse {\n        let refreshIn, expiresIn: number | undefined;\n        if (response.body.expires_on) {\n            // if the expires_on field in the response body is a string and in ISO 8601 format, convert it to a Unix timestamp (seconds since epoch)\n            if (isIso8601(response.body.expires_on)) {\n                response.body.expires_on =\n                    new Date(response.body.expires_on).getTime() / 1000;\n            }\n\n            expiresIn = response.body.expires_on - TimeUtils.nowSeconds();\n\n            // compute refresh_in as 1/2 of expires_in, but only if expires_in > 2h\n            if (expiresIn > 2 * 3600) {\n                refreshIn = expiresIn / 2;\n            }\n        }\n\n        const serverTokenResponse: ServerAuthorizationTokenResponse = {\n            status: response.status,\n\n            // success\n            access_token: response.body.access_token,\n            expires_in: expiresIn,\n            scope: response.body.resource,\n            token_type: response.body.token_type,\n            refresh_in: refreshIn,\n\n            // error\n            correlation_id:\n                response.body.correlation_id || response.body.correlationId,\n            error:\n                typeof response.body.error === \"string\"\n                    ? response.body.error\n                    : response.body.error?.code,\n            error_description:\n                response.body.message ||\n                (typeof response.body.error === \"string\"\n                    ? response.body.error_description\n                    : response.body.error?.message),\n            error_codes: response.body.error_codes,\n            timestamp: response.body.timestamp,\n            trace_id: response.body.trace_id,\n        };\n\n        return serverTokenResponse;\n    }\n\n    /**\n     * Acquires an access token using the managed identity endpoint for the specified resource.\n     * This is the primary method for token acquisition, handling the complete flow from\n     * request creation through response processing and token caching.\n     *\n     * @param managedIdentityRequest - The managed identity request containing resource and optional parameters\n     * @param managedIdentityId - The managed identity configuration (system or user-assigned)\n     * @param fakeAuthority - Authority instance used for token caching (managed identity uses a placeholder authority)\n     * @param refreshAccessToken - Whether this is a token refresh operation\n     *\n     * @returns Promise resolving to an authentication result containing the access token and metadata\n     *\n     * @throws {AuthError} When network requests fail or token validation fails\n     * @throws {ClientAuthError} When network errors occur during the request\n     */\n    public async acquireTokenWithManagedIdentity(\n        managedIdentityRequest: ManagedIdentityRequest,\n        managedIdentityId: ManagedIdentityId,\n        fakeAuthority: Authority,\n        refreshAccessToken?: boolean\n    ): Promise<AuthenticationResult> {\n        const networkRequest: ManagedIdentityRequestParameters =\n            this.createRequest(\n                managedIdentityRequest.resource,\n                managedIdentityId\n            );\n\n        if (managedIdentityRequest.revokedTokenSha256Hash) {\n            this.logger.info(\n                `[Managed Identity] The following claims are present in the request: ${managedIdentityRequest.claims}`\n            );\n\n            networkRequest.queryParameters[\n                ManagedIdentityQueryParameters.SHA256_TOKEN_TO_REFRESH\n            ] = managedIdentityRequest.revokedTokenSha256Hash;\n        }\n\n        if (managedIdentityRequest.clientCapabilities?.length) {\n            const clientCapabilities: string =\n                managedIdentityRequest.clientCapabilities.toString();\n\n            this.logger.info(\n                `[Managed Identity] The following client capabilities are present in the request: ${clientCapabilities}`\n            );\n\n            networkRequest.queryParameters[\n                ManagedIdentityQueryParameters.XMS_CC\n            ] = clientCapabilities;\n        }\n\n        const headers: Record<string, string> = networkRequest.headers;\n        headers[HeaderNames.CONTENT_TYPE] = Constants.URL_FORM_CONTENT_TYPE;\n\n        const networkRequestOptions: NetworkRequestOptions = { headers };\n\n        if (Object.keys(networkRequest.bodyParameters).length) {\n            networkRequestOptions.body =\n                networkRequest.computeParametersBodyString();\n        }\n\n        /**\n         * Initializes the network client helper based on the retry policy configuration.\n         * If internal retries are disabled, it uses the provided network client directly.\n         * Otherwise, it wraps the network client with an HTTP client that supports retries.\n         */\n        const networkClientHelper: INetworkModule = this.disableInternalRetries\n            ? this.networkClient\n            : new HttpClientWithRetries(\n                  this.networkClient,\n                  networkRequest.retryPolicy,\n                  this.logger\n              );\n\n        const reqTimestamp = TimeUtils.nowSeconds();\n        let response: NetworkResponse<ManagedIdentityTokenResponse>;\n        try {\n            // Sources that send POST requests: Cloud Shell\n            if (networkRequest.httpMethod === HttpMethod.POST) {\n                response =\n                    await networkClientHelper.sendPostRequestAsync<ManagedIdentityTokenResponse>(\n                        networkRequest.computeUri(),\n                        networkRequestOptions\n                    );\n                // Sources that send GET requests: App Service, Azure Arc, IMDS, Service Fabric\n            } else {\n                response =\n                    await networkClientHelper.sendGetRequestAsync<ManagedIdentityTokenResponse>(\n                        networkRequest.computeUri(),\n                        networkRequestOptions\n                    );\n            }\n        } catch (error) {\n            if (error instanceof AuthError) {\n                throw error;\n            } else {\n                throw createClientAuthError(ClientAuthErrorCodes.networkError);\n            }\n        }\n\n        const responseHandler = new ResponseHandler(\n            managedIdentityId.id,\n            this.nodeStorage,\n            this.cryptoProvider,\n            this.logger,\n            null,\n            null\n        );\n\n        const serverTokenResponse: ServerAuthorizationTokenResponse =\n            await this.getServerTokenResponseAsync(\n                response,\n                networkClientHelper,\n                networkRequest,\n                networkRequestOptions\n            );\n\n        responseHandler.validateTokenResponse(\n            serverTokenResponse,\n            refreshAccessToken\n        );\n\n        // caches the token\n        return responseHandler.handleServerTokenResponse(\n            serverTokenResponse,\n            fakeAuthority,\n            reqTimestamp,\n            managedIdentityRequest\n        );\n    }\n\n    /**\n     * Determines the appropriate query parameter name for user-assigned managed identity\n     * based on the identity type, API version, and endpoint characteristics.\n     * Different Azure services and API versions use different parameter names for the same identity types.\n     *\n     * @param managedIdentityIdType - The type of user-assigned managed identity (client ID, object ID, or resource ID)\n     * @param isImds - Whether the request is being made to the IMDS (Instance Metadata Service) endpoint\n     * @param usesApi2017 - Whether the endpoint uses the 2017-09-01 API version (affects client ID parameter name)\n     *\n     * @returns The correct query parameter name for the specified identity type and endpoint\n     *\n     * @throws {ManagedIdentityError} When an invalid managed identity ID type is provided\n     */\n    public getManagedIdentityUserAssignedIdQueryParameterKey(\n        managedIdentityIdType: ManagedIdentityIdType,\n        isImds?: boolean,\n        usesApi2017?: boolean\n    ): string {\n        switch (managedIdentityIdType) {\n            case ManagedIdentityIdType.USER_ASSIGNED_CLIENT_ID:\n                this.logger.info(\n                    `[Managed Identity] [API version ${\n                        usesApi2017 ? \"2017+\" : \"2019+\"\n                    }] Adding user assigned client id to the request.`\n                );\n                // The Machine Learning source uses the 2017-09-01 API version, which uses \"clientid\" instead of \"client_id\"\n                return usesApi2017\n                    ? ManagedIdentityUserAssignedIdQueryParameterNames.MANAGED_IDENTITY_CLIENT_ID_2017\n                    : ManagedIdentityUserAssignedIdQueryParameterNames.MANAGED_IDENTITY_CLIENT_ID;\n\n            case ManagedIdentityIdType.USER_ASSIGNED_RESOURCE_ID:\n                this.logger.info(\n                    \"[Managed Identity] Adding user assigned resource id to the request.\"\n                );\n                return isImds\n                    ? ManagedIdentityUserAssignedIdQueryParameterNames.MANAGED_IDENTITY_RESOURCE_ID_IMDS\n                    : ManagedIdentityUserAssignedIdQueryParameterNames.MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS;\n\n            case ManagedIdentityIdType.USER_ASSIGNED_OBJECT_ID:\n                this.logger.info(\n                    \"[Managed Identity] Adding user assigned object id to the request.\"\n                );\n                return ManagedIdentityUserAssignedIdQueryParameterNames.MANAGED_IDENTITY_OBJECT_ID;\n            default:\n                throw createManagedIdentityError(\n                    ManagedIdentityErrorCodes.invalidManagedIdentityIdType\n                );\n        }\n    }\n\n    /**\n     * Validates and normalizes an environment variable containing a URL string.\n     * This static utility method ensures that environment variables used for managed identity\n     * endpoints contain properly formatted URLs and provides informative error messages when validation fails.\n     *\n     * @param envVariableStringName - The name of the environment variable being validated (for error reporting)\n     * @param envVariable - The environment variable value containing the URL string\n     * @param sourceName - The name of the managed identity source (for error reporting)\n     * @param logger - Logger instance for diagnostic information\n     *\n     * @returns The validated and normalized URL string\n     *\n     * @throws {ManagedIdentityError} When the environment variable contains a malformed URL\n     */\n    public static getValidatedEnvVariableUrlString = (\n        envVariableStringName: keyof typeof ManagedIdentityErrorCodes.MsiEnvironmentVariableUrlMalformedErrorCodes,\n        envVariable: string,\n        sourceName: string,\n        logger: Logger\n    ): string => {\n        try {\n            return new UrlString(envVariable).urlString;\n        } catch (error) {\n            logger.info(\n                `[Managed Identity] ${sourceName} managed identity is unavailable because the '${envVariableStringName}' environment variable is malformed.`\n            );\n\n            throw createManagedIdentityError(\n                ManagedIdentityErrorCodes\n                    .MsiEnvironmentVariableUrlMalformedErrorCodes[\n                    envVariableStringName\n                ]\n            );\n        }\n    };\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { IncomingHttpHeaders } from \"http\";\nimport { HttpStatus, Logger } from \"@azure/msal-common\";\nimport { IHttpRetryPolicy } from \"./IHttpRetryPolicy.js\";\nimport { LinearRetryStrategy } from \"./LinearRetryStrategy.js\";\n\nexport const DEFAULT_MANAGED_IDENTITY_MAX_RETRIES: number = 3; // referenced in unit test\nconst DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS: number = 1000;\nconst DEFAULT_MANAGED_IDENTITY_HTTP_STATUS_CODES_TO_RETRY_ON: Array<number> = [\n    HttpStatus.NOT_FOUND,\n    HttpStatus.REQUEST_TIMEOUT,\n    HttpStatus.TOO_MANY_REQUESTS,\n    HttpStatus.SERVER_ERROR,\n    HttpStatus.SERVICE_UNAVAILABLE,\n    HttpStatus.GATEWAY_TIMEOUT,\n];\n\nexport class DefaultManagedIdentityRetryPolicy implements IHttpRetryPolicy {\n    /*\n     * this is defined here as a static variable despite being defined as a constant outside of the\n     * class because it needs to be overridden in the unit tests so that the unit tests run faster\n     */\n    static get DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS(): number {\n        return DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS;\n    }\n\n    private linearRetryStrategy: LinearRetryStrategy =\n        new LinearRetryStrategy();\n\n    async pauseForRetry(\n        httpStatusCode: number,\n        currentRetry: number,\n        logger: Logger,\n        retryAfterHeader: IncomingHttpHeaders[\"retry-after\"]\n    ): Promise<boolean> {\n        if (\n            DEFAULT_MANAGED_IDENTITY_HTTP_STATUS_CODES_TO_RETRY_ON.includes(\n                httpStatusCode\n            ) &&\n            currentRetry < DEFAULT_MANAGED_IDENTITY_MAX_RETRIES\n        ) {\n            const retryAfterDelay: number =\n                this.linearRetryStrategy.calculateDelay(\n                    retryAfterHeader,\n                    DefaultManagedIdentityRetryPolicy.DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS\n                );\n\n            logger.verbose(\n                `Retrying request in ${retryAfterDelay}ms (retry attempt: ${\n                    currentRetry + 1\n                })`\n            );\n\n            // pause execution for the calculated delay\n            await new Promise((resolve) => {\n                // retryAfterHeader value of 0 evaluates to false, and DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS will be used\n                return setTimeout(resolve, retryAfterDelay);\n            });\n\n            return true;\n        }\n\n        // if the status code is not retriable or max retries have been reached, do not retry\n        return false;\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    AuthError,\n    ClientAuthErrorCodes,\n    createClientAuthError,\n    HttpStatus,\n    INetworkModule,\n    NetworkResponse,\n    NetworkRequestOptions,\n    Logger,\n    ServerAuthorizationTokenResponse,\n    EncodingTypes,\n} from \"@azure/msal-common/node\";\nimport { ManagedIdentityRequestParameters } from \"../../config/ManagedIdentityRequestParameters.js\";\nimport { BaseManagedIdentitySource } from \"./BaseManagedIdentitySource.js\";\nimport { CryptoProvider } from \"../../crypto/CryptoProvider.js\";\nimport {\n    ManagedIdentityErrorCodes,\n    createManagedIdentityError,\n} from \"../../error/ManagedIdentityError.js\";\nimport {\n    AZURE_ARC_SECRET_FILE_MAX_SIZE_BYTES,\n    HttpMethod,\n    ManagedIdentityEnvironmentVariableNames,\n    ManagedIdentityHeaders,\n    ManagedIdentityIdType,\n    ManagedIdentityQueryParameters,\n    ManagedIdentitySourceNames,\n} from \"../../utils/Constants.js\";\nimport { NodeStorage } from \"../../cache/NodeStorage.js\";\nimport {\n    accessSync,\n    constants as fsConstants,\n    readFileSync,\n    statSync,\n} from \"fs\";\nimport { ManagedIdentityTokenResponse } from \"../../response/ManagedIdentityTokenResponse.js\";\nimport { ManagedIdentityId } from \"../../config/ManagedIdentityId.js\";\nimport path from \"path\";\n\nexport const ARC_API_VERSION: string = \"2019-11-01\";\nexport const DEFAULT_AZURE_ARC_IDENTITY_ENDPOINT: string =\n    \"http://127.0.0.1:40342/metadata/identity/oauth2/token\";\nconst HIMDS_EXECUTABLE_HELPER_STRING = \"N/A: himds executable exists\";\n\ntype FilePathMap = {\n    win32: string;\n    linux: string;\n};\n\nexport const SUPPORTED_AZURE_ARC_PLATFORMS: FilePathMap = {\n    win32: `${process.env[\"ProgramData\"]}\\\\AzureConnectedMachineAgent\\\\Tokens\\\\`,\n    linux: \"/var/opt/azcmagent/tokens/\",\n};\n\nexport const AZURE_ARC_FILE_DETECTION: FilePathMap = {\n    win32: `${process.env[\"ProgramFiles\"]}\\\\AzureConnectedMachineAgent\\\\himds.exe`,\n    linux: \"/opt/azcmagent/bin/himds\",\n};\n\n/**\n * Azure Arc managed identity source implementation for acquiring tokens from Azure Arc-enabled servers.\n *\n * This class provides managed identity authentication for applications running on Azure Arc-enabled servers\n * by communicating with the local Hybrid Instance Metadata Service (HIMDS). It supports both environment\n * variable-based configuration and automatic detection through the HIMDS executable.\n *\n * Original source of code: https://github.com/Azure/azure-sdk-for-net/blob/main/sdk/identity/Azure.Identity/src/AzureArcManagedIdentitySource.cs\n */\nexport class AzureArc extends BaseManagedIdentitySource {\n    private identityEndpoint: string;\n\n    /**\n     * Creates a new instance of the AzureArc managed identity source.\n     *\n     * @param logger - Logger instance for capturing telemetry and diagnostic information\n     * @param nodeStorage - Storage implementation for caching tokens and metadata\n     * @param networkClient - Network client for making HTTP requests to the identity endpoint\n     * @param cryptoProvider - Cryptographic operations provider for token validation and encryption\n     * @param disableInternalRetries - Flag to disable automatic retry logic for failed requests\n     * @param identityEndpoint - The Azure Arc identity endpoint URL for token requests\n     */\n    constructor(\n        logger: Logger,\n        nodeStorage: NodeStorage,\n        networkClient: INetworkModule,\n        cryptoProvider: CryptoProvider,\n        disableInternalRetries: boolean,\n        identityEndpoint: string\n    ) {\n        super(\n            logger,\n            nodeStorage,\n            networkClient,\n            cryptoProvider,\n            disableInternalRetries\n        );\n\n        this.identityEndpoint = identityEndpoint;\n    }\n\n    /**\n     * Retrieves and validates Azure Arc environment variables for managed identity configuration.\n     *\n     * This method checks for IDENTITY_ENDPOINT and IMDS_ENDPOINT environment variables.\n     * If either is missing, it attempts to detect the Azure Arc environment by checking for\n     * the HIMDS executable at platform-specific paths. On successful detection, it returns\n     * the default identity endpoint and a helper string indicating file-based detection.\n     *\n     * @returns An array containing [identityEndpoint, imdsEndpoint] where both values are\n     *          strings if Azure Arc is available, or undefined if not available.\n     */\n    public static getEnvironmentVariables(): Array<string | undefined> {\n        let identityEndpoint: string | undefined =\n            process.env[\n                ManagedIdentityEnvironmentVariableNames.IDENTITY_ENDPOINT\n            ];\n        let imdsEndpoint: string | undefined =\n            process.env[ManagedIdentityEnvironmentVariableNames.IMDS_ENDPOINT];\n\n        // if either of the identity or imds endpoints are undefined, check if the himds executable exists\n        if (!identityEndpoint || !imdsEndpoint) {\n            // get the expected Windows or Linux file path of the himds executable\n            const fileDetectionPath: string =\n                AZURE_ARC_FILE_DETECTION[process.platform as keyof FilePathMap];\n            try {\n                /*\n                 * check if the himds executable exists and its permissions allow it to be read\n                 * returns undefined if true, throws an error otherwise\n                 */\n                accessSync(\n                    fileDetectionPath,\n                    fsConstants.F_OK | fsConstants.R_OK\n                );\n\n                identityEndpoint = DEFAULT_AZURE_ARC_IDENTITY_ENDPOINT;\n                imdsEndpoint = HIMDS_EXECUTABLE_HELPER_STRING;\n            } catch (err) {\n                /*\n                 * do nothing\n                 * accessSync returns undefined on success, and throws an error on failure\n                 */\n            }\n        }\n\n        return [identityEndpoint, imdsEndpoint];\n    }\n\n    /**\n     * Attempts to create an AzureArc managed identity source instance.\n     *\n     * Validates the Azure Arc environment by checking environment variables\n     * and performing file-based detection. It ensures that only system-assigned managed identities\n     * are supported for Azure Arc scenarios. The method performs comprehensive validation of\n     * endpoint URLs and logs detailed information about the detection process.\n     *\n     * @param logger - Logger instance for capturing creation and validation steps\n     * @param nodeStorage - Storage implementation for the managed identity source\n     * @param networkClient - Network client for HTTP communication\n     * @param cryptoProvider - Cryptographic operations provider\n     * @param disableInternalRetries - Whether to disable automatic retry mechanisms\n     * @param managedIdentityId - The managed identity configuration, must be system-assigned\n     *\n     * @returns AzureArc instance if the environment supports Azure Arc managed identity, null otherwise\n     *\n     * @throws {ManagedIdentityError} When a user-assigned managed identity is specified (not supported for Azure Arc)\n     */\n    public static tryCreate(\n        logger: Logger,\n        nodeStorage: NodeStorage,\n        networkClient: INetworkModule,\n        cryptoProvider: CryptoProvider,\n        disableInternalRetries: boolean,\n        managedIdentityId: ManagedIdentityId\n    ): AzureArc | null {\n        const [identityEndpoint, imdsEndpoint] =\n            AzureArc.getEnvironmentVariables();\n\n        // if either of the identity or imds endpoints are undefined (even after himds file detection)\n        if (!identityEndpoint || !imdsEndpoint) {\n            logger.info(\n                `[Managed Identity] ${ManagedIdentitySourceNames.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${ManagedIdentityEnvironmentVariableNames.IDENTITY_ENDPOINT}' and '${ManagedIdentityEnvironmentVariableNames.IMDS_ENDPOINT}' are not defined. ${ManagedIdentitySourceNames.AZURE_ARC} managed identity is also unavailable through file detection.`\n            );\n\n            return null;\n        }\n\n        // check if the imds endpoint is set to the default for file detection\n        if (imdsEndpoint === HIMDS_EXECUTABLE_HELPER_STRING) {\n            logger.info(\n                `[Managed Identity] ${ManagedIdentitySourceNames.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${ManagedIdentitySourceNames.AZURE_ARC} endpoint: ${DEFAULT_AZURE_ARC_IDENTITY_ENDPOINT}. Creating ${ManagedIdentitySourceNames.AZURE_ARC} managed identity.`\n            );\n        } else {\n            // otherwise, both the identity and imds endpoints are defined without file detection; validate them\n\n            const validatedIdentityEndpoint: string =\n                AzureArc.getValidatedEnvVariableUrlString(\n                    ManagedIdentityEnvironmentVariableNames.IDENTITY_ENDPOINT,\n                    identityEndpoint,\n                    ManagedIdentitySourceNames.AZURE_ARC,\n                    logger\n                );\n            // remove trailing slash\n            validatedIdentityEndpoint.endsWith(\"/\")\n                ? validatedIdentityEndpoint.slice(0, -1)\n                : validatedIdentityEndpoint;\n\n            AzureArc.getValidatedEnvVariableUrlString(\n                ManagedIdentityEnvironmentVariableNames.IMDS_ENDPOINT,\n                imdsEndpoint,\n                ManagedIdentitySourceNames.AZURE_ARC,\n                logger\n            );\n\n            logger.info(\n                `[Managed Identity] Environment variables validation passed for ${ManagedIdentitySourceNames.AZURE_ARC} managed identity. Endpoint URI: ${validatedIdentityEndpoint}. Creating ${ManagedIdentitySourceNames.AZURE_ARC} managed identity.`\n            );\n        }\n\n        if (\n            managedIdentityId.idType !== ManagedIdentityIdType.SYSTEM_ASSIGNED\n        ) {\n            throw createManagedIdentityError(\n                ManagedIdentityErrorCodes.unableToCreateAzureArc\n            );\n        }\n\n        return new AzureArc(\n            logger,\n            nodeStorage,\n            networkClient,\n            cryptoProvider,\n            disableInternalRetries,\n            identityEndpoint\n        );\n    }\n\n    /**\n     * Creates a properly formatted HTTP request for acquiring tokens from the Azure Arc identity endpoint.\n     *\n     * This method constructs a GET request to the Azure Arc HIMDS endpoint with the required metadata header\n     * and query parameters. The endpoint URL is normalized to use 127.0.0.1 instead of localhost for\n     * consistency. Additional body parameters are calculated by the base class during token acquisition.\n     *\n     * @param resource - The target resource/scope for which to request an access token (e.g., \"https://graph.microsoft.com/.default\")\n     *\n     * @returns A configured ManagedIdentityRequestParameters object ready for network execution\n     */\n    public createRequest(resource: string): ManagedIdentityRequestParameters {\n        const request: ManagedIdentityRequestParameters =\n            new ManagedIdentityRequestParameters(\n                HttpMethod.GET,\n                this.identityEndpoint.replace(\"localhost\", \"127.0.0.1\")\n            );\n\n        request.headers[ManagedIdentityHeaders.METADATA_HEADER_NAME] = \"true\";\n\n        request.queryParameters[ManagedIdentityQueryParameters.API_VERSION] =\n            ARC_API_VERSION;\n        request.queryParameters[ManagedIdentityQueryParameters.RESOURCE] =\n            resource;\n\n        // bodyParameters calculated in BaseManagedIdentity.acquireTokenWithManagedIdentity\n\n        return request;\n    }\n\n    /**\n     * Processes the server response and handles Azure Arc-specific authentication challenges.\n     *\n     * This method implements the Azure Arc authentication flow which may require reading a secret file\n     * for authorization. When the initial request returns HTTP 401 Unauthorized, it extracts the file\n     * path from the WWW-Authenticate header, validates the file location and size, reads the secret,\n     * and retries the request with Basic authentication. The method includes comprehensive security\n     * validations to prevent path traversal and ensure file integrity.\n     *\n     * @param originalResponse - The initial HTTP response from the identity endpoint\n     * @param networkClient - Network client for making the retry request if needed\n     * @param networkRequest - The original request parameters (modified with auth header for retry)\n     * @param networkRequestOptions - Additional options for network requests\n     *\n     * @returns A promise that resolves to the server token response with access token and metadata\n     *\n     * @throws {ManagedIdentityError} When:\n     *   - WWW-Authenticate header is missing or has unsupported format\n     *   - Platform is not supported (not Windows or Linux)\n     *   - Secret file has invalid extension (not .key)\n     *   - Secret file path doesn't match expected platform path\n     *   - Secret file cannot be read or is too large (>4096 bytes)\n     * @throws {ClientAuthError} When network errors occur during retry request\n     */\n    public async getServerTokenResponseAsync(\n        originalResponse: NetworkResponse<ManagedIdentityTokenResponse>,\n        networkClient: INetworkModule,\n        networkRequest: ManagedIdentityRequestParameters,\n        networkRequestOptions: NetworkRequestOptions\n    ): Promise<ServerAuthorizationTokenResponse> {\n        let retryResponse:\n            | NetworkResponse<ManagedIdentityTokenResponse>\n            | undefined;\n\n        if (originalResponse.status === HttpStatus.UNAUTHORIZED) {\n            const wwwAuthHeader: string =\n                originalResponse.headers[\"www-authenticate\"];\n            if (!wwwAuthHeader) {\n                throw createManagedIdentityError(\n                    ManagedIdentityErrorCodes.wwwAuthenticateHeaderMissing\n                );\n            }\n            if (!wwwAuthHeader.includes(\"Basic realm=\")) {\n                throw createManagedIdentityError(\n                    ManagedIdentityErrorCodes.wwwAuthenticateHeaderUnsupportedFormat\n                );\n            }\n\n            const secretFilePath = wwwAuthHeader.split(\"Basic realm=\")[1];\n\n            // throw an error if the managed identity application is not being run on Windows or Linux\n            if (\n                !SUPPORTED_AZURE_ARC_PLATFORMS.hasOwnProperty(process.platform)\n            ) {\n                throw createManagedIdentityError(\n                    ManagedIdentityErrorCodes.platformNotSupported\n                );\n            }\n\n            // get the expected Windows or Linux file path\n            const expectedSecretFilePath: string =\n                SUPPORTED_AZURE_ARC_PLATFORMS[\n                    process.platform as keyof FilePathMap\n                ];\n\n            // throw an error if the file in the file path is not a .key file\n            const fileName: string = path.basename(secretFilePath);\n            if (!fileName.endsWith(\".key\")) {\n                throw createManagedIdentityError(\n                    ManagedIdentityErrorCodes.invalidFileExtension\n                );\n            }\n\n            /*\n             * throw an error if the file path from the www-authenticate header does not match the\n             * expected file path for the platform (Windows or Linux) the managed identity application\n             * is running on\n             */\n            if (expectedSecretFilePath + fileName !== secretFilePath) {\n                throw createManagedIdentityError(\n                    ManagedIdentityErrorCodes.invalidFilePath\n                );\n            }\n\n            let secretFileSize;\n            // attempt to get the secret file's size, in bytes\n            try {\n                secretFileSize = await statSync(secretFilePath).size;\n            } catch (e) {\n                throw createManagedIdentityError(\n                    ManagedIdentityErrorCodes.unableToReadSecretFile\n                );\n            }\n            // throw an error if the secret file's size is greater than 4096 bytes\n            if (secretFileSize > AZURE_ARC_SECRET_FILE_MAX_SIZE_BYTES) {\n                throw createManagedIdentityError(\n                    ManagedIdentityErrorCodes.invalidSecret\n                );\n            }\n\n            // attempt to read the contents of the secret file\n            let secret;\n            try {\n                secret = readFileSync(secretFilePath, EncodingTypes.UTF8);\n            } catch (e) {\n                throw createManagedIdentityError(\n                    ManagedIdentityErrorCodes.unableToReadSecretFile\n                );\n            }\n            const authHeaderValue = `Basic ${secret}`;\n\n            this.logger.info(\n                `[Managed Identity] Adding authorization header to the request.`\n            );\n            networkRequest.headers[\n                ManagedIdentityHeaders.AUTHORIZATION_HEADER_NAME\n            ] = authHeaderValue;\n\n            try {\n                retryResponse =\n                    await networkClient.sendGetRequestAsync<ManagedIdentityTokenResponse>(\n                        networkRequest.computeUri(),\n                        networkRequestOptions\n                    );\n            } catch (error) {\n                if (error instanceof AuthError) {\n                    throw error;\n                } else {\n                    throw createClientAuthError(\n                        ClientAuthErrorCodes.networkError\n                    );\n                }\n            }\n        }\n\n        return this.getServerTokenResponse(retryResponse || originalResponse);\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { HttpStatus, Logger } from \"@azure/msal-common\";\nimport { ExponentialRetryStrategy } from \"./ExponentialRetryStrategy.js\";\nimport { IHttpRetryPolicy } from \"./IHttpRetryPolicy.js\";\n\nconst HTTP_STATUS_400_CODES_FOR_EXPONENTIAL_STRATEGY: Array<number> = [\n    HttpStatus.NOT_FOUND,\n    HttpStatus.REQUEST_TIMEOUT,\n    HttpStatus.GONE,\n    HttpStatus.TOO_MANY_REQUESTS,\n];\n\nconst EXPONENTIAL_STRATEGY_NUM_RETRIES = 3;\nconst LINEAR_STRATEGY_NUM_RETRIES = 7;\n\nconst MIN_EXPONENTIAL_BACKOFF_MS: number = 1000;\nconst MAX_EXPONENTIAL_BACKOFF_MS: number = 4000;\nconst EXPONENTIAL_DELTA_BACKOFF_MS: number = 2000;\n\nconst HTTP_STATUS_GONE_RETRY_AFTER_MS: number = 10 * 1000; // 10 seconds\n\nexport class ImdsRetryPolicy implements IHttpRetryPolicy {\n    /*\n     * these are defined here as static variables despite being defined as constants outside of the\n     * class because they need to be overridden in the unit tests so that the unit tests run faster\n     */\n    static get MIN_EXPONENTIAL_BACKOFF_MS(): number {\n        return MIN_EXPONENTIAL_BACKOFF_MS;\n    }\n    static get MAX_EXPONENTIAL_BACKOFF_MS(): number {\n        return MAX_EXPONENTIAL_BACKOFF_MS;\n    }\n    static get EXPONENTIAL_DELTA_BACKOFF_MS(): number {\n        return EXPONENTIAL_DELTA_BACKOFF_MS;\n    }\n    static get HTTP_STATUS_GONE_RETRY_AFTER_MS(): number {\n        return HTTP_STATUS_GONE_RETRY_AFTER_MS;\n    }\n\n    public _isNewRequest: boolean;\n    set isNewRequest(value: boolean) {\n        this._isNewRequest = value;\n    }\n\n    private maxRetries: number;\n\n    private exponentialRetryStrategy: ExponentialRetryStrategy =\n        new ExponentialRetryStrategy(\n            ImdsRetryPolicy.MIN_EXPONENTIAL_BACKOFF_MS,\n            ImdsRetryPolicy.MAX_EXPONENTIAL_BACKOFF_MS,\n            ImdsRetryPolicy.EXPONENTIAL_DELTA_BACKOFF_MS\n        );\n\n    /**\n     * Pauses execution for a calculated delay before retrying a request.\n     *\n     * @param httpStatusCode - The HTTP status code of the response.\n     * @param currentRetry - The current retry attempt number.\n     * @param retryAfterHeader - The value of the \"retry-after\" header from the response.\n     * @returns A promise that resolves to a boolean indicating whether a retry should be attempted.\n     */\n    async pauseForRetry(\n        httpStatusCode: number,\n        currentRetry: number,\n        logger: Logger\n    ): Promise<boolean> {\n        if (this._isNewRequest) {\n            this._isNewRequest = false;\n\n            // calculate the maxRetries based on the status code, once per request\n            this.maxRetries =\n                httpStatusCode === HttpStatus.GONE\n                    ? LINEAR_STRATEGY_NUM_RETRIES\n                    : EXPONENTIAL_STRATEGY_NUM_RETRIES;\n        }\n\n        /**\n         * (status code is one of the retriable 400 status code\n         * or\n         * status code is >= 500 and <= 599)\n         * and\n         * current count of retries is less than the max number of retries\n         */\n        if (\n            (HTTP_STATUS_400_CODES_FOR_EXPONENTIAL_STRATEGY.includes(\n                httpStatusCode\n            ) ||\n                (httpStatusCode >= HttpStatus.SERVER_ERROR_RANGE_START &&\n                    httpStatusCode <= HttpStatus.SERVER_ERROR_RANGE_END &&\n                    currentRetry < this.maxRetries)) &&\n            currentRetry < this.maxRetries\n        ) {\n            const retryAfterDelay: number =\n                httpStatusCode === HttpStatus.GONE\n                    ? ImdsRetryPolicy.HTTP_STATUS_GONE_RETRY_AFTER_MS\n                    : this.exponentialRetryStrategy.calculateDelay(\n                          currentRetry\n                      );\n\n            logger.verbose(\n                `Retrying request in ${retryAfterDelay}ms (retry attempt: ${\n                    currentRetry + 1\n                })`\n            );\n\n            // pause execution for the calculated delay\n            await new Promise((resolve) => {\n                return setTimeout(resolve, retryAfterDelay);\n            });\n\n            return true;\n        }\n\n        // if the status code is not retriable or max retries have been reached, do not retry\n        return false;\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { INetworkModule, Logger } from \"@azure/msal-common/node\";\nimport { ManagedIdentityId } from \"../../config/ManagedIdentityId.js\";\nimport { ManagedIdentityRequestParameters } from \"../../config/ManagedIdentityRequestParameters.js\";\nimport { BaseManagedIdentitySource } from \"./BaseManagedIdentitySource.js\";\nimport { CryptoProvider } from \"../../crypto/CryptoProvider.js\";\nimport {\n    HttpMethod,\n    ManagedIdentityEnvironmentVariableNames,\n    ManagedIdentityHeaders,\n    ManagedIdentityIdType,\n    ManagedIdentityQueryParameters,\n    ManagedIdentitySourceNames,\n} from \"../../utils/Constants.js\";\nimport { NodeStorage } from \"../../cache/NodeStorage.js\";\nimport { ImdsRetryPolicy } from \"../../retry/ImdsRetryPolicy.js\";\n\n// Documentation for IMDS is available at https://docs.microsoft.com/azure/active-directory/managed-identities-azure-resources/how-to-use-vm-token#get-a-token-using-http\n\nconst IMDS_TOKEN_PATH: string = \"/metadata/identity/oauth2/token\";\nconst DEFAULT_IMDS_ENDPOINT: string = `http://169.254.169.254${IMDS_TOKEN_PATH}`;\nconst IMDS_API_VERSION: string = \"2018-02-01\";\n\n/**\n * Managed Identity source implementation for Azure Instance Metadata Service (IMDS).\n *\n * IMDS is available on Azure Virtual Machines and Virtual Machine Scale Sets and provides\n * a REST endpoint to obtain OAuth tokens for managed identities. This implementation\n * handles both system-assigned and user-assigned managed identities.\n *\n * Original source of code: https://github.com/Azure/azure-sdk-for-net/blob/main/sdk/identity/Azure.Identity/src/ImdsManagedIdentitySource.cs\n */\nexport class Imds extends BaseManagedIdentitySource {\n    private identityEndpoint: string;\n\n    /**\n     * Constructs an Imds instance with the specified configuration.\n     *\n     * @param logger - Logger instance for recording debug information and errors\n     * @param nodeStorage - NodeStorage instance used for token caching operations\n     * @param networkClient - Network client implementation for making HTTP requests to IMDS\n     * @param cryptoProvider - CryptoProvider for generating correlation IDs and other cryptographic operations\n     * @param disableInternalRetries - When true, disables the built-in retry logic for IMDS requests\n     * @param identityEndpoint - The complete IMDS endpoint URL including the token path\n     */\n    constructor(\n        logger: Logger,\n        nodeStorage: NodeStorage,\n        networkClient: INetworkModule,\n        cryptoProvider: CryptoProvider,\n        disableInternalRetries: boolean,\n        identityEndpoint: string\n    ) {\n        super(\n            logger,\n            nodeStorage,\n            networkClient,\n            cryptoProvider,\n            disableInternalRetries\n        );\n\n        this.identityEndpoint = identityEndpoint;\n    }\n\n    /**\n     * Creates an Imds instance with the appropriate endpoint configuration.\n     *\n     * This method checks for the presence of the AZURE_POD_IDENTITY_AUTHORITY_HOST environment\n     * variable, which is used in Azure Kubernetes Service (AKS) environments with Azure AD\n     * Pod Identity. If found, it uses that endpoint; otherwise, it falls back to the standard\n     * IMDS endpoint (169.254.169.254).\n     *\n     * @param logger - Logger instance for recording endpoint discovery and validation\n     * @param nodeStorage - NodeStorage instance for token caching\n     * @param networkClient - Network client for HTTP requests\n     * @param cryptoProvider - CryptoProvider for cryptographic operations\n     * @param disableInternalRetries - Whether to disable built-in retry logic\n     *\n     * @returns A configured Imds instance ready to make token requests\n     */\n    public static tryCreate(\n        logger: Logger,\n        nodeStorage: NodeStorage,\n        networkClient: INetworkModule,\n        cryptoProvider: CryptoProvider,\n        disableInternalRetries: boolean\n    ): Imds {\n        let validatedIdentityEndpoint: string;\n\n        if (\n            process.env[\n                ManagedIdentityEnvironmentVariableNames\n                    .AZURE_POD_IDENTITY_AUTHORITY_HOST\n            ]\n        ) {\n            logger.info(\n                `[Managed Identity] Environment variable ${\n                    ManagedIdentityEnvironmentVariableNames.AZURE_POD_IDENTITY_AUTHORITY_HOST\n                } for ${ManagedIdentitySourceNames.IMDS} returned endpoint: ${\n                    process.env[\n                        ManagedIdentityEnvironmentVariableNames\n                            .AZURE_POD_IDENTITY_AUTHORITY_HOST\n                    ]\n                }`\n            );\n            validatedIdentityEndpoint = Imds.getValidatedEnvVariableUrlString(\n                ManagedIdentityEnvironmentVariableNames.AZURE_POD_IDENTITY_AUTHORITY_HOST,\n                `${\n                    process.env[\n                        ManagedIdentityEnvironmentVariableNames\n                            .AZURE_POD_IDENTITY_AUTHORITY_HOST\n                    ]\n                }${IMDS_TOKEN_PATH}`,\n                ManagedIdentitySourceNames.IMDS,\n                logger\n            );\n        } else {\n            logger.info(\n                `[Managed Identity] Unable to find ${ManagedIdentityEnvironmentVariableNames.AZURE_POD_IDENTITY_AUTHORITY_HOST} environment variable for ${ManagedIdentitySourceNames.IMDS}, using the default endpoint.`\n            );\n            validatedIdentityEndpoint = DEFAULT_IMDS_ENDPOINT;\n        }\n\n        return new Imds(\n            logger,\n            nodeStorage,\n            networkClient,\n            cryptoProvider,\n            disableInternalRetries,\n            validatedIdentityEndpoint\n        );\n    }\n\n    /**\n     * Creates a properly configured HTTP request for acquiring an access token from IMDS.\n     *\n     * This method builds a complete request object with all necessary headers, query parameters,\n     * and retry policies required by the Azure Instance Metadata Service.\n     *\n     * Key request components:\n     * - HTTP GET method to the IMDS token endpoint\n     * - Metadata header set to \"true\" (required by IMDS)\n     * - API version parameter (currently \"2018-02-01\")\n     * - Resource parameter specifying the target audience\n     * - Identity-specific parameters for user-assigned managed identities\n     * - IMDS-specific retry policy\n     *\n     * @param resource - The target resource/scope for which to request an access token (e.g., \"https://graph.microsoft.com/.default\")\n     * @param managedIdentityId - The managed identity configuration specifying whether to use system-assigned or user-assigned identity\n     *\n     * @returns A configured ManagedIdentityRequestParameters object ready for network execution\n     */\n    public createRequest(\n        resource: string,\n        managedIdentityId: ManagedIdentityId\n    ): ManagedIdentityRequestParameters {\n        const request: ManagedIdentityRequestParameters =\n            new ManagedIdentityRequestParameters(\n                HttpMethod.GET,\n                this.identityEndpoint\n            );\n\n        request.headers[ManagedIdentityHeaders.METADATA_HEADER_NAME] = \"true\";\n\n        request.queryParameters[ManagedIdentityQueryParameters.API_VERSION] =\n            IMDS_API_VERSION;\n        request.queryParameters[ManagedIdentityQueryParameters.RESOURCE] =\n            resource;\n\n        if (\n            managedIdentityId.idType !== ManagedIdentityIdType.SYSTEM_ASSIGNED\n        ) {\n            request.queryParameters[\n                this.getManagedIdentityUserAssignedIdQueryParameterKey(\n                    managedIdentityId.idType,\n                    true // indicates source is IMDS\n                )\n            ] = managedIdentityId.id;\n        }\n\n        // The bodyParameters are calculated in BaseManagedIdentity.acquireTokenWithManagedIdentity.\n\n        request.retryPolicy = new ImdsRetryPolicy();\n\n        return request;\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport { INetworkModule, Logger } from \"@azure/msal-common/node\";\nimport {\n    BaseManagedIdentitySource,\n    ManagedIdentityUserAssignedIdQueryParameterNames,\n} from \"./BaseManagedIdentitySource.js\";\nimport {\n    HttpMethod,\n    ManagedIdentityEnvironmentVariableNames,\n    ManagedIdentitySourceNames,\n    ManagedIdentityIdType,\n    ManagedIdentityQueryParameters,\n    ManagedIdentityHeaders,\n} from \"../../utils/Constants.js\";\nimport { CryptoProvider } from \"../../crypto/CryptoProvider.js\";\nimport { ManagedIdentityRequestParameters } from \"../../config/ManagedIdentityRequestParameters.js\";\nimport { ManagedIdentityId } from \"../../config/ManagedIdentityId.js\";\nimport { NodeStorage } from \"../../cache/NodeStorage.js\";\n\nconst MACHINE_LEARNING_MSI_API_VERSION: string = \"2017-09-01\";\n\nexport const MANAGED_IDENTITY_MACHINE_LEARNING_UNSUPPORTED_ID_TYPE_ERROR = `Only client id is supported for user-assigned managed identity in ${ManagedIdentitySourceNames.MACHINE_LEARNING}.`; // referenced in unit test\n\n/**\n * Machine Learning Managed Identity Source implementation for Azure Machine Learning environments.\n *\n * This class handles managed identity authentication specifically for Azure Machine Learning services.\n * It supports both system-assigned and user-assigned managed identities, using the MSI_ENDPOINT\n * and MSI_SECRET environment variables that are automatically provided in Azure ML environments.\n */\nexport class MachineLearning extends BaseManagedIdentitySource {\n    private msiEndpoint: string;\n    private secret: string;\n\n    /**\n     * Creates a new MachineLearning managed identity source instance.\n     *\n     * @param logger - Logger instance for diagnostic information\n     * @param nodeStorage - Node storage implementation for caching\n     * @param networkClient - Network client for making HTTP requests\n     * @param cryptoProvider - Cryptographic operations provider\n     * @param disableInternalRetries - Whether to disable automatic request retries\n     * @param msiEndpoint - The MSI endpoint URL from environment variables\n     * @param secret - The MSI secret from environment variables\n     */\n    constructor(\n        logger: Logger,\n        nodeStorage: NodeStorage,\n        networkClient: INetworkModule,\n        cryptoProvider: CryptoProvider,\n        disableInternalRetries: boolean,\n        msiEndpoint: string,\n        secret: string\n    ) {\n        super(\n            logger,\n            nodeStorage,\n            networkClient,\n            cryptoProvider,\n            disableInternalRetries\n        );\n\n        this.msiEndpoint = msiEndpoint;\n        this.secret = secret;\n    }\n\n    /**\n     * Retrieves the required environment variables for Azure Machine Learning managed identity.\n     *\n     * This method checks for the presence of MSI_ENDPOINT and MSI_SECRET environment variables\n     * that are automatically set by the Azure Machine Learning platform when managed identity\n     * is enabled for the compute instance or cluster.\n     *\n     * @returns An array containing [msiEndpoint, secret] where either value may be undefined\n     *          if the corresponding environment variable is not set\n     */\n    public static getEnvironmentVariables(): Array<string | undefined> {\n        const msiEndpoint: string | undefined =\n            process.env[ManagedIdentityEnvironmentVariableNames.MSI_ENDPOINT];\n\n        const secret: string | undefined =\n            process.env[ManagedIdentityEnvironmentVariableNames.MSI_SECRET];\n\n        return [msiEndpoint, secret];\n    }\n\n    /**\n     * Attempts to create a MachineLearning managed identity source.\n     *\n     * This method validates the Azure Machine Learning environment by checking for the required\n     * MSI_ENDPOINT and MSI_SECRET environment variables. If both are present and valid,\n     * it creates and returns a MachineLearning instance. If either is missing or invalid,\n     * it returns null, indicating that this managed identity source is not available\n     * in the current environment.\n     *\n     * @param logger - Logger instance for diagnostic information\n     * @param nodeStorage - Node storage implementation for caching\n     * @param networkClient - Network client for making HTTP requests\n     * @param cryptoProvider - Cryptographic operations provider\n     * @param disableInternalRetries - Whether to disable automatic request retries\n     *\n     * @returns A new MachineLearning instance if the environment is valid, null otherwise\n     */\n    public static tryCreate(\n        logger: Logger,\n        nodeStorage: NodeStorage,\n        networkClient: INetworkModule,\n        cryptoProvider: CryptoProvider,\n        disableInternalRetries: boolean\n    ): MachineLearning | null {\n        const [msiEndpoint, secret] = MachineLearning.getEnvironmentVariables();\n\n        // if either of the MSI endpoint or MSI secret variables are undefined, this MSI provider is unavailable.\n        if (!msiEndpoint || !secret) {\n            logger.info(\n                `[Managed Identity] ${ManagedIdentitySourceNames.MACHINE_LEARNING} managed identity is unavailable because one or both of the '${ManagedIdentityEnvironmentVariableNames.MSI_ENDPOINT}' and '${ManagedIdentityEnvironmentVariableNames.MSI_SECRET}' environment variables are not defined.`\n            );\n            return null;\n        }\n\n        const validatedMsiEndpoint: string =\n            MachineLearning.getValidatedEnvVariableUrlString(\n                ManagedIdentityEnvironmentVariableNames.MSI_ENDPOINT,\n                msiEndpoint,\n                ManagedIdentitySourceNames.MACHINE_LEARNING,\n                logger\n            );\n\n        logger.info(\n            `[Managed Identity] Environment variables validation passed for ${ManagedIdentitySourceNames.MACHINE_LEARNING} managed identity. Endpoint URI: ${validatedMsiEndpoint}. Creating ${ManagedIdentitySourceNames.MACHINE_LEARNING} managed identity.`\n        );\n\n        return new MachineLearning(\n            logger,\n            nodeStorage,\n            networkClient,\n            cryptoProvider,\n            disableInternalRetries,\n            msiEndpoint,\n            secret\n        );\n    }\n\n    /**\n     * Creates a managed identity token request for Azure Machine Learning environments.\n     *\n     * This method constructs the HTTP request parameters needed to acquire an access token\n     * from the Azure Machine Learning managed identity endpoint. It handles both system-assigned\n     * and user-assigned managed identities with specific logic for each type:\n     *\n     * - System-assigned: Uses the DEFAULT_IDENTITY_CLIENT_ID environment variable\n     * - User-assigned: Only supports client ID-based identification (not object ID or resource ID)\n     *\n     * The request uses the 2017-09-01 API version and includes the required secret header\n     * for authentication with the MSI endpoint.\n     *\n     * @param resource - The target resource/scope for which to request an access token (e.g., \"https://graph.microsoft.com/.default\")\n     * @param managedIdentityId - The managed identity configuration specifying whether to use system-assigned or user-assigned identity\n     *\n     * @returns A configured ManagedIdentityRequestParameters object ready for network execution\n     *\n     * @throws Error if an unsupported managed identity ID type is specified (only client ID is supported for user-assigned)\n     */\n    public createRequest(\n        resource: string,\n        managedIdentityId: ManagedIdentityId\n    ): ManagedIdentityRequestParameters {\n        const request: ManagedIdentityRequestParameters =\n            new ManagedIdentityRequestParameters(\n                HttpMethod.GET,\n                this.msiEndpoint\n            );\n\n        request.headers[ManagedIdentityHeaders.METADATA_HEADER_NAME] = \"true\";\n        request.headers[ManagedIdentityHeaders.ML_AND_SF_SECRET_HEADER_NAME] =\n            this.secret;\n\n        request.queryParameters[ManagedIdentityQueryParameters.API_VERSION] =\n            MACHINE_LEARNING_MSI_API_VERSION;\n        request.queryParameters[ManagedIdentityQueryParameters.RESOURCE] =\n            resource;\n\n        if (\n            managedIdentityId.idType === ManagedIdentityIdType.SYSTEM_ASSIGNED\n        ) {\n            request.queryParameters[\n                ManagedIdentityUserAssignedIdQueryParameterNames.MANAGED_IDENTITY_CLIENT_ID_2017\n            ] = process.env[\n                ManagedIdentityEnvironmentVariableNames\n                    .DEFAULT_IDENTITY_CLIENT_ID\n            ] as string; // this environment variable is always set in an Azure Machine Learning source\n        } else if (\n            managedIdentityId.idType ===\n            ManagedIdentityIdType.USER_ASSIGNED_CLIENT_ID\n        ) {\n            request.queryParameters[\n                this.getManagedIdentityUserAssignedIdQueryParameterKey(\n                    managedIdentityId.idType,\n                    false, // isIMDS\n                    true // uses2017API\n                )\n            ] = managedIdentityId.id;\n        } else {\n            throw new Error(\n                MANAGED_IDENTITY_MACHINE_LEARNING_UNSUPPORTED_ID_TYPE_ERROR\n            );\n        }\n\n        // bodyParameters calculated in BaseManagedIdentity.acquireTokenWithManagedIdentity\n\n        return request;\n    }\n}\n", "/*\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n\nimport {\n    AuthOptions,\n    Authority,\n    AuthorityOptions,\n    CacheOutcome,\n    ClientConfiguration,\n    Constants,\n    DEFAULT_CRYPTO_IMPLEMENTATION,\n    INetworkModule,\n    Logger,\n    ProtocolMode,\n    StaticAuthorityOptions,\n    AuthenticationResult,\n    createClientConfigurationError,\n    ClientConfigurationErrorCodes,\n    EncodingTypes,\n} from \"@azure/msal-common/node\";\nimport {\n    ManagedIdentityConfiguration,\n    ManagedIdentityNodeConfiguration,\n    buildManagedIdentityConfiguration,\n} from \"../config/Configuration.js\";\nimport { version, name } from \"../packageMetadata.js\";\nimport { ManagedIdentityRequest } from \"../request/ManagedIdentityRequest.js\";\nimport { CryptoProvider } from \"../crypto/CryptoProvider.js\";\nimport { ClientCredentialClient } from \"./ClientCredentialClient.js\";\nimport { ManagedIdentityClient } from \"./ManagedIdentityClient.js\";\nimport { ManagedIdentityRequestParams } from \"../request/ManagedIdentityRequestParams.js\";\nimport { NodeStorage } from \"../cache/NodeStorage.js\";\nimport {\n    DEFAULT_AUTHORITY_FOR_MANAGED_IDENTITY,\n    ManagedIdentitySourceNames,\n} from \"../utils/Constants.js\";\nimport { ManagedIdentityId } from \"../config/ManagedIdentityId.js\";\nimport { HashUtils } from \"../crypto/HashUtils.js\";\n\nconst SOURCES_THAT_SUPPORT_TOKEN_REVOCATION: Array<ManagedIdentitySourceNames> =\n    [ManagedIdentitySourceNames.SERVICE_FABRIC];\n\n/**\n * Class to initialize a managed identity and identify the service\n * @public\n */\nexport class ManagedIdentityApplication {\n    private config: ManagedIdentityNodeConfiguration;\n\n    private logger: Logger;\n    private static nodeStorage?: NodeStorage;\n    private networkClient: INetworkModule;\n    private cryptoProvider: CryptoProvider;\n\n    // authority needs to be faked to re-use existing functionality in msal-common: caching in responseHandler, etc.\n    private fakeAuthority: Authority;\n\n    // the ClientCredentialClient class needs to be faked to call it's getCachedAuthenticationResult method\n    private fakeClientCredentialClient: ClientCredentialClient;\n\n    private managedIdentityClient: ManagedIdentityClient;\n\n    private hashUtils: HashUtils;\n\n    constructor(configuration?: ManagedIdentityConfiguration) {\n        // undefined config means the managed identity is system-assigned\n        this.config = buildManagedIdentityConfiguration(configuration || {});\n\n        this.logger = new Logger(\n            this.config.system.loggerOptions,\n            name,\n            version\n        );\n\n        const fakeStatusAuthorityOptions: StaticAuthorityOptions = {\n            canonicalAuthority: Constants.DEFAULT_AUTHORITY,\n        };\n\n        if (!ManagedIdentityApplication.nodeStorage) {\n            ManagedIdentityApplication.nodeStorage = new NodeStorage(\n                this.logger,\n                this.config.managedIdentityId.id,\n                DEFAULT_CRYPTO_IMPLEMENTATION,\n                fakeStatusAuthorityOptions\n            );\n        }\n\n        this.networkClient = this.config.system.networkClient;\n\n        this.cryptoProvider = new CryptoProvider();\n\n        const fakeAuthorityOptions: AuthorityOptions = {\n            protocolMode: ProtocolMode.AAD,\n            knownAuthorities: [DEFAULT_AUTHORITY_FOR_MANAGED_IDENTITY],\n            cloudDiscoveryMetadata: \"\",\n            authorityMetadata: \"\",\n        };\n        this.fakeAuthority = new Authority(\n            DEFAULT_AUTHORITY_FOR_MANAGED_IDENTITY,\n            this.networkClient,\n            ManagedIdentityApplication.nodeStorage as NodeStorage,\n            fakeAuthorityOptions,\n            this.logger,\n            this.cryptoProvider.createNewGuid(), // correlationID\n            undefined,\n            true\n        );\n\n        this.fakeClientCredentialClient = new ClientCredentialClient({\n            authOptions: {\n                clientId: this.config.managedIdentityId.id,\n                authority: this.fakeAuthority,\n            } as AuthOptions,\n        } as ClientConfiguration);\n\n        this.managedIdentityClient = new ManagedIdentityClient(\n            this.logger,\n            ManagedIdentityApplication.nodeStorage as NodeStorage,\n            this.networkClient,\n            this.cryptoProvider,\n            this.config.disableInternalRetries\n        );\n\n        this.hashUtils = new HashUtils();\n    }\n\n    /**\n     * Acquire an access token from the cache or the managed identity\n     * @param managedIdentityRequest - the ManagedIdentityRequestParams object passed in by the developer\n     * @returns the access token\n     */\n    public async acquireToken(\n        managedIdentityRequestParams: ManagedIdentityRequestParams\n    ): Promise<AuthenticationResult> {\n        if (!managedIdentityRequestParams.resource) {\n            throw createClientConfigurationError(\n                ClientConfigurationErrorCodes.urlEmptyError\n            );\n        }\n\n        const managedIdentityRequest: ManagedIdentityRequest = {\n            forceRefresh: managedIdentityRequestParams.forceRefresh,\n            resource: managedIdentityRequestParams.resource.replace(\n                \"/.default\",\n                \"\"\n            ),\n            scopes: [\n                managedIdentityRequestParams.resource.replace(\"/.default\", \"\"),\n            ],\n            authority: this.fakeAuthority.canonicalAuthority,\n            correlationId: this.cryptoProvider.createNewGuid(),\n            claims: managedIdentityRequestParams.claims,\n            clientCapabilities: this.config.clientCapabilities,\n        };\n\n        if (managedIdentityRequest.forceRefresh) {\n            return this.acquireTokenFromManagedIdentity(\n                managedIdentityRequest,\n                this.config.managedIdentityId,\n                this.fakeAuthority\n            );\n        }\n\n        const [cachedAuthenticationResult, lastCacheOutcome] =\n            await this.fakeClientCredentialClient.getCachedAuthenticationResult(\n                managedIdentityRequest,\n                this.config,\n                this.cryptoProvider,\n                this.fakeAuthority,\n                ManagedIdentityApplication.nodeStorage as NodeStorage\n            );\n\n        /*\n         * Check if claims are present in the managed identity request.\n         * If so, the cached token will not be used.\n         */\n        if (managedIdentityRequest.claims) {\n            const sourceName: ManagedIdentitySourceNames =\n                this.managedIdentityClient.getManagedIdentitySource();\n\n            /*\n             * Check if there is a cached token and if the Managed Identity source supports token revocation.\n             * If so, hash the cached access token and add it to the request.\n             */\n            if (\n                cachedAuthenticationResult &&\n                SOURCES_THAT_SUPPORT_TOKEN_REVOCATION.includes(sourceName)\n            ) {\n                const revokedTokenSha256Hash: string = this.hashUtils\n                    .sha256(cachedAuthenticationResult.accessToken)\n                    .toString(EncodingTypes.HEX);\n                managedIdentityRequest.revokedTokenSha256Hash =\n                    revokedTokenSha256Hash;\n            }\n\n            return this.acquireTokenFromManagedIdentity(\n                managedIdentityRequest,\n                this.config.managedIdentityId,\n                this.fakeAuthority\n            );\n        }\n\n        if (cachedAuthenticationResult) {\n            // if the token is not expired but must be refreshed; get a new one in the background\n            if (lastCacheOutcome === CacheOutcome.PROACTIVELY_REFRESHED) {\n                this.logger.info(\n                    \"ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.\"\n                );\n\n                // force refresh; will run in the background\n                const refreshAccessToken = true;\n                await this.acquireTokenFromManagedIdentity(\n                    managedIdentityRequest,\n                    this.config.managedIdentityId,\n                    this.fakeAuthority,\n                    refreshAccessToken\n                );\n            }\n\n            return cachedAuthenticationResult;\n        } else {\n            return this.acquireTokenFromManagedIdentity(\n                managedIdentityRequest,\n                this.config.managedIdentityId,\n                this.fakeAuthority\n            );\n        }\n    }\n\n    /**\n     * Acquires a token from a managed identity endpoint.\n     *\n     * @param managedIdentityRequest - The request object containing parameters for the managed identity token request.\n     * @param managedIdentityId - The identifier for the managed identity (e.g., client ID or resource ID).\n     * @param fakeAuthority - A placeholder authority used for the token request.\n     * @param refreshAccessToken - Optional flag indicating whether to force a refresh of the access token.\n     * @returns A promise that resolves to an AuthenticationResult containing the acquired token and related information.\n     */\n    private async acquireTokenFromManagedIdentity(\n        managedIdentityRequest: ManagedIdentityRequest,\n        managedIdentityId: ManagedIdentityId,\n        fakeAuthority: Authority,\n        refreshAccessToken?: boolean\n    ): Promise<AuthenticationResult> {\n        // make a network call to the managed identity\n        return this.managedIdentityClient.sendManagedIdentityTokenRequest(\n            managedIdentityRequest,\n            managedIdentityId,\n            fakeAuthority,\n            refreshAccessToken\n        );\n    }\n\n    /**\n     * Determine the Managed Identity Source based on available environment variables. This API is consumed by Azure Identity SDK.\n     * @returns ManagedIdentitySourceNames - The Managed Identity source's name\n     */\n    public getManagedIdentitySource(): ManagedIdentitySourceNames {\n        return (\n            ManagedIdentityClient.sourceName ||\n            this.managedIdentityClient.getManagedIdentitySource()\n        );\n    }\n}\n", "/*! @azure/msal-node v3.8.4 2025-12-04 */\n'use strict';\nimport * as internals from './internals.mjs';\nexport { internals };\nexport { PublicClientApplication } from './client/PublicClientApplication.mjs';\nexport { ConfidentialClientApplication } from './client/ConfidentialClientApplication.mjs';\nexport { ClientApplication } from './client/ClientApplication.mjs';\nexport { ClientCredentialClient } from './client/ClientCredentialClient.mjs';\nexport { DeviceCodeClient } from './client/DeviceCodeClient.mjs';\nexport { OnBehalfOfClient } from './client/OnBehalfOfClient.mjs';\nexport { ManagedIdentityApplication } from './client/ManagedIdentityApplication.mjs';\nexport { UsernamePasswordClient } from './client/UsernamePasswordClient.mjs';\nexport { ClientAssertion } from './client/ClientAssertion.mjs';\nexport { TokenCache } from './cache/TokenCache.mjs';\nexport { DistributedCachePlugin } from './cache/distributed/DistributedCachePlugin.mjs';\nexport { ManagedIdentitySourceNames } from './utils/Constants.mjs';\nexport { CryptoProvider } from './crypto/CryptoProvider.mjs';\nexport { AuthError, AuthErrorCodes, AuthErrorMessage, AzureCloudInstance, ClientAuthError, ClientAuthErrorCodes, ClientAuthErrorMessage, ClientConfigurationError, ClientConfigurationErrorCodes, ClientConfigurationErrorMessage, InteractionRequiredAuthError, InteractionRequiredAuthErrorCodes, InteractionRequiredAuthErrorMessage, LogLevel, Logger, PromptValue, ProtocolMode, ResponseMode, ServerError, TokenCacheContext } from '@azure/msal-common/node';\nexport { version } from './packageMetadata.mjs';\n//# sourceMappingURL=index.mjs.map\n", "/**\n * Helpers for normalizing and enriching device code responses.\n */\nfunction pickFirstString(...values: Array<string | undefined>): string | undefined {\n  return values.find((value) => typeof value === 'string' && value.length > 0);\n}\n\nfunction extractUserCodeFromMessage(message?: string): string | undefined {\n  if (!message) return undefined;\n  const direct = message.match(/code[:\\s]+([A-Z0-9-]{4,})/i)?.[1];\n  if (direct) return direct.toUpperCase();\n\n  const looseCandidate = message.match(/([A-Z0-9]{6,})/g)?.find((c) => c.length >= 6);\n  return looseCandidate ? looseCandidate.toUpperCase() : undefined;\n}\n\nfunction extractUserCodeFromUri(uri?: string): string | undefined {\n  if (!uri) return undefined;\n  try {\n    const url = new URL(uri);\n    const paramKeys = ['user_code', 'usercode', 'code', 'otc'];\n    for (const key of paramKeys) {\n      const value = url.searchParams.get(key);\n      if (value) return value.toUpperCase();\n    }\n\n    const looseCandidate = uri.match(/([A-Z0-9]{6,})/g)?.find((c) => c.length >= 6);\n    return looseCandidate ? looseCandidate.toUpperCase() : undefined;\n  } catch {\n    return undefined;\n  }\n}\n\nfunction resolveMessage(response: any): string | undefined {\n  return typeof response?.message === 'string' ? response.message : undefined;\n}\n\nfunction resolveUserCode(response: any, rawMessage?: string): string | undefined {\n  return (\n    pickFirstString(response?.userCode, response?.user_code) ||\n    extractUserCodeFromMessage(rawMessage) ||\n    extractUserCodeFromUri(response?.verificationUriComplete || response?.verification_uri_complete)\n  )?.toUpperCase();\n}\n\nfunction resolveVerificationUri(response: any): string {\n  return (\n    pickFirstString(\n      response?.verificationUri,\n      response?.verification_uri,\n      response?.verificationUriComplete,\n      response?.verification_uri_complete\n    ) || 'https://microsoft.com/devicelogin'\n  );\n}\n\nfunction resolveVerificationUriComplete(\n  response: any,\n  verificationUri: string,\n  userCode?: string\n): string | undefined {\n  const explicit = pickFirstString(\n    response?.verificationUriComplete,\n    response?.verification_uri_complete\n  );\n  if (explicit) return explicit;\n  return userCode ? `${verificationUri}?user_code=${userCode}` : undefined;\n}\n\nfunction resolveExpiresInSeconds(response: any): number {\n  return response?.expiresIn || response?.expiresInSeconds || response?.expires_in || 900;\n}\n\nexport function normalizeDeviceCodeResponse(response: any) {\n  if (!response) return undefined;\n\n  const rawMessage = resolveMessage(response);\n  const userCode = resolveUserCode(response, rawMessage);\n  const verificationUri = resolveVerificationUri(response);\n  const verificationUriComplete = resolveVerificationUriComplete(\n    response,\n    verificationUri,\n    userCode\n  );\n  const expiresInSeconds = resolveExpiresInSeconds(response);\n\n  return {\n    userCode,\n    verificationUri,\n    verificationUriComplete,\n    expiresInSeconds,\n    message: rawMessage,\n  } as\n    | {\n        userCode?: string;\n        verificationUri: string;\n        verificationUriComplete?: string;\n        expiresInSeconds: number;\n        message?: string;\n      }\n    | undefined;\n}\n\nfunction ensureMessage(response: any, normalized?: ReturnType<typeof normalizeDeviceCodeResponse>) {\n  if (response?.message) return response.message;\n  const code = normalized?.userCode;\n  if (!code) return normalized?.message;\n  const uri = normalized?.verificationUri ?? 'https://microsoft.com/devicelogin';\n  return `To sign in, use a web browser to open ${uri} and enter the code ${code}`;\n}\n\nexport function enrichDeviceCodeResponse(response: any) {\n  const normalized = normalizeDeviceCodeResponse(response);\n  const userCode = normalized?.userCode ?? resolveUserCode(response, response?.message);\n  const verificationUri = normalized?.verificationUri ?? resolveVerificationUri(response);\n  const verificationUriComplete =\n    normalized?.verificationUriComplete ??\n    resolveVerificationUriComplete(response, verificationUri, userCode);\n\n  return {\n    ...(response ?? {}),\n    userCode,\n    user_code: userCode,\n    verificationUri,\n    verification_uri: verificationUri,\n    verificationUriComplete,\n    verification_uri_complete: verificationUriComplete,\n    message: ensureMessage(response, normalized),\n    __normalized: normalized,\n  };\n}\n\nexport type NormalizedDeviceCodeResponse = ReturnType<typeof normalizeDeviceCodeResponse>;\n", "/**\n * Authentication Configuration\n *\n * Centralized configuration for authentication flow selection\n */\n\nimport * as vscode from 'vscode';\n\nexport type AuthFlowPreference = 'auto' | 'device-code' | 'auth-code';\n\nexport interface AuthConfig {\n  useAuthCodeFlow: boolean;\n  flowPreference: AuthFlowPreference;\n}\n\n/**\n * Get authentication configuration from VS Code settings\n */\nexport function getAuthConfig(): AuthConfig {\n  const config = vscode.workspace.getConfiguration('azureDevOpsIntegration.auth');\n\n  const useAuthCodeFlow = config.get<boolean>('useAuthCodeFlow', true); // Default to true (auth code flow)\n  const flowPreference = config.get<AuthFlowPreference>('flow', 'auto');\n\n  return {\n    useAuthCodeFlow: useAuthCodeFlow || flowPreference === 'auth-code',\n    flowPreference: flowPreference,\n  };\n}\n\n/**\n * Check if authorization code flow should be used for a connection\n */\nexport function shouldUseAuthCodeFlow(\n  authMethod: 'pat' | 'entra' | undefined,\n  _connectionId?: string\n): boolean {\n  // Only use auth code flow for Entra authentication\n  if (authMethod !== 'entra') {\n    return false;\n  }\n\n  const config = getAuthConfig();\n\n  // Explicit preference\n  if (config.flowPreference === 'auth-code') {\n    return true;\n  }\n\n  if (config.flowPreference === 'device-code') {\n    return false;\n  }\n\n  // Auto mode: default to auth code flow (unless explicitly disabled)\n  // Only use device code if explicitly requested via flowPreference\n  return config.useAuthCodeFlow !== false; // Default to true\n}\n", "/**\n * PKCE (Proof Key for Code Exchange) Utilities\n *\n * Implements RFC 7636 for OAuth 2.0 Authorization Code Flow with PKCE\n */\n\nimport * as crypto from 'crypto';\n\nexport interface PKCEParams {\n  codeVerifier: string;\n  codeChallenge: string;\n  codeChallengeMethod: 'S256';\n}\n\n/**\n * Generate PKCE parameters for authorization code flow\n *\n * @returns PKCE parameters with code verifier and challenge\n */\nexport function generatePKCEParams(): PKCEParams {\n  const codeVerifier = generateCodeVerifier();\n  const codeChallenge = generateCodeChallenge(codeVerifier);\n\n  return {\n    codeVerifier,\n    codeChallenge,\n    codeChallengeMethod: 'S256',\n  };\n}\n\n/**\n * Generate a cryptographically random code verifier\n * Must be 43-128 characters, URL-safe base64 encoded\n */\nfunction generateCodeVerifier(): string {\n  // Generate 32 random bytes = 256 bits\n  // Base64 encoding of 32 bytes = 44 characters (with padding)\n  // After removing padding and URL-safe encoding = 43 characters\n  const randomBytes = crypto.randomBytes(32);\n  return base64URLEncode(randomBytes);\n}\n\n/**\n * Generate code challenge from verifier using SHA256\n *\n * @param verifier - The code verifier\n * @returns Base64URL-encoded SHA256 hash\n */\nfunction generateCodeChallenge(verifier: string): string {\n  const hash = crypto.createHash('sha256').update(verifier).digest();\n  return base64URLEncode(hash);\n}\n\n/**\n * Encode buffer as base64url (RFC 4648 Section 5)\n *\n * @param buffer - Buffer to encode\n * @returns Base64URL-encoded string without padding\n */\nfunction base64URLEncode(buffer: Buffer): string {\n  return buffer.toString('base64').replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=/g, '');\n}\n\n/**\n * Generate a cryptographically random state parameter for CSRF protection\n *\n * @returns Random state string\n */\nexport function generateState(): string {\n  return base64URLEncode(crypto.randomBytes(32));\n}\n\n/**\n * Validate code verifier format\n *\n * @param verifier - Code verifier to validate\n * @returns True if valid\n */\nexport function isValidCodeVerifier(verifier: string): boolean {\n  // Must be 43-128 characters\n  if (verifier.length < 43 || verifier.length > 128) {\n    return false;\n  }\n  // Must contain only URL-safe characters: A-Z, a-z, 0-9, -, _, ., ~\n  return /^[A-Za-z0-9\\-_.~]+$/.test(verifier);\n}\n", "/* eslint-disable max-lines */\n/**\n * Authorization Code Flow Provider with PKCE\n *\n * Implements OAuth 2.0 Authorization Code Flow with PKCE for VSCode extensions\n */\n\nimport * as msal from '@azure/msal-node';\nimport * as vscode from 'vscode';\nimport { generatePKCEParams, generateState, PKCEParams, isValidCodeVerifier } from './pkceUtils.js';\nimport { createComponentLogger, Component } from '../../logging/ComponentLogger.js';\n\nconst componentLogger = createComponentLogger(Component.AUTH, 'AuthorizationCodeFlowProvider');\n\n// Constants\nconst AZURE_DEVOPS_RESOURCE_ID = '499b84ac-1321-427f-aa17-267ca6975798';\nconst DEFAULT_SCOPES = [`${AZURE_DEVOPS_RESOURCE_ID}/.default`, 'offline_access'];\nconst AUTH_TIMEOUT_MS = 15 * 60 * 1000; // 15 minutes\n\nexport interface AuthenticationResult {\n  success: boolean;\n  accessToken?: string;\n  expiresAt?: Date;\n  error?: string;\n}\n\nexport interface AuthorizationCodeFlowOptions {\n  config: {\n    clientId: string;\n    tenantId?: string;\n    scopes?: string[];\n  };\n  secretStorage: vscode.SecretStorage;\n  connectionId: string;\n  redirectUri: string;\n  onStatusUpdate?: (\n    connectionId: string,\n    status: {\n      type: 'auth_code_flow_started' | 'auth_code_flow_completed' | 'auth_code_flow_failed';\n      authorizationUrl?: string;\n      expiresInSeconds?: number;\n      error?: string;\n    }\n  ) => void;\n}\n\nexport class AuthorizationCodeFlowProvider {\n  private msalClient: msal.PublicClientApplication;\n  private secretStorage: vscode.SecretStorage;\n  private connectionId: string;\n  private redirectUri: string;\n  private config: AuthorizationCodeFlowOptions['config'];\n  private pkceParams?: PKCEParams;\n  private pendingAuthState?: string;\n  private authStartTime?: number;\n  private resolveAuthPromise?: (result: AuthenticationResult) => void;\n  private rejectAuthPromise?: (error: Error) => void;\n  private authTimeout?: NodeJS.Timeout;\n  private onStatusUpdate?: AuthorizationCodeFlowOptions['onStatusUpdate'];\n\n  constructor(options: AuthorizationCodeFlowOptions) {\n    this.config = options.config;\n    this.secretStorage = options.secretStorage;\n    this.connectionId = options.connectionId;\n    this.redirectUri = options.redirectUri;\n    this.onStatusUpdate = options.onStatusUpdate;\n\n    const tenantId = this.config.tenantId || 'organizations';\n    const authority = `https://login.microsoftonline.com/${tenantId}`;\n\n    const msalConfig: msal.Configuration = {\n      auth: {\n        clientId: this.config.clientId,\n        authority: authority,\n      },\n      cache: {\n        cachePlugin: this.createCachePlugin(),\n      },\n      system: {\n        loggerOptions: {\n          loggerCallback: (level, message, containsPii) => {\n            if (containsPii) return;\n            componentLogger.debug(`MSAL ${level}: ${message}`);\n          },\n          piiLoggingEnabled: false,\n          logLevel: msal.LogLevel.Warning,\n        },\n      },\n    };\n\n    this.msalClient = new msal.PublicClientApplication(msalConfig);\n  }\n\n  /**\n   * Create cache plugin for MSAL token cache persistence\n   */\n  private createCachePlugin(): msal.ICachePlugin {\n    const cacheKey = `azureDevOpsInt.entra.tokenCache.${this.connectionId}`;\n\n    return {\n      beforeCacheAccess: async (context: msal.TokenCacheContext) => {\n        try {\n          const serialized = await this.secretStorage.get(cacheKey);\n          if (serialized) {\n            context.tokenCache.deserialize(serialized);\n          }\n        } catch (error) {\n          componentLogger.error(`Failed to load token cache: ${error}`);\n        }\n      },\n      afterCacheAccess: async (context: msal.TokenCacheContext) => {\n        if (!context.cacheHasChanged) {\n          return;\n        }\n        try {\n          const serialized = context.tokenCache.serialize();\n          await this.secretStorage.store(cacheKey, serialized);\n        } catch (error) {\n          componentLogger.error(`Failed to persist token cache: ${error}`);\n        }\n      },\n    } satisfies msal.ICachePlugin;\n  }\n\n  /**\n   * Get authority URL\n   */\n  private getAuthority(): string {\n    const tenantId = this.config.tenantId || 'organizations';\n    return `https://login.microsoftonline.com/${tenantId}`;\n  }\n\n  /**\n   * Resolve scopes, ensuring offline_access is included\n   */\n  private resolveScopes(): string[] {\n    const configuredScopes =\n      this.config.scopes && this.config.scopes.length > 0 ? this.config.scopes : DEFAULT_SCOPES;\n\n    const scopeSet = new Set<string>();\n    for (const scope of configuredScopes) {\n      if (typeof scope === 'string' && scope.trim().length > 0) {\n        scopeSet.add(scope.trim());\n      }\n    }\n\n    // Always include offline_access for refresh token support\n    scopeSet.add('offline_access');\n\n    return Array.from(scopeSet);\n  }\n\n  /**\n   * Build authorization URL with PKCE parameters\n   */\n  private buildAuthorizationUrl(codeChallenge: string, state: string): string {\n    const tenantId = this.config.tenantId || 'organizations';\n    const scopes = this.resolveScopes();\n\n    const params = new URLSearchParams({\n      client_id: this.config.clientId,\n      response_type: 'code',\n      redirect_uri: this.redirectUri,\n      response_mode: 'query',\n      scope: scopes.join(' '),\n      code_challenge: codeChallenge,\n      code_challenge_method: 'S256',\n      state: state,\n    });\n\n    return `https://login.microsoftonline.com/${tenantId}/oauth2/v2.0/authorize?${params.toString()}`;\n  }\n\n  /**\n   * Try silent authentication first\n   */\n  private async trySilentAuthentication(scopes: string[]): Promise<AuthenticationResult> {\n    try {\n      const accounts = await this.msalClient.getTokenCache().getAllAccounts();\n      if (accounts.length === 0) {\n        return { success: false, error: 'No cached account found' };\n      }\n\n      const account = accounts[0];\n      const silentRequest: msal.SilentFlowRequest = {\n        account: account,\n        scopes: scopes,\n        forceRefresh: false,\n      };\n\n      const response = await this.msalClient.acquireTokenSilent(silentRequest);\n\n      if (response && response.accessToken) {\n        componentLogger.info('Silent authentication successful');\n        return {\n          success: true,\n          accessToken: response.accessToken,\n          expiresAt: response.expiresOn || undefined,\n        };\n      }\n\n      return { success: false, error: 'Silent authentication returned no token' };\n    } catch (error: any) {\n      componentLogger.debug(`Silent authentication failed: ${error.message}`);\n      return { success: false, error: error.message || 'Silent authentication failed' };\n    }\n  }\n\n  /**\n   * Initiate authorization code flow with PKCE\n   */\n  async authenticate(forceInteractive: boolean = false): Promise<AuthenticationResult> {\n    try {\n      const scopes = this.resolveScopes();\n\n      // Try silent authentication first (unless forced)\n      if (!forceInteractive) {\n        const silentResult = await this.trySilentAuthentication(scopes);\n        if (silentResult.success) {\n          return silentResult;\n        }\n      }\n\n      // Generate PKCE parameters\n      this.pkceParams = generatePKCEParams();\n      this.pendingAuthState = generateState();\n      this.authStartTime = Date.now();\n\n      // Build authorization URL\n      const authorizationUrl = this.buildAuthorizationUrl(\n        this.pkceParams.codeChallenge,\n        this.pendingAuthState\n      );\n\n      // Notify status update\n      this.onStatusUpdate?.(this.connectionId, {\n        type: 'auth_code_flow_started',\n        authorizationUrl: authorizationUrl,\n        expiresInSeconds: Math.floor(AUTH_TIMEOUT_MS / 1000),\n      });\n\n      // Open browser\n      await vscode.env.openExternal(vscode.Uri.parse(authorizationUrl));\n\n      componentLogger.info('Authorization URL opened in browser', {\n        connectionId: this.connectionId,\n        authorizationUrl: authorizationUrl.substring(0, 100) + '...',\n      });\n\n      // Wait for redirect URI handler\n      return await this.waitForRedirect();\n    } catch (error: any) {\n      componentLogger.error(`Authentication failed: ${error.message}`, {\n        connectionId: this.connectionId,\n        error: error,\n      });\n\n      this.cleanup();\n\n      return {\n        success: false,\n        error: error.message || 'Authentication failed',\n      };\n    }\n  }\n\n  /**\n   * Wait for redirect URI handler to complete authentication\n   */\n  private waitForRedirect(): Promise<AuthenticationResult> {\n    return new Promise((resolve, reject) => {\n      this.resolveAuthPromise = resolve;\n      this.rejectAuthPromise = reject;\n\n      // Set timeout\n      this.authTimeout = setTimeout(() => {\n        this.cleanup();\n        reject(new Error(`Authentication timeout after ${AUTH_TIMEOUT_MS / 1000} seconds`));\n      }, AUTH_TIMEOUT_MS);\n    });\n  }\n\n  /**\n   * Handle redirect URI with authorization code\n   * Called by URI handler in activation.ts\n   */\n  async handleRedirectUri(uri: vscode.Uri): Promise<AuthenticationResult> {\n    try {\n      // Parse URI parameters\n      const params = new URLSearchParams(uri.query);\n      const authorizationCode = params.get('code');\n      const state = params.get('state');\n      const error = params.get('error');\n      const errorDescription = params.get('error_description');\n\n      // Check for errors\n      if (error) {\n        const errorMsg = errorDescription || error;\n        componentLogger.error(`Authorization error: ${errorMsg}`);\n        this.cleanup();\n        return {\n          success: false,\n          error: errorMsg,\n        };\n      }\n\n      // Validate required parameters\n      if (!authorizationCode) {\n        throw new Error('Authorization code not found in redirect URI');\n      }\n\n      if (!state) {\n        throw new Error('State parameter not found in redirect URI');\n      }\n\n      // Verify state matches pending auth\n      if (state !== this.pendingAuthState) {\n        throw new Error('State parameter mismatch - possible CSRF attack');\n      }\n\n      // Verify PKCE params exist\n      if (!this.pkceParams) {\n        throw new Error('PKCE parameters not found - authentication session expired');\n      }\n\n      // Verify code verifier is valid\n      if (!isValidCodeVerifier(this.pkceParams.codeVerifier)) {\n        throw new Error('Invalid code verifier format');\n      }\n\n      componentLogger.info('Exchanging authorization code for token', {\n        connectionId: this.connectionId,\n      });\n\n      // Exchange code + verifier for token\n      const tokenRequest: msal.AuthorizationCodeRequest = {\n        code: authorizationCode,\n        codeVerifier: this.pkceParams.codeVerifier,\n        redirectUri: this.redirectUri,\n        scopes: this.resolveScopes(),\n      };\n\n      const response = await this.msalClient.acquireTokenByCode(tokenRequest);\n\n      if (!response || !response.accessToken) {\n        throw new Error('Token exchange returned no access token');\n      }\n\n      // Store tokens securely\n      const tokenKey = `entra:${this.config.tenantId || 'organizations'}:${this.config.clientId}`;\n      await this.secretStorage.store(tokenKey, response.accessToken);\n\n      // Store refresh token if available\n      if (response.account) {\n        await this.storeAccount(response.account);\n      }\n\n      componentLogger.info('Authentication successful', {\n        connectionId: this.connectionId,\n        expiresAt: response.expiresOn?.toISOString(),\n      });\n\n      // Notify status update\n      this.onStatusUpdate?.(this.connectionId, {\n        type: 'auth_code_flow_completed',\n      });\n\n      const result: AuthenticationResult = {\n        success: true,\n        accessToken: response.accessToken,\n        expiresAt: response.expiresOn || undefined,\n      };\n\n      this.cleanup();\n      if (this.resolveAuthPromise) {\n        this.resolveAuthPromise(result);\n      }\n\n      return result;\n    } catch (error: any) {\n      componentLogger.error(`Redirect handling failed: ${error.message}`, {\n        connectionId: this.connectionId,\n        error: error,\n      });\n\n      this.onStatusUpdate?.(this.connectionId, {\n        type: 'auth_code_flow_failed',\n        error: error.message || 'Authentication failed',\n      });\n\n      this.cleanup();\n\n      if (this.rejectAuthPromise) {\n        this.rejectAuthPromise(error);\n      }\n\n      return {\n        success: false,\n        error: error.message || 'Redirect handling failed',\n      };\n    }\n  }\n\n  /**\n   * Store account information for future silent authentication\n   */\n  private async storeAccount(account: msal.AccountInfo): Promise<void> {\n    try {\n      const accountKey = `azureDevOpsInt.entra.account.${this.connectionId}`;\n      await this.secretStorage.store(\n        accountKey,\n        JSON.stringify({\n          homeAccountId: account.homeAccountId,\n          environment: account.environment,\n          username: account.username,\n          localAccountId: account.localAccountId,\n        })\n      );\n    } catch (error) {\n      componentLogger.warn(`Failed to store account info: ${error}`);\n    }\n  }\n\n  /**\n   * Cleanup pending authentication state\n   */\n  private cleanup(): void {\n    if (this.authTimeout) {\n      clearTimeout(this.authTimeout);\n      this.authTimeout = undefined;\n    }\n    this.pkceParams = undefined;\n    this.pendingAuthState = undefined;\n    this.authStartTime = undefined;\n    this.resolveAuthPromise = undefined;\n    this.rejectAuthPromise = undefined;\n  }\n\n  /**\n   * Get access token (for IAuthProvider interface compatibility)\n   */\n  async getAccessToken(): Promise<string | undefined> {\n    try {\n      const accounts = await this.msalClient.getTokenCache().getAllAccounts();\n      if (accounts.length === 0) {\n        return undefined;\n      }\n\n      const account = accounts[0];\n      const scopes = this.resolveScopes();\n      const silentRequest: msal.SilentFlowRequest = {\n        account: account,\n        scopes: scopes,\n        forceRefresh: false,\n      };\n\n      const response = await this.msalClient.acquireTokenSilent(silentRequest);\n      return response?.accessToken;\n    } catch (error) {\n      componentLogger.debug(`Failed to get access token: ${error}`);\n      return undefined;\n    }\n  }\n\n  /**\n   * Refresh access token\n   */\n  async refreshAccessToken(): Promise<AuthenticationResult> {\n    try {\n      const accounts = await this.msalClient.getTokenCache().getAllAccounts();\n      if (accounts.length === 0) {\n        return { success: false, error: 'No account found for token refresh' };\n      }\n\n      const account = accounts[0];\n      const scopes = this.resolveScopes();\n      const silentRequest: msal.SilentFlowRequest = {\n        account: account,\n        scopes: scopes,\n        forceRefresh: true,\n      };\n\n      const response = await this.msalClient.acquireTokenSilent(silentRequest);\n\n      if (response && response.accessToken) {\n        return {\n          success: true,\n          accessToken: response.accessToken,\n          expiresAt: response.expiresOn || undefined,\n        };\n      }\n\n      return { success: false, error: 'Token refresh returned no token' };\n    } catch (error: any) {\n      return { success: false, error: error.message || 'Token refresh failed' };\n    }\n  }\n\n  /**\n   * Sign out\n   */\n  async signOut(): Promise<void> {\n    try {\n      const accounts = await this.msalClient.getTokenCache().getAllAccounts();\n      for (const account of accounts) {\n        await this.msalClient.getTokenCache().removeAccount(account);\n      }\n\n      // Clear stored tokens\n      const tokenKey = `entra:${this.config.tenantId || 'organizations'}:${this.config.clientId}`;\n      await this.secretStorage.delete(tokenKey);\n\n      const accountKey = `azureDevOpsInt.entra.account.${this.connectionId}`;\n      await this.secretStorage.delete(accountKey);\n\n      this.cleanup();\n    } catch (error) {\n      componentLogger.error(`Sign out failed: ${error}`);\n    }\n  }\n\n  /**\n   * Reset token (clear cache)\n   */\n  async resetToken(): Promise<void> {\n    await this.signOut();\n  }\n\n  /**\n   * Check if authenticated\n   */\n  async isAuthenticated(): Promise<boolean> {\n    const token = await this.getAccessToken();\n    return !!token;\n  }\n\n  /**\n   * Get PKCE params for external storage (used by URI handler)\n   */\n  getPendingPKCEParams(): PKCEParams | undefined {\n    return this.pkceParams;\n  }\n\n  /**\n   * Get pending auth state\n   */\n  getPendingAuthState(): string | undefined {\n    return this.pendingAuthState;\n  }\n}\n", "/**\n * Helper functions for authorization code flow authentication\n */\n\nimport type { ExtensionContext } from 'vscode';\nimport { AuthorizationCodeFlowProvider } from './authorizationCodeProvider.js';\nimport { shouldUseAuthCodeFlow } from '../../config/authConfig.js';\nimport { createLogger } from '../../logging/unifiedLogger.js';\n\nconst logger = createLogger('auth-code-flow-helpers');\n\nconst DEFAULT_ENTRA_CLIENT_ID = 'c6c01810-2fff-45f0-861b-2ba02ae00ddc';\nconst DEFAULT_ENTRA_TENANT = 'organizations';\n\nexport interface AuthCodeFlowOptions {\n  connectionId: string;\n  clientId?: string;\n  tenantId?: string;\n  scopes?: string[];\n  force?: boolean;\n}\n\n/**\n * Attempt authentication using authorization code flow\n */\nexport async function attemptAuthCodeFlow(\n  context: ExtensionContext,\n  options: AuthCodeFlowOptions\n): Promise<{ success: boolean; accessToken?: string; error?: string }> {\n  const useAuthCodeFlow = shouldUseAuthCodeFlow('entra', options.connectionId);\n\n  if (!useAuthCodeFlow) {\n    return { success: false };\n  }\n\n  try {\n    const redirectUri = `vscode-azuredevops-int://auth/callback`;\n    const resolvedClientId = options.clientId?.trim() || DEFAULT_ENTRA_CLIENT_ID;\n    const authorityTenant = options.tenantId || DEFAULT_ENTRA_TENANT;\n\n    const provider = new AuthorizationCodeFlowProvider({\n      config: {\n        clientId: resolvedClientId,\n        tenantId: authorityTenant,\n        scopes: options.scopes,\n      },\n      secretStorage: context.secrets,\n      connectionId: options.connectionId,\n      redirectUri: redirectUri,\n      onStatusUpdate: async (connId, status) => {\n        // Dispatch event to Praxis application engine\n        if (typeof (globalThis as any).__dispatchApplicationEvent === 'function') {\n          (globalThis as any).__dispatchApplicationEvent({\n            type:\n              status.type === 'auth_code_flow_started'\n                ? 'AUTH_CODE_FLOW_STARTED'\n                : status.type === 'auth_code_flow_completed'\n                  ? 'AUTH_CODE_FLOW_COMPLETED'\n                  : 'AUTH_CODE_FLOW_FAILED',\n            connectionId: connId,\n            authorizationUrl: status.authorizationUrl,\n            expiresInSeconds: status.expiresInSeconds,\n            error: status.error,\n          });\n        }\n      },\n    });\n\n    // Store provider for URI handler\n    if (!(globalThis as any).__pendingAuthProviders) {\n      (globalThis as any).__pendingAuthProviders = new Map();\n    }\n    (globalThis as any).__pendingAuthProviders.set(options.connectionId, provider);\n\n    const result = await provider.authenticate(options.force);\n\n    if (result.success && result.accessToken) {\n      // Clear provider after successful auth\n      (globalThis as any).__pendingAuthProviders?.delete(options.connectionId);\n      return { success: true, accessToken: result.accessToken };\n    } else {\n      return { success: false, error: result.error || 'Authentication failed' };\n    }\n  } catch (error: any) {\n    logger.warn('Auth code flow failed, falling back to device code', {\n      meta: { error: error.message, connectionId: options.connectionId },\n    });\n    return { success: false, error: error.message };\n  }\n}\n", "/**\n * Module: src/fsm/functions/auth/authentication.ts\n * Owner: application\n * Reads: (document)\n * Writes: (document)\n * Receives: (document)\n * Emits: (document)\n * Prohibitions: Do not mutate ApplicationContext directly; Do not define new *Context types\n * Rationale: (document)\n *\n * LLM-GUARD:\n * - Follow ownership boundaries; route events to Router; do not add UI logic here\n */\nimport type { ExtensionContext } from 'vscode';\nimport * as msal from '@azure/msal-node';\nimport * as vscode from 'vscode';\nimport { enrichDeviceCodeResponse } from '../auth/deviceCodeHelpers.js';\nimport { createLogger } from '../../logging/unifiedLogger.js';\n\nconst activationLogger = createLogger('auth-authentication');\n\nexport async function getPat(context: ExtensionContext, patKey?: string): Promise<string> {\n  if (!patKey) {\n    throw new Error('PAT key is not defined for this connection.');\n  }\n  const pat = await context.secrets.get(patKey);\n  if (!pat) {\n    throw new Error(`PAT not found in secret storage for key: ${patKey}`);\n  }\n  return pat;\n}\n\nconst DEFAULT_ENTRA_TENANT = 'organizations';\nconst DEFAULT_ENTRA_CLIENT_ID = 'c6c01810-2fff-45f0-861b-2ba02ae00ddc';\nconst AZURE_CLI_CLIENT_ID = '04b07795-8ddb-461a-bbee-02f9e1bf7b46';\nconst AZURE_DEVOPS_SCOPE = '499b84ac-1321-427f-aa17-267ca6975798/.default';\nconst OFFLINE_ACCESS_SCOPE = 'offline_access';\n\ntype DeviceCodeInfo = {\n  userCode?: string;\n  verificationUri: string;\n  verificationUriComplete?: string;\n  expiresInSeconds: number;\n  message?: string;\n};\n\nfunction isTokenExpired(token: string): boolean {\n  try {\n    const parts = token.split('.');\n    if (parts.length !== 3) {\n      return true;\n    }\n    const payload = JSON.parse(Buffer.from(parts[1], 'base64').toString());\n    // Give a 5-minute buffer\n    const now = Math.floor(Date.now() / 1000);\n    return payload.exp < now + 300;\n  } catch {\n    return true;\n  }\n}\n\nfunction resolveScopes(customScopes?: string[]): string[] {\n  const scopes = new Set<string>();\n  (customScopes ?? [AZURE_DEVOPS_SCOPE]).forEach((scope) => {\n    if (scope && typeof scope === 'string') {\n      const trimmed = scope.trim();\n      if (trimmed.length > 0) {\n        scopes.add(trimmed);\n      }\n    }\n  });\n  scopes.add(OFFLINE_ACCESS_SCOPE);\n  return Array.from(scopes);\n}\n\nasync function tryGetCachedToken(\n  context: ExtensionContext,\n  searchKeys: string[],\n  targetKey: string\n): Promise<string | undefined> {\n  for (const key of searchKeys) {\n    const cachedToken = await context.secrets.get(key);\n    if (cachedToken && !isTokenExpired(cachedToken)) {\n      if (key !== targetKey) {\n        await context.secrets.store(targetKey, cachedToken);\n      }\n      return cachedToken;\n    }\n  }\n  return undefined;\n}\n\nfunction normalizeDeviceCodeResponse(response: any): DeviceCodeInfo {\n  const enriched = enrichDeviceCodeResponse(response);\n\n  const userCode = enriched.userCode ?? enriched.__normalized?.userCode;\n  const verificationUri =\n    enriched.verificationUri ??\n    enriched.__normalized?.verificationUri ??\n    'https://microsoft.com/devicelogin';\n  const expiresInSeconds =\n    enriched.__normalized?.expiresInSeconds ?? response?.expiresIn ?? response?.expires_in ?? 900;\n\n  return {\n    userCode,\n    verificationUri,\n    verificationUriComplete:\n      enriched.verificationUriComplete ?? enriched.__normalized?.verificationUriComplete,\n    expiresInSeconds,\n    message: enriched.message,\n  };\n}\n\nasync function notifyDeviceCode(\n  info: DeviceCodeInfo,\n  options: GetEntraIdTokenOptions\n): Promise<void> {\n  // Validate userCode exists\n  if (!info.userCode || info.userCode.trim() === '') {\n    activationLogger.warn('[notifyDeviceCode] Device code is missing', {\n      meta: { hasVerificationUri: !!info.verificationUri },\n    });\n    vscode.window.showErrorMessage('Device code is not available. Please try signing in again.');\n    return;\n  }\n\n  if (info.userCode) {\n    try {\n      await vscode.env.clipboard.writeText(info.userCode);\n    } catch (error) {\n      activationLogger.warn('[notifyDeviceCode] Failed to copy device code to clipboard', {\n        meta: error,\n      });\n      // Continue even if clipboard copy fails\n    }\n  }\n\n  const label = options.connectionLabel || options.connectionId || 'Microsoft Entra ID';\n  const message = `To sign in to ${label}, use a web browser to open ${info.verificationUri} and enter the code ${info.userCode} to authenticate.`;\n\n  const openInBrowser = 'Open in Browser';\n\n  void vscode.window\n    .showInformationMessage(message, openInBrowser)\n    .then(async (action) => {\n      if (action !== openInBrowser) return;\n\n      if (info.userCode) {\n        try {\n          await vscode.env.clipboard.writeText(info.userCode);\n          vscode.window.showInformationMessage(\n            `Device code ${info.userCode} copied to clipboard. Paste it into the browser to finish signing in.`\n          );\n        } catch (error) {\n          activationLogger.warn('[notifyDeviceCode] Failed to copy device code to clipboard', {\n            meta: error,\n          });\n          vscode.window.showWarningMessage(\n            `Failed to copy device code to clipboard: ${error instanceof Error ? error.message : String(error)}`\n          );\n        }\n      }\n\n      const target = info.verificationUriComplete || info.verificationUri;\n      try {\n        await vscode.env.openExternal(vscode.Uri.parse(target));\n      } catch (error) {\n        activationLogger.warn('[notifyDeviceCode] Failed to open browser', { meta: error });\n        // Show error if browser open fails\n        vscode.window.showErrorMessage('Failed to open browser. Please open it manually.');\n      }\n    })\n    .then(undefined, (error) => {\n      activationLogger.warn('[notifyDeviceCode] Notification error', { meta: error });\n    });\n\n  if (info.userCode && typeof options.onDeviceCode === 'function') {\n    // Call onDeviceCode callback and handle errors to prevent unhandled rejections\n    Promise.resolve(\n      options.onDeviceCode({\n        userCode: info.userCode,\n        verificationUri: info.verificationUri,\n        verificationUriComplete: info.verificationUriComplete,\n        expiresInSeconds: info.expiresInSeconds,\n      })\n    ).catch((error) => {\n      activationLogger.error('[notifyDeviceCode] Error in onDeviceCode callback', {\n        meta: error,\n      });\n      // Don't throw - this is a callback error, not a fatal error\n    });\n  }\n}\n\nfunction formatAuthError(error: any): string {\n  if (!error) return 'Unknown error';\n\n  const parts: string[] = [];\n  const knownFields = [\n    error.errorCode,\n    error.subError,\n    error.statusCode,\n    error.message,\n    error.errorMessage,\n    error.correlationId,\n  ]\n    .filter(Boolean)\n    .map((v) => `${v}`);\n\n  parts.push(...knownFields);\n\n  const responseBody = error?.responseBody || error?.body || error?.response?.body;\n  if (responseBody) {\n    const bodyString =\n      typeof responseBody === 'string' ? responseBody : JSON.stringify(responseBody);\n    parts.push(`body=${bodyString}`);\n  }\n\n  if (error?.stack) {\n    parts.push(`stack=${error.stack}`);\n  }\n\n  return parts.filter(Boolean).join(' | ');\n}\n\nexport async function clearEntraIdToken(\n  context: ExtensionContext,\n  tenantId?: string,\n  clientId?: string\n): Promise<void> {\n  if (!tenantId) {\n    return;\n  }\n\n  // Delete both new and legacy cache keys\n  const keys = new Set<string>();\n  const clientKey = clientId ?? DEFAULT_ENTRA_CLIENT_ID;\n  keys.add(`entra:${tenantId}:${clientKey}`);\n  keys.add(`entra:${tenantId}:${AZURE_CLI_CLIENT_ID}`); // fallback client\n  keys.add(`entra:${tenantId}`); // legacy\n\n  for (const key of keys) {\n    await context.secrets.delete(key);\n  }\n}\n\ntype GetEntraIdTokenOptions = {\n  /** Skip cached token check and force interactive flow */\n  force?: boolean;\n  /** Connection id for telemetry / UI updates */\n  connectionId?: string;\n  /** Optional label to show in notifications */\n  connectionLabel?: string;\n  /** Optional client ID override */\n  clientId?: string;\n  /** Optional scopes override */\n  scopes?: string[];\n  /** Callback invoked when device code is issued */\n  onDeviceCode?: (info: {\n    userCode: string;\n    verificationUri: string;\n    verificationUriComplete?: string;\n    expiresInSeconds: number;\n  }) => void;\n};\n\nexport async function getEntraIdToken(\n  context: ExtensionContext,\n  tenantId?: string,\n  options: GetEntraIdTokenOptions = {}\n): Promise<string> {\n  const resolvedClientId = options.clientId?.trim() || DEFAULT_ENTRA_CLIENT_ID;\n  const authorityTenant = tenantId || DEFAULT_ENTRA_TENANT;\n  const resolvedTenantId = tenantId || DEFAULT_ENTRA_TENANT;\n  const secretKey = `entra:${resolvedTenantId}:${resolvedClientId}`;\n  const legacyKey = `entra:${resolvedTenantId}`;\n  const scopes = resolveScopes(options.scopes);\n  const connectionId = options.connectionId || 'default';\n\n  // Try to get cached token first, unless forced (check new and legacy keys)\n  if (!options.force) {\n    const searchKeys = new Set<string>([secretKey, legacyKey]);\n    const cachedToken = await tryGetCachedToken(context, Array.from(searchKeys), secretKey);\n    if (cachedToken) {\n      return cachedToken;\n    }\n  }\n\n  // Check if auth code flow should be used (default for Entra)\n  const { shouldUseAuthCodeFlow } = await import('../../config/authConfig.js');\n  const useAuthCodeFlow = shouldUseAuthCodeFlow('entra', connectionId);\n\n  // Only try device code flow if explicitly requested (flowPreference === 'device-code')\n  // Otherwise, use auth code flow as default\n  if (useAuthCodeFlow) {\n    const { attemptAuthCodeFlow } = await import('./authCodeFlowHelpers.js');\n    const authCodeResult = await attemptAuthCodeFlow(context, {\n      connectionId,\n      clientId: resolvedClientId,\n      tenantId: authorityTenant,\n      scopes,\n      force: options.force,\n    });\n\n    if (authCodeResult.success && authCodeResult.accessToken) {\n      // Store token\n      await context.secrets.store(secretKey, authCodeResult.accessToken);\n      if (legacyKey !== secretKey) {\n        await context.secrets.delete(legacyKey);\n      }\n      return authCodeResult.accessToken;\n    }\n\n    // If auth code flow fails and user didn't explicitly request device code, throw error\n    // Don't silently fall back to device code\n    throw new Error(\n      authCodeResult.error ||\n        'Authorization code flow failed. If you need device code flow, set azureDevOpsIntegration.auth.flow to \"device-code\"'\n    );\n  }\n\n  // Device code flow - only used when explicitly requested\n  const attemptAcquire = async (clientId: string) => {\n    const pca = new msal.PublicClientApplication({\n      auth: {\n        clientId,\n        authority: `https://login.microsoftonline.com/${authorityTenant}`,\n      },\n    });\n\n    const targetKey = `entra:${resolvedTenantId}:${clientId}`;\n\n    const deviceCodeRequest = {\n      deviceCodeCallback: async (response: any) => {\n        try {\n          const info = normalizeDeviceCodeResponse(response);\n          if (!info || !info.userCode || info.userCode.trim() === '') {\n            activationLogger.error('[getEntraIdToken] Invalid device code response received', {\n              meta: { response, hasUserCode: !!info?.userCode },\n            });\n            // Still try to notify, but it will show an error\n            try {\n              await notifyDeviceCode(\n                {\n                  userCode: '',\n                  verificationUri: info?.verificationUri || 'https://microsoft.com/devicelogin',\n                  expiresInSeconds: info?.expiresInSeconds || 900,\n                },\n                options\n              );\n            } catch (notifyError) {\n              activationLogger.error('[getEntraIdToken] Failed to notify device code error', {\n                meta: notifyError,\n              });\n            }\n            return;\n          }\n          try {\n            await notifyDeviceCode(info, options);\n          } catch (notifyError) {\n            activationLogger.error('[getEntraIdToken] Error in notifyDeviceCode', {\n              meta: { notifyError, hasUserCode: !!info?.userCode },\n            });\n            // Don't rethrow - allow authentication to continue even if notification fails\n          }\n        } catch (error) {\n          activationLogger.error('[getEntraIdToken] Error in deviceCodeCallback', {\n            meta: { error, response },\n          });\n          // Try to notify with minimal info so user knows something went wrong\n          try {\n            await notifyDeviceCode(\n              {\n                userCode: '',\n                verificationUri: 'https://microsoft.com/devicelogin',\n                expiresInSeconds: 900,\n              },\n              options\n            );\n          } catch (notifyError) {\n            activationLogger.error('[getEntraIdToken] Failed to notify device code error', {\n              meta: notifyError,\n            });\n            // Ignore notification errors if we're already in error state\n          }\n        }\n      },\n      scopes,\n    };\n\n    const tokenResponse = await pca.acquireTokenByDeviceCode(deviceCodeRequest);\n    if (tokenResponse && tokenResponse.accessToken) {\n      await context.secrets.store(targetKey, tokenResponse.accessToken);\n      if (legacyKey !== targetKey) {\n        await context.secrets.delete(legacyKey);\n      }\n      return tokenResponse.accessToken;\n    }\n\n    throw new Error('Failed to acquire Entra ID token.');\n  };\n\n  const candidateClientIds = [resolvedClientId];\n\n  const errors: string[] = [];\n\n  for (const clientId of candidateClientIds) {\n    try {\n      return await attemptAcquire(clientId);\n    } catch (error: any) {\n      const formatted = formatAuthError(error);\n      errors.push(`clientId=${clientId}: ${formatted}`);\n\n      const nonRetryable =\n        error?.errorCode &&\n        ![\n          'post_request_failed',\n          'invalid_grant',\n          'service_not_available',\n          'temporarily_unavailable',\n        ].includes(error.errorCode);\n      if (nonRetryable) {\n        break;\n      }\n    }\n  }\n\n  throw new Error(`Entra ID token acquisition failed: ${errors.join(' || ')}`);\n}\n\n/**\n * Get pending auth code flow provider for URI handler\n */\nexport function getPendingAuthCodeFlowProvider(\n  connectionId: string\n): AuthorizationCodeFlowProvider | undefined {\n  const providers = (globalThis as any).__pendingAuthProviders as\n    | Map<string, AuthorizationCodeFlowProvider>\n    | undefined;\n  return providers?.get(connectionId);\n}\n\n/**\n * Clear pending auth code flow provider\n */\nexport function clearPendingAuthCodeFlowProvider(connectionId: string): void {\n  (globalThis as any).__pendingAuthProviders?.delete(connectionId);\n}\n", "/**\n * Helper functions for authentication flow setup\n */\n\nimport type { ExtensionContext } from 'vscode';\nimport { AuthorizationCodeFlowProvider } from '../auth/authorizationCodeProvider.js';\nimport { shouldUseAuthCodeFlow } from '../../config/authConfig.js';\nimport type { ProjectConnection } from '../../types/application.js';\nimport type { PraxisConnectionManager } from '../../praxis/connection/manager.js';\n\nexport interface AuthFlowSetupResult {\n  success: boolean;\n  token?: string;\n  expiresAt?: number;\n  error?: string;\n}\n\n/**\n * Setup and attempt authorization code flow authentication\n */\nexport async function setupAuthCodeFlow(\n  manager: PraxisConnectionManager,\n  config: ProjectConnection,\n  context: ExtensionContext,\n  dispatchDeviceCodeEvent: (event: any) => Promise<void>,\n  force?: boolean\n): Promise<AuthFlowSetupResult> {\n  const useAuthCodeFlow = shouldUseAuthCodeFlow(config.authMethod, config.id);\n\n  if (!useAuthCodeFlow) {\n    return { success: false };\n  }\n\n  try {\n    const redirectUri = `vscode-azuredevops-int://auth/callback`;\n\n    const provider = new AuthorizationCodeFlowProvider({\n      config: {\n        clientId: config.clientId || 'c6c01810-2fff-45f0-861b-2ba02ae00ddc',\n        tenantId: config.tenantId,\n        scopes: undefined, // Use defaults\n      },\n      secretStorage: context.secrets,\n      connectionId: config.id,\n      redirectUri: redirectUri,\n      onStatusUpdate: async (connId, status) => {\n        // Dispatch event\n        await dispatchDeviceCodeEvent({\n          type:\n            status.type === 'auth_code_flow_started'\n              ? 'AUTH_CODE_FLOW_STARTED'\n              : status.type === 'auth_code_flow_completed'\n                ? 'AUTH_CODE_FLOW_COMPLETED'\n                : 'AUTH_CODE_FLOW_FAILED',\n          connectionId: connId,\n          authorizationUrl: status.authorizationUrl,\n          expiresInSeconds: status.expiresInSeconds,\n          error: status.error,\n        });\n      },\n    });\n\n    // Store provider globally for URI handler\n    if (!(globalThis as any).__pendingAuthProviders) {\n      (globalThis as any).__pendingAuthProviders = new Map();\n    }\n    (globalThis as any).__pendingAuthProviders.set(config.id, provider);\n\n    await dispatchDeviceCodeEvent({\n      type: 'AUTH_CODE_FLOW_STARTED',\n      connectionId: config.id,\n      authorizationUrl: '', // Will be set by provider\n      expiresInSeconds: 900, // 15 minutes\n    });\n\n    const result = await provider.authenticate(force);\n\n    if (result.success && result.accessToken) {\n      const expiresAt = result.expiresAt ? result.expiresAt.getTime() : undefined;\n\n      await dispatchDeviceCodeEvent({\n        type: 'AUTH_CODE_FLOW_COMPLETED',\n        connectionId: config.id,\n        success: true,\n      });\n\n      // Clear provider after successful auth\n      (globalThis as any).__pendingAuthProviders?.delete(config.id);\n\n      return {\n        success: true,\n        token: result.accessToken,\n        expiresAt,\n      };\n    } else {\n      return {\n        success: false,\n        error: result.error || 'Authentication failed',\n      };\n    }\n  } catch (error: any) {\n    // Fall back to device code flow\n    // Automatic logging will capture this error\n    return {\n      success: false,\n      error: error.message,\n    };\n  }\n}\n", "import type { ExtensionContext } from 'vscode';\nimport type { ProjectConnection } from '../../../praxis/connection/types.js';\nimport type { PraxisConnectionManager } from '../../../praxis/connection/manager.js';\nimport { AzureDevOpsIntClient } from '../../azureClient.js';\nimport { WorkItemsProvider } from '../../provider.js';\nimport { getPat, getEntraIdToken } from '../auth/authentication.js';\n\nlet cachedDispatchApplicationEvent: ((event: any) => void) | undefined;\n\nasync function dispatchDeviceCodeEvent(event: any) {\n  try {\n    if (!cachedDispatchApplicationEvent) {\n      const activation = await import('../../../activation.js');\n      cachedDispatchApplicationEvent = activation.dispatchApplicationEvent;\n    }\n    cachedDispatchApplicationEvent?.(event);\n  } catch {\n    // Swallow dispatch errors to avoid breaking authentication flow\n  }\n}\n\n/**\n * Perform authentication\n */\nexport async function performAuthentication(\n  manager: PraxisConnectionManager,\n  config: ProjectConnection,\n  context: ExtensionContext,\n  force?: boolean,\n  onDeviceCode?: (info: {\n    userCode: string;\n    verificationUri: string;\n    verificationUriComplete?: string;\n    expiresInSeconds: number;\n  }) => void\n): Promise<void> {\n  try {\n    let token: string;\n    let expiresAt: number | undefined;\n    let deviceCodeStarted = false;\n\n    if (config.authMethod === 'entra') {\n      // Try authorization code flow first (default)\n      const { setupAuthCodeFlow } = await import('./authFlowHelpers.js');\n      const { shouldUseAuthCodeFlow } = await import('../../config/authConfig.js');\n      const useAuthCodeFlow = shouldUseAuthCodeFlow('entra', config.id);\n\n      if (useAuthCodeFlow) {\n        const authCodeResult = await setupAuthCodeFlow(\n          manager,\n          config,\n          context,\n          dispatchDeviceCodeEvent,\n          force\n        );\n\n        if (authCodeResult.success && authCodeResult.token) {\n          token = authCodeResult.token;\n          expiresAt = authCodeResult.expiresAt;\n        } else {\n          // Don't silently fall back to device code - throw error instead\n          throw new Error(\n            authCodeResult.error ||\n              'Authorization code flow failed. If you need device code flow, set azureDevOpsIntegration.auth.flow to \"device-code\"'\n          );\n        }\n      } else {\n        // Device code flow - only used when explicitly requested\n        token = await getEntraIdToken(context, config.tenantId, {\n          force,\n          connectionId: config.id,\n          connectionLabel: config.label,\n          clientId: config.clientId,\n          onDeviceCode: async (info) => {\n            try {\n              deviceCodeStarted = true;\n              await dispatchDeviceCodeEvent({\n                type: 'DEVICE_CODE_STARTED',\n                connectionId: config.id,\n                userCode: info.userCode,\n                verificationUri: info.verificationUri,\n                expiresInSeconds: info.expiresInSeconds,\n              });\n\n              if (onDeviceCode) {\n                // Call the optional callback, but don't await it to avoid blocking\n                Promise.resolve(onDeviceCode(info)).catch((error) => {\n                  // Log but don't throw - callback errors shouldn't break auth flow\n                  // Errors are already logged by the callback handler\n                });\n              }\n            } catch (error) {\n              // Log error but don't throw - device code dispatch failure shouldn't break auth\n              // Errors are already handled by dispatchDeviceCodeEvent's try-catch\n            }\n          },\n        });\n        // Entra tokens usually expire in 1 hour, but we let MSAL handle refresh\n        expiresAt = Date.now() + 3600 * 1000;\n      }\n    } else {\n      token = await getPat(context, config.patKey);\n    }\n\n    manager.authenticated(token, expiresAt);\n\n    if (deviceCodeStarted) {\n      await dispatchDeviceCodeEvent({\n        type: 'DEVICE_CODE_COMPLETED',\n        connectionId: config.id,\n      });\n    }\n  } catch (error) {\n    // Ensure device code UI is cleared on failure\n    await dispatchDeviceCodeEvent({\n      type: 'DEVICE_CODE_COMPLETED',\n      connectionId: config.id,\n    });\n    manager.authFailed(error instanceof Error ? error.message : String(error));\n  }\n}\n\n/**\n * Create Azure Client\n */\nexport async function createClient(\n  manager: PraxisConnectionManager,\n  config: ProjectConnection,\n  credential: string,\n  onAuthFailure: () => void\n): Promise<void> {\n  try {\n    const client = new AzureDevOpsIntClient(config.organization, config.project, credential, {\n      authType: config.authMethod === 'entra' ? 'bearer' : 'pat',\n      onAuthFailure: onAuthFailure,\n    });\n    manager.clientCreated(client);\n  } catch (error) {\n    manager.clientFailed(error instanceof Error ? error.message : String(error));\n  }\n}\n\n/**\n * Create Provider\n */\nexport async function createProvider(\n  manager: PraxisConnectionManager,\n  config: ProjectConnection,\n  client: AzureDevOpsIntClient\n): Promise<void> {\n  try {\n    // Dynamically import activation to get forwardProviderMessage\n    // This avoids circular dependency issues at module level\n    const { forwardProviderMessage } = await import('../../../activation.js');\n\n    // Use forwardProviderMessage to ensure work items are dispatched to Praxis\n    // This is critical for the initial refresh to work correctly - work items must\n    // be dispatched to Praxis via WORK_ITEMS_LOADED event, not posted directly to webview\n    const postMessage = (msg: any) => {\n      forwardProviderMessage(config.id, msg);\n    };\n\n    const provider = new WorkItemsProvider(config.id, client, postMessage);\n    manager.providerCreated(provider);\n  } catch (error) {\n    manager.providerFailed(error instanceof Error ? error.message : String(error));\n  }\n}\n", "/**\n * Connection Driver\n *\n * Handles the connection lifecycle by polling Praxis connection manager state\n * and driving the connection process through authentication, client creation, and provider creation.\n */\n\nimport type { ExtensionContext } from 'vscode';\nimport type { PraxisConnectionManager } from './manager.js';\nimport type { ProjectConnection } from './types.js';\nimport { AzureDevOpsIntClient } from '../../azureClient.js';\nimport {\n  performAuthentication,\n  createClient,\n  createProvider,\n} from '../../services/connection/connectionManagerHelpers.js';\nimport { clearEntraIdToken } from '../../services/auth/authentication.js';\n\nexport class ConnectionDriver {\n  constructor(\n    private context: ExtensionContext | undefined,\n    private onStatusBarUpdate: () => void,\n    private onTokenExpired: (connectionId: string) => void\n  ) {}\n\n  /**\n   * Wait for connection to complete or fail\n   */\n  async waitForConnection(\n    manager: PraxisConnectionManager,\n    config: ProjectConnection,\n    timeoutMs: number,\n    forceInteractive?: boolean,\n    onDeviceCode?: (response: {\n      userCode: string;\n      verificationUri: string;\n      verificationUriComplete?: string;\n      expiresInSeconds: number;\n    }) => void\n  ): Promise<{\n    success: boolean;\n    client?: unknown;\n    provider?: unknown;\n    error?: string;\n    state?: unknown;\n  }> {\n    let authStarted = false;\n    let clientStarted = false;\n    let providerStarted = false;\n\n    return new Promise((resolve) => {\n      const timeout = setTimeout(() => {\n        resolve({\n          success: false,\n          error: `Connection timeout (${timeoutMs / 1000}s)`,\n        });\n      }, timeoutMs);\n\n      // Poll for state changes (Praxis doesn't have built-in subscriptions)\n      const pollInterval = setInterval(() => {\n        const state = manager.getConnectionState();\n        const data = manager.getConnectionData();\n\n        // Drive the connection process\n        if (state === 'authenticating' && !authStarted) {\n          authStarted = true;\n          if (this.context) {\n            performAuthentication(manager, config, this.context, forceInteractive, onDeviceCode).catch((err) => {\n               \n              // Debug statement removed\n            });\n          } else {\n             \n            // Debug statement removed\n            manager.authFailed('Extension context not set');\n          }\n        } else if (state === 'creating_client' && !clientStarted && data.credential) {\n          clientStarted = true;\n          createClient(manager, config, data.credential, () => {\n            if (this.context && config.authMethod === 'entra') {\n              clearEntraIdToken(this.context, config.tenantId, config.clientId)\n                .catch((err) => {\n                   \n                  // Debug statement removed\n                })\n                .finally(() => {\n                  this.onTokenExpired(config.id);\n                });\n            } else {\n              this.onTokenExpired(config.id);\n            }\n          }).catch((err) => {\n             \n            // Debug statement removed\n          });\n        } else if (state === 'creating_provider' && !providerStarted && data.client) {\n          providerStarted = true;\n          createProvider(manager, config, data.client as AzureDevOpsIntClient).catch((err) => {\n             \n            // Debug statement removed\n          });\n        }\n\n        if (state === 'connected') {\n          clearTimeout(timeout);\n          clearInterval(pollInterval);\n          resolve({\n            success: true,\n            client: data.client,\n            provider: data.provider,\n            state: data,\n          });\n          // Update status bar\n          this.onStatusBarUpdate();\n        } else if (\n          ['auth_failed', 'client_failed', 'provider_failed', 'connection_error'].includes(state)\n        ) {\n          clearTimeout(timeout);\n          clearInterval(pollInterval);\n          resolve({\n            success: false,\n            error: data.lastError || 'Connection failed',\n            state: data,\n          });\n          // Update status bar\n          this.onStatusBarUpdate();\n        }\n      }, 100);\n    });\n  }\n}\n\n", "import type { ExtensionContext } from 'vscode';\nimport { PraxisConnectionManager } from './manager.js';\nimport type { ProjectConnection } from './types.js';\nimport { createComponentLogger, Component } from '../../logging/ComponentLogger.js';\nimport { ConnectionDriver } from './driver.js';\n\nconst logger = createComponentLogger(Component.CONNECTION, 'ConnectionService');\n\nexport class ConnectionService {\n  private static instance: ConnectionService;\n  private connectionManagers = new Map<string, PraxisConnectionManager>();\n  private context?: ExtensionContext;\n\n  private constructor() {}\n\n  static getInstance(): ConnectionService {\n    if (!ConnectionService.instance) {\n      ConnectionService.instance = new ConnectionService();\n    }\n    return ConnectionService.instance;\n  }\n\n  setContext(context: ExtensionContext): void {\n    this.context = context;\n  }\n\n  getConnectionManager(connectionId: string): PraxisConnectionManager | undefined {\n    return this.connectionManagers.get(connectionId);\n  }\n\n  async connect(\n    config: ProjectConnection,\n    options: {\n      refresh?: boolean;\n      interactive?: boolean;\n      onDeviceCode?: (response: any) => void;\n    } = {}\n  ): Promise<{\n    success: boolean;\n    client?: unknown;\n    provider?: unknown;\n    error?: string;\n    state?: unknown;\n  }> {\n    // Get or create manager for this connection\n    let manager = this.connectionManagers.get(config.id);\n    if (!manager) {\n      manager = new PraxisConnectionManager(config);\n      manager.start();\n      this.connectionManagers.set(config.id, manager);\n    }\n\n    return this.connectWithManager(manager, options);\n  }\n\n  async connectWithManager(\n    manager: PraxisConnectionManager,\n    options: {\n      refresh?: boolean;\n      interactive?: boolean;\n      onDeviceCode?: (response: any) => void;\n    } = {}\n  ): Promise<{\n    success: boolean;\n    client?: unknown;\n    provider?: unknown;\n    error?: string;\n    state?: unknown;\n  }> {\n    const currentState = manager.getConnectionState();\n    const failedStates = ['auth_failed', 'client_failed', 'provider_failed', 'connection_error'];\n\n    // If a previous attempt failed, reset the manager so we can restart auth (e.g., user clicks retry)\n    if (failedStates.includes(currentState)) {\n      logger.info(`Resetting failed connection state before reconnect`, {\n        connectionId: manager.getConnectionData().config.id,\n        previousState: currentState,\n      });\n      manager.reset();\n    }\n\n    const config = manager.getConnectionData().config;\n    const forceInteractive = options?.interactive === true;\n    \n    logger.info(`Connecting to ${config.id}...`, {\n      connectionId: config.id,\n      authMethod: config.authMethod,\n      interactive: options?.interactive,\n      forceInteractive,\n    });\n\n    // Initiate connection\n    manager.connect({ forceInteractive });\n    logger.logEvent('CONNECT', 'connecting', 'praxisConnectionManager', {\n      connectionId: config.id,\n      forceInteractive,\n    });\n\n    // Wait for connection to complete or fail\n    // Extended timeout for device code authentication flow (15 minutes to match Azure)\n    const isEntraAuth = config.authMethod === 'entra';\n    const isInteractiveAuth = options?.interactive || forceInteractive || isEntraAuth;\n    const timeoutMs = isInteractiveAuth ? 900000 : 30000;\n\n    const driver = new ConnectionDriver(\n      this.context,\n      () => this.updateStatusBar(),\n      (id) => this.handleTokenExpired(id)\n    );\n\n    return driver.waitForConnection(\n      manager,\n      config,\n      timeoutMs,\n      forceInteractive,\n      options.onDeviceCode\n    );\n  }\n\n\n\n  private handleTokenExpired(connectionId: string): void {\n    const manager = this.connectionManagers.get(connectionId);\n    if (manager) {\n      manager.tokenExpired();\n    }\n  }\n\n\n\n  private updateStatusBar(): void {\n    setImmediate(() => {\n      const globalRef = (globalThis as any).__updateAuthStatusBar;\n      if (typeof globalRef === 'function') {\n        globalRef().catch((err: any) => {\n          logger.warn(\n            `Failed to update status bar: ${err instanceof Error ? err.message : String(err)}`\n          );\n        });\n      } else {\n        // @ts-ignore\n        import('../../activation.js')\n          .then(({ updateAuthStatusBar }) => {\n            updateAuthStatusBar().catch((err: any) => {\n              logger.warn(\n                `Failed to update status bar: ${err instanceof Error ? err.message : String(err)}`\n              );\n            });\n          })\n          .catch((err) => {\n            logger.warn(\n              `Failed to import updateAuthStatusBar: ${err instanceof Error ? err.message : String(err)}`\n            );\n          });\n      }\n    });\n  }\n\n  disconnect(connectionId: string): void {\n    const manager = this.connectionManagers.get(connectionId);\n    if (manager) {\n      manager.disconnect();\n    }\n  }\n}\n", "/**\n * Diagnostic helper functions for work items diagnostics\n */\n\nimport { logLine } from '../../logging.js';\nimport type { ProjectConnection } from '../../types/application.js';\n\nexport interface DiagnosticContext {\n  connections: ProjectConnection[];\n  activeConnectionId?: string;\n  snapshot: any;\n}\n\n/**\n * Check and log connection information\n */\nexport function checkConnections(context: DiagnosticContext): boolean {\n  logLine('1. Checking Connections...');\n  logLine(`   Found ${context.connections.length} connection(s)`);\n\n  if (context.connections.length === 0) {\n    logLine('   \u274C ERROR: No connections configured');\n    logLine('   \u2192 Run \"Azure DevOps Int: Setup Wizard\" to configure a connection');\n    return false;\n  }\n\n  logLine(`   Active connection: ${context.activeConnectionId || 'None'}`);\n\n  if (!context.activeConnectionId) {\n    logLine('   \u26A0\uFE0F  WARNING: No active connection selected');\n    logLine('   \u2192 Select a connection in the webview');\n  }\n\n  return true;\n}\n\n/**\n * Check and log active connection state\n */\nexport async function checkActiveConnectionState(context: DiagnosticContext): Promise<boolean> {\n  if (!context.activeConnectionId) {\n    return false;\n  }\n\n  logLine('');\n  logLine('2. Checking Active Connection State...');\n  const connection = context.connections.find((c: any) => c.id === context.activeConnectionId);\n\n  if (!connection) {\n    logLine(\n      `   \u274C ERROR: Active connection ${context.activeConnectionId} not found in connections list`\n    );\n    return false;\n  }\n\n  logLine(`   Connection ID: ${connection.id}`);\n  logLine(`   Organization: ${connection.organization || 'Not set'}`);\n  logLine(`   Project: ${connection.project || 'Not set'}`);\n  logLine(`   Auth Method: ${connection.authMethod || 'pat'}`);\n  logLine(`   Base URL: ${connection.baseUrl || connection.apiBaseUrl || 'Not set'}`);\n\n  // Check connection state\n  const connectionStates = context.snapshot?.context?.connectionStates;\n  const connState = connectionStates?.get?.(context.activeConnectionId);\n  const isConnected = connState?.isConnected === true;\n  logLine(`   Connection Status: ${isConnected ? '\u2705 Connected' : '\u274C Not Connected'}`);\n\n  // Check ConnectionService state\n  try {\n    const { ConnectionService } = await import('../../praxis/connection/service.js');\n    const connectionService = ConnectionService.getInstance();\n    const manager = connectionService.getConnectionManager(context.activeConnectionId);\n    if (manager) {\n      const state = manager.getConnectionState();\n      logLine(`   Connection Manager State: ${state || 'Unknown'}`);\n      const data = manager.getConnectionData();\n      if (data.lastError) {\n        logLine(`   \u274C Last Error: ${data.lastError}`);\n      }\n    }\n  } catch (error: any) {\n    logLine(`   \u26A0\uFE0F  Could not check connection manager: ${error.message}`);\n  }\n\n  return isConnected;\n}\n\n/**\n * Check and log work items state\n */\nexport function checkWorkItemsState(context: DiagnosticContext): void {\n  logLine('');\n  logLine('3. Checking Work Items State...');\n  const pendingWorkItems = context.snapshot?.context?.pendingWorkItems;\n  const connectionWorkItems = context.snapshot?.context?.connectionWorkItems;\n\n  if (pendingWorkItems) {\n    const count = Array.isArray(pendingWorkItems.workItems) ? pendingWorkItems.workItems.length : 0;\n    logLine(`   Pending Work Items: ${count} item(s)`);\n    logLine(`   Connection ID: ${pendingWorkItems.connectionId || 'None'}`);\n    logLine(`   Query: ${pendingWorkItems.query || 'Not set'}`);\n  } else {\n    logLine('   \u26A0\uFE0F  No pending work items found');\n  }\n\n  if (connectionWorkItems && context.activeConnectionId) {\n    const connWorkItems = connectionWorkItems.get?.(context.activeConnectionId);\n    if (connWorkItems) {\n      const count = Array.isArray(connWorkItems.workItems) ? connWorkItems.workItems.length : 0;\n      logLine(`   Connection Work Items: ${count} item(s) for active connection`);\n    } else {\n      logLine('   \u26A0\uFE0F  No work items found for active connection');\n    }\n  }\n}\n\n/**\n * Check and log active query\n */\nexport function checkActiveQuery(context: DiagnosticContext): string | undefined {\n  logLine('');\n  logLine('4. Checking Active Query...');\n  const activeQuery = context.snapshot?.context?.activeQuery;\n  logLine(`   Active Query: ${activeQuery || 'Not set'}`);\n\n  if (!activeQuery) {\n    logLine('   \u26A0\uFE0F  WARNING: No active query selected');\n    logLine('   \u2192 Select a query in the webview');\n  }\n\n  return activeQuery;\n}\n\n/**\n * Check and log errors\n */\nexport function checkErrors(context: DiagnosticContext): string | undefined {\n  logLine('');\n  logLine('5. Checking for Errors...');\n  const workItemsError = context.snapshot?.context?.workItemsError;\n  const lastError = context.snapshot?.context?.lastError;\n\n  if (workItemsError) {\n    logLine(`   \u274C Work Items Error: ${workItemsError}`);\n    logLine(\n      `   Connection ID: ${context.snapshot?.context?.workItemsErrorConnectionId || 'Unknown'}`\n    );\n  } else {\n    logLine('   \u2705 No work items errors found');\n  }\n\n  if (lastError) {\n    logLine(`   \u274C Last Application Error: ${lastError.message || lastError}`);\n    if (lastError.stack) {\n      logLine(`   Stack: ${lastError.stack}`);\n    }\n  }\n\n  return workItemsError;\n}\n\n/**\n * Test connection if available\n */\nexport async function testConnection(context: DiagnosticContext): Promise<void> {\n  logLine('');\n  logLine('6. Testing Connection...');\n  if (!context.activeConnectionId) {\n    logLine('   \u26A0\uFE0F  Skipped: No active connection');\n    return;\n  }\n\n  try {\n    const { ConnectionService } = await import('../../praxis/connection/service.js');\n    const connectionService = ConnectionService.getInstance();\n    const manager = connectionService.getConnectionManager(context.activeConnectionId);\n\n    if (!manager) {\n      logLine('   \u26A0\uFE0F  Connection manager not found');\n      return;\n    }\n\n    const data = manager.getConnectionData();\n    if (data.client && data.provider) {\n      logLine('   \u2705 Client and Provider available');\n\n      // Try to get work item types as a connectivity test\n      try {\n        if (typeof data.provider.getWorkItemTypeOptions === 'function') {\n          const types = data.provider.getWorkItemTypeOptions();\n          logLine(\n            `   \u2705 Work Item Types: ${Array.isArray(types) ? types.length : 0} type(s) available`\n          );\n        }\n      } catch (error: any) {\n        logLine(`   \u26A0\uFE0F  Could not fetch work item types: ${error.message}`);\n      }\n    } else {\n      logLine('   \u274C Client or Provider not available');\n      logLine(`   Has Client: ${!!data.client}`);\n      logLine(`   Has Provider: ${!!data.provider}`);\n    }\n  } catch (error: any) {\n    logLine(`   \u274C Connection test failed: ${error.message}`);\n  }\n}\n\n/**\n * Generate recommendations based on diagnostic results\n */\nexport function generateRecommendations(\n  context: DiagnosticContext,\n  isConnected: boolean,\n  activeQuery?: string,\n  workItemsError?: string\n): void {\n  logLine('');\n  logLine('7. Recommendations...');\n\n  if (!context.activeConnectionId) {\n    logLine('   \u2192 Select a connection in the webview');\n  } else if (!isConnected) {\n    logLine('   \u2192 Run \"Azure DevOps Int: Sign In with Microsoft Entra ID\" to authenticate');\n  } else if (!activeQuery) {\n    logLine('   \u2192 Select a query in the webview (e.g., \"My Activity\", \"All Active\")');\n  } else if (workItemsError) {\n    logLine('   \u2192 Check authentication and permissions');\n    logLine('   \u2192 Verify PAT scopes include \"Work Items (Read & Write)\"');\n    logLine('   \u2192 Verify you have access to the project');\n  } else {\n    logLine('   \u2705 Configuration looks good');\n    logLine(\"   \u2192 If work items still don't appear, check the query scope\");\n    logLine('   \u2192 Try switching to a different query (e.g., \"All Active\")');\n  }\n}\n", "/**\n * Module: src/features/commands/handlers.ts\n * Owner: application\n * Reads: (document)\n * Writes: (document)\n * Receives: (document)\n * Emits: (document)\n * Prohibitions: Do not mutate ApplicationContext directly; Do not define new *Context types\n * Rationale: (document)\n *\n * LLM-GUARD:\n * - Follow ownership boundaries; route events to Router; do not add UI logic here\n */\nimport * as vscode from 'vscode';\nimport { createLogger } from '../../logging/unifiedLogger.js';\n\nconst logger = createLogger('commands-handlers');\nimport { FSMSetupService } from '../../services/setupService.js';\nimport {\n  getOutputChannel,\n  setOutputChannel,\n  logLine,\n  getLogBufferSnapshot,\n} from '../../logging.js';\nimport { performanceMonitor } from '../../performance.js';\nimport type { CommandHandler } from './types.js';\n\n// Import the actual implementations from activation.ts\n// These will be moved to separate modules in future extractions\nasync function loadConnectionsFromConfig(context: vscode.ExtensionContext) {\n  const { loadConnectionsFromConfig: loadConnections } = await import('../../activation.js');\n  return loadConnections(context);\n}\n\nasync function signInWithEntra(\n  context: vscode.ExtensionContext,\n  connectionId?: string\n): Promise<void> {\n  try {\n    // Get active connection ID if not provided\n    const { getApplicationStoreActor } = await import('../../activation.js');\n    const actor = getApplicationStoreActor();\n    const snapshot = actor?.getSnapshot?.();\n    const activeConnectionId = connectionId || snapshot?.context?.activeConnectionId;\n\n    if (!activeConnectionId) {\n      vscode.window.showWarningMessage('No active connection to sign in with.');\n      return;\n    }\n\n    // Get connection config to verify it's Entra\n    const connections = snapshot?.context?.connections || [];\n    const connection = connections.find((c: any) => c.id === activeConnectionId);\n\n    if (!connection) {\n      vscode.window.showWarningMessage('Connection not found.');\n      return;\n    }\n\n    if (connection.authMethod !== 'entra') {\n      vscode.window.showInformationMessage('This connection does not use Entra ID authentication.');\n      return;\n    }\n\n    // Clear signed-out flag if it exists (user is explicitly signing in)\n    const { clearSignedOutFlag } = await import('../../activation.js');\n    if (typeof clearSignedOutFlag === 'function') {\n      clearSignedOutFlag(activeConnectionId);\n    }\n\n    // Dispatch SIGN_IN_ENTRA event with forceInteractive to trigger new auth flow\n    dispatchApplicationEvent({\n      type: 'SIGN_IN_ENTRA',\n      connectionId: activeConnectionId,\n      forceInteractive: true,\n    });\n\n    // Also disconnect first to clear any cached tokens\n    const { ConnectionService } = await import('../../praxis/connection/service.js');\n    const connectionService = ConnectionService.getInstance();\n    connectionService.disconnect(activeConnectionId);\n\n    // Clear cached tokens\n    const { clearEntraIdToken } = await import('../../services/auth/authentication.js');\n    await clearEntraIdToken(context, connection.tenantId, connection.clientId);\n\n    // Reconnect with interactive auth (this will use the new auth code flow if enabled)\n    connectionService.setContext(context);\n    await connectionService.connect(connection, {\n      refresh: true,\n      interactive: true,\n    });\n  } catch (error: any) {\n    logger.error('signInWithEntra error', { meta: error });\n    vscode.window.showErrorMessage(`Sign in failed: ${error.message || String(error)}`);\n  }\n}\n\nasync function signOutEntra(\n  context: vscode.ExtensionContext,\n  connectionId?: string\n): Promise<void> {\n  try {\n    logger.info('[signOutEntra] Starting sign out', { connectionId });\n\n    // Get active connection ID if not provided\n    const { getApplicationStoreActor } = await import('../../activation.js');\n    const actor = getApplicationStoreActor();\n    const snapshot = actor?.getSnapshot?.();\n    const activeConnectionId = connectionId || snapshot?.context?.activeConnectionId;\n\n    logger.info('signOutEntra: Active connection ID', { activeConnectionId });\n\n    if (!activeConnectionId) {\n      logger.warn('signOutEntra: No active connection found');\n      vscode.window.showWarningMessage('No active connection to sign out from.');\n      return;\n    }\n\n    // Get connection config\n    const connections = snapshot?.context?.connections || [];\n    const connection = connections.find((c: any) => c.id === activeConnectionId);\n\n    if (!connection) {\n      vscode.window.showWarningMessage('Connection not found.');\n      return;\n    }\n\n    if (connection.authMethod !== 'entra') {\n      vscode.window.showInformationMessage('This connection does not use Entra ID authentication.');\n      return;\n    }\n\n    // Disconnect the connection FIRST to prevent automatic reconnection\n    const { ConnectionService } = await import('../../praxis/connection/service.js');\n    const connectionService = ConnectionService.getInstance();\n    logger.info('[signOutEntra] Disconnecting connection', { connectionId: activeConnectionId });\n    connectionService.disconnect(activeConnectionId);\n    logger.info('[signOutEntra] Connection disconnected', { connectionId: activeConnectionId });\n\n    // Clear connection state from connectionStates map\n    try {\n      const { clearConnectionState } = await import('../../activation.js');\n      if (typeof clearConnectionState === 'function') {\n        clearConnectionState(activeConnectionId);\n        logger.info('[signOutEntra] Connection state cleared', {\n          connectionId: activeConnectionId,\n        });\n      }\n    } catch {\n      // Ignore if function doesn't exist\n    }\n\n    // Clear cached tokens - use 'organizations' as default tenant if not specified\n    const authModule = await import('../../services/auth/authentication.js');\n    const { clearEntraIdToken } = authModule;\n\n    // Use 'organizations' as default tenant (most common for Azure DevOps)\n    const tenantId = connection.tenantId || 'organizations';\n\n    // Clear tokens for all possible client ID variations\n    // Azure DevOps uses client ID: 872cd9fa-d31f-45e0-9eab-6e460a02d1f1\n    // But authentication.ts uses: c6c01810-2fff-45f0-861b-2ba02ae00ddc\n    // Clear both to be safe\n    const AZURE_DEVOPS_CLIENT_ID = '872cd9fa-d31f-45e0-9eab-6e460a02d1f1';\n    const AZURE_CLI_CLIENT_ID = '04b07795-8ddb-461a-bbee-02f9e1bf7b46';\n\n    // Clear tokens for all possible combinations\n    await clearEntraIdToken(context, tenantId, connection.clientId || AZURE_DEVOPS_CLIENT_ID);\n    await clearEntraIdToken(context, tenantId, AZURE_DEVOPS_CLIENT_ID);\n    await clearEntraIdToken(context, tenantId, AZURE_CLI_CLIENT_ID);\n    await clearEntraIdToken(context, 'organizations', AZURE_DEVOPS_CLIENT_ID);\n    await clearEntraIdToken(context, 'organizations', AZURE_CLI_CLIENT_ID);\n    await clearEntraIdToken(context, 'organizations', undefined); // Legacy key without client ID\n\n    // Clear auth code flow provider if exists\n    const pendingAuthProviders = (globalThis as any).__pendingAuthProviders as\n      | Map<string, any>\n      | undefined;\n    if (pendingAuthProviders) {\n      const provider = pendingAuthProviders.get(activeConnectionId);\n      if (provider && typeof provider.signOut === 'function') {\n        await provider.signOut();\n      }\n      pendingAuthProviders.delete(activeConnectionId);\n    }\n\n    // Also clear any MSAL account cache for this connection\n    try {\n      const { clearPendingAuthCodeFlowProvider } =\n        await import('../../services/auth/authentication.js');\n      clearPendingAuthCodeFlowProvider(activeConnectionId);\n    } catch {\n      // Ignore errors clearing provider\n    }\n\n    // Mark connection as recently signed out to prevent automatic reconnection\n    // This flag will be cleared after 30 seconds or when user explicitly signs in\n    const { markConnectionSignedOut } = await import('../../activation.js');\n    if (typeof markConnectionSignedOut === 'function') {\n      logger.info('[signOutEntra] Marking connection as signed out', {\n        connectionId: activeConnectionId,\n      });\n      markConnectionSignedOut(activeConnectionId);\n      logger.info('[signOutEntra] Connection marked as signed out', {\n        connectionId: activeConnectionId,\n      });\n    } else {\n      logger.warn('[signOutEntra] markConnectionSignedOut function not available');\n    }\n\n    // Dispatch SIGN_OUT_ENTRA event\n    dispatchApplicationEvent({\n      type: 'SIGN_OUT_ENTRA',\n      connectionId: activeConnectionId,\n    });\n\n    // Update status bar to reflect signed out state\n    const { updateAuthStatusBar } = await import('../../activation.js');\n    if (typeof updateAuthStatusBar === 'function') {\n      await updateAuthStatusBar();\n    }\n\n    vscode.window.showInformationMessage('Signed out successfully.');\n    logger.info('Sign out completed', { connectionId: activeConnectionId });\n  } catch (error: any) {\n    logger.error('signOutEntra error', {\n      error: error?.message || String(error),\n      stack: error?.stack,\n      name: error?.name,\n      code: error?.code,\n      connectionId: activeConnectionId,\n    });\n    vscode.window.showErrorMessage(`Sign out failed: ${error.message || String(error)}`);\n  }\n}\n\nasync function setOpenAIApiKey(context: vscode.ExtensionContext) {\n  try {\n    const apiKey = await vscode.window.showInputBox({\n      prompt: 'Enter your OpenAI API Key',\n      password: true,\n      placeHolder: 'sk-...',\n      validateInput: (value) => {\n        if (!value || value.trim().length === 0) {\n          return 'API key cannot be empty';\n        }\n        if (!value.startsWith('sk-')) {\n          return 'OpenAI API keys typically start with \"sk-\"';\n        }\n        return null;\n      },\n    });\n\n    if (apiKey) {\n      // Store in secrets for security\n      const SECRET_KEY = 'azureDevOpsInt.openai.apiKey';\n      await context.secrets.store(SECRET_KEY, apiKey);\n      vscode.window.showInformationMessage('OpenAI API Key saved successfully.');\n      logger.info('OpenAI API key stored in secrets');\n    }\n  } catch (error: any) {\n    logger.error('setOpenAIApiKey error', { meta: error });\n    vscode.window.showErrorMessage(`Failed to save API key: ${error.message || String(error)}`);\n  }\n}\n\nasync function cycleAuthSignIn(context: vscode.ExtensionContext) {\n  try {\n    const { getApplicationStoreActor } = await import('../../activation.js');\n    const actor = getApplicationStoreActor();\n    const snapshot = actor?.getSnapshot?.();\n    const connections = snapshot?.context?.connections || [];\n\n    // Find connections that need authentication\n    const pendingConnections = connections.filter((conn: any) => {\n      if (conn.authMethod !== 'entra') return false;\n\n      // Check if connection is not connected or has auth issues\n      const connectionStates = snapshot?.context?.connectionStates;\n      const connState = connectionStates?.get?.(conn.id);\n      const isConnected = connState?.isConnected === true;\n\n      return !isConnected;\n    });\n\n    if (pendingConnections.length === 0) {\n      // No pending connections - sign in to active connection\n      const activeConnectionId = snapshot?.context?.activeConnectionId;\n      if (activeConnectionId) {\n        await signInWithEntra(context, activeConnectionId);\n      } else if (connections.length > 0) {\n        // Sign in to first connection\n        await signInWithEntra(context, connections[0].id);\n      } else {\n        vscode.window.showWarningMessage('No connections configured.');\n      }\n      return;\n    }\n\n    // Cycle through pending connections\n    // Use a simple round-robin approach based on connection ID hash\n    const now = Date.now();\n    const cycleIndex = Math.floor((now / 1000) % pendingConnections.length);\n    const targetConnection = pendingConnections[cycleIndex];\n\n    await signInWithEntra(context, targetConnection.id);\n    vscode.window.showInformationMessage(\n      `Signing in to ${targetConnection.label || targetConnection.id}...`\n    );\n  } catch (error: any) {\n    logger.error('cycleAuthSignIn error', { meta: error });\n    vscode.window.showErrorMessage(`Cycle sign in failed: ${error.message || String(error)}`);\n  }\n}\n\nasync function diagnoseWorkItemsIssue(_context: vscode.ExtensionContext) {\n  try {\n    const channel =\n      getOutputChannel() || vscode.window.createOutputChannel('Azure DevOps Integration');\n    setOutputChannel(channel);\n    channel.show(true);\n\n    logLine('=== Work Items Diagnostic ===');\n    logLine(`Started at: ${new Date().toISOString()}`);\n    logLine('');\n\n    // Get application state\n    const { getApplicationStoreActor } = await import('../../activation.js');\n    const actor = getApplicationStoreActor();\n    const snapshot = actor?.getSnapshot?.();\n\n    const {\n      checkConnections,\n      checkActiveConnectionState,\n      checkWorkItemsState,\n      checkActiveQuery,\n      checkErrors,\n      testConnection,\n      generateRecommendations,\n    } = await import('./diagnosticHelpers.js');\n\n    const diagnosticContext = {\n      connections: snapshot?.context?.connections || [],\n      activeConnectionId: snapshot?.context?.activeConnectionId,\n      snapshot,\n    };\n\n    // 1. Check connections\n    if (!checkConnections(diagnosticContext)) {\n      return;\n    }\n\n    // 2. Check active connection state\n    const isConnected = await checkActiveConnectionState(diagnosticContext);\n\n    // 3. Check work items state\n    checkWorkItemsState(diagnosticContext);\n\n    // 4. Check active query\n    const activeQuery = checkActiveQuery(diagnosticContext);\n\n    // 5. Check for errors\n    const workItemsError = checkErrors(diagnosticContext);\n\n    // 6. Test connection if available\n    await testConnection(diagnosticContext);\n\n    // 7. Recommendations\n    generateRecommendations(diagnosticContext, isConnected, activeQuery, workItemsError);\n\n    logLine('');\n    logLine('=== Diagnostic Complete ===');\n    logLine('Check the output above for issues and recommendations.');\n\n    vscode.window.showInformationMessage(\n      'Work items diagnostic complete. Check the output channel for details.'\n    );\n  } catch (error: any) {\n    logger.error('diagnoseWorkItemsIssue error', { meta: error });\n    vscode.window.showErrorMessage(`Diagnostic failed: ${error.message || String(error)}`);\n  }\n}\n\nfunction getConfig() {\n  return vscode.workspace.getConfiguration('azureDevOpsIntegration');\n}\n\n// Import the dispatchApplicationEvent function from activation.ts\n// This ensures events are handled by the actual implementation with work item dialogs, etc.\nimport { dispatchApplicationEvent } from '../../activation.js';\n\n// Setup Commands\nexport const setupCommand: CommandHandler = async (ctx, options?: unknown) => {\n  const setupService = new FSMSetupService(ctx.context);\n  const setupOptions =\n    options && typeof options === 'object'\n      ? (options as { startAtAuthChoice?: boolean; connectionId?: string })\n      : undefined;\n\n  const result = await setupService.startSetup(setupOptions);\n  // After setup, refresh connections from config\n  await loadConnectionsFromConfig(ctx.context);\n  return result;\n};\n\n// Authentication Commands\nexport const signInWithEntraCommand: CommandHandler = async (_ctx, target?: unknown) => {\n  return signInWithEntra(_ctx.context, typeof target === 'string' ? target : (target as any)?.id);\n};\n\nexport const signOutEntraCommand: CommandHandler = async (_ctx, target?: unknown) => {\n  logger.info('[signOutEntraCommand] Command invoked', { target, hasContext: !!_ctx.context });\n\n  try {\n    logger.info('[signOutEntraCommand] Calling signOutEntra function');\n    await signOutEntra(_ctx.context, typeof target === 'string' ? target : (target as any)?.id);\n    logger.info('[signOutEntraCommand] signOutEntra completed successfully');\n  } catch (error: any) {\n    logger.error('[signOutEntraCommand] Command failed', { meta: error });\n    throw error;\n  }\n};\n\n// Logging Commands\nexport const openLogsCommand: CommandHandler = async (_ctx) => {\n  try {\n    let channel = getOutputChannel();\n    if (!channel) {\n      channel = vscode.window.createOutputChannel('Azure DevOps Integration');\n      setOutputChannel(channel);\n      logLine('[logs] Output channel created on demand');\n    }\n    channel.show(true);\n    const currentConfig = getConfig();\n    if (!currentConfig.get<boolean>('debugLogging')) {\n      const pick = await vscode.window.showInformationMessage(\n        'Verbose logging is currently disabled. Enable it to capture more diagnostics?',\n        'Enable',\n        'Skip'\n      );\n      if (pick === 'Enable') {\n        await currentConfig.update('debugLogging', true, vscode.ConfigurationTarget.Global);\n        logLine('[logs] Debug logging enabled');\n      }\n    }\n  } catch (err) {\n    logger.error('openLogs error', { meta: err });\n  }\n};\n\nexport const copyLogsToClipboardCommand: CommandHandler = async (_ctx) => {\n  try {\n    const version = _ctx.context.extension.packageJSON.version || 'dev';\n    const buffer = getLogBufferSnapshot();\n    const header = `Azure DevOps Integration Logs\\nVersion: ${version}\\nTimestamp: ${new Date().toISOString()}\\nLines: ${buffer.length}\\n---\\n`;\n    const body = buffer.join('\\n');\n    const text = header + body + (body.endsWith('\\n') ? '' : '\\n');\n    await vscode.env.clipboard.writeText(text);\n    vscode.window.showInformationMessage('Copied extension logs to clipboard.');\n  } catch (err) {\n    logger.error('copyLogsToClipboard error', { meta: err });\n  }\n};\n\nexport const openLogsFolderCommand: CommandHandler = async (_ctx) => {\n  try {\n    await vscode.commands.executeCommand('workbench.action.openLogsFolder');\n  } catch {\n    try {\n      await vscode.env.openExternal((vscode.env as any).logUri ?? vscode.Uri.file(''));\n    } catch (e: any) {\n      vscode.window.showErrorMessage('Failed to open logs folder: ' + (e?.message || String(e)));\n    }\n  }\n};\n\n// Work Items Commands\nexport const diagnoseWorkItemsCommand: CommandHandler = async (_ctx) => {\n  try {\n    await diagnoseWorkItemsIssue(_ctx.context);\n  } catch (e: any) {\n    vscode.window.showErrorMessage('Diagnostic failed: ' + (e?.message || String(e)));\n  }\n};\n\nexport const focusWorkItemsViewCommand: CommandHandler = (_ctx) => {\n  vscode.commands.executeCommand('azureDevOpsInt.workItemsView.focus');\n};\n\nexport const setDefaultElapsedLimitCommand: CommandHandler = async (_ctx) => {\n  const limit = await vscode.window.showInputBox({\n    prompt: 'Enter default elapsed time limit (in minutes)',\n    value: '480', // 8 hours default\n    validateInput: (value) => {\n      const num = parseInt(value);\n      if (isNaN(num) || num <= 0) {\n        return 'Please enter a valid positive number';\n      }\n      return null;\n    },\n  });\n\n  if (limit) {\n    const config = getConfig();\n    await config.update('defaultElapsedLimit', parseInt(limit), vscode.ConfigurationTarget.Global);\n    vscode.window.showInformationMessage(`Default elapsed limit set to ${limit} minutes`);\n  }\n};\n\nexport const showWorkItemsCommand: CommandHandler = (_ctx) => {\n  vscode.commands.executeCommand('azureDevOpsInt.workItemsView.focus');\n};\n\nexport const refreshWorkItemsCommand: CommandHandler = async (_ctx) => {\n  // Dispatch REFRESH_DATA event to FSM - this triggers the same refresh process\n  // as changing the query selector (transitions to loadingData state, invokes loadData actor)\n  dispatchApplicationEvent({ type: 'REFRESH_DATA' });\n\n  // Also send message to webview to trigger the full refresh process\n  // (the WebviewHeader button has its own onclick CSS spin animation)\n  const { panel } = await import('../../activation.js');\n  if (panel?.webview) {\n    panel.webview.postMessage({ type: 'REFRESH_DATA' });\n  }\n\n  // Note: No need to call provider.refresh() here - the FSM's loadData actor\n  // handles this in the loadingData state for consistency with query changes\n};\n\nexport const createWorkItemCommand: CommandHandler = (_ctx) => {\n  dispatchApplicationEvent({ type: 'CREATE_WORK_ITEM' });\n};\n\n// Timer Commands\nexport const startTimerCommand: CommandHandler = (_ctx) => {\n  dispatchApplicationEvent({ type: 'START_TIMER' });\n};\n\nexport const pauseTimerCommand: CommandHandler = (_ctx) => {\n  dispatchApplicationEvent({ type: 'PAUSE_TIMER' });\n};\n\nexport const resumeTimerCommand: CommandHandler = (_ctx) => {\n  dispatchApplicationEvent({ type: 'RESUME_TIMER' });\n};\n\nexport const stopTimerCommand: CommandHandler = async (ctx) => {\n  const result = await ctx.timer?.stop();\n  if (result) {\n    vscode.window.showInformationMessage(`Timer stopped. Elapsed: ${result.elapsedTime}`);\n  }\n};\n\nexport const showTimeReportCommand: CommandHandler = (_ctx) => {\n  dispatchApplicationEvent({ type: 'SHOW_TIME_REPORT' });\n};\n\n// Branch Commands\nexport const createBranchCommand: CommandHandler = (_ctx) => {\n  dispatchApplicationEvent({ type: 'CREATE_BRANCH' });\n};\n\n// Pull Request Commands\nexport const createPullRequestCommand: CommandHandler = (_ctx) => {\n  dispatchApplicationEvent({ type: 'CREATE_PULL_REQUEST' });\n};\n\nexport const showPullRequestsCommand: CommandHandler = (_ctx) => {\n  dispatchApplicationEvent({ type: 'SHOW_PULL_REQUESTS' });\n};\n\n// Build Commands\nexport const showBuildStatusCommand: CommandHandler = (_ctx) => {\n  dispatchApplicationEvent({ type: 'SHOW_BUILD_STATUS' });\n};\n\n// View Commands\nexport const toggleKanbanViewCommand: CommandHandler = (_ctx) => {\n  // Dispatch TOGGLE_VIEW event - the FSM will toggle between list and kanban\n  dispatchApplicationEvent({ type: 'TOGGLE_VIEW' });\n};\n\nexport const toggleDebugViewCommand: CommandHandler = (_ctx) => {\n  // Dispatch TOGGLE_DEBUG_VIEW event - the FSM will toggle the debug view\n  dispatchApplicationEvent({ type: 'TOGGLE_DEBUG_VIEW' });\n};\n\n// Team Commands\nexport const selectTeamCommand: CommandHandler = (_ctx) => {\n  dispatchApplicationEvent({ type: 'SELECT_TEAM' });\n};\n\nexport const resetPreferredRepositoriesCommand: CommandHandler = (_ctx) => {\n  dispatchApplicationEvent({ type: 'RESET_PREFERRED_REPOSITORIES' });\n};\n\n// Debug Commands\nexport const selfTestWebviewCommand: CommandHandler = (_ctx) => {\n  dispatchApplicationEvent({ type: 'SELF_TEST_WEBVIEW' });\n};\n\nexport const clearPerformanceDataCommand: CommandHandler = (_ctx) => {\n  performanceMonitor.clear();\n  vscode.window.showInformationMessage('Performance data cleared successfully');\n};\n\nexport const forceGCCommand: CommandHandler = (_ctx) => {\n  if (global.gc) {\n    global.gc();\n    vscode.window.showInformationMessage('Garbage collection forced');\n  } else {\n    vscode.window.showWarningMessage('Garbage collection not available');\n  }\n};\n\n// Bulk Action Commands\nexport const bulkAssignCommand: CommandHandler = (_ctx) => {\n  dispatchApplicationEvent({ type: 'BULK_ASSIGN' });\n};\n\n// OpenAI Commands\nexport const setOpenAIApiKeyCommand: CommandHandler = (ctx) => {\n  return setOpenAIApiKey(ctx.context);\n};\n\nexport const generateCopilotPromptCommand: CommandHandler = async (_ctx) => {\n  // This would need access to activeConnectionId from the context\n  // For now, we'll dispatch the event\n  dispatchApplicationEvent({ type: 'GENERATE_COPILOT_PROMPT' });\n};\n\nexport const cycleAuthSignInCommand: CommandHandler = (ctx) => {\n  return cycleAuthSignIn(ctx.context);\n};\n", "/**\n * Module: src/features/commands/registration.ts\n * Owner: application\n * Reads: (document)\n * Writes: (document)\n * Receives: (document)\n * Emits: (document)\n * Prohibitions: Do not mutate ApplicationContext directly; Do not define new *Context types\n * Rationale: (document)\n *\n * LLM-GUARD:\n * - Follow ownership boundaries; route events to Router; do not add UI logic here\n */\nimport * as vscode from 'vscode';\nimport { createLogger } from '../../logging/unifiedLogger.js';\n\nconst logger = createLogger('commands-registration');\nimport type { CommandContext, CommandRegistration } from './types.js';\nimport {\n  setupCommand,\n  signInWithEntraCommand,\n  signOutEntraCommand,\n  openLogsCommand,\n  copyLogsToClipboardCommand,\n  openLogsFolderCommand,\n  diagnoseWorkItemsCommand,\n  focusWorkItemsViewCommand,\n  setDefaultElapsedLimitCommand,\n  showWorkItemsCommand,\n  refreshWorkItemsCommand,\n  createWorkItemCommand,\n  startTimerCommand,\n  pauseTimerCommand,\n  resumeTimerCommand,\n  stopTimerCommand,\n  showTimeReportCommand,\n  createBranchCommand,\n  createPullRequestCommand,\n  showPullRequestsCommand,\n  showBuildStatusCommand,\n  toggleKanbanViewCommand,\n  toggleDebugViewCommand,\n  selectTeamCommand,\n  resetPreferredRepositoriesCommand,\n  selfTestWebviewCommand,\n  clearPerformanceDataCommand,\n  forceGCCommand,\n  bulkAssignCommand,\n  setOpenAIApiKeyCommand,\n  generateCopilotPromptCommand,\n  cycleAuthSignInCommand,\n} from './handlers.js';\n\nexport const commandRegistrations: CommandRegistration[] = [\n  { command: 'azureDevOpsInt.setup', handler: setupCommand },\n  { command: 'azureDevOpsInt.signInWithEntra', handler: signInWithEntraCommand },\n  { command: 'azureDevOpsInt.signOutEntra', handler: signOutEntraCommand },\n  { command: 'azureDevOpsInt.openLogs', handler: openLogsCommand },\n  { command: 'azureDevOpsInt.copyLogsToClipboard', handler: copyLogsToClipboardCommand },\n  { command: 'azureDevOpsInt.diagnoseWorkItems', handler: diagnoseWorkItemsCommand },\n  { command: 'azureDevOpsInt.openLogsFolder', handler: openLogsFolderCommand },\n  { command: 'azureDevOpsInt.focusWorkItemsView', handler: focusWorkItemsViewCommand },\n  { command: 'azureDevOpsInt.setDefaultElapsedLimit', handler: setDefaultElapsedLimitCommand },\n  { command: 'azureDevOpsInt.showWorkItems', handler: showWorkItemsCommand },\n  { command: 'azureDevOpsInt.refreshWorkItems', handler: refreshWorkItemsCommand },\n  { command: 'azureDevOpsInt.createWorkItem', handler: createWorkItemCommand },\n  { command: 'azureDevOpsInt.startTimer', handler: startTimerCommand },\n  { command: 'azureDevOpsInt.pauseTimer', handler: pauseTimerCommand },\n  { command: 'azureDevOpsInt.resumeTimer', handler: resumeTimerCommand },\n  { command: 'azureDevOpsInt.stopTimer', handler: stopTimerCommand },\n  { command: 'azureDevOpsInt.showTimeReport', handler: showTimeReportCommand },\n  { command: 'azureDevOpsInt.createBranch', handler: createBranchCommand },\n  { command: 'azureDevOpsInt.createPullRequest', handler: createPullRequestCommand },\n  { command: 'azureDevOpsInt.showPullRequests', handler: showPullRequestsCommand },\n  { command: 'azureDevOpsInt.showBuildStatus', handler: showBuildStatusCommand },\n  { command: 'azureDevOpsInt.toggleKanbanView', handler: toggleKanbanViewCommand },\n  { command: 'azureDevOpsInt.toggleDebugView', handler: toggleDebugViewCommand },\n  { command: 'azureDevOpsInt.selectTeam', handler: selectTeamCommand },\n  {\n    command: 'azureDevOpsInt.resetPreferredRepositories',\n    handler: resetPreferredRepositoriesCommand,\n  },\n  { command: 'azureDevOpsInt.selfTestWebview', handler: selfTestWebviewCommand },\n  { command: 'azureDevOpsInt.clearPerformanceData', handler: clearPerformanceDataCommand },\n  { command: 'azureDevOpsInt.forceGC', handler: forceGCCommand },\n  { command: 'azureDevOpsInt.bulkAssign', handler: bulkAssignCommand },\n  { command: 'azureDevOpsInt.setOpenAIApiKey', handler: setOpenAIApiKeyCommand },\n  { command: 'azureDevOpsInt.generateCopilotPrompt', handler: generateCopilotPromptCommand },\n  { command: 'azureDevOpsInt.cycleAuthSignIn', handler: cycleAuthSignInCommand },\n];\n\nexport function registerCommands(\n  _context: vscode.ExtensionContext,\n  commandContext: CommandContext\n): vscode.Disposable[] {\n  const startTime = Date.now();\n  const disposables: vscode.Disposable[] = [];\n  const errors: Array<{ command: string; error: string }> = [];\n\n  // Batch register all commands (optimization: reduce logging verbosity)\n  for (const registration of commandRegistrations) {\n    try {\n      const disposable = vscode.commands.registerCommand(registration.command, (...args: any[]) => {\n        logger.debug(`[COMMAND INVOKED] ${registration.command}`, {\n          args,\n          timestamp: new Date().toISOString(),\n        });\n        logger.info(`[Command Registration] Command invoked: ${registration.command}`, { args });\n        try {\n          const result = registration.handler(commandContext, ...args);\n          if (result instanceof Promise) {\n            result\n              .then(() => {\n                logger.debug(`[COMMAND SUCCESS] ${registration.command}`);\n              })\n              .catch((error) => {\n                logger.debug(`[COMMAND ERROR] ${registration.command}`, { meta: error });\n                logger.error(`Error in command ${registration.command}`, { meta: error });\n                vscode.window.showErrorMessage(`Command failed: ${(error as any).message}`);\n              });\n          }\n        } catch (error) {\n          logger.debug(`[COMMAND SYNC ERROR] ${registration.command}`, { meta: error });\n          logger.error(`Error in command ${registration.command}`, { meta: error });\n          vscode.window.showErrorMessage(`Command failed: ${(error as any).message}`);\n        }\n      });\n      disposables.push(disposable);\n      \n      // Special handling for signOutEntra (debugging purposes)\n      if (registration.command === 'azureDevOpsInt.signOutEntra') {\n        logger.debug(\n          `[COMMAND REGISTERED] ${registration.command} - handler:`,\n          { handlerType: typeof registration.handler }\n        );\n        logger.info(`[Command Registration] Registered signOutEntra command`, {\n          handlerType: typeof registration.handler,\n          handlerName: registration.handler?.name || 'anonymous',\n        });\n      }\n    } catch (error) {\n      const errorMsg = (error as any).message || String(error);\n      errors.push({ command: registration.command, error: errorMsg });\n      logger.debug(`[REGISTRATION ERROR] Failed to register ${registration.command}`, { meta: error });\n      logger.error(`Failed to register command ${registration.command}`, { meta: error });\n      if (registration.command === 'azureDevOpsInt.signOutEntra') {\n        vscode.window.showErrorMessage(\n          `Failed to register signOutEntra command: ${errorMsg}`\n        );\n      }\n    }\n  }\n\n  // Single summary log instead of 32 individual logs (optimization)\n  const duration = Date.now() - startTime;\n  if (errors.length > 0) {\n    logger.warn(\n      `[Command Registration] Registered ${disposables.length}/${commandRegistrations.length} commands in ${duration}ms`,\n      {\n        errors: errors.map((e) => `${e.command}: ${e.error}`),\n        failed: errors.length,\n      }\n    );\n  } else {\n    logger.info(\n      `[Command Registration] Registered ${disposables.length} commands in ${duration}ms`\n    );\n  }\n\n  return disposables;\n}\n\nexport function safeCommandHandler(handler: (...args: any[]) => Promise<void> | void) {\n  return async (...args: any[]) => {\n    try {\n      await handler(...args);\n    } catch (error) {\n      logger.error('Command handler error', { meta: error });\n      vscode.window.showErrorMessage(`Command failed: ${(error as any).message}`);\n    }\n  };\n}\n", "/**\n * Module: src/features/commands/index.ts\n * Owner: application\n * Reads: (document)\n * Writes: (document)\n * Receives: (document)\n * Emits: (document)\n * Prohibitions: Do not mutate ApplicationContext directly; Do not define new *Context types\n * Rationale: (document)\n *\n * LLM-GUARD:\n * - Follow ownership boundaries; route events to Router; do not add UI logic here\n */\nexport * from './types.js';\nexport * from './handlers.js';\nexport * from './registration.js';\n", "/* eslint-disable max-lines */\n/**\n * Module: src/logging/TraceLogger.ts\n * Owner: application\n * Reads: (document)\n * Writes: (document)\n * Receives: (document)\n * Emits: (document)\n * Prohibitions: Do not mutate ApplicationContext directly; Do not define new *Context types\n * Rationale: (document)\n *\n * LLM-GUARD:\n * - Follow ownership boundaries; route events to Router; do not add UI logic here\n *\n * This module now uses Praxis logic engine instead of XState.\n */\n/**\n * Praxis Tracing and Replay System\n *\n * Provides comprehensive event tracing with full replay capability:\n * - Captures all Praxis events, state transitions, and context changes\n * - Stores detailed snapshots for replay debugging\n * - Exports/imports trace files for sharing and analysis\n * - Visual timeline and state visualization\n * - Performance analysis and bottleneck detection\n *\n * Compatible with Praxis logic engine.\n */\n\nimport { Component, componentLogger } from './ComponentLogger.js';\n\n// ============================================================================\n// TRACE ENTRY TYPES\n// ============================================================================\n\nexport interface TraceEntry {\n  id: string;\n  timestamp: number;\n  sessionId: string;\n  machineId: string;\n  actorId: string;\n  component: Component;\n\n  // Event information\n  event: { type: string; payload?: unknown };\n  eventType: string;\n\n  // State information\n  fromState: string;\n  toState: string;\n\n  // Context snapshots\n  contextBefore: unknown;\n  contextAfter: unknown;\n\n  // Metadata\n  duration?: number;\n  error?: string;\n  tags?: string[];\n}\n\nexport interface TraceSession {\n  id: string;\n  startTime: number;\n  endTime?: number;\n  description?: string;\n  entries: TraceEntry[];\n  metadata: {\n    extensionVersion?: string;\n    vscodeVersion?: string;\n    userAgent?: string;\n    [key: string]: unknown;\n  };\n}\n\nexport interface ReplayOptions {\n  startFromEntry?: number;\n  endAtEntry?: number;\n  stepMode?: boolean;\n  delayMs?: number;\n  skipErrors?: boolean;\n  onStateChange?: (entry: TraceEntry) => void;\n  onError?: (entry: TraceEntry, error: Error) => void;\n}\n\n// Generic event type for logging\ninterface LogEventData {\n  component: Component;\n  machineId: string;\n  eventType: string;\n  timestamp: number;\n  fromState?: string;\n  toState?: string;\n  context?: unknown;\n  data?: unknown;\n  error?: string;\n}\n\n// ============================================================================\n// TRACE LOGGER CLASS\n// ============================================================================\n\nexport class TraceLogger {\n  private static instance: TraceLogger | undefined;\n  private sessions: Map<string, TraceSession> = new Map();\n  private currentSession: TraceSession | undefined;\n  private isRecording = false;\n  private traceCounter = 0;\n  private maxEntriesPerSession = 10000;\n  private subscribedActors: Map<string, () => void> = new Map();\n\n  private constructor() {\n    this.startNewSession('Praxis Extension Startup');\n  }\n\n  public static getInstance(): TraceLogger {\n    if (!TraceLogger.instance) {\n      TraceLogger.instance = new TraceLogger();\n    }\n    return TraceLogger.instance;\n  }\n\n  // ============================================================================\n  // SESSION MANAGEMENT\n  // ============================================================================\n\n  public startNewSession(description?: string): string {\n    const sessionId = `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n\n    // End current session if exists\n    if (this.currentSession) {\n      this.currentSession.endTime = Date.now();\n    }\n\n    this.currentSession = {\n      id: sessionId,\n      startTime: Date.now(),\n      description: description || 'Praxis Trace Session',\n      entries: [],\n      metadata: {\n        extensionVersion: process.env.npm_package_version,\n        nodeVersion: process.version,\n      },\n    };\n\n    this.sessions.set(sessionId, this.currentSession);\n    this.isRecording = true;\n\n    componentLogger.info(Component.MACHINE, `New trace session started: ${sessionId}`, {\n      component: Component.MACHINE,\n      machineId: sessionId,\n    });\n\n    return sessionId;\n  }\n\n  public stopCurrentSession(): void {\n    if (this.currentSession) {\n      this.currentSession.endTime = Date.now();\n      this.isRecording = false;\n\n      componentLogger.info(\n        Component.MACHINE,\n        `Trace session ended: ${this.currentSession.id}`,\n        {\n          component: Component.MACHINE,\n          machineId: this.currentSession.id,\n        },\n        {\n          duration: this.currentSession.endTime - this.currentSession.startTime,\n          entriesCount: this.currentSession.entries.length,\n        }\n      );\n    }\n  }\n\n  public getCurrentSession(): TraceSession | undefined {\n    return this.currentSession;\n  }\n\n  public getSession(sessionId: string): TraceSession | undefined {\n    return this.sessions.get(sessionId);\n  }\n\n  public getAllSessions(): TraceSession[] {\n    return Array.from(this.sessions.values());\n  }\n\n  // ============================================================================\n  // PRAXIS-COMPATIBLE ACTOR INSTRUMENTATION\n  // ============================================================================\n\n  /**\n   * Instrument a Praxis manager or engine for tracing.\n   * This is a no-op that returns a cleanup function for compatibility.\n   * For actual tracing, use logEvent() directly.\n   */\n  public instrumentActor(_actor: unknown, component: Component, machineId?: string): () => void {\n    if (!this.isRecording || !this.currentSession) {\n      return (): void => {}; // No-op if not recording\n    }\n\n    const actorId = `${component}_${machineId || 'default'}_${Date.now()}`;\n\n    // For Praxis, we don't subscribe to the actor directly\n    // Instead, we provide the logEvent method for manual logging\n    componentLogger.debug(Component.MACHINE, `Actor registered for tracing: ${actorId}`, {\n      component,\n      machineId,\n    });\n\n    // Store cleanup function\n    const cleanup: () => void = () => {\n      this.subscribedActors.delete(actorId);\n    };\n\n    this.subscribedActors.set(actorId, cleanup);\n\n    return cleanup;\n  }\n\n  /**\n   * Log an event from a Praxis engine or manager.\n   * This is the main method for recording events in Praxis-based systems.\n   */\n  public logEvent(data: LogEventData): void {\n    if (!this.isRecording || !this.currentSession) return;\n\n    const entry: TraceEntry = {\n      id: `trace_${++this.traceCounter}`,\n      timestamp: data.timestamp,\n      sessionId: this.currentSession.id,\n      machineId: data.machineId,\n      actorId: `${data.component}_${data.machineId}`,\n      component: data.component,\n\n      event: { type: data.eventType, payload: data.data },\n      eventType: data.eventType,\n\n      fromState: data.fromState || 'unknown',\n      toState: data.toState || 'unknown',\n\n      contextBefore: null,\n      contextAfter: data.context,\n\n      error: data.error,\n    };\n\n    this.addTraceEntry(entry);\n  }\n\n  private addTraceEntry(entry: TraceEntry): void {\n    if (!this.currentSession) return;\n\n    this.currentSession.entries.push(entry);\n\n    // Maintain buffer size\n    if (this.currentSession.entries.length > this.maxEntriesPerSession) {\n      this.currentSession.entries = this.currentSession.entries.slice(-this.maxEntriesPerSession);\n    }\n\n    // Log significant events\n    if (entry.eventType !== 'TICK' && entry.eventType !== 'HEARTBEAT') {\n      componentLogger.debug(\n        Component.MACHINE,\n        `Praxis Event: ${entry.eventType}`,\n        {\n          component: entry.component,\n          machineId: entry.machineId,\n          state: entry.toState,\n          event: entry.eventType,\n        },\n        {\n          fromState: entry.fromState,\n          toState: entry.toState,\n          contextChanged:\n            JSON.stringify(entry.contextBefore) !== JSON.stringify(entry.contextAfter),\n        }\n      );\n    }\n  }\n\n  // ============================================================================\n  // REPLAY FUNCTIONALITY\n  // ============================================================================\n\n  public async replaySession(\n    sessionId: string,\n    _targetActor: unknown,\n    options: ReplayOptions = {}\n  ): Promise<void> {\n    const session = this.sessions.get(sessionId);\n    if (!session) {\n      throw new Error(`Session not found: ${sessionId}`);\n    }\n\n    const {\n      startFromEntry = 0,\n      endAtEntry = session.entries.length - 1,\n      stepMode = false,\n      delayMs = 100,\n      skipErrors = false,\n      onStateChange,\n      onError,\n    } = options;\n\n    componentLogger.info(\n      Component.MACHINE,\n      `Starting replay of session: ${sessionId}`,\n      {\n        component: Component.MACHINE,\n        machineId: sessionId,\n      },\n      {\n        totalEntries: session.entries.length,\n        startFrom: startFromEntry,\n        endAt: endAtEntry,\n      }\n    );\n\n    const entriesToReplay = session.entries.slice(startFromEntry, endAtEntry + 1);\n\n    for (let i = 0; i < entriesToReplay.length; i++) {\n      const entry = entriesToReplay[i];\n\n      try {\n        // For Praxis, replay is informational only\n        // The actual state machine doesn't receive the events\n        onStateChange?.(entry);\n\n        // Wait if not in step mode\n        if (!stepMode && delayMs > 0) {\n          await new Promise((resolve) => setTimeout(resolve, delayMs));\n        } else if (stepMode) {\n          // In step mode, wait for user input\n          await this.waitForStep();\n        }\n      } catch (error) {\n        if (skipErrors) {\n          componentLogger.warn(Component.MACHINE, `Replay error skipped: ${error}`, {\n            component: Component.MACHINE,\n            machineId: sessionId,\n          });\n          onError?.(entry, error as Error);\n        } else {\n          throw error;\n        }\n      }\n    }\n\n    componentLogger.info(Component.MACHINE, `Replay completed for session: ${sessionId}`);\n  }\n\n  private async waitForStep(): Promise<void> {\n    // This could be enhanced with a UI for stepping through\n    // For now, just a simple delay\n    return new Promise((resolve) => setTimeout(resolve, 1000));\n  }\n\n  // ============================================================================\n  // EXPORT/IMPORT FUNCTIONALITY\n  // ============================================================================\n\n  public exportSession(sessionId: string): string {\n    const session = this.sessions.get(sessionId);\n    if (!session) {\n      throw new Error(`Session not found: ${sessionId}`);\n    }\n\n    return JSON.stringify(session, null, 2);\n  }\n\n  public exportAllSessions(): string {\n    const allSessions = Object.fromEntries(this.sessions);\n    return JSON.stringify(allSessions, null, 2);\n  }\n\n  public importSession(sessionData: string): string {\n    try {\n      const session: TraceSession = JSON.parse(sessionData);\n\n      // Validate session structure\n      if (!session.id || !session.entries || !Array.isArray(session.entries)) {\n        throw new Error('Invalid session data format');\n      }\n\n      this.sessions.set(session.id, session);\n\n      componentLogger.info(\n        Component.MACHINE,\n        `Session imported: ${session.id}`,\n        {\n          component: Component.MACHINE,\n          machineId: session.id,\n        },\n        {\n          entriesCount: session.entries.length,\n          originalStartTime: session.startTime,\n        }\n      );\n\n      return session.id;\n    } catch (error) {\n      throw new Error(`Failed to import session: ${error}`);\n    }\n  }\n\n  // ============================================================================\n  // ANALYSIS FUNCTIONALITY\n  // ============================================================================\n\n  public analyzeSession(sessionId: string): {\n    summary: {\n      duration: number;\n      totalEvents: number;\n      uniqueStates: number;\n      errors: number;\n    };\n    eventFrequency: Record<string, number>;\n    stateTransitions: Record<string, string[]>;\n    performance: {\n      avgTransitionTime: number;\n      slowestTransitions: Array<{ from: string; to: string; event: string; duration: number }>;\n    };\n  } {\n    const session = this.sessions.get(sessionId);\n    if (!session) {\n      throw new Error(`Session not found: ${sessionId}`);\n    }\n\n    const entries = session.entries;\n    const { eventFrequency, stateTransitions, uniqueStates, transitions, errors } =\n      this.summarizeEntries(entries);\n\n    const avgTransitionTime =\n      transitions.length > 0\n        ? transitions.reduce((sum, t) => sum + t.duration, 0) / transitions.length\n        : 0;\n\n    const slowestTransitions = transitions.sort((a, b) => b.duration - a.duration).slice(0, 10);\n\n    return {\n      summary: {\n        duration: (session.endTime || Date.now()) - session.startTime,\n        totalEvents: entries.length,\n        uniqueStates: uniqueStates.size,\n        errors,\n      },\n      eventFrequency,\n      stateTransitions,\n      performance: {\n        avgTransitionTime,\n        slowestTransitions,\n      },\n    };\n  }\n\n  private summarizeEntries(entries: TraceEntry[]): {\n    eventFrequency: Record<string, number>;\n    stateTransitions: Record<string, string[]>;\n    uniqueStates: Set<string>;\n    transitions: Array<{ from: string; to: string; event: string; duration: number }>;\n    errors: number;\n  } {\n    const eventFrequency: Record<string, number> = {};\n    const stateTransitions: Record<string, string[]> = {};\n    const uniqueStates = new Set<string>();\n    const transitions: Array<{ from: string; to: string; event: string; duration: number }> = [];\n    let errors = 0;\n\n    entries.forEach((entry, index) => {\n      eventFrequency[entry.eventType] = (eventFrequency[entry.eventType] || 0) + 1;\n      uniqueStates.add(entry.fromState);\n      uniqueStates.add(entry.toState);\n\n      if (!stateTransitions[entry.fromState]) {\n        stateTransitions[entry.fromState] = [];\n      }\n      if (!stateTransitions[entry.fromState].includes(entry.toState)) {\n        stateTransitions[entry.fromState].push(entry.toState);\n      }\n\n      if (entry.error) {\n        errors++;\n      }\n\n      if (index > 0) {\n        const duration = entry.timestamp - entries[index - 1].timestamp;\n        transitions.push({\n          from: entry.fromState,\n          to: entry.toState,\n          event: entry.eventType,\n          duration,\n        });\n      }\n    });\n\n    return { eventFrequency, stateTransitions, uniqueStates, transitions, errors };\n  }\n\n  // ============================================================================\n  // UTILITY METHODS\n  // ============================================================================\n\n  public cleanup(): void {\n    // Cleanup all subscriptions\n    this.subscribedActors.forEach((cleanup) => cleanup());\n    this.subscribedActors.clear();\n\n    // Stop current session\n    this.stopCurrentSession();\n\n    componentLogger.info(Component.MACHINE, 'Trace Logger cleaned up');\n  }\n\n  public getStats(): {\n    sessionsCount: number;\n    totalEntries: number;\n    currentSessionEntries: number;\n    instrumentedActors: number;\n  } {\n    return {\n      sessionsCount: this.sessions.size,\n      totalEntries: Array.from(this.sessions.values()).reduce(\n        (sum, session) => sum + session.entries.length,\n        0\n      ),\n      currentSessionEntries: this.currentSession?.entries.length || 0,\n      instrumentedActors: this.subscribedActors.size,\n    };\n  }\n}\n\n// ============================================================================\n// GLOBAL TRACER INSTANCE\n// ============================================================================\n\n// Initialize traceLogger instance\nconst _traceLogger = TraceLogger.getInstance();\nexport const traceLogger = _traceLogger;\n\n// Backward compatibility type exports (for migration period)\n// Backward compatibility type exports (for migration period only)\nexport type FSMTraceEntry = TraceEntry;\nexport type FSMTraceSession = TraceSession;\nexport type FSMReplayOptions = ReplayOptions;\n\nexport type SessionAnalysis = ReturnType<TraceLogger['analyzeSession']>;\n\n// ============================================================================\n// CONVENIENCE FUNCTIONS\n// ============================================================================\n\nexport function instrumentActor(\n  actor: unknown,\n  component: Component,\n  machineId?: string\n): () => void {\n  return traceLogger.instrumentActor(actor, component, machineId);\n}\n\nexport function startTraceSession(description?: string): string {\n  return traceLogger.startNewSession(description);\n}\n\nexport function stopTraceSession(): void {\n  traceLogger.stopCurrentSession();\n}\n\nexport function exportCurrentTrace(): string | undefined {\n  const currentSession = traceLogger.getCurrentSession();\n  if (!currentSession) return undefined;\n\n  return traceLogger.exportSession(currentSession.id);\n}\n\nexport function analyzeCurrentTrace(): SessionAnalysis | undefined {\n  const currentSession = traceLogger.getCurrentSession();\n  if (!currentSession) return undefined;\n\n  return traceLogger.analyzeSession(currentSession.id);\n}\n", "/* eslint-disable max-lines */\n/**\n * Module: src/fsm/commands/traceCommands.ts\n * Owner: application\n * Reads: (document)\n * Writes: (document)\n * Receives: (document)\n * Emits: (document)\n * Prohibitions: Do not mutate ApplicationContext directly; Do not define new *Context types\n * Rationale: (document)\n *\n * LLM-GUARD:\n * - Follow ownership boundaries; route events to Router; do not add UI logic here\n */\n/**\n * FSM Trace Commands\n *\n * VS Code commands for interacting with the FSM tracing system:\n * - Show current trace status and statistics\n * - Export trace data for analysis\n * - Import trace data for replay\n * - Analyze trace sessions for performance insights\n * - Start/stop trace sessions\n */\n\nimport * as vscode from 'vscode';\nimport { traceLogger, analyzeCurrentTrace, exportCurrentTrace } from '../logging/TraceLogger.js';\nimport { componentLogger, Component } from '../logging/ComponentLogger.js';\n\nexport function registerTraceCommands(context: vscode.ExtensionContext): void {\n  // Show trace status\n  context.subscriptions.push(\n    vscode.commands.registerCommand('azureDevOpsInt.showFSMTraceStatus', async () => {\n      await showTraceStatus();\n    })\n  );\n\n  // Export current trace\n  context.subscriptions.push(\n    vscode.commands.registerCommand('azureDevOpsInt.exportFSMTrace', async () => {\n      await exportTrace();\n    })\n  );\n\n  // Import trace for analysis\n  context.subscriptions.push(\n    vscode.commands.registerCommand('azureDevOpsInt.importFSMTrace', async () => {\n      await importTrace();\n    })\n  );\n\n  // Analyze current trace\n  context.subscriptions.push(\n    vscode.commands.registerCommand('azureDevOpsInt.analyzeFSMTrace', async () => {\n      await analyzeTrace();\n    })\n  );\n\n  // Start new trace session\n  context.subscriptions.push(\n    vscode.commands.registerCommand('azureDevOpsInt.startFSMTraceSession', async () => {\n      await startTraceSession();\n    })\n  );\n\n  // Stop current trace session\n  context.subscriptions.push(\n    vscode.commands.registerCommand('azureDevOpsInt.stopFSMTraceSession', async () => {\n      await stopTraceSession();\n    })\n  );\n\n  // Show trace timeline\n  context.subscriptions.push(\n    vscode.commands.registerCommand('azureDevOpsInt.showFSMTraceTimeline', async () => {\n      await showTraceTimeline();\n    })\n  );\n\n  componentLogger.info(Component.MACHINE, 'Trace commands registered');\n}\n\nasync function showTraceStatus(): Promise<void> {\n  try {\n    const stats = traceLogger.getStats();\n    const currentSession = traceLogger.getCurrentSession();\n\n    const statusItems = [\n      `\uD83D\uDCCA **Trace Status**`,\n      ``,\n      `**Current Session:**`,\n      currentSession ? `- ID: \\`${currentSession.id}\\`` : `- No active session`,\n      currentSession ? `- Description: ${currentSession.description}` : ``,\n      currentSession ? `- Started: ${new Date(currentSession.startTime).toLocaleString()}` : ``,\n      currentSession ? `- Events: ${currentSession.entries.length}` : ``,\n      ``,\n      `**Statistics:**`,\n      `- Total Sessions: ${stats.sessionsCount}`,\n      `- Total Events: ${stats.totalEntries}`,\n      `- Instrumented Actors: ${stats.instrumentedActors}`,\n      ``,\n      `**Actions:**`,\n      `- Export current trace for analysis`,\n      `- Import trace file for replay`,\n      `- Analyze performance patterns`,\n      `- Start/stop trace sessions`,\n    ];\n\n    const panel = vscode.window.createWebviewPanel(\n      'traceStatus',\n      'Trace Status',\n      vscode.ViewColumn.One,\n      { enableScripts: false }\n    );\n\n    panel.webview.html = `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"UTF-8\">\n        <style>\n          body { \n            font-family: var(--vscode-font-family); \n            color: var(--vscode-foreground);\n            background: var(--vscode-editor-background);\n            padding: 20px;\n            line-height: 1.6;\n          }\n          code { \n            background: var(--vscode-textCodeBlock-background);\n            padding: 2px 4px;\n            border-radius: 3px;\n          }\n          pre {\n            background: var(--vscode-textCodeBlock-background);\n            padding: 10px;\n            border-radius: 3px;\n            overflow-x: auto;\n          }\n        </style>\n      </head>\n      <body>\n        ${statusItems\n          .map((item) => {\n            if (item.startsWith('- ')) {\n              return `<p style=\"margin-left: 20px;\">${item}</p>`;\n            } else if (item.startsWith('**') && item.endsWith('**')) {\n              return `<h3>${item.slice(2, -2)}</h3>`;\n            } else if (item.includes('`')) {\n              return `<p>${item.replace(/`([^`]+)`/g, '<code>$1</code>')}</p>`;\n            } else {\n              return item ? `<p>${item}</p>` : '<br>';\n            }\n          })\n          .join('')}\n      </body>\n      </html>\n    `;\n  } catch (error) {\n    vscode.window.showErrorMessage(`Failed to show trace status: ${error}`);\n    componentLogger.error(Component.MACHINE, 'Failed to show trace status', undefined, { error });\n  }\n}\n\nasync function exportTrace(): Promise<void> {\n  try {\n    const traceData = exportCurrentTrace();\n    if (!traceData) {\n      vscode.window.showWarningMessage('No active trace session to export');\n      return;\n    }\n\n    const uri = await vscode.window.showSaveDialog({\n      defaultUri: vscode.Uri.file(`fsm-trace-${Date.now()}.json`),\n      filters: {\n        'FSM Trace Files': ['json'],\n        'All Files': ['*'],\n      },\n    });\n\n    if (uri) {\n      await vscode.workspace.fs.writeFile(uri, Buffer.from(traceData, 'utf8'));\n      vscode.window.showInformationMessage(`Trace exported to: ${uri.fsPath}`);\n\n      // Offer to analyze the exported trace\n      const analyze = await vscode.window.showInformationMessage(\n        'Trace exported successfully. Would you like to analyze it now?',\n        'Yes',\n        'No'\n      );\n      if (analyze === 'Yes') {\n        await analyzeTrace();\n      }\n    }\n  } catch (error) {\n    vscode.window.showErrorMessage(`Failed to export trace: ${error}`);\n    componentLogger.error(Component.MACHINE, 'Failed to export trace', undefined, { error });\n  }\n}\n\nasync function importTrace(): Promise<void> {\n  try {\n    const uris = await vscode.window.showOpenDialog({\n      canSelectFiles: true,\n      canSelectMany: false,\n      filters: {\n        'FSM Trace Files': ['json'],\n        'All Files': ['*'],\n      },\n    });\n\n    if (uris && uris.length > 0) {\n      const content = await vscode.workspace.fs.readFile(uris[0]);\n      const traceData = Buffer.from(content).toString('utf8');\n\n      const sessionId = traceLogger.importSession(traceData);\n      vscode.window.showInformationMessage(`Trace imported: ${sessionId}`);\n\n      // Offer to analyze the imported trace\n      const analyze = await vscode.window.showInformationMessage(\n        'Trace imported successfully. Would you like to analyze it?',\n        'Yes',\n        'No'\n      );\n      if (analyze === 'Yes') {\n        // Analyze the imported session\n        const analysis = traceLogger.analyzeSession(sessionId);\n        await showAnalysisResults(analysis, sessionId);\n      }\n    }\n  } catch (error) {\n    vscode.window.showErrorMessage(`Failed to import trace: ${error}`);\n    componentLogger.error(Component.MACHINE, 'Failed to import trace', undefined, { error });\n  }\n}\n\nasync function analyzeTrace(): Promise<void> {\n  try {\n    const analysis = analyzeCurrentTrace();\n    if (!analysis) {\n      vscode.window.showWarningMessage('No active trace session to analyze');\n      return;\n    }\n\n    const currentSession = traceLogger.getCurrentSession();\n    await showAnalysisResults(analysis, currentSession?.id || 'current');\n  } catch (error) {\n    vscode.window.showErrorMessage(`Failed to analyze trace: ${error}`);\n    componentLogger.error(Component.MACHINE, 'Failed to analyze trace', undefined, { error });\n  }\n}\n\n// eslint-disable-next-line max-lines-per-function\nasync function showAnalysisResults(analysis: any, sessionId: string): Promise<void> {\n  const panel = vscode.window.createWebviewPanel(\n    'traceAnalysis',\n    `Trace Analysis - ${sessionId}`,\n    vscode.ViewColumn.One,\n    { enableScripts: false }\n  );\n\n  const durationMs = analysis.summary.duration;\n  const durationFormatted =\n    durationMs > 60000\n      ? `${Math.round(durationMs / 60000)} minutes`\n      : `${Math.round(durationMs / 1000)} seconds`;\n\n  panel.webview.html = `\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset=\"UTF-8\">\n      <style>\n        body { \n          font-family: var(--vscode-font-family); \n          color: var(--vscode-foreground);\n          background: var(--vscode-editor-background);\n          padding: 20px;\n          line-height: 1.6;\n        }\n        .metric { \n          background: var(--vscode-textCodeBlock-background);\n          padding: 10px;\n          margin: 10px 0;\n          border-radius: 5px;\n          display: inline-block;\n          min-width: 200px;\n        }\n        .metric-value { \n          font-size: 1.5em; \n          font-weight: bold; \n          color: var(--vscode-charts-blue);\n        }\n        .section {\n          margin: 20px 0;\n          padding: 10px;\n          border-left: 3px solid var(--vscode-charts-blue);\n          background: var(--vscode-editor-lineHighlightBackground);\n        }\n        .event-freq, .transitions {\n          background: var(--vscode-textCodeBlock-background);\n          padding: 10px;\n          border-radius: 3px;\n          margin: 10px 0;\n        }\n        .slow-transition {\n          color: var(--vscode-charts-red);\n          font-weight: bold;\n        }\n      </style>\n    </head>\n    <body>\n      <h1>\uD83D\uDD0D Trace Analysis</h1>\n      <p><strong>Session:</strong> <code>${sessionId}</code></p>\n      \n      <div class=\"section\">\n        <h2>\uD83D\uDCCA Summary</h2>\n        <div class=\"metric\">\n          <div>Duration</div>\n          <div class=\"metric-value\">${durationFormatted}</div>\n        </div>\n        <div class=\"metric\">\n          <div>Total Events</div>\n          <div class=\"metric-value\">${analysis.summary.totalEvents}</div>\n        </div>\n        <div class=\"metric\">\n          <div>Unique States</div>\n          <div class=\"metric-value\">${analysis.summary.uniqueStates}</div>\n        </div>\n        <div class=\"metric\">\n          <div>Errors</div>\n          <div class=\"metric-value\" style=\"color: ${analysis.summary.errors > 0 ? 'var(--vscode-charts-red)' : 'var(--vscode-charts-green)'}\">\n            ${analysis.summary.errors}\n          </div>\n        </div>\n      </div>\n\n      <div class=\"section\">\n        <h2>\uD83D\uDCC8 Event Frequency</h2>\n        <div class=\"event-freq\">\n          ${Object.entries(analysis.eventFrequency)\n            .sort(([, a], [, b]) => (b as number) - (a as number))\n            .map(([event, count]) => `<div>${event}: <strong>${count}</strong></div>`)\n            .join('')}\n        </div>\n      </div>\n\n      <div class=\"section\">\n        <h2>\uD83D\uDD04 State Transitions</h2>\n        <div class=\"transitions\">\n          ${Object.entries(analysis.stateTransitions)\n            .map(\n              ([from, toStates]) =>\n                `<div><strong>${from}</strong> \u2192 ${(toStates as string[]).join(', ')}</div>`\n            )\n            .join('')}\n        </div>\n      </div>\n\n      <div class=\"section\">\n        <h2>\u26A1 Performance</h2>\n        <div class=\"metric\">\n          <div>Avg Transition Time</div>\n          <div class=\"metric-value\">${Math.round(analysis.performance.avgTransitionTime)}ms</div>\n        </div>\n        \n        <h3>\uD83D\uDC0C Slowest Transitions</h3>\n        <div class=\"transitions\">\n          ${analysis.performance.slowestTransitions\n            .slice(0, 5)\n            .map(\n              (t: any) =>\n                `<div class=\"slow-transition\">${t.from} \u2192 ${t.to} (${t.event}): ${t.duration}ms</div>`\n            )\n            .join('')}\n        </div>\n      </div>\n\n      <div class=\"section\">\n        <h2>\uD83D\uDCA1 Insights</h2>\n        <ul>\n          ${analysis.summary.errors > 0 ? `<li>\u26A0\uFE0F Found ${analysis.summary.errors} errors - investigate error patterns</li>` : ''}\n          ${analysis.performance.avgTransitionTime > 100 ? `<li>\uD83D\uDC0C Average transition time is high (${Math.round(analysis.performance.avgTransitionTime)}ms) - check for performance bottlenecks</li>` : ''}\n          ${analysis.summary.uniqueStates > 20 ? `<li>\uD83D\uDD04 High number of unique states (${analysis.summary.uniqueStates}) - consider state machine simplification</li>` : ''}\n          ${Object.keys(analysis.eventFrequency).length > 10 ? `<li>\uD83D\uDCE2 Many event types (${Object.keys(analysis.eventFrequency).length}) - review event design</li>` : ''}\n          <li>\u2705 Use this data to optimize FSM performance and reliability</li>\n        </ul>\n      </div>\n    </body>\n    </html>\n  `;\n}\n\nasync function startTraceSession(): Promise<void> {\n  try {\n    const description = await vscode.window.showInputBox({\n      prompt: 'Enter a description for the new trace session',\n      value: 'Manual trace session',\n    });\n\n    if (description !== undefined) {\n      const sessionId = traceLogger.startNewSession(description);\n      vscode.window.showInformationMessage(`Started new trace session: ${sessionId}`);\n    }\n  } catch (error) {\n    vscode.window.showErrorMessage(`Failed to start trace session: ${error}`);\n    componentLogger.error(Component.MACHINE, 'Failed to start trace session', undefined, { error });\n  }\n}\n\nasync function stopTraceSession(): Promise<void> {\n  try {\n    const currentSession = traceLogger.getCurrentSession();\n    if (!currentSession) {\n      vscode.window.showWarningMessage('No active trace session to stop');\n      return;\n    }\n\n    traceLogger.stopCurrentSession();\n\n    const action = await vscode.window.showInformationMessage(\n      `Stopped trace session: ${currentSession.id}`,\n      'Analyze',\n      'Export',\n      'Close'\n    );\n\n    if (action === 'Analyze') {\n      await analyzeTrace();\n    } else if (action === 'Export') {\n      await exportTrace();\n    }\n  } catch (error) {\n    vscode.window.showErrorMessage(`Failed to stop trace session: ${error}`);\n    componentLogger.error(Component.MACHINE, 'Failed to stop trace session', undefined, { error });\n  }\n}\n\nasync function showTraceTimeline(): Promise<void> {\n  try {\n    const currentSession = traceLogger.getCurrentSession();\n    if (!currentSession) {\n      vscode.window.showWarningMessage('No active trace session');\n      return;\n    }\n\n    const panel = vscode.window.createWebviewPanel(\n      'traceTimeline',\n      `Trace Timeline - ${currentSession.id}`,\n      vscode.ViewColumn.One,\n      { enableScripts: true }\n    );\n\n    // Generate timeline HTML with the last 100 events\n    const recentEntries = currentSession.entries.slice(-100);\n    const timelineData = recentEntries.map((entry) => ({\n      timestamp: new Date(entry.timestamp).toLocaleTimeString(),\n      event: entry.eventType,\n      fromState: entry.fromState,\n      toState: entry.toState,\n      component: entry.component,\n      duration: entry.duration || 0,\n      hasError: !!entry.error,\n    }));\n\n    panel.webview.html = `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"UTF-8\">\n        <style>\n          body { \n            font-family: var(--vscode-font-family); \n            color: var(--vscode-foreground);\n            background: var(--vscode-editor-background);\n            padding: 20px;\n          }\n          .timeline-item {\n            padding: 10px;\n            margin: 5px 0;\n            border-left: 3px solid var(--vscode-charts-blue);\n            background: var(--vscode-editor-lineHighlightBackground);\n            border-radius: 3px;\n          }\n          .timeline-item.error {\n            border-color: var(--vscode-charts-red);\n            background: var(--vscode-inputValidation-errorBackground);\n          }\n          .timestamp {\n            font-size: 0.9em;\n            color: var(--vscode-descriptionForeground);\n          }\n          .event-type {\n            font-weight: bold;\n            color: var(--vscode-charts-blue);\n          }\n          .state-transition {\n            font-family: monospace;\n            background: var(--vscode-textCodeBlock-background);\n            padding: 2px 4px;\n            border-radius: 3px;\n          }\n        </style>\n      </head>\n      <body>\n        <h1>\u23F1\uFE0F Trace Timeline</h1>\n        <p><strong>Session:</strong> <code>${currentSession.id}</code></p>\n        <p><strong>Showing:</strong> Last ${recentEntries.length} events</p>\n        <hr>\n        \n        ${timelineData\n          .map(\n            (item) => `\n          <div class=\"timeline-item ${item.hasError ? 'error' : ''}\">\n            <div class=\"timestamp\">${item.timestamp}</div>\n            <div>\n              <span class=\"event-type\">${item.event}</span>\n              <span style=\"margin-left: 10px; color: var(--vscode-descriptionForeground);\">[${item.component}]</span>\n            </div>\n            <div class=\"state-transition\">${item.fromState} \u2192 ${item.toState}</div>\n          </div>\n        `\n          )\n          .join('')}\n      </body>\n      </html>\n    `;\n  } catch (error) {\n    vscode.window.showErrorMessage(`Failed to show trace timeline: ${error}`);\n    componentLogger.error(Component.MACHINE, 'Failed to show trace timeline', undefined, { error });\n  }\n}\n", "/* eslint-disable max-lines */\n/**\n * Module: src/fsm/commands/quickDebugCommands.ts\n * Owner: application\n * Reads: (document)\n * Writes: (document)\n * Receives: (document)\n * Emits: (document)\n * Prohibitions: Do not mutate ApplicationContext directly; Do not define new *Context types\n * Rationale: (document)\n *\n * LLM-GUARD:\n * - Follow ownership boundaries; route events to Router; do not add UI logic here\n */\n/**\n * Quick Debug Commands\n *\n * Instant access to debugging information without having to hunt through menus.\n * These commands are designed to be used when features are broken and you need\n * immediate visibility into what's happening.\n */\n\nimport * as vscode from 'vscode';\nimport { componentLogger, Component } from '../logging/ComponentLogger.js';\nimport {\n  traceLogger,\n  analyzeCurrentTrace,\n  exportCurrentTrace as _exportCurrentTrace,\n} from '../logging/TraceLogger.js';\n\nexport function registerQuickDebugCommands(context: vscode.ExtensionContext): void {\n  // INSTANT DEBUG PANEL - Everything you need in one command\n  context.subscriptions.push(\n    vscode.commands.registerCommand('azureDevOpsInt.quickDebug', async () => {\n      await showInstantDebugPanel();\n    })\n  );\n\n  // AUTO-OPEN FSM LOGS - Show the output channel immediately\n  context.subscriptions.push(\n    vscode.commands.registerCommand('azureDevOpsInt.showFSMLogs', async () => {\n      showFSMLogsNow();\n    })\n  );\n\n  // BROKEN FEATURE TRIAGE - Quick assessment of current state\n  context.subscriptions.push(\n    vscode.commands.registerCommand('azureDevOpsInt.triageBrokenFeature', async () => {\n      await triageBrokenFeature();\n    })\n  );\n\n  // SIMULATE CONNECTION LOAD - Test reactivity\n  context.subscriptions.push(\n    vscode.commands.registerCommand('azureDevOpsInt.debug.simulateConnectionLoad', async () => {\n      try {\n        // Dynamic import to avoid circular dependency\n        const { dispatchApplicationEvent } = await import('../../activation.js');\n        const fakeConnection = {\n          id: 'simulated-' + Date.now(),\n          organization: 'SimulatedOrg',\n          project: 'SimulatedProject',\n          label: 'Simulated Connection ' + new Date().toLocaleTimeString(),\n          authMethod: 'pat',\n        } as any;\n\n        vscode.window.showInformationMessage(`Simulating connection load: ${fakeConnection.label}`);\n        dispatchApplicationEvent({\n          type: 'CONNECTIONS_LOADED',\n          payload: {\n            connections: [fakeConnection],\n            activeId: fakeConnection.id,\n          },\n        });\n      } catch (error) {\n        vscode.window.showErrorMessage(`Simulation failed: ${error}`);\n      }\n    })\n  );\n\n  componentLogger.info(Component.MACHINE, 'Quick debug commands registered');\n}\n\n// eslint-disable-next-line max-lines-per-function\nasync function showInstantDebugPanel(): Promise<void> {\n  try {\n    // Open FSM logs immediately\n    showFSMLogsNow();\n\n    // Get current status\n    const stats = traceLogger.getStats();\n    const currentSession = traceLogger.getCurrentSession();\n    const analysis = analyzeCurrentTrace();\n\n    // Create instant debug panel\n    const panel = vscode.window.createWebviewPanel(\n      'instantDebug',\n      '\uD83D\uDEA8 Instant Debug Panel',\n      vscode.ViewColumn.Beside, // Open beside current editor\n      { enableScripts: false }\n    );\n\n    const recentErrors = componentLogger\n      .getLogBuffer()\n      .filter((entry: any) => entry.level >= 2) // WARN and ERROR\n      .slice(-10)\n      .reverse();\n\n    panel.webview.html = `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"UTF-8\">\n        <style>\n          body { \n            font-family: var(--vscode-font-family); \n            color: var(--vscode-foreground);\n            background: var(--vscode-editor-background);\n            padding: 20px;\n            line-height: 1.6;\n          }\n          .status-ok { color: var(--vscode-charts-green); }\n          .status-warn { color: var(--vscode-charts-orange); }\n          .status-error { color: var(--vscode-charts-red); }\n          .metric {\n            background: var(--vscode-textCodeBlock-background);\n            padding: 10px;\n            margin: 10px 0;\n            border-radius: 5px;\n            border-left: 3px solid var(--vscode-charts-blue);\n          }\n          .error-item {\n            background: var(--vscode-inputValidation-errorBackground);\n            padding: 8px;\n            margin: 5px 0;\n            border-radius: 3px;\n            border-left: 3px solid var(--vscode-charts-red);\n          }\n          .command-button {\n            background: var(--vscode-button-background);\n            color: var(--vscode-button-foreground);\n            padding: 8px 16px;\n            border: none;\n            border-radius: 3px;\n            margin: 5px;\n            cursor: pointer;\n          }\n          .section {\n            margin: 20px 0;\n            padding: 15px;\n            background: var(--vscode-editor-lineHighlightBackground);\n            border-radius: 5px;\n          }\n        </style>\n      </head>\n      <body>\n        <h1>\uD83D\uDEA8 Instant Debug Panel</h1>\n        <p><strong>Generated:</strong> ${new Date().toLocaleString()}</p>\n        \n        <div class=\"section\">\n          <h2>\uD83D\uDCCA Current Status</h2>\n          <div class=\"metric\">\n            <strong>FSM Tracing:</strong> \n            <span class=\"${currentSession ? 'status-ok' : 'status-error'}\">\n              ${currentSession ? `Active (${currentSession.entries.length} events)` : 'Inactive'}\n            </span>\n          </div>\n          <div class=\"metric\">\n            <strong>Instrumented Actors:</strong> \n            <span class=\"${stats.instrumentedActors > 0 ? 'status-ok' : 'status-warn'}\">\n              ${stats.instrumentedActors}\n            </span>\n          </div>\n          <div class=\"metric\">\n            <strong>Recent Errors:</strong> \n            <span class=\"${recentErrors.length === 0 ? 'status-ok' : 'status-error'}\">\n              ${recentErrors.length}\n            </span>\n          </div>\n          ${\n            analysis\n              ? `\n          <div class=\"metric\">\n            <strong>FSM Performance:</strong> \n            <span class=\"${analysis.performance.avgTransitionTime < 100 ? 'status-ok' : 'status-warn'}\">\n              ${Math.round(analysis.performance.avgTransitionTime)}ms avg\n            </span>\n          </div>\n          `\n              : ''\n          }\n        </div>\n\n        ${\n          recentErrors.length > 0\n            ? `\n        <div class=\"section\">\n          <h2>\uD83D\uDD34 Recent Errors</h2>\n          ${recentErrors\n            .map(\n              (error: any) => `\n            <div class=\"error-item\">\n              <strong>${new Date(error.timestamp).toLocaleTimeString()}</strong> \n              [${error.component}] ${error.message}\n              ${error.data ? `<br><small>${JSON.stringify(error.data, null, 2)}</small>` : ''}\n            </div>\n          `\n            )\n            .join('')}\n        </div>\n        `\n            : ''\n        }\n\n        <div class=\"section\">\n          <h2>\uD83D\uDD27 Quick Actions</h2>\n          <p>Use Command Palette (Ctrl+Shift+P) to run:</p>\n          <ul>\n            <li><code>Azure DevOps Int (Debug): Show FSM Logs</code> - View detailed logs</li>\n            <li><code>Azure DevOps Int (Debug): Export Trace</code> - Save current trace</li>\n            <li><code>Azure DevOps Int (Debug): Analyze Trace</code> - Performance analysis</li>\n            <li><code>Azure DevOps Int (Debug): Show Trace Timeline</code> - Event timeline</li>\n          </ul>\n        </div>\n\n        <div class=\"section\">\n          <h2>\uD83D\uDCCB System Info</h2>\n          <div class=\"metric\">\n            <strong>Total Trace Sessions:</strong> ${stats.sessionsCount}<br>\n            <strong>Total Trace Events:</strong> ${stats.totalEntries}<br>\n            <strong>Current Session Events:</strong> ${stats.currentSessionEntries}\n          </div>\n        </div>\n\n        <div class=\"section\">\n          <h2>\uD83D\uDCA1 Debugging Tips</h2>\n          <ul>\n            <li>Check the <strong>Praxis Output Channel</strong> for real-time logs</li>\n            <li>Look for <code>\uD83D\uDD34</code> error symbols in the console output</li>\n            <li>Export traces when issues occur for later analysis</li>\n            <li>Use timeline view to see event sequences</li>\n          </ul>\n        </div>\n      </body>\n      </html>\n    `;\n\n    vscode.window.showInformationMessage(\n      '\uD83D\uDEA8 Debug panel opened! Check the Praxis Output Channel for live logs.',\n      'OK'\n    );\n  } catch (error) {\n    vscode.window.showErrorMessage(`Failed to show debug panel: ${error}`);\n  }\n}\n\nfunction showFSMLogsNow(): void {\n  try {\n    // Show output channel immediately\n    componentLogger.showOutputChannel();\n\n    // Also show developer console logs\n    vscode.window\n      .showInformationMessage(\n        '\uD83D\uDCFA Output Channel opened. Also check Developer Console (Help > Toggle Developer Tools) for console.log output.',\n        'Open Developer Tools'\n      )\n      .then((selection) => {\n        if (selection === 'Open Developer Tools') {\n          vscode.commands.executeCommand('workbench.action.toggleDevTools');\n        }\n      });\n\n    // Log a marker to help identify current session\n    componentLogger.info(\n      Component.MACHINE,\n      '\uD83D\uDD0D MANUAL DEBUG SESSION STARTED',\n      {\n        component: Component.MACHINE,\n        event: 'DEBUG_SESSION_START',\n      },\n      {\n        timestamp: new Date().toISOString(),\n        reason: 'User requested debug logs',\n      }\n    );\n\n    componentLogger.info(Component.APPLICATION, 'Output Channel opened - logs are now visible');\n  } catch (error) {\n    // Failed to show logs - display error message\n    vscode.window.showErrorMessage(`Failed to show logs: ${error}`);\n  }\n}\n\nasync function triageBrokenFeature(): Promise<void> {\n  try {\n    const featureName = await vscode.window.showInputBox({\n      prompt: 'What feature is broken? (e.g., \"sign-in button\", \"query sync\", \"timer\")',\n      placeHolder: 'Enter feature name...',\n    });\n\n    if (!featureName) return;\n\n    // Start a targeted debug session\n    const sessionId = traceLogger.startNewSession(`Triage: ${featureName}`);\n\n    // Show logs immediately\n    showFSMLogsNow();\n\n    // Log the triage start\n    componentLogger.info(\n      Component.MACHINE,\n      `\uD83D\uDD0D FEATURE TRIAGE STARTED: ${featureName}`,\n      {\n        component: Component.MACHINE,\n        event: 'TRIAGE_START',\n      },\n      {\n        feature: featureName,\n        sessionId: sessionId,\n        timestamp: new Date().toISOString(),\n      }\n    );\n\n    // Show instructions\n    const panel = vscode.window.createWebviewPanel(\n      'featureTriage',\n      `\uD83D\uDD0D Triaging: ${featureName}`,\n      vscode.ViewColumn.Beside,\n      { enableScripts: false }\n    );\n\n    panel.webview.html = `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"UTF-8\">\n        <style>\n          body { \n            font-family: var(--vscode-font-family); \n            color: var(--vscode-foreground);\n            background: var(--vscode-editor-background);\n            padding: 20px;\n            line-height: 1.6;\n          }\n          .step {\n            background: var(--vscode-textCodeBlock-background);\n            padding: 15px;\n            margin: 10px 0;\n            border-radius: 5px;\n            border-left: 3px solid var(--vscode-charts-blue);\n          }\n          .highlight {\n            background: var(--vscode-editor-selectionBackground);\n            padding: 2px 4px;\n            border-radius: 3px;\n          }\n        </style>\n      </head>\n      <body>\n        <h1>\uD83D\uDD0D Feature Triage: ${featureName}</h1>\n        <p><strong>Debug session started:</strong> ${sessionId}</p>\n        \n        <h2>\uD83D\uDCCB Triage Steps</h2>\n        \n        <div class=\"step\">\n          <h3>1. Reproduce the Issue</h3>\n          <p>Try to use the <span class=\"highlight\">${featureName}</span> feature now.</p>\n          <p>The Output Channel is open and logging all activity.</p>\n        </div>\n        \n        <div class=\"step\">\n          <h3>2. Watch for Errors</h3>\n          <p>Look for <code>\uD83D\uDD34</code> error messages in the Output Channel.</p>\n          <p>Also check the Developer Console (Help > Toggle Developer Tools).</p>\n        </div>\n        \n        <div class=\"step\">\n          <h3>3. Capture the Trace</h3>\n          <p>After reproducing the issue, run:</p>\n          <p><code>Azure DevOps Int (Debug): Export Trace</code></p>\n        </div>\n        \n        <div class=\"step\">\n          <h3>4. Analyze Results</h3>\n          <p>Run <code>Azure DevOps Int (Debug): Analyze Trace</code> to see patterns.</p>\n          <p>Check the timeline with <code>Show Trace Timeline</code>.</p>\n        </div>\n        \n        <h2>\uD83C\uDFAF What to Look For</h2>\n        <ul>\n          <li><strong>Missing Events:</strong> Expected events that don't appear</li>\n          <li><strong>Error Messages:</strong> Red error logs with stack traces</li>\n          <li><strong>State Transitions:</strong> Application getting stuck in wrong states</li>\n          <li><strong>Message Flow:</strong> Webview \u2194 Extension communication issues</li>\n        </ul>\n        \n        <p><strong>Pro tip:</strong> This triage session is being traced. Export it when done!</p>\n      </body>\n      </html>\n    `;\n\n    vscode.window.showInformationMessage(\n      `\uD83D\uDD0D Triage started for \"${featureName}\". Try to reproduce the issue now - everything is being logged!`,\n      'OK'\n    );\n  } catch (error) {\n    vscode.window.showErrorMessage(`Failed to start feature triage: ${error}`);\n  }\n}\n", "import {\n  ReactiveLogicEngine,\n  createReactiveEngine\n} from \"../chunk-LE2ZJYFC.js\";\nimport \"../chunk-VOMLVI6V.js\";\nimport \"../chunk-QGM4M3NI.js\";\n\n// src/integrations/svelte.ts\nfunction createPraxisStore(engine) {\n  let currentState = engine.getState();\n  const subscribers = /* @__PURE__ */ new Set();\n  const notify = () => {\n    currentState = engine.getState();\n    subscribers.forEach((sub) => sub(currentState));\n  };\n  return {\n    subscribe(run) {\n      subscribers.add(run);\n      run(currentState);\n      return () => {\n        subscribers.delete(run);\n      };\n    },\n    dispatch(events) {\n      engine.step(events);\n      notify();\n    }\n  };\n}\nfunction createContextStore(engine) {\n  let currentContext = engine.getContext();\n  const subscribers = /* @__PURE__ */ new Set();\n  const notify = () => {\n    currentContext = engine.getContext();\n    subscribers.forEach((sub) => sub(currentContext));\n  };\n  return {\n    subscribe(run) {\n      subscribers.add(run);\n      run(currentContext);\n      return () => {\n        subscribers.delete(run);\n      };\n    },\n    dispatch(events) {\n      engine.step(events);\n      notify();\n    }\n  };\n}\nfunction createDerivedStore(engine, selector) {\n  let currentValue = selector(engine.getContext());\n  const subscribers = /* @__PURE__ */ new Set();\n  const notify = () => {\n    const newValue = selector(engine.getContext());\n    if (newValue !== currentValue) {\n      currentValue = newValue;\n      subscribers.forEach((sub) => sub(currentValue));\n    }\n  };\n  return {\n    subscribe(run) {\n      subscribers.add(run);\n      run(currentValue);\n      return () => {\n        subscribers.delete(run);\n      };\n    },\n    dispatch(events) {\n      engine.step(events);\n      notify();\n    }\n  };\n}\nfunction usePraxisEngine(engine, options = {}) {\n  const { enableHistory = false, maxHistorySize = 50 } = options;\n  let currentState = engine.getState();\n  let snapshots = [];\n  let historyIndex = -1;\n  if (enableHistory) {\n    snapshots.push({\n      timestamp: Date.now(),\n      state: currentState,\n      events: []\n    });\n    historyIndex = 0;\n  }\n  const dispatch = (events) => {\n    if (enableHistory && historyIndex < snapshots.length - 1) {\n      snapshots = snapshots.slice(0, historyIndex + 1);\n    }\n    engine.step(events);\n    currentState = engine.getState();\n    if (enableHistory) {\n      snapshots.push({\n        timestamp: Date.now(),\n        state: currentState,\n        events\n      });\n      if (snapshots.length > maxHistorySize) {\n        snapshots.shift();\n      } else {\n        historyIndex++;\n      }\n    }\n  };\n  const goToSnapshot = (index) => {\n    if (!enableHistory) {\n      console.warn(\"History is not enabled for this engine\");\n      return;\n    }\n    if (index < 0 || index >= snapshots.length) {\n      console.warn(`Invalid snapshot index: ${index}`);\n      return;\n    }\n    historyIndex = index;\n    currentState = snapshots[index].state;\n  };\n  const undo = () => {\n    if (historyIndex > 0) {\n      goToSnapshot(historyIndex - 1);\n    }\n  };\n  const redo = () => {\n    if (historyIndex < snapshots.length - 1) {\n      goToSnapshot(historyIndex + 1);\n    }\n  };\n  return {\n    get state() {\n      return currentState;\n    },\n    get context() {\n      return currentState.context;\n    },\n    get facts() {\n      return currentState.facts;\n    },\n    dispatch,\n    get snapshots() {\n      return snapshots;\n    },\n    goToSnapshot,\n    undo,\n    redo,\n    get canUndo() {\n      return enableHistory && historyIndex > 0;\n    },\n    get canRedo() {\n      return enableHistory && historyIndex < snapshots.length - 1;\n    },\n    get historyIndex() {\n      return historyIndex;\n    }\n  };\n}\nfunction usePraxisContext(engine, selector) {\n  let currentValue = selector(engine.getContext());\n  return currentValue;\n}\nfunction usePraxisSubscription(engine, callback) {\n  const store = createPraxisStore(engine);\n  const unsubscribe = store.subscribe(callback);\n  return unsubscribe;\n}\nvar HistoryStateManager = class {\n  history = [];\n  currentIndex = -1;\n  maxSize;\n  idCounter = 0;\n  constructor(maxSize = 50) {\n    this.maxSize = maxSize;\n  }\n  /**\n   * Record a new history entry\n   */\n  record(state, events, label) {\n    if (this.currentIndex < this.history.length - 1) {\n      this.history = this.history.slice(0, this.currentIndex + 1);\n    }\n    this.history.push({\n      id: `history-${++this.idCounter}`,\n      timestamp: Date.now(),\n      state,\n      events,\n      label\n    });\n    if (this.history.length > this.maxSize) {\n      this.history.shift();\n    } else {\n      this.currentIndex++;\n    }\n  }\n  /**\n   * Navigate to a specific history entry\n   */\n  goTo(index) {\n    if (index < 0 || index >= this.history.length) {\n      return null;\n    }\n    this.currentIndex = index;\n    return this.history[index];\n  }\n  /**\n   * Go back to previous state\n   */\n  back() {\n    if (!this.canGoBack()) {\n      return null;\n    }\n    return this.goTo(this.currentIndex - 1);\n  }\n  /**\n   * Go forward to next state\n   */\n  forward() {\n    if (!this.canGoForward()) {\n      return null;\n    }\n    return this.goTo(this.currentIndex + 1);\n  }\n  /**\n   * Check if can go back\n   */\n  canGoBack() {\n    return this.currentIndex > 0;\n  }\n  /**\n   * Check if can go forward\n   */\n  canGoForward() {\n    return this.currentIndex < this.history.length - 1;\n  }\n  /**\n   * Get current history entry\n   */\n  current() {\n    if (this.currentIndex < 0 || this.currentIndex >= this.history.length) {\n      return null;\n    }\n    return this.history[this.currentIndex];\n  }\n  /**\n   * Get all history entries\n   */\n  getHistory() {\n    return [...this.history];\n  }\n  /**\n   * Get current index in history\n   */\n  getCurrentIndex() {\n    return this.currentIndex;\n  }\n  /**\n   * Clear all history\n   */\n  clear() {\n    this.history = [];\n    this.currentIndex = -1;\n  }\n};\nfunction createHistoryEngine(engine, options = {}) {\n  const history = new HistoryStateManager(options.maxHistorySize);\n  history.record(engine.getState(), [], options.initialLabel || \"Initial\");\n  const dispatch = (events, label) => {\n    engine.step(events);\n    history.record(engine.getState(), events, label);\n  };\n  const undo = () => {\n    const entry = history.back();\n    if (entry) {\n      return true;\n    }\n    return false;\n  };\n  const redo = () => {\n    const entry = history.forward();\n    if (entry) {\n      return true;\n    }\n    return false;\n  };\n  return {\n    engine,\n    dispatch,\n    undo,\n    redo,\n    canUndo: () => history.canGoBack(),\n    canRedo: () => history.canGoForward(),\n    getHistory: () => history.getHistory(),\n    goToHistory: (index) => history.goTo(index) !== null,\n    clearHistory: () => history.clear()\n  };\n}\nexport {\n  HistoryStateManager,\n  ReactiveLogicEngine,\n  createContextStore,\n  createDerivedStore,\n  createHistoryEngine,\n  createPraxisStore,\n  createReactiveEngine,\n  usePraxisContext,\n  usePraxisEngine,\n  usePraxisSubscription\n};\n", "/**\n * Work Item Timer Feature\n *\n * Event-sourced timer logic for tracking time on work items.\n * Follows the \"Granular & Event-Sourced\" architectural principle.\n */\n\nimport { defineFact, defineEvent, defineRule, findEvent } from '@plures/praxis';\nimport type { ApplicationEngineContext } from '../engine.js';\nimport { ActivateEvent } from '../facts.js';\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport type TimerActionType = 'start' | 'pause' | 'stop';\n\nexport interface TimerEntry {\n  timestamp: number; // UTC Seconds\n  type: TimerActionType;\n  workItemId: number;\n}\n\nexport interface TimerStatus {\n  isRunning: boolean;\n  activeWorkItemId?: number;\n  currentStartTimestamp?: number;\n  accumulatedDuration: number;\n}\n\n// ============================================================================\n// Facts (State)\n// ============================================================================\n\n/**\n * The history of all timer actions.\n * This is the source of truth for the timer feature.\n */\nexport const TimerHistoryFact = defineFact<'TimerHistory', { entries: TimerEntry[] }>(\n  'TimerHistory'\n);\n\n// ============================================================================\n// Events (Triggers)\n// ============================================================================\n\n/**\n * Start the timer for a specific work item.\n */\nexport const StartTimerEvent = defineEvent<'StartTimer', { workItemId: number; timestamp: number }>(\n  'StartTimer'\n);\n\n/**\n * Pause the currently running timer.\n */\nexport const PauseTimerEvent = defineEvent<'PauseTimer', { workItemId: number; timestamp: number }>(\n  'PauseTimer'\n);\n\n/**\n * Stop the timer (finish working).\n */\nexport const StopTimerEvent = defineEvent<'StopTimer', { workItemId: number; timestamp: number }>(\n  'StopTimer'\n);\n\n/**\n * Request to load timer history from persistence.\n * Emitted by the logic engine when it needs the data.\n */\nexport const RequestTimerHistoryEvent = defineEvent<'RequestTimerHistory', void>(\n  'RequestTimerHistory'\n);\n\n/**\n * Timer history loaded from persistence.\n * Emitted by the persistence actor in response to RequestTimerHistoryEvent.\n */\nexport const TimerHistoryLoadedEvent = defineEvent<'TimerHistoryLoaded', { entries: TimerEntry[] }>(\n  'TimerHistoryLoaded'\n);\n\n/**\n * Request to save timer history to persistence.\n * Emitted by the logic engine when state changes.\n */\nexport const PersistTimerHistoryEvent = defineEvent<\n  'PersistTimerHistory',\n  { entries: TimerEntry[] }\n>('PersistTimerHistory');\n\n/**\n * Update the timer status display (UI/Status Bar).\n * Emitted whenever the timer state changes.\n */\nexport const UpdateTimerStatusEvent = defineEvent<'UpdateTimerStatus', TimerStatus>(\n  'UpdateTimerStatus'\n);\n\n// ============================================================================\n// Helpers\n// ============================================================================\n\n/**\n * Calculate the current status of the timer from history.\n */\nfunction calculateTimerStatus(entries: TimerEntry[]): TimerStatus {\n  let accumulatedDuration = 0;\n  let currentStartTimestamp: number | undefined;\n  let activeWorkItemId: number | undefined;\n  let isRunning = false;\n\n  // Sort by timestamp just in case\n  const sorted = [...entries].sort((a, b) => a.timestamp - b.timestamp);\n\n  for (let i = 0; i < sorted.length; i++) {\n    const entry = sorted[i];\n    if (entry.type === 'start') {\n      currentStartTimestamp = entry.timestamp;\n      activeWorkItemId = entry.workItemId;\n      isRunning = true;\n    } else if (entry.type === 'pause' || entry.type === 'stop') {\n      if (currentStartTimestamp !== undefined) {\n        accumulatedDuration += entry.timestamp - currentStartTimestamp;\n        currentStartTimestamp = undefined;\n      }\n      isRunning = false;\n      if (entry.type === 'stop') {\n        activeWorkItemId = undefined;\n      }\n    }\n  }\n\n  return {\n    isRunning,\n    activeWorkItemId,\n    currentStartTimestamp,\n    accumulatedDuration,\n  };\n}\n\n// ============================================================================\n// Rules (Logic)\n// ============================================================================\n\n/**\n * Initialize Timer Rule\n * When the application activates, request the timer history.\n */\nexport const InitializeTimerRule = defineRule<ApplicationEngineContext>({\n  id: 'timer.initialize',\n  description: 'Request timer history on activation',\n  meta: {\n    triggers: ['ACTIVATE'],\n  },\n  impl: (_state, events) => {\n    if (findEvent(events, ActivateEvent)) {\n      return [RequestTimerHistoryEvent.create()];\n    }\n    return [];\n  },\n});\n\n/**\n * Timer History Loaded Rule\n * When history is loaded, update the state and notify UI.\n */\nexport const TimerHistoryLoadedRule = defineRule<ApplicationEngineContext>({\n  id: 'timer.loaded',\n  description: 'Update state with loaded history',\n  meta: {\n    triggers: ['TimerHistoryLoaded'],\n  },\n  impl: (state, events) => {\n    const event = findEvent(events, TimerHistoryLoadedEvent);\n    if (!event) return [];\n\n    state.context.timerHistory.entries = event.payload.entries;\n\n    // Notify UI of initial state\n    const status = calculateTimerStatus(state.context.timerHistory.entries);\n    return [UpdateTimerStatusEvent.create(status)];\n  },\n});\n\n/**\n * Start Timer Rule\n * Appends a 'start' entry if the timer is not already running for this work item.\n */\nexport const StartTimerRule = defineRule<ApplicationEngineContext>({\n  id: 'timer.start',\n  description: 'Start the timer for a work item',\n  meta: {\n    triggers: ['StartTimer'],\n  },\n  impl: (state, events) => {\n    const event = findEvent(events, StartTimerEvent);\n    if (!event) return [];\n\n    const { workItemId, timestamp } = event.payload;\n    \n    // Validation: Work item must exist in loaded work items\n    const workItemExists = state.context.workItems.some(wi => wi.id === workItemId);\n    if (!workItemExists) {\n      // Do not start timer for invalid/non-existent work item\n      return [];\n    }\n    \n    const history = state.context.timerHistory.entries;\n    const lastEntry = history[history.length - 1];\n\n    // Validation: Can only start if stopped or paused (or empty)\n    if (lastEntry && lastEntry.type === 'start') {\n      return [];\n    }\n\n    const newEntry: TimerEntry = {\n      type: 'start',\n      timestamp,\n      workItemId,\n    };\n\n    state.context.timerHistory.entries.push(newEntry);\n\n    // Side Effects: Persist and Update UI\n    const status = calculateTimerStatus(state.context.timerHistory.entries);\n    return [\n      PersistTimerHistoryEvent.create({ entries: state.context.timerHistory.entries }),\n      UpdateTimerStatusEvent.create(status),\n    ];\n  },\n});\n\n/**\n * Pause Timer Rule\n * Appends a 'pause' entry if the timer is currently running.\n */\nexport const PauseTimerRule = defineRule<ApplicationEngineContext>({\n  id: 'timer.pause',\n  description: 'Pause the timer',\n  meta: {\n    triggers: ['PauseTimer'],\n  },\n  impl: (state, events) => {\n    const event = findEvent(events, PauseTimerEvent);\n    if (!event) return [];\n\n    const { workItemId, timestamp } = event.payload;\n    const history = state.context.timerHistory.entries;\n    const lastEntry = history[history.length - 1];\n\n    // Validation: Can only pause if currently running\n    if (!lastEntry || lastEntry.type !== 'start') {\n      return [];\n    }\n\n    const newEntry: TimerEntry = {\n      type: 'pause',\n      timestamp,\n      workItemId,\n    };\n\n    state.context.timerHistory.entries.push(newEntry);\n\n    // Side Effects: Persist and Update UI\n    const status = calculateTimerStatus(state.context.timerHistory.entries);\n    return [\n      PersistTimerHistoryEvent.create({ entries: state.context.timerHistory.entries }),\n      UpdateTimerStatusEvent.create(status),\n    ];\n  },\n});\n\n/**\n * Stop Timer Rule\n * Appends a 'stop' entry if the timer is running or paused.\n */\nexport const StopTimerRule = defineRule<ApplicationEngineContext>({\n  id: 'timer.stop',\n  description: 'Stop the timer',\n  meta: {\n    triggers: ['StopTimer'],\n  },\n  impl: (state, events) => {\n    const event = findEvent(events, StopTimerEvent);\n    if (!event) return [];\n\n    const { workItemId, timestamp } = event.payload;\n    const history = state.context.timerHistory.entries;\n    const lastEntry = history[history.length - 1];\n\n    // Validation: Can stop if running or paused\n    if (!lastEntry || lastEntry.type === 'stop') {\n      return [];\n    }\n\n    const newEntry: TimerEntry = {\n      type: 'stop',\n      timestamp,\n      workItemId,\n    };\n\n    state.context.timerHistory.entries.push(newEntry);\n\n    // Side Effects: Persist and Update UI\n    const status = calculateTimerStatus(state.context.timerHistory.entries);\n    return [\n      PersistTimerHistoryEvent.create({ entries: state.context.timerHistory.entries }),\n      UpdateTimerStatusEvent.create(status),\n    ];\n  },\n});\n\nexport const timerRules = [\n  InitializeTimerRule,\n  TimerHistoryLoadedRule,\n  StartTimerRule,\n  PauseTimerRule,\n  StopTimerRule,\n];\n", "/**\n * Praxis Application Facts and Events\n *\n * Defines the facts (state) and events for the Application Orchestrator.\n */\n\nimport { defineFact, defineEvent } from '@plures/praxis';\nimport type { ProjectConnection } from '../connection/types.js';\nimport type { ViewMode, WorkItem, DeviceCodeSession, AuthCodeFlowSession, PendingWorkItems } from './types.js';\n\nimport { StartTimerEvent, PauseTimerEvent, StopTimerEvent } from './features/timer.js';\n\n// Re-export timer events\nexport { StartTimerEvent, PauseTimerEvent, StopTimerEvent };\n\n// ============================================================================\n// Application State Facts\n// ============================================================================\n\n/**\n * Application state fact\n */\nexport const ApplicationStateFact = defineFact<\n  'ApplicationState',\n  'inactive' | 'activating' | 'active' | 'activation_error' | 'deactivating'\n>('ApplicationState');\n\n/**\n * Application activated fact\n */\nexport const IsActivatedFact = defineFact<'IsActivated', boolean>('IsActivated');\n\n/**\n * Application deactivating fact\n */\nexport const IsDeactivatingFact = defineFact<'IsDeactivating', boolean>('IsDeactivating');\n\n/**\n * Connections fact\n */\nexport const ConnectionsFact = defineFact<'Connections', ProjectConnection[]>('Connections');\n\n/**\n * Active connection ID fact\n */\nexport const ActiveConnectionIdFact = defineFact<'ActiveConnectionId', string | undefined>(\n  'ActiveConnectionId'\n);\n\n/**\n * Active query fact\n */\nexport const ActiveQueryFact = defineFact<'ActiveQuery', string | undefined>('ActiveQuery');\n\n/**\n * View mode fact\n */\nexport const ViewModeFact = defineFact<'ViewMode', ViewMode>('ViewMode');\n\n/**\n * Pending work items fact\n */\nexport const PendingWorkItemsFact = defineFact<'PendingWorkItems', PendingWorkItems | undefined>(\n  'PendingWorkItems'\n);\n\n/**\n * Device code session fact\n */\nexport const DeviceCodeSessionFact = defineFact<'DeviceCodeSession', DeviceCodeSession | undefined>(\n  'DeviceCodeSession'\n);\n\n/**\n * Auth code flow session fact\n */\nexport const AuthCodeFlowSessionFact = defineFact<'AuthCodeFlowSession', AuthCodeFlowSession | undefined>(\n  'AuthCodeFlowSession'\n);\n\n/**\n * Error recovery attempts fact\n */\nexport const ErrorRecoveryAttemptsFact = defineFact<'ErrorRecoveryAttempts', number>(\n  'ErrorRecoveryAttempts'\n);\n\n/**\n * Last error fact\n */\nexport const LastErrorFact = defineFact<\n  'LastError',\n  { message: string; stack?: string; connectionId?: string } | undefined\n>('LastError');\n\n/**\n * Debug logging enabled fact\n */\nexport const DebugLoggingEnabledFact = defineFact<'DebugLoggingEnabled', boolean>(\n  'DebugLoggingEnabled'\n);\n\n/**\n * Debug view visible fact\n */\nexport const DebugViewVisibleFact = defineFact<'DebugViewVisible', boolean>('DebugViewVisible');\n\n// ============================================================================\n// Application Events\n// ============================================================================\n\n/**\n * Activate application event\n */\nexport const ActivateEvent = defineEvent<'ACTIVATE', { extensionContext?: unknown }>('ACTIVATE');\n\n/**\n * Activation complete event\n */\nexport const ActivationCompleteEvent = defineEvent<'ACTIVATION_COMPLETE', Record<string, never>>(\n  'ACTIVATION_COMPLETE'\n);\n\n/**\n * Activation failed event\n */\nexport const ActivationFailedEvent = defineEvent<'APP_ACTIVATION_FAILED', { error: string }>(\n  'APP_ACTIVATION_FAILED'\n);\n\n/**\n * Deactivate application event\n */\nexport const DeactivateEvent = defineEvent<'DEACTIVATE', Record<string, never>>('DEACTIVATE');\n\n/**\n * Deactivation complete event\n */\nexport const DeactivationCompleteEvent = defineEvent<\n  'DEACTIVATION_COMPLETE',\n  Record<string, never>\n>('DEACTIVATION_COMPLETE');\n\n/**\n * Connections loaded event\n */\nexport const ConnectionsLoadedEvent = defineEvent<\n  'CONNECTIONS_LOADED',\n  { connections: ProjectConnection[] }\n>('CONNECTIONS_LOADED');\n\n/**\n * Connection selected event\n */\nexport const ConnectionSelectedEvent = defineEvent<'CONNECTION_SELECTED', { connectionId: string }>(\n  'CONNECTION_SELECTED'\n);\n\n/**\n * Select connection event (alias for consistency with existing code)\n */\nexport const SelectConnectionEvent = defineEvent<'SELECT_CONNECTION', { connectionId: string }>(\n  'SELECT_CONNECTION'\n);\n\n/**\n * Query changed event\n */\nexport const QueryChangedEvent = defineEvent<\n  'QUERY_CHANGED',\n  { query: string; connectionId?: string }\n>('QUERY_CHANGED');\n\n/**\n * View mode changed event\n */\nexport const ViewModeChangedEvent = defineEvent<'VIEW_MODE_CHANGED', { viewMode: ViewMode }>(\n  'VIEW_MODE_CHANGED'\n);\n\n/**\n * Work items loaded event\n */\nexport const WorkItemsLoadedEvent = defineEvent<\n  'WORK_ITEMS_LOADED',\n  { workItems: WorkItem[]; connectionId: string; query?: string }\n>('WORK_ITEMS_LOADED');\n\n/**\n * Work items error event\n */\nexport const WorkItemsErrorEvent = defineEvent<\n  'WORK_ITEMS_ERROR',\n  { error: string; connectionId: string }\n>('WORK_ITEMS_ERROR');\n\n/**\n * Refresh data event\n */\nexport const RefreshDataEvent = defineEvent<'REFRESH_DATA', { connectionId?: string }>(\n  'REFRESH_DATA'\n);\n\n/**\n * Connection state updated (legacy bridge) event\n */\nexport const ConnectionStateUpdatedEvent = defineEvent<\n  'CONNECTION_STATE_UPDATED',\n  { connectionId: string; state: any }\n>('CONNECTION_STATE_UPDATED');\n\n/**\n * Device code started event\n */\nexport const DeviceCodeStartedAppEvent = defineEvent<\n  'DEVICE_CODE_STARTED',\n  {\n    connectionId: string;\n    userCode: string;\n    verificationUri: string;\n    expiresInSeconds: number;\n  }\n>('DEVICE_CODE_STARTED');\n\n/**\n * Device code completed event\n */\nexport const DeviceCodeCompletedAppEvent = defineEvent<\n  'DEVICE_CODE_COMPLETED',\n  { connectionId: string }\n>('DEVICE_CODE_COMPLETED');\n\n/**\n * Device code cancelled event\n */\nexport const DeviceCodeCancelledEvent = defineEvent<\n  'DEVICE_CODE_CANCELLED',\n  { connectionId: string }\n>('DEVICE_CODE_CANCELLED');\n\n/**\n * Webview/application state synchronization event (webview \u2192 Praxis)\n */\nexport const SyncStateEvent = defineEvent<'SyncState', any>('SyncState');\n\n/**\n * Application error event\n */\nexport const ApplicationErrorEvent = defineEvent<\n  'APPLICATION_ERROR',\n  { error: string; connectionId?: string }\n>('APPLICATION_ERROR');\n\n/**\n * Device code copy failed event\n */\nexport const DeviceCodeCopyFailedEvent = defineEvent<\n  'DEVICE_CODE_COPY_FAILED',\n  { connectionId: string; error: string }\n>('DEVICE_CODE_COPY_FAILED');\n\n/**\n * Device code browser open failed event\n */\nexport const DeviceCodeBrowserOpenFailedEvent = defineEvent<\n  'DEVICE_CODE_BROWSER_OPEN_FAILED',\n  { connectionId: string; error: string }\n>('DEVICE_CODE_BROWSER_OPEN_FAILED');\n\n/**\n * Device code session not found event\n */\nexport const DeviceCodeSessionNotFoundEvent = defineEvent<\n  'DEVICE_CODE_SESSION_NOT_FOUND',\n  { connectionId: string }\n>('DEVICE_CODE_SESSION_NOT_FOUND');\n\n/**\n * Auth code flow browser open failed event\n */\nexport const AuthCodeFlowBrowserOpenFailedEvent = defineEvent<\n  'AUTH_CODE_FLOW_BROWSER_OPEN_FAILED',\n  { connectionId: string; error: string }\n>('AUTH_CODE_FLOW_BROWSER_OPEN_FAILED');\n\n/**\n * Auth code flow browser opened successfully event\n */\nexport const AuthCodeFlowBrowserOpenedEvent = defineEvent<\n  'AUTH_CODE_FLOW_BROWSER_OPENED',\n  { connectionId: string; url: string }\n>('AUTH_CODE_FLOW_BROWSER_OPENED');\n\n/**\n * Device code browser opened successfully event\n */\nexport const DeviceCodeBrowserOpenedEvent = defineEvent<\n  'DEVICE_CODE_BROWSER_OPENED',\n  { connectionId: string; userCode: string }\n>('DEVICE_CODE_BROWSER_OPENED');\n\n/**\n * Retry event\n */\nexport const RetryApplicationEvent = defineEvent<'RETRY', Record<string, never>>('RETRY');\n\n/**\n * Reset event\n */\nexport const ResetApplicationEvent = defineEvent<'RESET', Record<string, never>>('RESET');\n\n/**\n * Toggle debug view event\n */\nexport const ToggleDebugViewEvent = defineEvent<\n  'TOGGLE_DEBUG_VIEW',\n  { debugViewVisible?: boolean }\n>('TOGGLE_DEBUG_VIEW');\n\n/**\n * Open settings event\n */\nexport const OpenSettingsEvent = defineEvent<'OPEN_SETTINGS', Record<string, never>>(\n  'OPEN_SETTINGS'\n);\n\n/**\n * Authentication reminder requested event\n */\nexport const AuthReminderRequestedEvent = defineEvent<\n  'AUTH_REMINDER_REQUESTED',\n  { connectionId: string; reason: string; detail?: string }\n>('AUTH_REMINDER_REQUESTED');\n\n/**\n * Authentication reminder cleared event\n */\nexport const AuthReminderClearedEvent = defineEvent<\n  'AUTH_REMINDER_CLEARED',\n  { connectionId: string }\n>('AUTH_REMINDER_CLEARED');\n\n/**\n * Sign in with Entra event\n */\nexport const SignInEntraEvent = defineEvent<\n  'SIGN_IN_ENTRA',\n  { connectionId: string; forceInteractive?: boolean }\n>('SIGN_IN_ENTRA');\n\n/**\n * Auth code flow started event\n */\nexport const AuthCodeFlowStartedAppEvent = defineEvent<\n  'AUTH_CODE_FLOW_STARTED',\n  {\n    connectionId: string;\n    authorizationUrl: string;\n    expiresInSeconds: number;\n  }\n>('AUTH_CODE_FLOW_STARTED');\n\n/**\n * Auth code flow completed event\n */\nexport const AuthCodeFlowCompletedAppEvent = defineEvent<\n  'AUTH_CODE_FLOW_COMPLETED',\n  {\n    connectionId: string;\n    success: boolean;\n    error?: string;\n  }\n>('AUTH_CODE_FLOW_COMPLETED');\n\n/**\n * Auth redirect received event\n */\nexport const AuthRedirectReceivedAppEvent = defineEvent<\n  'AUTH_REDIRECT_RECEIVED',\n  {\n    connectionId: string;\n    authorizationCode: string;\n    state: string;\n  }\n>('AUTH_REDIRECT_RECEIVED');\n\n/**\n * Sign out Entra event\n */\nexport const SignOutEntraEvent = defineEvent<'SIGN_OUT_ENTRA', { connectionId: string }>(\n  'SIGN_OUT_ENTRA'\n);\n\n/**\n * Authentication success event\n */\nexport const AuthenticationSuccessEvent = defineEvent<\n  'AUTHENTICATION_SUCCESS',\n  { connectionId: string }\n>('AUTHENTICATION_SUCCESS');\n\n/**\n * Authentication failed event\n */\nexport const AuthenticationFailedEvent = defineEvent<\n  'AUTHENTICATION_FAILED',\n  { connectionId: string; error: string }\n>('AUTHENTICATION_FAILED');\n\n/**\n * Create work item event\n */\nexport const CreateWorkItemEvent = defineEvent<'CREATE_WORK_ITEM', { connectionId: string }>(\n  'CREATE_WORK_ITEM'\n);\n\n/**\n * Create branch event\n */\nexport const CreateBranchEvent = defineEvent<\n  'CREATE_BRANCH',\n  { connectionId: string; workItemId?: number }\n>('CREATE_BRANCH');\n\n/**\n * Create pull request event\n */\nexport const CreatePullRequestEvent = defineEvent<\n  'CREATE_PULL_REQUEST',\n  { connectionId: string; workItemId?: number }\n>('CREATE_PULL_REQUEST');\n\n/**\n * Show pull requests event\n */\nexport const ShowPullRequestsEvent = defineEvent<'SHOW_PULL_REQUESTS', { connectionId: string }>(\n  'SHOW_PULL_REQUESTS'\n);\n\n/**\n * Show build status event\n */\nexport const ShowBuildStatusEvent = defineEvent<'SHOW_BUILD_STATUS', { connectionId: string }>(\n  'SHOW_BUILD_STATUS'\n);\n\n/**\n * Select team event\n */\nexport const SelectTeamEvent = defineEvent<'SELECT_TEAM', { connectionId: string }>('SELECT_TEAM');\n\n/**\n * Reset preferred repositories event\n */\nexport const ResetPreferredRepositoriesEvent = defineEvent<\n  'RESET_PREFERRED_REPOSITORIES',\n  { connectionId: string }\n>('RESET_PREFERRED_REPOSITORIES');\n\n/**\n * Self test webview event\n */\nexport const SelfTestWebviewEvent = defineEvent<'SELF_TEST_WEBVIEW', Record<string, never>>(\n  'SELF_TEST_WEBVIEW'\n);\n\n/**\n * Bulk assign event\n */\nexport const BulkAssignEvent = defineEvent<\n  'BULK_ASSIGN',\n  { connectionId: string; workItemIds: number[] }\n>('BULK_ASSIGN');\n\n/**\n * Generate Copilot prompt event\n */\nexport const GenerateCopilotPromptEvent = defineEvent<\n  'GENERATE_COPILOT_PROMPT',\n  { connectionId: string; workItemId: number }\n>('GENERATE_COPILOT_PROMPT');\n\n/**\n * Show time report event\n */\nexport const ShowTimeReportEvent = defineEvent<'SHOW_TIME_REPORT', { connectionId: string }>(\n  'SHOW_TIME_REPORT'\n);\n\n/**\n * Webview ready event\n */\nexport const WebviewReadyEvent = defineEvent<'WEBVIEW_READY', Record<string, never>>(\n  'WEBVIEW_READY'\n);\n\n/**\n * Union type of all application events\n */\nexport type PraxisApplicationEvent =\n  | ReturnType<typeof ActivateEvent.create>\n  | ReturnType<typeof ActivationCompleteEvent.create>\n  | ReturnType<typeof ActivationFailedEvent.create>\n  | ReturnType<typeof DeactivateEvent.create>\n  | ReturnType<typeof DeactivationCompleteEvent.create>\n  | ReturnType<typeof ConnectionsLoadedEvent.create>\n  | ReturnType<typeof ConnectionSelectedEvent.create>\n  | ReturnType<typeof SelectConnectionEvent.create>\n  | ReturnType<typeof QueryChangedEvent.create>\n  | ReturnType<typeof ViewModeChangedEvent.create>\n  | ReturnType<typeof WorkItemsLoadedEvent.create>\n  | ReturnType<typeof WorkItemsErrorEvent.create>\n  | ReturnType<typeof RefreshDataEvent.create>\n  | ReturnType<typeof ConnectionStateUpdatedEvent.create>\n  | ReturnType<typeof DeviceCodeStartedAppEvent.create>\n  | ReturnType<typeof DeviceCodeCompletedAppEvent.create>\n  | ReturnType<typeof DeviceCodeCancelledEvent.create>\n  | ReturnType<typeof AuthCodeFlowStartedAppEvent.create>\n  | ReturnType<typeof AuthCodeFlowCompletedAppEvent.create>\n  | ReturnType<typeof AuthRedirectReceivedAppEvent.create>\n  | ReturnType<typeof SyncStateEvent.create>\n  | ReturnType<typeof ApplicationErrorEvent.create>\n  | ReturnType<typeof RetryApplicationEvent.create>\n  | ReturnType<typeof ResetApplicationEvent.create>\n  | ReturnType<typeof ToggleDebugViewEvent.create>\n  | ReturnType<typeof OpenSettingsEvent.create>\n  | ReturnType<typeof AuthReminderRequestedEvent.create>\n  | ReturnType<typeof AuthReminderClearedEvent.create>\n  | ReturnType<typeof SignInEntraEvent.create>\n  | ReturnType<typeof SignOutEntraEvent.create>\n  | ReturnType<typeof AuthenticationSuccessEvent.create>\n  | ReturnType<typeof AuthenticationFailedEvent.create>\n  | ReturnType<typeof CreateWorkItemEvent.create>\n  | ReturnType<typeof CreateBranchEvent.create>\n  | ReturnType<typeof CreatePullRequestEvent.create>\n  | ReturnType<typeof ShowPullRequestsEvent.create>\n  | ReturnType<typeof ShowBuildStatusEvent.create>\n  | ReturnType<typeof SelectTeamEvent.create>\n  | ReturnType<typeof ResetPreferredRepositoriesEvent.create>\n  | ReturnType<typeof SelfTestWebviewEvent.create>\n  | ReturnType<typeof BulkAssignEvent.create>\n  | ReturnType<typeof GenerateCopilotPromptEvent.create>\n  | ReturnType<typeof ShowTimeReportEvent.create>\n  | ReturnType<typeof WebviewReadyEvent.create>\n  | ReturnType<typeof StartTimerEvent.create>\n  | ReturnType<typeof PauseTimerEvent.create>\n  | ReturnType<typeof StopTimerEvent.create>\n  | ReturnType<typeof DeviceCodeCopyFailedEvent.create>\n  | ReturnType<typeof DeviceCodeBrowserOpenFailedEvent.create>\n  | ReturnType<typeof DeviceCodeSessionNotFoundEvent.create>\n  | ReturnType<typeof DeviceCodeBrowserOpenedEvent.create>\n  | ReturnType<typeof AuthCodeFlowBrowserOpenFailedEvent.create>\n  | ReturnType<typeof AuthCodeFlowBrowserOpenedEvent.create>;\n", "/**\n * Praxis Application Rules - Lifecycle\n *\n * Rules for application lifecycle state transitions.\n */\n\nimport { defineRule, findEvent } from '@plures/praxis';\nimport type { ApplicationEngineContext } from '../engine.js';\nimport {\n  ActivateEvent,\n  ActivationCompleteEvent,\n  ActivationFailedEvent,\n  DeactivateEvent,\n  DeactivationCompleteEvent,\n} from '../facts.js';\n\n/**\n * Handle application activation\n */\nconst activateRule = defineRule<ApplicationEngineContext>({\n  id: 'application.activate',\n  description: 'Activate the application',\n  meta: {\n    triggers: ['ACTIVATE'],\n    transition: { from: 'inactive', to: 'activating' },\n  },\n  impl: (state, events) => {\n    const activateEvent = findEvent(events, ActivateEvent);\n    if (!activateEvent) return [];\n    if (state.context.applicationState !== 'inactive') return [];\n\n    state.context.applicationState = 'activating';\n    state.context.isActivated = false;\n    state.context.isDeactivating = false;\n    state.context.errorRecoveryAttempts = 0;\n    state.context.lastError = undefined;\n\n    return [];\n  },\n});\n\n/**\n * Handle activation complete\n */\nconst activationCompleteRule = defineRule<ApplicationEngineContext>({\n  id: 'application.activationComplete',\n  description: 'Complete application activation',\n  meta: {\n    triggers: ['ACTIVATION_COMPLETE'],\n    transition: { from: 'activating', to: 'active' },\n  },\n  impl: (state, events) => {\n    const completeEvent = findEvent(events, ActivationCompleteEvent);\n    if (!completeEvent) return [];\n    if (state.context.applicationState !== 'activating') return [];\n\n    state.context.applicationState = 'active';\n    state.context.isActivated = true;\n\n    return [];\n  },\n});\n\n/**\n * Handle activation failure\n */\nconst activationFailedRule = defineRule<ApplicationEngineContext>({\n  id: 'application.activationFailed',\n  description: 'Handle activation failure',\n  meta: {\n    triggers: ['APP_ACTIVATION_FAILED'],\n    transition: { from: 'activating', to: 'activation_error' },\n  },\n  impl: (state, events) => {\n    const failedEvent = findEvent(events, ActivationFailedEvent);\n    if (!failedEvent) return [];\n    if (state.context.applicationState !== 'activating') return [];\n\n    state.context.applicationState = 'activation_error';\n    state.context.lastError = { message: failedEvent.payload.error };\n    state.context.errorRecoveryAttempts++;\n\n    return [];\n  },\n});\n\n/**\n * Handle deactivation\n */\nconst deactivateRule = defineRule<ApplicationEngineContext>({\n  id: 'application.deactivate',\n  description: 'Deactivate the application',\n  meta: {\n    triggers: ['DEACTIVATE'],\n    transition: { from: ['inactive', 'active', 'activation_error'], to: 'deactivating' },\n  },\n  impl: (state, events) => {\n    const deactivateEvent = findEvent(events, DeactivateEvent);\n    if (!deactivateEvent) return [];\n    if (state.context.applicationState === 'inactive') return [];\n    if (state.context.applicationState === 'deactivating') return [];\n\n    state.context.applicationState = 'deactivating';\n    state.context.isDeactivating = true;\n\n    return [];\n  },\n});\n\n/**\n * Handle deactivation complete\n */\nconst deactivationCompleteRule = defineRule<ApplicationEngineContext>({\n  id: 'application.deactivationComplete',\n  description: 'Complete application deactivation',\n  meta: {\n    triggers: ['DEACTIVATION_COMPLETE'],\n    transition: { from: 'deactivating', to: 'inactive' },\n  },\n  impl: (state, events) => {\n    const completeEvent = findEvent(events, DeactivationCompleteEvent);\n    if (!completeEvent) return [];\n    if (state.context.applicationState !== 'deactivating') return [];\n\n    state.context.applicationState = 'inactive';\n    state.context.isActivated = false;\n    state.context.isDeactivating = false;\n\n    return [];\n  },\n});\n\nexport const lifecycleRules = [\n  activateRule,\n  activationCompleteRule,\n  activationFailedRule,\n  deactivateRule,\n  deactivationCompleteRule,\n];\n", "/**\n * Praxis Application Rules - Connection\n *\n * Rules for connection management state transitions.\n */\n\nimport { defineRule, findEvent } from '@plures/praxis';\nimport type { ApplicationEngineContext } from '../engine.js';\nimport {\n  ConnectionsLoadedEvent,\n  ConnectionSelectedEvent,\n  SelectConnectionEvent,\n  QueryChangedEvent,\n  ViewModeChangedEvent,\n  ConnectionStateUpdatedEvent,\n  AuthenticationFailedEvent,\n} from '../facts.js';\nimport type { PraxisConnectionSnapshot, PraxisConnectionState } from '../../connection/types.js';\n\n/**\n * Handle connections loaded\n */\nconst connectionsLoadedRule = defineRule<ApplicationEngineContext>({\n  id: 'application.connectionsLoaded',\n  description: 'Handle connections loaded',\n  meta: {\n    triggers: ['CONNECTIONS_LOADED'],\n  },\n  impl: (state, events) => {\n    const loadedEvent = findEvent(events, ConnectionsLoadedEvent);\n    if (!loadedEvent) return [];\n\n    state.context.connections = loadedEvent.payload.connections;\n\n    // Initialize connection states for each connection (if not already present)\n    // This ensures connectionStates Map is populated when connections are loaded\n    state.context.connectionStates = new Map(state.context.connectionStates);\n    for (const connection of loadedEvent.payload.connections) {\n      if (!state.context.connectionStates.has(connection.id)) {\n        state.context.connectionStates.set(connection.id, {\n          state: 'disconnected',\n          connectionId: connection.id,\n          isConnected: false,\n          authMethod: connection.authMethod || 'pat',\n          hasClient: false,\n          hasProvider: false,\n          retryCount: 0,\n          error: undefined,\n        });\n      }\n    }\n\n    // Auto-select first connection if none selected\n    if (!state.context.activeConnectionId && state.context.connections.length > 0) {\n      state.context.activeConnectionId = state.context.connections[0].id;\n    }\n\n    return [];\n  },\n});\n\n/**\n * Handle connection selected\n */\nconst connectionSelectedRule = defineRule<ApplicationEngineContext>({\n  id: 'application.connectionSelected',\n  description: 'Handle connection selection',\n  meta: {\n    triggers: ['CONNECTION_SELECTED', 'SELECT_CONNECTION'],\n  },\n  impl: (state, events) => {\n    // Handle both CONNECTION_SELECTED and SELECT_CONNECTION events\n    const selectedEvent =\n      findEvent(events, ConnectionSelectedEvent) || findEvent(events, SelectConnectionEvent);\n    if (!selectedEvent) return [];\n\n    const connectionId = selectedEvent.payload.connectionId;\n\n    // Verify connection exists\n    const connectionExists = state.context.connections.some((c) => c.id === connectionId);\n    if (!connectionExists) return [];\n\n    state.context.activeConnectionId = connectionId;\n\n    // Restore query for this connection if available\n    const savedQuery = state.context.connectionQueries.get(connectionId);\n    if (savedQuery) {\n      state.context.activeQuery = savedQuery;\n    }\n\n    return [];\n  },\n});\n\n/**\n * Handle query changed\n */\nconst queryChangedRule = defineRule<ApplicationEngineContext>({\n  id: 'application.queryChanged',\n  description: 'Handle query change',\n  meta: {\n    triggers: ['QUERY_CHANGED'],\n  },\n  impl: (state, events) => {\n    const queryEvent = findEvent(events, QueryChangedEvent);\n    if (!queryEvent) return [];\n\n    const { query, connectionId } = queryEvent.payload;\n    const targetConnectionId = connectionId || state.context.activeConnectionId;\n\n    state.context.activeQuery = query;\n\n    // Priority 3: Make Map updates immutable (create new Map instance)\n    // Priority 4: Idempotency - only update if changed\n    if (targetConnectionId) {\n      const existingQuery = state.context.connectionQueries.get(targetConnectionId);\n      if (existingQuery !== query) {\n        state.context.connectionQueries = new Map(state.context.connectionQueries);\n        state.context.connectionQueries.set(targetConnectionId, query);\n      }\n    }\n\n    return [];\n  },\n});\n\n/**\n * Handle view mode changed\n */\nconst viewModeChangedRule = defineRule<ApplicationEngineContext>({\n  id: 'application.viewModeChanged',\n  description: 'Handle view mode change',\n  meta: {\n    triggers: ['VIEW_MODE_CHANGED'],\n    transition: { from: 'active', to: 'active' },\n  },\n  impl: (state, events) => {\n    const modeEvent = findEvent(events, ViewModeChangedEvent);\n    if (!modeEvent) return [];\n\n    state.context.viewMode = modeEvent.payload.viewMode;\n\n    // Priority 3: Make Map updates immutable (create new Map instance)\n    // Priority 4: Idempotency - only update if changed\n    if (state.context.activeConnectionId) {\n      const existingMode = state.context.connectionViewModes.get(state.context.activeConnectionId);\n      if (existingMode !== modeEvent.payload.viewMode) {\n        state.context.connectionViewModes = new Map(state.context.connectionViewModes);\n        state.context.connectionViewModes.set(\n          state.context.activeConnectionId,\n          modeEvent.payload.viewMode\n        );\n      }\n    }\n\n    return [];\n  },\n});\n\n/**\n * Handle authentication failure\n */\nconst authenticationFailedRule = defineRule<ApplicationEngineContext>({\n  id: 'application.authenticationFailed',\n  description: 'Handle authentication failure',\n  meta: {\n    triggers: ['AUTHENTICATION_FAILED'],\n  },\n  impl: (state, events) => {\n    const failedEvent = findEvent(events, AuthenticationFailedEvent);\n    if (!failedEvent) return [];\n\n    const { connectionId, error } = failedEvent.payload;\n\n    // Update last error\n    state.context.lastError = {\n      message: error,\n      connectionId,\n    };\n\n    // Priority 3: Make Map updates immutable (create new Map instance)\n    // Priority 4: Idempotency - check if already exists with same value\n    const existingReminder = state.context.pendingAuthReminders.get(connectionId);\n    const newReminder = {\n      connectionId,\n      reason: error,\n      status: 'pending',\n    };\n    \n    if (!existingReminder || existingReminder.reason !== newReminder.reason || existingReminder.status !== newReminder.status) {\n      state.context.pendingAuthReminders = new Map(state.context.pendingAuthReminders);\n      state.context.pendingAuthReminders.set(connectionId, newReminder);\n    }\n\n    // Update connection state if it exists (immutable Map update)\n    const existingState = state.context.connectionStates.get(connectionId);\n    if (existingState) {\n      const updatedState = {\n        ...existingState,\n        state: 'auth_failed',\n        error: error,\n        isConnected: false,\n      };\n      // Only update if changed (idempotency)\n      if (existingState.state !== updatedState.state || existingState.error !== updatedState.error || existingState.isConnected !== updatedState.isConnected) {\n        state.context.connectionStates = new Map(state.context.connectionStates);\n        state.context.connectionStates.set(connectionId, updatedState);\n      }\n    } else {\n      // If we don't have state yet, create a placeholder one\n      const connection = state.context.connections.find((c) => c.id === connectionId);\n      if (connection) {\n        state.context.connectionStates = new Map(state.context.connectionStates);\n        state.context.connectionStates.set(connectionId, {\n          state: 'auth_failed',\n          connectionId,\n          isConnected: false,\n          authMethod: connection.authMethod || 'pat',\n          hasClient: false,\n          hasProvider: false,\n          error: error,\n          retryCount: 0,\n        });\n      }\n    }\n\n    return [];\n  },\n});\n\n/**\n * Handle connection state updated\n */\nconst connectionStateUpdatedRule = defineRule<ApplicationEngineContext>({\n  id: 'application.connectionStateUpdated',\n  description: 'Update connection state from external source',\n  meta: {\n    triggers: ['CONNECTION_STATE_UPDATED'],\n  },\n  impl: (state, events) => {\n    const event = findEvent(events, ConnectionStateUpdatedEvent);\n    if (!event) return [];\n    const { connectionId, state: connState } = event.payload;\n\n    // Map legacy state to PraxisConnectionSnapshot\n    // Legacy state: { status: 'connected', connection: {...}, authMethod: '...', id: '...' }\n    // PraxisConnectionSnapshot: { state: PraxisConnectionState, connectionId: string, isConnected: boolean, ... }\n\n    const status = connState.status || 'disconnected';\n    const isConnected = status === 'connected';\n    const praxisState: PraxisConnectionState = isConnected ? 'connected' : 'disconnected';\n\n    const snapshot: PraxisConnectionSnapshot = {\n      state: praxisState,\n      connectionId: connectionId,\n      isConnected: isConnected,\n      authMethod: connState.authMethod || 'pat',\n      hasClient: !!connState.client,\n      hasProvider: !!connState.provider,\n      retryCount: 0,\n      error: undefined,\n    };\n\n    // Priority 3: Make Map updates immutable (create new Map instance)\n    // Priority 4: Idempotency - only update if changed\n    const existingSnapshot = state.context.connectionStates.get(connectionId);\n    if (!existingSnapshot || JSON.stringify(existingSnapshot) !== JSON.stringify(snapshot)) {\n      state.context.connectionStates = new Map(state.context.connectionStates);\n      state.context.connectionStates.set(connectionId, snapshot);\n    }\n    return [];\n  },\n});\n\nexport const connectionRules = [\n  connectionsLoadedRule,\n  connectionSelectedRule,\n  queryChangedRule,\n  viewModeChangedRule,\n  connectionStateUpdatedRule,\n  authenticationFailedRule,\n];\n", "/**\n * Praxis Application Types\n *\n * Type definitions for the Application Orchestrator module.\n * This module coordinates all Praxis engines (Timer, Auth, Connection)\n * using a multi-engine architecture with event bus pattern.\n */\n\nimport type { PraxisTimerSnapshot } from '../timer/types.js';\nimport type { PraxisConnectionSnapshot, ProjectConnection } from '../connection/types.js';\nimport type { TraceEntry } from '../../logging/TraceLogger.js';\n\nexport interface PraxisClock {\n  now(): number;\n}\n\n/**\n * Application orchestrator states\n */\nexport type PraxisApplicationState =\n  | 'inactive'\n  | 'activating'\n  | 'active'\n  | 'activation_error'\n  | 'deactivating'\n  | 'error_recovery';\n\n/**\n * View modes for work item display\n */\nexport type ViewMode = 'list' | 'kanban' | 'board';\n\n/**\n * Work item data structure\n */\nexport interface WorkItem {\n  id: number;\n  fields: Record<string, unknown>;\n  _links?: Record<string, unknown>;\n  url?: string;\n}\n\n/**\n * Kanban column configuration\n */\nexport interface KanbanColumn {\n  id: string;\n  name: string;\n  items: WorkItem[];\n}\n\n/**\n * Device code session for OAuth device flow\n */\nexport interface DeviceCodeSession {\n  connectionId: string;\n  userCode: string;\n  verificationUri: string;\n  startedAt: number;\n  expiresAt: number;\n  expiresInSeconds: number;\n}\n\n/**\n * Auth code flow session for OAuth authorization code flow with PKCE\n */\nexport interface AuthCodeFlowSession {\n  connectionId: string;\n  authorizationUrl: string;\n  startedAt: number;\n  expiresAt: number;\n  expiresInSeconds: number;\n}\n\n/**\n * Pending work items data\n */\nexport interface PendingWorkItems {\n  workItems: WorkItem[];\n  connectionId: string;\n  query?: string;\n  timestamp: number;\n}\n\n/**\n * UI State\n */\nexport interface UIState {\n  statusMessage?: {\n    text: string;\n    type: 'info' | 'error' | 'warning' | 'success';\n  };\n  modal?: {\n    type: string;\n    workItemId?: number;\n    mode?: string;\n    [key: string]: unknown;\n  };\n  notification?: unknown;\n  dialog?: unknown;\n}\n\n/**\n * Application context - shared data across all orchestrated engines\n */\nexport interface PraxisApplicationContext {\n  clock: PraxisClock;\n  // Application lifecycle\n  isActivated: boolean;\n  isDeactivating: boolean;\n\n  // Connection management\n  connections: ProjectConnection[];\n  activeConnectionId?: string;\n  activeQuery?: string;\n\n  // Per-connection state tracking\n  connectionStates: Map<string, PraxisConnectionSnapshot>;\n  connectionQueries: Map<string, string>;\n  connectionWorkItems: Map<string, WorkItem[]>;\n  connectionFilters: Map<string, Record<string, unknown>>;\n  connectionViewModes: Map<string, ViewMode>;\n\n  // Work items\n  pendingWorkItems?: PendingWorkItems;\n  viewMode: ViewMode;\n  kanbanColumns: KanbanColumn[];\n\n  // Timer state (from timer engine)\n  timerSnapshot?: PraxisTimerSnapshot;\n\n  // Authentication reminders\n  pendingAuthReminders: Map<string, { connectionId: string; reason: string; status: string }>;\n\n  // Device code flow\n  deviceCodeSession?: DeviceCodeSession;\n  \n  // Auth code flow (PKCE)\n  authCodeFlowSession?: AuthCodeFlowSession;\n\n  // Error handling\n  lastError?: {\n    message: string;\n    stack?: string;\n    connectionId?: string;\n  };\n  errorRecoveryAttempts: number;\n\n  // Debug and UI flags\n  debugLoggingEnabled: boolean;\n  debugViewVisible: boolean;\n  debugTraceLog?: TraceEntry[];\n  ui?: UIState;\n}\n\n/**\n * Application snapshot for external consumers\n */\nexport interface PraxisApplicationSnapshot {\n  state: PraxisApplicationState;\n  isActivated: boolean;\n  connections: ProjectConnection[];\n  activeConnectionId?: string;\n  hasActiveTimer: boolean;\n  connectionCount: number;\n  errorRecoveryAttempts: number;\n  // Full context (needed for consumers expecting XState-like snapshots)\n  context: PraxisApplicationContext;\n}\n\n/**\n * Event bus message types for cross-engine communication\n */\nexport type EventBusMessageType =\n  | 'timer:started'\n  | 'timer:stopped'\n  | 'timer:paused'\n  | 'timer:resumed'\n  | 'auth:success'\n  | 'auth:failed'\n  | 'auth:logout'\n  | 'connection:connected'\n  | 'connection:disconnected'\n  | 'connection:error'\n  | 'app:activated'\n  | 'app:deactivated'\n  | 'app:error'\n  | 'workitems:loaded'\n  | 'workitems:error';\n\n/**\n * Event bus message structure\n */\nexport interface EventBusMessage {\n  type: EventBusMessageType;\n  payload: Record<string, unknown>;\n  timestamp: number;\n  sourceEngine: 'timer' | 'auth' | 'connection' | 'application';\n  connectionId?: string;\n}\n\n/**\n * Event bus subscriber callback\n */\nexport type EventBusSubscriber = (message: EventBusMessage) => void;\n\n/**\n * Default application configuration\n */\nexport const DEFAULT_APPLICATION_CONFIG: Partial<PraxisApplicationContext> = {\n  clock: { now: () => Date.now() },\n  isActivated: false,\n  isDeactivating: false,\n  connections: [],\n  connectionStates: new Map(),\n  connectionQueries: new Map(),\n  connectionWorkItems: new Map(),\n  connectionFilters: new Map(),\n  connectionViewModes: new Map(),\n  pendingAuthReminders: new Map(),\n  viewMode: 'list',\n  kanbanColumns: [],\n  errorRecoveryAttempts: 0,\n  debugLoggingEnabled: false,\n  debugViewVisible: false,\n  debugTraceLog: [],\n  ui: {\n    notification: null,\n    dialog: null,\n  },\n};\n", "/**\n * Praxis Application Tracing\n *\n * Provides tracing capabilities for the Praxis application engine.\n * This module wraps rules with tracing to capture state transitions and events.\n */\n\nimport type { Rule } from '@plures/praxis';\nimport { traceLogger, type TraceEntry } from '../../logging/TraceLogger.js';\n\n/**\n * Trace entry for Praxis application engine\n */\nexport type { TraceEntry };\n\n/**\n * TraceRecorder for capturing Praxis engine traces\n */\nexport class TraceRecorder<TContext> {\n  private entries: TraceEntry[] = [];\n  private isRecording = false;\n\n  constructor() {\n    this.isRecording = true;\n  }\n\n  /**\n   * Record a trace entry\n   */\n  record(entry: Omit<TraceEntry, 'id' | 'timestamp' | 'sessionId'>): void {\n    if (!this.isRecording) {\n      return;\n    }\n\n    const fullEntry: TraceEntry = {\n      ...entry,\n      id: `trace_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      timestamp: Date.now(),\n      sessionId: traceLogger.getCurrentSessionId() || 'unknown',\n    };\n\n    this.entries.push(fullEntry);\n    traceLogger.recordTrace(fullEntry);\n  }\n\n  /**\n   * Get all recorded entries\n   */\n  getEntries(): TraceEntry[] {\n    return [...this.entries];\n  }\n\n  /**\n   * Clear all recorded entries\n   */\n  clear(): void {\n    this.entries = [];\n  }\n\n  /**\n   * Start recording\n   */\n  start(): void {\n    this.isRecording = true;\n  }\n\n  /**\n   * Stop recording\n   */\n  stop(): void {\n    this.isRecording = false;\n  }\n\n  /**\n   * Check if recording is active\n   */\n  isActive(): boolean {\n    return this.isRecording;\n  }\n}\n\n/**\n * Wrap a rule with tracing capabilities\n */\nexport function wrapRuleWithTracing<TContext>(\n  rule: Rule<TContext>,\n  traceRecorder?: TraceRecorder<TContext>\n): Rule<TContext> {\n  if (!traceRecorder) {\n    return rule;\n  }\n\n  return {\n    ...rule,\n    when: rule.when\n      ? (context: TContext, event: any) => {\n          const result = rule.when!(context, event);\n          if (result) {\n            traceRecorder.record({\n              machineId: 'application',\n              actorId: 'application',\n              component: 'APPLICATION' as any,\n              event: { type: event?.type || 'unknown', payload: event },\n              eventType: event?.type || 'unknown',\n              fromState: (context as any)?.applicationState || 'unknown',\n              toState: (context as any)?.applicationState || 'unknown',\n              contextBefore: context,\n              contextAfter: context,\n            });\n          }\n          return result;\n        }\n      : undefined,\n    then: rule.then\n      ? (context: TContext, event: any) => {\n          const beforeState = (context as any)?.applicationState || 'unknown';\n          const result = rule.then!(context, event);\n          const afterState = (result as any)?.applicationState || beforeState;\n\n          traceRecorder.record({\n            machineId: 'application',\n            actorId: 'application',\n            component: 'APPLICATION' as any,\n            event: { type: event?.type || 'unknown', payload: event },\n            eventType: event?.type || 'unknown',\n            fromState: beforeState,\n            toState: afterState,\n            contextBefore: context,\n            contextAfter: result,\n          });\n\n          return result;\n        }\n      : undefined,\n  };\n}\n\n", "/**\n * Praxis Application Engine\n *\n * Creates and configures the Application Orchestrator engine\n * using the Praxis logic engine.\n */\n\nimport { createPraxisEngine, PraxisRegistry, type LogicEngine } from '@plures/praxis';\nimport type {\n  PraxisApplicationContext,\n  PraxisApplicationState,\n  ViewMode,\n  WorkItem,\n  KanbanColumn,\n  DeviceCodeSession,\n  PendingWorkItems,\n} from './types.js';\nimport { DEFAULT_APPLICATION_CONFIG } from './types.js';\nimport type { ProjectConnection } from '../connection/types.js';\nimport type { PraxisTimerSnapshot } from '../timer/types.js';\nimport type { PraxisConnectionSnapshot } from '../connection/types.js';\nimport { applicationRules } from './rules/index.js';\nimport type { TimerEntry } from './features/timer.js';\nimport { TraceRecorder, wrapRuleWithTracing } from './tracing.js';\n\n// Simple clock helper to allow tests to stub time if needed\nconst defaultClock = { now: () => Date.now() };\nexport function getClock(_state?: ApplicationEngineContext) {\n  return defaultClock;\n}\n\n/**\n * Application engine context structure\n */\nexport interface ApplicationEngineContext {\n  applicationState: PraxisApplicationState;\n  applicationData: PraxisApplicationContext;\n\n  // Timer Feature\n  timerHistory: { entries: TimerEntry[] };\n\n  // Shortcut properties for cleaner rule access\n  isActivated: boolean;\n  isDeactivating: boolean;\n  connections: ProjectConnection[];\n  activeConnectionId?: string;\n  activeQuery?: string;\n  viewMode: ViewMode;\n  pendingWorkItems?: PendingWorkItems;\n  deviceCodeSession?: DeviceCodeSession;\n  lastError?: { message: string; stack?: string; connectionId?: string };\n  errorRecoveryAttempts: number;\n  debugLoggingEnabled: boolean;\n  debugViewVisible: boolean;\n\n  // Per-connection maps\n  connectionStates: Map<string, PraxisConnectionSnapshot>;\n  connectionQueries: Map<string, string>;\n  connectionWorkItems: Map<string, WorkItem[]>;\n  connectionFilters: Map<string, Record<string, unknown>>;\n  connectionViewModes: Map<string, ViewMode>;\n\n  // Auth reminders\n  pendingAuthReminders: Map<string, { connectionId: string; reason: string; status: string }>;\n\n  // Timer snapshot from timer engine\n  timerSnapshot?: PraxisTimerSnapshot;\n\n  // Kanban columns\n  kanbanColumns: KanbanColumn[];\n}\n\n/**\n * Create initial application engine context\n */\nfunction createInitialContext(\n  config?: Partial<PraxisApplicationContext>\n): ApplicationEngineContext {\n  const merged = { ...DEFAULT_APPLICATION_CONFIG, ...config };\n  const maps = _createConnectionMaps(merged);\n\n  return {\n    applicationState: 'inactive',\n    applicationData: merged as PraxisApplicationContext,\n\n    // Timer Feature\n    timerHistory: { entries: [] },\n\n    // Shortcut properties\n    isActivated: merged.isActivated ?? false,\n    isDeactivating: merged.isDeactivating ?? false,\n    connections: merged.connections ?? [],\n    activeConnectionId: merged.activeConnectionId,\n    activeQuery: merged.activeQuery,\n    viewMode: merged.viewMode ?? 'list',\n    pendingWorkItems: merged.pendingWorkItems,\n    deviceCodeSession: merged.deviceCodeSession,\n    lastError: merged.lastError,\n    errorRecoveryAttempts: merged.errorRecoveryAttempts ?? 0,\n    debugLoggingEnabled: merged.debugLoggingEnabled ?? false,\n    debugViewVisible: merged.debugViewVisible ?? false,\n\n    // Per-connection maps\n    ...maps,\n\n    // Auth reminders\n    pendingAuthReminders: merged.pendingAuthReminders ?? new Map(),\n\n    // Timer snapshot\n    timerSnapshot: undefined,\n\n    // Kanban columns\n    kanbanColumns: merged.kanbanColumns ?? [],\n  };\n}\n\nfunction _createConnectionMaps(merged: any) {\n  return {\n    connectionStates: merged.connectionStates ?? new Map(),\n    connectionQueries: merged.connectionQueries ?? new Map(),\n    connectionWorkItems: merged.connectionWorkItems ?? new Map(),\n    connectionFilters: merged.connectionFilters ?? new Map(),\n    connectionViewModes: merged.connectionViewModes ?? new Map(),\n  };\n}\n\n/**\n * Create the application engine\n */\nexport function createApplicationEngine(\n  config?: Partial<PraxisApplicationContext>,\n  traceRecorder?: TraceRecorder<ApplicationEngineContext>\n): LogicEngine<ApplicationEngineContext> {\n  const registry = new PraxisRegistry<ApplicationEngineContext>();\n\n  // Register all application rules\n  const rules = traceRecorder\n    ? applicationRules.map((rule) => wrapRuleWithTracing(rule, traceRecorder))\n    : applicationRules;\n\n  for (const rule of rules) {\n    registry.registerRule(rule);\n  }\n\n  return createPraxisEngine<ApplicationEngineContext>({\n    initialContext: createInitialContext(config),\n    registry,\n    initialFacts: [],\n  });\n}\n", "/**\n * Praxis Application Rules - Work Items\n *\n * Rules for work item management state transitions.\n */\n\nimport { defineRule, findEvent } from '@plures/praxis';\nimport { getClock, type ApplicationEngineContext } from '../engine.js';\nimport { WorkItemsLoadedEvent, WorkItemsErrorEvent } from '../facts.js';\n\n/**\n * Handle work items loaded\n */\nconst workItemsLoadedRule = defineRule<ApplicationEngineContext>({\n  id: 'application.workItemsLoaded',\n  description: 'Handle work items loaded',\n  meta: {\n    triggers: ['WORK_ITEMS_LOADED'],\n  },\n  impl: (state, events) => {\n    const loadedEvent = findEvent(events, WorkItemsLoadedEvent);\n    if (!loadedEvent) return [];\n\n    const { workItems, connectionId, query } = loadedEvent.payload;\n\n    // Store pending work items\n    state.context.pendingWorkItems = {\n      workItems,\n      connectionId,\n      query,\n      timestamp: getClock(state).now(),\n    };\n\n    // Priority 3: Make Map updates immutable (create new Map instance)\n    // Priority 4: Idempotency - only update if changed\n    const existingWorkItems = state.context.connectionWorkItems.get(connectionId);\n    if (existingWorkItems !== workItems) {\n      state.context.connectionWorkItems = new Map(state.context.connectionWorkItems);\n      state.context.connectionWorkItems.set(connectionId, workItems);\n    }\n\n    // Clear any error for this connection\n    if (state.context.lastError?.connectionId === connectionId) {\n      state.context.lastError = undefined;\n    }\n\n    return [];\n  },\n});\n\n/**\n * Handle work items error\n */\nconst workItemsErrorRule = defineRule<ApplicationEngineContext>({\n  id: 'application.workItemsError',\n  description: 'Handle work items error',\n  meta: {\n    triggers: ['WORK_ITEMS_ERROR'],\n  },\n  impl: (state, events) => {\n    const errorEvent = findEvent(events, WorkItemsErrorEvent);\n    if (!errorEvent) return [];\n\n    const { error, connectionId } = errorEvent.payload;\n\n    state.context.lastError = {\n      message: error,\n      connectionId,\n    };\n\n    return [];\n  },\n});\n\nexport const workItemRules = [workItemsLoadedRule, workItemsErrorRule];\n", "/**\n * Praxis Application Rules - Error and Misc\n *\n * Rules for error handling, debug, and other state transitions.\n */\n\nimport { defineRule, findEvent } from '@plures/praxis';\nimport { getClock, type ApplicationEngineContext } from '../engine.js';\nimport {\n  DeviceCodeStartedAppEvent,\n  DeviceCodeCompletedAppEvent,\n  DeviceCodeCancelledEvent,\n  AuthCodeFlowStartedAppEvent,\n  AuthCodeFlowCompletedAppEvent,\n  ApplicationErrorEvent,\n  RetryApplicationEvent,\n  ResetApplicationEvent,\n  ToggleDebugViewEvent,\n  AuthReminderRequestedEvent,\n  AuthReminderClearedEvent,\n  AuthenticationSuccessEvent,\n} from '../facts.js';\n\n// ============================================================================\n// Device Code Flow Rules\n// ============================================================================\n\n/**\n * Handle device code started\n */\nconst deviceCodeStartedRule = defineRule<ApplicationEngineContext>({\n  id: 'application.deviceCodeStarted',\n  description: 'Handle device code flow started',\n  meta: {\n    triggers: ['DEVICE_CODE_STARTED'],\n  },\n  impl: (state, events) => {\n    const startedEvent = findEvent(events, DeviceCodeStartedAppEvent);\n    if (!startedEvent) return [];\n\n    const { connectionId, userCode, verificationUri, expiresInSeconds } = startedEvent.payload;\n    const now = getClock(state).now();\n\n    state.context.deviceCodeSession = {\n      connectionId,\n      userCode,\n      verificationUri,\n      startedAt: now,\n      expiresAt: now + expiresInSeconds * 1000,\n      expiresInSeconds,\n    };\n\n    return [];\n  },\n});\n\n/**\n * Handle device code completed\n */\nconst deviceCodeCompletedRule = defineRule<ApplicationEngineContext>({\n  id: 'application.deviceCodeCompleted',\n  description: 'Handle device code flow completed',\n  meta: {\n    triggers: ['DEVICE_CODE_COMPLETED'],\n  },\n  impl: (state, events) => {\n    const completedEvent = findEvent(events, DeviceCodeCompletedAppEvent);\n    if (!completedEvent) return [];\n\n    if (state.context.deviceCodeSession?.connectionId === completedEvent.payload.connectionId) {\n      state.context.deviceCodeSession = undefined;\n    }\n\n    return [];\n  },\n});\n\n/**\n * Handle device code cancelled\n */\nconst deviceCodeCancelledRule = defineRule<ApplicationEngineContext>({\n  id: 'application.deviceCodeCancelled',\n  description: 'Handle device code flow cancelled',\n  meta: {\n    triggers: ['DEVICE_CODE_CANCELLED'],\n  },\n  impl: (state, events) => {\n    const cancelledEvent = findEvent(events, DeviceCodeCancelledEvent);\n    if (!cancelledEvent) return [];\n\n    if (state.context.deviceCodeSession?.connectionId === cancelledEvent.payload.connectionId) {\n      state.context.deviceCodeSession = undefined;\n    }\n\n    return [];\n  },\n});\n\n// ============================================================================\n// Auth Code Flow Rules\n// ============================================================================\n\n/**\n * Handle auth code flow started\n */\nconst authCodeFlowStartedRule = defineRule<ApplicationEngineContext>({\n  id: 'application.authCodeFlowStarted',\n  description: 'Handle authorization code flow with PKCE started',\n  meta: {\n    triggers: ['AUTH_CODE_FLOW_STARTED'],\n  },\n  impl: (state, events) => {\n    const startedEvent = findEvent(events, AuthCodeFlowStartedAppEvent);\n    if (!startedEvent) return [];\n\n    const { connectionId, authorizationUrl, expiresInSeconds } = startedEvent.payload;\n    const now = getClock(state).now();\n\n    state.context.authCodeFlowSession = {\n      connectionId,\n      authorizationUrl,\n      startedAt: now,\n      expiresAt: now + expiresInSeconds * 1000,\n      expiresInSeconds,\n    };\n\n    return [];\n  },\n});\n\n/**\n * Handle auth code flow completed\n */\nconst authCodeFlowCompletedRule = defineRule<ApplicationEngineContext>({\n  id: 'application.authCodeFlowCompleted',\n  description: 'Handle authorization code flow with PKCE completed',\n  meta: {\n    triggers: ['AUTH_CODE_FLOW_COMPLETED'],\n  },\n  impl: (state, events) => {\n    const completedEvent = findEvent(events, AuthCodeFlowCompletedAppEvent);\n    if (!completedEvent) return [];\n\n    if (state.context.authCodeFlowSession?.connectionId === completedEvent.payload.connectionId) {\n      state.context.authCodeFlowSession = undefined;\n    }\n\n    return [];\n  },\n});\n\n// ============================================================================\n// Error Handling Rules\n// ============================================================================\n\n/**\n * Handle application error\n */\nconst applicationErrorRule = defineRule<ApplicationEngineContext>({\n  id: 'application.error',\n  description: 'Handle application error',\n  meta: {\n    triggers: ['APPLICATION_ERROR'],\n  },\n  impl: (state, events) => {\n    const errorEvent = findEvent(events, ApplicationErrorEvent);\n    if (!errorEvent) return [];\n\n    state.context.lastError = {\n      message: errorEvent.payload.error,\n      connectionId: errorEvent.payload.connectionId,\n    };\n\n    // Do not transition to error_recovery, just log the error\n    // if (state.context.applicationState === 'active') {\n    //   state.context.applicationState = 'error_recovery';\n    //   state.context.errorRecoveryAttempts++;\n    // }\n\n    return [];\n  },\n});\n\n/**\n * Handle retry\n */\nconst retryRule = defineRule<ApplicationEngineContext>({\n  id: 'application.retry',\n  description: 'Retry after error',\n  meta: {\n    triggers: ['RETRY'],\n    transition: { from: ['error_recovery', 'activation_error'], to: 'active' },\n  },\n  impl: (state, events) => {\n    const retryEvent = findEvent(events, RetryApplicationEvent);\n    if (!retryEvent) return [];\n\n    if (state.context.applicationState !== 'error_recovery' && state.context.applicationState !== 'activation_error') return [];\n\n    state.context.lastError = undefined;\n    state.context.applicationState = 'active';\n\n    return [];\n  },\n});\n\n/**\n * Handle reset\n */\nconst resetRule = defineRule<ApplicationEngineContext>({\n  id: 'application.reset',\n  description: 'Reset application state',\n  meta: {\n    triggers: ['RESET'],\n    transition: { from: '*', to: 'inactive' },\n  },\n  impl: (state, events) => {\n    const resetEvent = findEvent(events, ResetApplicationEvent);\n    if (!resetEvent) return [];\n\n    state.context.applicationState = 'inactive';\n    state.context.isActivated = false;\n    state.context.isDeactivating = false;\n    state.context.lastError = undefined;\n    state.context.errorRecoveryAttempts = 0;\n    state.context.deviceCodeSession = undefined;\n    state.context.authCodeFlowSession = undefined;\n    state.context.pendingWorkItems = undefined;\n\n    return [];\n  },\n});\n\n// ============================================================================\n// Debug Rules\n// ============================================================================\n\n/**\n * Handle toggle debug view\n */\nconst toggleDebugViewRule = defineRule<ApplicationEngineContext>({\n  id: 'application.toggleDebugView',\n  description: 'Toggle debug view visibility',\n  meta: {\n    triggers: ['TOGGLE_DEBUG_VIEW'],\n  },\n  impl: (state, events) => {\n    const toggleEvent = findEvent(events, ToggleDebugViewEvent);\n    if (!toggleEvent) return [];\n\n    if (toggleEvent.payload.debugViewVisible !== undefined) {\n      state.context.debugViewVisible = toggleEvent.payload.debugViewVisible;\n    } else {\n      state.context.debugViewVisible = !state.context.debugViewVisible;\n    }\n\n    return [];\n  },\n});\n\n// ============================================================================\n// Auth Reminder Rules\n// ============================================================================\n\n/**\n * Handle auth reminder requested\n */\nconst authReminderRequestedRule = defineRule<ApplicationEngineContext>({\n  id: 'application.authReminderRequested',\n  description: 'Handle authentication reminder request',\n  meta: {\n    triggers: ['AUTH_REMINDER_REQUESTED'],\n  },\n  impl: (state, events) => {\n    const reminderEvent = findEvent(events, AuthReminderRequestedEvent);\n    if (!reminderEvent) return [];\n\n    const { connectionId, reason, detail } = reminderEvent.payload;\n\n    // Priority 3: Make Map updates immutable (create new Map instance)\n    // Priority 4: Idempotency - check if already exists with same value\n    const existing = state.context.pendingAuthReminders.get(connectionId);\n    const newValue = {\n      connectionId,\n      reason: detail || reason,\n      status: 'pending',\n    };\n    \n    if (!existing || existing.reason !== newValue.reason || existing.status !== newValue.status) {\n      state.context.pendingAuthReminders = new Map(state.context.pendingAuthReminders);\n      state.context.pendingAuthReminders.set(connectionId, newValue);\n    }\n\n    return [];\n  },\n});\n\n/**\n * Handle auth reminder cleared\n */\nconst authReminderClearedRule = defineRule<ApplicationEngineContext>({\n  id: 'application.authReminderCleared',\n  description: 'Handle authentication reminder cleared',\n  meta: {\n    triggers: ['AUTH_REMINDER_CLEARED'],\n  },\n  impl: (state, events) => {\n    const clearedEvent = findEvent(events, AuthReminderClearedEvent);\n    if (!clearedEvent) return [];\n\n    // Priority 3: Make Map updates immutable (create new Map instance)\n    // Priority 4: Idempotency - check if exists before deleting\n    if (state.context.pendingAuthReminders.has(clearedEvent.payload.connectionId)) {\n      state.context.pendingAuthReminders = new Map(state.context.pendingAuthReminders);\n      state.context.pendingAuthReminders.delete(clearedEvent.payload.connectionId);\n    }\n\n    return [];\n  },\n});\n\n/**\n * Handle authentication success\n */\nconst authenticationSuccessRule = defineRule<ApplicationEngineContext>({\n  id: 'application.authenticationSuccess',\n  description: 'Handle authentication success',\n  meta: {\n    triggers: ['AUTHENTICATION_SUCCESS'],\n  },\n  impl: (state, events) => {\n    const successEvent = findEvent(events, AuthenticationSuccessEvent);\n    if (!successEvent) return [];\n\n    const { connectionId } = successEvent.payload;\n\n    // Priority 3: Make Map updates immutable (create new Map instance)\n    // Priority 4: Idempotency - check if exists before deleting\n    if (state.context.pendingAuthReminders.has(connectionId)) {\n      state.context.pendingAuthReminders = new Map(state.context.pendingAuthReminders);\n      state.context.pendingAuthReminders.delete(connectionId);\n    }\n\n    // Idempotency: Only clear if session exists for this connection\n    if (state.context.deviceCodeSession?.connectionId === connectionId) {\n      state.context.deviceCodeSession = undefined;\n    }\n\n    if (state.context.authCodeFlowSession?.connectionId === connectionId) {\n      state.context.authCodeFlowSession = undefined;\n    }\n\n    if (state.context.lastError?.connectionId === connectionId) {\n      state.context.lastError = undefined;\n    }\n\n    return [];\n  },\n});\n\nexport const miscRules = [\n  // Device code\n  deviceCodeStartedRule,\n  deviceCodeCompletedRule,\n  deviceCodeCancelledRule,\n  // Auth code flow\n  authCodeFlowStartedRule,\n  authCodeFlowCompletedRule,\n  // Error handling\n  applicationErrorRule,\n  retryRule,\n  resetRule,\n  // Debug\n  toggleDebugViewRule,\n  // Auth reminders\n  authReminderRequestedRule,\n  authReminderClearedRule,\n  authenticationSuccessRule,\n];\n", "/**\n * Praxis Application Rules Index\n *\n * Aggregates all application rules from separate modules.\n */\n\nexport { lifecycleRules } from './lifecycleRules.js';\nexport { connectionRules } from './connectionRules.js';\nexport { workItemRules } from './workItemRules.js';\nexport { miscRules } from './miscRules.js';\n\n// Re-export individual rules for direct access\nexport * from './lifecycleRules.js';\nexport * from './connectionRules.js';\nexport * from './workItemRules.js';\nexport * from './miscRules.js';\n\nimport { lifecycleRules } from './lifecycleRules.js';\nimport { connectionRules } from './connectionRules.js';\nimport { workItemRules } from './workItemRules.js';\nimport { miscRules } from './miscRules.js';\nimport { timerRules } from '../features/timer.js';\n\n/**\n * All application rules combined\n */\nexport const applicationRules = [\n  ...lifecycleRules,\n  ...connectionRules,\n  ...workItemRules,\n  ...miscRules,\n  ...timerRules,\n];\n", "/**\n * Frontend Application Engine\n *\n * Initializes the Praxis Logic Engine for the webview.\n * This engine runs in \"Replica\" mode, receiving state updates from the backend.\n */\n\nimport { createPraxisEngine, PraxisRegistry } from '@plures/praxis';\nimport { applicationRules } from '../../praxis/application/rules/index.js';\nimport type { ApplicationEngineContext } from '../../praxis/application/engine.js';\nimport { DEFAULT_APPLICATION_CONFIG } from '../../praxis/application/types.js';\n\n// Initial empty context - will be hydrated by SyncStateEvent\nconst initialContext: ApplicationEngineContext = {\n  ...DEFAULT_APPLICATION_CONFIG,\n  applicationState: 'inactive',\n  applicationData: { ...DEFAULT_APPLICATION_CONFIG },\n  timerHistory: { entries: [] },\n  isActivated: false,\n  isDeactivating: false,\n  connections: [],\n  viewMode: 'list',\n  errorRecoveryAttempts: 0,\n  debugLoggingEnabled: false,\n  debugViewVisible: false,\n  connectionStates: new Map(),\n  connectionWorkItems: new Map(),\n};\n\nconst registry = new PraxisRegistry<ApplicationEngineContext>();\nfor (const rule of applicationRules) {\n  registry.registerRule(rule);\n}\n\nexport const frontendEngine = createPraxisEngine<ApplicationEngineContext>({\n  initialContext,\n  registry,\n});\n", "/**\n * Frontend Praxis Store\n *\n * Wraps the frontend engine in a Svelte store with history/undo-redo support.\n * \n * Uses Praxis v1.2.0 features:\n * - createPraxisStore for reactive subscriptions\n * - History tracking for undo/redo (via createHistoryEngine)\n * \n * IMPORTANT: The history engine tracks state snapshots, but undo/redo needs to\n * actually restore the engine state. We implement this by restoring the context\n * from history entries using engine.updateContext().\n */\n\nimport { createPraxisStore, createHistoryEngine } from '@plures/praxis/svelte';\nimport { frontendEngine } from './frontendEngine.js';\nimport type { PraxisEvent } from '@plures/praxis';\nimport type { ApplicationEngineContext } from '../../praxis/application/engine.js';\n\n// Create history-enabled engine wrapper for undo/redo support\n// This tracks state snapshots for time-travel debugging\nconst historyEngine = createHistoryEngine(frontendEngine, {\n  maxHistorySize: 50, // Keep last 50 state snapshots\n});\n\n// Create the main store using the history engine's engine (they're the same)\n// Use historyEngine.dispatch to ensure events are tracked in history\nconst rawStore = createPraxisStore(historyEngine.engine);\n\n// Wrap dispatch to forward to VS Code and track history\n// Use historyEngine.dispatch which handles both step() and history tracking\nconst dispatchWithSync = (events: PraxisEvent[], label?: string) => {\n  // 1. Dispatch through history engine (handles both step and history tracking)\n  historyEngine.dispatch(events, label);\n  \n  // Update history index (history grows, so we're always at the end after dispatch)\n  const historyEntries = historyEngine.getHistory();\n  currentHistoryIndex = historyEntries.length - 1;\n  \n  // Notify test recorder if recording\n  if (typeof (window as any).__historyTestRecorder !== 'undefined') {\n    const recorder = (window as any).__historyTestRecorder;\n    if (recorder && typeof recorder.recordEvent === 'function') {\n      for (const event of events) {\n        recorder.recordEvent(event, label);\n      }\n    }\n  }\n\n  // Note: rawStore.dispatch is not needed here because historyEngine.dispatch\n  // already calls engine.step(), and rawStore subscribes to the same engine\n\n  // 2. Send to Extension Host (but NOT SyncState events - those are one-way from extension)\n  const hasSyncState = events.some((e: any) => e.tag === 'SyncState');\n  if (hasSyncState) {\n    // SyncState events are one-way from extension to webview, don't send them back\n    return;\n  }\n\n  const vscode = (window as any).__vscodeApi;\n  if (vscode) {\n    vscode.postMessage({ type: 'PRAXIS_EVENT', events });\n  } else {\n    // VS Code API not available - this is expected in some contexts\n  }\n};\n\nexport const praxisStore = {\n  subscribe: rawStore.subscribe,\n  dispatch: dispatchWithSync,\n};\n\n// Export dispatch for convenience\nexport const dispatch = dispatchWithSync;\n\n// Track current history index for undo/redo\nlet currentHistoryIndex = 0;\n\n// Initialize history index\nconst initHistory = () => {\n  const historyEntries = historyEngine.getHistory();\n  if (historyEntries.length > 0) {\n    currentHistoryIndex = historyEntries.length - 1;\n  }\n};\ninitHistory();\n\n// Export history/undo-redo functionality with actual state restoration\n// IMPORTANT: createHistoryEngine's undo/redo only navigates history but doesn't restore state.\n// We need to manually restore the engine context from history entries using updateContext.\nexport const history = {\n  undo: () => {\n    if (!historyEngine.canUndo()) {\n      // Cannot undo - no history available\n      return false;\n    }\n    \n    const historyEntries = historyEngine.getHistory();\n    if (currentHistoryIndex > 0) {\n      currentHistoryIndex--;\n      const entry = historyEntries[currentHistoryIndex];\n      \n      if (entry && entry.state && entry.state.context) {\n        // Restore the context from the history entry\n        // Check if engine supports updateContext (ReactiveLogicEngine does)\n        if (typeof (frontendEngine as any).updateContext === 'function') {\n          const contextToRestore = entry.state.context as ApplicationEngineContext;\n          (frontendEngine as any).updateContext(() => contextToRestore);\n          // Undo: Restored state from history entry\n          return true;\n        }\n      }\n    }\n    return false;\n  },\n  redo: () => {\n    if (!historyEngine.canRedo()) {\n      // Cannot redo - at end of history\n      return false;\n    }\n    \n    const historyEntries = historyEngine.getHistory();\n    if (currentHistoryIndex < historyEntries.length - 1) {\n      currentHistoryIndex++;\n      const entry = historyEntries[currentHistoryIndex];\n      \n      if (entry && entry.state && entry.state.context) {\n        // Restore the context from the history entry\n        if (typeof (frontendEngine as any).updateContext === 'function') {\n          const contextToRestore = entry.state.context as ApplicationEngineContext;\n          (frontendEngine as any).updateContext(() => contextToRestore);\n          // Redo: Restored state from history entry\n          return true;\n        }\n      }\n    }\n    return false;\n  },\n  canUndo: () => currentHistoryIndex > 0,\n  canRedo: () => {\n    const historyEntries = historyEngine.getHistory();\n    return currentHistoryIndex < historyEntries.length - 1;\n  },\n  getHistory: () => historyEngine.getHistory(),\n  goToHistory: (index: number) => {\n    const historyEntries = historyEngine.getHistory();\n    if (index >= 0 && index < historyEntries.length) {\n      const entry = historyEntries[index];\n      if (entry && entry.state && entry.state.context) {\n        currentHistoryIndex = index;\n        if (typeof (frontendEngine as any).updateContext === 'function') {\n          const contextToRestore = entry.state.context as ApplicationEngineContext;\n          (frontendEngine as any).updateContext(() => contextToRestore);\n          // Go to history entry\n          return true;\n        }\n      }\n    }\n    return false;\n  },\n  clearHistory: () => {\n    historyEngine.clearHistory();\n    currentHistoryIndex = 0;\n    initHistory();\n  },\n};\n", "/**\n * History Export/Import\n * \n * Provides functionality to export and import history for bug reports and test scenarios.\n */\n\nimport type { ApplicationEngineContext } from '../praxis/application/engine.js';\nimport type { PraxisEvent } from '@plures/praxis';\nimport { history } from '../webview/praxis/store.js';\nimport { frontendEngine } from '../webview/praxis/frontendEngine.js';\nimport type { TestScenario } from '../testing/historyTestRecorder.js';\n\n/**\n * Exported history format\n */\nexport interface ExportedHistory {\n  version: string;\n  timestamp: string;\n  engineType: 'frontend' | 'backend';\n  initialContext: ApplicationEngineContext;\n  entries: Array<{\n    index: number;\n    timestamp: number;\n    label?: string;\n    events: PraxisEvent[];\n    state: {\n      state: string;\n      context: ApplicationEngineContext;\n    };\n  }>;\n  metadata?: {\n    extensionVersion?: string;\n    platform?: string;\n    userAgent?: string;\n  };\n}\n\n/**\n * Export current history\n */\nexport function exportHistory(metadata?: ExportedHistory['metadata']): ExportedHistory {\n  const entries = history.getHistory();\n  \n  const exported: ExportedHistory = {\n    version: '1.0.0',\n    timestamp: new Date().toISOString(),\n    engineType: 'frontend',\n    initialContext: entries[0]?.state.context as ApplicationEngineContext || frontendEngine.getContext(),\n    entries: entries.map((entry, index) => ({\n      index,\n      timestamp: entry.timestamp,\n      label: entry.label,\n      events: entry.events || [],\n      state: {\n        state: entry.state.state,\n        context: entry.state.context as ApplicationEngineContext,\n      },\n    })),\n    metadata: {\n      extensionVersion: '2.12.5', // Could be dynamic\n      platform: typeof navigator !== 'undefined' ? navigator.platform : 'unknown',\n      userAgent: typeof navigator !== 'undefined' ? navigator.userAgent : 'unknown',\n      ...metadata,\n    },\n  };\n  \n  return exported;\n}\n\n/**\n * Export history as JSON string\n */\nexport function exportHistoryAsJSON(metadata?: ExportedHistory['metadata']): string {\n  const exported = exportHistory(metadata);\n  return JSON.stringify(exported, null, 2);\n}\n\n/**\n * Import history from exported format\n */\nexport function importHistory(exported: ExportedHistory): void {\n  // Reset engine to initial state\n  frontendEngine.updateContext(() => exported.initialContext);\n  history.clearHistory();\n  \n  // Replay events\n  for (const entry of exported.entries) {\n    if (entry.events.length > 0) {\n      frontendEngine.step(entry.events);\n    }\n  }\n  \n  // Debug statement removed\n}\n\n/**\n * Import history from JSON string\n */\nexport function importHistoryFromJSON(json: string): void {\n  try {\n    const exported = JSON.parse(json) as ExportedHistory;\n    importHistory(exported);\n  } catch (error) {\n    throw new Error(`Failed to parse history JSON: ${error}`);\n  }\n}\n\n/**\n * Convert exported history to test scenario\n */\nexport function historyToTestScenario(\n  exported: ExportedHistory,\n  scenarioId: string,\n  scenarioName: string,\n  description?: string\n): TestScenario {\n  return {\n    id: scenarioId,\n    name: scenarioName,\n    description,\n    timestamp: exported.timestamp,\n    initialContext: exported.initialContext,\n    events: exported.entries.flatMap(entry => \n      entry.events.map(event => ({\n        event,\n        label: entry.label,\n        timestamp: entry.timestamp,\n        stateAfter: entry.state.state,\n      }))\n    ),\n    finalContext: exported.entries[exported.entries.length - 1]?.state.context || exported.initialContext,\n    metadata: {\n      tags: ['imported', 'history'],\n      version: exported.version,\n    },\n  };\n}\n\n/**\n * Copy history to clipboard (for bug reports)\n */\nexport async function copyHistoryToClipboard(metadata?: ExportedHistory['metadata']): Promise<void> {\n  const json = exportHistoryAsJSON(metadata);\n  \n  if (typeof navigator !== 'undefined' && navigator.clipboard) {\n    await navigator.clipboard.writeText(json);\n    // Debug statement removed\n  } else {\n    // Fallback for environments without clipboard API\n    // Log statement removed\n    throw new Error('Clipboard API not available');\n  }\n}\n\n", "/**\n * History Test Recorder\n * \n * Records Praxis engine state transitions and events to create test scenarios\n * that can be replayed for automated testing and regression detection.\n */\n\nimport type { PraxisEvent } from '@plures/praxis';\nimport type { ApplicationEngineContext } from '../praxis/application/engine.js';\nimport { history } from '../webview/praxis/store.js';\nimport { frontendEngine } from '../webview/praxis/frontendEngine.js';\n\n/**\n * A recorded test scenario containing initial state, events, and final state\n */\nexport interface TestScenario {\n  id: string;\n  name: string;\n  description?: string;\n  timestamp: string;\n  initialContext: ApplicationEngineContext;\n  events: Array<{\n    event: PraxisEvent;\n    label?: string;\n    expectedState?: Partial<ApplicationEngineContext>;\n    timestamp: number;\n    stateAfter: string;\n  }>;\n  finalContext: ApplicationEngineContext;\n  metadata?: {\n    tags?: string[];\n    author?: string;\n    version?: string;\n  };\n}\n\n/**\n * Options for recording test scenarios\n */\nexport interface RecordingOptions {\n  autoLabel?: boolean; // Automatically label events based on event type\n  captureExpectedState?: boolean; // Capture expected state after each event\n  maxDuration?: number; // Maximum recording duration in milliseconds\n}\n\n/**\n * History Test Recorder\n * \n * Records engine state transitions and events to create replayable test scenarios.\n */\nexport class HistoryTestRecorder {\n  private scenario: TestScenario | null = null;\n  private startTime: number = 0;\n  private options: RecordingOptions;\n  private eventLabels: Map<string, string> = new Map();\n  \n  constructor(options: RecordingOptions = {}) {\n    this.options = {\n      autoLabel: true,\n      captureExpectedState: true,\n      ...options,\n    };\n  }\n  \n  /**\n   * Start recording a new test scenario\n   */\n  startRecording(\n    scenarioId: string,\n    scenarioName: string,\n    description?: string,\n    metadata?: TestScenario['metadata']\n  ): void {\n    if (this.scenario) {\n      throw new Error('Recording already in progress. Call stopRecording() first.');\n    }\n    \n    // Clear history to start fresh\n    history.clearHistory();\n    \n    // Capture initial state\n    const initialContext = frontendEngine.getContext();\n    this.startTime = Date.now();\n    \n    this.scenario = {\n      id: scenarioId,\n      name: scenarioName,\n      description,\n      timestamp: new Date().toISOString(),\n      initialContext: this.deepClone(initialContext),\n      events: [],\n      finalContext: initialContext,\n      metadata: metadata || {},\n    };\n    \n    // Recording started (logging disabled to satisfy ESLint)\n  }\n  \n  /**\n   * Stop recording and return the test scenario\n   */\n  stopRecording(): TestScenario {\n    if (!this.scenario) {\n      throw new Error('No active recording. Call startRecording() first.');\n    }\n    \n    // Capture final state\n    this.scenario.finalContext = this.deepClone(frontendEngine.getContext());\n    \n    const scenario = this.scenario;\n    this.scenario = null;\n    \n    // Recording stopped (logging disabled to satisfy ESLint)\n    \n    return scenario;\n  }\n  \n  /**\n   * Record an event (called automatically when events are dispatched)\n   */\n  recordEvent(event: PraxisEvent, label?: string): void {\n    if (!this.scenario) {\n      return; // Not recording\n    }\n    \n    // Check max duration\n    if (this.options.maxDuration) {\n      const elapsed = Date.now() - this.startTime;\n      if (elapsed > this.options.maxDuration) {\n        // Max duration exceeded - stop recording\n        this.stopRecording();\n        return;\n      }\n    }\n    \n    // Get state after event\n    const stateAfter = frontendEngine.getContext().applicationState;\n    \n    // Auto-generate label if needed\n    const eventLabel = label || (this.options.autoLabel ? this.generateLabel(event) : undefined);\n    \n    // Capture expected state if enabled\n    let expectedState: Partial<ApplicationEngineContext> | undefined;\n    if (this.options.captureExpectedState) {\n      expectedState = this.extractRelevantState(frontendEngine.getContext());\n    }\n    \n    this.scenario.events.push({\n      event,\n      label: eventLabel,\n      expectedState,\n      timestamp: Date.now(),\n      stateAfter,\n    });\n    \n    // Event recorded (logging disabled to satisfy ESLint)\n  }\n  \n  /**\n   * Check if currently recording\n   */\n  isRecording(): boolean {\n    return this.scenario !== null;\n  }\n  \n  /**\n   * Get current scenario (if recording)\n   */\n  getCurrentScenario(): TestScenario | null {\n    return this.scenario ? { ...this.scenario } : null;\n  }\n  \n  /**\n   * Add a label for a specific event type\n   */\n  setEventLabel(eventTag: string, label: string): void {\n    this.eventLabels.set(eventTag, label);\n  }\n  \n  /**\n   * Generate a human-readable label for an event\n   */\n  private generateLabel(event: PraxisEvent): string {\n    // Check if we have a custom label\n    if (this.eventLabels.has(event.tag)) {\n      return this.eventLabels.get(event.tag)!;\n    }\n    \n    // Generate label from event tag\n    return event.tag\n      .replace(/_/g, ' ')\n      .replace(/([A-Z])/g, ' $1')\n      .trim()\n      .toLowerCase()\n      .replace(/\\b\\w/g, (l) => l.toUpperCase());\n  }\n  \n  /**\n   * Extract relevant state for expected state comparison\n   */\n  private extractRelevantState(context: ApplicationEngineContext): Partial<ApplicationEngineContext> {\n    // Extract only key fields that are likely to change\n    return {\n      applicationState: context.applicationState,\n      isActivated: context.isActivated,\n      isDeactivating: context.isDeactivating,\n      connections: context.connections,\n      activeConnectionId: context.activeConnectionId,\n      errorRecoveryAttempts: context.errorRecoveryAttempts,\n      lastError: context.lastError,\n      // Add more fields as needed\n    };\n  }\n  \n  /**\n   * Deep clone context to avoid mutations\n   */\n  private deepClone<T>(obj: T): T {\n    return JSON.parse(JSON.stringify(obj));\n  }\n}\n\n/**\n * Global recorder instance (for webview)\n */\nlet globalRecorder: HistoryTestRecorder | null = null;\n\n/**\n * Get or create the global recorder instance\n */\nexport function getHistoryTestRecorder(): HistoryTestRecorder {\n  if (!globalRecorder) {\n    globalRecorder = new HistoryTestRecorder();\n  }\n  return globalRecorder;\n}\n\n/**\n * Start recording a test scenario\n */\nexport function startRecording(\n  scenarioId: string,\n  scenarioName: string,\n  description?: string,\n  metadata?: TestScenario['metadata']\n): void {\n  const recorder = getHistoryTestRecorder();\n  recorder.startRecording(scenarioId, scenarioName, description, metadata);\n}\n\n/**\n * Stop recording and return the scenario\n */\nexport function stopRecording(): TestScenario {\n  const recorder = getHistoryTestRecorder();\n  return recorder.stopRecording();\n}\n\n/**\n * Check if currently recording\n */\nexport function isRecording(): boolean {\n  const recorder = getHistoryTestRecorder();\n  return recorder.isRecording();\n}\n\n", "/**\n * Event Replay Debugger\n * \n * Provides step-by-step event replay with breakpoints for debugging.\n */\n\nimport type { ApplicationEngineContext } from '../praxis/application/engine.js';\nimport type { PraxisEvent } from '@plures/praxis';\nimport { history } from '../webview/praxis/store.js';\nimport { frontendEngine } from '../webview/praxis/frontendEngine.js';\nimport type { TestScenario } from '../testing/historyTestRecorder.js';\n\n/**\n * Options for event replay\n */\nexport interface ReplayOptions {\n  stepDelay?: number; // Delay between steps in milliseconds\n  pauseOnBreakpoint?: boolean; // Pause when hitting a breakpoint\n  onStep?: (index: number, event: PraxisEvent, context: ApplicationEngineContext) => void;\n  onBreakpoint?: (index: number, event: PraxisEvent) => void;\n}\n\n/**\n * Event Replay Debugger\n * \n * Replays events step-by-step with breakpoint support for debugging.\n */\nexport class EventReplayDebugger {\n  private breakpoints: Set<number> = new Set();\n  private paused: boolean = false;\n  private resumeCallbacks: Array<() => void> = [];\n  \n  /**\n   * Set a breakpoint at a specific event index\n   */\n  setBreakpoint(index: number): void {\n    this.breakpoints.add(index);\n    // Debug statement removed\n  }\n  \n  /**\n   * Remove a breakpoint\n   */\n  removeBreakpoint(index: number): void {\n    this.breakpoints.delete(index);\n    // Debug statement removed\n  }\n  \n  /**\n   * Clear all breakpoints\n   */\n  clearBreakpoints(): void {\n    this.breakpoints.clear();\n    // Debug statement removed\n  }\n  \n  /**\n   * Get all breakpoints\n   */\n  getBreakpoints(): number[] {\n    return Array.from(this.breakpoints).sort((a, b) => a - b);\n  }\n  \n  /**\n   * Replay a test scenario with breakpoint support\n   */\n  async replay(\n    scenario: TestScenario,\n    options: ReplayOptions = {}\n  ): Promise<void> {\n    const {\n      stepDelay = 0,\n      pauseOnBreakpoint = true,\n      onStep,\n      onBreakpoint,\n    } = options;\n    \n    // Reset to initial state\n    frontendEngine.updateContext(() => scenario.initialContext);\n    history.clearHistory();\n    \n    // Debug statement removed\n    \n    for (let i = 0; i < scenario.events.length; i++) {\n      const eventData = scenario.events[i];\n      \n      // Check for breakpoint\n      if (this.breakpoints.has(i) && pauseOnBreakpoint) {\n        this.paused = true;\n        // Debug statement removed\n        \n        if (onBreakpoint) {\n          onBreakpoint(i, eventData.event);\n        }\n        \n        // Wait for resume\n        await this.waitForResume();\n      }\n      \n      // Dispatch event\n      frontendEngine.step([eventData.event]);\n      \n      // Call step callback\n      if (onStep) {\n        const context = frontendEngine.getContext();\n        onStep(i, eventData.event, context);\n      }\n      \n      // Log state after each step\n      const context = frontendEngine.getContext();\n      // Debug statement removed\n      \n      // Wait if step delay specified\n      if (stepDelay > 0) {\n        await new Promise(resolve => setTimeout(resolve, stepDelay));\n      }\n    }\n    \n    // Debug statement removed\n  }\n  \n  /**\n   * Replay from history entries\n   */\n  async replayHistory(\n    startIndex: number = 0,\n    endIndex?: number,\n    options: ReplayOptions = {}\n  ): Promise<void> {\n    const historyEntries = history.getHistory();\n    const end = endIndex !== undefined ? endIndex : historyEntries.length - 1;\n    \n    // Reset to start state\n    if (startIndex > 0 && historyEntries[startIndex - 1]) {\n      const startEntry = historyEntries[startIndex - 1];\n      frontendEngine.updateContext(() => startEntry.state.context as ApplicationEngineContext);\n    } else {\n      frontendEngine.updateContext(() => historyEntries[0].state.context as ApplicationEngineContext);\n    }\n    \n    const {\n      stepDelay = 0,\n      pauseOnBreakpoint = true,\n      onStep,\n      onBreakpoint,\n    } = options;\n    \n    for (let i = startIndex; i <= end; i++) {\n      const entry = historyEntries[i];\n      if (!entry || !entry.events || entry.events.length === 0) {\n        continue;\n      }\n      \n      // Check for breakpoint\n      if (this.breakpoints.has(i) && pauseOnBreakpoint) {\n        this.paused = true;\n        // Debug statement removed\n        \n        if (onBreakpoint && entry.events[0]) {\n          onBreakpoint(i, entry.events[0]);\n        }\n        \n        await this.waitForResume();\n      }\n      \n      // Replay events\n      for (const event of entry.events) {\n        frontendEngine.step([event]);\n        \n        if (onStep) {\n          const context = frontendEngine.getContext();\n          onStep(i, event, context);\n        }\n      }\n      \n      if (stepDelay > 0) {\n        await new Promise(resolve => setTimeout(resolve, stepDelay));\n      }\n    }\n  }\n  \n  /**\n   * Step forward one event\n   */\n  async stepForward(scenario: TestScenario, currentIndex: number): Promise<number> {\n    if (currentIndex >= scenario.events.length) {\n      return currentIndex;\n    }\n    \n    const eventData = scenario.events[currentIndex];\n    frontendEngine.step([eventData.event]);\n    \n    const context = frontendEngine.getContext();\n    // Debug statement removed\n    \n    return currentIndex + 1;\n  }\n  \n  /**\n   * Step backward one event\n   */\n  async stepBackward(scenario: TestScenario, currentIndex: number): Promise<number> {\n    if (currentIndex <= 0) {\n      return currentIndex;\n    }\n    \n    // Go to previous history entry\n    history.goToHistory(currentIndex - 1);\n    \n    // Debug statement removed\n    \n    return currentIndex - 1;\n  }\n  \n  /**\n   * Resume from pause\n   */\n  resume(): void {\n    if (this.paused) {\n      this.paused = false;\n      // Debug statement removed\n      \n      // Call all resume callbacks\n      for (const callback of this.resumeCallbacks) {\n        callback();\n      }\n      this.resumeCallbacks = [];\n    }\n  }\n  \n  /**\n   * Pause replay\n   */\n  pause(): void {\n    this.paused = true;\n    // Debug statement removed\n  }\n  \n  /**\n   * Check if currently paused\n   */\n  isPaused(): boolean {\n    return this.paused;\n  }\n  \n  /**\n   * Wait for resume signal\n   */\n  private async waitForResume(): Promise<void> {\n    return new Promise((resolve) => {\n      if (!this.paused) {\n        resolve();\n        return;\n      }\n      \n      this.resumeCallbacks.push(() => {\n        resolve();\n      });\n    });\n  }\n}\n\n/**\n * Global debugger instance\n */\nlet globalDebugger: EventReplayDebugger | null = null;\n\n/**\n * Get or create the global debugger instance\n */\nexport function getEventReplayDebugger(): EventReplayDebugger {\n  if (!globalDebugger) {\n    globalDebugger = new EventReplayDebugger();\n  }\n  return globalDebugger;\n}\n\n", "/**\n * History Debug Commands\n * \n * VS Code commands for history debugging functionality.\n */\n\nimport * as vscode from 'vscode';\nimport { exportHistoryAsJSON, importHistoryFromJSON, copyHistoryToClipboard } from '../debugging/historyExport.js';\nimport { startRecording, stopRecording, isRecording } from '../testing/historyTestRecorder.js';\nimport { getEventReplayDebugger } from '../debugging/eventReplayDebugger.js';\n\n/**\n * Register all history debug commands\n */\nexport function registerHistoryDebugCommands(context: vscode.ExtensionContext): void {\n  // Export history for bug report\n  const exportHistoryCommand = vscode.commands.registerCommand(\n    'azureDevOpsInt.debug.history.export',\n    async () => {\n      try {\n        const json = exportHistoryAsJSON();\n        \n        // Save to file\n        const uri = await vscode.window.showSaveDialog({\n          defaultUri: vscode.Uri.file('history-export.json'),\n          filters: {\n            'JSON Files': ['json'],\n          },\n        });\n        \n        if (uri) {\n          await vscode.workspace.fs.writeFile(uri, Buffer.from(json, 'utf-8'));\n          vscode.window.showInformationMessage('History exported successfully');\n        }\n      } catch (error) {\n        vscode.window.showErrorMessage(`Failed to export history: ${error}`);\n      }\n    }\n  );\n  \n  // Import history from file\n  const importHistoryCommand = vscode.commands.registerCommand(\n    'azureDevOpsInt.debug.history.import',\n    async () => {\n      try {\n        const uri = await vscode.window.showOpenDialog({\n          filters: {\n            'JSON Files': ['json'],\n          },\n          canSelectMany: false,\n        });\n        \n        if (uri && uri[0]) {\n          const content = await vscode.workspace.fs.readFile(uri[0]);\n          const json = content.toString();\n          importHistoryFromJSON(json);\n          vscode.window.showInformationMessage('History imported successfully');\n        }\n      } catch (error) {\n        vscode.window.showErrorMessage(`Failed to import history: ${error}`);\n      }\n    }\n  );\n  \n  // Copy history to clipboard\n  const copyHistoryCommand = vscode.commands.registerCommand(\n    'azureDevOpsInt.debug.history.copy',\n    async () => {\n      try {\n        await copyHistoryToClipboard();\n        vscode.window.showInformationMessage('History copied to clipboard');\n      } catch (error) {\n        vscode.window.showErrorMessage(`Failed to copy history: ${error}`);\n      }\n    }\n  );\n  \n  // Start recording test scenario\n  const startRecordingCommand = vscode.commands.registerCommand(\n    'azureDevOpsInt.debug.history.startRecording',\n    async () => {\n      try {\n        const scenarioId = await vscode.window.showInputBox({\n          prompt: 'Enter scenario ID',\n          placeHolder: 'test-001',\n        });\n        \n        if (!scenarioId) {\n          return;\n        }\n        \n        const scenarioName = await vscode.window.showInputBox({\n          prompt: 'Enter scenario name',\n          placeHolder: 'User workflow test',\n        });\n        \n        if (!scenarioName) {\n          return;\n        }\n        \n        startRecording(scenarioId, scenarioName);\n        vscode.window.showInformationMessage(`Started recording: ${scenarioName}`);\n      } catch (error) {\n        vscode.window.showErrorMessage(`Failed to start recording: ${error}`);\n      }\n    }\n  );\n  \n  // Stop recording and save scenario\n  const stopRecordingCommand = vscode.commands.registerCommand(\n    'azureDevOpsInt.debug.history.stopRecording',\n    async () => {\n      try {\n        if (!isRecording()) {\n          vscode.window.showWarningMessage('No active recording');\n          return;\n        }\n        \n        const scenario = stopRecording();\n        \n        // Save to file\n        const uri = await vscode.window.showSaveDialog({\n          defaultUri: vscode.Uri.file(`${scenario.id}.json`),\n          filters: {\n            'JSON Files': ['json'],\n          },\n        });\n        \n        if (uri) {\n          await vscode.workspace.fs.writeFile(\n            uri,\n            Buffer.from(JSON.stringify(scenario, null, 2), 'utf-8')\n          );\n          vscode.window.showInformationMessage(`Scenario saved: ${scenario.name}`);\n        }\n      } catch (error) {\n        vscode.window.showErrorMessage(`Failed to stop recording: ${error}`);\n      }\n    }\n  );\n  \n  // Clear breakpoints\n  const clearBreakpointsCommand = vscode.commands.registerCommand(\n    'azureDevOpsInt.debug.history.clearBreakpoints',\n    () => {\n      const replayDebugger = getEventReplayDebugger();\n      replayDebugger.clearBreakpoints();\n      vscode.window.showInformationMessage('All breakpoints cleared');\n    }\n  );\n  \n  context.subscriptions.push(\n    exportHistoryCommand,\n    importHistoryCommand,\n    copyHistoryCommand,\n    startRecordingCommand,\n    stopRecordingCommand,\n    clearBreakpointsCommand\n  );\n}\n\n", "/**\n * Automated Test Generator\n * \n * Generates test code automatically from recorded history or exported scenarios.\n */\n\nimport type { TestScenario } from './historyTestRecorder.js';\nimport type { ExportedHistory } from '../debugging/historyExport.js';\nimport { historyToTestScenario } from '../debugging/historyExport.js';\n\n/**\n * Test framework options\n */\nexport type TestFramework = 'vitest' | 'jest' | 'mocha';\n\n/**\n * Test generation options\n */\nexport interface TestGenerationOptions {\n  framework?: TestFramework;\n  includeSnapshots?: boolean;\n  includeComments?: boolean;\n  indentSize?: number;\n  testName?: string;\n  describeName?: string;\n}\n\n/**\n * Default options\n */\nconst defaultOptions: Required<TestGenerationOptions> = {\n  framework: 'vitest',\n  includeSnapshots: true,\n  includeComments: true,\n  indentSize: 2,\n  testName: 'generated-test',\n  describeName: 'Generated Tests',\n};\n\n/**\n * Generate test code from a test scenario\n */\nexport function generateTestFromScenario(\n  scenario: TestScenario,\n  options: TestGenerationOptions = {}\n): string {\n  const opts = { ...defaultOptions, ...options };\n  const indent = ' '.repeat(opts.indentSize);\n  \n  const lines: string[] = [];\n  \n  // Collect event imports\n  const eventImports = new Set<string>();\n  for (const eventData of scenario.events) {\n    const eventTag = eventData.event.tag || 'UNKNOWN_EVENT';\n    const eventName = convertEventTagToName(eventTag);\n    eventImports.add(eventName);\n  }\n  \n  // Add imports\n  lines.push(generateImports(opts.framework, eventImports));\n  lines.push('');\n  \n  // Add describe block\n  if (opts.includeComments) {\n    lines.push('/**');\n    lines.push(` * Generated test from scenario: ${scenario.name}`);\n    lines.push(` * Original ID: ${scenario.id}`);\n    lines.push(` * Generated: ${new Date().toISOString()}`);\n    lines.push(' */');\n  }\n  \n  lines.push(`describe('${opts.describeName}', () => {`);\n  \n  // Add beforeEach if needed\n  if (opts.framework === 'vitest') {\n    lines.push(`${indent}beforeEach(() => {`);\n    lines.push(`${indent}${indent}resetEngine();`);\n    lines.push(`${indent}});`);\n    lines.push('');\n  }\n  \n  // Generate test\n  const testName = opts.testName || scenario.name.toLowerCase().replace(/\\s+/g, '-');\n  lines.push(`${indent}it('${testName}', async () => {`);\n  \n  // Generate event dispatches\n  for (let i = 0; i < scenario.events.length; i++) {\n    const eventData = scenario.events[i];\n    \n    if (opts.includeComments && eventData.label) {\n      lines.push(`${indent}${indent}// ${eventData.label}`);\n    }\n    \n    const eventCode = generateEventCode(eventData.event, opts.indentSize * 2);\n    lines.push(`${indent}${indent}dispatch([${eventCode}]);`);\n    \n    // Add wait for state if we have expected state\n    if (eventData.expectedState && eventData.expectedState.applicationState) {\n      const expectedState = eventData.expectedState.applicationState;\n      lines.push(`${indent}${indent}await waitForStateValue('${expectedState}');`);\n    } else if (eventData.stateAfter) {\n      lines.push(`${indent}${indent}await waitForStateValue('${eventData.stateAfter}');`);\n    }\n    \n    lines.push('');\n  }\n  \n  // Add assertions\n  lines.push(`${indent}${indent}// Verify final state`);\n  lines.push(`${indent}${indent}const context = getContext();`);\n  \n  if (scenario.finalContext.applicationState) {\n    lines.push(`${indent}${indent}expect(context.applicationState).toBe('${scenario.finalContext.applicationState}');`);\n  }\n  \n  if (scenario.finalContext.connections) {\n    lines.push(`${indent}${indent}expect(context.connections.length).toBe(${scenario.finalContext.connections.length});`);\n  }\n  \n  if (scenario.finalContext.activeConnectionId) {\n    lines.push(`${indent}${indent}expect(context.activeConnectionId).toBe('${scenario.finalContext.activeConnectionId}');`);\n  }\n  \n  // Add snapshot if requested\n  if (opts.includeSnapshots && opts.framework === 'vitest') {\n    lines.push('');\n    lines.push(`${indent}${indent}// Snapshot test`);\n    lines.push(`${indent}${indent}expect(context).toMatchSnapshot();`);\n  }\n  \n  lines.push(`${indent}});`);\n  lines.push('});');\n  \n  return lines.join('\\n');\n}\n\n/**\n * Generate test code from exported history\n */\nexport function generateTestFromHistory(\n  exported: ExportedHistory,\n  options: TestGenerationOptions = {}\n): string {\n  const scenario = historyToTestScenario(\n    exported,\n    options.testName || 'generated-from-history',\n    options.testName || 'Generated from History'\n  );\n  \n  return generateTestFromScenario(scenario, options);\n}\n\n/**\n * Generate imports for test framework\n */\nfunction generateImports(framework: TestFramework, eventImports: Set<string> = new Set()): string {\n  const imports: string[] = [];\n  \n  if (framework === 'vitest') {\n    imports.push(\"import { describe, it, expect, beforeEach } from 'vitest';\");\n  } else if (framework === 'jest') {\n    imports.push(\"import { describe, it, expect, beforeEach } from '@jest/globals';\");\n  } else {\n    imports.push(\"import { describe, it } from 'mocha';\");\n    imports.push(\"import { expect } from 'chai';\");\n  }\n  \n  imports.push(\"import { resetEngine, dispatch, waitForStateValue, getContext } from '../../../src/testing/helpers.js';\");\n  \n  // Add event imports if provided\n  if (eventImports.size > 0) {\n    const eventNames = Array.from(eventImports).sort();\n    imports.push(`import { ${eventNames.join(', ')} } from '../../../src/praxis/application/facts.js';`);\n  }\n  \n  return imports.join('\\n');\n}\n\n/**\n * Convert event tag to event name\n */\nfunction convertEventTagToName(eventTag: string): string {\n  // Convert EVENT_TAG to EventTagEvent\n  const parts = eventTag.split('_');\n  const camelCase = parts.map(part => \n    part.charAt(0).toUpperCase() + part.slice(1).toLowerCase()\n  ).join('');\n  return camelCase + 'Event';\n}\n\n/**\n * Generate event code from event object\n */\nfunction generateEventCode(event: any, indent: number): string {\n  const eventTag = event.tag || 'UNKNOWN_EVENT';\n  const payload = event.payload || {};\n  \n  // Convert event tag to event name\n  const eventName = convertEventTagToName(eventTag);\n  \n  // Generate payload code\n  const payloadCode = generatePayloadCode(payload, indent + 2);\n  \n  return `${eventName}.create(${payloadCode})`;\n}\n\n/**\n * Generate payload code\n */\nfunction generatePayloadCode(payload: any, indent: number): string {\n  if (!payload || Object.keys(payload).length === 0) {\n    return '{}';\n  }\n  \n  const indentStr = ' '.repeat(indent);\n  const lines: string[] = [];\n  \n  lines.push('{');\n  \n  for (const [key, value] of Object.entries(payload)) {\n    const valueCode = generateValueCode(value, indent);\n    lines.push(`${indentStr}${key}: ${valueCode},`);\n  }\n  \n  lines.push(' '.repeat(indent - 2) + '}');\n  \n  return lines.join('\\n');\n}\n\n/**\n * Generate code for a value\n */\nfunction generateValueCode(value: any, indent: number): string {\n  if (value === null) return 'null';\n  if (value === undefined) return 'undefined';\n  \n  if (typeof value === 'string') {\n    return `'${value.replace(/'/g, \"\\\\'\")}'`;\n  }\n  \n  if (typeof value === 'number' || typeof value === 'boolean') {\n    return String(value);\n  }\n  \n  if (Array.isArray(value)) {\n    if (value.length === 0) return '[]';\n    const items = value.map(v => generateValueCode(v, indent)).join(', ');\n    return `[${items}]`;\n  }\n  \n  if (typeof value === 'object') {\n    if (value instanceof Map) {\n      const entries = Array.from(value.entries()).map(([k, v]) => \n        `['${k}', ${generateValueCode(v, indent)}]`\n      ).join(', ');\n      return `new Map([${entries}])`;\n    }\n    \n    const keys = Object.keys(value);\n    if (keys.length === 0) return '{}';\n    \n    const indentStr = ' '.repeat(indent);\n    const lines: string[] = [];\n    lines.push('{');\n    \n    for (const [key, val] of Object.entries(value)) {\n      lines.push(`${indentStr}${key}: ${generateValueCode(val, indent + 2)},`);\n    }\n    \n    lines.push(' '.repeat(indent - 2) + '}');\n    return lines.join('\\n');\n  }\n  \n  return JSON.stringify(value);\n}\n\n/**\n * Generate snapshot test from scenario\n */\nexport function generateSnapshotTest(\n  scenario: TestScenario,\n  options: TestGenerationOptions = {}\n): string {\n  const opts = { ...defaultOptions, ...options };\n  const indent = ' '.repeat(opts.indentSize);\n  \n  const lines: string[] = [];\n  \n  lines.push(generateImports(opts.framework));\n  lines.push(\"import { createSnapshotTest } from '../../../src/testing/snapshotTesting.js';\");\n  lines.push('');\n  \n  // Generate event imports\n  const eventImports = new Set<string>();\n  for (const eventData of scenario.events) {\n    const eventTag = eventData.event.tag || 'UNKNOWN_EVENT';\n    const eventName = convertEventTagToName(eventTag);\n    eventImports.add(eventName);\n  }\n  \n  // Add event imports\n  if (eventImports.size > 0) {\n    const eventNames = Array.from(eventImports).sort();\n    lines.push(`import { ${eventNames.join(', ')} } from '../../../src/praxis/application/facts.js';`);\n    lines.push('');\n  }\n  \n  lines.push(`describe('${opts.describeName}', () => {`);\n  lines.push(`${indent}it('${opts.testName}', () => {`);\n  lines.push(`${indent}${indent}const testFn = createSnapshotTest({`);\n  lines.push(`${indent}${indent}${indent}name: '${scenario.name}',`);\n  lines.push(`${indent}${indent}${indent}events: [`);\n  \n  for (const eventData of scenario.events) {\n    const eventCode = generateEventCode(eventData.event, opts.indentSize * 3);\n    lines.push(`${indent}${indent}${indent}${indent}${eventCode},`);\n  }\n  \n  lines.push(`${indent}${indent}${indent}],`);\n  lines.push(`${indent}${indent}${indent}expectedSnapshots: [`);\n  \n  // Generate expected snapshots\n  for (let i = 0; i < scenario.events.length; i++) {\n    const eventData = scenario.events[i];\n    if (eventData.stateAfter) {\n      lines.push(`${indent}${indent}${indent}${indent}{`);\n      lines.push(`${indent}${indent}${indent}${indent}${indent}index: ${i + 1},`);\n      lines.push(`${indent}${indent}${indent}${indent}${indent}state: '${eventData.stateAfter}',`);\n      lines.push(`${indent}${indent}${indent}${indent}${indent}contextChecks: (ctx) => ctx.applicationState === '${eventData.stateAfter}',`);\n      lines.push(`${indent}${indent}${indent}${indent}},`);\n    }\n  }\n  \n  lines.push(`${indent}${indent}${indent}],`);\n  lines.push(`${indent}${indent}});`);\n  lines.push('');\n  lines.push(`${indent}${indent}expect(() => testFn()).not.toThrow();`);\n  lines.push(`${indent}});`);\n  lines.push('});');\n  \n  return lines.join('\\n');\n}\n\n/**\n * Save generated test to file\n */\nexport async function saveGeneratedTest(\n  testCode: string,\n  filepath: string\n): Promise<void> {\n  const fs = await import('fs/promises');\n  await fs.writeFile(filepath, testCode, 'utf-8');\n}\n\n/**\n * Generate test from history file\n */\nexport async function generateTestFromHistoryFile(\n  historyFile: string,\n  outputFile: string,\n  options: TestGenerationOptions = {}\n): Promise<void> {\n  const fs = await import('fs/promises');\n  const historyJson = await fs.readFile(historyFile, 'utf-8');\n  const exported = JSON.parse(historyJson) as ExportedHistory;\n  \n  const testCode = generateTestFromHistory(exported, options);\n  await saveGeneratedTest(testCode, outputFile);\n}\n\n", "/**\n * Test Generator Commands\n * \n * VS Code commands for generating tests from history.\n */\n\nimport * as vscode from 'vscode';\nimport * as path from 'path';\nimport * as fs from 'fs/promises';\nimport { generateTestFromHistory, generateTestFromHistoryFile } from '../testing/testGenerator.js';\nimport { exportHistoryAsJSON } from '../debugging/historyExport.js';\n\n/**\n * Register test generator commands\n */\nexport function registerTestGeneratorCommands(context: vscode.ExtensionContext): void {\n  // Generate test from current history\n  const generateFromHistoryCommand = vscode.commands.registerCommand(\n    'azureDevOpsInt.debug.test.generateFromHistory',\n    async () => {\n      try {\n        // Get test name\n        const testName = await vscode.window.showInputBox({\n          prompt: 'Enter test name',\n          placeHolder: 'connection-authentication-test',\n        });\n        \n        if (!testName) {\n          return;\n        }\n        \n        // Get framework\n        const framework = await vscode.window.showQuickPick(\n          ['vitest', 'jest', 'mocha'],\n          {\n            placeHolder: 'Select test framework',\n          }\n        );\n        \n        if (!framework) {\n          return;\n        }\n        \n        // Export current history\n        const historyJson = exportHistoryAsJSON();\n        \n        // Generate test code\n        const { generateTestFromHistory } = await import('../testing/testGenerator.js');\n        const exported = JSON.parse(historyJson);\n        const testCode = generateTestFromHistory(exported, {\n          framework: framework as 'vitest' | 'jest' | 'mocha',\n          testName,\n          includeSnapshots: true,\n          includeComments: true,\n        });\n        \n        // Save to file\n        const uri = await vscode.window.showSaveDialog({\n          defaultUri: vscode.Uri.file(`${testName}.test.ts`),\n          filters: {\n            'TypeScript Files': ['ts'],\n          },\n        });\n        \n        if (uri) {\n          await fs.writeFile(uri.fsPath, testCode, 'utf-8');\n          vscode.window.showInformationMessage(`Test generated: ${path.basename(uri.fsPath)}`);\n        }\n      } catch (error) {\n        vscode.window.showErrorMessage(`Failed to generate test: ${error}`);\n      }\n    }\n  );\n  \n  // Generate test from history file\n  const generateFromFileCommand = vscode.commands.registerCommand(\n    'azureDevOpsInt.debug.test.generateFromFile',\n    async () => {\n      try {\n        // Select history file\n        const uri = await vscode.window.showOpenDialog({\n          filters: {\n            'JSON Files': ['json'],\n          },\n          canSelectMany: false,\n        });\n        \n        if (!uri || !uri[0]) {\n          return;\n        }\n        \n        // Get test name\n        const testName = await vscode.window.showInputBox({\n          prompt: 'Enter test name',\n          placeHolder: 'generated-test',\n        });\n        \n        if (!testName) {\n          return;\n        }\n        \n        // Get framework\n        const framework = await vscode.window.showQuickPick(\n          ['vitest', 'jest', 'mocha'],\n          {\n            placeHolder: 'Select test framework',\n          }\n        );\n        \n        if (!framework) {\n          return;\n        }\n        \n        // Generate test\n        const outputUri = await vscode.window.showSaveDialog({\n          defaultUri: vscode.Uri.file(`${testName}.test.ts`),\n          filters: {\n            'TypeScript Files': ['ts'],\n          },\n        });\n        \n        if (outputUri) {\n          await generateTestFromHistoryFile(\n            uri[0].fsPath,\n            outputUri.fsPath,\n            {\n              framework: framework as 'vitest' | 'jest' | 'mocha',\n              testName,\n              includeSnapshots: true,\n              includeComments: true,\n            }\n          );\n          \n          vscode.window.showInformationMessage(`Test generated: ${path.basename(outputUri.fsPath)}`);\n        }\n      } catch (error) {\n        vscode.window.showErrorMessage(`Failed to generate test: ${error}`);\n      }\n    }\n  );\n  \n  context.subscriptions.push(generateFromHistoryCommand, generateFromFileCommand);\n}\n\n", "/**\n * Automatic Message Interception\n *\n * Intercepts all webview \u2194 extension host message passing automatically.\n */\n\nimport { standardizedLogger } from './StandardizedAutomaticLogger.js';\n\n/**\n * Intercept webview messages (extension host side)\n * VS Code webview API: webview.postMessage() and webview.onDidReceiveMessage()\n *\n * Note: VS Code webview properties may be read-only, so we wrap the calls instead\n */\nexport function interceptWebviewMessages(\n  webview: {\n    postMessage: (message: any) => Thenable<boolean>;\n    onDidReceiveMessage: (callback: (message: any) => void) => { dispose(): void };\n  },\n  component: string = 'webview'\n): {\n  postMessage: (message: any) => Thenable<boolean>;\n  onDidReceiveMessage: (callback: (message: any) => void) => { dispose(): void };\n} {\n  const originalPostMessage = webview.postMessage.bind(webview);\n  const originalOnDidReceiveMessage = webview.onDidReceiveMessage.bind(webview);\n\n  // Interception setup (no logging needed - automatic logging will capture this)\n\n  // Create intercepted versions\n  const intercepted = {\n    postMessage: (message: any) => {\n      try {\n        standardizedLogger.info(\n          'message',\n          component,\n          'postMessage',\n          `host->webview: ${message?.type || 'unknown'}`,\n          { message }\n        );\n      } catch (err) {\n        // Silent fail - logging should never break functionality\n      }\n      return originalPostMessage(message);\n    },\n\n    onDidReceiveMessage: (callback: (message: any) => void) => {\n      return originalOnDidReceiveMessage((message: any) => {\n        try {\n          standardizedLogger.info(\n            'message',\n            component,\n            'onDidReceiveMessage',\n            `webview->host: ${message?.type || 'unknown'}`,\n            { message }\n          );\n        } catch (err) {\n          // Silent fail - logging should never break functionality\n        }\n        callback(message);\n      });\n    },\n  };\n\n  return intercepted;\n}\n\n/**\n * Intercept postMessage calls (webview side)\n */\nexport function interceptPostMessage(\n  vscodeApi: { postMessage: (message: any) => void },\n  component: string = 'webview'\n): { postMessage: (message: any) => void } {\n  const originalPostMessage = vscodeApi.postMessage.bind(vscodeApi);\n\n  return {\n    postMessage: (message: any) => {\n      try {\n        standardizedLogger.info(\n          'message',\n          component,\n          'postMessage',\n          `webview->host: ${message?.type || 'unknown'}`,\n          { message }\n        );\n      } catch (err) {\n        // Silent fail - logging should never break functionality\n      }\n      return originalPostMessage(message);\n    },\n  };\n}\n\n/**\n * Intercept window.addEventListener('message') (webview side)\n */\nexport function interceptWindowMessages(component: string = 'webview'): void {\n  // Check if already intercepted\n  if ((window.addEventListener as any).__intercepted) {\n    standardizedLogger.debug(\n      'message',\n      component,\n      'interceptWindowMessages',\n      'Already intercepted, skipping'\n    );\n    return;\n  }\n\n  const originalAddEventListener = window.addEventListener.bind(window);\n\n  const interceptedAddEventListener = function (\n    type: string,\n    listener: EventListenerOrEventListenerObject | null,\n    options?: boolean | AddEventListenerOptions\n  ): void {\n    if (type === 'message') {\n      standardizedLogger.debug(\n        'message',\n        component,\n        'addEventListener',\n        `Intercepting 'message' listener registration`\n      );\n      const wrappedListener = (event: Event) => {\n        const messageEvent = event as MessageEvent;\n        try {\n          standardizedLogger.info(\n            'message',\n            component,\n            'addEventListener',\n            `host->webview: ${messageEvent.data?.type || 'unknown'}`,\n            { message: messageEvent.data }\n          );\n        } catch (err) {\n          // Silent fail - logging should never break functionality\n        }\n\n        // Always call the original listener\n        if (listener instanceof Function) {\n          listener(event);\n        } else if (listener && 'handleEvent' in listener) {\n          listener.handleEvent(event);\n        }\n      };\n\n      return originalAddEventListener(type, wrappedListener, options);\n    }\n\n    return originalAddEventListener(type, listener, options);\n  };\n\n  // Mark as intercepted\n  (interceptedAddEventListener as any).__intercepted = true;\n\n  // Replace window.addEventListener\n  window.addEventListener = interceptedAddEventListener;\n\n  standardizedLogger.info(\n    'message',\n    component,\n    'interceptWindowMessages',\n    'window.addEventListener intercepted'\n  );\n}\n", "/** @import { Readable, Writable } from './public.js' */\nimport { get, writable } from './shared/index.js';\n\nexport { derived, get, readable, readonly, writable } from './shared/index.js';\n\n/**\n * @template V\n * @overload\n * @param {() => V} get\n * @param {(v: V) => void} set\n * @returns {Writable<V>}\n */\n/**\n * @template V\n * @overload\n * @param {() => V} get\n * @returns {Readable<V>}\n */\n/**\n * Create a store from a function that returns state, and (to make a writable store), an\n * optional second function that sets state.\n *\n * ```ts\n * import { toStore } from 'svelte/store';\n *\n * let count = $state(0);\n *\n * const store = toStore(() => count, (v) => (count = v));\n * ```\n * @template V\n * @param {() => V} get\n * @param {(v: V) => void} [set]\n * @returns {Writable<V> | Readable<V>}\n */\nexport function toStore(get, set) {\n\tconst store = writable(get());\n\n\tif (set) {\n\t\treturn {\n\t\t\tset,\n\t\t\tupdate: (fn) => set(fn(get())),\n\t\t\tsubscribe: store.subscribe\n\t\t};\n\t}\n\n\treturn {\n\t\tsubscribe: store.subscribe\n\t};\n}\n\n/**\n * @template V\n * @overload\n * @param {Writable<V>} store\n * @returns {{ current: V }}\n */\n/**\n * @template V\n * @overload\n * @param {Readable<V>} store\n * @returns {{ readonly current: V }}\n */\n/**\n * Convert a store to an object with a reactive `current` property. If `store`\n * is a readable store, `current` will be a readonly property.\n *\n * ```ts\n * import { fromStore, get, writable } from 'svelte/store';\n *\n * const store = writable(0);\n *\n * const count = fromStore(store);\n *\n * count.current; // 0;\n * store.set(1);\n * count.current; // 1\n *\n * count.current += 1;\n * get(store); // 2\n * ```\n * @template V\n * @param {Writable<V> | Readable<V>} store\n */\nexport function fromStore(store) {\n\tif ('set' in store) {\n\t\treturn {\n\t\t\tget current() {\n\t\t\t\treturn get(store);\n\t\t\t},\n\t\t\tset current(v) {\n\t\t\t\tstore.set(v);\n\t\t\t}\n\t\t};\n\t}\n\n\treturn {\n\t\tget current() {\n\t\t\treturn get(store);\n\t\t}\n\t};\n}\n", "/**\n * Praxis Event Bus\n *\n * Implements an event bus pattern for cross-engine communication\n * between Timer, Auth, Connection, and Application engines.\n */\n\nimport type { EventBusMessage, EventBusMessageType, EventBusSubscriber } from './types.js';\n\n/**\n * Event Bus for Praxis multi-engine architecture\n *\n * Enables loose coupling between engines while maintaining\n * coordinated state management.\n */\nexport class PraxisEventBus {\n  private subscribers = new Map<EventBusMessageType, Set<EventBusSubscriber>>();\n  private allSubscribers = new Set<EventBusSubscriber>();\n  private messageHistory: EventBusMessage[] = [];\n  private maxHistorySize = 100;\n\n  /**\n   * Subscribe to specific message types\n   */\n  subscribe(type: EventBusMessageType, subscriber: EventBusSubscriber): () => void {\n    if (!this.subscribers.has(type)) {\n      this.subscribers.set(type, new Set());\n    }\n    this.subscribers.get(type)!.add(subscriber);\n\n    // Return unsubscribe function\n    return () => {\n      this.subscribers.get(type)?.delete(subscriber);\n    };\n  }\n\n  /**\n   * Subscribe to all message types\n   */\n  subscribeAll(subscriber: EventBusSubscriber): () => void {\n    this.allSubscribers.add(subscriber);\n\n    // Return unsubscribe function\n    return () => {\n      this.allSubscribers.delete(subscriber);\n    };\n  }\n\n  /**\n   * Publish a message to all relevant subscribers\n   */\n  publish(message: EventBusMessage): void {\n    // Add timestamp if not present\n    if (!message.timestamp) {\n      message.timestamp = Date.now();\n    }\n\n    // Store in history\n    this.messageHistory.push(message);\n    if (this.messageHistory.length > this.maxHistorySize) {\n      this.messageHistory.shift();\n    }\n\n    // Notify type-specific subscribers\n    const typeSubscribers = this.subscribers.get(message.type);\n    if (typeSubscribers) {\n      for (const subscriber of typeSubscribers) {\n        try {\n          subscriber(message);\n        } catch (error) {\n          // Silently ignore subscriber errors to prevent cascading failures\n        }\n      }\n    }\n\n    // Notify all-message subscribers\n    for (const subscriber of this.allSubscribers) {\n      try {\n        subscriber(message);\n      } catch (error) {\n        // Silently ignore all-subscriber errors to prevent cascading failures\n      }\n    }\n  }\n\n  /**\n   * Emit a timer event\n   */\n  emitTimerEvent(\n    type: 'timer:started' | 'timer:stopped' | 'timer:paused' | 'timer:resumed',\n    payload: Record<string, unknown>,\n    connectionId?: string\n  ): void {\n    this.publish({\n      type,\n      payload,\n      timestamp: Date.now(),\n      sourceEngine: 'timer',\n      connectionId,\n    });\n  }\n\n  /**\n   * Emit an auth event\n   */\n  emitAuthEvent(\n    type: 'auth:success' | 'auth:failed' | 'auth:logout',\n    payload: Record<string, unknown>,\n    connectionId: string\n  ): void {\n    this.publish({\n      type,\n      payload,\n      timestamp: Date.now(),\n      sourceEngine: 'auth',\n      connectionId,\n    });\n  }\n\n  /**\n   * Emit a connection event\n   */\n  emitConnectionEvent(\n    type: 'connection:connected' | 'connection:disconnected' | 'connection:error',\n    payload: Record<string, unknown>,\n    connectionId: string\n  ): void {\n    this.publish({\n      type,\n      payload,\n      timestamp: Date.now(),\n      sourceEngine: 'connection',\n      connectionId,\n    });\n  }\n\n  /**\n   * Emit an application event\n   */\n  emitApplicationEvent(\n    type:\n      | 'app:activated'\n      | 'app:deactivated'\n      | 'app:error'\n      | 'workitems:loaded'\n      | 'workitems:error',\n    payload: Record<string, unknown>,\n    connectionId?: string\n  ): void {\n    this.publish({\n      type,\n      payload,\n      timestamp: Date.now(),\n      sourceEngine: 'application',\n      connectionId,\n    });\n  }\n\n  /**\n   * Get message history\n   */\n  getHistory(): EventBusMessage[] {\n    return [...this.messageHistory];\n  }\n\n  /**\n   * Get history for a specific connection\n   */\n  getConnectionHistory(connectionId: string): EventBusMessage[] {\n    return this.messageHistory.filter((m) => m.connectionId === connectionId);\n  }\n\n  /**\n   * Get history for a specific source engine\n   */\n  getEngineHistory(engine: 'timer' | 'auth' | 'connection' | 'application'): EventBusMessage[] {\n    return this.messageHistory.filter((m) => m.sourceEngine === engine);\n  }\n\n  /**\n   * Clear all subscribers\n   */\n  clear(): void {\n    this.subscribers.clear();\n    this.allSubscribers.clear();\n    this.messageHistory = [];\n  }\n\n  /**\n   * Get subscriber count for debugging\n   */\n  getSubscriberCount(): { byType: Record<string, number>; all: number } {\n    const byType: Record<string, number> = {};\n    for (const [type, subs] of this.subscribers) {\n      byType[type] = subs.size;\n    }\n    return {\n      byType,\n      all: this.allSubscribers.size,\n    };\n  }\n}\n\n// Singleton instance\nlet eventBusInstance: PraxisEventBus | undefined;\n\n/**\n * Get or create the global event bus instance\n */\nexport function getPraxisEventBus(): PraxisEventBus {\n  if (!eventBusInstance) {\n    eventBusInstance = new PraxisEventBus();\n  }\n  return eventBusInstance;\n}\n\n/**\n * Reset the event bus (for testing)\n */\nexport function resetPraxisEventBus(): void {\n  eventBusInstance?.clear();\n  eventBusInstance = undefined;\n}\n", "/**\n * Praxis Timer Facts and Events\n *\n * Defines the facts and events for the timer logic using Praxis DSL.\n * Facts represent the current state of the timer.\n * Events represent actions that can change the timer state.\n */\n\nimport { defineFact, defineEvent } from '@plures/praxis';\nimport type { PraxisTimerState, PraxisTimerContext } from './types.js';\n\n// ============================================================================\n// Facts - Propositions about the timer domain\n// ============================================================================\n\n/**\n * TimerState fact - represents the current state of the timer\n */\nexport const TimerStateFact = defineFact<'TimerState', PraxisTimerState>('TimerState');\n\n/**\n * TimerData fact - represents the timer context data\n */\nexport const TimerDataFact = defineFact<'TimerData', PraxisTimerContext>('TimerData');\n\n/**\n * TimerStarted fact - indicates a timer has been started\n */\nexport const TimerStartedFact = defineFact<\n  'TimerStarted',\n  { workItemId: number; workItemTitle: string; startTime: number }\n>('TimerStarted');\n\n/**\n * TimerPaused fact - indicates the timer has been paused\n */\nexport const TimerPausedFact = defineFact<'TimerPaused', { pausedAt: number; manual: boolean }>(\n  'TimerPaused'\n);\n\n/**\n * TimerResumed fact - indicates the timer has been resumed\n */\nexport const TimerResumedFact = defineFact<\n  'TimerResumed',\n  { resumedAt: number; adjustedStartTime: number }\n>('TimerResumed');\n\n/**\n * TimerStopped fact - indicates the timer has been stopped\n */\nexport const TimerStoppedFact = defineFact<\n  'TimerStopped',\n  { workItemId: number; duration: number; hoursDecimal: number }\n>('TimerStopped');\n\n/**\n * ActivityRecorded fact - indicates activity was recorded\n */\nexport const ActivityRecordedFact = defineFact<'ActivityRecorded', { timestamp: number }>(\n  'ActivityRecorded'\n);\n\n// ============================================================================\n// Events - Actions that drive state changes\n// ============================================================================\n\n/**\n * StartTimer event - starts a timer for a work item\n */\nexport const StartTimerEvent = defineEvent<\n  'START_TIMER',\n  { workItemId: number; workItemTitle: string }\n>('START_TIMER');\n\n/**\n * PauseTimer event - pauses the running timer\n */\nexport const PauseTimerEvent = defineEvent<'PAUSE_TIMER', { manual?: boolean }>('PAUSE_TIMER');\n\n/**\n * ResumeTimer event - resumes a paused timer\n */\nexport const ResumeTimerEvent = defineEvent<'RESUME_TIMER', { fromActivity?: boolean }>(\n  'RESUME_TIMER'\n);\n\n/**\n * StopTimer event - stops the timer\n */\nexport const StopTimerEvent = defineEvent<'STOP_TIMER', Record<string, never>>('STOP_TIMER');\n\n/**\n * ActivityPing event - records user activity\n */\nexport const ActivityPingEvent = defineEvent<'ACTIVITY_PING', Record<string, never>>(\n  'ACTIVITY_PING'\n);\n\n/**\n * InactivityTimeout event - triggered when inactivity timeout is reached\n */\nexport const InactivityTimeoutEvent = defineEvent<'INACTIVITY_TIMEOUT', Record<string, never>>(\n  'INACTIVITY_TIMEOUT'\n);\n\n/**\n * RestoreTimer event - restores timer from persisted state\n */\nexport const RestoreTimerEvent = defineEvent<\n  'RESTORE_TIMER',\n  {\n    workItemId: number;\n    workItemTitle: string;\n    startTime: number;\n    isPaused: boolean;\n  }\n>('RESTORE_TIMER');\n\n/**\n * PomodoroBreak event - triggers a pomodoro break\n */\nexport const PomodoroBreakEvent = defineEvent<'POMODORO_BREAK', Record<string, never>>(\n  'POMODORO_BREAK'\n);\n", "/**\n * Praxis Timer Types\n *\n * Type definitions for the Praxis-based timer implementation.\n * These types mirror the XState timer context and events for seamless migration.\n */\n\n/**\n * Timer context - the source of truth for timer state\n */\nexport interface PraxisTimerContext {\n  workItemId?: number;\n  workItemTitle?: string;\n  startTime?: number;\n  pausedAt?: number;\n  isPaused: boolean;\n  lastActivity: number;\n  connectionInfo?: {\n    id?: string;\n    label?: string;\n    organization?: string;\n    project?: string;\n  };\n  inactivityTimeoutSec: number;\n  defaultElapsedLimitHours: number;\n  pomodoroEnabled: boolean;\n  pomodoroCount: number;\n}\n\n/**\n * Timer state values\n */\nexport type PraxisTimerState = 'idle' | 'running' | 'paused';\n\n/**\n * Timer stop result - returned when timer is stopped\n */\nexport interface PraxisTimerStopResult {\n  workItemId: number;\n  startTime: number;\n  endTime: number;\n  duration: number;\n  hoursDecimal: number;\n  capApplied?: boolean;\n  capLimitHours?: number;\n}\n\n/**\n * Timer snapshot for external consumption\n */\nexport interface PraxisTimerSnapshot {\n  workItemId?: number;\n  workItemTitle?: string;\n  startTime?: number;\n  elapsedSeconds: number;\n  isPaused: boolean;\n  running: boolean;\n  isPomodoro?: boolean;\n  pomodoroCount?: number;\n}\n\n/**\n * Default timer configuration\n */\nexport const DEFAULT_TIMER_CONFIG = {\n  inactivityTimeoutSec: 900, // 15 minutes\n  defaultElapsedLimitHours: 3.5,\n  pomodoroEnabled: false,\n  pomodoroCount: 0,\n} as const;\n", "/**\n * Praxis Timer Rules\n *\n * Defines the rules for timer state transitions using the Praxis logic engine.\n * These rules update the timer context directly based on events.\n */\n\nimport { defineRule, findEvent, type RuleDescriptor } from '@plures/praxis';\nimport type { PraxisTimerContext } from './types.js';\nimport { DEFAULT_TIMER_CONFIG } from './types.js';\nimport {\n  StartTimerEvent,\n  PauseTimerEvent,\n  ResumeTimerEvent,\n  StopTimerEvent,\n  ActivityPingEvent,\n  InactivityTimeoutEvent,\n  RestoreTimerEvent,\n} from './facts.js';\nimport type { TimerEngineContext } from './engine.js';\n\n/**\n * Calculate the adjusted start time after resuming from pause.\n * This adjusts for the pause duration so elapsed time is accurate.\n */\nfunction calculateAdjustedStartTime(timerData: PraxisTimerContext, now: number): number {\n  const pauseDuration = timerData.pausedAt && timerData.startTime ? now - timerData.pausedAt : 0;\n  return timerData.startTime ? timerData.startTime + pauseDuration : now;\n}\n\nexport const startTimerRule: RuleDescriptor<TimerEngineContext> = defineRule({\n  id: 'timer.start',\n  description: 'Start a timer for a work item',\n  impl: (state, events) => {\n    const startEvent = findEvent(events, StartTimerEvent);\n    if (!startEvent) return [];\n    if (state.context.timerState !== 'idle') return [];\n\n    const now = Date.now();\n    state.context.timerState = 'running';\n    state.context.timerData = {\n      ...state.context.timerData,\n      workItemId: startEvent.payload.workItemId,\n      workItemTitle: startEvent.payload.workItemTitle,\n      startTime: now,\n      pausedAt: undefined,\n      isPaused: false,\n      lastActivity: now,\n    };\n    return [];\n  },\n});\n\nexport const pauseTimerRule: RuleDescriptor<TimerEngineContext> = defineRule({\n  id: 'timer.pause',\n  description: 'Pause the running timer',\n  impl: (state, events) => {\n    const pauseEvent = findEvent(events, PauseTimerEvent);\n    if (!pauseEvent) return [];\n    if (state.context.timerState !== 'running') return [];\n\n    const now = Date.now();\n    state.context.timerState = 'paused';\n    state.context.timerData = {\n      ...state.context.timerData,\n      isPaused: true,\n      pausedAt: now,\n    };\n    return [];\n  },\n});\n\nexport const resumeTimerRule: RuleDescriptor<TimerEngineContext> = defineRule({\n  id: 'timer.resume',\n  description: 'Resume a paused timer',\n  impl: (state, events) => {\n    const resumeEvent = findEvent(events, ResumeTimerEvent);\n    if (!resumeEvent) return [];\n    if (state.context.timerState !== 'paused') return [];\n\n    const now = Date.now();\n    const timerData = state.context.timerData;\n    const adjustedStartTime = calculateAdjustedStartTime(timerData, now);\n\n    state.context.timerState = 'running';\n    state.context.timerData = {\n      ...timerData,\n      isPaused: false,\n      startTime: adjustedStartTime,\n      pausedAt: undefined,\n      lastActivity: now,\n    };\n    return [];\n  },\n});\n\nexport const stopTimerRule: RuleDescriptor<TimerEngineContext> = defineRule({\n  id: 'timer.stop',\n  description: 'Stop the timer',\n  impl: (state, events) => {\n    const stopEvent = findEvent(events, StopTimerEvent);\n    if (!stopEvent) return [];\n    if (state.context.timerState === 'idle') return [];\n\n    state.context.timerState = 'idle';\n    state.context.timerData = {\n      isPaused: false,\n      lastActivity: Date.now(),\n      ...DEFAULT_TIMER_CONFIG,\n    };\n    return [];\n  },\n});\n\nexport const activityPingRule: RuleDescriptor<TimerEngineContext> = defineRule({\n  id: 'timer.activity',\n  description: 'Record user activity',\n  impl: (state, events) => {\n    const activityEvent = findEvent(events, ActivityPingEvent);\n    if (!activityEvent) return [];\n\n    const timerState = state.context.timerState;\n    const now = Date.now();\n    const timerData = state.context.timerData;\n\n    // If paused, resume the timer\n    if (timerState === 'paused') {\n      const adjustedStartTime = calculateAdjustedStartTime(timerData, now);\n\n      state.context.timerState = 'running';\n      state.context.timerData = {\n        ...timerData,\n        isPaused: false,\n        startTime: adjustedStartTime,\n        pausedAt: undefined,\n        lastActivity: now,\n      };\n      return [];\n    }\n\n    // If running, just update last activity\n    if (timerState === 'running') {\n      state.context.timerData = {\n        ...timerData,\n        lastActivity: now,\n      };\n    }\n\n    return [];\n  },\n});\n\nexport const inactivityTimeoutRule: RuleDescriptor<TimerEngineContext> = defineRule({\n  id: 'timer.inactivity',\n  description: 'Pause timer due to inactivity',\n  impl: (state, events) => {\n    const timeoutEvent = findEvent(events, InactivityTimeoutEvent);\n    if (!timeoutEvent) return [];\n    if (state.context.timerState !== 'running') return [];\n\n    const now = Date.now();\n    state.context.timerState = 'paused';\n    state.context.timerData = {\n      ...state.context.timerData,\n      isPaused: true,\n      pausedAt: now,\n    };\n    return [];\n  },\n});\n\nexport const restoreTimerRule: RuleDescriptor<TimerEngineContext> = defineRule({\n  id: 'timer.restore',\n  description: 'Restore timer from persisted state',\n  impl: (state, events) => {\n    const restoreEvent = findEvent(events, RestoreTimerEvent);\n    if (!restoreEvent) return [];\n    if (state.context.timerState !== 'idle') return [];\n\n    const now = Date.now();\n    const { workItemId, workItemTitle, startTime, isPaused } = restoreEvent.payload;\n\n    state.context.timerState = isPaused ? 'paused' : 'running';\n    state.context.timerData = {\n      ...state.context.timerData,\n      workItemId,\n      workItemTitle,\n      startTime,\n      isPaused,\n      pausedAt: isPaused ? now : undefined,\n      lastActivity: now,\n    };\n    return [];\n  },\n});\n", "/**\n * Praxis Timer Engine\n *\n * Creates and configures the Praxis logic engine for timer functionality.\n * This is the main entry point for the Praxis-based timer implementation.\n */\n\nimport { createPraxisEngine, PraxisRegistry, type LogicEngine } from '@plures/praxis';\nimport type { PraxisTimerContext, PraxisTimerState } from './types.js';\nimport { DEFAULT_TIMER_CONFIG } from './types.js';\nimport {\n  startTimerRule,\n  pauseTimerRule,\n  resumeTimerRule,\n  stopTimerRule,\n  activityPingRule,\n  inactivityTimeoutRule,\n  restoreTimerRule,\n} from './rules.js';\n\n/**\n * Timer engine context - uses context for state management (not facts)\n */\nexport interface TimerEngineContext {\n  timerState: PraxisTimerState;\n  timerData: PraxisTimerContext;\n}\n\n/**\n * Create a new Praxis timer engine\n */\nexport function createTimerEngine(\n  initialConfig?: Partial<PraxisTimerContext>\n): LogicEngine<TimerEngineContext> {\n  const registry = new PraxisRegistry<TimerEngineContext>();\n\n  // Register all timer rules\n  registry.registerRule(startTimerRule);\n  registry.registerRule(pauseTimerRule);\n  registry.registerRule(resumeTimerRule);\n  registry.registerRule(stopTimerRule);\n  registry.registerRule(activityPingRule);\n  registry.registerRule(inactivityTimeoutRule);\n  registry.registerRule(restoreTimerRule);\n\n  return createPraxisEngine<TimerEngineContext>({\n    initialContext: {\n      timerState: 'idle',\n      timerData: {\n        isPaused: false,\n        lastActivity: Date.now(),\n        ...DEFAULT_TIMER_CONFIG,\n        ...initialConfig,\n      },\n    },\n    registry,\n    initialFacts: [],\n  });\n}\n", "/**\n * Praxis Timer Manager\n *\n * High-level API for timer operations using the Praxis logic engine.\n * This class provides a simple API that mirrors the existing FSMManager\n * for easy migration from XState.\n */\n\nimport type { LogicEngine } from '@plures/praxis';\nimport type {\n  PraxisTimerContext,\n  PraxisTimerState,\n  PraxisTimerSnapshot,\n  PraxisTimerStopResult,\n} from './types.js';\nimport {\n  StartTimerEvent,\n  PauseTimerEvent,\n  ResumeTimerEvent,\n  StopTimerEvent,\n  ActivityPingEvent,\n  InactivityTimeoutEvent,\n  RestoreTimerEvent,\n} from './facts.js';\nimport { createTimerEngine, type TimerEngineContext } from './engine.js';\n\n/**\n * PraxisTimerManager - High-level API for timer operations\n */\nexport class PraxisTimerManager {\n  private engine: LogicEngine<TimerEngineContext>;\n  private isStarted = false;\n\n  constructor(config?: Partial<PraxisTimerContext>) {\n    this.engine = createTimerEngine(config);\n  }\n\n  start(): void {\n    this.isStarted = true;\n  }\n\n  stop(): void {\n    this.isStarted = false;\n  }\n\n  getTimerState(): PraxisTimerState {\n    return this.engine.getContext().timerState;\n  }\n\n  getTimerData(): PraxisTimerContext | undefined {\n    return this.engine.getContext().timerData;\n  }\n\n  startTimer(workItemId: number, workItemTitle: string): boolean {\n    if (!this.isStarted) return false;\n    if (this.getTimerState() !== 'idle') return false;\n\n    this.engine.step([StartTimerEvent.create({ workItemId, workItemTitle })]);\n    return this.getTimerState() === 'running';\n  }\n\n  pauseTimer(manual = true): boolean {\n    if (!this.isStarted) return false;\n    if (this.getTimerState() !== 'running') return false;\n\n    this.engine.step([PauseTimerEvent.create({ manual })]);\n    return this.getTimerState() === 'paused';\n  }\n\n  resumeTimer(fromActivity = false): boolean {\n    if (!this.isStarted) return false;\n    if (this.getTimerState() !== 'paused') return false;\n\n    this.engine.step([ResumeTimerEvent.create({ fromActivity })]);\n    return this.getTimerState() === 'running';\n  }\n\n  stopTimer(): PraxisTimerStopResult | null {\n    if (!this.isStarted) return null;\n    if (this.getTimerState() === 'idle') return null;\n\n    const timerData = this.getTimerData();\n    if (!timerData?.workItemId || !timerData?.startTime) return null;\n\n    const endTime = Date.now();\n    const duration = endTime - timerData.startTime;\n    const hoursDecimal = duration / (1000 * 60 * 60);\n    const limit = timerData.defaultElapsedLimitHours;\n\n    const capApplied = hoursDecimal > limit;\n    const cappedHours = capApplied ? limit : hoursDecimal;\n    const cappedDuration = cappedHours * 60 * 60 * 1000;\n\n    this.engine.step([StopTimerEvent.create({})]);\n\n    return {\n      workItemId: timerData.workItemId,\n      startTime: timerData.startTime,\n      endTime,\n      duration: capApplied ? cappedDuration : duration,\n      hoursDecimal: cappedHours,\n      capApplied,\n      capLimitHours: capApplied ? limit : undefined,\n    };\n  }\n\n  activityPing(): void {\n    if (!this.isStarted) return;\n    if (this.getTimerState() === 'idle') return;\n    this.engine.step([ActivityPingEvent.create({})]);\n  }\n\n  inactivityTimeout(): void {\n    if (!this.isStarted) return;\n    if (this.getTimerState() !== 'running') return;\n    this.engine.step([InactivityTimeoutEvent.create({})]);\n  }\n\n  restoreTimer(\n    workItemId: number,\n    workItemTitle: string,\n    startTime: number,\n    isPaused: boolean\n  ): boolean {\n    if (!this.isStarted) return false;\n    if (this.getTimerState() !== 'idle') return false;\n\n    this.engine.step([\n      RestoreTimerEvent.create({ workItemId, workItemTitle, startTime, isPaused }),\n    ]);\n    return this.getTimerState() !== 'idle';\n  }\n\n  getTimerSnapshot(): PraxisTimerSnapshot | undefined {\n    const timerState = this.getTimerState();\n    if (timerState === 'idle') return undefined;\n\n    const timerData = this.getTimerData();\n    if (!timerData) return undefined;\n\n    const now = Date.now();\n    // If paused, calculate elapsed time up to the pause point\n    // If running, calculate elapsed time from adjusted start time\n    let elapsedMs = 0;\n    if (timerData.startTime) {\n      if (timerData.isPaused && timerData.pausedAt) {\n        // When paused, elapsed time is from start to pause point\n        elapsedMs = timerData.pausedAt - timerData.startTime;\n      } else {\n        // When running, elapsed time is from adjusted start to now\n        elapsedMs = now - timerData.startTime;\n      }\n    }\n\n    return {\n      workItemId: timerData.workItemId,\n      workItemTitle: timerData.workItemTitle,\n      startTime: timerData.startTime,\n      elapsedSeconds: Math.floor(elapsedMs / 1000),\n      isPaused: timerData.isPaused,\n      running: timerState === 'running',\n      isPomodoro: timerData.pomodoroEnabled,\n      pomodoroCount: timerData.pomodoroCount,\n    };\n  }\n\n  getStatus() {\n    return {\n      isStarted: this.isStarted,\n      timerState: this.getTimerState(),\n      timerContext: this.getTimerData(),\n    };\n  }\n\n  validateSync(): boolean {\n    return this.isStarted;\n  }\n\n  getEngine(): LogicEngine<TimerEngineContext> {\n    return this.engine;\n  }\n}\n", "/**\n * Praxis Authentication Types\n *\n * Type definitions for the Praxis-based authentication implementation.\n * These types mirror the XState auth context and events for seamless migration.\n */\n\n/**\n * Authentication state values\n */\nexport type PraxisAuthState = 'idle' | 'authenticating' | 'authenticated' | 'failed';\n\n/**\n * Authentication method type\n */\nexport type AuthMethod = 'pat' | 'entra';\n\n/**\n * Authentication context - the source of truth for authentication state\n */\nexport interface PraxisAuthContext {\n  connectionId: string;\n  authMethod: AuthMethod;\n  token?: string;\n  expiresAt?: number;\n  error?: string;\n  retryCount: number;\n  lastAuthAttempt?: number;\n  // Additional fields for Entra authentication\n  tenantId?: string;\n  clientId?: string;\n  // Device code flow state\n  deviceCodeSession?: {\n    userCode: string;\n    verificationUri: string;\n    expiresInSeconds: number;\n    startedAt: number;\n  };\n}\n\n/**\n * Authentication result - returned after authentication attempt\n */\nexport interface PraxisAuthResult {\n  success: boolean;\n  token?: string;\n  expiresAt?: number;\n  error?: string;\n}\n\n/**\n * Authentication snapshot for external consumption\n */\nexport interface PraxisAuthSnapshot {\n  state: PraxisAuthState;\n  connectionId: string;\n  authMethod: AuthMethod;\n  isAuthenticated: boolean;\n  hasToken: boolean;\n  error?: string;\n  lastAuthAttempt?: number;\n}\n\n/**\n * Default authentication configuration\n */\nexport const DEFAULT_AUTH_CONFIG = {\n  maxRetryCount: 3,\n  retryDelayMs: 1000,\n} as const;\n", "/**\n * Praxis Authentication Facts and Events\n *\n * Defines the facts and events for the authentication logic using Praxis DSL.\n * Facts represent the current state of authentication.\n * Events represent actions that can change the authentication state.\n */\n\nimport { defineFact, defineEvent } from '@plures/praxis';\nimport type { PraxisAuthState, PraxisAuthContext, AuthMethod } from './types.js';\n\n// ============================================================================\n// Facts - Propositions about the authentication domain\n// ============================================================================\n\n/**\n * AuthState fact - represents the current authentication state\n */\nexport const AuthStateFact = defineFact<'AuthState', PraxisAuthState>('AuthState');\n\n/**\n * AuthData fact - represents the authentication context data\n */\nexport const AuthDataFact = defineFact<'AuthData', PraxisAuthContext>('AuthData');\n\n/**\n * AuthenticatedFact - indicates authentication was successful\n */\nexport const AuthenticatedFact = defineFact<\n  'Authenticated',\n  { token: string; expiresAt?: number; connectionId: string }\n>('Authenticated');\n\n/**\n * AuthFailedFact - indicates authentication failed\n */\nexport const AuthFailedFact = defineFact<'AuthFailed', { error: string; connectionId: string }>(\n  'AuthFailed'\n);\n\n/**\n * TokenExpiredFact - indicates the auth token has expired\n */\nexport const TokenExpiredFact = defineFact<'TokenExpired', { connectionId: string }>(\n  'TokenExpired'\n);\n\n// ============================================================================\n// Events - Actions that drive authentication state changes\n// ============================================================================\n\n/**\n * Authenticate event - initiates authentication for a connection\n */\nexport const AuthenticateEvent = defineEvent<\n  'AUTHENTICATE',\n  {\n    connectionId: string;\n    authMethod: AuthMethod;\n    forceInteractive?: boolean;\n    tenantId?: string;\n    clientId?: string;\n  }\n>('AUTHENTICATE');\n\n/**\n * AuthSuccess event - authentication completed successfully\n */\nexport const AuthSuccessEvent = defineEvent<'AUTH_SUCCESS', { token: string; expiresAt?: number }>(\n  'AUTH_SUCCESS'\n);\n\n/**\n * AuthFailed event - authentication failed\n */\nexport const AuthFailedEvent = defineEvent<'AUTH_FAILED', { error: string }>('AUTH_FAILED');\n\n/**\n * Logout event - clears authentication state\n */\nexport const LogoutEvent = defineEvent<'LOGOUT', Record<string, never>>('LOGOUT');\n\n/**\n * TokenRefresh event - refreshes the authentication token\n */\nexport const TokenRefreshEvent = defineEvent<'TOKEN_REFRESH', Record<string, never>>(\n  'TOKEN_REFRESH'\n);\n\n/**\n * TokenExpired event - token has expired and needs refresh\n */\nexport const TokenExpiredEvent = defineEvent<'TOKEN_EXPIRED', Record<string, never>>(\n  'TOKEN_EXPIRED'\n);\n\n/**\n * DeviceCodeStarted event - device code flow has started\n */\nexport const DeviceCodeStartedEvent = defineEvent<\n  'DEVICE_CODE_STARTED',\n  {\n    userCode: string;\n    verificationUri: string;\n    expiresInSeconds: number;\n  }\n>('DEVICE_CODE_STARTED');\n\n/**\n * DeviceCodeCompleted event - device code flow completed\n */\nexport const DeviceCodeCompletedEvent = defineEvent<\n  'DEVICE_CODE_COMPLETED',\n  { token: string; expiresAt?: number }\n>('DEVICE_CODE_COMPLETED');\n\n/**\n * RetryAuth event - retry authentication after failure\n */\nexport const RetryAuthEvent = defineEvent<'RETRY_AUTH', Record<string, never>>('RETRY_AUTH');\n\n/**\n * ResetAuth event - reset authentication state\n */\nexport const ResetAuthEvent = defineEvent<'RESET_AUTH', Record<string, never>>('RESET_AUTH');\n", "/**\n * Praxis Authentication Rules\n *\n * Defines the rules for authentication state transitions using the Praxis logic engine.\n * These rules update the authentication context directly based on events.\n */\n\nimport { defineRule, findEvent, type RuleDescriptor } from '@plures/praxis';\nimport { DEFAULT_AUTH_CONFIG } from './types.js';\nimport {\n  AuthenticateEvent,\n  AuthSuccessEvent,\n  AuthFailedEvent,\n  LogoutEvent,\n  TokenExpiredEvent,\n  DeviceCodeStartedEvent,\n  DeviceCodeCompletedEvent,\n  RetryAuthEvent,\n  ResetAuthEvent,\n} from './facts.js';\nimport type { AuthEngineContext } from './engine.js';\n\n/**\n * Authenticate rule - initiates authentication\n */\nexport const authenticateRule: RuleDescriptor<AuthEngineContext> = defineRule({\n  id: 'auth.authenticate',\n  description: 'Initiate authentication for a connection',\n  impl: (state, events) => {\n    const authEvent = findEvent(events, AuthenticateEvent);\n    if (!authEvent) return [];\n    if (state.context.authState !== 'idle' && state.context.authState !== 'failed') return [];\n\n    const now = Date.now();\n    state.context.authState = 'authenticating';\n    state.context.authData = {\n      ...state.context.authData,\n      connectionId: authEvent.payload.connectionId,\n      authMethod: authEvent.payload.authMethod,\n      tenantId: authEvent.payload.tenantId,\n      clientId: authEvent.payload.clientId,\n      lastAuthAttempt: now,\n      error: undefined,\n    };\n    return [];\n  },\n});\n\n/**\n * Auth success rule - handles successful authentication\n */\nexport const authSuccessRule: RuleDescriptor<AuthEngineContext> = defineRule({\n  id: 'auth.success',\n  description: 'Handle successful authentication',\n  impl: (state, events) => {\n    const successEvent = findEvent(events, AuthSuccessEvent);\n    if (!successEvent) return [];\n    if (state.context.authState !== 'authenticating') return [];\n\n    state.context.authState = 'authenticated';\n    state.context.authData = {\n      ...state.context.authData,\n      token: successEvent.payload.token,\n      expiresAt: successEvent.payload.expiresAt,\n      error: undefined,\n      retryCount: 0,\n      deviceCodeSession: undefined,\n    };\n    return [];\n  },\n});\n\n/**\n * Auth failed rule - handles failed authentication\n */\nexport const authFailedRule: RuleDescriptor<AuthEngineContext> = defineRule({\n  id: 'auth.failed',\n  description: 'Handle failed authentication',\n  impl: (state, events) => {\n    const failedEvent = findEvent(events, AuthFailedEvent);\n    if (!failedEvent) return [];\n    if (state.context.authState !== 'authenticating') return [];\n\n    state.context.authState = 'failed';\n    state.context.authData = {\n      ...state.context.authData,\n      error: failedEvent.payload.error,\n      retryCount: state.context.authData.retryCount + 1,\n      token: undefined,\n      expiresAt: undefined,\n      deviceCodeSession: undefined,\n    };\n    return [];\n  },\n});\n\n/**\n * Logout rule - clears authentication state\n */\nexport const logoutRule: RuleDescriptor<AuthEngineContext> = defineRule({\n  id: 'auth.logout',\n  description: 'Clear authentication state on logout',\n  impl: (state, events) => {\n    const logoutEvent = findEvent(events, LogoutEvent);\n    if (!logoutEvent) return [];\n    if (state.context.authState !== 'authenticated') return [];\n\n    state.context.authState = 'idle';\n    state.context.authData = {\n      ...state.context.authData,\n      token: undefined,\n      expiresAt: undefined,\n      error: undefined,\n      retryCount: 0,\n      deviceCodeSession: undefined,\n    };\n    return [];\n  },\n});\n\n/**\n * Token expired rule - handles token expiration\n */\nexport const tokenExpiredRule: RuleDescriptor<AuthEngineContext> = defineRule({\n  id: 'auth.tokenExpired',\n  description: 'Handle token expiration',\n  impl: (state, events) => {\n    const expiredEvent = findEvent(events, TokenExpiredEvent);\n    if (!expiredEvent) return [];\n    if (state.context.authState !== 'authenticated') return [];\n\n    state.context.authState = 'failed';\n    state.context.authData = {\n      ...state.context.authData,\n      error: 'Token expired',\n      token: undefined,\n      expiresAt: undefined,\n    };\n    return [];\n  },\n});\n\n/**\n * Device code started rule - handles device code flow start\n */\nexport const deviceCodeStartedRule: RuleDescriptor<AuthEngineContext> = defineRule({\n  id: 'auth.deviceCodeStarted',\n  description: 'Handle device code flow start',\n  impl: (state, events) => {\n    const deviceCodeEvent = findEvent(events, DeviceCodeStartedEvent);\n    if (!deviceCodeEvent) return [];\n    if (state.context.authState !== 'authenticating') return [];\n\n    state.context.authData = {\n      ...state.context.authData,\n      deviceCodeSession: {\n        userCode: deviceCodeEvent.payload.userCode,\n        verificationUri: deviceCodeEvent.payload.verificationUri,\n        expiresInSeconds: deviceCodeEvent.payload.expiresInSeconds,\n        startedAt: Date.now(),\n      },\n    };\n    return [];\n  },\n});\n\n/**\n * Device code completed rule - handles device code flow completion\n */\nexport const deviceCodeCompletedRule: RuleDescriptor<AuthEngineContext> = defineRule({\n  id: 'auth.deviceCodeCompleted',\n  description: 'Handle device code flow completion',\n  impl: (state, events) => {\n    const completedEvent = findEvent(events, DeviceCodeCompletedEvent);\n    if (!completedEvent) return [];\n    if (state.context.authState !== 'authenticating') return [];\n\n    state.context.authState = 'authenticated';\n    state.context.authData = {\n      ...state.context.authData,\n      token: completedEvent.payload.token,\n      expiresAt: completedEvent.payload.expiresAt,\n      error: undefined,\n      retryCount: 0,\n      deviceCodeSession: undefined,\n    };\n    return [];\n  },\n});\n\n/**\n * Retry auth rule - retry authentication after failure\n */\nexport const retryAuthRule: RuleDescriptor<AuthEngineContext> = defineRule({\n  id: 'auth.retry',\n  description: 'Retry authentication after failure',\n  impl: (state, events) => {\n    const retryEvent = findEvent(events, RetryAuthEvent);\n    if (!retryEvent) return [];\n    if (state.context.authState !== 'failed') return [];\n\n    // Check if we've exceeded max retries\n    if (state.context.authData.retryCount >= DEFAULT_AUTH_CONFIG.maxRetryCount) {\n      return [];\n    }\n\n    state.context.authState = 'authenticating';\n    state.context.authData = {\n      ...state.context.authData,\n      lastAuthAttempt: Date.now(),\n      error: undefined,\n    };\n    return [];\n  },\n});\n\n/**\n * Reset auth rule - reset authentication state to idle\n */\nexport const resetAuthRule: RuleDescriptor<AuthEngineContext> = defineRule({\n  id: 'auth.reset',\n  description: 'Reset authentication state',\n  impl: (state, events) => {\n    const resetEvent = findEvent(events, ResetAuthEvent);\n    if (!resetEvent) return [];\n\n    state.context.authState = 'idle';\n    state.context.authData = {\n      connectionId: state.context.authData.connectionId,\n      authMethod: state.context.authData.authMethod,\n      retryCount: 0,\n      token: undefined,\n      expiresAt: undefined,\n      error: undefined,\n      deviceCodeSession: undefined,\n    };\n    return [];\n  },\n});\n", "/**\n * Praxis Authentication Engine\n *\n * Creates and configures the Praxis logic engine for authentication functionality.\n * This is the main entry point for the Praxis-based authentication implementation.\n */\n\nimport { createPraxisEngine, PraxisRegistry, type LogicEngine } from '@plures/praxis';\nimport type { PraxisAuthContext, PraxisAuthState, AuthMethod } from './types.js';\nimport {\n  authenticateRule,\n  authSuccessRule,\n  authFailedRule,\n  logoutRule,\n  tokenExpiredRule,\n  deviceCodeStartedRule,\n  deviceCodeCompletedRule,\n  retryAuthRule,\n  resetAuthRule,\n} from './rules.js';\n\n/**\n * Authentication engine context - uses context for state management\n */\nexport interface AuthEngineContext {\n  authState: PraxisAuthState;\n  authData: PraxisAuthContext;\n}\n\n/**\n * Create a new Praxis authentication engine\n */\nexport function createAuthEngine(\n  connectionId: string,\n  authMethod: AuthMethod,\n  initialConfig?: Partial<PraxisAuthContext>\n): LogicEngine<AuthEngineContext> {\n  const registry = new PraxisRegistry<AuthEngineContext>();\n\n  // Register all authentication rules\n  registry.registerRule(authenticateRule);\n  registry.registerRule(authSuccessRule);\n  registry.registerRule(authFailedRule);\n  registry.registerRule(logoutRule);\n  registry.registerRule(tokenExpiredRule);\n  registry.registerRule(deviceCodeStartedRule);\n  registry.registerRule(deviceCodeCompletedRule);\n  registry.registerRule(retryAuthRule);\n  registry.registerRule(resetAuthRule);\n\n  return createPraxisEngine<AuthEngineContext>({\n    initialContext: {\n      authState: 'idle',\n      authData: {\n        connectionId,\n        authMethod,\n        retryCount: 0,\n        ...initialConfig,\n      },\n    },\n    registry,\n    initialFacts: [],\n  });\n}\n", "/**\n * Praxis Authentication Manager\n *\n * High-level API for authentication operations using the Praxis logic engine.\n * This class provides a simple API that mirrors the existing FSMManager\n * for easy migration from XState.\n */\n\nimport type { LogicEngine } from '@plures/praxis';\nimport type {\n  PraxisAuthContext,\n  PraxisAuthState,\n  PraxisAuthSnapshot,\n  AuthMethod,\n} from './types.js';\nimport { DEFAULT_AUTH_CONFIG } from './types.js';\nimport {\n  AuthenticateEvent,\n  AuthSuccessEvent,\n  AuthFailedEvent,\n  LogoutEvent,\n  TokenExpiredEvent,\n  DeviceCodeStartedEvent,\n  DeviceCodeCompletedEvent,\n  RetryAuthEvent,\n  ResetAuthEvent,\n} from './facts.js';\nimport { createAuthEngine, type AuthEngineContext } from './engine.js';\n\n/**\n * PraxisAuthManager - High-level API for authentication operations\n */\nexport class PraxisAuthManager {\n  private engine: LogicEngine<AuthEngineContext>;\n  private isStarted = false;\n  private readonly connectionId: string;\n  private readonly authMethod: AuthMethod;\n\n  constructor(connectionId: string, authMethod: AuthMethod, config?: Partial<PraxisAuthContext>) {\n    this.connectionId = connectionId;\n    this.authMethod = authMethod;\n    this.engine = createAuthEngine(connectionId, authMethod, config);\n  }\n\n  start(): void {\n    this.isStarted = true;\n  }\n\n  stop(): void {\n    this.isStarted = false;\n  }\n\n  getAuthState(): PraxisAuthState {\n    return this.engine.getContext().authState;\n  }\n\n  getAuthData(): PraxisAuthContext {\n    return this.engine.getContext().authData;\n  }\n\n  /**\n   * Initiate authentication\n   */\n  authenticate(options?: {\n    forceInteractive?: boolean;\n    tenantId?: string;\n    clientId?: string;\n  }): boolean {\n    if (!this.isStarted) return false;\n\n    const currentState = this.getAuthState();\n    if (currentState !== 'idle' && currentState !== 'failed') return false;\n\n    this.engine.step([\n      AuthenticateEvent.create({\n        connectionId: this.connectionId,\n        authMethod: this.authMethod,\n        forceInteractive: options?.forceInteractive,\n        tenantId: options?.tenantId,\n        clientId: options?.clientId,\n      }),\n    ]);\n\n    return this.getAuthState() === 'authenticating';\n  }\n\n  /**\n   * Handle successful authentication\n   */\n  authSuccess(token: string, expiresAt?: number): boolean {\n    if (!this.isStarted) return false;\n    if (this.getAuthState() !== 'authenticating') return false;\n\n    this.engine.step([AuthSuccessEvent.create({ token, expiresAt })]);\n    return this.getAuthState() === 'authenticated';\n  }\n\n  /**\n   * Handle failed authentication\n   */\n  authFailed(error: string): boolean {\n    if (!this.isStarted) return false;\n    if (this.getAuthState() !== 'authenticating') return false;\n\n    this.engine.step([AuthFailedEvent.create({ error })]);\n    return this.getAuthState() === 'failed';\n  }\n\n  /**\n   * Logout and clear authentication\n   */\n  logout(): boolean {\n    if (!this.isStarted) return false;\n    if (this.getAuthState() !== 'authenticated') return false;\n\n    this.engine.step([LogoutEvent.create({})]);\n    return this.getAuthState() === 'idle';\n  }\n\n  /**\n   * Handle token expiration\n   */\n  tokenExpired(): boolean {\n    if (!this.isStarted) return false;\n    if (this.getAuthState() !== 'authenticated') return false;\n\n    this.engine.step([TokenExpiredEvent.create({})]);\n    return this.getAuthState() === 'failed';\n  }\n\n  /**\n   * Handle device code flow start\n   */\n  deviceCodeStarted(userCode: string, verificationUri: string, expiresInSeconds: number): boolean {\n    if (!this.isStarted) return false;\n    if (this.getAuthState() !== 'authenticating') return false;\n\n    this.engine.step([\n      DeviceCodeStartedEvent.create({\n        userCode,\n        verificationUri,\n        expiresInSeconds,\n      }),\n    ]);\n\n    return true;\n  }\n\n  /**\n   * Handle device code flow completion\n   */\n  deviceCodeCompleted(token: string, expiresAt?: number): boolean {\n    if (!this.isStarted) return false;\n    if (this.getAuthState() !== 'authenticating') return false;\n\n    this.engine.step([DeviceCodeCompletedEvent.create({ token, expiresAt })]);\n    return this.getAuthState() === 'authenticated';\n  }\n\n  /**\n   * Retry authentication after failure\n   */\n  retry(): boolean {\n    if (!this.isStarted) return false;\n    if (this.getAuthState() !== 'failed') return false;\n\n    const authData = this.getAuthData();\n    if (authData.retryCount >= DEFAULT_AUTH_CONFIG.maxRetryCount) {\n      return false;\n    }\n\n    this.engine.step([RetryAuthEvent.create({})]);\n    return this.getAuthState() === 'authenticating';\n  }\n\n  /**\n   * Reset authentication state\n   */\n  reset(): void {\n    if (!this.isStarted) return;\n    this.engine.step([ResetAuthEvent.create({})]);\n  }\n\n  /**\n   * Check if currently authenticated\n   */\n  isAuthenticated(): boolean {\n    return this.getAuthState() === 'authenticated';\n  }\n\n  /**\n   * Check if authentication is in progress\n   */\n  isAuthenticating(): boolean {\n    return this.getAuthState() === 'authenticating';\n  }\n\n  /**\n   * Check if there's an active device code session\n   */\n  hasDeviceCodeSession(): boolean {\n    const authData = this.getAuthData();\n    return !!authData.deviceCodeSession;\n  }\n\n  /**\n   * Get the current token if authenticated\n   */\n  getToken(): string | undefined {\n    if (!this.isAuthenticated()) return undefined;\n    return this.getAuthData().token;\n  }\n\n  /**\n   * Check if token is valid (not expired)\n   */\n  isTokenValid(): boolean {\n    if (!this.isAuthenticated()) return false;\n\n    const authData = this.getAuthData();\n    if (!authData.expiresAt) return true; // No expiry set means token is valid\n\n    // Add 5 minute buffer before expiry\n    const bufferMs = 5 * 60 * 1000;\n    return Date.now() < authData.expiresAt - bufferMs;\n  }\n\n  /**\n   * Get authentication snapshot\n   */\n  getSnapshot(): PraxisAuthSnapshot {\n    const authState = this.getAuthState();\n    const authData = this.getAuthData();\n\n    return {\n      state: authState,\n      connectionId: authData.connectionId,\n      authMethod: authData.authMethod,\n      isAuthenticated: authState === 'authenticated',\n      hasToken: !!authData.token,\n      error: authData.error,\n      lastAuthAttempt: authData.lastAuthAttempt,\n    };\n  }\n\n  /**\n   * Get status information\n   */\n  getStatus() {\n    return {\n      isStarted: this.isStarted,\n      authState: this.getAuthState(),\n      authContext: this.getAuthData(),\n    };\n  }\n\n  /**\n   * Validate that manager is in sync\n   */\n  validateSync(): boolean {\n    return this.isStarted;\n  }\n\n  /**\n   * Get the underlying engine for advanced operations\n   */\n  getEngine(): LogicEngine<AuthEngineContext> {\n    return this.engine;\n  }\n}\n", "/* eslint-disable max-lines */\n/**\n * Praxis Application Manager\n *\n * High-level API for application orchestration using the Praxis logic engine.\n * This class coordinates multiple Praxis engines (Timer, Auth, Connection)\n * using an event bus pattern.\n */\n\nimport type { LogicEngine } from '@plures/praxis';\nimport type {\n  PraxisApplicationContext,\n  PraxisApplicationState,\n  PraxisApplicationSnapshot,\n  ViewMode,\n  WorkItem,\n} from './types.js';\nimport type { PraxisTimerSnapshot } from '../timer/types.js';\nimport type { ProjectConnection } from '../connection/types.js';\nimport { createApplicationEngine, type ApplicationEngineContext } from './engine.js';\nimport { PraxisEventBus, getPraxisEventBus } from './eventBus.js';\nimport { PraxisTimerManager } from '../timer/manager.js';\nimport { PraxisAuthManager } from '../auth/manager.js';\nimport { PraxisConnectionManager } from '../connection/manager.js';\nimport { TraceRecorder } from './tracing.js';\nimport { instrumentActor } from '../../logging/TraceLogger.js';\nimport { Component } from '../../logging/ComponentLogger.js';\nimport {\n  ActivateEvent,\n  ActivationCompleteEvent,\n  ActivationFailedEvent,\n  DeactivateEvent,\n  DeactivationCompleteEvent,\n  ConnectionsLoadedEvent,\n  ConnectionSelectedEvent,\n  QueryChangedEvent,\n  ViewModeChangedEvent,\n  WorkItemsLoadedEvent,\n  WorkItemsErrorEvent,\n  DeviceCodeStartedAppEvent,\n  DeviceCodeCompletedAppEvent,\n  ApplicationErrorEvent,\n  RetryApplicationEvent,\n  ResetApplicationEvent,\n  ToggleDebugViewEvent,\n  AuthReminderRequestedEvent,\n  AuthReminderClearedEvent,\n  AuthenticationSuccessEvent,\n  AuthenticationFailedEvent,\n  RefreshDataEvent,\n  SignInEntraEvent,\n  SignOutEntraEvent,\n  CreateWorkItemEvent,\n  CreateBranchEvent,\n  CreatePullRequestEvent,\n  ShowPullRequestsEvent,\n  ShowBuildStatusEvent,\n  SelectTeamEvent,\n  ResetPreferredRepositoriesEvent,\n  SelfTestWebviewEvent,\n  BulkAssignEvent,\n  GenerateCopilotPromptEvent,\n  ShowTimeReportEvent,\n  WebviewReadyEvent,\n  ConnectionStateUpdatedEvent,\n  type PraxisApplicationEvent,\n} from './facts.js';\n\n/**\n * PraxisApplicationManager - Orchestrates all Praxis engines\n *\n * This is the main entry point for the Praxis-based application state management.\n * It coordinates Timer, Auth, and Connection engines via an event bus.\n */\nexport class PraxisApplicationManager {\n  private engine: LogicEngine<ApplicationEngineContext>;\n  private traceRecorder: TraceRecorder<ApplicationEngineContext>;\n  private eventBus: PraxisEventBus;\n  private isStarted = false;\n\n  // Child engine managers (per connection)\n  private timerManager?: PraxisTimerManager;\n  private authManagers = new Map<string, PraxisAuthManager>();\n  private connectionManagers = new Map<string, PraxisConnectionManager>();\n\n  // Event bus unsubscribe functions\n  private eventBusCleanup: (() => void)[] = [];\n\n  // State change listeners\n  private listeners: ((context: ApplicationEngineContext) => void)[] = [];\n\n  private static instance: PraxisApplicationManager;\n\n  static getInstance(): PraxisApplicationManager {\n    if (!PraxisApplicationManager.instance) {\n      PraxisApplicationManager.instance = new PraxisApplicationManager();\n    }\n    return PraxisApplicationManager.instance;\n  }\n\n  static resetInstance(): void {\n    if (PraxisApplicationManager.instance) {\n      PraxisApplicationManager.instance.stop();\n      // @ts-ignore\n      PraxisApplicationManager.instance = undefined;\n    }\n  }\n\n  constructor(config?: Partial<PraxisApplicationContext>) {\n    if (PraxisApplicationManager.instance) {\n      // If an instance already exists, we should probably return it or warn.\n      // But since constructor returns 'this', we can't return the existing instance easily without a factory.\n      // For now, we'll just update the singleton reference if it's not set.\n      // console.warn('PraxisApplicationManager instantiated directly. Use getInstance() for singleton access.');\n    } else {\n      PraxisApplicationManager.instance = this;\n    }\n    this.traceRecorder = new TraceRecorder<ApplicationEngineContext>();\n    this.engine = createApplicationEngine(config, this.traceRecorder);\n    this.eventBus = getPraxisEventBus();\n    this.setupEventBusListeners();\n  }\n\n  /**\n   * Set up event bus listeners for cross-engine coordination\n   */\n  private setupEventBusListeners(): void {\n    // Listen for timer events\n    this.eventBusCleanup.push(\n      this.eventBus.subscribe('timer:started', (_msg) => {\n        // Timer started - could trigger UI updates\n        this.syncTimerSnapshot();\n      })\n    );\n\n    this.eventBusCleanup.push(\n      this.eventBus.subscribe('timer:stopped', (_msg) => {\n        // Timer stopped - sync snapshot\n        this.syncTimerSnapshot();\n      })\n    );\n\n    this.eventBusCleanup.push(\n      this.eventBus.subscribe('timer:paused', () => {\n        this.syncTimerSnapshot();\n      })\n    );\n\n    this.eventBusCleanup.push(\n      this.eventBus.subscribe('timer:resumed', () => {\n        this.syncTimerSnapshot();\n      })\n    );\n\n    // Listen for auth events\n    this.eventBusCleanup.push(\n      this.eventBus.subscribe('auth:success', (msg) => {\n        if (msg.connectionId) {\n          this.dispatch([AuthenticationSuccessEvent.create({ connectionId: msg.connectionId })]);\n        }\n      })\n    );\n\n    this.eventBusCleanup.push(\n      this.eventBus.subscribe('auth:failed', (msg) => {\n        if (msg.connectionId) {\n          this.dispatch([\n            AuthenticationFailedEvent.create({\n              connectionId: msg.connectionId,\n              error: String(msg.payload.error || 'Authentication failed'),\n            }),\n          ]);\n        }\n      })\n    );\n\n    // Listen for connection events\n    this.eventBusCleanup.push(\n      this.eventBus.subscribe('connection:connected', (msg) => {\n        // Update connection state in application context\n        this.syncConnectionSnapshot(msg.connectionId!);\n      })\n    );\n\n    this.eventBusCleanup.push(\n      this.eventBus.subscribe('connection:disconnected', (msg) => {\n        this.syncConnectionSnapshot(msg.connectionId!);\n      })\n    );\n\n    this.eventBusCleanup.push(\n      this.eventBus.subscribe('connection:error', (msg) => {\n        if (msg.connectionId) {\n          this.dispatch([\n            ApplicationErrorEvent.create({\n              error: String(msg.payload.error || 'Connection error'),\n              connectionId: msg.connectionId,\n            }),\n          ]);\n        }\n      })\n    );\n  }\n\n  /**\n   * Sync timer snapshot to application context\n   */\n  private syncTimerSnapshot(): void {\n    if (!this.timerManager) return;\n\n    const snapshot = this.timerManager.getTimerSnapshot();\n    const ctx = this.engine.getContext();\n    ctx.timerSnapshot = snapshot;\n  }\n\n  /**\n   * Sync connection snapshot to application context\n   */\n  private syncConnectionSnapshot(connectionId: string): void {\n    const manager = this.connectionManagers.get(connectionId);\n    if (!manager) return;\n\n    const snapshot = manager.getSnapshot();\n    const ctx = this.engine.getContext();\n    ctx.connectionStates.set(connectionId, snapshot);\n  }\n\n  public handleEvent(event: PraxisApplicationEvent): void {\n    this.dispatch([event]);\n  }\n\n  /**\n   * Dispatch typed events to the engine\n   */\n  public dispatch(events: PraxisApplicationEvent[]): void {\n    const contextBefore = this.engine.getContext();\n    const traceEnabled = Boolean(contextBefore.debugLoggingEnabled);\n\n    if (traceEnabled) {\n      this.traceRecorder.beginDispatch(events, contextBefore);\n    }\n\n    const result = this.engine.step(events);\n    const contextAfter = this.engine.getContext();\n\n    if (traceEnabled) {\n      const entry = this.traceRecorder.completeDispatch(contextAfter, result?.diagnostics);\n      if (entry) {\n        this.engine.updateContext((ctx) => ({ ...ctx, debugTraceLog: this.traceRecorder.getEntries() }));\n      }\n    }\n\n    if (!contextAfter.debugLoggingEnabled && this.traceRecorder.getEntries().length > 0) {\n      this.traceRecorder.reset();\n      this.engine.updateContext((ctx) => ({ ...ctx, debugTraceLog: [] }));\n    }\n\n    this.notifyListeners();\n  }\n\n  private notifyListeners(): void {\n    const context = this.engine.getContext();\n    for (const listener of this.listeners) {\n      try {\n        listener(context);\n      } catch (error) {\n        // Automatic logging will capture this error\n      }\n    }\n  }\n\n  /**\n   * Start the application orchestrator\n   */\n  start(): void {\n    if (this.isStarted) return;\n    this.isStarted = true;\n\n    // Instrument tracing\n    this.instrumentTracing();\n\n    // Create timer manager (shared across all connections)\n    this.timerManager = new PraxisTimerManager();\n    this.timerManager.start();\n  }\n\n\n\n\n  /**\n   * Subscribe to state changes\n   */\n  subscribe(listener: (context: ApplicationEngineContext) => void): () => void {\n    this.listeners.push(listener);\n    return () => {\n      this.listeners = this.listeners.filter((l) => l !== listener);\n    };\n  }\n\n  /**\n   * Instrument tracing\n   */\n  private instrumentTracing(): void {\n    instrumentActor(this.engine, Component.APPLICATION, 'applicationMachine');\n  }\n\n  /**\n   * Stop the application orchestrator\n   */\n  stop(): void {\n    if (!this.isStarted) return;\n\n    // Stop all child managers\n    this.timerManager?.stop();\n\n    for (const authManager of this.authManagers.values()) {\n      authManager.stop();\n    }\n    this.authManagers.clear();\n\n    for (const connManager of this.connectionManagers.values()) {\n      connManager.stop();\n    }\n    this.connectionManagers.clear();\n\n    // Clean up event bus subscriptions\n    for (const cleanup of this.eventBusCleanup) {\n      cleanup();\n    }\n    this.eventBusCleanup = [];\n\n    this.isStarted = false;\n  }\n\n  // =========================================================================\n  // Lifecycle Methods\n  // =========================================================================\n\n  /**\n   * Activate the application\n   */\n  activate(extensionContext?: unknown): boolean {\n    if (!this.isStarted) return false;\n    if (this.getApplicationState() !== 'inactive') return false;\n\n    this.dispatch([ActivateEvent.create({ extensionContext })]);\n    return this.getApplicationState() === 'activating';\n  }\n\n  /**\n   * Complete activation\n   */\n  activationComplete(): boolean {\n    if (!this.isStarted) return false;\n    if (this.getApplicationState() !== 'activating') return false;\n\n    this.dispatch([ActivationCompleteEvent.create({})]);\n    this.eventBus.emitApplicationEvent('app:activated', {});\n    return this.getApplicationState() === 'active';\n  }\n\n  /**\n   * Handle activation failure\n   */\n  activationFailed(error: string): boolean {\n    if (!this.isStarted) return false;\n    if (this.getApplicationState() !== 'activating') return false;\n\n    this.dispatch([ActivationFailedEvent.create({ error })]);\n    return this.getApplicationState() === 'activation_error';\n  }\n\n  /**\n   * Deactivate the application\n   */\n  deactivate(): boolean {\n    if (!this.isStarted) return false;\n\n    const state = this.getApplicationState();\n    if (state === 'inactive' || state === 'deactivating') return false;\n\n    this.dispatch([DeactivateEvent.create({})]);\n    return this.getApplicationState() === 'deactivating';\n  }\n\n  /**\n   * Complete deactivation\n   */\n  deactivationComplete(): boolean {\n    if (!this.isStarted) return false;\n    if (this.getApplicationState() !== 'deactivating') return false;\n\n    this.dispatch([DeactivationCompleteEvent.create({})]);\n    this.eventBus.emitApplicationEvent('app:deactivated', {});\n    return this.getApplicationState() === 'inactive';\n  }\n\n  // =========================================================================\n  // Connection Methods\n  // =========================================================================\n\n  /**\n   * Load connections\n   */\n  loadConnections(connections: ProjectConnection[]): void {\n    if (!this.isStarted) return;\n\n    this.dispatch([ConnectionsLoadedEvent.create({ connections })]);\n\n    // Create auth and connection managers for each connection\n    for (const conn of connections) {\n      if (!this.authManagers.has(conn.id)) {\n        const authManager = new PraxisAuthManager(conn.id, conn.authMethod || 'pat');\n        authManager.start();\n        this.authManagers.set(conn.id, authManager);\n      }\n\n      if (!this.connectionManagers.has(conn.id)) {\n        const connManager = new PraxisConnectionManager(conn);\n        connManager.start();\n        this.connectionManagers.set(conn.id, connManager);\n      }\n    }\n  }\n\n  /**\n   * Select a connection\n   */\n  selectConnection(connectionId: string): boolean {\n    if (!this.isStarted) return false;\n\n    const ctx = this.engine.getContext();\n    const exists = ctx.connections.some((c) => c.id === connectionId);\n    if (!exists) return false;\n\n    this.dispatch([ConnectionSelectedEvent.create({ connectionId })]);\n    return this.getActiveConnectionId() === connectionId;\n  }\n\n  /**\n   * Get the active connection ID\n   */\n  getActiveConnectionId(): string | undefined {\n    return this.engine.getContext().activeConnectionId;\n  }\n\n  /**\n   * Get all connections\n   */\n  getConnections(): ProjectConnection[] {\n    return this.engine.getContext().connections;\n  }\n\n  /**\n   * Get auth manager for a connection\n   */\n  getAuthManager(connectionId: string): PraxisAuthManager | undefined {\n    return this.authManagers.get(connectionId);\n  }\n\n  /**\n   * Get connection manager for a connection\n   */\n  getConnectionManager(connectionId: string): PraxisConnectionManager | undefined {\n    return this.connectionManagers.get(connectionId);\n  }\n\n  // =========================================================================\n  // Query and View Methods\n  // =========================================================================\n\n  /**\n   * Change the active query\n   */\n  setQuery(query: string, connectionId?: string): void {\n    if (!this.isStarted) return;\n    this.dispatch([QueryChangedEvent.create({ query, connectionId })]);\n  }\n\n  /**\n   * Get the active query\n   */\n  getActiveQuery(): string | undefined {\n    return this.engine.getContext().activeQuery;\n  }\n\n  /**\n   * Change the view mode\n   */\n  setViewMode(viewMode: ViewMode): void {\n    if (!this.isStarted) return;\n    this.dispatch([ViewModeChangedEvent.create({ viewMode })]);\n  }\n\n  /**\n   * Toggle view mode\n   */\n  toggleViewMode(): void {\n    if (!this.isStarted) return;\n    const current = this.getViewMode();\n    const next = current === 'list' ? 'board' : 'list';\n    this.setViewMode(next);\n  }\n\n  /**\n   * Get the current view mode\n   */\n  getViewMode(): ViewMode {\n    return this.engine.getContext().viewMode;\n  }\n\n  // =========================================================================\n  // Work Items Methods\n  // =========================================================================\n\n  /**\n   * Handle work items loaded\n   */\n  workItemsLoaded(workItems: WorkItem[], connectionId: string, query?: string): void {\n    if (!this.isStarted) return;\n\n    this.dispatch([WorkItemsLoadedEvent.create({ workItems, connectionId, query })]);\n\n    this.eventBus.emitApplicationEvent(\n      'workitems:loaded',\n      { count: workItems.length, query },\n      connectionId\n    );\n  }\n\n  /**\n   * Handle work items error\n   */\n  workItemsError(error: string, connectionId: string): void {\n    if (!this.isStarted) return;\n\n    this.dispatch([WorkItemsErrorEvent.create({ error, connectionId })]);\n\n    this.eventBus.emitApplicationEvent('workitems:error', { error }, connectionId);\n  }\n\n  /**\n   * Handle device code flow\n   */\n  handleDeviceCode(\n    connectionId: string,\n    userCode: string,\n    verificationUri: string,\n    expiresIn: number\n  ): void {\n    if (!this.isStarted) return;\n\n    this.dispatch([\n      DeviceCodeStartedAppEvent.create({\n        connectionId,\n        userCode,\n        verificationUri,\n        expiresInSeconds: expiresIn,\n      }),\n    ]);\n  }\n\n  /**\n   * Get work items for a connection\n   */\n  getWorkItems(connectionId?: string): WorkItem[] {\n    const ctx = this.engine.getContext();\n    const targetId = connectionId || ctx.activeConnectionId;\n\n    if (!targetId) return [];\n    return ctx.connectionWorkItems.get(targetId) || [];\n  }\n\n  // =========================================================================\n  // Timer Methods (delegated to timer manager)\n  // =========================================================================\n\n  /**\n   * Start timer for a work item\n   */\n  startTimer(workItemId: number, workItemTitle: string): boolean {\n    if (!this.timerManager) return false;\n\n    const success = this.timerManager.startTimer(workItemId, workItemTitle);\n    if (success) {\n      this.eventBus.emitTimerEvent('timer:started', { workItemId, workItemTitle });\n    }\n    return success;\n  }\n\n  /**\n   * Pause the timer\n   */\n  pauseTimer(manual = true): boolean {\n    if (!this.timerManager) return false;\n\n    const success = this.timerManager.pauseTimer(manual);\n    if (success) {\n      this.eventBus.emitTimerEvent('timer:paused', { manual });\n    }\n    return success;\n  }\n\n  /**\n   * Resume the timer\n   */\n  resumeTimer(fromActivity = false): boolean {\n    if (!this.timerManager) return false;\n\n    const success = this.timerManager.resumeTimer(fromActivity);\n    if (success) {\n      this.eventBus.emitTimerEvent('timer:resumed', { fromActivity });\n    }\n    return success;\n  }\n\n  /**\n   * Stop the timer\n   */\n  stopTimer() {\n    if (!this.timerManager) return null;\n\n    const result = this.timerManager.stopTimer();\n    if (result) {\n      this.eventBus.emitTimerEvent('timer:stopped', {\n        workItemId: result.workItemId,\n        hoursDecimal: result.hoursDecimal,\n      });\n    }\n    return result;\n  }\n\n  /**\n   * Get timer manager\n   */\n  getTimerManager(): PraxisTimerManager | undefined {\n    return this.timerManager;\n  }\n\n  // =========================================================================\n  // Device Code Flow Methods\n  // =========================================================================\n\n  /**\n   * Handle device code started\n   */\n  deviceCodeStarted(\n    connectionId: string,\n    userCode: string,\n    verificationUri: string,\n    expiresInSeconds: number\n  ): void {\n    if (!this.isStarted) return;\n\n    this.dispatch([\n      DeviceCodeStartedAppEvent.create({\n        connectionId,\n        userCode,\n        verificationUri,\n        expiresInSeconds,\n      }),\n    ]);\n  }\n\n  /**\n   * Handle device code received\n   */\n  deviceCodeReceived(\n    connectionId: string,\n    userCode: string,\n    verificationUri: string,\n    expiresInSeconds: number\n  ): void {\n    if (!this.isStarted) return;\n\n    this.dispatch([\n      DeviceCodeStartedAppEvent.create({\n        connectionId,\n        userCode,\n        verificationUri,\n        expiresInSeconds,\n      }),\n    ]);\n  }\n\n  /**\n   * Handle device code completed\n   */\n  deviceCodeCompleted(connectionId: string): void {\n    if (!this.isStarted) return;\n\n    this.dispatch([DeviceCodeCompletedAppEvent.create({ connectionId })]);\n  }\n\n  /**\n   * Get device code session\n   */\n  getDeviceCodeSession() {\n    return this.engine.getContext().deviceCodeSession;\n  }\n\n  // =========================================================================\n  // Error Handling Methods\n  // =========================================================================\n\n  /**\n   * Report an error\n   */\n  reportError(error: string, connectionId?: string): void {\n    if (!this.isStarted) return;\n\n    this.dispatch([ApplicationErrorEvent.create({ error, connectionId })]);\n    this.eventBus.emitApplicationEvent('app:error', { error }, connectionId);\n  }\n\n  /**\n   * Retry after error\n   */\n  retry(): boolean {\n    if (!this.isStarted) return false;\n    if (this.getApplicationState() !== 'activation_error') return false;\n\n    this.dispatch([RetryApplicationEvent.create({})]);\n    return this.getApplicationState() === 'active';\n  }\n\n  /**\n   * Reset application state\n   */\n  reset(): void {\n    if (!this.isStarted) return;\n    this.dispatch([ResetApplicationEvent.create({})]);\n  }\n\n  /**\n   * Get last error\n   */\n  getLastError() {\n    return this.engine.getContext().lastError;\n  }\n\n  // =========================================================================\n  // Auth Reminder Methods\n  // =========================================================================\n\n  /**\n   * Request auth reminder\n   */\n  requestAuthReminder(connectionId: string, reason: string, detail?: string): void {\n    if (!this.isStarted) return;\n\n    this.dispatch([AuthReminderRequestedEvent.create({ connectionId, reason, detail })]);\n  }\n\n  /**\n   * Clear auth reminder\n   */\n  clearAuthReminder(connectionId: string): void {\n    if (!this.isStarted) return;\n\n    this.dispatch([AuthReminderClearedEvent.create({ connectionId })]);\n  }\n\n  /**\n   * Get pending auth reminders\n   */\n  getPendingAuthReminders() {\n    return this.engine.getContext().pendingAuthReminders;\n  }\n\n  // =========================================================================\n  // Debug Methods\n  // =========================================================================\n\n  /**\n   * Toggle debug view\n   */\n  toggleDebugView(visible?: boolean): void {\n    if (!this.isStarted) return;\n\n    this.dispatch([ToggleDebugViewEvent.create({ debugViewVisible: visible })]);\n  }\n\n  /**\n   * Get debug view visibility\n   */\n  isDebugViewVisible(): boolean {\n    return this.engine.getContext().debugViewVisible;\n  }\n\n  // =========================================================================\n  // State Access Methods\n  // =========================================================================\n\n  /**\n   * Get the current application state\n   */\n  getApplicationState(): PraxisApplicationState {\n    return this.engine.getContext().applicationState;\n  }\n\n  /**\n   * Get the full application context\n   */\n  getContext(): ApplicationEngineContext {\n    return this.engine.getContext();\n  }\n\n  /**\n   * Get application snapshot\n   */\n  getSnapshot(): PraxisApplicationSnapshot & { matches: (state: string) => boolean } {\n    const ctx = this.engine.getContext() as unknown as PraxisApplicationContext;\n    const currentState = this.getApplicationState();\n\n    return {\n      state: currentState,\n      // Expose the full context for compatibility with consumers that expect\n      // an XState-style snapshot shape (activation bridge, webview handlers).\n      context: ctx,\n      isActivated: ctx.isActivated,\n      connections: ctx.connections,\n      activeConnectionId: ctx.activeConnectionId,\n      hasActiveTimer: !!ctx.timerSnapshot?.running,\n      connectionCount: ctx.connections.length,\n      errorRecoveryAttempts: ctx.errorRecoveryAttempts,\n      // Compatibility with XState consumers\n      matches: (state: string | Record<string, any>) => {\n        if (typeof state !== 'string') return false;\n        if (state === currentState) return true;\n        // Map legacy states\n        if (state === 'activation_failed' && currentState === 'activation_error') return true;\n        // Map hierarchical states for UI compatibility\n        if (currentState === 'active' && state.startsWith('active.')) return false; // Substates not supported yet\n        if (currentState === 'active' && state === 'active') return true;\n        return false;\n      },\n    };\n  }\n\n  /**\n   * Get status information\n   */\n  getStatus() {\n    return {\n      isStarted: this.isStarted,\n      applicationState: this.getApplicationState(),\n      connectionCount: this.getConnections().length,\n      authManagerCount: this.authManagers.size,\n      connectionManagerCount: this.connectionManagers.size,\n      hasTimerManager: !!this.timerManager,\n      eventBusSubscribers: this.eventBus.getSubscriberCount(),\n    };\n  }\n\n  /**\n   * Validate that manager is in sync\n   */\n  validateSync(): boolean {\n    return this.isStarted;\n  }\n\n  /**\n   * Get the underlying engine for advanced operations\n   */\n  getEngine(): LogicEngine<ApplicationEngineContext> {\n    return this.engine;\n  }\n\n  /**\n   * Get the event bus for external subscriptions\n   */\n  getEventBus(): PraxisEventBus {\n    return this.eventBus;\n  }\n\n  /**\n   * Refresh data\n   */\n  refreshData(connectionId?: string): void {\n    if (!this.isStarted) return;\n    this.dispatch([RefreshDataEvent.create({ connectionId })]);\n  }\n\n  /**\n   * Sign in with Entra\n   */\n  signInEntra(connectionId: string, forceInteractive?: boolean): void {\n    if (!this.isStarted) return;\n    this.dispatch([SignInEntraEvent.create({ connectionId, forceInteractive })]);\n  }\n\n  /**\n   * Sign out Entra\n   */\n  signOutEntra(connectionId: string): void {\n    if (!this.isStarted) return;\n    this.dispatch([SignOutEntraEvent.create({ connectionId })]);\n  }\n\n  // =========================================================================\n  // UI Action Methods\n  // =========================================================================\n\n  /**\n   * Create work item\n   */\n  createWorkItem(connectionId: string): void {\n    if (!this.isStarted) return;\n    this.dispatch([CreateWorkItemEvent.create({ connectionId })]);\n  }\n\n  /**\n   * Create branch\n   */\n  createBranch(connectionId: string, workItemId?: number): void {\n    if (!this.isStarted) return;\n    this.dispatch([CreateBranchEvent.create({ connectionId, workItemId })]);\n  }\n\n  /**\n   * Create pull request\n   */\n  createPullRequest(connectionId: string, workItemId?: number): void {\n    if (!this.isStarted) return;\n    this.dispatch([CreatePullRequestEvent.create({ connectionId, workItemId })]);\n  }\n\n  /**\n   * Show pull requests\n   */\n  showPullRequests(connectionId: string): void {\n    if (!this.isStarted) return;\n    this.dispatch([ShowPullRequestsEvent.create({ connectionId })]);\n  }\n\n  /**\n   * Show build status\n   */\n  showBuildStatus(connectionId: string): void {\n    if (!this.isStarted) return;\n    this.dispatch([ShowBuildStatusEvent.create({ connectionId })]);\n  }\n\n  /**\n   * Select team\n   */\n  selectTeam(connectionId: string): void {\n    if (!this.isStarted) return;\n    this.dispatch([SelectTeamEvent.create({ connectionId })]);\n  }\n\n  /**\n   * Reset preferred repositories\n   */\n  resetPreferredRepositories(connectionId: string): void {\n    if (!this.isStarted) return;\n    this.dispatch([ResetPreferredRepositoriesEvent.create({ connectionId })]);\n  }\n\n  /**\n   * Self test webview\n   */\n  selfTestWebview(): void {\n    if (!this.isStarted) return;\n    this.dispatch([SelfTestWebviewEvent.create({})]);\n  }\n\n  /**\n   * Bulk assign\n   */\n  bulkAssign(connectionId: string, workItemIds: number[]): void {\n    if (!this.isStarted) return;\n    this.dispatch([BulkAssignEvent.create({ connectionId, workItemIds })]);\n  }\n\n  /**\n   * Generate Copilot prompt\n   */\n  generateCopilotPrompt(connectionId: string, workItemId: number): void {\n    if (!this.isStarted) return;\n    this.dispatch([GenerateCopilotPromptEvent.create({ connectionId, workItemId })]);\n  }\n\n  /**\n   * Show time report\n   */\n  showTimeReport(connectionId: string): void {\n    if (!this.isStarted) return;\n    this.dispatch([ShowTimeReportEvent.create({ connectionId })]);\n  }\n\n  /**\n   * Webview ready\n   */\n  webviewReady(): void {\n    if (!this.isStarted) return;\n    this.dispatch([WebviewReadyEvent.create({})]);\n  }\n\n  /**\n   * Update connection state from external source\n   */\n  updateConnectionState(connectionId: string, state: any): void {\n    if (!this.isStarted) return;\n    this.dispatch([ConnectionStateUpdatedEvent.create({ connectionId, state })]);\n  }\n\n  /**\n   * Authentication success\n   */\n  authenticationSuccess(connectionId: string): void {\n    if (!this.isStarted) return;\n    this.dispatch([AuthenticationSuccessEvent.create({ connectionId })]);\n    // Also clear any pending auth reminders\n    this.dispatch([AuthReminderClearedEvent.create({ connectionId })]);\n  }\n\n  /**\n   * Authentication failed\n   */\n  authenticationFailed(connectionId: string, error: string): void {\n    if (!this.isStarted) return;\n    this.dispatch([AuthenticationFailedEvent.create({ connectionId, error })]);\n  }\n\n  // =========================================================================\n  // Timer Adapter Support Methods\n  // =========================================================================\n\n  /**\n   * Record activity ping\n   */\n  activityPing(): void {\n    this.timerManager?.activityPing();\n  }\n\n  /**\n   * Get timer snapshot\n   */\n  getTimerSnapshot(): PraxisTimerSnapshot | undefined {\n    return this.timerManager?.getTimerSnapshot();\n  }\n\n  /**\n   * Restore timer state\n   */\n  restoreTimer(\n    workItemId: number,\n    workItemTitle: string,\n    startTime: number,\n    isPaused: boolean\n  ): boolean {\n    return this.timerManager?.restoreTimer(workItemId, workItemTitle, startTime, isPaused) ?? false;\n  }\n\n  /**\n   * Update elapsed limit\n   */\n  updateElapsedLimit(_hours: number): void {\n    // TODO: Implement update elapsed limit in Praxis Timer\n    // This would require a new event in the timer engine\n  }\n\n  /**\n   * Subscribe to timer updates\n   */\n  subscribeToTimer(callback: (snapshot: PraxisTimerSnapshot | null) => void): () => void {\n    // Subscribe to all timer events\n    const unsubscribe = this.eventBus.subscribeAll((message) => {\n      if (message.type.startsWith('timer:')) {\n        callback(this.getTimerSnapshot() ?? null);\n      }\n    });\n\n    // Initial callback\n    callback(this.getTimerSnapshot() ?? null);\n\n    return unsubscribe;\n  }\n}\n", "import { PraxisApplicationManager } from '../praxis/application/manager.js';\n\nexport interface ApplicationEvent {\n  type: string;\n  [key: string]: unknown;\n}\n\nexport const eventHandlers: Record<\n  string,\n  (manager: PraxisApplicationManager, event: ApplicationEvent) => void\n> = {\n  ACTIVATE: (manager) => manager.activate(),\n  ACTIVATION_COMPLETE: (manager) => manager.activationComplete(),\n  DEACTIVATE: (manager) => manager.deactivate(),\n  EXTENSION_DEACTIVATED: (manager) => manager.deactivate(),\n  CONNECTIONS_LOADED: (manager, event) => {\n    if (event.connections && Array.isArray(event.connections)) {\n      manager.loadConnections(event.connections as any[]);\n    }\n  },\n  CONNECTION_SELECTED: (manager, event) => {\n    if (event.connectionId) {\n      manager.selectConnection(event.connectionId as string);\n    }\n  },\n  SELECT_CONNECTION: (manager, event) => {\n    if (event.connectionId) {\n      manager.selectConnection(event.connectionId as string);\n    }\n  },\n  AUTHENTICATION_REQUIRED: (manager, event) => {\n    if (event.connectionId) {\n      manager.requestAuthReminder(event.connectionId as string, 'Authentication required');\n    }\n  },\n  AUTHENTICATION_SUCCESS: (manager, event) => {\n    if (event.connectionId) {\n      manager.authenticationSuccess(event.connectionId as string);\n    }\n  },\n  AUTHENTICATION_FAILED: (manager, event) => {\n    if (event.connectionId && event.error) {\n      manager.authenticationFailed(event.connectionId as string, event.error as string);\n    }\n  },\n  AUTH_REMINDER_CLEARED: (manager, event) => {\n    if (event.connectionId) {\n      manager.clearAuthReminder(event.connectionId as string);\n    }\n  },\n  CONNECTION_ESTABLISHED: (manager, event) => {\n    if (event.connectionId) {\n      if (event.connectionState) {\n        manager.updateConnectionState(event.connectionId as string, event.connectionState);\n      }\n      manager.selectConnection(event.connectionId as string);\n      manager.refreshData(event.connectionId as string);\n    }\n  },\n  WEBVIEW_READY: (manager) => {\n    manager.webviewReady();\n  },\n  UPDATE_WEBVIEW_PANEL: (_manager, _event) => {\n    // Webview panel is managed externally in the new architecture\n    // We handle this event to suppress warnings from activation.ts\n  },\n  ERROR: (manager, event) => {\n    if (event.error) {\n      const err = event.error as Error;\n      manager.reportError(err.message);\n    }\n  },\n  RETRY: (manager) => manager.retry(),\n  RESET: (manager) => manager.reset(),\n  REFRESH_DATA: (manager, event) => manager.refreshData(event.connectionId as string),\n  SIGN_IN_ENTRA: (manager, event) =>\n    manager.signInEntra(event.connectionId as string, event.forceInteractive as boolean),\n  SIGN_OUT_ENTRA: (manager, event) => manager.signOutEntra(event.connectionId as string),\n  WORK_ITEMS_LOADED: (manager, event) => {\n    const connectionId =\n      typeof event.connectionId === 'string'\n        ? (event.connectionId as string)\n        : manager.getContext().activeConnectionId;\n\n    if (!connectionId) {\n      return;\n    }\n\n    const workItems = Array.isArray(event.workItems) ? (event.workItems as any[]) : [];\n    const query = typeof event.query === 'string' ? (event.query as string) : undefined;\n\n    manager.workItemsLoaded(workItems, connectionId, query);\n\n    if (event.kanbanView === true) {\n      manager.setViewMode('kanban');\n    }\n  },\n\n  WORK_ITEMS_ERROR: (manager, event) => {\n    const connectionId =\n      typeof event.connectionId === 'string'\n        ? (event.connectionId as string)\n        : manager.getContext().activeConnectionId;\n\n    if (!connectionId) {\n      return;\n    }\n\n    const error = typeof event.error === 'string' ? (event.error as string) : 'Unknown error';\n    manager.workItemsError(error, connectionId);\n  },\n\n  COMMENT_RESULT: (manager, event) => {\n    if (event.success === false) {\n      const errorMessage =\n        typeof event.error === 'string' ? (event.error as string) : 'Comment operation failed';\n      manager.reportError(errorMessage, event.connectionId as string | undefined);\n    }\n    // Success cases are handled upstream (webview/UI). No-op to avoid warning noise.\n  },\n  TOGGLE_DEBUG_VIEW: (manager) => manager.toggleDebugView(),\n  TOGGLE_VIEW: (manager) => manager.toggleViewMode(),\n  PAUSE_TIMER: (manager) => manager.pauseTimer(),\n  RESUME_TIMER: (manager) => manager.resumeTimer(),\n  STOP_TIMER: (manager) => manager.stopTimer(),\n  START_TIMER: (manager, event) => {\n    if (event.workItemId && event.title) {\n      manager.startTimer(event.workItemId as number, event.title as string);\n    }\n  },\n  // UI Events handled by activation.ts or webview, but passed through for tracing\n  CREATE_WORK_ITEM: (manager, event) => {\n    if (event.connectionId) {\n      manager.createWorkItem(event.connectionId as string);\n    }\n  },\n  CREATE_BRANCH: (manager, event) => {\n    if (event.connectionId) {\n      manager.createBranch(event.connectionId as string, event.workItemId as number);\n    }\n  },\n  CREATE_PULL_REQUEST: (manager, event) => {\n    if (event.connectionId) {\n      manager.createPullRequest(event.connectionId as string, event.workItemId as number);\n    }\n  },\n  SHOW_PULL_REQUESTS: (manager, event) => {\n    if (event.connectionId) {\n      manager.showPullRequests(event.connectionId as string);\n    }\n  },\n  SHOW_BUILD_STATUS: (manager, event) => {\n    if (event.connectionId) {\n      manager.showBuildStatus(event.connectionId as string);\n    }\n  },\n  SELECT_TEAM: (manager, event) => {\n    if (event.connectionId) {\n      manager.selectTeam(event.connectionId as string);\n    }\n  },\n  RESET_PREFERRED_REPOSITORIES: (manager, event) => {\n    if (event.connectionId) {\n      manager.resetPreferredRepositories(event.connectionId as string);\n    }\n  },\n  SELF_TEST_WEBVIEW: (manager) => {\n    manager.selfTestWebview();\n  },\n  BULK_ASSIGN: (manager, event) => {\n    if (event.connectionId && Array.isArray(event.workItemIds)) {\n      manager.bulkAssign(event.connectionId as string, event.workItemIds as number[]);\n    }\n  },\n  GENERATE_COPILOT_PROMPT: (manager, event) => {\n    if (event.connectionId && event.workItemId) {\n      manager.generateCopilotPrompt(event.connectionId as string, event.workItemId as number);\n    }\n  },\n  SHOW_TIME_REPORT: (manager, event) => {\n    if (event.connectionId) {\n      manager.showTimeReport(event.connectionId as string);\n    }\n  },\n  SET_CONNECTION_QUERY: (manager, event) => {\n    if (event.query && typeof event.query === 'string') {\n      manager.setQuery(event.query, event.connectionId as string);\n    }\n  },\n  RESET_AUTH: (manager, event) => {\n    // Reset auth: sign out and then open settings for reconfiguration\n    const connectionId =\n      typeof event.connectionId === 'string'\n        ? event.connectionId\n        : manager.getContext().activeConnectionId;\n    if (connectionId) {\n      // Sign out first to clear auth state\n      manager.signOutEntra(connectionId);\n    }\n    // Note: Opening settings is handled in activation.ts message handler\n    // This allows the user to reconfigure auth (choose PAT or Entra, etc.)\n  },\n  OPEN_SETTINGS: (_manager, _event) => {\n    // Opening settings is handled directly in activation.ts message handler\n    // This is a no-op here to prevent \"Unknown event type\" warnings\n  },\n};\n", "/**\n * Module: SelectionWriter (Webview-only)\n * Owner: webview\n * Reads: none\n * Writes: activeConnectionId (via Application sync pipeline)\n * Receives: UI intent to select a connection\n * Emits: SELECT_CONNECTION (origin='webview')\n * Prohibitions: Do not add any extension-host imports; no context creation here\n * Rationale: Single writer for selection changes; other modules must not set selection\n *\n * LLM-GUARD:\n * - Only the webview may emit SELECT_CONNECTION\n * - Extension host code must never import this module\n */\n\n// Ownership brand (type-level only; not serialized)\ndeclare const WebviewOwnerBrand: unique symbol;\nexport type WebviewOwner = { readonly [WebviewOwnerBrand]: 'webview' };\n// Internal owner token exposed only via this module; ESLint restricts imports to src/webview/**\nexport const webviewOwner: WebviewOwner = {} as WebviewOwner;\n\nexport type WebviewOrigin = { readonly origin: 'webview' };\n\nexport type SelectConnectionEvent = {\n  type: 'SELECT_CONNECTION';\n  payload: { id: string | null; timestamp: number; correlationId: string };\n} & WebviewOrigin;\n\n/**\n * Factory: createSelectConnection\n * Only callable by the webview (enforced by import boundaries)\n *\n * @param _owner WebviewOwner token (type-branded)\n * @param id string | null\n */\nexport function createSelectConnection(\n  _owner: WebviewOwner,\n  id: string | null\n): SelectConnectionEvent {\n  return {\n    type: 'SELECT_CONNECTION',\n    origin: 'webview',\n    payload: {\n      id,\n      timestamp: Date.now(),\n      correlationId: createCorrelationId(),\n    },\n  };\n}\n\nfunction createCorrelationId(): string {\n  // Simple, fast correlation id; good enough for UI intents\n  return Math.random().toString(36).slice(2) + Date.now().toString(36);\n}\n", "/**\n * Module: src/stores/applicationStore.ts\n * Owner: application\n * Reads: (document)\n * Writes: (document)\n * Receives: (document)\n * Emits: (document)\n * Prohibitions: Do not mutate ApplicationContext directly; Do not define new *Context types\n * Rationale: (document)\n *\n * LLM-GUARD:\n * - Follow ownership boundaries; route events to Router; do not add UI logic here\n *\n * This module now uses Praxis logic engine instead of XState.\n */\n/**\n * Central Application Store - Praxis + Svelte Integration\n *\n * This is the single source of truth for application state.\n * It wraps the Praxis application manager in Svelte stores,\n * providing reactive state to components without message passing.\n */\n\nimport { readable, writable, derived } from 'svelte/store';\nimport { createPraxisStore, createContextStore, createDerivedStore } from '@plures/praxis/svelte';\nimport { PraxisApplicationManager } from '../praxis/application/manager.js';\nimport type { ProjectConnection } from '../praxis/connection/types.js';\nimport type { PraxisApplicationContext } from '../praxis/application/types.js';\nimport { setApplicationStoreBridge } from '../services/extensionHostBridge.js';\nimport { eventHandlers, type ApplicationEvent } from './eventHandlers.js';\nimport { createComponentLogger, Component } from '../logging/ComponentLogger.js';\n\nconst logger = createComponentLogger(Component.APPLICATION, 'applicationStore');\n\n// ============================================================================\n// TYPE DEFINITIONS FOR COMPATIBILITY\n// ============================================================================\n\n// Use PraxisApplicationContext directly instead of local interface\ntype ApplicationContext = PraxisApplicationContext;\n\n// ============================================================================\n// EVENT HANDLING HELPER\n// ============================================================================\n\n/**\n * Handle application events by dispatching to the appropriate manager method.\n * Separated to reduce complexity in the main send function.\n */\nfunction handleApplicationEvent(manager: PraxisApplicationManager, event: ApplicationEvent): void {\n  const handler = eventHandlers[event.type];\n  if (handler) {\n    handler(manager, event);\n  } else {\n    // Log unknown event types in debug mode for development\n    logger.warn(\n      `[applicationStore] Unknown event type: ${event.type}`,\n      { event: event.type },\n      event\n    );\n  }\n}\n\n// ============================================================================\n// CORE APPLICATION STATE STORE\n// ============================================================================\n\n/**\n * Creates the main application manager and wraps it in Svelte stores\n * \n * Uses Praxis unified Svelte integration (@plures/praxis/svelte) for reactive subscriptions\n * instead of polling, providing better performance and following Praxis best practices.\n * \n * The integration provides:\n * - Proper reactive subscriptions (no polling overhead)\n * - Automatic cleanup and subscription management\n * - Type-safe store access\n * - Better performance through event-driven updates\n */\nfunction createApplicationStore() {\n  // Create and start the Praxis application manager\n  // Use getInstance() to ensure we share the singleton with ConnectionService\n  const applicationManager = PraxisApplicationManager.getInstance();\n  applicationManager.start();\n\n  // Get the underlying engine for the unified integration\n  const engine = applicationManager.getEngine();\n\n  // Create reactive store using Praxis unified integration\n  // This provides proper reactive subscriptions instead of polling\n  const praxisStore = createPraxisStore(engine);\n  \n  // Create context store for direct context access\n  const contextStore = createContextStore(engine);\n\n  // Create optimized derived stores using Praxis integration\n  // These are more efficient than manual derived() calls\n  const connectionsDerivedStore = createDerivedStore(engine, (ctx) => ctx.connections || []);\n  const activeConnectionIdDerivedStore = createDerivedStore(engine, (ctx) => ctx.activeConnectionId);\n  const connectionStatesDerivedStore = createDerivedStore(engine, (ctx) => ctx.connectionStates || new Map());\n  const pendingAuthRemindersDerivedStore = createDerivedStore(engine, (ctx) => ctx.pendingAuthReminders || new Map());\n  const isActivatedDerivedStore = createDerivedStore(engine, (ctx) => ctx.isActivated ?? false);\n  const isDeactivatingDerivedStore = createDerivedStore(engine, (ctx) => ctx.isDeactivating ?? false);\n  const lastErrorDerivedStore = createDerivedStore(engine, (ctx) => ctx.lastError);\n\n  // Current state wrapper that bridges Praxis store to our expected interface\n  const currentState = writable<{\n    value: string;\n    context: ApplicationContext;\n    matches: (state: string) => boolean;\n    can: (event: ApplicationEvent) => boolean;\n  } | null>(null);\n\n  // Subscribe to manager's internal subscription system to sync with store\n  // This ensures store updates when state changes through manager methods\n  const managerUnsubscribe = applicationManager.subscribe(() => {\n    // Update the wrapper state when manager state changes\n    const appState = applicationManager.getApplicationState();\n    const appData = applicationManager.getContext() as unknown as ApplicationContext;\n\n    currentState.set({\n      value: appState,\n      context: appData,\n      matches: (stateValue: string) => {\n        if (appState === stateValue) return true;\n        if (appState.includes(stateValue)) return true;\n        // Map legacy states\n        if (stateValue === 'activation_failed' && appState === 'activation_error') return true;\n        return false;\n      },\n      can: (_event: ApplicationEvent) => true, // Praxis handles validation internally\n    });\n  });\n\n  // Also subscribe to Praxis store for completeness\n  // This ensures we get updates from both manager and store dispatch paths\n  const praxisUnsubscribe = praxisStore.subscribe((praxisState) => {\n    if (!praxisState) {\n      currentState.set(null);\n      return;\n    }\n\n    // Extract state value from Praxis state format\n    const appState = applicationManager.getApplicationState();\n    const appData = applicationManager.getContext() as unknown as ApplicationContext;\n\n    currentState.set({\n      value: appState,\n      context: appData,\n      matches: (stateValue: string) => {\n        if (appState === stateValue) return true;\n        if (appState.includes(stateValue)) return true;\n        // Map legacy states\n        if (stateValue === 'activation_failed' && appState === 'activation_error') return true;\n        return false;\n      },\n      can: (_event: ApplicationEvent) => true, // Praxis handles validation internally\n    });\n  });\n\n  // Application State Store (readable wrapper)\n  const applicationState = readable<{\n    value: string;\n    context: ApplicationContext;\n    matches: (state: string) => boolean;\n    can: (event: ApplicationEvent) => boolean;\n  } | null>(null, (set) => {\n    // Subscribe to the wrapper state\n    const unsubscribe = currentState.subscribe(set);\n\n    return () => {\n      unsubscribe();\n      praxisUnsubscribe();\n      managerUnsubscribe();\n      applicationManager.stop();\n    };\n  });\n\n  // Send events to the application manager\n  // Note: We can also use praxisStore.dispatch() for events that match Praxis format\n  function send(event: ApplicationEvent) {\n    // Map XState event types to Praxis manager methods\n    handleApplicationEvent(applicationManager, event);\n  }\n\n  return {\n    applicationState,\n    send,\n    // Expose manager for debugging\n    get actor() {\n      return applicationManager;\n    },\n    // Expose Praxis store for advanced usage\n    get praxisStore() {\n      return praxisStore;\n    },\n    // Expose context store for direct context access\n    get contextStore() {\n      return contextStore;\n    },\n    // Expose derived stores for optimized access\n    get derivedStores() {\n      return {\n        connections: connectionsDerivedStore,\n        activeConnectionId: activeConnectionIdDerivedStore,\n        connectionStates: connectionStatesDerivedStore,\n        pendingAuthReminders: pendingAuthRemindersDerivedStore,\n        isActivated: isActivatedDerivedStore,\n        isDeactivating: isDeactivatingDerivedStore,\n        lastError: lastErrorDerivedStore,\n      };\n    },\n  };\n}\n\n// Create the singleton store instance\nconst applicationStore = createApplicationStore();\n\n// Create a bridge actor that mimics XState actor but delegates to Praxis manager + Svelte store\nconst bridgeActor = {\n  // Delegate Praxis methods to the manager\n  getApplicationState: () => applicationStore.actor.getApplicationState(),\n  getContext: () => applicationStore.actor.getContext(),\n  getSnapshot: () => applicationStore.actor.getSnapshot(),\n  start: () => applicationStore.actor.start(),\n  stop: () => applicationStore.actor.stop(),\n\n  // Implement XState-compatible subscribe using the Svelte store\n  subscribe: (callback: (snapshot: any) => void) => {\n    const unsubscribe = applicationStore.applicationState.subscribe((state) => {\n      if (state) {\n        callback(state);\n      }\n    });\n    return { unsubscribe };\n  },\n\n  // Delegate send\n  send: (event: any) => applicationStore.send(event as ApplicationEvent),\n};\n\nsetApplicationStoreBridge({\n  getActor: () => bridgeActor as unknown,\n  send: (event) => applicationStore.send(event as ApplicationEvent),\n});\n\n// ============================================================================\n// DERIVED REACTIVE STATE STORES\n// ============================================================================\n\n// Extension Lifecycle State\n// Use Praxis derived stores for better performance\nexport const isActivated = applicationStore.derivedStores.isActivated;\n\nexport const isInitializing = derived(\n  applicationStore.applicationState,\n  ($state) => $state?.matches('activating') ?? false\n);\n\nexport const isDeactivating = applicationStore.derivedStores.isDeactivating;\n\n// Connection Management State\n// Use Praxis derived stores for better performance\nexport const connections = applicationStore.derivedStores.connections;\n\nexport const activeConnectionId = applicationStore.derivedStores.activeConnectionId;\n\nexport const connectionStates = applicationStore.derivedStores.connectionStates;\n\n// Authentication State\nexport const pendingAuthReminders = applicationStore.derivedStores.pendingAuthReminders;\n\n// UI State\nexport const webviewReady = derived(\n  applicationStore.applicationState,\n  ($state) => $state?.matches('active.ui.ready') ?? false\n);\n\nexport const uiError = derived(\n  applicationStore.applicationState,\n  ($state) => $state?.matches('active.ui.ui_error') ?? false\n);\n\n// Data Sync State\nexport const isDataLoading = derived(\n  applicationStore.applicationState,\n  ($state) => $state?.matches('active.data.loading') ?? false\n);\n\nexport const isDataSynced = derived(\n  applicationStore.applicationState,\n  ($state) => $state?.matches('active.data.synced') ?? false\n);\n\nexport const dataError = derived(\n  applicationStore.applicationState,\n  ($state) => $state?.matches('active.data.sync_error') ?? false\n);\n\n// Error State\n// Use Praxis derived store for better performance\nexport const lastError = applicationStore.derivedStores.lastError;\n\nexport const isInErrorRecovery = derived(\n  applicationStore.applicationState,\n  ($state) => $state?.matches('error_recovery') ?? false\n);\n\n// ============================================================================\n// ACTIONS (FSM Event DISPATCHERS)\n// ============================================================================\n\n/**\n * Pure functions that dispatch events to the FSM\n * These replace the large monolithic functions\n */\nexport const actions = {\n  // Extension Lifecycle\n  activate: (context: unknown) => applicationStore.send({ type: 'ACTIVATE', context }),\n  deactivate: () => applicationStore.send({ type: 'DEACTIVATE' }),\n\n  // Connection Management\n  loadConnections: (connections: ProjectConnection[]) =>\n    applicationStore.send({ type: 'CONNECTIONS_LOADED', connections }),\n\n  selectConnection: async (connectionId: string) => {\n    // Prefer webview-owned selection via writer factory; fall back to FSM event if not available\n    const vscodeApi = (globalThis as any).__vscodeApi || (globalThis as any).acquireVsCodeApi?.();\n    if (vscodeApi && typeof vscodeApi.postMessage === 'function') {\n      try {\n        const mod = await import('../webview/selection.writer.internal.js');\n        const evt = mod.createSelectConnection(mod.webviewOwner, connectionId);\n        vscodeApi.postMessage({ type: 'appEvent', event: evt });\n        return;\n      } catch {\n        // fall through to FSM event\n      }\n    }\n    applicationStore.send({ type: 'CONNECTION_SELECTED', connectionId });\n  },\n\n  // Authentication\n  requireAuthentication: (connectionId: string) =>\n    applicationStore.send({ type: 'AUTHENTICATION_REQUIRED', connectionId }),\n\n  authenticationSuccess: (connectionId: string) =>\n    applicationStore.send({ type: 'AUTHENTICATION_SUCCESS', connectionId }),\n\n  authenticationFailed: (connectionId: string, error: string) =>\n    applicationStore.send({ type: 'AUTHENTICATION_FAILED', connectionId, error }),\n\n  // UI Events\n  webviewReady: () => applicationStore.send({ type: 'WEBVIEW_READY' }),\n\n  webviewMessage: (message: unknown) => applicationStore.send({ type: 'WEBVIEW_MESSAGE', message }),\n\n  // Error Handling\n  reportError: (error: Error) => applicationStore.send({ type: 'ERROR', error }),\n  retry: () => applicationStore.send({ type: 'RETRY' }),\n  reset: () => applicationStore.send({ type: 'RESET' }),\n};\n\n// ============================================================================\n// STATE SELECTORS (COMPUTED VALUES)\n// ============================================================================\n\n/**\n * Pure computed values derived from the state\n * These replace complex state calculations in components\n */\nexport const selectors = {\n  // Get initialization status with detailed sub-state\n  getInitializationStatus: derived(applicationStore.applicationState, ($state) => {\n    if (!$state) return { phase: 'inactive', progress: 0 };\n\n    if ($state.matches('inactive')) {\n      return { phase: 'inactive', progress: 0 };\n    }\n    if ($state.matches('activating')) {\n      return { phase: 'activating', progress: 25 };\n    }\n    if ($state.matches('active.ui.initializing')) {\n      return { phase: 'ui-setup', progress: 50 };\n    }\n    if ($state.matches('active.ui.ready') && !$state.matches('active.data.synced')) {\n      return { phase: 'loading-data', progress: 75 };\n    }\n    if ($state.matches('active.data.synced')) {\n      return { phase: 'ready', progress: 100 };\n    }\n\n    return { phase: 'unknown', progress: 0 };\n  }),\n\n  // Get connection by ID\n  getConnectionById: (connectionId: string) =>\n    derived([connections, connectionStates], ([$connections, $connectionStates]) => {\n      const config = $connections.find((c) => c.id === connectionId);\n      const state = $connectionStates.get(connectionId);\n      return config ? { ...config, state } : null;\n    }),\n\n  // Get auth reminders as array\n  getAuthRemindersArray: derived(pendingAuthReminders, ($reminders) =>\n    Array.from($reminders.values())\n  ),\n\n  // Check if can perform actions\n  canActivate: derived(\n    applicationStore.applicationState,\n    ($state) => $state?.can({ type: 'ACTIVATE', context: null }) ?? false\n  ),\n\n  canDeactivate: derived(\n    applicationStore.applicationState,\n    ($state) => $state?.can({ type: 'DEACTIVATE' }) ?? false\n  ),\n\n  canRetry: derived(\n    applicationStore.applicationState,\n    ($state) => $state?.can({ type: 'RETRY' }) ?? false\n  ),\n};\n\n// ============================================================================\n// DEBUGGING AND DEVELOPMENT\n// ============================================================================\n\n// Development helpers (renamed to avoid export conflicts)\nexport const storeDebug = {\n  // Get current state snapshot\n  getSnapshot: () => {\n    const manager = applicationStore.actor as PraxisApplicationManager;\n    return manager\n      ? {\n          value: manager.getApplicationState(),\n          context: manager.getContext(),\n        }\n      : null;\n  },\n\n  // Get state as string for logging\n  getStateString: () => {\n    const snapshot = storeDebug.getSnapshot();\n    return snapshot ? JSON.stringify(snapshot.value) : 'not-started';\n  },\n\n  // Send arbitrary event (for testing)\n  send: (event: ApplicationEvent) => applicationStore.send(event),\n\n  // Get full context (for debugging)\n  getContext: () => {\n    const snapshot = storeDebug.getSnapshot();\n    return snapshot ? snapshot.context : null;\n  },\n};\n\n// Export the main application state and actions\nexport { applicationStore };\nexport const applicationState = applicationStore.applicationState;\n\n// Re-export debug utilities (renamed to avoid conflicts)\nexport { storeDebug as debug };\n\nexport default applicationStore;\n", "/**\n * Module: src/fsm/commands/outputChannelReader.ts\n * Owner: application\n * Reads: (document)\n * Writes: (document)\n * Receives: (document)\n * Emits: (document)\n * Prohibitions: Do not mutate ApplicationContext directly; Do not define new *Context types\n * Rationale: (document)\n *\n * LLM-GUARD:\n * - Follow ownership boundaries; route events to Router; do not add UI logic here\n */\n/**\n * Output Channel Reader for FSM Debug Integration\n *\n * This module provides programmatic access to VS Code Output Channel content\n * allowing automated debugging tools to read FSM logs directly.\n */\n\nimport * as vscode from 'vscode';\nimport { componentLogger } from '../logging/ComponentLogger.js';\n\nexport class OutputChannelReader {\n  private static instance: OutputChannelReader;\n  private logBuffer: string[] = [];\n  private maxBufferSize = 1000; // Keep last 1000 log entries\n\n  private constructor() {\n    // Hook into the FSM logger to capture all output\n    this.setupLogCapture();\n  }\n\n  public static getInstance(): OutputChannelReader {\n    if (!OutputChannelReader.instance) {\n      OutputChannelReader.instance = new OutputChannelReader();\n    }\n    return OutputChannelReader.instance;\n  }\n\n  /**\n   * Setup log capture by intercepting FSM logger output\n   */\n  private setupLogCapture(): void {\n    // Store original methods\n    const originalAppendLine = componentLogger.outputChannel?.appendLine?.bind(\n      componentLogger.outputChannel\n    );\n\n    if (componentLogger.outputChannel && originalAppendLine) {\n      // Override appendLine to capture logs\n      componentLogger.outputChannel.appendLine = (value: string) => {\n        // Add to our buffer\n        this.logBuffer.push(`${new Date().toISOString()} ${value}`);\n\n        // Maintain buffer size\n        if (this.logBuffer.length > this.maxBufferSize) {\n          this.logBuffer = this.logBuffer.slice(-this.maxBufferSize);\n        }\n\n        // Call original method\n        return originalAppendLine(value);\n      };\n    }\n  }\n\n  /**\n   * Get recent logs\n   */\n  public getRecentLogs(count: number = 50): string[] {\n    return this.logBuffer.slice(-count);\n  }\n\n  /**\n   * Get all captured logs\n   */\n  public getAllLogs(): string[] {\n    return [...this.logBuffer];\n  }\n\n  /**\n   * Get logs matching a pattern\n   */\n  public getLogsMatching(pattern: string | RegExp): string[] {\n    const regex = typeof pattern === 'string' ? new RegExp(pattern, 'i') : pattern;\n    return this.logBuffer.filter((log) => regex.test(log));\n  }\n\n  /**\n   * Get logs from the last N minutes\n   */\n  public getLogsFromLastMinutes(minutes: number): string[] {\n    const cutoffTime = new Date(Date.now() - minutes * 60 * 1000);\n    return this.logBuffer.filter((log) => {\n      const timestamp = log.substring(0, 24); // ISO timestamp length\n      try {\n        const logTime = new Date(timestamp);\n        return logTime >= cutoffTime;\n      } catch {\n        return false;\n      }\n    });\n  }\n\n  /**\n   * Export logs as formatted text\n   */\n  public exportLogsAsText(filter?: {\n    component?: string;\n    level?: string;\n    lastMinutes?: number;\n    pattern?: string | RegExp;\n  }): string {\n    let logs = this.logBuffer;\n\n    if (filter) {\n      if (filter.lastMinutes) {\n        logs = this.getLogsFromLastMinutes(filter.lastMinutes);\n      }\n\n      if (filter.component) {\n        logs = logs.filter((log) => log.includes(`[${filter.component}]`));\n      }\n\n      if (filter.level) {\n        const level = filter.level;\n        logs = logs.filter((log) => log.includes(level));\n      }\n\n      if (filter.pattern) {\n        const regex =\n          typeof filter.pattern === 'string' ? new RegExp(filter.pattern, 'i') : filter.pattern;\n        logs = logs.filter((log) => regex.test(log));\n      }\n    }\n\n    return logs.join('\\n');\n  }\n\n  /**\n   * Clear the log buffer\n   */\n  public clearBuffer(): void {\n    this.logBuffer = [];\n  }\n\n  /**\n   * Get summary statistics about captured logs\n   */\n  public getLogStats(): {\n    totalLogs: number;\n    componentsActive: string[];\n    lastLogTime?: string;\n    errorCount: number;\n    warningCount: number;\n  } {\n    const components = new Set<string>();\n    let errorCount = 0;\n    let warningCount = 0;\n    let lastLogTime: string | undefined;\n\n    this.logBuffer.forEach((log) => {\n      // Extract component from log format: [AzureDevOpsInt][FSM][COMPONENT]\n      const componentMatch = log.match(/\\[FSM\\]\\[([^\\]]+)\\]/);\n      if (componentMatch) {\n        components.add(componentMatch[1]);\n      }\n\n      // Count error/warnings\n      if (log.includes('ERROR')) errorCount++;\n      if (log.includes('WARN')) warningCount++;\n\n      // Update last log time\n      const timestamp = log.substring(0, 24);\n      if (timestamp.includes('T')) {\n        lastLogTime = timestamp;\n      }\n    });\n\n    return {\n      totalLogs: this.logBuffer.length,\n      componentsActive: Array.from(components),\n      lastLogTime,\n      errorCount,\n      warningCount,\n    };\n  }\n}\n\n/**\n * Command to get FSM logs for debugging\n */\nexport async function getFSMLogsForDebugging(_context: vscode.ExtensionContext): Promise<string> {\n  const reader = OutputChannelReader.getInstance();\n  const recentLogs = reader.getRecentLogs(100);\n  const stats = reader.getLogStats();\n\n  const report = `\n=== FSM Debug Log Report ===\nGenerated: ${new Date().toISOString()}\n\n=== Statistics ===\nTotal Logs: ${stats.totalLogs}\nActive Components: ${stats.componentsActive.join(', ')}\nLast Log: ${stats.lastLogTime || 'None'}\nErrors: ${stats.errorCount}\nWarnings: ${stats.warningCount}\n\n=== Recent Logs (Last 100) ===\n${recentLogs.join('\\n')}\n\n=== End Report ===\n`;\n\n  return report;\n}\n\n/**\n * Register command for external access to logs\n */\nexport function registerOutputChannelReader(context: vscode.ExtensionContext): void {\n  // Initialize the reader\n  const reader = OutputChannelReader.getInstance();\n\n  // Register command for programmatic access\n  const disposable = vscode.commands.registerCommand(\n    'azureDevOpsInt.getFSMLogs',\n    async (options?: {\n      format?: 'text' | 'json';\n      filter?: {\n        component?: string;\n        level?: string;\n        lastMinutes?: number;\n        pattern?: string;\n      };\n    }) => {\n      try {\n        if (options?.format === 'json') {\n          return {\n            logs: reader.getAllLogs(),\n            stats: reader.getLogStats(),\n            timestamp: new Date().toISOString(),\n          };\n        } else {\n          return await getFSMLogsForDebugging(context);\n        }\n      } catch (error) {\n        // Error getting FSM logs - return error message\n        return `Error retrieving FSM logs: ${error}`;\n      }\n    }\n  );\n\n  context.subscriptions.push(disposable);\n\n  // Register additional debugging command\n  const debugCommand = vscode.commands.registerCommand('azureDevOpsInt.exportFSMLogs', async () => {\n    try {\n      const logs = await getFSMLogsForDebugging(context);\n\n      // Create a new untitled document with the logs\n      const doc = await vscode.workspace.openTextDocument({\n        content: logs,\n        language: 'log',\n      });\n\n      await vscode.window.showTextDocument(doc);\n\n      vscode.window.showInformationMessage('FSM logs exported to new document');\n    } catch (error) {\n      vscode.window.showErrorMessage(`Failed to export FSM logs: ${error}`);\n    }\n  });\n\n  context.subscriptions.push(debugCommand);\n}\n", "'use strict';\n\nconst BINARY_TYPES = ['nodebuffer', 'arraybuffer', 'fragments'];\nconst hasBlob = typeof Blob !== 'undefined';\n\nif (hasBlob) BINARY_TYPES.push('blob');\n\nmodule.exports = {\n  BINARY_TYPES,\n  EMPTY_BUFFER: Buffer.alloc(0),\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  hasBlob,\n  kForOnEventAttribute: Symbol('kIsForOnEventAttribute'),\n  kListener: Symbol('kListener'),\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  NOOP: () => {}\n};\n", "'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\nconst FastBuffer = Buffer[Symbol.species];\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) {\n    return new FastBuffer(target.buffer, target.byteOffset, offset);\n  }\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  for (let i = 0; i < buffer.length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.length === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.length);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = new FastBuffer(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = new FastBuffer(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\nmodule.exports = {\n  concat,\n  mask: _mask,\n  toArrayBuffer,\n  toBuffer,\n  unmask: _unmask\n};\n\n/* istanbul ignore else  */\nif (!process.env.WS_NO_BUFFER_UTIL) {\n  try {\n    const bufferUtil = require('bufferutil');\n\n    module.exports.mask = function (source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bufferUtil.mask(source, mask, output, offset, length);\n    };\n\n    module.exports.unmask = function (buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bufferUtil.unmask(buffer, mask);\n    };\n  } catch (e) {\n    // Continue regardless of the error.\n  }\n}\n", "'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n", "'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode } = require('./constants');\n\nconst FastBuffer = Buffer[Symbol.species];\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed if context takeover is disabled\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (this._inflate._readableState.endEmitted) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n\n        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n          this._inflate.reset();\n        }\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) {\n        data = new FastBuffer(data.buffer, data.byteOffset, data.length - 4);\n      }\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.reset();\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError].code = 'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH';\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n\n  //\n  // The choice to employ `zlib.reset()` over `zlib.close()` is dictated by the\n  // fact that in Node.js versions prior to 13.10.0, the callback for\n  // `zlib.flush()` is not called if `zlib.close()` is used. Utilizing\n  // `zlib.reset()` ensures that either the callback is invoked or an error is\n  // emitted.\n  //\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n\n  if (this[kError]) {\n    this[kCallback](this[kError]);\n    return;\n  }\n\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n", "'use strict';\n\nconst { isUtf8 } = require('buffer');\n\nconst { hasBlob } = require('./constants');\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nfunction isValidStatusCode(code) {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n}\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction _isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0) {\n      // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {\n      // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0 // Overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {\n      // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80) || // Overlong\n        (buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0) // Surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {\n      // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80) || // Overlong\n        (buf[i] === 0xf4 && buf[i + 1] > 0x8f) ||\n        buf[i] > 0xf4 // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Determines whether a value is a `Blob`.\n *\n * @param {*} value The value to be tested\n * @return {Boolean} `true` if `value` is a `Blob`, else `false`\n * @private\n */\nfunction isBlob(value) {\n  return (\n    hasBlob &&\n    typeof value === 'object' &&\n    typeof value.arrayBuffer === 'function' &&\n    typeof value.type === 'string' &&\n    typeof value.stream === 'function' &&\n    (value[Symbol.toStringTag] === 'Blob' ||\n      value[Symbol.toStringTag] === 'File')\n  );\n}\n\nmodule.exports = {\n  isBlob,\n  isValidStatusCode,\n  isValidUTF8: _isValidUTF8,\n  tokenChars\n};\n\nif (isUtf8) {\n  module.exports.isValidUTF8 = function (buf) {\n    return buf.length < 24 ? _isValidUTF8(buf) : isUtf8(buf);\n  };\n} /* istanbul ignore else  */ else if (!process.env.WS_NO_UTF_8_VALIDATE) {\n  try {\n    const isValidUTF8 = require('utf-8-validate');\n\n    module.exports.isValidUTF8 = function (buf) {\n      return buf.length < 32 ? _isValidUTF8(buf) : isValidUTF8(buf);\n    };\n  } catch (e) {\n    // Continue regardless of the error.\n  }\n}\n", "'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst FastBuffer = Buffer[Symbol.species];\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\nconst DEFER_EVENT = 6;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {String} [options.binaryType=nodebuffer] The type for binary data\n   * @param {Object} [options.extensions] An object containing the negotiated\n   *     extensions\n   * @param {Boolean} [options.isServer=false] Specifies whether to operate in\n   *     client or server mode\n   * @param {Number} [options.maxPayload=0] The maximum allowed message length\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   */\n  constructor(options = {}) {\n    super();\n\n    this._allowSynchronousEvents =\n      options.allowSynchronousEvents !== undefined\n        ? options.allowSynchronousEvents\n        : true;\n    this._binaryType = options.binaryType || BINARY_TYPES[0];\n    this._extensions = options.extensions || {};\n    this._isServer = !!options.isServer;\n    this._maxPayload = options.maxPayload | 0;\n    this._skipUTF8Validation = !!options.skipUTF8Validation;\n    this[kWebSocket] = undefined;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._errored = false;\n    this._loop = false;\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = new FastBuffer(\n        buf.buffer,\n        buf.byteOffset + n,\n        buf.length - n\n      );\n\n      return new FastBuffer(buf.buffer, buf.byteOffset, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = new FastBuffer(\n          buf.buffer,\n          buf.byteOffset + n,\n          buf.length - n\n        );\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          this.getInfo(cb);\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          this.getPayloadLength16(cb);\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          this.getPayloadLength64(cb);\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          this.getData(cb);\n          break;\n        case INFLATING:\n        case DEFER_EVENT:\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    if (!this._errored) cb();\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getInfo(cb) {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      const error = this.createError(\n        RangeError,\n        'RSV2 and RSV3 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_2_3'\n      );\n\n      cb(error);\n      return;\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      const error = this.createError(\n        RangeError,\n        'RSV1 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_1'\n      );\n\n      cb(error);\n      return;\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        const error = this.createError(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (!this._fragmented) {\n        const error = this.createError(\n          RangeError,\n          'invalid opcode 0',\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n\n        cb(error);\n        return;\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        const error = this.createError(\n          RangeError,\n          `invalid opcode ${this._opcode}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n\n        cb(error);\n        return;\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        const error = this.createError(\n          RangeError,\n          'FIN must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_FIN'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (compressed) {\n        const error = this.createError(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (\n        this._payloadLength > 0x7d ||\n        (this._opcode === 0x08 && this._payloadLength === 1)\n      ) {\n        const error = this.createError(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n\n        cb(error);\n        return;\n      }\n    } else {\n      const error = this.createError(\n        RangeError,\n        `invalid opcode ${this._opcode}`,\n        true,\n        1002,\n        'WS_ERR_INVALID_OPCODE'\n      );\n\n      cb(error);\n      return;\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        const error = this.createError(\n          RangeError,\n          'MASK must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_MASK'\n        );\n\n        cb(error);\n        return;\n      }\n    } else if (this._masked) {\n      const error = this.createError(\n        RangeError,\n        'MASK must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_MASK'\n      );\n\n      cb(error);\n      return;\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else this.haveLength(cb);\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getPayloadLength16(cb) {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    this.haveLength(cb);\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getPayloadLength64(cb) {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      const error = this.createError(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009,\n        'WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH'\n      );\n\n      cb(error);\n      return;\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    this.haveLength(cb);\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  haveLength(cb) {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        const error = this.createError(\n          RangeError,\n          'Max payload size exceeded',\n          false,\n          1009,\n          'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n        );\n\n        cb(error);\n        return;\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n\n      if (\n        this._masked &&\n        (this._mask[0] | this._mask[1] | this._mask[2] | this._mask[3]) !== 0\n      ) {\n        unmask(data, this._mask);\n      }\n    }\n\n    if (this._opcode > 0x07) {\n      this.controlMessage(data, cb);\n      return;\n    }\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its length is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    this.dataMessage(cb);\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          const error = this.createError(\n            RangeError,\n            'Max payload size exceeded',\n            false,\n            1009,\n            'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n          );\n\n          cb(error);\n          return;\n        }\n\n        this._fragments.push(buf);\n      }\n\n      this.dataMessage(cb);\n      if (this._state === GET_INFO) this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  dataMessage(cb) {\n    if (!this._fin) {\n      this._state = GET_INFO;\n      return;\n    }\n\n    const messageLength = this._messageLength;\n    const fragments = this._fragments;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragmented = 0;\n    this._fragments = [];\n\n    if (this._opcode === 2) {\n      let data;\n\n      if (this._binaryType === 'nodebuffer') {\n        data = concat(fragments, messageLength);\n      } else if (this._binaryType === 'arraybuffer') {\n        data = toArrayBuffer(concat(fragments, messageLength));\n      } else if (this._binaryType === 'blob') {\n        data = new Blob(fragments);\n      } else {\n        data = fragments;\n      }\n\n      if (this._allowSynchronousEvents) {\n        this.emit('message', data, true);\n        this._state = GET_INFO;\n      } else {\n        this._state = DEFER_EVENT;\n        setImmediate(() => {\n          this.emit('message', data, true);\n          this._state = GET_INFO;\n          this.startLoop(cb);\n        });\n      }\n    } else {\n      const buf = concat(fragments, messageLength);\n\n      if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n        const error = this.createError(\n          Error,\n          'invalid UTF-8 sequence',\n          true,\n          1007,\n          'WS_ERR_INVALID_UTF8'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (this._state === INFLATING || this._allowSynchronousEvents) {\n        this.emit('message', buf, false);\n        this._state = GET_INFO;\n      } else {\n        this._state = DEFER_EVENT;\n        setImmediate(() => {\n          this.emit('message', buf, false);\n          this._state = GET_INFO;\n          this.startLoop(cb);\n        });\n      }\n    }\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data, cb) {\n    if (this._opcode === 0x08) {\n      if (data.length === 0) {\n        this._loop = false;\n        this.emit('conclude', 1005, EMPTY_BUFFER);\n        this.end();\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          const error = this.createError(\n            RangeError,\n            `invalid status code ${code}`,\n            true,\n            1002,\n            'WS_ERR_INVALID_CLOSE_CODE'\n          );\n\n          cb(error);\n          return;\n        }\n\n        const buf = new FastBuffer(\n          data.buffer,\n          data.byteOffset + 2,\n          data.length - 2\n        );\n\n        if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n          const error = this.createError(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n\n          cb(error);\n          return;\n        }\n\n        this._loop = false;\n        this.emit('conclude', code, buf);\n        this.end();\n      }\n\n      this._state = GET_INFO;\n      return;\n    }\n\n    if (this._allowSynchronousEvents) {\n      this.emit(this._opcode === 0x09 ? 'ping' : 'pong', data);\n      this._state = GET_INFO;\n    } else {\n      this._state = DEFER_EVENT;\n      setImmediate(() => {\n        this.emit(this._opcode === 0x09 ? 'ping' : 'pong', data);\n        this._state = GET_INFO;\n        this.startLoop(cb);\n      });\n    }\n  }\n\n  /**\n   * Builds an error object.\n   *\n   * @param {function(new:Error|RangeError)} ErrorCtor The error constructor\n   * @param {String} message The error message\n   * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n   *     `message`\n   * @param {Number} statusCode The status code\n   * @param {String} errorCode The exposed error code\n   * @return {(Error|RangeError)} The error\n   * @private\n   */\n  createError(ErrorCtor, message, prefix, statusCode, errorCode) {\n    this._loop = false;\n    this._errored = true;\n\n    const err = new ErrorCtor(\n      prefix ? `Invalid WebSocket frame: ${message}` : message\n    );\n\n    Error.captureStackTrace(err, this.createError);\n    err.code = errorCode;\n    err[kStatusCode] = statusCode;\n    return err;\n  }\n}\n\nmodule.exports = Receiver;\n", "/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex\" }] */\n\n'use strict';\n\nconst { Duplex } = require('stream');\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER, kWebSocket, NOOP } = require('./constants');\nconst { isBlob, isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst kByteLength = Symbol('kByteLength');\nconst maskBuffer = Buffer.alloc(4);\nconst RANDOM_POOL_SIZE = 8 * 1024;\nlet randomPool;\nlet randomPoolPointer = RANDOM_POOL_SIZE;\n\nconst DEFAULT = 0;\nconst DEFLATING = 1;\nconst GET_BLOB_DATA = 2;\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {Duplex} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   * @param {Function} [generateMask] The function used to generate the masking\n   *     key\n   */\n  constructor(socket, extensions, generateMask) {\n    this._extensions = extensions || {};\n\n    if (generateMask) {\n      this._generateMask = generateMask;\n      this._maskBuffer = Buffer.alloc(4);\n    }\n\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._queue = [];\n    this._state = DEFAULT;\n    this.onerror = NOOP;\n    this[kWebSocket] = undefined;\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {(Buffer|String)} data The data to frame\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {(Buffer|String)[]} The framed data\n   * @public\n   */\n  static frame(data, options) {\n    let mask;\n    let merge = false;\n    let offset = 2;\n    let skipMasking = false;\n\n    if (options.mask) {\n      mask = options.maskBuffer || maskBuffer;\n\n      if (options.generateMask) {\n        options.generateMask(mask);\n      } else {\n        if (randomPoolPointer === RANDOM_POOL_SIZE) {\n          /* istanbul ignore else  */\n          if (randomPool === undefined) {\n            //\n            // This is lazily initialized because server-sent frames must not\n            // be masked so it may never be used.\n            //\n            randomPool = Buffer.alloc(RANDOM_POOL_SIZE);\n          }\n\n          randomFillSync(randomPool, 0, RANDOM_POOL_SIZE);\n          randomPoolPointer = 0;\n        }\n\n        mask[0] = randomPool[randomPoolPointer++];\n        mask[1] = randomPool[randomPoolPointer++];\n        mask[2] = randomPool[randomPoolPointer++];\n        mask[3] = randomPool[randomPoolPointer++];\n      }\n\n      skipMasking = (mask[0] | mask[1] | mask[2] | mask[3]) === 0;\n      offset = 6;\n    }\n\n    let dataLength;\n\n    if (typeof data === 'string') {\n      if (\n        (!options.mask || skipMasking) &&\n        options[kByteLength] !== undefined\n      ) {\n        dataLength = options[kByteLength];\n      } else {\n        data = Buffer.from(data);\n        dataLength = data.length;\n      }\n    } else {\n      dataLength = data.length;\n      merge = options.mask && options.readOnly && !skipMasking;\n    }\n\n    let payloadLength = dataLength;\n\n    if (dataLength >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (dataLength > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? dataLength + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(dataLength, 2);\n    } else if (payloadLength === 127) {\n      target[2] = target[3] = 0;\n      target.writeUIntBE(dataLength, 4, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (skipMasking) return [target, data];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, dataLength);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, dataLength);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {(String|Buffer)} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || !data.length) {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n\n      if (typeof data === 'string') {\n        buf.write(data, 2);\n      } else {\n        buf.set(data, 2);\n      }\n    }\n\n    const options = {\n      [kByteLength]: buf.length,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x08,\n      readOnly: false,\n      rsv1: false\n    };\n\n    if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, buf, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(buf, options), cb);\n    }\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x09,\n      readOnly,\n      rsv1: false\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, false, options, cb]);\n      } else {\n        this.getBlobData(data, false, options, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x0a,\n      readOnly,\n      rsv1: false\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, false, options, cb]);\n      } else {\n        this.getBlobData(data, false, options, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (\n        rsv1 &&\n        perMessageDeflate &&\n        perMessageDeflate.params[\n          perMessageDeflate._isServer\n            ? 'server_no_context_takeover'\n            : 'client_no_context_takeover'\n        ]\n      ) {\n        rsv1 = byteLength >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    const opts = {\n      [kByteLength]: byteLength,\n      fin: options.fin,\n      generateMask: this._generateMask,\n      mask: options.mask,\n      maskBuffer: this._maskBuffer,\n      opcode,\n      readOnly,\n      rsv1\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, this._compress, opts, cb]);\n      } else {\n        this.getBlobData(data, this._compress, opts, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, this._compress, opts, cb]);\n    } else {\n      this.dispatch(data, this._compress, opts, cb);\n    }\n  }\n\n  /**\n   * Gets the contents of a blob as binary data.\n   *\n   * @param {Blob} blob The blob\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     the data\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  getBlobData(blob, compress, options, cb) {\n    this._bufferedBytes += options[kByteLength];\n    this._state = GET_BLOB_DATA;\n\n    blob\n      .arrayBuffer()\n      .then((arrayBuffer) => {\n        if (this._socket.destroyed) {\n          const err = new Error(\n            'The socket was closed while the blob was being read'\n          );\n\n          //\n          // `callCallbacks` is called in the next tick to ensure that errors\n          // that might be thrown in the callbacks behave like errors thrown\n          // outside the promise chain.\n          //\n          process.nextTick(callCallbacks, this, err, cb);\n          return;\n        }\n\n        this._bufferedBytes -= options[kByteLength];\n        const data = toBuffer(arrayBuffer);\n\n        if (!compress) {\n          this._state = DEFAULT;\n          this.sendFrame(Sender.frame(data, options), cb);\n          this.dequeue();\n        } else {\n          this.dispatch(data, compress, options, cb);\n        }\n      })\n      .catch((err) => {\n        //\n        // `onError` is called in the next tick for the same reason that\n        // `callCallbacks` above is.\n        //\n        process.nextTick(onError, this, err, cb);\n      });\n  }\n\n  /**\n   * Dispatches a message.\n   *\n   * @param {(Buffer|String)} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += options[kByteLength];\n    this._state = DEFLATING;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        callCallbacks(this, err, cb);\n        return;\n      }\n\n      this._bufferedBytes -= options[kByteLength];\n      this._state = DEFAULT;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (this._state === DEFAULT && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[3][kByteLength];\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[3][kByteLength];\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {(Buffer | String)[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n\n/**\n * Calls queued callbacks with an error.\n *\n * @param {Sender} sender The `Sender` instance\n * @param {Error} err The error to call the callbacks with\n * @param {Function} [cb] The first callback\n * @private\n */\nfunction callCallbacks(sender, err, cb) {\n  if (typeof cb === 'function') cb(err);\n\n  for (let i = 0; i < sender._queue.length; i++) {\n    const params = sender._queue[i];\n    const callback = params[params.length - 1];\n\n    if (typeof callback === 'function') callback(err);\n  }\n}\n\n/**\n * Handles a `Sender` error.\n *\n * @param {Sender} sender The `Sender` instance\n * @param {Error} err The error\n * @param {Function} [cb] The first pending callback\n * @private\n */\nfunction onError(sender, err, cb) {\n  callCallbacks(sender, err, cb);\n  sender.onerror(err);\n}\n", "'use strict';\n\nconst { kForOnEventAttribute, kListener } = require('./constants');\n\nconst kCode = Symbol('kCode');\nconst kData = Symbol('kData');\nconst kError = Symbol('kError');\nconst kMessage = Symbol('kMessage');\nconst kReason = Symbol('kReason');\nconst kTarget = Symbol('kTarget');\nconst kType = Symbol('kType');\nconst kWasClean = Symbol('kWasClean');\n\n/**\n * Class representing an event.\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @throws {TypeError} If the `type` argument is not specified\n   */\n  constructor(type) {\n    this[kTarget] = null;\n    this[kType] = type;\n  }\n\n  /**\n   * @type {*}\n   */\n  get target() {\n    return this[kTarget];\n  }\n\n  /**\n   * @type {String}\n   */\n  get type() {\n    return this[kType];\n  }\n}\n\nObject.defineProperty(Event.prototype, 'target', { enumerable: true });\nObject.defineProperty(Event.prototype, 'type', { enumerable: true });\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {Number} [options.code=0] The status code explaining why the\n   *     connection was closed\n   * @param {String} [options.reason=''] A human-readable string explaining why\n   *     the connection was closed\n   * @param {Boolean} [options.wasClean=false] Indicates whether or not the\n   *     connection was cleanly closed\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kCode] = options.code === undefined ? 0 : options.code;\n    this[kReason] = options.reason === undefined ? '' : options.reason;\n    this[kWasClean] = options.wasClean === undefined ? false : options.wasClean;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get code() {\n    return this[kCode];\n  }\n\n  /**\n   * @type {String}\n   */\n  get reason() {\n    return this[kReason];\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get wasClean() {\n    return this[kWasClean];\n  }\n}\n\nObject.defineProperty(CloseEvent.prototype, 'code', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'reason', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'wasClean', { enumerable: true });\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.error=null] The error that generated this event\n   * @param {String} [options.message=''] The error message\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kError] = options.error === undefined ? null : options.error;\n    this[kMessage] = options.message === undefined ? '' : options.message;\n  }\n\n  /**\n   * @type {*}\n   */\n  get error() {\n    return this[kError];\n  }\n\n  /**\n   * @type {String}\n   */\n  get message() {\n    return this[kMessage];\n  }\n}\n\nObject.defineProperty(ErrorEvent.prototype, 'error', { enumerable: true });\nObject.defineProperty(ErrorEvent.prototype, 'message', { enumerable: true });\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.data=null] The message content\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kData] = options.data === undefined ? null : options.data;\n  }\n\n  /**\n   * @type {*}\n   */\n  get data() {\n    return this[kData];\n  }\n}\n\nObject.defineProperty(MessageEvent.prototype, 'data', { enumerable: true });\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {(Function|Object)} handler The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, handler, options = {}) {\n    for (const listener of this.listeners(type)) {\n      if (\n        !options[kForOnEventAttribute] &&\n        listener[kListener] === handler &&\n        !listener[kForOnEventAttribute]\n      ) {\n        return;\n      }\n    }\n\n    let wrapper;\n\n    if (type === 'message') {\n      wrapper = function onMessage(data, isBinary) {\n        const event = new MessageEvent('message', {\n          data: isBinary ? data : data.toString()\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'close') {\n      wrapper = function onClose(code, message) {\n        const event = new CloseEvent('close', {\n          code,\n          reason: message.toString(),\n          wasClean: this._closeFrameReceived && this._closeFrameSent\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'error') {\n      wrapper = function onError(error) {\n        const event = new ErrorEvent('error', {\n          error,\n          message: error.message\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'open') {\n      wrapper = function onOpen() {\n        const event = new Event('open');\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else {\n      return;\n    }\n\n    wrapper[kForOnEventAttribute] = !!options[kForOnEventAttribute];\n    wrapper[kListener] = handler;\n\n    if (options.once) {\n      this.once(type, wrapper);\n    } else {\n      this.on(type, wrapper);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {(Function|Object)} handler The listener to remove\n   * @public\n   */\n  removeEventListener(type, handler) {\n    for (const listener of this.listeners(type)) {\n      if (listener[kListener] === handler && !listener[kForOnEventAttribute]) {\n        this.removeListener(type, listener);\n        break;\n      }\n    }\n  }\n};\n\nmodule.exports = {\n  CloseEvent,\n  ErrorEvent,\n  Event,\n  EventTarget,\n  MessageEvent\n};\n\n/**\n * Call an event listener\n *\n * @param {(Function|Object)} listener The listener to call\n * @param {*} thisArg The value to use as `this`` when calling the listener\n * @param {Event} event The event to pass to the listener\n * @private\n */\nfunction callListener(listener, thisArg, event) {\n  if (typeof listener === 'object' && listener.handleEvent) {\n    listener.handleEvent.call(listener, event);\n  } else {\n    listener.call(thisArg, event);\n  }\n}\n", "'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let code = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (\n        i !== 0 &&\n        (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n      ) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes || code === 0x20 || code === 0x09) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n", "/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex|Readable$\", \"caughtErrors\": \"none\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { Duplex, Readable } = require('stream');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst { isBlob } = require('./validation');\n\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  GUID,\n  kForOnEventAttribute,\n  kListener,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst {\n  EventTarget: { addEventListener, removeEventListener }\n} = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst closeTimeout = 30 * 1000;\nconst kAborted = Symbol('kAborted');\nconst protocolVersions = [8, 13];\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst subprotocolRegex = /^[!#$%&'*+\\-.0-9A-Z^_`|a-z~]+$/;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = EMPTY_BUFFER;\n    this._closeTimer = null;\n    this._errorEmitted = false;\n    this._extensions = {};\n    this._paused = false;\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (protocols === undefined) {\n        protocols = [];\n      } else if (!Array.isArray(protocols)) {\n        if (typeof protocols === 'object' && protocols !== null) {\n          options = protocols;\n          protocols = [];\n        } else {\n          protocols = [protocols];\n        }\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._autoPong = options.autoPong;\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * For historical reasons, the custom \"nodebuffer\" type is used by the default\n   * instead of \"blob\".\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get isPaused() {\n    return this._paused;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onclose() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onerror() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onopen() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onmessage() {\n    return null;\n  }\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Object} options Options object\n   * @param {Boolean} [options.allowSynchronousEvents=false] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Number} [options.maxPayload=0] The maximum allowed message size\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @private\n   */\n  setSocket(socket, head, options) {\n    const receiver = new Receiver({\n      allowSynchronousEvents: options.allowSynchronousEvents,\n      binaryType: this.binaryType,\n      extensions: this._extensions,\n      isServer: this._isServer,\n      maxPayload: options.maxPayload,\n      skipUTF8Validation: options.skipUTF8Validation\n    });\n\n    const sender = new Sender(socket, this._extensions, options.generateMask);\n\n    this._receiver = receiver;\n    this._sender = sender;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    sender[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    sender.onerror = senderOnError;\n\n    //\n    // These methods may not be available if `socket` is just a `Duplex`.\n    //\n    if (socket.setTimeout) socket.setTimeout(0);\n    if (socket.setNoDelay) socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {(String|Buffer)} [data] The reason why the connection is\n   *     closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      abortHandshake(this, this._req, msg);\n      return;\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (\n        this._closeFrameSent &&\n        (this._closeFrameReceived || this._receiver._writableState.errorEmitted)\n      ) {\n        this._socket.end();\n      }\n\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (\n        this._closeFrameReceived ||\n        this._receiver._writableState.errorEmitted\n      ) {\n        this._socket.end();\n      }\n    });\n\n    setCloseTimer(this);\n  }\n\n  /**\n   * Pause the socket.\n   *\n   * @public\n   */\n  pause() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = true;\n    this._socket.pause();\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Resume the socket.\n   *\n   * @public\n   */\n  resume() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = false;\n    if (!this._receiver._writableState.needDrain) this._socket.resume();\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      abortHandshake(this, this._req, msg);\n      return;\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'isPaused',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    enumerable: true,\n    get() {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) return listener[kListener];\n      }\n\n      return null;\n    },\n    set(handler) {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) {\n          this.removeListener(method, listener);\n          break;\n        }\n      }\n\n      if (typeof handler !== 'function') return;\n\n      this.addEventListener(method, handler, {\n        [kForOnEventAttribute]: true\n      });\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|URL)} address The URL to which to connect\n * @param {Array} protocols The subprotocols\n * @param {Object} [options] Connection options\n * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether any\n *     of the `'message'`, `'ping'`, and `'pong'` events can be emitted multiple\n *     times in the same tick\n * @param {Boolean} [options.autoPong=true] Specifies whether or not to\n *     automatically send a pong in response to a ping\n * @param {Function} [options.finishRequest] A function which can be used to\n *     customize the headers of each http request before it is sent\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Function} [options.generateMask] The function used to generate the\n *     masking key\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n *     not to skip UTF-8 validation for text and close messages\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    allowSynchronousEvents: true,\n    autoPong: true,\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    skipUTF8Validation: false,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: 'GET',\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  websocket._autoPong = opts.autoPong;\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n  } else {\n    try {\n      parsedUrl = new URL(address);\n    } catch (e) {\n      throw new SyntaxError(`Invalid URL: ${address}`);\n    }\n  }\n\n  if (parsedUrl.protocol === 'http:') {\n    parsedUrl.protocol = 'ws:';\n  } else if (parsedUrl.protocol === 'https:') {\n    parsedUrl.protocol = 'wss:';\n  }\n\n  websocket._url = parsedUrl.href;\n\n  const isSecure = parsedUrl.protocol === 'wss:';\n  const isIpcUrl = parsedUrl.protocol === 'ws+unix:';\n  let invalidUrlMessage;\n\n  if (parsedUrl.protocol !== 'ws:' && !isSecure && !isIpcUrl) {\n    invalidUrlMessage =\n      'The URL\\'s protocol must be one of \"ws:\", \"wss:\", ' +\n      '\"http:\", \"https:\", or \"ws+unix:\"';\n  } else if (isIpcUrl && !parsedUrl.pathname) {\n    invalidUrlMessage = \"The URL's pathname is empty\";\n  } else if (parsedUrl.hash) {\n    invalidUrlMessage = 'The URL contains a fragment identifier';\n  }\n\n  if (invalidUrlMessage) {\n    const err = new SyntaxError(invalidUrlMessage);\n\n    if (websocket._redirects === 0) {\n      throw err;\n    } else {\n      emitErrorAndClose(websocket, err);\n      return;\n    }\n  }\n\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const request = isSecure ? https.request : http.request;\n  const protocolSet = new Set();\n  let perMessageDeflate;\n\n  opts.createConnection =\n    opts.createConnection || (isSecure ? tlsConnect : netConnect);\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    ...opts.headers,\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket'\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols.length) {\n    for (const protocol of protocols) {\n      if (\n        typeof protocol !== 'string' ||\n        !subprotocolRegex.test(protocol) ||\n        protocolSet.has(protocol)\n      ) {\n        throw new SyntaxError(\n          'An invalid or duplicated subprotocol was specified'\n        );\n      }\n\n      protocolSet.add(protocol);\n    }\n\n    opts.headers['Sec-WebSocket-Protocol'] = protocols.join(',');\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isIpcUrl) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  let req;\n\n  if (opts.followRedirects) {\n    if (websocket._redirects === 0) {\n      websocket._originalIpc = isIpcUrl;\n      websocket._originalSecure = isSecure;\n      websocket._originalHostOrSocketPath = isIpcUrl\n        ? opts.socketPath\n        : parsedUrl.host;\n\n      const headers = options && options.headers;\n\n      //\n      // Shallow copy the user provided options so that headers can be changed\n      // without mutating the original object.\n      //\n      options = { ...options, headers: {} };\n\n      if (headers) {\n        for (const [key, value] of Object.entries(headers)) {\n          options.headers[key.toLowerCase()] = value;\n        }\n      }\n    } else if (websocket.listenerCount('redirect') === 0) {\n      const isSameHost = isIpcUrl\n        ? websocket._originalIpc\n          ? opts.socketPath === websocket._originalHostOrSocketPath\n          : false\n        : websocket._originalIpc\n          ? false\n          : parsedUrl.host === websocket._originalHostOrSocketPath;\n\n      if (!isSameHost || (websocket._originalSecure && !isSecure)) {\n        //\n        // Match curl 7.77.0 behavior and drop the following headers. These\n        // headers are also dropped when following a redirect to a subdomain.\n        //\n        delete opts.headers.authorization;\n        delete opts.headers.cookie;\n\n        if (!isSameHost) delete opts.headers.host;\n\n        opts.auth = undefined;\n      }\n    }\n\n    //\n    // Match curl 7.77.0 behavior and make the first `Authorization` header win.\n    // If the `Authorization` header is set, then there is nothing to do as it\n    // will take precedence.\n    //\n    if (opts.auth && !options.headers.authorization) {\n      options.headers.authorization =\n        'Basic ' + Buffer.from(opts.auth).toString('base64');\n    }\n\n    req = websocket._req = request(opts);\n\n    if (websocket._redirects) {\n      //\n      // Unlike what is done for the `'upgrade'` event, no early exit is\n      // triggered here if the user calls `websocket.close()` or\n      // `websocket.terminate()` from a listener of the `'redirect'` event. This\n      // is because the user can also call `request.destroy()` with an error\n      // before calling `websocket.close()` or `websocket.terminate()` and this\n      // would result in an error being emitted on the `request` object with no\n      // `'error'` event listeners attached.\n      //\n      websocket.emit('redirect', websocket.url, req);\n    }\n  } else {\n    req = websocket._req = request(opts);\n  }\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req[kAborted]) return;\n\n    req = websocket._req = null;\n    emitErrorAndClose(websocket, err);\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      let addr;\n\n      try {\n        addr = new URL(location, address);\n      } catch (e) {\n        const err = new SyntaxError(`Invalid URL: ${location}`);\n        emitErrorAndClose(websocket, err);\n        return;\n      }\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the\n    // `'upgrade'` event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    const upgrade = res.headers.upgrade;\n\n    if (upgrade === undefined || upgrade.toLowerCase() !== 'websocket') {\n      abortHandshake(websocket, socket, 'Invalid Upgrade header');\n      return;\n    }\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    let protError;\n\n    if (serverProt !== undefined) {\n      if (!protocolSet.size) {\n        protError = 'Server sent a subprotocol but none was requested';\n      } else if (!protocolSet.has(serverProt)) {\n        protError = 'Server sent an invalid subprotocol';\n      }\n    } else if (protocolSet.size) {\n      protError = 'Server sent no subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    const secWebSocketExtensions = res.headers['sec-websocket-extensions'];\n\n    if (secWebSocketExtensions !== undefined) {\n      if (!perMessageDeflate) {\n        const message =\n          'Server sent a Sec-WebSocket-Extensions header but no extension ' +\n          'was requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      let extensions;\n\n      try {\n        extensions = parse(secWebSocketExtensions);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      const extensionNames = Object.keys(extensions);\n\n      if (\n        extensionNames.length !== 1 ||\n        extensionNames[0] !== PerMessageDeflate.extensionName\n      ) {\n        const message = 'Server indicated an extension that was not requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      try {\n        perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      websocket._extensions[PerMessageDeflate.extensionName] =\n        perMessageDeflate;\n    }\n\n    websocket.setSocket(socket, head, {\n      allowSynchronousEvents: opts.allowSynchronousEvents,\n      generateMask: opts.generateMask,\n      maxPayload: opts.maxPayload,\n      skipUTF8Validation: opts.skipUTF8Validation\n    });\n  });\n\n  if (opts.finishRequest) {\n    opts.finishRequest(req, websocket);\n  } else {\n    req.end();\n  }\n}\n\n/**\n * Emit the `'error'` and `'close'` events.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {Error} The error to emit\n * @private\n */\nfunction emitErrorAndClose(websocket, err) {\n  websocket._readyState = WebSocket.CLOSING;\n  //\n  // The following assignment is practically useless and is done only for\n  // consistency.\n  //\n  websocket._errorEmitted = true;\n  websocket.emit('error', err);\n  websocket.emitClose();\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket|tls.Socket)} stream The request to\n *     abort or the socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream[kAborted] = true;\n    stream.abort();\n\n    if (stream.socket && !stream.socket.destroyed) {\n      //\n      // On Node.js >= 14.3.0 `request.abort()` does not destroy the socket if\n      // called after the request completed. See\n      // https://github.com/websockets/ws/issues/1869.\n      //\n      stream.socket.destroy();\n    }\n\n    process.nextTick(emitErrorAndClose, websocket, err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = isBlob(data) ? data.size : toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    process.nextTick(cb, err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {Buffer} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (websocket._socket[kWebSocket] === undefined) return;\n\n  websocket._socket.removeListener('data', socketOnData);\n  process.nextTick(resume, websocket._socket);\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  const websocket = this[kWebSocket];\n\n  if (!websocket.isPaused) websocket._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._socket[kWebSocket] !== undefined) {\n    websocket._socket.removeListener('data', socketOnData);\n\n    //\n    // On Node.js < 14.0.0 the `'error'` event is emitted synchronously. See\n    // https://github.com/websockets/ws/issues/1940.\n    //\n    process.nextTick(resume, websocket._socket);\n\n    websocket.close(err[kStatusCode]);\n  }\n\n  if (!websocket._errorEmitted) {\n    websocket._errorEmitted = true;\n    websocket.emit('error', err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {Buffer|ArrayBuffer|Buffer[])} data The message\n * @param {Boolean} isBinary Specifies whether the message is binary or not\n * @private\n */\nfunction receiverOnMessage(data, isBinary) {\n  this[kWebSocket].emit('message', data, isBinary);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._autoPong) websocket.pong(data, !this._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * Resume a readable stream\n *\n * @param {Readable} stream The readable stream\n * @private\n */\nfunction resume(stream) {\n  stream.resume();\n}\n\n/**\n * The `Sender` error event handler.\n *\n * @param {Error} The error\n * @private\n */\nfunction senderOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket.readyState === WebSocket.CLOSED) return;\n  if (websocket.readyState === WebSocket.OPEN) {\n    websocket._readyState = WebSocket.CLOSING;\n    setCloseTimer(websocket);\n  }\n\n  //\n  // `socket.end()` is used instead of `socket.destroy()` to allow the other\n  // peer to finish sending queued data. There is no need to set a timer here\n  // because `CLOSING` means that it is already set or not needed.\n  //\n  this._socket.end();\n\n  if (!websocket._errorEmitted) {\n    websocket._errorEmitted = true;\n    websocket.emit('error', err);\n  }\n}\n\n/**\n * Set a timer to destroy the underlying raw socket of a WebSocket.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @private\n */\nfunction setCloseTimer(websocket) {\n  websocket._closeTimer = setTimeout(\n    websocket._socket.destroy.bind(websocket._socket),\n    closeTimeout\n  );\n}\n\n/**\n * The listener of the socket `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('data', socketOnData);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  let chunk;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk.\n  //\n  if (\n    !this._readableState.endEmitted &&\n    !websocket._closeFrameReceived &&\n    !websocket._receiver._writableState.errorEmitted &&\n    (chunk = websocket._socket.read()) !== null\n  ) {\n    websocket._receiver.write(chunk);\n  }\n\n  websocket._receiver.end();\n\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the socket `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the socket `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the socket `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n", "/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^WebSocket$\" }] */\n'use strict';\n\nconst WebSocket = require('./websocket');\nconst { Duplex } = require('stream');\n\n/**\n * Emits the `'close'` event on a stream.\n *\n * @param {Duplex} stream The stream.\n * @private\n */\nfunction emitClose(stream) {\n  stream.emit('close');\n}\n\n/**\n * The listener of the `'end'` event.\n *\n * @private\n */\nfunction duplexOnEnd() {\n  if (!this.destroyed && this._writableState.finished) {\n    this.destroy();\n  }\n}\n\n/**\n * The listener of the `'error'` event.\n *\n * @param {Error} err The error\n * @private\n */\nfunction duplexOnError(err) {\n  this.removeListener('error', duplexOnError);\n  this.destroy();\n  if (this.listenerCount('error') === 0) {\n    // Do not suppress the throwing behavior.\n    this.emit('error', err);\n  }\n}\n\n/**\n * Wraps a `WebSocket` in a duplex stream.\n *\n * @param {WebSocket} ws The `WebSocket` to wrap\n * @param {Object} [options] The options for the `Duplex` constructor\n * @return {Duplex} The duplex stream\n * @public\n */\nfunction createWebSocketStream(ws, options) {\n  let terminateOnDestroy = true;\n\n  const duplex = new Duplex({\n    ...options,\n    autoDestroy: false,\n    emitClose: false,\n    objectMode: false,\n    writableObjectMode: false\n  });\n\n  ws.on('message', function message(msg, isBinary) {\n    const data =\n      !isBinary && duplex._readableState.objectMode ? msg.toString() : msg;\n\n    if (!duplex.push(data)) ws.pause();\n  });\n\n  ws.once('error', function error(err) {\n    if (duplex.destroyed) return;\n\n    // Prevent `ws.terminate()` from being called by `duplex._destroy()`.\n    //\n    // - If the `'error'` event is emitted before the `'open'` event, then\n    //   `ws.terminate()` is a noop as no socket is assigned.\n    // - Otherwise, the error is re-emitted by the listener of the `'error'`\n    //   event of the `Receiver` object. The listener already closes the\n    //   connection by calling `ws.close()`. This allows a close frame to be\n    //   sent to the other peer. If `ws.terminate()` is called right after this,\n    //   then the close frame might not be sent.\n    terminateOnDestroy = false;\n    duplex.destroy(err);\n  });\n\n  ws.once('close', function close() {\n    if (duplex.destroyed) return;\n\n    duplex.push(null);\n  });\n\n  duplex._destroy = function (err, callback) {\n    if (ws.readyState === ws.CLOSED) {\n      callback(err);\n      process.nextTick(emitClose, duplex);\n      return;\n    }\n\n    let called = false;\n\n    ws.once('error', function error(err) {\n      called = true;\n      callback(err);\n    });\n\n    ws.once('close', function close() {\n      if (!called) callback(err);\n      process.nextTick(emitClose, duplex);\n    });\n\n    if (terminateOnDestroy) ws.terminate();\n  };\n\n  duplex._final = function (callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._final(callback);\n      });\n      return;\n    }\n\n    // If the value of the `_socket` property is `null` it means that `ws` is a\n    // client websocket and the handshake failed. In fact, when this happens, a\n    // socket is never assigned to the websocket. Wait for the `'error'` event\n    // that will be emitted by the websocket.\n    if (ws._socket === null) return;\n\n    if (ws._socket._writableState.finished) {\n      callback();\n      if (duplex._readableState.endEmitted) duplex.destroy();\n    } else {\n      ws._socket.once('finish', function finish() {\n        // `duplex` is not destroyed here because the `'end'` event will be\n        // emitted on `duplex` after this `'finish'` event. The EOF signaling\n        // `null` chunk is, in fact, pushed when the websocket emits `'close'`.\n        callback();\n      });\n      ws.close();\n    }\n  };\n\n  duplex._read = function () {\n    if (ws.isPaused) ws.resume();\n  };\n\n  duplex._write = function (chunk, encoding, callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._write(chunk, encoding, callback);\n      });\n      return;\n    }\n\n    ws.send(chunk, callback);\n  };\n\n  duplex.on('end', duplexOnEnd);\n  duplex.on('error', duplexOnError);\n  return duplex;\n}\n\nmodule.exports = createWebSocketStream;\n", "'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Parses the `Sec-WebSocket-Protocol` header into a set of subprotocol names.\n *\n * @param {String} header The field value of the header\n * @return {Set} The subprotocol names\n * @public\n */\nfunction parse(header) {\n  const protocols = new Set();\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (i; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (end === -1 && tokenChars[code] === 1) {\n      if (start === -1) start = i;\n    } else if (\n      i !== 0 &&\n      (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n    ) {\n      if (end === -1 && start !== -1) end = i;\n    } else if (code === 0x2c /* ',' */) {\n      if (start === -1) {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n\n      if (end === -1) end = i;\n\n      const protocol = header.slice(start, end);\n\n      if (protocols.has(protocol)) {\n        throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n      }\n\n      protocols.add(protocol);\n      start = end = -1;\n    } else {\n      throw new SyntaxError(`Unexpected character at index ${i}`);\n    }\n  }\n\n  if (start === -1 || end !== -1) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  const protocol = header.slice(start, i);\n\n  if (protocols.has(protocol)) {\n    throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n  }\n\n  protocols.add(protocol);\n  return protocols;\n}\n\nmodule.exports = { parse };\n", "/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex$\", \"caughtErrors\": \"none\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst http = require('http');\nconst { Duplex } = require('stream');\nconst { createHash } = require('crypto');\n\nconst extension = require('./extension');\nconst PerMessageDeflate = require('./permessage-deflate');\nconst subprotocol = require('./subprotocol');\nconst WebSocket = require('./websocket');\nconst { GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\nconst RUNNING = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {Boolean} [options.autoPong=true] Specifies whether or not to\n   *     automatically send a pong in response to a ping\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {(http.Server|https.Server)} [options.server] A pre-created HTTP/S\n   *     server to use\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [options.WebSocket=WebSocket] Specifies the `WebSocket`\n   *     class to use. It must be the `WebSocket` class or class that extends it\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      allowSynchronousEvents: true,\n      autoPong: true,\n      maxPayload: 100 * 1024 * 1024,\n      skipUTF8Validation: false,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      WebSocket,\n      ...options\n    };\n\n    if (\n      (options.port == null && !options.server && !options.noServer) ||\n      (options.port != null && (options.server || options.noServer)) ||\n      (options.server && options.noServer)\n    ) {\n      throw new TypeError(\n        'One and only one of the \"port\", \"server\", or \"noServer\" options ' +\n          'must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) {\n      this.clients = new Set();\n      this._shouldEmitClose = false;\n    }\n\n    this.options = options;\n    this._state = RUNNING;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Stop the server from accepting new connections and emit the `'close'` event\n   * when all existing connections are closed.\n   *\n   * @param {Function} [cb] A one-time listener for the `'close'` event\n   * @public\n   */\n  close(cb) {\n    if (this._state === CLOSED) {\n      if (cb) {\n        this.once('close', () => {\n          cb(new Error('The server is not running'));\n        });\n      }\n\n      process.nextTick(emitClose, this);\n      return;\n    }\n\n    if (cb) this.once('close', cb);\n\n    if (this._state === CLOSING) return;\n    this._state = CLOSING;\n\n    if (this.options.noServer || this.options.server) {\n      if (this._server) {\n        this._removeListeners();\n        this._removeListeners = this._server = null;\n      }\n\n      if (this.clients) {\n        if (!this.clients.size) {\n          process.nextTick(emitClose, this);\n        } else {\n          this._shouldEmitClose = true;\n        }\n      } else {\n        process.nextTick(emitClose, this);\n      }\n    } else {\n      const server = this._server;\n\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // The HTTP/S server was created internally. Close it, and rely on its\n      // `'close'` event.\n      //\n      server.close(() => {\n        emitClose(this);\n      });\n    }\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key = req.headers['sec-websocket-key'];\n    const upgrade = req.headers.upgrade;\n    const version = +req.headers['sec-websocket-version'];\n\n    if (req.method !== 'GET') {\n      const message = 'Invalid HTTP method';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 405, message);\n      return;\n    }\n\n    if (upgrade === undefined || upgrade.toLowerCase() !== 'websocket') {\n      const message = 'Invalid Upgrade header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (key === undefined || !keyRegex.test(key)) {\n      const message = 'Missing or invalid Sec-WebSocket-Key header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (version !== 13 && version !== 8) {\n      const message = 'Missing or invalid Sec-WebSocket-Version header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message, {\n        'Sec-WebSocket-Version': '13, 8'\n      });\n      return;\n    }\n\n    if (!this.shouldHandle(req)) {\n      abortHandshake(socket, 400);\n      return;\n    }\n\n    const secWebSocketProtocol = req.headers['sec-websocket-protocol'];\n    let protocols = new Set();\n\n    if (secWebSocketProtocol !== undefined) {\n      try {\n        protocols = subprotocol.parse(secWebSocketProtocol);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Protocol header';\n        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n        return;\n      }\n    }\n\n    const secWebSocketExtensions = req.headers['sec-websocket-extensions'];\n    const extensions = {};\n\n    if (\n      this.options.perMessageDeflate &&\n      secWebSocketExtensions !== undefined\n    ) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = extension.parse(secWebSocketExtensions);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        const message =\n          'Invalid or unacceptable Sec-WebSocket-Extensions header';\n        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n        return;\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.socket.authorized || req.socket.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(\n            extensions,\n            key,\n            protocols,\n            req,\n            socket,\n            head,\n            cb\n          );\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(extensions, key, protocols, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {Object} extensions The accepted extensions\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Set} protocols The subprotocols\n   * @param {http.IncomingMessage} req The request object\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(extensions, key, protocols, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    if (this._state > RUNNING) return abortHandshake(socket, 503);\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new this.options.WebSocket(null, undefined, this.options);\n\n    if (protocols.size) {\n      //\n      // Optionally call external protocol selection handler.\n      //\n      const protocol = this.options.handleProtocols\n        ? this.options.handleProtocols(protocols, req)\n        : protocols.values().next().value;\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = extension.format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, {\n      allowSynchronousEvents: this.options.allowSynchronousEvents,\n      maxPayload: this.options.maxPayload,\n      skipUTF8Validation: this.options.skipUTF8Validation\n    });\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => {\n        this.clients.delete(ws);\n\n        if (this._shouldEmitClose && !this.clients.size) {\n          process.nextTick(emitClose, this);\n        }\n      });\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server._state = CLOSED;\n  server.emit('close');\n}\n\n/**\n * Handle socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {Duplex} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  //\n  // The socket is writable unless the user destroyed or ended it before calling\n  // `server.handleUpgrade()` or in the `verifyClient` function, which is a user\n  // error. Handling this does not make much sense as the worst that can happen\n  // is that some of the data written by the user might be discarded due to the\n  // call to `socket.end()` below, which triggers an `'error'` event that in\n  // turn causes the socket to be destroyed.\n  //\n  message = message || http.STATUS_CODES[code];\n  headers = {\n    Connection: 'close',\n    'Content-Type': 'text/html',\n    'Content-Length': Buffer.byteLength(message),\n    ...headers\n  };\n\n  socket.once('finish', socket.destroy);\n\n  socket.end(\n    `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n      Object.keys(headers)\n        .map((h) => `${h}: ${headers[h]}`)\n        .join('\\r\\n') +\n      '\\r\\n\\r\\n' +\n      message\n  );\n}\n\n/**\n * Emit a `'wsClientError'` event on a `WebSocketServer` if there is at least\n * one listener for it, otherwise call `abortHandshake()`.\n *\n * @param {WebSocketServer} server The WebSocket server\n * @param {http.IncomingMessage} req The request object\n * @param {Duplex} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} message The HTTP response body\n * @param {Object} [headers] The HTTP response headers\n * @private\n */\nfunction abortHandshakeOrEmitwsClientError(\n  server,\n  req,\n  socket,\n  code,\n  message,\n  headers\n) {\n  if (server.listenerCount('wsClientError')) {\n    const err = new Error(message);\n    Error.captureStackTrace(err, abortHandshakeOrEmitwsClientError);\n\n    server.emit('wsClientError', err, socket, req);\n  } else {\n    abortHandshake(socket, code, message, headers);\n  }\n}\n", "import createWebSocketStream from './lib/stream.js';\nimport Receiver from './lib/receiver.js';\nimport Sender from './lib/sender.js';\nimport WebSocket from './lib/websocket.js';\nimport WebSocketServer from './lib/websocket-server.js';\n\nexport { createWebSocketStream, Receiver, Sender, WebSocket, WebSocketServer };\nexport default WebSocket;\n", "import WebSocket from 'ws';\nimport { componentLogger, LogEntry, Component } from './ComponentLogger.js';\nimport { eventHandlers } from '../stores/eventHandlers.js';\n\nexport class LiveCanvasBridge {\n  private ws: WebSocket | null = null;\n  private reconnectTimer: NodeJS.Timeout | null = null;\n  private isDisposed = false;\n  private readonly url = 'ws://localhost:3001';\n  private dispatcher: (event: any) => void;\n\n  constructor(dispatcher: (event: any) => void) {\n    this.dispatcher = dispatcher;\n    this.connect();\n    componentLogger.onLogEntry(this.handleLogEntry.bind(this));\n  }\n\n  private connect() {\n    if (this.isDisposed) return;\n\n    try {\n      this.ws = new WebSocket(this.url);\n\n      this.ws.on('open', () => {\n        // Connected to Live Canvas - send inspection data\n        this.sendLogicInspection();\n      });\n\n      this.ws.on('error', (_err) => {\n        // Silent error to avoid spamming console if canvas isn't running\n        // console.debug('[LiveCanvasBridge] Connection error', err);\n      });\n\n      this.ws.on('close', () => {\n        this.ws = null;\n        if (!this.isDisposed) {\n          this.scheduleReconnect();\n        }\n      });\n\n      this.ws.on('message', (data) => {\n        try {\n          const msg = JSON.parse(data.toString());\n          if (msg.type === 'TRIGGER_EVENT') {\n            this.handleTriggerEvent(msg);\n          }\n        } catch (e) {\n          // Silently ignore parse errors\n        }\n      });\n    } catch {\n      this.scheduleReconnect();\n    }\n  }\n\n  private scheduleReconnect() {\n    if (this.reconnectTimer) clearTimeout(this.reconnectTimer);\n    this.reconnectTimer = setTimeout(() => this.connect(), 5000);\n  }\n\n  private handleLogEntry(entry: LogEntry) {\n    if (!this.ws || this.ws.readyState !== WebSocket.OPEN) return;\n\n    if (entry.message.startsWith('Event:')) {\n      this.sendFsmEvent(entry);\n    } else if (entry.message.startsWith('State transition:')) {\n      this.sendStateChange(entry);\n    } else {\n      this.sendLogEntry(entry);\n    }\n  }\n\n  private sendFsmEvent(entry: LogEntry) {\n    this.send({\n      type: 'FSM_EVENT',\n      event: entry.context?.event || 'unknown',\n      payload: entry.data,\n    });\n  }\n\n  private sendStateChange(entry: LogEntry) {\n    this.send({\n      type: 'FSM_STATE_CHANGE',\n      from: entry.message.split('\u2192')[0].replace('State transition:', '').trim(),\n      to: entry.context?.state || 'unknown',\n      machine: entry.context?.machineId || entry.component,\n    });\n  }\n\n  private sendLogEntry(entry: LogEntry) {\n    this.send({\n      type: 'LOG_ENTRY',\n      level: entry.level,\n      component: entry.component,\n      message: entry.message,\n    });\n  }\n\n  private handleTriggerEvent(msg: any) {\n    componentLogger.info(\n      Component.APPLICATION,\n      `Received remote trigger: ${msg.event}`,\n      undefined,\n      msg.payload\n    );\n\n    if (this.dispatcher) {\n      this.dispatcher({\n        type: msg.event,\n        ...msg.payload,\n      });\n    }\n  }\n\n  private send(msg: any) {\n    if (this.ws && this.ws.readyState === WebSocket.OPEN) {\n      this.ws.send(JSON.stringify(msg));\n    }\n  }\n\n  private sendLogicInspection() {\n    const inspection = Object.entries(eventHandlers).map(([type, handler]) => {\n      const code = handler.toString();\n      // Simple heuristic to detect empty/trivial handlers\n      // Remove comments and whitespace\n      const cleanCode = code\n        .replace(/\\/\\/.*$/gm, '')\n        .replace(/\\/\\*[\\s\\S]*?\\*\\//g, '')\n        .replace(/\\s/g, '');\n\n      // Check for empty body\n      // Arrow functions: () => {} -> clean: ()=>{ }\n      // Function expressions: function() {} -> clean: function(){}\n      const isUnhandled =\n        cleanCode.endsWith('{}') ||\n        cleanCode.endsWith('{return;}') ||\n        cleanCode.endsWith('{returnundefined;}');\n\n      return {\n        type,\n        status: isUnhandled ? 'unhandled' : 'handled',\n        snippet: code.length > 100 ? code.substring(0, 100) + '...' : code,\n      };\n    });\n\n    this.send({\n      type: 'LOGIC_INSPECTION',\n      events: inspection,\n    });\n  }\n\n  public dispose() {\n    this.isDisposed = true;\n    if (this.reconnectTimer) clearTimeout(this.reconnectTimer);\n    if (this.ws) {\n      this.ws.close();\n      this.ws = null;\n    }\n  }\n}\n", "/**\n * Module: Router Stamping Helper\n * Owner: router\n * Reads: activeConnectionId (from Application context)\n * Writes: none\n * Receives: webview events (any)\n * Emits: stamped event with meta for connection-shaped events\n * Prohibitions: No domain logic; No context mutation; No VS Code API calls\n * Rationale: Centralize event stamping and shape normalization\n *\n * LLM-GUARD:\n * - Do not handle UI rendering here\n * - Do not dispatch FSM events here\n */\n\ntype AnyEvent = { type: string; [key: string]: any };\n\nconst CONNECTION_EVENT_TYPES = new Set([\n  'AUTHENTICATION_REQUIRED',\n  'TOKEN_EXPIRED',\n  'RUN_QUERY',\n  'DELETE_CONNECTION',\n  'REFRESH',\n  'REFRESH_DATA',\n]);\n\nexport function isConnectionShapedEvent(type: string | undefined): boolean {\n  return Boolean(type && CONNECTION_EVENT_TYPES.has(type));\n}\n\nexport function stampConnectionMeta<E extends AnyEvent>(\n  event: E,\n  activeConnectionId: string | null | undefined\n): E {\n  if (!event || !isConnectionShapedEvent(event.type) || !activeConnectionId) return event;\n  const meta = event.meta ?? {};\n  return {\n    ...event,\n    meta: {\n      ...meta,\n      atConnectionId: activeConnectionId,\n      timestamp: Date.now(),\n      correlationId:\n        meta.correlationId ?? Math.random().toString(36).slice(2) + Date.now().toString(36),\n    },\n  } as E;\n}\n", "/**\n * Module: Activation\n * Owner: application\n * Reads: ApplicationContext (selectors), webview events\n * Writes: none directly to context; delegates via Praxis reducers and Router stamping\n * Receives: UI/system events, provider messages\n * Emits: syncState to webview; dispatches typed events to PraxisApplicationManager\n * Prohibitions: Do not implement webview logic here; Do not define context types; Do not set selection\n * Rationale: Integration layer wiring VS Code host to Praxis + Webview; routing and stamping only\n *\n * LLM-GUARD:\n * - Do not mutate ApplicationContext directly; use Praxis events/reducers\n * - Do not create new *Context types; import from the single context module\n */\nimport * as vscode from 'vscode';\nimport * as fs from 'fs';\nimport * as path from 'path';\n// import { randomUUID as _randomUUID } from 'crypto';\n// import { OpenAI } from 'openai';\nimport { AzureDevOpsIntClient } from './azureClient.js';\n// import {\n//   parseAzureDevOpsUrl as _parseAzureDevOpsUrl,\n//   isAzureDevOpsWorkItemUrl as _isAzureDevOpsWorkItemUrl,\n// } from './azureDevOpsUrlParser.js';\nimport type { WorkItemsProvider } from './provider.js';\nimport { SessionTelemetryManager } from './sessionTelemetry.js';\n// import {\n//   clearConnectionCaches,\n//   getBranchEnrichmentState,\n//   updateBuildRefreshTimer,\n//   type BranchContext,\n// } from './services/connection/branchEnrichment.js';\nimport {\n  clearConnectionCaches,\n  // getBranchEnrichmentState,\n  updateBuildRefreshTimer,\n  // type BranchContext,\n} from './services/connection/branchEnrichment.js';\nimport {\n  createBranchAwareTransform,\n  // createConnectionProvider as _createConnectionProvider,\n} from './services/connection/providerFactory.js';\nimport { createSharedContextBridge } from './bridge/sharedContextBridge.js';\nimport {\n  bridgeConsoleToOutputChannel,\n  // getLogBufferSnapshot,\n  getOutputChannel,\n  logLine,\n  setOutputChannel,\n} from './logging.js';\n\nimport { startCacheCleanup, stopCacheCleanup } from './cache.js';\n// import { performanceMonitor, MemoryOptimizer } from './performance.js';\nimport {\n  normalizeConnections,\n  resolveActiveConnectionId,\n} from './services/connection/connectionNormalization.js';\nimport { migrateGlobalPATToConnections } from './services/secrets/patMigration.js';\nimport {\n  getApplicationStoreActor,\n  sendApplicationStoreEvent,\n  // setActiveConnectionHandler as _setActiveConnectionHandler,\n  setActiveConnectionIdReader,\n  setExtensionContextRef as setExtensionContextRefBridge,\n  // setForwardProviderMessage as _setForwardProviderMessage,\n  setGetSecretPAT,\n  setLoadedConnectionsReader,\n  getLoadedConnections,\n  // setRegisterAllCommands as _setRegisterAllCommands,\n  // setWebviewMessageHandler as _setWebviewMessageHandler,\n} from './services/extensionHostBridge.js';\nimport { registerCommands } from './features/commands/index.js';\nimport { registerTraceCommands } from './commands/traceCommands.js';\nimport { registerQuickDebugCommands } from './commands/quickDebugCommands.js';\nimport { registerHistoryDebugCommands } from './commands/historyDebugCommands.js';\nimport { registerTestGeneratorCommands } from './commands/testGeneratorCommands.js';\nimport { ConnectionService } from './praxis/connection/service.js';\n//import { initializeBridge } from './services/extensionHostBridge.js';\nimport type {\n  // AuthReminderReason,\n  AuthReminderState,\n  ConnectionState,\n  ProjectConnection,\n} from './types/application.js';\nimport {\n  AuthRedirectReceivedAppEvent,\n  AuthCodeFlowCompletedAppEvent,\n  DeviceCodeCopyFailedEvent,\n  DeviceCodeBrowserOpenFailedEvent,\n  DeviceCodeSessionNotFoundEvent,\n  DeviceCodeBrowserOpenedEvent,\n  AuthCodeFlowBrowserOpenFailedEvent,\n  AuthCodeFlowBrowserOpenedEvent,\n  ApplicationErrorEvent,\n} from './praxis/application/facts.js';\n// import type { WorkItemTimerState, TimeEntry } from './types.js';\n\n// type _AuthMethod = 'pat' | 'entra';\n\n// Local lightweight type definitions for internal messaging helpers.\n// These were previously only present in a temporary bundle artifact.\n// Keeping them here avoids implicit any usage and preserves clarity.\n// type LoggerFn = (message: string, meta?: any) => void;\n/*\ntype PostWorkItemsSnapshotParams = {\n  panel?: vscode.WebviewView;\n  logger?: LoggerFn;\n  connectionId?: string;\n  items?: any[];\n  kanbanView?: boolean;\n  provider?: WorkItemsProvider;\n  types?: string[];\n  query?: string;\n  branchContext?: BranchContext | null;\n};\n*/\n\n// const STATE_TIMER = 'azureDevOpsInt.timer.state';\n// const STATE_TIME_ENTRIES = 'azureDevOpsInt.timer.entries';\n// const STATE_LAST_SAVE = 'azureDevOpsInt.timer.lastSave';\n// const STATE_TIMER_CONNECTION = 'azureDevOpsInt.timer.connection';\nconst CONFIG_NS = 'azureDevOpsIntegration';\n// const LEGACY_CONFIG_NS = 'azureDevOps';\nconst CONNECTIONS_CONFIG_KEY = 'connections';\nconst ACTIVE_CONNECTION_STATE_KEY = 'azureDevOpsInt.activeConnectionId';\n\nexport let panel: vscode.WebviewView | undefined;\n\n// Track last state signature to deduplicate syncState messages (Priority 2: Reduce redundant syncs)\n// Module-level variable accessible from both class methods and global subscription callbacks\nlet lastStateSignature: string | undefined = undefined;\n\n// Debounce RESET_AUTH events to prevent rapid duplicate processing\nlet lastResetAuthTime = 0;\nconst RESET_AUTH_DEBOUNCE_MS = 2000; // 2 seconds\nlet provider: WorkItemsProvider | undefined;\nlet sessionTelemetry: SessionTelemetryManager | undefined;\nlet client: AzureDevOpsIntClient | undefined;\nlet statusBarItem: vscode.StatusBarItem | undefined;\nlet authStatusBarItem: vscode.StatusBarItem | undefined;\n// const _PAT_KEY = 'azureDevOpsInt.pat';\n// const OPENAI_SECRET_KEY = 'azureDevOpsInt.openai.apiKey';\nlet viewProviderRegistered = false;\nconst initialRefreshedConnections = new Set<string>();\nlet connections: ProjectConnection[] = [];\nconst connectionStates = new Map<string, ConnectionState>();\n// let connectionAdapterInstance: ConnectionAdapter | undefined;\nlet activeConnectionId: string | undefined;\n// Track connections that were recently signed out to prevent automatic reconnection\nconst recentlySignedOutConnections = new Set<string>();\n\n/**\n * Mark a connection as recently signed out to prevent automatic reconnection\n */\nexport function markConnectionSignedOut(connectionId: string): void {\n  recentlySignedOutConnections.add(connectionId);\n  // Automatic logging will capture this\n  // Clear the flag after 30 seconds to allow reconnection if user wants\n  setTimeout(() => {\n    recentlySignedOutConnections.delete(connectionId);\n    // Automatic logging will capture this\n  }, 30000);\n}\n\n/**\n * Clear the signed-out flag for a connection (e.g., when user explicitly signs in)\n */\nexport function clearSignedOutFlag(connectionId: string): void {\n  recentlySignedOutConnections.delete(connectionId);\n  // Automatic logging will capture this\n}\n\n/**\n * Clear connection state from connectionStates map (used during sign out)\n */\nexport function clearConnectionState(connectionId: string): void {\n  connectionStates.delete(connectionId);\n  initialRefreshedConnections.delete(connectionId);\n  // Automatic logging will capture this\n}\nlet tokenRefreshInterval: NodeJS.Timeout | undefined;\nlet gcInterval: NodeJS.Timeout | undefined;\n// let isDeactivating = false;\nlet rejectionHandler: ((reason: any, promise: Promise<any>) => void) | undefined;\nlet sharedContextBridge: ReturnType<typeof createSharedContextBridge> | undefined;\nlet extensionContextRef: vscode.ExtensionContext | undefined;\n// let openAiClient: OpenAI | undefined;\n// let cachedExtensionVersion: string | undefined; // cache package.json version for cache-busting\n// Track last applied query to avoid redundant provider refreshes\nlet lastQueriedActiveConnectionId: string | undefined;\nlet lastQueriedQuery: string | undefined;\n\nfunction shouldLogDebug(): boolean {\n  try {\n    return Boolean(getConfig().get('debugLogging'));\n  } catch {\n    return false;\n  }\n}\n// -------------------------------------------------------------\n// TEST HOOKS (Internal) - Minimal message handling used by tests\n// -------------------------------------------------------------\n// These exports provide a lightweight simulation of the webview \u2194 activation\n// message contract for unit tests that import activation.ts directly.\n// They intentionally avoid Praxis pathways for isolation.\nexport function __setTestContext(ctx: {\n  panel?: any;\n  provider?: any;\n  client?: any;\n  activeConnectionId?: string;\n}): void {\n  if (ctx.panel) panel = ctx.panel;\n  if (ctx.provider) provider = ctx.provider;\n  if (ctx.client) client = ctx.client;\n  if (ctx.activeConnectionId) activeConnectionId = ctx.activeConnectionId;\n}\n\nexport function handleMessage(message: any): void {\n  switch (message?.type) {\n    case 'openExternal': {\n      // Praxis-requested external URL open\n      if (message.url) {\n        vscode.env.openExternal(vscode.Uri.parse(message.url));\n      }\n      break;\n    }\n    case 'createBranch': {\n      // Praxis-requested branch creation\n      if (message.suggestedName) {\n        vscode.window\n          .showInputBox({\n            prompt: 'Enter branch name',\n            value: message.suggestedName,\n            placeHolder: 'feature/123-my-work-item',\n          })\n          .then((name) => {\n            if (name) {\n              vscode.commands.executeCommand('git.branch', name);\n            }\n          });\n      }\n      break;\n    }\n    case 'getWorkItems': {\n      const items = provider?.getWorkItems?.() || [];\n      dispatchProviderMessage({\n        type: 'workItemsLoaded',\n        workItems: items,\n        connectionId: activeConnectionId,\n        query: getStoredQueryForConnection(activeConnectionId),\n      });\n      break;\n    }\n    case 'refresh': {\n      try {\n        // CRITICAL: Use provider from active connection's Praxis state, not global provider\n        // This ensures refresh uses the correct connection when tabs are switched\n        if (activeConnectionId) {\n          const actor = getApplicationActor();\n          const snapshot = actor?.getSnapshot?.();\n          const connectionStates = snapshot?.context?.connectionStates;\n          const connectionState = connectionStates?.get(activeConnectionId);\n          const activeProvider = connectionState?.provider;\n\n          if (activeProvider && typeof activeProvider.refresh === 'function') {\n            const query = getStoredQueryForConnection(activeConnectionId);\n            activeProvider.refresh(query);\n            // Automatic logging will capture this\n          } else if (provider) {\n            // Fallback to global provider if Praxis provider not available\n            provider.refresh(getStoredQueryForConnection(activeConnectionId));\n            // Automatic logging will capture this\n          } else {\n            // Automatic logging will capture this\n          }\n        }\n      } catch (error) {\n        // Automatic logging will capture this\n      }\n      break;\n    }\n    case 'addComment': {\n      if (!message.comment) {\n        dispatchApplicationEvent({\n          type: 'SHOW_COMPOSE_COMMENT',\n          mode: 'addComment',\n          workItemId: message.workItemId,\n        });\n        break;\n      }\n      // fallthrough to submitComposeComment logic if comment provided\n      handleMessage({ ...message, type: 'submitComposeComment' });\n      break;\n    }\n    case 'submitComposeComment': {\n      const { workItemId, comment, mode, timerData } = message;\n      if (!client) {\n        dispatchApplicationEvent({\n          type: 'COMMENT_RESULT',\n          success: false,\n          mode,\n          workItemId,\n          error: 'No active client',\n        });\n        break;\n      }\n      const hoursDecimal: number | undefined = timerData?.hoursDecimal;\n      (async () => {\n        try {\n          if (mode === 'timerStop' && typeof hoursDecimal === 'number') {\n            const wi = await client.getWorkItemById?.(workItemId);\n            const completed = Number(wi?.fields?.['Microsoft.VSTS.Scheduling.CompletedWork'] || 0);\n            const remaining = Number(wi?.fields?.['Microsoft.VSTS.Scheduling.RemainingWork'] || 0);\n            const newCompleted = completed + hoursDecimal;\n            const newRemaining = Math.max(remaining - hoursDecimal, 0);\n            await client.updateWorkItem?.(workItemId, [\n              {\n                op: 'add',\n                path: '/fields/Microsoft.VSTS.Scheduling.CompletedWork',\n                value: newCompleted,\n              },\n              {\n                op: 'add',\n                path: '/fields/Microsoft.VSTS.Scheduling.RemainingWork',\n                value: newRemaining,\n              },\n            ]);\n            const hoursStr = hoursDecimal.toFixed(2);\n            const composed = comment\n              ? `${comment} (Logged ${hoursStr}h)`\n              : `Logged ${hoursStr}h via timer stop.`;\n            await client.addWorkItemComment?.(workItemId, composed);\n            dispatchApplicationEvent({\n              type: 'COMMENT_RESULT',\n              success: true,\n              mode,\n              workItemId,\n              message: `Logged ${hoursStr}h and added comment`,\n            });\n            return;\n          }\n          if (mode === 'addComment') {\n            if (comment) {\n              await client.addWorkItemComment?.(workItemId, comment);\n              dispatchApplicationEvent({\n                type: 'COMMENT_RESULT',\n                success: true,\n                mode,\n                workItemId,\n                message: 'Comment added successfully',\n              });\n            } else {\n              dispatchApplicationEvent({\n                type: 'SHOW_COMPOSE_COMMENT',\n                mode: 'addComment',\n                workItemId,\n              });\n            }\n            return;\n          }\n          // Generic fallback\n          if (comment) {\n            await client.addWorkItemComment?.(workItemId, comment);\n          }\n          dispatchApplicationEvent({\n            type: 'COMMENT_RESULT',\n            success: true,\n            mode,\n            workItemId,\n            message: 'Comment added',\n          });\n        } catch (err) {\n          dispatchApplicationEvent({\n            type: 'COMMENT_RESULT',\n            success: false,\n            mode,\n            workItemId,\n            error: String(err),\n          });\n          // Automatic logging will capture this error\n        }\n      })().catch((err) => {\n        dispatchApplicationEvent({\n          type: 'COMMENT_RESULT',\n          success: false,\n          mode,\n          workItemId,\n          error: String(err),\n        });\n        // Automatic logging will capture this error\n      });\n      break;\n    }\n    default:\n      // ignore\n      break;\n  }\n}\n\n// Legacy PAT migration helper (test-only export)\n// Moves PAT from globalState key to secrets storage if present.\nexport async function migrateLegacyPAT(context: vscode.ExtensionContext): Promise<void> {\n  try {\n    const legacy = context.globalState.get<string>('azureDevOpsInt.pat');\n    if (legacy && legacy.trim().length > 0) {\n      await context.secrets.store('azureDevOpsInt.pat', legacy);\n      // Clear legacy value to prevent re-migration loops (best-effort)\n      try {\n        await context.globalState.update('azureDevOpsInt.pat', undefined as any);\n      } catch {\n        /* ignore */\n      }\n    }\n  } catch {\n    /* ignore migration errors for tests */\n  }\n}\n\n// Build minimal webview HTML (test helper) choosing bundle based on feature flag + existence.\nexport function buildMinimalWebviewHtml(\n  context: vscode.ExtensionContext,\n  webview: { cspSource: string; asWebviewUri: (u: any) => any },\n  nonce: string\n): string {\n  const cfg = vscode.workspace.getConfiguration('azureDevOpsIntegration');\n  const enableSvelte = !!cfg.get('experimentalSvelteUI');\n  const basePath = context.extensionPath;\n  const sveltePath = path.join(basePath, 'media', 'webview', 'svelte-main.js');\n  const scriptFile = enableSvelte && fs.existsSync(sveltePath) ? 'svelte-main.js' : 'main.js';\n  const scriptUri = webview.asWebviewUri(\n    vscode.Uri.joinPath(context.extensionUri, 'media', 'webview', scriptFile)\n  );\n  // Link to main.css which contains Svelte component styles from esbuild\n  const mainCssUri = webview.asWebviewUri(\n    vscode.Uri.joinPath(context.extensionUri, 'media', 'webview', 'main.css')\n  );\n  const csp = `default-src 'none'; style-src ${webview.cspSource} 'unsafe-inline'; script-src 'nonce-${nonce}' 'unsafe-eval'; img-src ${webview.cspSource} data:; connect-src 'self';`;\n  return `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <meta http-equiv=\"Content-Security-Policy\" content=\"${csp}\" />\n  <link href=\"${mainCssUri}\" rel=\"stylesheet\" />\n  <title>Work Items</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  <meta name=\"azure-devops-integration\" content=\"minimal-webview\" />\n</head>\n<body>\n  <div id=\"svelte-root\"></div>\n  <script type=\"module\" nonce=\"${nonce}\" src=\"${scriptUri}\"></script>\n</body>\n</html>`;\n}\n\n// Manual logging removed - use automatic logging via StandardizedAutomaticLogger\n\n// Self-test tracking (prove Svelte webview round-trip works)\n// Self-test pending promise handlers (typed loosely to avoid unused param lint churn)\n// let selfTestPending:\n//   | { nonce: string; resolve: Function; reject: Function; timeout: NodeJS.Timeout }\n//   | undefined;\n\n// type TimerConnectionInfo = {\n//   id?: string;\n//   label?: string;\n//   organization?: string;\n//   project?: string;\n// };\n\n// let timerConnectionInfo: TimerConnectionInfo = {};\n\nconst DEFAULT_QUERY = 'My Activity';\nconst activeQueryByConnection = new Map<string, string>();\nconst ACTIVE_QUERY_STATE_KEY = 'azureDevOpsInt.activeQueryByConnection';\n\n// let nextAuthConnectionIndex = 0;\n// const INTERACTIVE_REAUTH_THROTTLE_MS = 5 * 60 * 1000;\n\nfunction getApplicationActor():\n  | { getSnapshot?: () => any; send?: (event: unknown) => void }\n  | undefined {\n  const actor = getApplicationStoreActor();\n  if (!actor || typeof actor !== 'object') {\n    return undefined;\n  }\n  return actor as { getSnapshot?: () => any; send?: (event: unknown) => void };\n}\n\nasync function showEditDialog(item: any, client: any, provider: any): Promise<void> {\n  // Define editable fields with their display names and current values\n  const editableFields = [\n    {\n      id: 'System.Title',\n      label: 'Title',\n      value: item.fields?.['System.Title'] || '',\n      type: 'text',\n    },\n    {\n      id: 'System.State',\n      label: 'State',\n      value: item.fields?.['System.State'] || '',\n      type: 'picklist',\n      options: ['New', 'Active', 'Resolved', 'Closed', 'Removed'],\n    },\n    {\n      id: 'System.AssignedTo',\n      label: 'Assigned To',\n      value:\n        item.fields?.['System.AssignedTo']?.displayName || item.fields?.['System.AssignedTo'] || '',\n      type: 'text',\n    },\n    {\n      id: 'System.Tags',\n      label: 'Tags',\n      value: item.fields?.['System.Tags'] || '',\n      type: 'text',\n    },\n    {\n      id: 'System.Description',\n      label: 'Description',\n      value: item.fields?.['System.Description'] || '',\n      type: 'multiline',\n    },\n  ];\n\n  // Show field selection\n  const fieldItems = editableFields.map((field) => ({\n    label: field.label,\n    description: `Current: ${field.value}`,\n    field: field,\n  }));\n\n  const selectedField = await vscode.window.showQuickPick(fieldItems, {\n    placeHolder: 'Select field to edit',\n    title: `Edit Work Item #${item.id}`,\n  });\n\n  if (!selectedField) return;\n\n  const field = selectedField.field;\n  let newValue: string | undefined;\n\n  if (field.type === 'picklist') {\n    // Show picklist for state field\n    const stateItems = (field.options || []).map((option) => ({\n      label: option,\n      picked: option === field.value,\n    }));\n\n    const selectedState = await vscode.window.showQuickPick(stateItems, {\n      placeHolder: 'Select new state',\n      title: `Edit ${field.label}`,\n    });\n\n    if (!selectedState) return;\n    newValue = selectedState.label;\n  } else if (field.type === 'multiline') {\n    // Show input box for multiline text\n    newValue = await vscode.window.showInputBox({\n      prompt: `Enter new ${field.label}`,\n      value: field.value,\n      ignoreFocusOut: true,\n    });\n  } else {\n    // Show input box for single-line text\n    newValue = await vscode.window.showInputBox({\n      prompt: `Enter new ${field.label}`,\n      value: field.value,\n      ignoreFocusOut: true,\n    });\n  }\n\n  if (newValue === undefined) return; // User cancelled\n\n  // Update the work item\n  try {\n    const patches = [\n      {\n        op: 'replace' as const,\n        path: `/fields/${field.id}`,\n        value: newValue,\n      },\n    ];\n\n    const updatedItem = await client.updateWorkItem(item.id, patches);\n\n    if (updatedItem) {\n      vscode.window.showInformationMessage(\n        `Successfully updated ${field.label} for work item #${item.id}`\n      );\n\n      // Refresh the provider to show updated data\n      provider.refresh?.(getStoredQueryForConnection(activeConnectionId));\n    } else {\n      vscode.window.showErrorMessage(`Failed to update ${field.label} for work item #${item.id}`);\n    }\n  } catch (error) {\n    // Automatic logging will capture this error - activationLogger.error('Error updating work item', { meta: error });\n    vscode.window.showErrorMessage(\n      `Error updating work item: ${error instanceof Error ? error.message : String(error)}`\n    );\n  }\n}\n\nasync function showCreateWorkItemDialog(\n  client: any,\n  provider: any,\n  connectionId?: string\n): Promise<void> {\n  try {\n    // Step 1: Get work item types from Azure DevOps\n    let workItemTypes: string[] = [];\n    try {\n      const types: Array<{ name: string }> = await client.getWorkItemTypes();\n      workItemTypes = types.map((t) => t.name).filter((n) => n);\n    } catch (error) {\n      // Automatic logging will capture this warning - activationLogger.warn('Could not fetch work item types, using defaults', { meta: error });\n    }\n\n    // Use defaults if API call failed\n    if (workItemTypes.length === 0) {\n      workItemTypes = ['Task', 'Bug', 'User Story', 'Feature', 'Epic'];\n    }\n\n    // Step 2: Select work item type\n    const selectedType = await vscode.window.showQuickPick(workItemTypes, {\n      placeHolder: 'Select work item type',\n      title: 'Create Work Item',\n    });\n\n    if (!selectedType) return;\n\n    // Step 3: Enter title\n    const title = await vscode.window.showInputBox({\n      prompt: 'Enter work item title',\n      placeHolder: 'Title',\n      ignoreFocusOut: true,\n      validateInput: (value) => {\n        if (!value || value.trim().length === 0) {\n          return 'Title is required';\n        }\n        return null;\n      },\n    });\n\n    if (!title) return;\n\n    // Step 4: Enter description (optional)\n    const description = await vscode.window.showInputBox({\n      prompt: 'Enter work item description (optional)',\n      placeHolder: 'Description',\n      ignoreFocusOut: true,\n    });\n\n    // Step 5: Enter assignee (optional)\n    const assignTo = await vscode.window.showInputBox({\n      prompt: 'Assign to (optional, leave empty for unassigned)',\n      placeHolder: 'Email or display name',\n      ignoreFocusOut: true,\n    });\n\n    // Step 6: Select Iteration (optional)\n    let iterationPath: string | undefined;\n    try {\n      // Try to fetch iterations if the client supports it\n      if (typeof client.getIterations === 'function') {\n        const iterations = await client.getIterations();\n        if (Array.isArray(iterations) && iterations.length > 0) {\n          const iterationItems = iterations.map((i: any) => ({\n            label: i.name,\n            description: i.path,\n            detail: i.attributes?.startDate\n              ? `Start: ${new Date(i.attributes.startDate).toLocaleDateString()}`\n              : undefined,\n          }));\n\n          const selectedIteration = await vscode.window.showQuickPick(iterationItems, {\n            placeHolder: 'Select Iteration (optional)',\n            title: 'Iteration',\n          });\n\n          if (selectedIteration) {\n            iterationPath = selectedIteration.description;\n          }\n        }\n      }\n    } catch (error) {\n      // Automatic logging will capture this warning - activationLogger.warn('Failed to fetch iterations', { meta: error });\n    }\n\n    const extraFields: Record<string, unknown> = {};\n    if (iterationPath) {\n      extraFields['System.IterationPath'] = iterationPath;\n    }\n\n    // Create the work item\n    const createdItem = await client.createWorkItem(\n      selectedType,\n      title.trim(),\n      description?.trim(),\n      assignTo?.trim() || undefined,\n      extraFields\n    );\n\n    if (createdItem) {\n      vscode.window.showInformationMessage(\n        `Successfully created ${selectedType} #${createdItem.id}: ${title}`\n      );\n\n      // Refresh the provider to show the new work item\n      provider.refresh?.(getStoredQueryForConnection(connectionId || activeConnectionId));\n    } else {\n      vscode.window.showErrorMessage(`Failed to create ${selectedType}`);\n    }\n  } catch (error) {\n    // Automatic logging will capture this error - activationLogger.error('Error creating work item', { meta: error });\n    vscode.window.showErrorMessage(\n      `Error creating work item: ${error instanceof Error ? error.message : String(error)}`\n    );\n  }\n}\n\nexport function dispatchApplicationEvent(event: unknown): void {\n  // Route work item action events to legacy handleMessage which has implementations\n  if (event && typeof event === 'object' && 'type' in event) {\n    const evt = event as any;\n\n    switch (evt.type) {\n      case 'STOP_TIMER':\n        // Show comment dialog for time entry\n        (async () => {\n          try {\n            const appActor = getApplicationStoreActor() as any;\n            const snapshot = appActor?.getSnapshot?.();\n            const timerState = snapshot?.context?.timerState;\n\n            if (!timerState?.workItemId || !timerState?.startTime) {\n              vscode.window.showWarningMessage('No active timer to stop');\n              return;\n            }\n\n            // Calculate elapsed time\n            const elapsed = Math.floor((Date.now() - timerState.startTime) / 1000);\n            const hours = (elapsed / 3600).toFixed(2);\n\n            // Prompt for comment\n            const comment = await vscode.window.showInputBox({\n              prompt: `Add comment for ${hours} hours logged on work item #${timerState.workItemId}`,\n              placeHolder: 'Optional: describe what you worked on...',\n            });\n\n            // Stop the timer (send to Praxis)\n            const timerActor = snapshot?.context?.timerActor;\n            if (timerActor && typeof timerActor.send === 'function') {\n              timerActor.send({ type: 'STOP' });\n            }\n\n            // Add time entry and comment if we have a client\n            if (client && timerState.workItemId) {\n              try {\n                // Update completed/remaining work\n                const wi = await client.getWorkItemById(timerState.workItemId);\n                const completed = Number(\n                  wi?.fields?.['Microsoft.VSTS.Scheduling.CompletedWork'] || 0\n                );\n                const remaining = Number(\n                  wi?.fields?.['Microsoft.VSTS.Scheduling.RemainingWork'] || 0\n                );\n                const hoursDecimal = Number(hours);\n\n                await client.updateWorkItem(timerState.workItemId, [\n                  {\n                    op: 'add',\n                    path: '/fields/Microsoft.VSTS.Scheduling.CompletedWork',\n                    value: completed + hoursDecimal,\n                  },\n                  {\n                    op: 'add',\n                    path: '/fields/Microsoft.VSTS.Scheduling.RemainingWork',\n                    value: Math.max(remaining - hoursDecimal, 0),\n                  },\n                ]);\n\n                // Add comment\n                const finalComment = comment\n                  ? `${comment} (Logged ${hours}h)`\n                  : `Logged ${hours}h via timer stop.`;\n                await client.addWorkItemComment(timerState.workItemId, finalComment);\n\n                vscode.window.showInformationMessage(\n                  `Timer stopped. Logged ${hours} hours to work item #${timerState.workItemId}`\n                );\n              } catch (error) {\n                // Automatic logging will capture this error - activationLogger.error('Error adding time entry', { meta: error });\n                vscode.window.showErrorMessage(\n                  `Timer stopped but failed to log time: ${error instanceof Error ? error.message : String(error)}`\n                );\n              }\n            } else {\n              vscode.window.showInformationMessage(`Timer stopped. ${hours} hours elapsed.`);\n            }\n\n            // Clear persisted timer state\n            if (snapshot?.context?.extensionContext) {\n              await snapshot.context.extensionContext.globalState.update(\n                'azureDevOpsInt.timer.state',\n                undefined\n              );\n            }\n          } catch (error) {\n            // Automatic logging will capture this error - activationLogger.error('Error stopping timer', { meta: error });\n            vscode.window.showErrorMessage(\n              `Failed to stop timer: ${error instanceof Error ? error.message : String(error)}`\n            );\n          }\n        })();\n        break;\n      case 'EDIT_WORK_ITEM':\n        // Implement in-VSCode edit dialog\n        try {\n          if (evt.workItemId && client && provider) {\n            const items = provider.getWorkItems?.() || [];\n            const item = items.find((i: any) => i.id === evt.workItemId);\n            if (item) {\n              showEditDialog(item, client, provider);\n            } else {\n              vscode.window.showErrorMessage('Work item not found');\n            }\n          } else {\n            vscode.window.showErrorMessage('Unable to edit work item: missing client or provider');\n          }\n        } catch (error) {\n          // Automatic logging will capture this error - activationLogger.error('Error editing work item', { meta: error });\n          vscode.window.showErrorMessage(\n            `Failed to edit work item: ${error instanceof Error ? error.message : String(error)}`\n          );\n        }\n        break;\n      case 'CREATE_WORK_ITEM':\n        // Show dialog to create new work item\n        try {\n          if (client && provider) {\n            showCreateWorkItemDialog(client, provider, activeConnectionId);\n          } else {\n            vscode.window.showErrorMessage(\n              'Unable to create work item: missing client or provider'\n            );\n          }\n        } catch (error) {\n          // Automatic logging will capture this error - activationLogger.error('Error creating work item', { meta: error });\n          vscode.window.showErrorMessage(\n            `Failed to create work item: ${error instanceof Error ? error.message : String(error)}`\n          );\n        }\n        break;\n      case 'OPEN_IN_BROWSER':\n      case 'OPEN_WORK_ITEM':\n        // Open work item in browser and copy URL to clipboard (standard behavior)\n        if (evt.workItemId && client) {\n          const url = client.getBrowserUrl(`/_workitems/edit/${evt.workItemId}`);\n          // Copy URL to clipboard (standard behavior)\n          vscode.env.clipboard.writeText(url).then(\n            () => {\n              vscode.window.showInformationMessage(`Work item URL copied to clipboard`);\n            },\n            (error) => {\n              // Automatic logging will capture this warning\n            }\n          );\n          // Open in browser\n          vscode.env.openExternal(vscode.Uri.parse(url));\n        }\n        break;\n      case 'CREATE_BRANCH':\n        // Show input for branch name then create and link to work item\n        (async () => {\n          try {\n            if (evt.workItemId) {\n              const items = provider?.getWorkItems?.() || [];\n              const item = items.find((i: any) => i.id === evt.workItemId);\n\n              if (item) {\n                const title = item.fields?.['System.Title'] || '';\n                const branchName = `feature/${evt.workItemId}-${title.toLowerCase().replace(/[^a-z0-9]+/g, '-')}`;\n                const name = await vscode.window.showInputBox({\n                  prompt: 'Enter branch name',\n                  value: branchName,\n                });\n\n                if (name) {\n                  try {\n                    // Create the branch\n                    await vscode.commands.executeCommand('git.branch', name);\n\n                    // Add comment to work item linking the branch\n                    if (client) {\n                      const comment = `Created branch: ${name}`;\n                      const success = await client.addWorkItemComment(evt.workItemId, comment);\n\n                      if (success) {\n                        vscode.window.showInformationMessage(\n                          `Branch \"${name}\" created and linked to work item #${evt.workItemId}`\n                        );\n                      } else {\n                        vscode.window.showWarningMessage(\n                          `Branch \"${name}\" created but failed to link to work item #${evt.workItemId}`\n                        );\n                      }\n                    } else {\n                      vscode.window.showInformationMessage(`Branch \"${name}\" created`);\n                    }\n                  } catch (error) {\n                    // Automatic logging will capture this error - activationLogger.error('Error creating branch', { meta: error });\n                    vscode.window.showErrorMessage(\n                      `Failed to create branch: ${error instanceof Error ? error.message : String(error)}`\n                    );\n                  }\n                }\n              } else {\n                vscode.window.showErrorMessage('Work item not found');\n              }\n            } else {\n              vscode.window.showErrorMessage('No work item ID provided for branch creation');\n            }\n          } catch (error) {\n            // Automatic logging will capture this error - activationLogger.error('Error in branch creation', { meta: error });\n            vscode.window.showErrorMessage(\n              `Failed to create branch: ${error instanceof Error ? error.message : String(error)}`\n            );\n          }\n        })();\n        break;\n    }\n  }\n\n  // Always send event to Praxis for state management\n  sendApplicationStoreEvent(event);\n}\n\n// async function signInWithEntra(\n//   context: vscode.ExtensionContext,\n//   connectionId?: string,\n//   options: { showSuccessMessage?: boolean; forceInteractive?: boolean } = {}\n// ): Promise<void> {\n//   await ensureConnectionsInitialized(context);\n//   const targetId = connectionId ?? activeConnectionId;\n\n//   if (!targetId) {\n//     vscode.window.showWarningMessage('No active connection to sign in with.');\n//     return;\n//   }\n\n//   dispatchApplicationEvent({\n//     type: 'SIGN_IN_ENTRA',\n//     connectionId: targetId,\n//     forceInteractive: options.forceInteractive,\n//   });\n// }\n\n/*\nasync function signOutEntra(\n  context: vscode.ExtensionContext,\n  connectionId?: string\n): Promise<void> {\n  await ensureConnectionsInitialized(context);\n  const targetId = connectionId ?? activeConnectionId;\n\n  if (!targetId) {\n    vscode.window.showWarningMessage('No active connection to sign out from.');\n    return;\n  }\n\n  dispatchApplicationEvent({ type: 'SIGN_OUT_ENTRA', connectionId: targetId });\n}\n*/\n\n/*\nfunction safeCommandHandler<Args extends unknown[], Result>(\n  handler: (...args: Args) => Result\n): (...args: Args) => void {\n  return (...args: Args) => {\n    if (isDeactivating) {\n      // Automatic logging will capture this\n      return;\n    }\n\n    try {\n      const result = handler(...args);\n      const maybeThenable = result as\n        | { catch?: (onRejected: (reason: unknown) => unknown) => unknown }\n        | undefined;\n      if (maybeThenable?.catch) {\n        maybeThenable.catch((error) => {\n          if (!isDeactivating) {\n            // Automatic logging will capture this error - activationLogger.error('[Command] Unhandled command error', { meta: error });\n          }\n        });\n      }\n    } catch (error) {\n      if (!isDeactivating) {\n        // Automatic logging will capture this error - activationLogger.error('[Command] Synchronous command error', { meta: error });\n      }\n    }\n  };\n}\n*/\n\nasync function ensureSharedContextBridge(\n  context: vscode.ExtensionContext\n): Promise<ReturnType<typeof createSharedContextBridge>> {\n  if (!sharedContextBridge) {\n    if (!getApplicationActor()) {\n      await import('./stores/applicationStore.js');\n    }\n\n    const actor = getApplicationActor();\n    if (!actor) {\n      throw new Error('Application store actor not available');\n    }\n\n    sharedContextBridge = createSharedContextBridge({\n      actor: actor as any,\n      logger: (message, meta) => {\n        // Automatic logging will capture this\n      },\n    });\n\n    context.subscriptions.push(sharedContextBridge);\n    context.subscriptions.push(\n      new vscode.Disposable(() => {\n        sharedContextBridge = undefined;\n      })\n    );\n  }\n\n  return sharedContextBridge;\n}\n\nfunction getPendingAuthReminderMap(): Map<string, AuthReminderState> {\n  const actor = getApplicationActor();\n  if (!actor?.getSnapshot) {\n    return new Map();\n  }\n\n  try {\n    const snapshot = actor.getSnapshot?.();\n    const pending = snapshot?.context?.pendingAuthReminders;\n\n    if (pending instanceof Map) {\n      return new Map(pending as Map<string, AuthReminderState>);\n    }\n\n    if (Array.isArray(pending)) {\n      const normalized = pending\n        .filter((entry): entry is AuthReminderState =>\n          Boolean(\n            entry && typeof entry.connectionId === 'string' && entry.connectionId.trim().length > 0\n          )\n        )\n        .map((entry) => [entry.connectionId, entry] as const);\n\n      return new Map(normalized);\n    }\n  } catch (error) {\n    // Automatic logging will capture this\n  }\n\n  return new Map();\n}\n\n/*\nfunction getPendingAuthConnectionIds(): string[] {\n  const pending = getPendingAuthReminderMap();\n  const ordered: string[] = [];\n\n  for (const connection of connections) {\n    const reminder = pending.get(connection.id);\n    if (reminder?.status === 'pending') {\n      ordered.push(connection.id);\n    }\n  }\n\n  for (const [connectionId, reminder] of pending.entries()) {\n    if (reminder?.status === 'pending' && !ordered.includes(connectionId)) {\n      ordered.push(connectionId);\n    }\n  }\n\n  return ordered;\n}\n*/\n\n/*\nasync function cycleAuthSignIn(context: vscode.ExtensionContext): Promise<void> {\n  const pendingIds = getPendingAuthConnectionIds();\n\n  if (pendingIds.length === 0) {\n    if (activeConnectionId) {\n      await signInWithEntra(context, activeConnectionId);\n    } else {\n      await signInWithEntra(context);\n    }\n    return;\n  }\n\n  if (nextAuthConnectionIndex >= pendingIds.length) {\n    nextAuthConnectionIndex = 0;\n  }\n\n  const targetId = pendingIds[nextAuthConnectionIndex];\n  nextAuthConnectionIndex = (nextAuthConnectionIndex + 1) % pendingIds.length;\n\n  clearAuthReminder(targetId);\n  await signInWithEntra(context, targetId, { showSuccessMessage: true });\n}\n*/\n\nfunction describeConnection(connection: ProjectConnection): string {\n  if (connection.label && connection.label.trim().length > 0) {\n    return connection.label;\n  }\n\n  const parts: string[] = [];\n  if (connection.organization) parts.push(connection.organization);\n  if (connection.project) parts.push(connection.project);\n\n  if (parts.length > 0) {\n    return parts.join('/');\n  }\n\n  return connection.id;\n}\n\n// Global reference for reactive status bar updates\n// let updateAuthStatusBarRef: (() => Promise<void>) | null = null;\n\nexport async function updateAuthStatusBar(): Promise<void> {\n  if (!authStatusBarItem) return;\n\n  if (!activeConnectionId) {\n    // Always show a status item even without an active selection\n    try {\n      const actor = getApplicationActor();\n      const snapshot = actor?.getSnapshot?.();\n      const numConnections = Array.isArray(snapshot?.context?.connections)\n        ? snapshot!.context.connections.length\n        : 0;\n\n      if (numConnections === 0) {\n        authStatusBarItem.text = '$(plug) No connections';\n        authStatusBarItem.tooltip = 'Click to add an Azure DevOps connection';\n        authStatusBarItem.backgroundColor = undefined;\n        authStatusBarItem.command = 'azureDevOpsInt.setup';\n        authStatusBarItem.show();\n      } else {\n        authStatusBarItem.text = '$(plug) Select a connection';\n        authStatusBarItem.tooltip = 'Select an active connection';\n        authStatusBarItem.backgroundColor = undefined;\n        authStatusBarItem.command = 'azureDevOpsInt.setup';\n        authStatusBarItem.show();\n      }\n    } catch {\n      // Fallback: still show a minimal item\n      authStatusBarItem.text = '$(plug) Azure DevOps';\n      authStatusBarItem.tooltip = 'Azure DevOps Integration';\n      authStatusBarItem.backgroundColor = undefined;\n      authStatusBarItem.command = 'azureDevOpsInt.setup';\n      authStatusBarItem.show();\n    }\n    return;\n  }\n\n  // Try to get state from connectionStates first, but also check Praxis if not available\n  const state = connectionStates.get(activeConnectionId);\n  let authMethod: 'pat' | 'entra';\n  let connectionConfig: ProjectConnection | undefined;\n\n  // If state not in connectionStates, try to get from Praxis context\n  if (!state) {\n    try {\n      const actor = getApplicationActor();\n      const snapshot = actor?.getSnapshot?.();\n      const praxisConnectionStates = snapshot?.context?.connectionStates;\n      const praxisConnectionState = praxisConnectionStates?.get(activeConnectionId);\n\n      // Try to get connection config from Praxis context or connections list\n      const connections = snapshot?.context?.connections || [];\n      connectionConfig = connections.find((c: ProjectConnection) => c.id === activeConnectionId);\n\n      if (praxisConnectionState) {\n        authMethod =\n          praxisConnectionState.authMethod || praxisConnectionState.config?.authMethod || 'pat';\n      } else if (connectionConfig) {\n        authMethod = connectionConfig.authMethod || 'pat';\n      } else {\n        // No state found - hide status bar\n        authStatusBarItem.hide();\n        return;\n      }\n    } catch (error) {\n      // Praxis might not be available yet - hide status bar\n      authStatusBarItem.hide();\n      return;\n    }\n  } else {\n    // State found in connectionStates - use it\n    authMethod = state.authMethod || state.config?.authMethod || 'pat';\n    connectionConfig = state.config;\n  }\n\n  authStatusBarItem.command = {\n    title: 'Sign in with Microsoft Entra',\n    command: 'azureDevOpsInt.signInWithEntra',\n    arguments: [activeConnectionId],\n  };\n\n  try {\n    // Use connectionConfig (from state or Praxis) for connection label\n    if (!connectionConfig) {\n      // Fallback: try to get from connections list\n      try {\n        const actor = getApplicationActor();\n        const snapshot = actor?.getSnapshot?.();\n        const connections = snapshot?.context?.connections || [];\n        connectionConfig = connections.find((c: ProjectConnection) => c.id === activeConnectionId);\n      } catch {\n        // If we can't get config, hide status bar\n        authStatusBarItem.hide();\n        return;\n      }\n    }\n\n    if (!connectionConfig) {\n      authStatusBarItem.hide();\n      return;\n    }\n\n    const connectionLabel = describeConnection(connectionConfig);\n\n    // Get Praxis connection state to determine actual auth status\n    const actor = getApplicationActor();\n    const snapshot = actor?.getSnapshot?.();\n    const praxisConnectionStates = snapshot?.context?.connectionStates;\n    const praxisConnectionState = praxisConnectionStates?.get(activeConnectionId);\n\n    // Get the actual connection machine state (e.g., 'connected', 'auth_failed')\n    let connectionMachineState: string | null = null;\n    try {\n      const connectionService = ConnectionService.getInstance();\n      const manager = connectionService.getConnectionManager(activeConnectionId);\n      connectionMachineState = manager?.getConnectionState() || null;\n    } catch (error) {\n      // Connection service might not be available yet\n      // Automatic logging will capture this error\n    }\n\n    // Check multiple indicators of connection status\n    // BUT: Only consider connected if the state machine is actually in 'connected' state\n    const actualStateConnected = connectionMachineState === 'connected';\n    const hasClientAndProvider = Boolean(\n      praxisConnectionState?.client ||\n      praxisConnectionState?.provider ||\n      (state?.client && state?.provider)\n    );\n    const isConnected = actualStateConnected && hasClientAndProvider;\n\n    // Check for auth failure: state machine in failed states\n    const stateMachineAuthFailed =\n      connectionMachineState === 'auth_failed' ||\n      connectionMachineState === 'client_failed' ||\n      connectionMachineState === 'provider_failed' ||\n      connectionMachineState === 'connection_error';\n    // Remaining retries according to connection machine policy (retryCount < 3)\n    const remainingRetries =\n      (typeof praxisConnectionState?.retryCount === 'number'\n        ? praxisConnectionState.retryCount\n        : 0) < 3;\n\n    // Check if there's an active device code session for this connection\n    const hasActiveDeviceCode = Boolean(\n      snapshot?.context?.deviceCodeSession?.connectionId === activeConnectionId &&\n      snapshot?.context?.deviceCodeSession?.expiresAt > Date.now()\n    );\n\n    // Check if there's an active auth code flow session for this connection\n    const hasActiveAuthCodeFlow = Boolean(\n      snapshot?.context?.authCodeFlowSession?.connectionId === activeConnectionId &&\n      snapshot?.context?.authCodeFlowSession?.expiresAt > Date.now()\n    );\n\n    // Check if connection is in interactive_auth state (device code flow in progress)\n    const isInteractiveAuth =\n      connectionMachineState === 'interactive_auth' ||\n      connectionMachineState === 'checking_token' ||\n      connectionMachineState === 'authenticating';\n\n    // Check if connection is in a connecting/retrying state (not yet failed)\n    const isConnecting =\n      connectionMachineState === 'authenticating' ||\n      connectionMachineState === 'checking_token' ||\n      connectionMachineState === 'interactive_auth' ||\n      connectionMachineState === 'creating_client' ||\n      connectionMachineState === 'creating_provider' ||\n      praxisConnectionState?.reauthInProgress === true;\n\n    // Treat startup/disconnected and transient auth_failed-with-retries as connecting to prevent flicker\n    const isDisconnected =\n      !connectionMachineState ||\n      connectionMachineState === 'disconnected' ||\n      connectionMachineState === 'idle';\n    const treatAsConnecting =\n      !isConnected &&\n      (isConnecting || (stateMachineAuthFailed && remainingRetries) || isDisconnected);\n\n    // Automatic logging will capture status checks\n\n    // PRIORITY 1: Show connecting while connecting/retrying/startup\n    if (treatAsConnecting) {\n      if (authMethod === 'entra') {\n        authStatusBarItem.text = '$(sync~spin) Entra: Connecting...';\n        authStatusBarItem.tooltip = `Connecting to ${connectionLabel}...`;\n        authStatusBarItem.backgroundColor = new vscode.ThemeColor(\n          'statusBarItem.warningBackground'\n        );\n        authStatusBarItem.command = 'azureDevOpsInt.signInWithEntra';\n        authStatusBarItem.show();\n        return; // Connecting takes precedence\n      } else {\n        authStatusBarItem.text = '$(sync~spin) PAT: Connecting...';\n        authStatusBarItem.tooltip = `Connecting to ${connectionLabel}...`;\n        authStatusBarItem.backgroundColor = new vscode.ThemeColor(\n          'statusBarItem.warningBackground'\n        );\n        authStatusBarItem.command = 'azureDevOpsInt.setup';\n        authStatusBarItem.show();\n        return; // Connecting takes precedence\n      }\n    }\n\n    // PRIORITY 2: Device code / Auth code flow / interactive flow indicator\n    if (hasActiveAuthCodeFlow && authMethod === 'entra') {\n      // Show auth code flow in progress (Entra only)\n      const remainingMs = Math.max(\n        (snapshot?.context?.authCodeFlowSession?.expiresAt || Date.now()) - Date.now(),\n        0\n      );\n      const remainingMinutes = Math.ceil(remainingMs / 60000);\n      authStatusBarItem.text = '$(sync~spin) Entra: Signing In...';\n      authStatusBarItem.tooltip = `Authorization code flow in progress for ${connectionLabel}. Complete sign-in in browser (${remainingMinutes}m remaining).`;\n      authStatusBarItem.backgroundColor = new vscode.ThemeColor('statusBarItem.warningBackground');\n      authStatusBarItem.command = 'azureDevOpsInt.signInWithEntra';\n      authStatusBarItem.show();\n    } else if (hasActiveDeviceCode || (isInteractiveAuth && authMethod === 'entra')) {\n      // Show device code flow in progress (Entra only)\n      authStatusBarItem.text = '$(sync~spin) Entra: Device Code Active';\n      authStatusBarItem.tooltip = `Device code authentication in progress for ${connectionLabel}`;\n      authStatusBarItem.backgroundColor = new vscode.ThemeColor('statusBarItem.warningBackground');\n      authStatusBarItem.command = 'azureDevOpsInt.signInWithEntra';\n      authStatusBarItem.show();\n    } else if (isConnected && !hasActiveDeviceCode && !hasActiveAuthCodeFlow) {\n      // Show successful auth status (only if no auth failure)\n      if (authMethod === 'entra') {\n        authStatusBarItem.text = '$(pass) Entra: Connected';\n        authStatusBarItem.tooltip = `Microsoft Entra ID authentication active for ${connectionLabel}`;\n        authStatusBarItem.command = undefined; // No action needed when connected\n      } else {\n        authStatusBarItem.text = '$(key) PAT: Connected';\n        authStatusBarItem.tooltip = `Personal Access Token authentication active for ${connectionLabel}`;\n        authStatusBarItem.command = 'azureDevOpsInt.setup'; // Allow managing connections\n      }\n      authStatusBarItem.backgroundColor = undefined; // Clear warning background\n      authStatusBarItem.show();\n    } else {\n      // FINAL: Show failure or sign-in required only when no retries remain and not connecting\n      if (stateMachineAuthFailed && !remainingRetries) {\n        const authLabel = authMethod === 'entra' ? 'Entra' : 'PAT';\n        const errorMessage =\n          praxisConnectionState?.lastError ||\n          state?.lastError ||\n          (connectionMachineState === 'auth_failed' ? 'Authentication failed' : 'Connection error');\n        if (authMethod === 'entra') {\n          // Entra: present as Sign In Required (final state requiring user action)\n          authStatusBarItem.text = '$(warning) Entra: Sign In Required';\n          authStatusBarItem.tooltip = `${errorMessage}\\n\\nConnection: ${connectionLabel}\\nClick to sign in.`;\n          authStatusBarItem.command = 'azureDevOpsInt.signInWithEntra';\n          authStatusBarItem.backgroundColor = new vscode.ThemeColor(\n            'statusBarItem.warningBackground'\n          );\n          authStatusBarItem.show();\n        } else {\n          // PAT: show Auth Failed with manage link\n          authStatusBarItem.text = `$(error) ${authLabel}: Auth Failed`;\n          authStatusBarItem.tooltip = `${errorMessage}\\n\\nConnection: ${connectionLabel}\\nClick to manage connections.`;\n          authStatusBarItem.backgroundColor = new vscode.ThemeColor(\n            'statusBarItem.errorBackground'\n          );\n          authStatusBarItem.command = 'azureDevOpsInt.setup';\n          authStatusBarItem.show();\n        }\n      } else {\n        // Fallback: show Sign In Required only when idle without activity (e.g., PAT setup)\n        if (authMethod === 'entra') {\n          authStatusBarItem.text = '$(sync~spin) Entra: Connecting...';\n          authStatusBarItem.tooltip = `Connecting to ${connectionLabel}...`;\n          authStatusBarItem.backgroundColor = new vscode.ThemeColor(\n            'statusBarItem.warningBackground'\n          );\n          authStatusBarItem.command = 'azureDevOpsInt.signInWithEntra';\n          authStatusBarItem.show();\n        } else {\n          authStatusBarItem.text = '$(warning) PAT: Auth Required';\n          authStatusBarItem.tooltip = `Personal Access Token required for ${connectionLabel}. Click to manage connections.`;\n          authStatusBarItem.command = 'azureDevOpsInt.setup';\n          authStatusBarItem.backgroundColor = new vscode.ThemeColor(\n            'statusBarItem.warningBackground'\n          );\n          authStatusBarItem.show();\n        }\n      }\n    }\n  } catch (error) {\n    // Automatic logging will capture this error - activationLogger.error('[updateAuthStatusBar] Error updating auth status', { meta: error });\n    authStatusBarItem.hide();\n  }\n}\n\nfunction notifyConnectionsList(): void {\n  const actor = getApplicationActor();\n  const send = actor?.send;\n  if (!send) {\n    return;\n  }\n\n  send({\n    type: 'CONNECTIONS_LOADED',\n    connections: connections.slice(),\n  });\n\n  if (activeConnectionId) {\n    send({ type: 'CONNECTION_SELECTED', connectionId: activeConnectionId });\n  }\n}\n\n// function ensureAuthReminder(\n//   connectionId: string,\n//   reason: AuthReminderReason,\n//   options: { detail?: string } = {}\n// ): void {\n//   dispatchApplicationEvent({\n//     type: 'AUTH_REMINDER_REQUESTED',\n//     connectionId,\n//     reason,\n//     detail: options.detail,\n//   });\n// }\n\n/*\nfunction triggerAuthReminderSignIn(\n  connectionId: string,\n  reason: AuthReminderReason,\n  options: { detail?: string; force?: boolean; startInteractive?: boolean } = {}\n): void {\n  const state = connectionStates.get(connectionId);\n  if (!state) return;\n\n  const detail = options.detail;\n  const startInteractive = options.startInteractive === true;\n\n  if (!startInteractive || (state.authMethod ?? 'pat') !== 'entra') {\n    ensureAuthReminder(connectionId, reason, detail ? { detail } : {});\n    return;\n  }\n\n  const now = Date.now();\n  if (state.reauthInProgress) {\n    return;\n  }\n\n  if (\n    !options.force &&\n    state.lastInteractiveAuthAt &&\n    now - state.lastInteractiveAuthAt < INTERACTIVE_REAUTH_THROTTLE_MS\n  ) {\n    return;\n  }\n\n  state.reauthInProgress = true;\n  state.lastInteractiveAuthAt = now;\n  state.accessToken = undefined;\n  state.refreshFailureCount = 0;\n  state.refreshBackoffUntil = undefined;\n\n  const context = extensionContextRef;\n\n  (async () => {\n    try {\n      if (context) {\n        await signInWithEntra(context, connectionId, {\n          showSuccessMessage: false,\n          forceInteractive: true,\n        });\n      } else {\n        await vscode.commands.executeCommand('azureDevOpsInt.signInWithEntra', connectionId);\n      }\n    } catch (error) {\n      // Automatic logging will capture this error\n      ensureAuthReminder(connectionId, reason, detail ? { detail } : {});\n    } finally {\n      state.reauthInProgress = false;\n    }\n  })().catch((error) => {\n    // Automatic logging will capture this error\n    state.reauthInProgress = false;\n    ensureAuthReminder(connectionId, reason, detail ? { detail } : {});\n  });\n}\n*/\n\nfunction clearAuthReminder(connectionId: string | undefined): void {\n  if (!connectionId) {\n    return;\n  }\n\n  dispatchApplicationEvent({ type: 'AUTH_REMINDER_CLEARED', connectionId });\n\n  if (getPendingAuthReminderMap().size === 0) {\n    // nextAuthConnectionIndex = 0;\n  }\n}\n\nfunction normalizeQuery(value: unknown): string | undefined {\n  if (typeof value !== 'string') return undefined;\n  const trimmed = value.trim();\n  return trimmed.length > 0 ? trimmed : undefined;\n}\n\nfunction getStoredQueryForConnection(connectionId?: string | null, fallback?: string): string {\n  const resolved = fallback ?? getDefaultQuery(getConfig());\n  const base = resolved && resolved.trim().length > 0 ? resolved : DEFAULT_QUERY;\n  if (!connectionId) {\n    return base;\n  }\n  const stored = activeQueryByConnection.get(connectionId);\n  if (stored && stored.trim().length > 0) {\n    return stored;\n  }\n  // Attempt to load from persisted globalState if not hydrated yet\n  try {\n    const ctx = extensionContextRef;\n    const persisted = ctx?.globalState.get<Record<string, string>>(ACTIVE_QUERY_STATE_KEY) || {};\n    const persistedForConn =\n      typeof persisted[connectionId] === 'string' ? persisted[connectionId] : undefined;\n    const normalized = normalizeQuery(persistedForConn);\n    if (normalized) {\n      activeQueryByConnection.set(connectionId, normalized);\n      return normalized;\n    }\n  } catch {\n    // ignore persistence errors\n  }\n  activeQueryByConnection.set(connectionId, base);\n  return base;\n}\n\nfunction setStoredQueryForConnection(connectionId: string, query?: string): string {\n  const resolvedDefault = getDefaultQuery(getConfig());\n  const normalized = normalizeQuery(query) ?? resolvedDefault ?? DEFAULT_QUERY;\n  activeQueryByConnection.set(connectionId, normalized);\n  // Persist to globalState for cross-session retention (best-effort, non-blocking)\n  try {\n    const ctx = extensionContextRef;\n    if (ctx) {\n      const current = ctx.globalState.get<Record<string, string>>(ACTIVE_QUERY_STATE_KEY) || {};\n      const next = { ...current, [connectionId]: normalized };\n      void ctx.globalState.update(ACTIVE_QUERY_STATE_KEY, next);\n    }\n  } catch {\n    // ignore persistence errors\n  }\n  return normalized;\n}\n\n/*\nfunction getQueryForProvider(\n  targetProvider?: WorkItemsProvider,\n  connectionId?: string | null\n): string {\n  const cfg = getConfig();\n  const fallback = getDefaultQuery(cfg);\n  const providerConnectionId = connectionId\n    ? connectionId\n    : typeof targetProvider?.getConnectionId === 'function'\n      ? targetProvider.getConnectionId()\n      : undefined;\n  return getStoredQueryForConnection(providerConnectionId, fallback);\n}\n*/\n\n/*\nfunction setTimerConnectionFrom(connection: ProjectConnection | undefined) {\n  if (connection) {\n    timerConnectionInfo = {\n      id: connection.id,\n      label: getConnectionLabel(connection),\n      organization: connection.organization,\n      project: connection.project,\n    };\n  } else {\n    timerConnectionInfo = {};\n  }\n}\n*/\n\n/*\nfunction getActiveTimerConnectionLabel(): string | undefined {\n  const info = timerConnectionInfo;\n  if (!info) {\n    return undefined;\n  }\n\n  if (info.label && info.label.trim().length > 0) {\n    return info.label;\n  }\n\n  if (info.id) {\n    const byId = connections.find((connection) => connection.id === info.id);\n    if (byId) {\n      return getConnectionLabel(byId);\n    }\n  }\n\n  if (info.organization && info.project) {\n    const byCoordinates = connections.find(\n      (connection) =>\n        connection.organization === info.organization && connection.project === info.project\n    );\n    if (byCoordinates) {\n      return getConnectionLabel(byCoordinates);\n    }\n  }\n\n  return undefined;\n}\n*/\n\ntype EnsureActiveConnectionOptions = {\n  refresh?: boolean;\n  notify?: boolean;\n  interactive?: boolean;\n};\n\nasync function ensureActiveConnection(\n  context: vscode.ExtensionContext,\n  connectionId?: string,\n  options: EnsureActiveConnectionOptions = {}\n): Promise<ConnectionState | undefined> {\n  const prepared = await resolveActiveConnectionTarget(context, connectionId, options);\n  if (!prepared) {\n    return undefined;\n  }\n\n  const { connection } = prepared;\n\n  // CRITICAL: Check if this connection was recently signed out\n  // This prevents automatic reconnection after explicit sign-out\n  if (recentlySignedOutConnections.has(connection.id)) {\n    // Automatic logging will capture this\n    return undefined;\n  }\n  const connectionService = ConnectionService.getInstance();\n  connectionService.setContext(context);\n\n  const result = await connectionService.connect(connection, {\n    refresh: options.refresh,\n    interactive: options.interactive,\n  });\n\n  if (result.success && result.client && result.provider) {\n    const state = result.state as ConnectionState;\n    (state as any).id = connection.id;\n    state.config = connection;\n    state.authMethod = connection.authMethod || 'pat';\n\n    const settings = getConfig();\n    await finalizeConnectionSuccess(connection, state, options, settings);\n    return state;\n  }\n\n  // Automatic logging will capture this\n\n  if (options.notify !== false && result.error) {\n    const isAuthError =\n      result.error.includes('invalid_grant') ||\n      result.error.includes('interaction_required') ||\n      result.error.includes('sign_in_required') ||\n      result.error.includes('Entra ID token acquisition failed');\n\n    if (isAuthError) {\n      const message = `Authentication failed for ${connection.label || connection.id}: ${result.error}`;\n      vscode.window.showErrorMessage(message);\n    } else {\n      vscode.window.showErrorMessage(\n        `Connection failed for ${connection.label || connection.id}: ${result.error}`\n      );\n    }\n  }\n\n  return undefined;\n}\n\n// function getConnectionAdapterInstance(): ConnectionAdapter {\n//   if (!connectionAdapterInstance) {\n//     const manager = ConnectionService.getInstance();\n//     // The fallback function is no longer needed as we are fully on Praxis.\n//     connectionAdapterInstance = new ConnectionAdapter(manager, async () => undefined, true);\n//     connectionAdapterInstance.setUsePraxis(true);\n//   }\n//   return connectionAdapterInstance;\n// }\n\nasync function resolveActiveConnectionTarget(\n  context: vscode.ExtensionContext,\n  connectionId?: string,\n  options: EnsureActiveConnectionOptions = {}\n): Promise<{ connection: ProjectConnection; connectionId: string } | undefined> {\n  await ensureConnectionsInitialized(context);\n\n  // Use bridge reader to get connections - this ensures we get the latest state including temp connections\n  const availableConnections = (getLoadedConnections() as ProjectConnection[]) || connections;\n  const targetId = connectionId ?? activeConnectionId ?? availableConnections[0]?.id;\n  // Automatic logging will capture this\n\n  if (!targetId) {\n    if (options.notify !== false) {\n      notifyConnectionsList();\n    }\n    await vscode.commands.executeCommand('setContext', 'azureDevOpsInt.connected', false);\n    provider = undefined;\n    client = undefined;\n    return undefined;\n  }\n\n  if (targetId !== activeConnectionId) {\n    activeConnectionId = targetId;\n    await context.globalState.update(ACTIVE_CONNECTION_STATE_KEY, targetId);\n    if (options.notify !== false) {\n      notifyConnectionsList();\n    }\n  }\n\n  const connection = availableConnections.find((item) => item.id === targetId);\n  if (!connection) {\n    // Automatic logging will capture this warning - activationLogger.warn('Connection not found for id', { meta: { targetId } });\n    return undefined;\n  }\n\n  // Automatic logging will capture this\n\n  return { connection, connectionId: targetId };\n}\n\nfunction configureProviderForConnection(\n  connection: ProjectConnection,\n  state: ConnectionState\n): void {\n  if (!state.provider) {\n    return;\n  }\n\n  // Manual logging removed - use automatic logging\n  const branchSource = { id: connection.id, client: state.client };\n\n  if (typeof state.provider.updateClient === 'function' && state.client) {\n    state.provider.updateClient(state.client);\n  }\n\n  state.provider.setPostMessage?.((msg: unknown) => forwardProviderMessage(connection.id, msg));\n  // Logger removed - use automatic logging via StandardizedAutomaticLogger\n  // state.provider.setLogger?.(providerLogger);\n  state.provider.setTransformWorkItems?.(createBranchAwareTransform(branchSource));\n}\n\nasync function finalizeConnectionSuccess(\n  connection: ProjectConnection,\n  state: ConnectionState,\n  options: EnsureActiveConnectionOptions,\n  settings: vscode.WorkspaceConfiguration\n): Promise<ConnectionState> {\n  connectionStates.set(connection.id, state);\n  configureProviderForConnection(connection, state);\n\n  client = state.client;\n  provider = state.provider;\n\n  // setTimerConnectionFrom(connection);\n\n  await vscode.commands.executeCommand('setContext', 'azureDevOpsInt.connected', true);\n  await updateAuthStatusBar();\n\n  if (options.refresh !== false && state.provider) {\n    const fallbackQuery = getDefaultQuery(settings);\n    const selectedQuery = getStoredQueryForConnection(connection.id, fallbackQuery);\n\n    if (!initialRefreshedConnections.has(connection.id)) {\n      initialRefreshedConnections.add(connection.id);\n    }\n\n    // Automatic logging will capture this\n\n    state.provider.refresh(selectedQuery);\n  }\n\n  const hadReminder = getPendingAuthReminderMap().has(connection.id);\n  clearAuthReminder(connection.id);\n  if ((state.authMethod ?? 'pat') === 'entra' || hadReminder) {\n    dispatchApplicationEvent({ type: 'AUTHENTICATION_SUCCESS', connectionId: connection.id });\n  }\n\n  dispatchApplicationEvent({\n    type: 'CONNECTION_ESTABLISHED',\n    connectionId: connection.id,\n    connectionState: state,\n  });\n\n  return state;\n}\n\n/*\nfunction getClientForConnectionInfo(info?: TimerConnectionInfo): AzureDevOpsIntClient | undefined {\n  if (!info) {\n    return client;\n  }\n\n  if (info.id) {\n    const stateById = connectionStates.get(info.id);\n    if (stateById?.client) {\n      return stateById.client;\n    }\n  }\n\n  if (info.organization && info.project) {\n    for (const state of connectionStates.values()) {\n      if (\n        state.config.organization === info.organization &&\n        state.config.project === info.project &&\n        state.client\n      ) {\n        return state.client;\n      }\n    }\n  }\n\n  if (info.label) {\n    const byLabel = connections.find((connection) => getConnectionLabel(connection) === info.label);\n    if (byLabel) {\n      const stateByLabel = connectionStates.get(byLabel.id);\n      if (stateByLabel?.client) {\n        return stateByLabel.client;\n      }\n    }\n  }\n\n  if (activeConnectionId) {\n    const activeState = connectionStates.get(activeConnectionId);\n    if (activeState?.client) {\n      return activeState.client;\n    }\n  }\n\n  return client;\n}\n*/\n\nexport async function loadConnectionsFromConfig(\n  context: vscode.ExtensionContext\n): Promise<ProjectConnection[]> {\n  const settings = getConfig();\n  const rawConnections = settings.get<unknown[]>(CONNECTIONS_CONFIG_KEY) ?? [];\n\n  const legacyOrganization = String(settings.get<string>('organization') ?? '').trim();\n  const legacyProject = String(settings.get<string>('project') ?? '').trim();\n  const legacyTeam = String(settings.get<string>('team') ?? '').trim();\n\n  const legacyFallback =\n    legacyOrganization && legacyProject\n      ? {\n          organization: legacyOrganization,\n          project: legacyProject,\n          team: legacyTeam || undefined,\n          label: undefined,\n        }\n      : undefined;\n\n  const {\n    connections: normalized,\n    requiresSave,\n    summary,\n  } = normalizeConnections(rawConnections, legacyFallback);\n  connections = normalized;\n\n  if (requiresSave) {\n    try {\n      await settings.update(\n        CONNECTIONS_CONFIG_KEY,\n        normalized.map((entry) => ({ ...entry })),\n        vscode.ConfigurationTarget.Global\n      );\n      // Automatic logging will capture this\n    } catch (error) {\n      // Automatic logging will capture this warning - activationLogger.warn('[connections] Failed to save migrated connections', { meta: error });\n    }\n  }\n\n  // Migrate any existing global PAT into per-connection secret keys so\n  // credentials are always connection-scoped (no global PAT sharing).\n  if (connections.length > 0) {\n    try {\n      await migrateGlobalPATToConnections(context, connections);\n    } catch (error) {\n      // Automatic logging will capture this warning - activationLogger.warn('migrateGlobalPATToConnections failed', { meta: error });\n    }\n  }\n\n  // Automatic logging will capture this\n\n  const validIds = new Set(connections.map((item) => item.id));\n\n  for (const [id, state] of connectionStates.entries()) {\n    if (!validIds.has(id)) {\n      connectionStates.delete(id);\n      initialRefreshedConnections.delete(id);\n      clearConnectionCaches(id);\n    } else {\n      const updated = connections.find((item) => item.id === id);\n      if (updated) {\n        state.config = updated;\n      }\n    }\n  }\n\n  for (const key of Array.from(activeQueryByConnection.keys())) {\n    if (!validIds.has(key)) {\n      activeQueryByConnection.delete(key);\n    }\n  }\n\n  const persistedActive = context.globalState.get<string>(ACTIVE_CONNECTION_STATE_KEY);\n  const { activeConnectionId: resolvedActiveId, requiresPersistence } = resolveActiveConnectionId(\n    persistedActive,\n    connections\n  );\n\n  activeConnectionId = resolvedActiveId;\n\n  if (requiresPersistence) {\n    await context.globalState.update(ACTIVE_CONNECTION_STATE_KEY, resolvedActiveId);\n  }\n\n  // Set the readers for the bridge *after* connections are loaded\n  setLoadedConnectionsReader(() => connections);\n  setActiveConnectionIdReader(() => activeConnectionId);\n\n  // Initialize PAT retrieval bridge function\n  setGetSecretPAT(async (extensionContext: vscode.ExtensionContext, connectionId?: string) => {\n    if (!connectionId) {\n      return undefined;\n    }\n\n    // Find the connection to get its patKey\n    const connection = connections.find((c) => c.id === connectionId);\n    if (!connection || !connection.patKey) {\n      return undefined;\n    }\n\n    // Retrieve PAT from secrets using the connection's patKey\n    return await extensionContext.secrets.get(connection.patKey);\n  });\n\n  notifyConnectionsList();\n  return connections;\n}\n\n/*\nasync function saveConnectionsToConfig(\n  context: vscode.ExtensionContext,\n  nextConnections: ProjectConnection[]\n): Promise<void> {\n  const settings = getConfig();\n  connections = nextConnections;\n  const serialized = nextConnections.map((entry) => ({ ...entry }));\n  await settings.update(CONNECTIONS_CONFIG_KEY, serialized, vscode.ConfigurationTarget.Global);\n\n  const validIds = new Set(nextConnections.map((item) => item.id));\n  for (const [id, state] of connectionStates.entries()) {\n    if (!validIds.has(id)) {\n      connectionStates.delete(id);\n      initialRefreshedConnections.delete(id);\n      clearConnectionCaches(id);\n    } else {\n      const updated = nextConnections.find((item) => item.id === id);\n      if (updated) state.config = updated;\n    }\n  }\n\n  if (activeConnectionId && !validIds.has(activeConnectionId)) {\n    activeConnectionId = nextConnections[0]?.id;\n    await context.globalState.update(ACTIVE_CONNECTION_STATE_KEY, activeConnectionId);\n  }\n\n  notifyConnectionsList();\n}\n*/\n\nasync function ensureConnectionsInitialized(context: vscode.ExtensionContext) {\n  if (connections.length === 0) await loadConnectionsFromConfig(context);\n  return connections;\n}\n\nasync function showDeviceCodeNotification(session: {\n  connectionId: string;\n  userCode: string;\n  verificationUri: string;\n  expiresInSeconds?: number;\n}): Promise<void> {\n  const connection = connections.find((c) => c.id === session.connectionId);\n  const connectionLabel = connection ? describeConnection(connection) : 'Microsoft Entra ID';\n  const expiresMinutes = session.expiresInSeconds\n    ? Math.max(1, Math.floor(session.expiresInSeconds / 60))\n    : undefined;\n\n  const message =\n    `Sign in to ${connectionLabel} with Microsoft Entra ID.` +\n    `\\n\\nUse \u201CCopy Code\u201D to copy the code, \u201COpen Browser\u201D to launch the verification page, or \u201CCopy & Open\u201D to do both at once.` +\n    `\\n\\nGo to ${session.verificationUri} and enter code:\\n\\n${session.userCode}` +\n    (expiresMinutes\n      ? `\\n\\nCode expires in ${expiresMinutes} minute${expiresMinutes === 1 ? '' : 's'}.`\n      : '');\n\n  const copyAndOpen = 'Copy & Open';\n  const openBrowser = 'Open Browser';\n  const copyCode = 'Copy Code';\n\n  const action = await vscode.window.showInformationMessage(\n    message,\n    { modal: false },\n    copyAndOpen,\n    openBrowser,\n    copyCode\n  );\n\n  try {\n    if (action === 'Copy & Open') {\n      try {\n        await vscode.env.clipboard.writeText(session.userCode);\n      } catch (error) {\n        // Automatic logging will capture this warning\n      }\n      await vscode.env.openExternal(vscode.Uri.parse(session.verificationUri));\n      vscode.window.showInformationMessage(\n        `Device code ${session.userCode} copied to clipboard. Paste it into the browser to finish signing in.`\n      );\n      return;\n    }\n\n    if (action === 'Copy Code') {\n      await vscode.env.clipboard.writeText(session.userCode);\n      vscode.window.showInformationMessage('Device code copied to clipboard.');\n    }\n\n    if (action === 'Open Browser') {\n      try {\n        await vscode.env.clipboard.writeText(session.userCode);\n      } catch (error) {\n        // Automatic logging will capture this warning\n      }\n      await vscode.env.openExternal(vscode.Uri.parse(session.verificationUri));\n      vscode.window.showInformationMessage(\n        `Device code ${session.userCode} copied to clipboard. Paste it into the browser to finish signing in.`\n      );\n    }\n  } catch (error) {\n    // Automatic logging will capture this warning - activationLogger.warn('[EntraAuth] Device code notification failed', { meta: error });\n  }\n}\n\n/*\nfunction ensureTimer(context: vscode.ExtensionContext) {\n  if (timer) return timer;\n  const config = getConfig();\n  let pomodoroBreakTimeout: NodeJS.Timeout | undefined;\n  timer = new WorkItemTimer({\n    autoResumeOnActivity: config.get<boolean>('autoResumeOnActivity') ?? true,\n    inactivityTimeoutSec: config.get<number>('timerInactivityTimeout') ?? 300,\n    defaultElapsedLimitHours: config.get<number>('defaultElapsedLimitHours') ?? 3.5,\n    pomodoroEnabled: config.get<boolean>('pomodoroEnabled') ?? false,\n    breakPrompt: () => {\n      const snap = timer?.snapshot?.();\n      if (!snap || !snap.isPaused) return;\n      vscode.window\n        .showInformationMessage(\n          'Time for a Pomodoro break?',\n          { modal: true },\n          'Start 5\u2011min break',\n          'Skip'\n        )\n        .then((choice) => {\n          if (!choice || choice === 'Skip') return;\n          try {\n            timer?.pause();\n          } catch {\n            // ignore pause error\n          }\n          if (pomodoroBreakTimeout) {\n            try {\n              clearTimeout(pomodoroBreakTimeout);\n            } catch {\n              // ignore clear error\n            }\n            pomodoroBreakTimeout = undefined;\n          }\n          pomodoroBreakTimeout = setTimeout(\n            () => {\n              try {\n                timer?.resume();\n              } catch {\n                // ignore resume error\n              }\n              pomodoroBreakTimeout = undefined;\n            },\n            5 * 60 * 1000\n          );\n        })\n        .then(\n          () => {},\n          (error) => {\n            // Automatic logging will capture this error - activationLogger.error('[TIMER] Failed to show Pomodoro break dialog', { meta: error });\n          }\n        );\n    },\n    persist: (data: { state?: any; timeEntries?: any[]; updateLastSave?: boolean }) =>\n      persistTimer(context, data),\n    restorePersisted: () => restoreTimer(context),\n    onState: (s: any) => {\n      // Reactive Architecture: Timer state is managed by Praxis timerActor.\n      // Timer state updates are sent to webview via syncState message (not partial timerUpdate).\n      // This callback only updates VS Code context for command enablement.\n      updateTimerContext(s);\n    },\n    onInfo: (m: any) => { // Automatic logging will capture this },\n    onWarn: (m: any) => { // Automatic logging will capture this },\n    onError: (m: any) => { // Automatic logging will capture this },\n  });\n  timer.loadFromPersisted();\n  return timer;\n}\n*/\n\n/*\nfunction updateTimerContext(state: any) {\n  vscode.commands.executeCommand('setContext', 'azureDevOpsInt.timerActive', state?.isActive);\n  vscode.commands.executeCommand('setContext', 'azureDevOpsInt.timerPaused', state?.isPaused);\n}\n\nasync function persistTimer(\n  context: vscode.ExtensionContext,\n  data: { state?: any; timeEntries?: any[]; updateLastSave?: boolean }\n) {\n  if (data.state) await context.globalState.update(STATE_TIMER, data.state);\n  if (data.timeEntries) await context.globalState.update(STATE_TIME_ENTRIES, data.timeEntries);\n  if (data.updateLastSave) await context.globalState.update(STATE_LAST_SAVE, Date.now());\n}\n\nfunction restoreTimer(context: vscode.ExtensionContext): {\n  state: WorkItemTimerState | undefined;\n  timeEntries: TimeEntry[] | undefined;\n  lastSave: number | undefined;\n  connection: TimerConnectionInfo | undefined;\n} {\n  return {\n    state: context.globalState.get(STATE_TIMER),\n    timeEntries: context.globalState.get(STATE_TIME_ENTRIES),\n    lastSave: context.globalState.get(STATE_LAST_SAVE),\n    connection: context.globalState.get(STATE_TIMER_CONNECTION),\n  };\n}\n*/\n\n// Enable a minimal smoke-test mode for CI/integration tests to avoid heavy initialization\n// Primary signal: VSCODE_INTEGRATION_SMOKE=1\n// Fallback signal: VS Code test runner is present (extensionTestsPath arg) which indicates an integration test session.\nfunction isVSCodeTestRun(): boolean {\n  try {\n    return (process.argv || []).some(\n      (a) =>\n        typeof a === 'string' &&\n        (a.includes('--extensionTestsPath') || a.includes('integration-tests'))\n    );\n  } catch {\n    return false;\n  }\n}\nconst IS_SMOKE = process.env.VSCODE_INTEGRATION_SMOKE === '1' || isVSCodeTestRun();\n\nfunction getConfig() {\n  return vscode.workspace.getConfiguration(CONFIG_NS);\n}\n\ntype ConfigInspection<T> = {\n  key: string;\n  defaultValue?: T;\n  globalValue?: T;\n  workspaceValue?: T;\n  workspaceFolderValue?: T;\n  globalLanguageValue?: T;\n  workspaceLanguageValue?: T;\n  workspaceFolderLanguageValue?: T;\n};\n\n/*\ntype SendToWebviewOptions = {\n  panel?: vscode.WebviewView;\n  logger?: LoggerFn;\n};\n*/\n\n/*\ntype SendWorkItemsSnapshotOptions = Omit<PostWorkItemsSnapshotParams, 'panel' | 'logger'> &\n  SendToWebviewOptions;\n*/\n\nfunction dispatchProviderMessage(message: any): void {\n  const messageType = message?.type;\n\n  // Reactive Architecture: workItemsLoaded and workItemsError are handled via Praxis context updates.\n  // These messages dispatch to Praxis, which updates context, and syncState sends full state to webview.\n  // We no longer post these partial messages directly to webview.\n  if (messageType === 'workItemsLoaded') {\n    const items = Array.isArray(message.workItems) ? [...message.workItems] : [];\n    // Automatic logging will capture this\n\n    // Dispatch to Praxis - context will be updated and syncState will send full state to webview\n    dispatchApplicationEvent({\n      type: 'WORK_ITEMS_LOADED',\n      workItems: items,\n      connectionId: typeof message.connectionId === 'string' ? message.connectionId : undefined,\n      query: typeof message.query === 'string' ? message.query : undefined,\n      kanbanView: !!message.kanbanView,\n      types: Array.isArray(message.types) ? [...message.types] : undefined,\n    });\n\n    // Automatic logging will capture this\n\n    // CRITICAL: Force syncState to webview immediately after work items are loaded\n    // This ensures work items appear without requiring a manual refresh\n    setImmediate(() => {\n      if (panel?.webview) {\n        const appActor = getApplicationStoreActor();\n        if (appActor) {\n          let snapshot: any = undefined;\n\n          // Check if it's PraxisApplicationManager (has getApplicationState)\n          if (typeof (appActor as any).getApplicationState === 'function') {\n            const manager = appActor as any;\n            const state = manager.getApplicationState();\n            const context = manager.getContext();\n            snapshot = { value: state, context };\n          }\n          // Check if it's XState actor (has getSnapshot)\n          else if (typeof (appActor as any).getSnapshot === 'function') {\n            snapshot = (appActor as any).getSnapshot();\n          }\n\n          if (snapshot) {\n            const serializableState = {\n              praxisState: snapshot.value,\n              context: getSerializableContext(snapshot.context),\n              matches: {}, // Simplified matches for immediate sync\n            };\n\n            // Note: Deduplication handled in sendCurrentState() method\n            // This is a one-time sync after work items loaded, so we send it\n            // Automatic logging will capture this\n\n            panel.webview.postMessage({\n              type: 'syncState',\n              payload: serializableState,\n            });\n          }\n        }\n      }\n    });\n\n    return;\n  }\n\n  // workItemsError: Dispatch an authentication\n  if (messageType === 'workItemsError') {\n    // Automatic logging will capture this\n    try {\n      const errorText = String(message.error ?? '');\n      const connectionId =\n        typeof message.connectionId === 'string' ? message.connectionId : activeConnectionId;\n      if (connectionId) {\n        // If this looks like an authentication error (401 or contains 'Authentication failed'),\n        // notify the Praxis so UI (status bar/banner) can update deterministically.\n        const looksAuthFailure =\n          /\\b401\\b/.test(errorText) || /authentication failed/i.test(errorText);\n        if (looksAuthFailure) {\n          dispatchApplicationEvent({\n            type: 'AUTHENTICATION_FAILED',\n            connectionId,\n            error: errorText,\n          });\n        }\n      }\n    } catch {\n      // best-effort; ignore\n    }\n    return;\n  }\n\n  // Other messages are dropped as they are legacy/unused in the new architecture\n  // Automatic logging will capture this\n}\n\nexport function forwardProviderMessage(connectionId: string, message: unknown) {\n  // Forward provider messages directly, not wrapped in envelope\n  // This allows sendToWebview to recognize workItemsLoaded and other message types\n  // Automatic logging will capture this\n\n  if (message && typeof message === 'object' && 'type' in message) {\n    dispatchProviderMessage({\n      ...(message as any),\n      connectionId,\n    });\n  } else {\n    // Fallback for messages without type\n    dispatchProviderMessage({\n      type: 'providerMessage',\n      connectionId,\n      message,\n    });\n  }\n}\n\n/*\nfunction resolveSnapshotTypes(\n  providerRef: WorkItemsProvider | undefined,\n  explicit: string[] | undefined,\n  logger: LoggerFn | undefined\n): string[] | undefined {\n  if (Array.isArray(explicit)) {\n    return [...explicit];\n  }\n  if (!providerRef || typeof (providerRef as any).getWorkItemTypeOptions !== 'function') {\n    return undefined;\n  }\n  try {\n    const raw = (providerRef as any).getWorkItemTypeOptions();\n    return Array.isArray(raw) ? [...raw] : undefined;\n  } catch (error) {\n    logger?.(\n      '[sendWorkItemsSnapshot] failed to read provider type options',\n      error instanceof Error ? error.message : error\n    );\n    return undefined;\n  }\n}\n\nfunction resolveBranchContextPayload(\n  connectionId: string | undefined,\n  explicit: PostWorkItemsSnapshotParams['branchContext']\n): PostWorkItemsSnapshotParams['branchContext'] {\n  if (explicit !== undefined) {\n    return explicit;\n  }\n  if (!connectionId) {\n    return null;\n  }\n  const enrichment = getBranchEnrichmentState(connectionId);\n  return enrichment?.context ?? null;\n}\n\nfunction enrichWorkItems(\n  items: any[],\n  connectionId: string | undefined,\n  branchContext: PostWorkItemsSnapshotParams['branchContext']\n): any[] {\n  if (!Array.isArray(items) || items.length === 0) {\n    return [];\n  }\n  return items.map((item) => ({ ...item, connectionId, branchContext }));\n}\n*/\n\n/*\nfunction sendWorkItemsSnapshot(options: SendWorkItemsSnapshotOptions): void {\n  const connectionId = options.connectionId ?? activeConnectionId;\n  const items = Array.isArray(options.items) ? options.items : [];\n  const branchContext = resolveBranchContextPayload(connectionId, options.branchContext);\n  const types = resolveSnapshotTypes(options.provider, options.types, verbose);\n\n  // Reactive Architecture: Dispatch directly to Praxis instead of using sendToWebview.\n  // Praxis will update context and syncState will send full state to webview.\n  const enrichedWorkItems = enrichWorkItems(items, connectionId, branchContext);\n  dispatchApplicationEvent({\n    type: 'WORK_ITEMS_LOADED',\n    workItems: enrichedWorkItems,\n    connectionId,\n    query: options.query,\n    kanbanView: !!options.kanbanView,\n    types,\n  });\n}\n*/\n\nfunction hasConfigOverride<T>(metadata: ConfigInspection<T> | undefined): boolean {\n  if (!metadata) return false;\n  const overrideValues = [\n    metadata.globalValue,\n    metadata.workspaceValue,\n    metadata.workspaceFolderValue,\n    metadata.globalLanguageValue,\n    metadata.workspaceLanguageValue,\n    metadata.workspaceFolderLanguageValue,\n  ];\n  return overrideValues.some((value) => value !== undefined);\n}\n\nexport function resolveDefaultQuery(_config: vscode.WorkspaceConfiguration): string {\n  const getValue = (key: string): string | undefined => {\n    try {\n      const raw = _config?.get<string | undefined>(key);\n      if (typeof raw !== 'string') return undefined;\n      const trimmed = raw.trim();\n      return trimmed.length > 0 ? trimmed : undefined;\n    } catch {\n      return undefined;\n    }\n  };\n\n  const explicitDefault = getValue('defaultQuery');\n  if (explicitDefault) return explicitDefault;\n\n  const workItemQuery = getValue('workItemQuery');\n  if (workItemQuery) {\n    const inspectFn =\n      typeof _config?.inspect === 'function' ? _config.inspect.bind(_config) : undefined;\n    if (!inspectFn) return workItemQuery;\n    try {\n      const metadata = (inspectFn as any)('workItemQuery');\n      if (hasConfigOverride(metadata)) return workItemQuery;\n    } catch {\n      // If inspect fails, assume the user intentionally set a custom query to avoid breaking legacy behavior.\n      return workItemQuery;\n    }\n  }\n\n  return DEFAULT_QUERY;\n}\n\nfunction getDefaultQuery(config?: vscode.WorkspaceConfiguration): string {\n  const target = config ?? getConfig();\n  return resolveDefaultQuery(target);\n}\n\n/*\nasync function setOpenAIApiKey(context: vscode.ExtensionContext) {\n  const apiKey = await vscode.window.showInputBox({\n    prompt: 'Enter your OpenAI API Key',\n    password: true,\n  });\n  if (apiKey) {\n    // await context.secrets.store(OPENAI_SECRET_KEY, apiKey);\n    vscode.window.showInformationMessage('OpenAI API Key saved successfully.');\n    // openAiClient = new OpenAI({ apiKey });\n  }\n}\n\nfunction getExtensionVersion(context: vscode.ExtensionContext): string {\n  // if (cachedExtensionVersion) return cachedExtensionVersion;\n  try {\n    const pkgPath = path.join(context.extensionPath, 'package.json');\n    const pkgRaw = fs.readFileSync(pkgPath, 'utf8');\n    const pkg = JSON.parse(pkgRaw);\n    // cachedExtensionVersion = String(pkg.version || 'dev');\n    return String(pkg.version || 'dev');\n  } catch {\n    // Swallow errors and fall back to 'dev'\n    // cachedExtensionVersion = 'dev';\n    return 'dev';\n  }\n  // return cachedExtensionVersion;\n}\nasync function migrateLegacyConfigIfNeeded() {\n  try {\n    const legacy = vscode.workspace.getConfiguration(LEGACY_CONFIG_NS);\n    const target = getConfig();\n    const legacyOrg = legacy.get<string>('organization');\n    const legacyProj = legacy.get<string>('project');\n    if (legacyOrg && !target.get('organization'))\n      await target.update('organization', legacyOrg, vscode.ConfigurationTarget.Global);\n    if (legacyProj && !target.get('project'))\n      await target.update('project', legacyProj, vscode.ConfigurationTarget.Global);\n  } catch (e) {\n    // Automatic logging will capture this warning - activationLogger.warn('migrateLegacyConfigIfNeeded failed', { meta: e });\n  }\n}\n*/\n\n/**\n * Apply startup patches to fix user settings and configuration issues.\n * This system automatically resolves problems without requiring manual user intervention.\n *\n * Each patch has a version identifier to ensure it only runs once per user.\n * Add new patches here for future bug fixes that need to modify user settings.\n *\n * @param context VS Code extension context for accessing settings and state\n */\nasync function applyStartupPatches(context: vscode.ExtensionContext): Promise<void> {\n  try {\n    const patchState = context.globalState;\n    const PATCH_VERSION_KEY = 'azureDevOpsInt.appliedPatches';\n    const appliedPatches = patchState.get<string[]>(PATCH_VERSION_KEY, []);\n\n    // Patch 1.0.0-clientid-removal: Remove clientId from connection configurations\n    // This fixes authentication issues caused by storing incorrect client IDs per connection\n    if (!appliedPatches.includes('1.0.0-clientid-removal')) {\n      await applyClientIdRemovalPatch();\n      appliedPatches.push('1.0.0-clientid-removal');\n      await patchState.update(PATCH_VERSION_KEY, appliedPatches);\n      // Automatic logging will capture this\n    }\n\n    // Future patches can be added here following the same pattern:\n    // if (!appliedPatches.includes('1.1.0-some-other-fix')) {\n    //   await applySomeOtherPatch();\n    //   appliedPatches.push('1.1.0-some-other-fix');\n    //   await patchState.update(PATCH_VERSION_KEY, appliedPatches);\n    //   console.log('[azureDevOpsInt] Applied patch: 1.1.0-some-other-fix');\n    // }\n  } catch (error) {\n    // Automatic logging will capture this warning - activationLogger.warn('Failed to apply startup patches', { meta: error });\n    // Don't fail activation if patches fail - log and continue\n  }\n}\n\n/**\n * Patch to remove clientId from connection configurations.\n *\n * PROBLEM: Earlier versions allowed users to configure clientId per connection,\n * which caused authentication failures when users stored incorrect client IDs.\n *\n * SOLUTION: Remove all clientId fields from stored connections. The extension\n * now hardcodes the correct Azure DevOps client ID (872cd9fa-d31f-45e0-9eab-6e460a02d1f1)\n * in the authentication code, preventing user configuration errors.\n */\nasync function applyClientIdRemovalPatch(): Promise<void> {\n  const config = vscode.workspace.getConfiguration('azureDevOpsIntegration');\n  const connections = config.get<ProjectConnection[]>('connections', []);\n\n  let patchedCount = 0;\n  const patchedConnections = connections.map((conn) => {\n    if ('clientId' in conn) {\n      patchedCount++;\n      const { clientId, ...connWithoutClientId } = conn as any;\n      return connWithoutClientId;\n    }\n    return conn;\n  });\n\n  if (patchedCount > 0) {\n    await config.update('connections', patchedConnections, vscode.ConfigurationTarget.Global);\n    // Automatic logging will capture this\n  }\n}\n\nfunction getNonce() {\n  let text = '';\n  const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  for (let i = 0; i < 32; i++) {\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\n  }\n  return text;\n}\n\nexport async function activate(context: vscode.ExtensionContext) {\n  // Store reference to our rejection handler for proper cleanup\n  rejectionHandler = (reason: any, promise: Promise<any>) => {\n    // Only handle rejections that originate from our extension\n    const isFromOurExtension =\n      reason &&\n      typeof reason === 'object' &&\n      'stack' in reason &&\n      typeof reason.stack === 'string' &&\n      (reason.stack.includes('azuredevops-integration-extension') ||\n        reason.stack.includes('azureDevOpsInt') ||\n        reason.stack.includes('activation.ts') ||\n        reason.stack.includes('src\\\\praxis\\\\') ||\n        reason.stack.includes('src/praxis/'));\n\n    // Skip rejections from other extensions\n    if (!isFromOurExtension) {\n      return;\n    }\n\n    // Suppress cancellation errors which are normal during VS Code shutdown\n    if (reason && typeof reason === 'object') {\n      // Check for cancellation by name, message, or stack trace content\n      const isCancellation =\n        ('name' in reason && reason.name === 'Canceled') ||\n        ('message' in reason && reason.message === 'Canceled') ||\n        (reason.toString && reason.toString().includes('Canceled')) ||\n        ('stack' in reason &&\n          typeof reason.stack === 'string' &&\n          reason.stack.includes('Canceled'));\n\n      if (isCancellation) {\n        // Automatic logging will capture this\n        return;\n      }\n    }\n    // Try to extract meaningful error information\n    let errorInfo: any = reason;\n    if (reason && typeof reason === 'object') {\n      errorInfo = {\n        message: reason.message || reason.toString(),\n        name: reason.name,\n        stack: reason.stack,\n        code: reason.code,\n        errorCode: reason.errorCode,\n        ...reason,\n      };\n    } else if (reason !== undefined && reason !== null) {\n      errorInfo = { value: String(reason) };\n    }\n\n    // Automatic logging will capture this error\n  };\n\n  // Add global unhandled promise rejection handler\n  process.on('unhandledRejection', rejectionHandler);\n\n  // Add global uncaught exception handler\n  process.on('uncaughtException', (error) => {\n    // Automatic logging will capture this error - activationLogger.error('Uncaught Exception', { meta: error });\n  });\n\n  extensionContextRef = context;\n  setExtensionContextRefBridge(context);\n  ConnectionService.getInstance().setContext(context);\n\n  // Hydrate persisted per-connection query selections (if present)\n  try {\n    const persistedQueries =\n      context.globalState.get<Record<string, string>>(ACTIVE_QUERY_STATE_KEY) || {};\n    for (const [connId, q] of Object.entries(persistedQueries)) {\n      if (typeof connId === 'string' && typeof q === 'string' && q.trim().length > 0) {\n        activeQueryByConnection.set(connId, q.trim());\n      }\n    }\n  } catch {\n    // Non-fatal: persistence is best-effort\n  }\n\n  // Apply startup patches to fix user settings and configuration issues\n  await applyStartupPatches(context);\n\n  // In smoke mode (integration tests), minimize activation work to avoid any potential stalls.\n  if (IS_SMOKE) {\n    try {\n      vscode.commands.executeCommand('setContext', 'azureDevOpsInt.connected', false).then(\n        () => {},\n        () => {}\n      );\n    } catch {\n      /* ignore */\n    }\n    // Do not register views/commands or initialize any domain objects in smoke mode.\n    return undefined;\n  }\n  const cfg = getConfig();\n  if (cfg.get<boolean>('debugLogging')) {\n    const channel =\n      getOutputChannel() ?? vscode.window.createOutputChannel('Azure DevOps Integration');\n    setOutputChannel(channel);\n    // Use standardized logger format: [azuredevops-integration-extension][ext][activation][activation][enableDebugLogging]\n    standardizedLogger.info(\n      'activation',\n      'activation',\n      'enableDebugLogging',\n      'Debug logging enabled'\n    );\n    // Bridge console logging to Output Channel for better debugging\n    bridgeConsoleToOutputChannel();\n  }\n  // Status bar (hidden until connected or timer active)\n  // Use compatibility signature (alignment, priority) to avoid VS Code API version issues\n  statusBarItem = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left, 100);\n  statusBarItem.command = 'azureDevOpsInt.stopTimer';\n  context.subscriptions.push(statusBarItem);\n\n  // Auth status bar item (shows Entra ID token status)\n  // Use compatibility signature (alignment, priority) to avoid VS Code API version issues\n  authStatusBarItem = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Left, 99);\n  authStatusBarItem.command = 'azureDevOpsInt.signInWithEntra';\n  context.subscriptions.push(authStatusBarItem);\n  // Show a minimal default immediately; updateAuthStatusBar will refine it\n  authStatusBarItem.text = '$(plug) Azure DevOps';\n  authStatusBarItem.tooltip = 'Azure DevOps Integration';\n  authStatusBarItem.backgroundColor = undefined;\n  authStatusBarItem.command = 'azureDevOpsInt.setup';\n  authStatusBarItem.show();\n\n  // Set global reference for reactive status bar updates\n  // updateAuthStatusBarRef = updateAuthStatusBar;\n  (globalThis as any).__updateAuthStatusBar = updateAuthStatusBar;\n\n  // Global map to store pending auth code flow providers by connection ID\n  // This allows the URI handler to route redirects to the correct provider\n  const pendingAuthProviders = new Map<string, any>();\n  (globalThis as any).__pendingAuthProviders = pendingAuthProviders;\n\n  // Register URI handler for authorization code flow\n  const uriHandler = vscode.window.registerUriHandler({\n    handleUri: async (uri: vscode.Uri) => {\n      try {\n        // Only handle our custom scheme\n        if (uri.scheme !== 'vscode-azuredevops-int') {\n          return;\n        }\n\n        // Handle auth callback\n        if (uri.path === '/auth/callback') {\n          await handleAuthRedirect(uri, context, pendingAuthProviders);\n        }\n      } catch (error: any) {\n        // Automatic logging will capture this error - activationLogger.error(`URI handler error: ${error.message}`, { meta: error });\n        vscode.window.showErrorMessage(`Authentication error: ${error.message}`);\n      }\n    },\n  });\n  context.subscriptions.push(uriHandler);\n\n  // const authenticationProviderOptions: vscode.AuthenticationProviderOptions & {\n  //   supportsAccountManagement?: boolean;\n  // } = {\n  //   supportsMultipleAccounts: true,\n  //   supportsAccountManagement: true,\n  // };\n  // LEGACY AUTH REMOVED - Authentication provider registration replaced by Praxis authentication\n\n  // Ensure applicationStore is initialized before registering webview provider\n  // This prevents race conditions where the webview panel resolves before the Praxis actor is available\n  // Automatic logging will capture this\n  await ensureSharedContextBridge(context);\n  // Automatic logging will capture this\n\n  // Register the work items webview view resolver (guard against duplicate registration)\n  if (!viewProviderRegistered) {\n    // Automatic logging will capture this\n    context.subscriptions.push(\n      vscode.window.registerWebviewViewProvider(\n        'azureDevOpsWorkItems',\n        new AzureDevOpsIntViewProvider(context),\n        { webviewOptions: { retainContextWhenHidden: true } }\n      )\n    );\n    viewProviderRegistered = true;\n  }\n  // Register trace commands for full replay capability\n  registerTraceCommands(context);\n\n  // Register quick debug commands for instant troubleshooting\n  registerQuickDebugCommands(context);\n  \n  // Register history debug commands for testing and debugging\n  registerHistoryDebugCommands(context);\n  \n  // Register test generator commands\n  registerTestGeneratorCommands(context);\n  // Automatic logging will capture this\n\n  // Register output channel reader for programmatic log access\n  import('./commands/outputChannelReader.js')\n    .then(({ registerOutputChannelReader }) => {\n      registerOutputChannelReader(context);\n      // Automatic logging will capture this\n    })\n    .catch((error) => {\n      // Automatic logging will capture this error\n    });\n\n  // AUTO-START TRACING AND SHOW OUTPUT FOR DEBUGGING\n  // Automatic logging will capture this\n\n  // Import tracing modules\n  import('./logging/TraceLogger.js')\n    .then(({ startTraceSession }) => {\n      try {\n        const sessionId = startTraceSession('Extension Activation - Auto Debug Session');\n        // Automatic logging will capture this\n\n        // Show the output channel immediately for visibility\n        import('./logging/ComponentLogger.js')\n          .then(({ componentLogger, Component }) => {\n            componentLogger.showOutputChannel();\n            // Automatic logging will capture this\n\n            // Log activation start\n            componentLogger.info(Component.APPLICATION, 'Extension activation started', {\n              component: Component.APPLICATION,\n              event: 'ACTIVATE',\n              state: 'activating',\n            });\n          })\n          .catch((error) => {\n            // Automatic logging will capture this error\n          });\n      } catch (error) {\n        // Automatic logging will capture this error - activationLogger.error('[ACTIVATION] Failed to start tracing', { meta: error });\n      }\n    })\n    .catch((error) => {\n      // Automatic logging will capture this error - activationLogger.error('[ACTIVATION] Failed to import tracing modules', { meta: error });\n    });\n\n  // Import LiveCanvasBridge to enable the WebSocket connection to the live canvas\n  import('./logging/LiveCanvasBridge.js')\n    .then(({ LiveCanvasBridge }) => {\n      try {\n        // Initialize LiveCanvasBridge\n        const bridge = new LiveCanvasBridge(dispatchApplicationEvent);\n        context.subscriptions.push({ dispose: () => bridge.dispose() });\n        // Automatic logging will capture this\n      } catch (error) {\n        // Automatic logging will capture this error\n      }\n    })\n    .catch((error) => {\n      // Automatic logging will capture this error - activationLogger.error('[ACTIVATION] Failed to import LiveCanvasBridge', { meta: error });\n    });\n\n  // Bridge setup\n  // const praxisSetupService = new PraxisSetupService(context);\n\n  const appActor = getApplicationStoreActor();\n\n  // Activate the application with extension context\n  if (appActor && typeof (appActor as any).send === 'function') {\n    // Automatic logging will capture this\n    (appActor as any).send({ type: 'ACTIVATE', context });\n\n    // Drive the activation process\n    loadConnectionsFromConfig(context)\n      .then((loadedConnections) => {\n        // Automatic logging will capture this\n        (appActor as any).send({ type: 'CONNECTIONS_LOADED', connections: loadedConnections });\n\n        if (activeConnectionId) {\n          // Automatic logging will capture this\n          (appActor as any).send({ type: 'CONNECTION_SELECTED', connectionId: activeConnectionId });\n\n          // Proactively ensure connection on startup\n          ensureActiveConnection(context, activeConnectionId, {\n            refresh: true,\n            notify: true, // Ensure errors are shown on startup\n          }).catch((err) => {\n            // Automatic logging will capture this\n          });\n        }\n\n        // Automatic logging will capture this\n        (appActor as any).send({ type: 'ACTIVATION_COMPLETE' });\n      })\n      .catch((error) => {\n        // Automatic logging will capture this error\n        (appActor as any).send({ type: 'ERROR', error });\n      });\n  }\n\n  // Track previous device code session to detect changes\n  let previousDeviceCodeSession: { connectionId: string; expiresAt: number } | undefined =\n    undefined;\n  let lastDeviceCodeNotificationKey: string | undefined = undefined;\n\n  if (appActor && typeof (appActor as any).subscribe === 'function') {\n    (appActor as any).subscribe((snapshot: any) => {\n      // CRITICAL: Update global activeConnectionId when application context changes\n      // This ensures status bar and refresh use the correct connection\n      const praxisActiveConnectionId = snapshot?.context?.activeConnectionId;\n      if (praxisActiveConnectionId !== activeConnectionId) {\n        const previousActiveConnectionId = activeConnectionId;\n        activeConnectionId = praxisActiveConnectionId;\n        // Automatic logging will capture this\n\n        // Update status bar immediately when active connection changes\n        setImmediate(() => {\n          updateAuthStatusBar().catch((err) => {\n            // Automatic logging will capture this\n          });\n        });\n\n        // If the newly active connection is not connected, proactively ensure and, if needed, prompt\n        // BUT: Skip if this connection was recently signed out (prevents automatic reconnection after sign out)\n        try {\n          if (extensionContextRef && activeConnectionId) {\n            // Check if this connection was recently signed out\n            if (recentlySignedOutConnections.has(activeConnectionId)) {\n              // Automatic logging will capture this\n            } else {\n              const connectionService = ConnectionService.getInstance();\n              const manager = connectionService.getConnectionManager(activeConnectionId);\n              const stateValue = manager?.getConnectionState() || null;\n              const targetState = connectionStates.get(activeConnectionId);\n              const hasProvider = !!targetState?.provider;\n              const isConnected =\n                stateValue === 'connected' || (targetState && targetState.isConnected === true);\n              if (!hasProvider || !isConnected) {\n                // Attempt to establish connection; allow interactive auth so user is prompted if required\n                ensureActiveConnection(extensionContextRef, activeConnectionId, {\n                  refresh: true,\n                  interactive: true,\n                }).catch((err) => {\n                  // Automatic logging will capture this\n                });\n              }\n            }\n          }\n        } catch (err) {\n          // Automatic logging will capture this\n        }\n      }\n\n      // Check if device code session changed and update status bar\n      const currentDeviceCodeSession = snapshot?.context?.deviceCodeSession;\n      const deviceCodeSessionChanged =\n        currentDeviceCodeSession?.connectionId !== previousDeviceCodeSession?.connectionId ||\n        currentDeviceCodeSession?.expiresAt !== previousDeviceCodeSession?.expiresAt;\n\n      if (deviceCodeSessionChanged && currentDeviceCodeSession) {\n        // Device code session started or changed - update status bar\n        setImmediate(() => {\n          updateAuthStatusBar().catch((err) => {\n            dispatchApplicationEvent(\n              ApplicationErrorEvent.create({\n                error: `Failed to update status bar after device code session change: ${err instanceof Error ? err.message : String(err)}`,\n              })\n            );\n          });\n        });\n\n        const sessionKey = `${currentDeviceCodeSession.connectionId}:${currentDeviceCodeSession.expiresAt}`;\n        if (sessionKey !== lastDeviceCodeNotificationKey) {\n          lastDeviceCodeNotificationKey = sessionKey;\n          setImmediate(() => {\n            showDeviceCodeNotification({\n              connectionId: currentDeviceCodeSession.connectionId,\n              userCode: currentDeviceCodeSession.userCode,\n              verificationUri: currentDeviceCodeSession.verificationUri,\n              expiresInSeconds: currentDeviceCodeSession.expiresInSeconds,\n            }).catch((err) => {\n              // Automatic logging will capture this warning\n            });\n          });\n        }\n      }\n\n      previousDeviceCodeSession = currentDeviceCodeSession\n        ? {\n            connectionId: currentDeviceCodeSession.connectionId,\n            expiresAt: currentDeviceCodeSession.expiresAt,\n          }\n        : undefined;\n      if (!currentDeviceCodeSession) {\n        lastDeviceCodeNotificationKey = undefined;\n      }\n\n      if (panel && snapshot) {\n        // Pre-compute all state matches since snapshot.matches() doesn't survive JSON serialization\n\n        // Helper for robust matching (copied from AzureDevOpsIntViewProvider)\n        const state = snapshot.value;\n        const matchesFn = (stateValue: any) => {\n          if (typeof stateValue === 'string') {\n            return (\n              state === stateValue || (typeof state === 'string' && state.includes(stateValue))\n            );\n          }\n          if (typeof stateValue === 'object' && stateValue !== null) {\n            const key = Object.keys(stateValue)[0];\n            const subValue = stateValue[key];\n            if (typeof state === 'string') {\n              if (state === key) return false;\n              if (typeof subValue === 'string') {\n                return state === `${key}.${subValue}` || state.startsWith(`${key}.${subValue}.`);\n              }\n              return false;\n            }\n            if (typeof state === 'object' && state !== null) {\n              const stateSubValue = state[key];\n              if (stateSubValue === subValue) return true;\n              if (\n                typeof subValue === 'string' &&\n                typeof stateSubValue === 'object' &&\n                stateSubValue !== null\n              ) {\n                return Object.keys(stateSubValue)[0] === subValue;\n              }\n              return false;\n            }\n          }\n          return false;\n        };\n\n        const matches = {\n          // Top-level states\n          inactive: matchesFn('inactive'),\n          activating: matchesFn('activating'),\n          activation_failed: matchesFn('activation_failed'),\n          active: matchesFn('active'),\n          error_recovery: matchesFn('error_recovery'),\n          deactivating: matchesFn('deactivating'),\n\n          // Active sub-states\n          'active.setup': matchesFn({ active: 'setup' }),\n          'active.setup.loading_connections': matchesFn({\n            active: { setup: 'loading_connections' },\n          }),\n          'active.setup.waiting_for_panel': matchesFn({\n            active: { setup: 'waiting_for_panel' },\n          }),\n          'active.setup.panel_ready': matchesFn({ active: { setup: 'panel_ready' } }),\n          'active.setup.setup_error': matchesFn({ active: { setup: 'setup_error' } }),\n\n          // Active.ready sub-states\n          'active.ready': matchesFn({ active: 'ready' }),\n          'active.ready.idle': matchesFn({ active: { ready: 'idle' } }),\n          'active.ready.loadingData': matchesFn({ active: { ready: 'loadingData' } }),\n          'active.ready.managingConnections': matchesFn({\n            active: { ready: 'managingConnections' },\n          }),\n          'active.ready.error': matchesFn({ active: { ready: 'error' } }),\n        };\n\n        const serializableState = {\n          praxisState: snapshot.value,\n          context: getSerializableContext(snapshot.context),\n          matches, // Include pre-computed state matches\n        };\n\n        // Deduplicate: only send if state changed (Priority 2: Reduce redundant syncs)\n        const signature = JSON.stringify(serializableState);\n        if (signature === lastStateSignature) {\n          return; // No change, skip sending duplicate state\n        }\n        lastStateSignature = signature;\n\n        // Reduce excessive logging - only log state changes if debug logging is enabled\n        if (shouldLogDebug()) {\n          // Automatic logging will capture this\n        }\n\n        panel.webview.postMessage({\n          type: 'syncState',\n          payload: serializableState,\n        });\n\n        // If activeQuery changed, persist and trigger provider refresh (for the correct connection)\n        try {\n          const snapCtx = snapshot.context;\n          const newQuery: string | undefined = snapCtx?.activeQuery;\n          const newConn: string | undefined = snapCtx?.activeConnectionId;\n          if (newConn && typeof newQuery === 'string') {\n            const changed =\n              newConn !== lastQueriedActiveConnectionId || newQuery !== lastQueriedQuery;\n            if (changed) {\n              // Persist query in per-connection store\n              setStoredQueryForConnection(newConn, newQuery);\n              // Ensure provider for the TARGET connection, not the global provider\n              const targetState = connectionStates.get(newConn);\n              const targetProvider = targetState?.provider;\n              if (targetProvider && typeof targetProvider.refresh === 'function') {\n                try {\n                  targetProvider.refresh(newQuery);\n                } catch (e) {\n                  // Automatic logging will capture this\n                }\n              } else if (extensionContextRef) {\n                // No provider yet - ensure connection (may trigger interactive auth if required)\n                ensureActiveConnection(extensionContextRef, newConn, { refresh: true }).catch(\n                  (err) => {\n                    // Automatic logging will capture this\n                  }\n                );\n              }\n              lastQueriedActiveConnectionId = newConn;\n              lastQueriedQuery = newQuery;\n            }\n          }\n        } catch (e) {\n          // Automatic logging will capture this\n        }\n        // Update VS Code context key for debug view visibility so menus can react\n        try {\n          vscode.commands\n            .executeCommand(\n              'setContext',\n              'azureDevOpsInt.debugViewVisible',\n              !!snapshot.context?.debugViewVisible\n            )\n            .then(\n              () => {},\n              () => {}\n            );\n        } catch {\n          /* ignore context key errors */\n        }\n      }\n    });\n  }\n\n  // Core commands - using extracted commands module\n  const commandContext = {\n    context,\n    panel,\n    provider,\n    sessionTelemetry,\n    client,\n    statusBarItem,\n    authStatusBarItem,\n  };\n\n  // Automatic logging will capture this\n\n  const commandDisposables = registerCommands(context, commandContext);\n  // Automatic logging will capture this\n  context.subscriptions.push(...commandDisposables);\n\n  // Set up listeners and handlers\n  context.subscriptions.push(\n    vscode.workspace.onDidChangeConfiguration(async (e) => {\n      if (e.affectsConfiguration(CONFIG_NS)) {\n        await loadConnectionsFromConfig(context);\n        // Don't block on connection refresh during config changes\n        ensureActiveConnection(context, activeConnectionId, { refresh: true }).catch((error) => {\n          // Automatic logging will capture this\n        });\n      }\n    })\n  );\n\n  // The webview will initialize immediately and show auth UI when ready\n  ensureActiveConnection(context, activeConnectionId, { refresh: true })\n    .then(() => {\n      // Ensure status bar is shown after initial connection\n      // Small delay to allow application to process device code session if it exists\n      setTimeout(() => {\n        updateAuthStatusBar().catch((error) => {\n          // Automatic logging will capture this\n        });\n      }, 500);\n    })\n    .catch((error) => {\n      // Automatic logging will capture this\n      // Still try to update status bar even if connection failed\n      setTimeout(() => {\n        updateAuthStatusBar().catch((err) => {\n          // Automatic logging will capture this\n        });\n      }, 500);\n    });\n\n  // Also update status bar immediately on startup (in case device code session already exists)\n  setTimeout(() => {\n    updateAuthStatusBar().catch((err) => {\n      // Automatic logging will capture this\n    });\n  }, 1000);\n\n  // Start periodic cache cleanup\n  startCacheCleanup();\n\n  // Start memory optimizer\n  // const memoryOptimizer = new MemoryOptimizer();\n\n  // Start periodic token refresh\n  if (tokenRefreshInterval) clearInterval(tokenRefreshInterval);\n  tokenRefreshInterval = setInterval(\n    () => {\n      for (const connectionId of connectionStates.keys()) {\n        dispatchApplicationEvent({ type: 'REFRESH_TOKEN', connectionId });\n      }\n    },\n    15 * 60 * 1000\n  ); // every 15 minutes\n\n  // Start periodic build status refresh\n  for (const connectionId of connectionStates.keys()) {\n    updateBuildRefreshTimer(connectionId, connectionStates.get(connectionId)?.provider, true);\n  }\n\n  // Start periodic garbage collection if enabled\n  if (global.gc) {\n    if (gcInterval) clearInterval(gcInterval);\n    gcInterval = setInterval(\n      () => {\n        global.gc?.();\n        // Automatic logging will capture this\n      },\n      5 * 60 * 1000\n    ); // every 5 minutes\n  }\n}\n\nexport function deactivate(): Thenable<void> {\n  // isDeactivating = true;\n  // Automatic logging will capture this\n\n  // Stop periodic tasks\n  stopCacheCleanup();\n  for (const connectionId of connectionStates.keys()) {\n    updateBuildRefreshTimer(connectionId, undefined, false);\n  }\n  if (tokenRefreshInterval) {\n    clearInterval(tokenRefreshInterval);\n    tokenRefreshInterval = undefined;\n  }\n  if (gcInterval) {\n    clearInterval(gcInterval);\n    gcInterval = undefined;\n  }\n\n  // Clear all caches and state\n  connectionStates.clear();\n  activeQueryByConnection.clear();\n\n  dispatchApplicationEvent({ type: 'EXTENSION_DEACTIVATED' });\n  // Automatic logging will capture this\n\n  return Promise.resolve();\n}\n\n// Helper function to extract only serializable properties from application context\nfunction getSerializableContext(context: any): Record<string, any> {\n  if (!context) {\n    return {};\n  }\n\n  // Debug: log what we're serializing\n  // Only log context serialization if debug logging is enabled\n  if (shouldLogDebug()) {\n    // Automatic logging will capture this\n  }\n\n  // Extract connection error from connection machine if available\n  let workItemsError: string | undefined = undefined;\n  let workItemsErrorConnectionId: string | undefined = undefined;\n\n  if (context.activeConnectionId) {\n    try {\n      // First check connectionStates Map from Praxis context (most reliable)\n      const connectionStatesMap =\n        context.connectionStates instanceof Map\n          ? context.connectionStates\n          : context.connectionStates\n            ? new Map(Object.entries(context.connectionStates))\n            : new Map();\n\n      const praxisConnectionState = connectionStatesMap.get(context.activeConnectionId);\n\n      // Check if connection is in error/disconnected state\n      if (\n        praxisConnectionState &&\n        (!praxisConnectionState.isConnected ||\n          praxisConnectionState.state === 'disconnected' ||\n          praxisConnectionState.state === 'auth_failed')\n      ) {\n        // Determine auth method to provide appropriate error message\n        const activeConnection = context.connections?.find(\n          (c: any) => c.id === context.activeConnectionId\n        );\n        const isEntraAuth = activeConnection?.authMethod === 'entra';\n\n        if (praxisConnectionState.state === 'auth_failed') {\n          workItemsError = isEntraAuth\n            ? 'Entra ID authentication failed. Start a new sign-in to choose PAT or begin device code again.'\n            : 'Authentication failed. Please check your credentials and try again.';\n        } else if (\n          !praxisConnectionState.isConnected ||\n          praxisConnectionState.state === 'disconnected'\n        ) {\n          workItemsError = isEntraAuth\n            ? 'Connection not authenticated. Sign in to continue.'\n            : 'Connection not authenticated. Please configure your credentials.';\n        }\n\n        if (workItemsError) {\n          workItemsErrorConnectionId = context.activeConnectionId;\n        }\n      }\n\n      // Also check ConnectionService for explicit error messages (takes precedence)\n      const connectionService = ConnectionService.getInstance();\n      const connectionManager = connectionService.getConnectionManager(context.activeConnectionId);\n      if (connectionManager) {\n        const connectionData = connectionManager.getConnectionData();\n        if (connectionData.lastError) {\n          workItemsError = connectionData.lastError;\n          workItemsErrorConnectionId = context.activeConnectionId;\n        }\n      }\n    } catch (e) {\n      if (shouldLogDebug()) {\n        // Automatic logging will capture this warning\n      }\n    }\n  }\n\n  // Extract only serializable properties, excluding VS Code API objects and actors\n  // IMPORTANT: Serialization must be transparent - serialize what's in the context,\n  // don't make business decisions about what to include/exclude. Business logic\n  // belongs in Praxis rules, not in serialization code. Components depend on the\n  // context having a certain shape - e.g., connectionStates should include all\n  // connections, not just active ones. The fact that a connection is disconnected\n  // is a property that components need to react to.\n  const serialized = {\n    isActivated: context.isActivated,\n    isDeactivating: context.isDeactivating,\n    connections: context.connections || [],\n    activeConnectionId: context.activeConnectionId,\n    activeQuery: context.activeQuery,\n    connectionStates: context.connectionStates ? Object.fromEntries(context.connectionStates) : {},\n    pendingAuthReminders: context.pendingAuthReminders\n      ? Object.fromEntries(context.pendingAuthReminders)\n      : {},\n    pendingWorkItems: context.pendingWorkItems,\n    workItems: context.pendingWorkItems?.workItems || [],\n    timerState: context.timerState,\n    lastError: context.lastError\n      ? { message: context.lastError.message, stack: context.lastError.stack }\n      : undefined,\n    errorRecoveryAttempts: context.errorRecoveryAttempts,\n    viewMode: context.viewMode,\n    kanbanColumns: context.kanbanColumns,\n    workItemsError,\n    workItemsErrorConnectionId,\n    debugLoggingEnabled: context.debugLoggingEnabled,\n    debugViewVisible: context.debugViewVisible,\n    // Serialize per-connection Maps to plain objects for webview\n    connectionQueries: context.connectionQueries\n      ? Object.fromEntries(context.connectionQueries)\n      : {},\n    connectionWorkItems: context.connectionWorkItems\n      ? Object.fromEntries(context.connectionWorkItems)\n      : {},\n    connectionFilters: context.connectionFilters\n      ? Object.fromEntries(context.connectionFilters)\n      : {},\n    connectionViewModes: context.connectionViewModes\n      ? Object.fromEntries(context.connectionViewModes)\n      : {},\n    deviceCodeSession: context.deviceCodeSession\n      ? {\n          connectionId: context.deviceCodeSession.connectionId,\n          userCode: context.deviceCodeSession.userCode,\n          verificationUri: context.deviceCodeSession.verificationUri,\n          startedAt: context.deviceCodeSession.startedAt,\n          expiresAt: context.deviceCodeSession.expiresAt,\n          expiresInSeconds: context.deviceCodeSession.expiresInSeconds,\n          remainingMs: Math.max(context.deviceCodeSession.expiresAt - Date.now(), 0),\n        }\n      : undefined,\n    authCodeFlowSession: context.authCodeFlowSession\n      ? {\n          connectionId: context.authCodeFlowSession.connectionId,\n          authorizationUrl: context.authCodeFlowSession.authorizationUrl,\n          startedAt: context.authCodeFlowSession.startedAt,\n          expiresAt: context.authCodeFlowSession.expiresAt,\n          expiresInSeconds: context.authCodeFlowSession.expiresInSeconds,\n          remainingMs: Math.max(context.authCodeFlowSession.expiresAt - Date.now(), 0),\n        }\n      : undefined,\n  };\n\n  // Only log serialization if debug logging is enabled to prevent log spam\n  if (shouldLogDebug()) {\n    // Automatic logging will capture this\n  }\n\n  return serialized;\n}\n\n/**\n * Handle authorization redirect URI from browser\n */\nasync function handleAuthRedirect(\n  uri: vscode.Uri,\n  context: vscode.ExtensionContext,\n  pendingAuthProviders: Map<string, any>\n): Promise<void> {\n  try {\n    // Parse URI parameters\n    const params = new URLSearchParams(uri.query);\n    const authorizationCode = params.get('code');\n    const state = params.get('state');\n    const error = params.get('error');\n    const errorDescription = params.get('error_description');\n\n    // Check for errors\n    if (error) {\n      const errorMsg = errorDescription || error;\n      // Automatic logging will capture this error - activationLogger.error(`Authorization error: ${errorMsg}`);\n      vscode.window.showErrorMessage(`Authentication failed: ${errorMsg}`);\n      return;\n    }\n\n    if (!authorizationCode || !state) {\n      // Automatic logging will capture this error - activationLogger.error('Missing authorization code or state in redirect URI');\n      vscode.window.showErrorMessage('Invalid authentication response');\n      return;\n    }\n\n    // Find provider by checking state parameter\n    let connectionId: string | undefined;\n    let provider: any;\n\n    for (const [connId, prov] of pendingAuthProviders.entries()) {\n      const pendingState = prov.getPendingAuthState?.();\n      if (pendingState === state) {\n        connectionId = connId;\n        provider = prov;\n        break;\n      }\n    }\n\n    if (!provider || !connectionId) {\n      // Automatic logging will capture this error - activationLogger.error('No pending authentication found for redirect');\n      vscode.window.showErrorMessage('Authentication session expired. Please try again.');\n      return;\n    }\n\n    // Dispatch event\n    dispatchApplicationEvent(\n      AuthRedirectReceivedAppEvent.create({\n        connectionId: connectionId,\n        authorizationCode: authorizationCode,\n        state: state,\n      })\n    );\n\n    // Handle redirect\n    const result = await provider.handleRedirectUri(uri);\n\n    if (result.success) {\n      // Dispatch completion event\n      dispatchApplicationEvent(\n        AuthCodeFlowCompletedAppEvent.create({\n          connectionId: connectionId,\n          success: true,\n        })\n      );\n\n      // Clear pending provider\n      pendingAuthProviders.delete(connectionId);\n\n      vscode.window.showInformationMessage('Authentication successful!');\n    } else {\n      // Dispatch failure event\n      dispatchApplicationEvent(\n        AuthCodeFlowCompletedAppEvent.create({\n          connectionId: connectionId,\n          success: false,\n          error: result.error,\n        })\n      );\n\n      vscode.window.showErrorMessage(`Authentication failed: ${result.error}`);\n    }\n  } catch (error: any) {\n    // Automatic logging will capture this error - activationLogger.error(`Redirect handling error: ${error.message}`, { meta: error });\n    vscode.window.showErrorMessage(`Authentication error: ${error.message}`);\n  }\n}\n\nimport { interceptWebviewMessages } from './logging/MessageInterceptor.js';\nimport { standardizedLogger } from './logging/StandardizedAutomaticLogger.js';\n\nclass AzureDevOpsIntViewProvider implements vscode.WebviewViewProvider {\n  public view?: vscode.WebviewView;\n  private readonly extensionUri: vscode.Uri;\n  private readonly appActor: ReturnType<typeof getApplicationActor>;\n\n  constructor(_context: vscode.ExtensionContext) {\n    this.extensionUri = _context.extensionUri;\n    this.appActor = getApplicationActor();\n  }\n\n  public resolveWebviewView(\n    webviewView: vscode.WebviewView,\n    _context: vscode.WebviewViewResolveContext,\n    _token: vscode.CancellationToken\n  ) {\n    this.view = webviewView;\n    panel = webviewView; // Store in global for snapshot subscription\n\n    // CRITICAL: When panel is created, immediately send current Praxis state\n    // This ensures work items loaded before panel creation are sent to webview\n    // (State will be sent below after webview setup is complete)\n    const webview = webviewView.webview;\n\n    // Intercept webview messages for automatic logging\n    // Store intercepted methods to use instead of direct webview calls\n    // Automatic logging will capture this - activationLogger.info('[AzureDevOpsIntViewProvider] Setting up automatic message logging');\n    let interceptedWebview: ReturnType<typeof interceptWebviewMessages> | undefined;\n    try {\n      interceptedWebview = interceptWebviewMessages(webview, 'webview-provider');\n      // Automatic logging will capture this - activationLogger.info('[AzureDevOpsIntViewProvider] Automatic message logging set up');\n    } catch (err) {\n      // Automatic logging will capture this error\n    }\n\n    webview.options = {\n      enableScripts: true,\n      localResourceRoots: [vscode.Uri.joinPath(this.extensionUri, 'media')],\n    };\n\n    const nonce = getNonce();\n    const scriptUri = webview.asWebviewUri(\n      vscode.Uri.joinPath(this.extensionUri, 'media', 'webview', 'main.js')\n    );\n    // Link to main.css which contains Svelte component styles from esbuild\n    const mainCssUri = webview.asWebviewUri(\n      vscode.Uri.joinPath(this.extensionUri, 'media', 'webview', 'main.css')\n    );\n\n    // The 'unsafe-eval' is required for Svelte's dev mode.\n    // TODO: Remove 'unsafe-eval' in production builds.\n    const csp = `default-src 'none'; style-src ${webview.cspSource} 'unsafe-inline'; script-src 'nonce-${nonce}' 'unsafe-eval'; img-src ${webview.cspSource} data:; connect-src 'self';`;\n\n    webview.html = `\n      <!DOCTYPE html>\n      <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <meta http-equiv=\"Content-Security-Policy\" content=\"${csp}\">\n        <link href=\"${mainCssUri}\" rel=\"stylesheet\">\n        <title>Work Items</title>\n      </head>\n      <body>\n        <div id=\"svelte-root\" style=\"padding:12px;font-family:var(--vscode-font-family,sans-serif);color:var(--vscode-foreground);\">\n          <div style=\"opacity:0.8\">Loading Azure DevOps Integration\u2026</div>\n        </div>\n        <script nonce=\"${nonce}\">\n          // Early error trap before module loads\n          (function() {\n            const vscode = typeof acquireVsCodeApi === 'function' ? acquireVsCodeApi() : undefined;\n            const post = (payload) => {\n              try { vscode?.postMessage({ type: 'webviewPreError', payload }); } catch {}\n            };\n            window.addEventListener('error', (event) => {\n              post({ kind: 'error', message: String(event.message), filename: event.filename, lineno: event.lineno, colno: event.colno, stack: event.error?.stack });\n            });\n            window.addEventListener('unhandledrejection', (event) => {\n              post({ kind: 'unhandledrejection', reason: String((event as any)?.reason) });\n            });\n            post({ kind: 'preload_ready', readyState: document.readyState });\n          })();\n        </script>\n        <script type=\"module\" nonce=\"${nonce}\" src=\"${scriptUri}\"></script>\n      </body>\n      </html>\n    `;\n\n    // Attach shared context bridge so webview can request/receive context updates (getContext)\n    const bridge = sharedContextBridge;\n    if (bridge?.attachWebview) {\n      try {\n        bridge.attachWebview(webview);\n      } catch (error) {\n        // Automatic logging will capture this warning\n      }\n\n      webviewView.onDidDispose(() => {\n        try {\n          bridge?.detachWebview();\n        } catch (error) {\n          // Automatic logging will capture this warning\n        }\n\n        if (panel === webviewView) {\n          panel = undefined;\n        }\n      });\n    }\n\n    // Helper to send current state to webview\n    // Uses module-level lastStateSignature for deduplication\n    const sendCurrentState = () => {\n      const appActor = getApplicationStoreActor();\n      // Automatic logging will capture this\n\n      if (appActor) {\n        let snapshot: any = undefined;\n        let matchesFn: ((state: any) => boolean) | undefined = undefined;\n\n        // Check if it's PraxisApplicationManager (has getApplicationState)\n        if (typeof (appActor as any).getApplicationState === 'function') {\n          const manager = appActor as any;\n          const state = manager.getApplicationState();\n          const context = manager.getContext();\n\n          snapshot = {\n            value: state,\n            context: context,\n          };\n\n          matchesFn = (stateValue: any) => {\n            if (typeof stateValue === 'string') {\n              return (\n                state === stateValue || (typeof state === 'string' && state.includes(stateValue))\n              );\n            }\n            if (typeof stateValue === 'object' && stateValue !== null) {\n              // Simple check for top-level key match for object patterns\n              const key = Object.keys(stateValue)[0];\n              const subValue = stateValue[key];\n\n              // If state is a string, it must match the specific substate (e.g. \"active.setup\")\n              // It should NOT match if state is just the parent (e.g. \"active\")\n              if (typeof state === 'string') {\n                if (state === key) {\n                  return false; // \"active\" does not match { active: 'setup' }\n                }\n                // Check for dot notation \"active.setup\"\n                if (typeof subValue === 'string') {\n                  return state === `${key}.${subValue}` || state.startsWith(`${key}.${subValue}.`);\n                }\n                return false;\n              }\n\n              // If state is object, check property match\n              if (typeof state === 'object' && state !== null) {\n                // Handle { active: 'setup' } matching { active: 'setup' } or { active: { setup: '...' } }\n                const stateSubValue = state[key];\n                if (stateSubValue === subValue) return true;\n                if (\n                  typeof subValue === 'string' &&\n                  typeof stateSubValue === 'object' &&\n                  stateSubValue !== null\n                ) {\n                  // If asking for 'setup', and state is { setup: 'loading' }, that's a match\n                  return Object.keys(stateSubValue)[0] === subValue; // Approximate\n                }\n                return false;\n              }\n            }\n            return false;\n          };\n        }\n        // Check if it's XState actor (has getSnapshot)\n        else if (typeof (appActor as any).getSnapshot === 'function') {\n          snapshot = (appActor as any).getSnapshot();\n          matchesFn = snapshot?.matches ? snapshot.matches.bind(snapshot) : () => false;\n        }\n\n        // Automatic logging will capture this\n\n        if (snapshot && matchesFn) {\n          // Pre-compute state matches - only include true values to reduce payload size\n          const allMatches = {\n            inactive: matchesFn('inactive'),\n            activating: matchesFn('activating'),\n            activation_failed: matchesFn('activation_failed'),\n            active: matchesFn('active'),\n            error_recovery: matchesFn('error_recovery'),\n            deactivating: matchesFn('deactivating'),\n            'active.setup': matchesFn({ active: 'setup' }),\n            'active.setup.loading_connections': matchesFn({\n              active: { setup: 'loading_connections' },\n            }),\n            'active.setup.waiting_for_panel': matchesFn({\n              active: { setup: 'waiting_for_panel' },\n            }),\n            'active.setup.panel_ready': matchesFn({ active: { setup: 'panel_ready' } }),\n            'active.setup.setup_error': matchesFn({ active: { setup: 'setup_error' } }),\n            'active.ready': matchesFn({ active: 'ready' }),\n            'active.ready.idle': matchesFn({ active: { ready: 'idle' } }),\n            'active.ready.loadingData': matchesFn({ active: { ready: 'loadingData' } }),\n            'active.ready.managingConnections': matchesFn({\n              active: { ready: 'managingConnections' },\n            }),\n            'active.ready.error': matchesFn({ active: { ready: 'error' } }),\n          };\n          \n          // Filter to only include true matches (optimization: reduce payload size)\n          const matches: Record<string, boolean> = {};\n          for (const [key, value] of Object.entries(allMatches)) {\n            if (value === true) {\n              matches[key] = true;\n            }\n          }\n\n          const serializableState = {\n            praxisState: snapshot.value,\n            context: getSerializableContext(snapshot.context),\n            matches,\n          };\n\n          // Deduplicate: only send if state changed (Priority 2: Reduce redundant syncs)\n          const signature = JSON.stringify(serializableState);\n          if (signature === lastStateSignature) {\n            return; // No change, skip sending duplicate state\n          }\n          lastStateSignature = signature;\n\n          // Automatic logging will capture this\n          // Use intercepted webview if available, otherwise fall back to original\n          const webviewToUse = interceptedWebview || webview;\n          webviewToUse.postMessage({\n            type: 'syncState',\n            payload: serializableState,\n          });\n        }\n      }\n    };\n\n    // Set up message handler to receive events from webview\n    // Use intercepted webview if available, otherwise fall back to original\n    const webviewToUse = interceptedWebview || webview;\n    webviewToUse.onDidReceiveMessage(async (message) => {\n      // Shared context bridge handles getContext/contextUpdate requests\n      if (sharedContextBridge?.handleWebviewMessage?.(message)) {\n        // Automatic logging will capture this\n        return;\n      }\n\n      if (message?.type === 'getContext') {\n        // Automatic logging will capture this\n        sendCurrentState();\n        return;\n      }\n\n      if (message?.type === 'webviewPreError') {\n        // Automatic logging will capture this error\n        return;\n      }\n\n      if (message?.type === 'webviewLog') {\n        // Automatic logging will capture this\n        return;\n      }\n\n      if (message.type === 'webviewReady' || message.type === 'ready') {\n        // Automatic logging will capture this\n        sendCurrentState();\n        return;\n      }\n\n      if (message.type === 'PRAXIS_EVENT' && Array.isArray(message.events)) {\n        // Handle Praxis events from webview (these are usually local-only, but we can log them)\n        // Automatic logging will capture this\n        // Don't forward these back - they're for local webview state management\n        return;\n      }\n\n      if (message.type === 'appEvent' && message.event) {\n        // Forward webview events to the Praxis (wrapped format)\n        // Automatic logging will capture this\n\n        // Router-lite stamping: add atConnectionId/correlationId to connection-shaped events\n        try {\n          const actor = getApplicationActor();\n          const snapshot = actor?.getSnapshot?.();\n          const currentActiveId = snapshot?.context?.activeConnectionId;\n          const evtType = message.event.type as string;\n          // Router stamping helper\n          try {\n            const { stampConnectionMeta } = await import('./services/router/stamp.js');\n            message.event = stampConnectionMeta(message.event, currentActiveId);\n          } catch {\n            // Inline fallback (no-op)\n          }\n\n          // Guard: selection must originate from webview when using new factory\n          if (evtType === 'SELECT_CONNECTION') {\n            if (message.event.origin !== 'webview') {\n              // Automatic logging will capture this warning\n              return;\n            }\n            // Extract connectionId from payload and send SELECT_CONNECTION event\n            const targetId = message.event?.payload?.id ?? null;\n            if (typeof targetId === 'string') {\n              dispatchApplicationEvent({\n                type: 'SELECT_CONNECTION',\n                connectionId: targetId,\n              });\n              return;\n            } else if (targetId === null) {\n              // Handle null case (deselection) - translate to CONNECTION_SELECTED for backward compatibility\n              dispatchApplicationEvent({\n                type: 'CONNECTION_SELECTED',\n                connectionId: null as any,\n              });\n              return;\n            }\n          }\n        } catch {\n          // best-effort stamping; continue dispatch\n        }\n\n        // Handle special events that need direct VS Code command execution\n        if (message.event.type === 'OPEN_SETTINGS') {\n          // Automatic logging will capture this\n          vscode.commands\n            .executeCommand('azureDevOpsInt.setup')\n            .then(() => {\n              // Automatic logging will capture this\n            })\n            .then(undefined, (err) => {\n              // Automatic logging will capture this error\n            });\n          return; // Don't dispatch to Praxis\n        }\n\n        // Handle RESET_AUTH: sign out and open settings for reconfiguration\n        if (message.event.type === 'RESET_AUTH') {\n          const now = Date.now();\n          const timeSinceLastReset = now - lastResetAuthTime;\n\n          // Debounce: ignore if called too soon after last execution\n          if (timeSinceLastReset < RESET_AUTH_DEBOUNCE_MS) {\n            // Automatic logging will capture this (debounced)\n            return; // Skip duplicate processing\n          }\n\n          // Update last execution time\n          lastResetAuthTime = now;\n\n          const connectionId = message.event.connectionId as string | undefined;\n          // Sign out first (handled by Praxis via event dispatch)\n          if (connectionId) {\n            dispatchApplicationEvent({\n              type: 'SIGN_OUT_ENTRA',\n              connectionId,\n            });\n          }\n          // Then open settings so user can reconfigure auth\n          vscode.commands\n            .executeCommand('azureDevOpsInt.setup')\n            .then(() => {\n              // Automatic logging will capture this\n            })\n            .then(undefined, (err) => {\n              // Automatic logging will capture this error\n            });\n          return; // Don't dispatch to Praxis (handled directly)\n        }\n\n        if (message.event.type === 'OPEN_DEVICE_CODE_BROWSER') {\n          // Handle device code browser opening from webview\n          // Event will be automatically logged via Praxis when dispatched\n\n          // Get device code session from Praxis context\n          const actor = getApplicationActor();\n          const snapshot = actor?.getSnapshot?.();\n          const deviceCodeSession = snapshot?.context?.deviceCodeSession;\n\n          if (deviceCodeSession && deviceCodeSession.connectionId === message.event.connectionId) {\n            // Validate userCode exists before copying\n            if (!deviceCodeSession.userCode || deviceCodeSession.userCode.trim() === '') {\n              vscode.window.showErrorMessage(\n                'Device code is not available. Please try signing in again.'\n              );\n              dispatchApplicationEvent(\n                ApplicationErrorEvent.create({\n                  error: 'Device code is empty or missing',\n                  connectionId: message.event.connectionId,\n                })\n              );\n              return;\n            }\n\n            // Copy code to clipboard and open browser\n            vscode.env.clipboard\n              .writeText(deviceCodeSession.userCode)\n              .then(() => {\n                const uri = vscode.Uri.parse(\n                  deviceCodeSession.verificationUri || 'https://microsoft.com/devicelogin'\n                );\n                vscode.env\n                  .openExternal(uri)\n                  .then(() => {\n                    vscode.window.showInformationMessage(\n                      `Device code ${deviceCodeSession.userCode} copied to clipboard. Paste it into the browser to finish signing in.`\n                    );\n                    dispatchApplicationEvent(\n                      DeviceCodeBrowserOpenedEvent.create({\n                        connectionId: message.event.connectionId,\n                        userCode: deviceCodeSession.userCode,\n                      })\n                    );\n                  })\n                  .then(undefined, (err) => {\n                    dispatchApplicationEvent(\n                      DeviceCodeBrowserOpenFailedEvent.create({\n                        connectionId: message.event.connectionId,\n                        error: err instanceof Error ? err.message : String(err),\n                      })\n                    );\n                    vscode.window.showErrorMessage(\n                      'Failed to open browser. Code was copied to clipboard.'\n                    );\n                  });\n              })\n              .then(undefined, (err) => {\n                dispatchApplicationEvent(\n                  DeviceCodeCopyFailedEvent.create({\n                    connectionId: message.event.connectionId,\n                    error: err instanceof Error ? err.message : String(err),\n                  })\n                );\n                vscode.window.showErrorMessage(\n                  `Failed to copy device code to clipboard: ${err instanceof Error ? err.message : String(err)}`\n                );\n                // Still try to open browser even if clipboard copy failed\n                const uri = vscode.Uri.parse(\n                  deviceCodeSession.verificationUri || 'https://microsoft.com/devicelogin'\n                );\n                vscode.env.openExternal(uri).then(undefined, () => {\n                  // Ignore browser open errors if clipboard already failed\n                });\n              });\n          } else {\n            dispatchApplicationEvent(\n              DeviceCodeSessionNotFoundEvent.create({\n                connectionId: message.event.connectionId,\n              })\n            );\n            vscode.window.showWarningMessage(\n              'Device code session not found. Please try signing in again.'\n            );\n          }\n          return; // Don't dispatch to Praxis\n        }\n\n        if (message.event.type === 'OPEN_AUTH_CODE_FLOW_BROWSER') {\n          // Handle auth code flow browser opening from webview\n          // Get auth code flow session from Praxis context\n          const actor = getApplicationActor();\n          const snapshot = actor?.getSnapshot?.();\n          const authCodeFlowSession = snapshot?.context?.authCodeFlowSession;\n\n          if (\n            authCodeFlowSession &&\n            authCodeFlowSession.connectionId === message.event.connectionId\n          ) {\n            // Open browser to authorization URL\n            const uri = vscode.Uri.parse(authCodeFlowSession.authorizationUrl);\n            vscode.env\n              .openExternal(uri)\n              .then(() => {\n                dispatchApplicationEvent(\n                  AuthCodeFlowBrowserOpenedEvent.create({\n                    connectionId: message.event.connectionId,\n                    url: authCodeFlowSession.authorizationUrl,\n                  })\n                );\n              })\n              .then(undefined, (err) => {\n                dispatchApplicationEvent(\n                  AuthCodeFlowBrowserOpenFailedEvent.create({\n                    connectionId: message.event.connectionId,\n                    error: err instanceof Error ? err.message : String(err),\n                  })\n                );\n              });\n          } else {\n            dispatchApplicationEvent(\n              ApplicationErrorEvent.create({\n                error: 'Auth code flow session not found for connection',\n                connectionId: message.event.connectionId,\n              })\n            );\n          }\n          return; // Don't dispatch to Praxis\n        }\n\n        // Forward other events to Praxis\n        dispatchApplicationEvent(message.event);\n      } else {\n        // Log warning for legacy/unknown message types\n        // Check if message.event exists before accessing its properties\n        if (message.event && message.event.type === 'COPY_DEVICE_CODE') {\n          // Automatic logging will capture this\n\n          const actor = getApplicationActor();\n          const snapshot = actor?.getSnapshot?.();\n          const deviceCodeSession = snapshot?.context?.deviceCodeSession;\n\n          if (deviceCodeSession && deviceCodeSession.connectionId === message.event.connectionId) {\n            // Validate userCode exists before copying\n            if (!deviceCodeSession.userCode || deviceCodeSession.userCode.trim() === '') {\n              vscode.window.showErrorMessage(\n                'Device code is not available. Please try signing in again.'\n              );\n              // Automatic logging will capture this warning\n              return;\n            }\n\n            vscode.env.clipboard\n              .writeText(deviceCodeSession.userCode)\n              .then(() => {\n                vscode.window.showInformationMessage(\n                  `Device code ${deviceCodeSession.userCode} copied to clipboard`\n                );\n                // Automatic logging will capture this\n              })\n              .then(undefined, (err) => {\n                // Automatic logging will capture this error\n                vscode.window.showErrorMessage(\n                  `Failed to copy device code to clipboard: ${err instanceof Error ? err.message : String(err)}`\n                );\n              });\n          } else {\n            // Automatic logging will capture this\n            vscode.window.showWarningMessage(\n              'Device code session not found. Please try signing in again.'\n            );\n          }\n          return;\n        }\n        // Automatic logging will capture this warning\n      }\n    });\n\n    // Notify Praxis that webview panel is ready\n    this.appActor?.send?.({ type: 'UPDATE_WEBVIEW_PANEL', webviewPanel: webviewView });\n\n    // Send initial Praxis state to webview\n    // CRITICAL: When panel is created, immediately send current Praxis state\n    // This ensures work items loaded before panel creation are sent to webview\n    sendCurrentState();\n  }\n}\n"],
  "mappings": "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",
  "names": ["text", "component", "filter", "key", "provider", "exports", "name", "url", "client", "source", "head", "vscode", "delay", "pending", "type", "text", "name", "init_provider", "source", "init_provider", "logger", "log", "state", "key", "index", "type", "index", "connections", "connections", "logger", "event", "url", "setLoadedConnectionsReader", "vscode", "vscode", "logger", "activeConnectionId", "showUrlInput", "parseWorkItemUrl", "createConnectionFromInfo", "saveConnection", "url", "setLoadedConnectionsReader", "connections", "action", "performance", "init_types", "init_constants", "init_errors", "next", "init_constants", "init_warnings", "init_warnings", "source", "init_constants", "stack", "stack", "component", "init_errors", "init_constants", "effect", "init_constants", "derived", "init_constants", "effect", "init_utils", "init_constants", "source", "stack", "update", "effect", "e", "flags", "init_constants", "init_errors", "init_utils", "child", "version", "init_constants", "init_errors", "init_utils", "comment", "pending", "effect", "reset", "error", "init_constants", "derived", "init_constants", "init_errors", "stack", "source", "derived", "effect", "flags", "init_constants", "init_errors", "prototype", "version", "stack", "path", "prop", "source", "s", "value", "key", "init_constants", "init_errors", "array_prototype", "index", "init_equality", "init_operations", "init_equality", "init_constants", "effect", "type", "e", "derived", "flags", "teardown", "next", "transition", "child", "sibling", "init_constants", "init_errors", "effect", "flags", "i", "index", "derived", "teardown", "trace", "init_constants", "init_errors", "event", "path", "effect", "init_constants", "name", "init_utils", "component", "init_operations", "Component", "events", "passive", "unmount", "anchor_node", "init_errors", "init_utils", "init_constants", "init_utils", "init_warnings", "init_constants", "init_errors", "init_errors", "init_utils", "init_constants", "init_constants", "init_constants", "init_utils", "init_legacy", "init_errors", "init_async", "init_errors", "init_constants", "init_constants", "init_utils", "init_constants", "init_constants", "init_constants", "init_constants", "init_utils", "init_constants", "init_css", "init_attachments", "init_attributes", "init_constants", "init_utils", "init_attachments", "init_attachments", "init_errors", "init_constants", "init_misc", "run", "init_utils", "set", "update", "run", "derived", "pending", "init_shared", "init_utils", "init_utils", "init_shared", "init_props", "init_errors", "init_constants", "init_validate", "init_errors", "init_constants", "init_errors", "key", "prop", "next", "event", "prop", "type", "element", "name", "slot", "key", "attr", "init_constants", "init_legacy", "init_async", "init_css", "init_attachments", "init_attributes", "init_misc", "init_props", "init_validate", "init_equality", "module", "source", "index", "key", "exception", "head", "map", "tag", "name", "schema", "type", "state", "snippet", "iterator", "next", "str", "string", "block", "set", "extend", "tag", "event", "init_types", "state", "registry", "init_types", "client", "provider", "state", "vscode", "component", "event", "LogLevel", "Component", "key", "index", "timestamp", "outputChannel", "state", "key", "merge", "toString", "isObject", "isBoolean", "extend", "toArray", "noop", "init_utils", "str", "type", "prototype", "descriptors", "filter", "prop", "hasOwnProperty", "name", "stack", "source", "init_utils", "filter", "prop", "exports", "module", "util", "source", "exports", "module", "util", "stream", "self", "exports", "module", "exports", "module", "exports", "type", "str", "charset", "path", "extension", "extensions", "exports", "module", "exports", "module", "async", "exports", "module", "state", "key", "exports", "module", "async", "iterator", "state", "key", "exports", "module", "state", "exports", "module", "async", "exports", "module", "iterator", "state", "exports", "module", "iterator", "state", "exports", "module", "iterator", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "isNaN", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "concatty", "slicy", "str", "bind", "Empty", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "bind", "exports", "module", "bind", "exports", "module", "exports", "module", "exports", "module", "bind", "exports", "module", "undefined", "doEval", "name", "bind", "stringToPath", "getBaseIntrinsic", "require_shams", "exports", "module", "exports", "module", "toStringTag", "exports", "module", "prop", "exports", "module", "util", "path", "http", "https", "fs", "crypto", "FormData", "append", "prop", "next", "boundary", "defaults", "FormData", "key", "path", "each", "source", "index", "stack", "init_utils", "prop", "str", "prototype", "append", "name", "toString", "each", "encode", "url", "init_utils", "init_utils", "url", "init_node", "str", "crypto", "init_utils", "init_node", "init_utils", "key", "path", "init_utils", "name", "key", "path", "index", "init_utils", "init_utils", "isFormData", "isFileList", "transitional", "init_utils", "key", "str", "filter", "init_utils", "self", "key", "prototype", "init_utils", "init_utils", "validateStatus", "url", "exports", "url", "proxy", "key", "exports", "module", "type", "str", "name", "exports", "module", "env", "key", "hash", "self", "index", "extend", "name", "exports", "module", "save", "load", "index", "exports", "module", "exports", "module", "env", "version", "stream", "exports", "module", "util", "init", "log", "save", "load", "key", "prop", "name", "useColors", "str", "exports", "module", "exports", "module", "exports", "module", "url", "URL", "http", "https", "isFunction", "eventHandlers", "event", "noop", "self", "isString", "isBuffer", "name", "get", "spread", "key", "url", "init_utils", "stream", "prop", "source", "event", "import_stream", "init_utils", "util", "name", "tag", "boundary", "import_stream", "stream", "init_utils", "head", "push", "timestamp", "invoke", "init_utils", "url", "proxy", "proxyFromEnv", "import_util", "import_stream", "import_events", "init_utils", "zlib", "followRedirects", "stream", "util", "http2", "name", "data", "path", "https", "http", "transitional", "origin", "url", "init_utils", "name", "path", "source", "prop", "merge", "init_utils", "init_utils", "key", "init_utils", "event", "transitional", "key", "init_utils", "aborted", "signal", "stream", "iterator", "done", "isFunction", "ReadableStream", "TextEncoder", "init_utils", "env", "str", "type", "url", "prop", "fetch", "map", "adapter", "state", "init_utils", "adapter", "schema", "type", "version", "validators", "init_utils", "stack", "transitional", "url", "index", "init_utils", "key", "init_utils", "Axios", "AxiosError", "CanceledError", "isCancel", "CancelToken", "VERSION", "all", "isAxiosError", "spread", "toFormData", "AxiosHeaders", "HttpStatusCode", "getAdapter", "mergeConfig", "init_axios", "delay", "logger", "init_axios", "url", "fallback", "status", "snippet", "delay", "path", "lastError", "version", "head", "filter", "type", "text", "state", "init_azureClient", "key", "AuthErrorCodes.unexpectedError", "AuthErrorCodes.postRequestFailed", "ClientAuthErrorCodes.clientInfoDecodingError", "ClientAuthErrorCodes.clientInfoEmptyError", "ClientAuthErrorCodes.tokenParsingError", "ClientAuthErrorCodes.nullOrEmptyToken", "ClientAuthErrorCodes.endpointResolutionError", "ClientAuthErrorCodes.networkError", "ClientAuthErrorCodes.openIdConfigError", "ClientAuthErrorCodes.hashNotDeserialized", "ClientAuthErrorCodes.invalidState", "ClientAuthErrorCodes.stateMismatch", "ClientAuthErrorCodes.stateNotFound", "ClientAuthErrorCodes.nonceMismatch", "ClientAuthErrorCodes.authTimeNotFound", "ClientAuthErrorCodes.maxAgeTranspired", "ClientAuthErrorCodes.multipleMatchingTokens", "ClientAuthErrorCodes.multipleMatchingAccounts", "ClientAuthErrorCodes.multipleMatchingAppMetadata", "ClientAuthErrorCodes.requestCannotBeMade", "ClientAuthErrorCodes.cannotRemoveEmptyScope", "ClientAuthErrorCodes.cannotAppendScopeSet", "ClientAuthErrorCodes.emptyInputScopeSet", "ClientAuthErrorCodes.deviceCodePollingCancelled", "ClientAuthErrorCodes.deviceCodeExpired", "ClientAuthErrorCodes.deviceCodeUnknownError", "ClientAuthErrorCodes.noAccountInSilentRequest", "ClientAuthErrorCodes.invalidCacheRecord", "ClientAuthErrorCodes.invalidCacheEnvironment", "ClientAuthErrorCodes.noAccountFound", "ClientAuthErrorCodes.noCryptoObject", "ClientAuthErrorCodes.unexpectedCredentialType", "ClientAuthErrorCodes.invalidAssertion", "ClientAuthErrorCodes.invalidClientCredential", "ClientAuthErrorCodes.tokenRefreshRequired", "ClientAuthErrorCodes.userTimeoutReached", "ClientAuthErrorCodes.tokenClaimsCnfRequiredForSignedJwt", "ClientAuthErrorCodes.authorizationCodeMissingFromServerResponse", "ClientAuthErrorCodes.bindingKeyNotRemoved", "ClientAuthErrorCodes.endSessionEndpointNotSupported", "ClientAuthErrorCodes.keyIdMissing", "ClientAuthErrorCodes.noNetworkConnectivity", "ClientAuthErrorCodes.userCanceled", "ClientAuthErrorCodes.missingTenantIdError", "ClientAuthErrorCodes.methodNotImplemented", "ClientAuthErrorCodes.nestedAppAuthBridgeDisabled", "ClientAuthErrorCodes.platformBrokerError", "ClientAuthErrorCodes.methodNotImplemented", "LogLevel", "timestamp", "log", "ClientConfigurationErrorCodes.redirectUriEmpty", "ClientConfigurationErrorCodes.claimsRequestParsingError", "ClientConfigurationErrorCodes.authorityUriInsecure", "ClientConfigurationErrorCodes.urlParseError", "ClientConfigurationErrorCodes.urlEmptyError", "ClientConfigurationErrorCodes.emptyInputScopesError", "ClientConfigurationErrorCodes.invalidClaims", "ClientConfigurationErrorCodes.tokenRequestEmpty", "ClientConfigurationErrorCodes.logoutRequestEmpty", "ClientConfigurationErrorCodes.invalidCodeChallengeMethod", "ClientConfigurationErrorCodes.pkceParamsMissing", "ClientConfigurationErrorCodes.invalidCloudDiscoveryMetadata", "ClientConfigurationErrorCodes.invalidAuthorityMetadata", "ClientConfigurationErrorCodes.untrustedAuthority", "ClientConfigurationErrorCodes.missingSshJwk", "ClientConfigurationErrorCodes.missingSshKid", "ClientConfigurationErrorCodes.missingNonceAuthenticationHeader", "ClientConfigurationErrorCodes.invalidAuthenticationHeader", "ClientConfigurationErrorCodes.cannotSetOIDCOptions", "ClientConfigurationErrorCodes.cannotAllowPlatformBroker", "ClientConfigurationErrorCodes.authorityMismatch", "ClientConfigurationErrorCodes.invalidAuthorizePostBodyParameters", "ClientConfigurationErrorCodes.invalidRequestMethodForEAR", "ClientConfigurationErrorCodes.invalidPlatformBrokerConfiguration", "str", "key", "ClientConfigurationErrorCodes.emptyInputScopesError", "ClientAuthErrorCodes.cannotAppendScopeSet", "ClientAuthErrorCodes.cannotRemoveEmptyScope", "ClientAuthErrorCodes.emptyInputScopeSet", "ClientAuthErrorCodes.clientInfoEmptyError", "ClientAuthErrorCodes.clientInfoDecodingError", "name", "tenantId", "env", "ClientAuthErrorCodes.invalidCacheEnvironment", "logger", "ClientAuthErrorCodes.tokenParsingError", "ClientAuthErrorCodes.nullOrEmptyToken", "ClientAuthErrorCodes.maxAgeTranspired", "url", "ClientAuthErrorCodes.hashNotDeserialized", "key", "url", "ClientConfigurationErrorCodes.urlEmptyError", "ClientConfigurationErrorCodes.urlParseError", "ClientConfigurationErrorCodes.authorityUriInsecure", "UrlUtils.getDeserializedResponse", "logger", "source", "CacheErrorCodes.cacheErrorUnknown", "CacheErrorCodes.cacheQuotaExceeded", "logger", "ClientAuthErrorCodes.invalidCacheRecord", "key", "filter", "ClientAuthErrorCodes.multipleMatchingAppMetadata", "name", "json", "ClientAuthErrorCodes.methodNotImplemented", "LogLevel", "ClientAuthErrorCodes.methodNotImplemented", "CLIENT_INFO", "AADServerParamKeys.CLIENT_ID", "AADServerParamKeys.BROKER_CLIENT_ID", "AADServerParamKeys.REDIRECT_URI", "AADServerParamKeys.RESPONSE_TYPE", "AADServerParamKeys.RESPONSE_MODE", "AADServerParamKeys.NATIVE_BROKER", "AADServerParamKeys.SCOPE", "AADServerParamKeys.POST_LOGOUT_URI", "AADServerParamKeys.ID_TOKEN_HINT", "AADServerParamKeys.DOMAIN_HINT", "AADServerParamKeys.LOGIN_HINT", "AADServerParamKeys.SID", "ClientConfigurationErrorCodes.invalidClaims", "AADServerParamKeys.CLAIMS", "AADServerParamKeys.CLIENT_REQUEST_ID", "AADServerParamKeys.X_CLIENT_SKU", "AADServerParamKeys.X_CLIENT_VER", "AADServerParamKeys.X_CLIENT_OS", "AADServerParamKeys.X_CLIENT_CPU", "AADServerParamKeys.X_APP_NAME", "AADServerParamKeys.X_APP_VER", "AADServerParamKeys.PROMPT", "state", "AADServerParamKeys.STATE", "AADServerParamKeys.NONCE", "AADServerParamKeys.CODE_CHALLENGE", "AADServerParamKeys.CODE_CHALLENGE_METHOD", "ClientConfigurationErrorCodes.pkceParamsMissing", "AADServerParamKeys.CODE", "AADServerParamKeys.DEVICE_CODE", "AADServerParamKeys.REFRESH_TOKEN", "AADServerParamKeys.CODE_VERIFIER", "AADServerParamKeys.CLIENT_SECRET", "AADServerParamKeys.CLIENT_ASSERTION", "AADServerParamKeys.CLIENT_ASSERTION_TYPE", "AADServerParamKeys.OBO_ASSERTION", "AADServerParamKeys.REQUESTED_TOKEN_USE", "AADServerParamKeys.GRANT_TYPE", "AADServerParamKeys.INSTANCE_AWARE", "key", "AADServerParamKeys.TOKEN_TYPE", "AADServerParamKeys.REQ_CNF", "AADServerParamKeys.X_CLIENT_CURR_TELEM", "AADServerParamKeys.X_CLIENT_LAST_TELEM", "AADServerParamKeys.X_MS_LIB_CAPABILITY", "AADServerParamKeys.LOGOUT_HINT", "AADServerParamKeys.BROKER_REDIRECT_URI", "AADServerParamKeys.EAR_JWK", "AADServerParamKeys.EAR_JWE_CRYPTO", "logger", "e", "logger", "version", "TimeUtils.nowSeconds", "ClientAuthErrorCodes.tokenClaimsCnfRequiredForSignedJwt", "key", "ClientConfigurationErrorCodes.invalidCloudDiscoveryMetadata", "logger", "url", "ClientAuthErrorCodes.endpointResolutionError", "ClientAuthErrorCodes.endSessionEndpointNotSupported", "index", "CacheHelpers.generateAuthorityMetadataExpiresAt", "CacheHelpers.updateAuthorityEndpointMetadata", "ClientAuthErrorCodes.openIdConfigError", "CacheHelpers.isAuthorityMetadataExpired", "ClientConfigurationErrorCodes.invalidAuthorityMetadata", "CacheHelpers.updateCloudDiscoveryMetadata", "ClientConfigurationErrorCodes.untrustedAuthority", "logger", "ClientAuthErrorCodes.endpointResolutionError", "key", "ClientAuthErrorCodes.networkError", "RequestParameterBuilder.addBrokerParameters", "RequestParameterBuilder.addExtraQueryParameters", "RequestParameterBuilder.addCorrelationId", "RequestParameterBuilder.instrumentBrokerParams", "UrlUtils.mapToQueryString", "InteractionRequiredAuthErrorCodes.interactionRequired", "InteractionRequiredAuthErrorCodes.consentRequired", "InteractionRequiredAuthErrorCodes.loginRequired", "InteractionRequiredAuthErrorCodes.badToken", "InteractionRequiredAuthErrorCodes.uxNotAllowed", "InteractionRequiredAuthErrorCodes.noTokensFound", "InteractionRequiredAuthErrorCodes.nativeAccountUnavailable", "InteractionRequiredAuthErrorCodes.refreshTokenExpired", "timestamp", "ClientAuthErrorCodes.noCryptoObject", "state", "ClientAuthErrorCodes.invalidState", "logger", "TimeUtils.nowSeconds", "logger", "ClientAuthErrorCodes.nonceMismatch", "ClientAuthErrorCodes.authTimeNotFound", "key", "env", "ClientAuthErrorCodes.invalidCacheEnvironment", "CacheHelpers.createIdTokenEntity", "CacheHelpers.createAccessTokenEntity", "CacheHelpers.createRefreshTokenEntity", "ClientAuthErrorCodes.keyIdMissing", "TimeUtils.toDateFromSeconds", "ClientAuthErrorCodes.requestCannotBeMade", "TimeUtils.nowSeconds", "ClientConfigurationErrorCodes.logoutRequestEmpty", "RequestParameterBuilder.addClientId", "AADServerParamKeys.CLIENT_ID", "ClientConfigurationErrorCodes.redirectUriEmpty", "RequestParameterBuilder.addRedirectUri", "RequestParameterBuilder.addScopes", "RequestParameterBuilder.addAuthorizationCode", "RequestParameterBuilder.addLibraryInfo", "RequestParameterBuilder.addApplicationTelemetry", "RequestParameterBuilder.addThrottling", "RequestParameterBuilder.addServerTelemetry", "RequestParameterBuilder.addCodeVerifier", "RequestParameterBuilder.addClientSecret", "RequestParameterBuilder.addClientAssertion", "RequestParameterBuilder.addClientAssertionType", "RequestParameterBuilder.addGrantType", "RequestParameterBuilder.addClientInfo", "RequestParameterBuilder.addPopToken", "RequestParameterBuilder.addSshJwk", "ClientConfigurationErrorCodes.missingSshJwk", "RequestParameterBuilder.addClaims", "RequestParameterBuilder.addCcsOid", "RequestParameterBuilder.addCcsUpn", "RequestParameterBuilder.addBrokerParameters", "RequestParameterBuilder.addExtraQueryParameters", "AADServerParamKeys.RETURN_SPA_CODE", "RequestParameterBuilder.instrumentBrokerParams", "UrlUtils.mapToQueryString", "RequestParameterBuilder.addPostLogoutRedirectUri", "RequestParameterBuilder.addCorrelationId", "RequestParameterBuilder.addIdTokenHint", "RequestParameterBuilder.addState", "RequestParameterBuilder.addLogoutHint", "RequestParameterBuilder.addInstanceAware", "TimeUtils.nowSeconds", "ClientConfigurationErrorCodes.tokenRequestEmpty", "ClientAuthErrorCodes.noAccountInSilentRequest", "InteractionRequiredAuthErrorCodes.noTokensFound", "TimeUtils.isTokenExpired", "InteractionRequiredAuthErrorCodes.refreshTokenExpired", "InteractionRequiredAuthErrorCodes.badToken", "RequestParameterBuilder.addClientId", "AADServerParamKeys.CLIENT_ID", "RequestParameterBuilder.addRedirectUri", "RequestParameterBuilder.addScopes", "RequestParameterBuilder.addGrantType", "RequestParameterBuilder.addClientInfo", "RequestParameterBuilder.addLibraryInfo", "RequestParameterBuilder.addApplicationTelemetry", "RequestParameterBuilder.addThrottling", "RequestParameterBuilder.addServerTelemetry", "RequestParameterBuilder.addRefreshToken", "RequestParameterBuilder.addClientSecret", "RequestParameterBuilder.addClientAssertion", "RequestParameterBuilder.addClientAssertionType", "RequestParameterBuilder.addPopToken", "RequestParameterBuilder.addSshJwk", "ClientConfigurationErrorCodes.missingSshJwk", "RequestParameterBuilder.addClaims", "RequestParameterBuilder.addCcsOid", "RequestParameterBuilder.addCcsUpn", "RequestParameterBuilder.addBrokerParameters", "RequestParameterBuilder.addExtraQueryParameters", "RequestParameterBuilder.instrumentBrokerParams", "UrlUtils.mapToQueryString", "ClientAuthErrorCodes.tokenRefreshRequired", "ClientAuthErrorCodes.noAccountInSilentRequest", "TimeUtils.wasClockTurnedBack", "TimeUtils.isTokenExpired", "ClientAuthErrorCodes.authTimeNotFound", "logger", "RequestParameterBuilder.addClientId", "AADServerParamKeys.CLIENT_ID", "RequestParameterBuilder.addScopes", "RequestParameterBuilder.addRedirectUri", "RequestParameterBuilder.addCorrelationId", "RequestParameterBuilder.addResponseMode", "RequestParameterBuilder.addClientInfo", "RequestParameterBuilder.addPrompt", "RequestParameterBuilder.addDomainHint", "RequestParameterBuilder.addSid", "RequestParameterBuilder.addLoginHint", "RequestParameterBuilder.addCcsOid", "RequestParameterBuilder.addCcsUpn", "RequestParameterBuilder.addNonce", "RequestParameterBuilder.addState", "RequestParameterBuilder.addClaims", "RequestParameterBuilder.addBrokerParameters", "AADServerParamKeys.INSTANCE_AWARE", "RequestParameterBuilder.addInstanceAware", "ClientAuthErrorCodes.authorizationCodeMissingFromServerResponse", "ClientAuthErrorCodes.stateNotFound", "ClientAuthErrorCodes.invalidState", "ClientAuthErrorCodes.stateMismatch", "key", "index", "key", "HttpMethod", "Constants", "url", "name", "version", "proxyUrl", "http", "HttpMethod", "headers", "url", "https", "body", "Constants", "name", "version", "ManagedIdentityErrorCodes.invalidFileExtension", "ManagedIdentityErrorCodes.invalidFilePath", "ManagedIdentityErrorCodes.invalidManagedIdentityIdType", "ManagedIdentityErrorCodes.invalidSecret", "ManagedIdentityErrorCodes.platformNotSupported", "ManagedIdentityErrorCodes.missingId", "ManagedIdentityErrorCodes.MsiEnvironmentVariableUrlMalformedErrorCodes", "ManagedIdentityErrorCodes.networkUnavailable", "ManagedIdentityErrorCodes.unableToCreateAzureArc", "ManagedIdentityErrorCodes.unableToCreateCloudShell", "ManagedIdentityErrorCodes.unableToCreateSource", "ManagedIdentityErrorCodes.unableToReadSecretFile", "ManagedIdentityErrorCodes.userAssignedNotAvailableAtRuntime", "ManagedIdentityErrorCodes.wwwAuthenticateHeaderMissing", "ManagedIdentityErrorCodes.wwwAuthenticateHeaderUnsupportedFormat", "DEFAULT_SYSTEM_OPTIONS", "DEFAULT_CACHE_OPTIONS", "DEFAULT_TELEMETRY_OPTIONS", "LogLevel", "crypto", "import_crypto", "init_validate", "init_validate", "uuidv4", "str", "crypto", "crypto", "index", "logger", "key", "logger", "exports", "module", "Buffer", "key", "exports", "module", "Buffer", "util", "exports", "module", "exports", "module", "Buffer", "exports", "module", "Buffer", "exports", "module", "Buffer", "crypto", "util", "key", "timingSafeEqual", "exports", "module", "Buffer", "toString", "exports", "module", "Buffer", "toString", "util", "exports", "module", "Buffer", "toString", "util", "isObject", "exports", "exports", "module", "jwt", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "timestamp", "exports", "module", "require_debug", "exports", "module", "exports", "module", "name", "index", "exports", "module", "exports", "module", "exports", "module", "version", "exports", "module", "version", "exports", "module", "version", "exports", "module", "version", "exports", "module", "version", "exports", "module", "version2", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "version", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "version", "next", "exports", "module", "key", "require_range", "exports", "module", "version", "set", "exports", "module", "version", "exports", "module", "version", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "require_valid", "exports", "module", "exports", "module", "version", "exports", "module", "version", "exports", "module", "version", "exports", "module", "exports", "module", "set", "version", "exports", "module", "require_semver", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "key", "exports", "module", "exports", "module", "header", "secretOrPublicKey", "_", "exports", "module", "index", "key", "hasOwnProperty", "isArray", "isString", "isFunction", "tag", "isObject", "type", "isBinary", "require_lodash", "exports", "module", "isBoolean", "require_lodash", "exports", "module", "isInteger", "isObject", "type", "isBinary", "require_lodash", "exports", "module", "isNumber", "require_lodash", "exports", "module", "hasOwnProperty", "isPlainObject", "require_lodash", "exports", "module", "isArray", "isString", "require_lodash", "exports", "module", "once", "isObject", "type", "isBinary", "require_sign", "exports", "module", "isBoolean", "isInteger", "isNumber", "isPlainObject", "isString", "once", "validate", "schema", "key", "_", "timestamp", "exports", "module", "jwt", "logger", "NodeConstants", "version", "name", "version", "state", "logger", "NodeConstants", "http", "url", "CommonConstants", "Constants", "Constants", "version", "CommonConstants", "logger", "url", "HttpMethod", "logger", "HttpMethod", "ManagedIdentityErrorCodes.invalidManagedIdentityIdType", "ManagedIdentityErrorCodes\r\n            .MsiEnvironmentVariableUrlMalformedErrorCodes", "init_dist", "init_Constants", "init_packageMetadata", "url", "key", "vscode", "randomBytes", "hash", "crypto", "vscode", "componentLogger", "init_dist", "LogLevel", "state", "DEFAULT_ENTRA_CLIENT_ID", "provider", "logger", "isTokenExpired", "key", "normalizeDeviceCodeResponse", "action", "DEFAULT_ENTRA_CLIENT_ID", "DEFAULT_ENTRA_TENANT", "shouldUseAuthCodeFlow", "attemptAuthCodeFlow", "vscode", "init_dist", "dispatchDeviceCodeEvent", "provider", "event", "setupAuthCodeFlow", "shouldUseAuthCodeFlow", "client", "forwardProviderMessage", "provider", "init_azureClient", "init_provider", "state", "logger", "updateAuthStatusBar", "connectionStates", "ConnectionService", "state", "lastError", "getApplicationStoreActor", "snapshot", "activeConnectionId", "connections", "clearSignedOutFlag", "ConnectionService", "clearEntraIdToken", "logger", "clearConnectionState", "AZURE_CLI_CLIENT_ID", "provider", "clearPendingAuthCodeFlowProvider", "markConnectionSignedOut", "updateAuthStatusBar", "connectionStates", "checkConnections", "checkActiveConnectionState", "checkWorkItemsState", "checkActiveQuery", "checkErrors", "testConnection", "generateRecommendations", "vscode", "version", "text", "panel", "logger", "vscode", "component", "index", "startTraceSession", "stopTraceSession", "panel", "event", "action", "vscode", "dispatchApplicationEvent", "panel", "vscode", "run", "history", "index", "state", "init_facts", "state", "event", "timestamp", "history", "init_facts", "init_facts", "state", "init_facts", "state", "event", "snapshot", "init_types", "event", "init_tracing", "registry", "init_engine", "init_types", "init_rules", "init_tracing", "init_engine", "init_facts", "state", "init_engine", "init_facts", "state", "init_rules", "init_rules", "init_types", "init_store", "event", "vscode", "index", "index", "json", "event", "init_store", "init_store", "initialContext", "event", "init_store", "index", "context", "event", "json", "vscode", "event", "key", "fs", "generateTestFromHistory", "vscode", "component", "init_shared", "type", "StartTimerEvent", "PauseTimerEvent", "StopTimerEvent", "init_facts", "init_types", "init_rules", "init_types", "init_facts", "state", "StartTimerEvent", "PauseTimerEvent", "StopTimerEvent", "registry", "init_engine", "init_types", "init_rules", "init_manager", "init_facts", "init_engine", "StartTimerEvent", "PauseTimerEvent", "StopTimerEvent", "init_types", "init_facts", "deviceCodeStartedRule", "deviceCodeCompletedRule", "init_rules", "init_types", "init_facts", "state", "registry", "deviceCodeStartedRule", "deviceCodeCompletedRule", "init_engine", "init_rules", "init_manager", "init_types", "init_facts", "init_engine", "init_manager", "init_engine", "init_tracing", "init_facts", "snapshot", "event", "state", "connections", "next", "event", "activeConnectionId", "event", "logger", "praxisStore", "applicationState", "set", "init_manager", "state", "derived", "connections", "snapshot", "vscode", "log", "timestamp", "filter", "require_constants", "exports", "module", "exports", "module", "source", "exports", "module", "exports", "module", "zlib", "key", "data", "exports", "module", "isBlob", "exports", "module", "Receiver", "exports", "module", "isBlob", "Sender", "extensions", "merge", "exports", "module", "Event", "type", "EventTarget", "isBinary", "event", "exports", "module", "push", "name", "extensions", "exports", "module", "EventEmitter", "https", "http", "randomBytes", "createHash", "Readable", "URL", "Receiver", "Sender", "isBlob", "addEventListener", "removeEventListener", "WebSocket", "type", "head", "key", "extensions", "stream", "isBinary", "exports", "module", "WebSocket", "stream", "createWebSocketStream", "isBinary", "err", "exports", "module", "protocol", "exports", "module", "EventEmitter", "http", "createHash", "WebSocket", "WebSocketServer", "head", "index", "key", "version", "extensions", "map", "event", "import_stream", "WebSocket", "type", "type", "event", "activeConnectionId", "forwardProviderMessage", "loadConnectionsFromConfig", "connectionStates", "shouldLogDebug", "getConfig", "activeConnectionId", "name", "snapshot", "comment", "client", "provider", "field", "event", "url", "pending", "state", "connections", "actor", "fallback", "DEFAULT_QUERY", "extensionContextRef", "next", "key", "action", "text", "registerOutputChannelReader", "startTraceSession", "componentLogger", "Component", "LiveCanvasBridge", "vscode", "fs", "path", "init_facts", "webviewToUse", "stampConnectionMeta"]
}
